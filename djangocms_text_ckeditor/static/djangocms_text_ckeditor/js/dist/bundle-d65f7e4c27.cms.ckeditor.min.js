/*
Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.md or http://ckeditor.com/license
*/
(function(){if(window.CKEDITOR&&window.CKEDITOR.dom)return;window.CKEDITOR||(window.CKEDITOR=function(){var a=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,d={timestamp:"G87E",version:"4.5.11",revision:"3876e73",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:a},status:"unloaded",basePath:function(){var b=window.CKEDITOR_BASEPATH||"";if(!b)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var l=c[d].src.match(a);if(l){b=l[1];break}}-1==b.indexOf(":/")&&"//"!=b.slice(0,2)&&(b=0===b.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+
b:location.href.match(/^[^\?]*\/(?:)/)[0]+b);if(!b)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return b}(),getUrl:function(a){-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=this.basePath+a);this.timestamp&&"/"!=a.charAt(a.length-1)&&!/[&?]t=/.test(a)&&(a+=(0<=a.indexOf("?")?"\x26":"?")+"t\x3d"+this.timestamp);return a},domReady:function(){function a(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",
a,!1),b()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),b())}catch(c){}}function b(){for(var a;a=c.shift();)a()}var c=[];return function(b){function d(){try{document.documentElement.doScroll("left")}catch(e){setTimeout(d,1);return}a()}c.push(b);"complete"===document.readyState&&setTimeout(a,1);if(1==c.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",
a);window.attachEvent("onload",a);b=!1;try{b=!window.frameElement}catch(u){}document.documentElement.doScroll&&b&&d()}}}()},b=window.CKEDITOR_GETURL;if(b){var c=d.getUrl;d.getUrl=function(a){return b.call(d,a)||c.call(d,a)}}return d}());
CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(a){var d=CKEDITOR.event.prototype,b;for(b in d)null==a[b]&&(a[b]=d[b])},CKEDITOR.event.prototype=function(){function a(a){var f=d(this);return f[a]||(f[a]=new b(a))}var d=function(a){a=a.getPrivate&&a.getPrivate()||a._||(a._={});return a.events||(a.events={})},b=function(a){this.name=a;this.listeners=[]};b.prototype={getListenerIndex:function(a){for(var b=0,d=this.listeners;b<d.length;b++)if(d[b].fn==a)return b;return-1}};
return{define:function(b,d){var g=a.call(this,b);CKEDITOR.tools.extend(g,d,!0)},on:function(b,d,g,k,l){function m(a,e,A,l){a={name:b,sender:this,editor:a,data:e,listenerData:k,stop:A,cancel:l,removeListener:u};return!1===d.call(g,a)?!1:a.data}function u(){A.removeListener(b,d)}var e=a.call(this,b);if(0>e.getListenerIndex(d)){e=e.listeners;g||(g=this);isNaN(l)&&(l=10);var A=this;m.fn=d;m.priority=l;for(var r=e.length-1;0<=r;r--)if(e[r].priority<=l)return e.splice(r+1,0,m),{removeListener:u};e.unshift(m)}return{removeListener:u}},
once:function(){var a=Array.prototype.slice.call(arguments),b=a[1];a[1]=function(a){a.removeListener();return b.apply(this,arguments)};return this.on.apply(this,a)},capture:function(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);CKEDITOR.event.useCapture=0;return a},fire:function(){var a=0,b=function(){a=1},g=0,k=function(){g=1};return function(l,m,u){var e=d(this)[l];l=a;var A=g;a=g=0;if(e){var r=e.listeners;if(r.length)for(var r=r.slice(0),x,D=0;D<r.length;D++){if(e.errorProof)try{x=
r[D].call(this,u,m,b,k)}catch(q){}else x=r[D].call(this,u,m,b,k);!1===x?g=1:"undefined"!=typeof x&&(m=x);if(a||g)break}}m=g?!1:"undefined"==typeof m?!0:m;a=l;g=A;return m}}(),fireOnce:function(a,b,g){b=this.fire(a,b,g);delete d(this)[a];return b},removeListener:function(a,b){var g=d(this)[a];if(g){var k=g.getListenerIndex(b);0<=k&&g.listeners.splice(k,1)}},removeAllListeners:function(){var a=d(this),b;for(b in a)delete a[b]},hasListeners:function(a){return(a=d(this)[a])&&0<a.listeners.length}}}());
CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]);CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(a,d){a in{instanceReady:1,loaded:1}&&(this[a]=!0);return CKEDITOR.event.prototype.fire.call(this,a,d,this)},CKEDITOR.editor.prototype.fireOnce=function(a,d){a in{instanceReady:1,loaded:1}&&(this[a]=!0);return CKEDITOR.event.prototype.fireOnce.call(this,a,d,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype));
CKEDITOR.env||(CKEDITOR.env=function(){var a=navigator.userAgent.toLowerCase(),d=a.match(/edge[ \/](\d+.?\d*)/),b=-1<a.indexOf("trident/"),b=!(!d&&!b),b={ie:b,edge:!!d,webkit:!b&&-1<a.indexOf(" applewebkit/"),air:-1<a.indexOf(" adobeair/"),mac:-1<a.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<a.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(a),isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,b=window.location.hostname;
return a!=b&&a!="["+b+"]"},secure:"https:"==location.protocol};b.gecko="Gecko"==navigator.product&&!b.webkit&&!b.ie;b.webkit&&(-1<a.indexOf("chrome")?b.chrome=!0:b.safari=!0);var c=0;b.ie&&(c=d?parseFloat(d[1]):b.quirks||!document.documentMode?parseFloat(a.match(/msie (\d+)/)[1]):document.documentMode,b.ie9Compat=9==c,b.ie8Compat=8==c,b.ie7Compat=7==c,b.ie6Compat=7>c||b.quirks);b.gecko&&(d=a.match(/rv:([\d\.]+)/))&&(d=d[1].split("."),c=1E4*d[0]+100*(d[1]||0)+1*(d[2]||0));b.air&&(c=parseFloat(a.match(/ adobeair\/(\d+)/)[1]));
b.webkit&&(c=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]));b.version=c;b.isCompatible=!(b.ie&&7>c)&&!(b.gecko&&4E4>c)&&!(b.webkit&&534>c);b.hidpi=2<=window.devicePixelRatio;b.needsBrFiller=b.gecko||b.webkit||b.ie&&10<c;b.needsNbspFiller=b.ie&&11>c;b.cssClass="cke_browser_"+(b.ie?"ie":b.gecko?"gecko":b.webkit?"webkit":"unknown");b.quirks&&(b.cssClass+=" cke_browser_quirks");b.ie&&(b.cssClass+=" cke_browser_ie"+(b.quirks?"6 cke_browser_iequirks":b.version));b.air&&(b.cssClass+=" cke_browser_air");
b.iOS&&(b.cssClass+=" cke_browser_ios");b.hidpi&&(b.cssClass+=" cke_hidpi");return b}());
"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var a=document.createElement("script");a.type="text/javascript";a.src=CKEDITOR.basePath+"ckeditor.js";document.getElementsByTagName("head")[0].appendChild(a)}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.add=function(a){(this._.pending||(this._.pending=[])).push(a)};(function(){CKEDITOR.domReady(function(){var a=
CKEDITOR.loadFullCore,d=CKEDITOR.loadFullCoreTimeout;a&&(CKEDITOR.status="basic_ready",a&&a._load?a():d&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1E3*d))})})();CKEDITOR.status="basic_loaded"}();"use strict";CKEDITOR.VERBOSITY_WARN=1;CKEDITOR.VERBOSITY_ERROR=2;CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR;CKEDITOR.warn=function(a,d){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:a,additionalData:d})};
CKEDITOR.error=function(a,d){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:a,additionalData:d})};
CKEDITOR.on("log",function(a){if(window.console&&window.console.log){var d=console[a.data.type]?a.data.type:"log",b=a.data.errorCode;if(a=a.data.additionalData)console[d]("[CKEDITOR] Error code: "+b+".",a);else console[d]("[CKEDITOR] Error code: "+b+".");console[d]("[CKEDITOR] For more information about this error go to http://docs.ckeditor.com/#!/guide/dev_errors-section-"+b)}},null,null,999);CKEDITOR.dom={};
(function(){var a=[],d=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",b=/&/g,c=/>/g,f=/</g,g=/"/g,k=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,l={lt:"\x3c",gt:"\x3e",amp:"\x26",quot:'"',nbsp:" ",shy:"­"},m=function(a,e){return"#"==e[0]?String.fromCharCode(parseInt(e.slice(1),10)):l[e]};CKEDITOR.on("reset",function(){a=[]});CKEDITOR.tools={arrayCompare:function(a,e){if(!a&&!e)return!0;if(!a||!e||a.length!=e.length)return!1;for(var b=0;b<a.length;b++)if(a[b]!=e[b])return!1;
return!0},getIndex:function(a,e){for(var b=0;b<a.length;++b)if(e(a[b]))return b;return-1},clone:function(a){var e;if(a&&a instanceof Array){e=[];for(var b=0;b<a.length;b++)e[b]=CKEDITOR.tools.clone(a[b]);return e}if(null===a||"object"!=typeof a||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp||a.nodeType||a.window===a)return a;e=new a.constructor;for(b in a)e[b]=CKEDITOR.tools.clone(a[b]);return e},capitalize:function(a,e){return a.charAt(0).toUpperCase()+
(e?a.slice(1):a.slice(1).toLowerCase())},extend:function(a){var e=arguments.length,b,c;"boolean"==typeof(b=arguments[e-1])?e--:"boolean"==typeof(b=arguments[e-2])&&(c=arguments[e-1],e-=2);for(var l=1;l<e;l++){var d=arguments[l],q;for(q in d)if(!0===b||null==a[q])if(!c||q in c)a[q]=d[q]}return a},prototypedCopy:function(a){var e=function(){};e.prototype=a;return new e},copy:function(a){var e={},b;for(b in a)e[b]=a[b];return e},isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)},
isEmpty:function(a){for(var e in a)if(a.hasOwnProperty(e))return!1;return!0},cssVendorPrefix:function(a,e,b){if(b)return d+a+":"+e+";"+a+":"+e;b={};b[a]=e;b[d+a]=e;return b},cssStyleToDomStyle:function(){var a=document.createElement("div").style,e="undefined"!=typeof a.cssFloat?"cssFloat":"undefined"!=typeof a.styleFloat?"styleFloat":"float";return function(a){return"float"==a?e:a.replace(/-./g,function(a){return a.substr(1).toUpperCase()})}}(),buildStyleHtml:function(a){a=[].concat(a);for(var e,
b=[],c=0;c<a.length;c++)if(e=a[c])/@import|[{}]/.test(e)?b.push("\x3cstyle\x3e"+e+"\x3c/style\x3e"):b.push('\x3clink type\x3d"text/css" rel\x3dstylesheet href\x3d"'+e+'"\x3e');return b.join("")},htmlEncode:function(a){return void 0===a||null===a?"":String(a).replace(b,"\x26amp;").replace(c,"\x26gt;").replace(f,"\x26lt;")},htmlDecode:function(a){return a.replace(k,m)},htmlEncodeAttr:function(a){return CKEDITOR.tools.htmlEncode(a).replace(g,"\x26quot;")},htmlDecodeAttr:function(a){return CKEDITOR.tools.htmlDecode(a)},
transformPlainTextToHtml:function(a,e){var b=e==CKEDITOR.ENTER_BR,c=this.htmlEncode(a.replace(/\r\n/g,"\n")),c=c.replace(/\t/g,"\x26nbsp;\x26nbsp; \x26nbsp;"),l=e==CKEDITOR.ENTER_P?"p":"div";if(!b){var d=/\n{2}/g;if(d.test(c))var q="\x3c"+l+"\x3e",m="\x3c/"+l+"\x3e",c=q+c.replace(d,function(){return m+q})+m}c=c.replace(/\n/g,"\x3cbr\x3e");b||(c=c.replace(new RegExp("\x3cbr\x3e(?\x3d\x3c/"+l+"\x3e)"),function(a){return CKEDITOR.tools.repeat(a,2)}));c=c.replace(/^ | $/g,"\x26nbsp;");return c=c.replace(/(>|\s) /g,
function(a,e){return e+"\x26nbsp;"}).replace(/ (?=<)/g,"\x26nbsp;")},getNextNumber:function(){var a=0;return function(){return++a}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var a="e",e=0;8>e;e++)a+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return a},override:function(a,e){var b=e(a);b.prototype=a.prototype;return b},setTimeout:function(a,e,b,c,l){l||(l=window);b||(b=l);return l.setTimeout(function(){c?a.apply(b,[].concat(c)):a.apply(b)},
e||0)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(e){return e.replace(a,"")}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(e){return e.replace(a,"")}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(e){return e.replace(a,"")}}(),indexOf:function(a,e){if("function"==typeof e)for(var b=0,c=a.length;b<c;b++){if(e(a[b]))return b}else{if(a.indexOf)return a.indexOf(e);b=0;for(c=a.length;b<c;b++)if(a[b]===e)return b}return-1},search:function(a,e){var b=CKEDITOR.tools.indexOf(a,
e);return 0<=b?a[b]:null},bind:function(a,e){return function(){return a.apply(e,arguments)}},createClass:function(a){var e=a.$,b=a.base,c=a.privates||a._,l=a.proto;a=a.statics;!e&&(e=function(){b&&this.base.apply(this,arguments)});if(c)var d=e,e=function(){var a=this._||(this._={}),e;for(e in c){var b=c[e];a[e]="function"==typeof b?CKEDITOR.tools.bind(b,this):b}d.apply(this,arguments)};b&&(e.prototype=this.prototypedCopy(b.prototype),e.prototype.constructor=e,e.base=b,e.baseProto=b.prototype,e.prototype.base=
function(){this.base=b.prototype.base;b.apply(this,arguments);this.base=arguments.callee});l&&this.extend(e.prototype,l,!0);a&&this.extend(e,a,!0);return e},addFunction:function(b,e){return a.push(function(){return b.apply(e||this,arguments)})-1},removeFunction:function(b){a[b]=null},callFunction:function(b){var e=a[b];return e&&e.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var a=/^-?\d+\.?\d*px$/,e;return function(b){e=CKEDITOR.tools.trim(b+"")+"px";return a.test(e)?
e:b||""}}(),convertToPx:function(){var a;return function(e){a||(a=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"\x3e\x3c/div\x3e',CKEDITOR.document),CKEDITOR.document.getBody().append(a));return/%$/.test(e)?e:(a.setStyle("width",e),a.$.clientWidth)}}(),repeat:function(a,e){return Array(e+1).join(a)},tryThese:function(){for(var a,e=0,b=arguments.length;e<b;e++){var c=arguments[e];try{a=c();break}catch(l){}}return a},
genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(a){return function(){var e=arguments,b=this;window.setTimeout(function(){a.apply(b,e)},0)}},normalizeCssText:function(a,e){var b=[],c,l=CKEDITOR.tools.parseCssText(a,!0,e);for(c in l)b.push(c+":"+l[c]);b.sort();return b.length?b.join(";")+";":""},convertRgbToHex:function(a){return a.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(a,b,c,l){a=[b,c,l];for(b=0;3>b;b++)a[b]=("0"+parseInt(a[b],10).toString(16)).slice(-2);
return"#"+a.join("")})},normalizeHex:function(a){return a.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,function(a,b,c,l){a=b.toLowerCase();3==a.length&&(a=a.split(""),a=[a[0],a[0],a[1],a[1],a[2],a[2]].join(""));return"#"+a+l})},parseCssText:function(a,b,c){var l={};c&&(a=(new CKEDITOR.dom.element("span")).setAttribute("style",a).getAttribute("style")||"");a&&(a=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(a)));if(!a||";"==a)return l;a.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,
function(a,c,d){b&&(c=c.toLowerCase(),"font-family"==c&&(d=d.replace(/\s*,\s*/g,",")),d=CKEDITOR.tools.trim(d));l[c]=d});return l},writeCssText:function(a,b){var c,l=[];for(c in a)l.push(c+":"+a[c]);b&&l.sort();return l.join("; ")},objectCompare:function(a,b,c){var l;if(!a&&!b)return!0;if(!a||!b)return!1;for(l in a)if(a[l]!=b[l])return!1;if(!c)for(l in b)if(a[l]!=b[l])return!1;return!0},objectKeys:function(a){var b=[],c;for(c in a)b.push(c);return b},convertArrayToObject:function(a,b){var c={};1==
arguments.length&&(b=!0);for(var l=0,d=a.length;l<d;++l)c[a[l]]=b;return c},fixDomain:function(){for(var a;;)try{a=window.parent.document.domain;break}catch(b){a=a?a.replace(/.+?(?:\.|$)/,""):document.domain;if(!a)break;document.domain=a}return!!a},eventsBuffer:function(a,b,c){function l(){m=(new Date).getTime();d=!1;c?b.call(c):b()}var d,m=0;return{input:function(){if(!d){var b=(new Date).getTime()-m;b<a?d=setTimeout(l,a-b):l()}},reset:function(){d&&clearTimeout(d);d=m=0}}},enableHtml5Elements:function(a,
b){for(var c="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),l=c.length,d;l--;)d=a.createElement(c[l]),b&&a.appendChild(d)},checkIfAnyArrayItemMatches:function(a,b){for(var c=0,l=a.length;c<l;++c)if(a[c].match(b))return!0;return!1},checkIfAnyObjectPropertyMatches:function(a,b){for(var c in a)if(c.match(b))return!0;return!1},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw\x3d\x3d",
getCookie:function(a){a=a.toLowerCase();for(var b=document.cookie.split(";"),c,l,d=0;d<b.length;d++)if(c=b[d].split("\x3d"),l=decodeURIComponent(CKEDITOR.tools.trim(c[0]).toLowerCase()),l===a)return decodeURIComponent(1<c.length?c[1]:"");return null},setCookie:function(a,b){document.cookie=encodeURIComponent(a)+"\x3d"+encodeURIComponent(b)+";path\x3d/"},getCsrfToken:function(){var a=CKEDITOR.tools.getCookie("ckCsrfToken");if(!a||40!=a.length){var a=[],b="";if(window.crypto&&window.crypto.getRandomValues)a=
new Uint8Array(40),window.crypto.getRandomValues(a);else for(var c=0;40>c;c++)a.push(Math.floor(256*Math.random()));for(c=0;c<a.length;c++)var l="abcdefghijklmnopqrstuvwxyz0123456789".charAt(a[c]%36),b=b+(.5<Math.random()?l.toUpperCase():l);a=b;CKEDITOR.tools.setCookie("ckCsrfToken",a)}return a},escapeCss:function(a){return a?window.CSS&&CSS.escape?CSS.escape(a):isNaN(parseInt(a.charAt(0),10))?a:"\\3"+a.charAt(0)+" "+a.substring(1,a.length):""}}})();
CKEDITOR.dtd=function(){var a=CKEDITOR.tools.extend,d=function(a,b){for(var c=CKEDITOR.tools.clone(a),l=1;l<arguments.length;l++){b=arguments[l];for(var d in b)delete c[d]}return c},b={},c={},f={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},g={command:1,link:1,meta:1,noscript:1,script:1,style:1},k={},l={"#":1},m={center:1,dir:1,noframes:1};
a(b,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},l,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1});a(c,f,b,m);d={a:d(b,{a:1,button:1}),abbr:b,address:c,
area:k,article:c,aside:c,audio:a({source:1,track:1},c),b:b,base:k,bdi:b,bdo:b,blockquote:c,body:c,br:k,button:d(b,{a:1,button:1}),canvas:b,caption:c,cite:b,code:b,col:k,colgroup:{col:1},command:k,datalist:a({option:1},b),dd:c,del:b,details:a({summary:1},c),dfn:b,div:c,dl:{dt:1,dd:1},dt:c,em:b,embed:k,fieldset:a({legend:1},c),figcaption:c,figure:a({figcaption:1},c),footer:c,form:c,h1:b,h2:b,h3:b,h4:b,h5:b,h6:b,head:a({title:1,base:1},g),header:c,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:k,html:a({head:1,
body:1},c,g),i:b,iframe:l,img:k,input:k,ins:b,kbd:b,keygen:k,label:b,legend:b,li:c,link:k,main:c,map:c,mark:b,menu:a({li:1},c),meta:k,meter:d(b,{meter:1}),nav:c,noscript:a({link:1,meta:1,style:1},b),object:a({param:1},b),ol:{li:1},optgroup:{option:1},option:l,output:b,p:b,param:k,pre:b,progress:d(b,{progress:1}),q:b,rp:b,rt:b,ruby:a({rp:1,rt:1},b),s:b,samp:b,script:l,section:c,select:{optgroup:1,option:1},small:b,source:k,span:b,strong:b,style:l,sub:b,summary:a({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},b),
sup:b,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:c,textarea:l,tfoot:{tr:1},th:c,thead:{tr:1},time:d(b,{time:1}),title:l,tr:{th:1,td:1},track:k,u:b,ul:{li:1},"var":b,video:a({source:1,track:1},c),wbr:k,acronym:b,applet:a({param:1},c),basefont:k,big:b,center:c,dialog:k,dir:{li:1},font:b,isindex:k,noframes:c,strike:b,tt:b};a(d,{$block:a({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},f,m),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,
fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,
track:1,wbr:1},$inline:b,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:a({body:1,head:1,html:1},d.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,
s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}});return d}();
CKEDITOR.dom.event=function(a){this.$=a};
CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this.getKey();if(this.$.ctrlKey||this.$.metaKey)a+=CKEDITOR.CTRL;this.$.shiftKey&&(a+=CKEDITOR.SHIFT);this.$.altKey&&(a+=CKEDITOR.ALT);return a},preventDefault:function(a){var d=this.$;d.preventDefault?d.preventDefault():d.returnValue=!1;a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=
this.$.target||this.$.srcElement;return a?new CKEDITOR.dom.node(a):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var a=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(a.documentElement.scrollLeft||a.body.scrollLeft),y:this.$.pageY||this.$.clientY+(a.documentElement.scrollTop||a.body.scrollTop)}}};CKEDITOR.CTRL=1114112;CKEDITOR.SHIFT=2228224;CKEDITOR.ALT=4456448;CKEDITOR.EVENT_PHASE_CAPTURING=1;CKEDITOR.EVENT_PHASE_AT_TARGET=2;
CKEDITOR.EVENT_PHASE_BUBBLING=3;CKEDITOR.dom.domObject=function(a){a&&(this.$=a)};
CKEDITOR.dom.domObject.prototype=function(){var a=function(a,b){return function(c){"undefined"!=typeof CKEDITOR&&a.fire(b,new CKEDITOR.dom.event(c))}};return{getPrivate:function(){var a;(a=this.getCustomData("_"))||this.setCustomData("_",a={});return a},on:function(d){var b=this.getCustomData("_cke_nativeListeners");b||(b={},this.setCustomData("_cke_nativeListeners",b));b[d]||(b=b[d]=a(this,d),this.$.addEventListener?this.$.addEventListener(d,b,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+
d,b));return CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(a){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(a)){var b=this.getCustomData("_cke_nativeListeners"),c=b&&b[a];c&&(this.$.removeEventListener?this.$.removeEventListener(a,c,!1):this.$.detachEvent&&this.$.detachEvent("on"+a,c),delete b[a])}},removeAllListeners:function(){var a=this.getCustomData("_cke_nativeListeners"),b;for(b in a){var c=a[b];this.$.detachEvent?this.$.detachEvent("on"+
b,c):this.$.removeEventListener&&this.$.removeEventListener(b,c,!1);delete a[b]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}();
(function(a){var d={};CKEDITOR.on("reset",function(){d={}});a.equals=function(a){try{return a&&a.$===this.$}catch(c){return!1}};a.setCustomData=function(a,c){var f=this.getUniqueId();(d[f]||(d[f]={}))[a]=c;return this};a.getCustomData=function(a){var c=this.$["data-cke-expando"];return(c=c&&d[c])&&a in c?c[a]:null};a.removeCustomData=function(a){var c=this.$["data-cke-expando"],c=c&&d[c],f,g;c&&(f=c[a],g=a in c,delete c[a]);return g?f:null};a.clearCustomData=function(){this.removeAllListeners();var a=
this.$["data-cke-expando"];a&&delete d[a]};a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(a)})(CKEDITOR.dom.domObject.prototype);
CKEDITOR.dom.node=function(a){return a?new CKEDITOR.dom[a.nodeType==CKEDITOR.NODE_DOCUMENT?"document":a.nodeType==CKEDITOR.NODE_ELEMENT?"element":a.nodeType==CKEDITOR.NODE_TEXT?"text":a.nodeType==CKEDITOR.NODE_COMMENT?"comment":a.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](a):this};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject;CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;
CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;
CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(a,d){a.append(this,d);return a},clone:function(a,d){function b(c){c["data-cke-expando"]&&(c["data-cke-expando"]=!1);if(c.nodeType==CKEDITOR.NODE_ELEMENT||c.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)if(d||c.nodeType!=CKEDITOR.NODE_ELEMENT||c.removeAttribute("id",!1),a){c=c.childNodes;for(var f=0;f<c.length;f++)b(c[f])}}function c(b){if(b.type==CKEDITOR.NODE_ELEMENT||b.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(b.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var d=
b.getName();":"==d[0]&&b.renameNode(d.substring(1))}if(a)for(d=0;d<b.getChildCount();d++)c(b.getChild(d))}}var f=this.$.cloneNode(a);b(f);f=new CKEDITOR.dom.node(f);CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&c(f);return f},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){a.$.parentNode.insertBefore(this.$,a.$.nextSibling);return a},insertBefore:function(a){a.$.parentNode.insertBefore(this.$,
a.$);return a},insertBeforeMe:function(a){this.$.parentNode.insertBefore(a.$,this.$);return a},getAddress:function(a){for(var d=[],b=this.getDocument().$.documentElement,c=this.$;c&&c!=b;){var f=c.parentNode;f&&d.unshift(this.getIndex.call({$:c},a));c=f}return d},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(a){function d(a,c){var m=c?a.nextSibling:a.previousSibling;return m&&m.nodeType==CKEDITOR.NODE_TEXT?b(m)?d(m,
c):m:null}function b(a){return!a.nodeValue||a.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var c=this.$,f=-1,g;if(!this.$.parentNode||a&&c.nodeType==CKEDITOR.NODE_TEXT&&b(c)&&!d(c)&&!d(c,!0))return-1;do a&&c!=this.$&&c.nodeType==CKEDITOR.NODE_TEXT&&(g||b(c))||(f++,g=c.nodeType==CKEDITOR.NODE_TEXT);while(c=c.previousSibling);return f},getNextSourceNode:function(a,d,b){if(b&&!b.call){var c=b;b=function(a){return!a.equals(c)}}a=!a&&this.getFirst&&this.getFirst();var f;if(!a){if(this.type==
CKEDITOR.NODE_ELEMENT&&b&&!1===b(this,!0))return null;a=this.getNext()}for(;!a&&(f=(f||this).getParent());){if(b&&!1===b(f,!0))return null;a=f.getNext()}return!a||b&&!1===b(a)?null:d&&d!=a.type?a.getNextSourceNode(!1,d,b):a},getPreviousSourceNode:function(a,d,b){if(b&&!b.call){var c=b;b=function(a){return!a.equals(c)}}a=!a&&this.getLast&&this.getLast();var f;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&b&&!1===b(this,!0))return null;a=this.getPrevious()}for(;!a&&(f=(f||this).getParent());){if(b&&!1===
b(f,!0))return null;a=f.getPrevious()}return!a||b&&!1===b(a)?null:d&&a.type!=d?a.getPreviousSourceNode(!1,d,b):a},getPrevious:function(a){var d=this.$,b;do b=(d=d.previousSibling)&&10!=d.nodeType&&new CKEDITOR.dom.node(d);while(b&&a&&!a(b));return b},getNext:function(a){var d=this.$,b;do b=(d=d.nextSibling)&&new CKEDITOR.dom.node(d);while(b&&a&&!a(b));return b},getParent:function(a){var d=this.$.parentNode;return d&&(d.nodeType==CKEDITOR.NODE_ELEMENT||a&&d.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?
new CKEDITOR.dom.node(d):null},getParents:function(a){var d=this,b=[];do b[a?"push":"unshift"](d);while(d=d.getParent());return b},getCommonAncestor:function(a){if(a.equals(this))return this;if(a.contains&&a.contains(this))return a;var d=this.contains?this:this.getParent();do if(d.contains(a))return d;while(d=d.getParent());return null},getPosition:function(a){var d=this.$,b=a.$;if(d.compareDocumentPosition)return d.compareDocumentPosition(b);if(d==b)return CKEDITOR.POSITION_IDENTICAL;if(this.type==
CKEDITOR.NODE_ELEMENT&&a.type==CKEDITOR.NODE_ELEMENT){if(d.contains){if(d.contains(b))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(b.contains(d))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in d)return 0>d.sourceIndex||0>b.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:d.sourceIndex<b.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}d=this.getAddress();a=a.getAddress();for(var b=Math.min(d.length,a.length),c=0;c<b;c++)if(d[c]!=
a[c])return d[c]<a[c]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return d.length<a.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(a,d){var b=this.$,c,f;d||(b=b.parentNode);"function"==typeof a?(f=!0,c=a):(f=!1,c=function(b){b="string"==typeof b.nodeName?b.nodeName.toLowerCase():"";return"string"==typeof a?b==a:b in a});for(;b;){if(c(f?new CKEDITOR.dom.node(b):b))return new CKEDITOR.dom.node(b);
try{b=b.parentNode}catch(g){b=null}}return null},hasAscendant:function(a,d){var b=this.$;d||(b=b.parentNode);for(;b;){if(b.nodeName&&b.nodeName.toLowerCase()==a)return!0;b=b.parentNode}return!1},move:function(a,d){a.append(this.remove(),d)},remove:function(a){var d=this.$,b=d.parentNode;if(b){if(a)for(;a=d.firstChild;)b.insertBefore(d.removeChild(a),d);b.removeChild(d)}return this},replace:function(a){this.insertBefore(a);a.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var a;this.getFirst&&
(a=this.getFirst());){if(a.type==CKEDITOR.NODE_TEXT){var d=CKEDITOR.tools.ltrim(a.getText()),b=a.getLength();if(d)d.length<b&&(a.split(b-d.length),this.$.removeChild(this.$.firstChild));else{a.remove();continue}}break}},rtrim:function(){for(var a;this.getLast&&(a=this.getLast());){if(a.type==CKEDITOR.NODE_TEXT){var d=CKEDITOR.tools.rtrim(a.getText()),b=a.getLength();if(d)d.length<b&&(a.split(d.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild));else{a.remove();continue}}break}CKEDITOR.env.needsBrFiller&&
(a=this.$.lastChild)&&1==a.type&&"br"==a.nodeName.toLowerCase()&&a.parentNode.removeChild(a)},isReadOnly:function(a){var d=this;this.type!=CKEDITOR.NODE_ELEMENT&&(d=this.getParent());CKEDITOR.env.edge&&d&&d.is("textarea","input")&&(a=!0);if(!a&&d&&"undefined"!=typeof d.$.isContentEditable)return!(d.$.isContentEditable||d.data("cke-editable"));for(;d;){if(d.data("cke-editable"))return!1;if(d.hasAttribute("contenteditable"))return"false"==d.getAttribute("contenteditable");d=d.getParent()}return!0}});
CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject;
CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var a=this.$.document,d="CSS1Compat"==a.compatMode;return{width:(d?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(d?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};a=a.document;return{x:a.documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||
a.body.scrollTop||0}},getFrame:function(){var a=this.$.frameElement;return a?new CKEDITOR.dom.element.get(a):null}});CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject;
CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var d=new CKEDITOR.dom.element("link");d.setAttributes({rel:"stylesheet",type:"text/css",href:a});this.getHead().append(d)}},appendStyleText:function(a){if(this.$.createStyleSheet){var d=this.$.createStyleSheet("");d.cssText=a}else{var b=new CKEDITOR.dom.element("style",this);b.append(new CKEDITOR.dom.text(a,this));this.getHead().append(b)}return d||
b.$.sheet},createElement:function(a,d){var b=new CKEDITOR.dom.element(a,this);d&&(d.attributes&&b.setAttributes(d.attributes),d.styles&&b.setStyles(d.styles));return b},createText:function(a){return new CKEDITOR.dom.text(a,this)},focus:function(){this.getWindow().focus()},getActive:function(){var a;try{a=this.$.activeElement}catch(d){return null}return new CKEDITOR.dom.element(a)},getById:function(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null},getByAddress:function(a,d){for(var b=
this.$.documentElement,c=0;b&&c<a.length;c++){var f=a[c];if(d)for(var g=-1,k=0;k<b.childNodes.length;k++){var l=b.childNodes[k];if(!0!==d||3!=l.nodeType||!l.previousSibling||3!=l.previousSibling.nodeType)if(g++,g==f){b=l;break}}else b=b.childNodes[f]}return b?new CKEDITOR.dom.node(b):null},getElementsByTag:function(a,d){CKEDITOR.env.ie&&8>=document.documentMode||!d||(a=d+":"+a);return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];
return a=a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(a){this.$.open("text/html","replace");CKEDITOR.env.ie&&(a=a.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$\x26\n\x3cscript data-cke-temp\x3d"1"\x3e('+
CKEDITOR.tools.fixDomain+")();\x3c/script\x3e"));this.$.write(a);this.$.close()},find:function(a){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(a))},findOne:function(a){return(a=this.$.querySelector(a))?new CKEDITOR.dom.element(a):null},_getHtml5ShivFrag:function(){var a=this.getCustomData("html5ShivFrag");a||(a=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(a,!0),this.setCustomData("html5ShivFrag",a));return a}});CKEDITOR.dom.nodeList=function(a){this.$=a};
CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){return 0>a||a>=this.$.length?null:(a=this.$[a])?new CKEDITOR.dom.node(a):null}};CKEDITOR.dom.element=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createElement(a));CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.element.get=function(a){return(a="string"==typeof a?document.getElementById(a)||document.getElementsByName(a)[0]:a)&&(a.$?a:new CKEDITOR.dom.element(a))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node;
CKEDITOR.dom.element.createFromHtml=function(a,d){var b=new CKEDITOR.dom.element("div",d);b.setHtml(a);return b.getFirst().remove()};CKEDITOR.dom.element.setMarker=function(a,d,b,c){var f=d.getCustomData("list_marker_id")||d.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),g=d.getCustomData("list_marker_names")||d.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");a[f]=d;g[b]=1;return d.setCustomData(b,c)};
CKEDITOR.dom.element.clearAllMarkers=function(a){for(var d in a)CKEDITOR.dom.element.clearMarkers(a,a[d],1)};CKEDITOR.dom.element.clearMarkers=function(a,d,b){var c=d.getCustomData("list_marker_names"),f=d.getCustomData("list_marker_id"),g;for(g in c)d.removeCustomData(g);d.removeCustomData("list_marker_names");b&&(d.removeCustomData("list_marker_id"),delete a[f])};
(function(){function a(a,b){return-1<(" "+a+" ").replace(g," ").indexOf(" "+b+" ")}function d(a){var b=!0;a.$.id||(a.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),b=!1);return function(){b||a.removeAttribute("id")}}function b(a,b){var c=CKEDITOR.tools.escapeCss(a.$.id);return"#"+c+" "+b.split(/,\s*/).join(", #"+c+" ")}function c(a){for(var b=0,c=0,e=k[a].length;c<e;c++)b+=parseInt(this.getComputedStyle(k[a][c])||0,10)||0;return b}var f=document.createElement("_").classList,f="undefined"!==typeof f&&
null!==String(f.add).match(/\[Native code\]/gi),g=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:f?function(a){this.$.classList.add(a);return this}:function(b){var c=this.$.className;c&&(a(c,b)||(c+=" "+b));this.$.className=c||b;return this},removeClass:f?function(a){var b=this.$;b.classList.remove(a);b.className||b.removeAttribute("class");return this}:function(b){var c=this.getAttribute("class");c&&a(c,b)&&((c=c.replace(new RegExp("(?:^|\\s+)"+
b+"(?\x3d\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",c):this.removeAttribute("class"));return this},hasClass:function(b){return a(this.$.className,b)},append:function(a,b){"string"==typeof a&&(a=this.getDocument().createElement(a));b?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$);return a},appendHtml:function(a){if(this.$.childNodes.length){var b=new CKEDITOR.dom.element("div",this.getDocument());b.setHtml(a);b.moveChildren(this)}else this.setHtml(a)},appendText:function(a){null!=
this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=a:this.append(new CKEDITOR.dom.text(a))},appendBogus:function(a){if(a||CKEDITOR.env.needsBrFiller){for(a=this.getLast();a&&a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(a.getText());)a=a.getPrevious();a&&a.is&&a.is("br")||(a=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&a.setAttribute("type","_moz"),this.append(a))}},breakParent:function(a,b){var c=new CKEDITOR.dom.range(this.getDocument());c.setStartAfter(this);c.setEndAfter(a);
var e=c.extractContents(!1,b||!1),d;c.insertNode(this.remove());if(CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(c=new CKEDITOR.dom.element("div");d=e.getFirst();)d.$.style.backgroundColor&&(d.$.style.backgroundColor=d.$.style.backgroundColor),c.append(d);c.insertAfter(this);c.remove(!0)}else e.insertAfterNode(this)},contains:document.compareDocumentPosition?function(a){return!!(this.$.compareDocumentPosition(a.$)&16)}:function(a){var b=this.$;return a.type!=CKEDITOR.NODE_ELEMENT?b.contains(a.getParent().$):
b!=a.$&&b.contains(a.$)},focus:function(){function a(){try{this.$.focus()}catch(b){}}return function(b){b?CKEDITOR.tools.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return CKEDITOR.env.ie?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var a=this.$.ownerDocument.createElement("div");a.appendChild(this.$.cloneNode(!0));return a.innerHTML},getClientRect:function(){var a=CKEDITOR.tools.extend({},
this.$.getBoundingClientRect());!a.width&&(a.width=a.right-a.left);!a.height&&(a.height=a.bottom-a.top);return a},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(a){try{var b=this.$;if(this.getParent())return b.innerHTML=a;var c=this.getDocument()._getHtml5ShivFrag();c.appendChild(b);b.innerHTML=a;c.removeChild(b);return a}catch(e){this.$.innerHTML="";b=new CKEDITOR.dom.element("body",this.getDocument());b.$.innerHTML=a;for(b=b.getChildren();b.count();)this.append(b.getItem(0));return a}}:
function(a){return this.$.innerHTML=a},setText:function(){var a=document.createElement("p");a.innerHTML="x";a=a.textContent;return function(b){this.$[a?"textContent":"innerText"]=b}}(),getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){switch(a){case "class":a="className";break;case "http-equiv":a="httpEquiv";break;case "name":return this.$.name;case "tabindex":return a=this.$.getAttribute(a,
2),0!==a&&0===this.$.tabIndex&&(a=null),a;case "checked":return a=this.$.attributes.getNamedItem(a),(a.specified?a.nodeValue:this.$.checked)?"checked":null;case "hspace":case "value":return this.$[a];case "style":return this.$.style.cssText;case "contenteditable":case "contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(a,2)}:a}(),getAttributes:function(a){var b={},c=this.$.attributes,e;a=CKEDITOR.tools.isArray(a)?
a:[];for(e=0;e<c.length;e++)-1===CKEDITOR.tools.indexOf(a,c[e].name)&&(b[c[e].name]=c[e].value);return b},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(a){var b=this.getWindow().$.getComputedStyle(this.$,null);return b?b.getPropertyValue(a):""}:function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)]},getDtd:function(){var a=CKEDITOR.dtd[this.getName()];this.getDtd=
function(){return a};return a},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var a=this.$.tabIndex;return 0!==a||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?a:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();
if(CKEDITOR.env.ie&&8>=document.documentMode){var b=this.$.scopeName;"HTML"!=b&&(a=b.toLowerCase()+":"+a)}this.getName=function(){return a};return this.getName()},getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild;(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getNext(a));return b},getLast:function(a){var b=this.$.lastChild;(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getPrevious(a));return b},getStyle:function(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]},
is:function(){var a=this.getName();if("object"==typeof arguments[0])return!!arguments[0][a];for(var b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},isEditable:function(a){var b=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[b]||CKEDITOR.dtd.$empty[b]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:!1!==a?(a=CKEDITOR.dtd[b]||
CKEDITOR.dtd.span,!(!a||!a["#"])):!0},isIdentical:function(a){var b=this.clone(0,1);a=a.clone(0,1);b.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);a.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(b.$.isEqualNode)return b.$.style.cssText=CKEDITOR.tools.normalizeCssText(b.$.style.cssText),a.$.style.cssText=CKEDITOR.tools.normalizeCssText(a.$.style.cssText),b.$.isEqualNode(a.$);b=b.getOuterHtml();a=
a.getOuterHtml();if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var c=this.getParent();c.type==CKEDITOR.NODE_ELEMENT&&(c=c.clone(),c.setHtml(b),b=c.getHtml(),c.setHtml(a),a=c.getHtml())}return b==a},isVisible:function(){var a=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility"),b,c;a&&CKEDITOR.env.webkit&&(b=this.getWindow(),!b.equals(CKEDITOR.document.getWindow())&&(c=b.$.frameElement)&&(a=(new CKEDITOR.dom.element(c)).isVisible()));return!!a},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;
for(var a=this.getChildren(),b=0,c=a.count();b<c;b++){var e=a.getItem(b);if(e.type!=CKEDITOR.NODE_ELEMENT||!e.data("cke-bookmark"))if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEmptyInlineRemoveable()||e.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(e.getText()))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case "class":if(this.getAttribute("class"))return!0;case "data-cke-expando":continue;
default:if(c.specified)return!0}}return!1}:function(){var a=this.$.attributes,b=a.length,c={"data-cke-expando":1,_moz_dirty:1};return 0<b&&(2<b||!c[a[0].nodeName]||2==b&&!c[a[1].nodeName])},hasAttribute:function(){function a(b){var c=this.$.attributes.getNamedItem(b);if("input"==this.getName())switch(b){case "class":return 0<this.$.className.length;case "checked":return!!this.$.checked;case "value":return b=this.getAttribute("type"),"checkbox"==b||"radio"==b?"on"!=this.$.value:!!this.$.value}return c?
c.specified:!1}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(b){return"name"==b?!!this.$.name:a.call(this,b)}:a:function(a){return!!this.$.attributes.getNamedItem(a)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var c=this.$;a=a.$;if(c!=a){var e;if(b)for(;e=c.lastChild;)a.insertBefore(c.removeChild(e),a.firstChild);else for(;e=c.firstChild;)a.appendChild(c.removeChild(e))}},mergeSiblings:function(){function a(b,c,e){if(c&&c.type==CKEDITOR.NODE_ELEMENT){for(var d=
[];c.data("cke-bookmark")||c.isEmptyInlineRemoveable();)if(d.push(c),c=e?c.getNext():c.getPrevious(),!c||c.type!=CKEDITOR.NODE_ELEMENT)return;if(b.isIdentical(c)){for(var l=e?b.getLast():b.getFirst();d.length;)d.shift().move(b,!e);c.moveChildren(b,!e);c.remove();l&&l.type==CKEDITOR.NODE_ELEMENT&&l.mergeSiblings()}}}return function(b){if(!1===b||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))a(this,this.getNext(),!0),a(this,this.getPrevious())}}(),show:function(){this.setStyles({display:"",
visibility:""})},setAttribute:function(){var a=function(a,b){this.$.setAttribute(a,b);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(b,c){"class"==b?this.$.className=c:"style"==b?this.$.style.cssText=c:"tabindex"==b?this.$.tabIndex=c:"checked"==b?this.$.checked=c:"contenteditable"==b?a.call(this,"contentEditable",c):a.apply(this,arguments);return this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(b,c){if("src"==b&&c.match(/^http:\/\//))try{a.apply(this,
arguments)}catch(e){}else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){this.$.value=a;return this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){"class"==a?a="className":"tabindex"==a?a="tabIndex":"contenteditable"==a&&(a="contentEditable");this.$.removeAttribute(a)}:a}(),removeAttributes:function(a){if(CKEDITOR.tools.isArray(a))for(var b=
0;b<a.length;b++)this.removeAttribute(a[b]);else for(b in a=a||this.getAttributes(),a)a.hasOwnProperty(b)&&this.removeAttribute(b)},removeStyle:function(a){var b=this.$.style;if(b.removeProperty||"border"!=a&&"margin"!=a&&"padding"!=a)b.removeProperty?b.removeProperty(a):b.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a)),this.$.style.cssText||this.removeAttribute("style");else{var c=["top","left","right","bottom"],e;"border"==a&&(e=["color","style","width"]);for(var b=[],d=0;d<c.length;d++)if(e)for(var r=
0;r<e.length;r++)b.push([a,c[d],e[r]].join("-"));else b.push([a,c[d]].join("-"));for(a=0;a<b.length;a++)this.removeStyle(b[a])}},setStyle:function(a,b){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=b;return this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(a=Math.round(100*a),this.setStyle("filter",100<=a?"":"progid:DXImageTransform.Microsoft.Alpha(opacity\x3d"+a+")")):this.setStyle("opacity",a)},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select",
"none"));if(CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var a,b=this.getElementsByTag("*"),c=0,e=b.count();c<e;c++)a=b.getItem(c),a.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},getDocumentPosition:function(a){var b=0,c=0,e=this.getDocument(),d=e.getBody(),r="BackCompat"==e.$.compatMode;if(document.documentElement.getBoundingClientRect&&(CKEDITOR.env.ie?
8!==CKEDITOR.env.version:1)){var f=this.$.getBoundingClientRect(),g=e.$.documentElement,q=g.clientTop||d.$.clientTop||0,w=g.clientLeft||d.$.clientLeft||0,k=!0;CKEDITOR.env.ie&&(k=e.getDocumentElement().contains(this),e=e.getBody().contains(this),k=r&&e||!r&&k);k&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(b=d.$.scrollLeft||g.scrollLeft,c=d.$.scrollTop||g.scrollTop):(c=r?d.$:g,b=c.scrollLeft,c=c.scrollTop),b=f.left+b-w,c=f.top+c-q)}else for(q=this,w=null;q&&"body"!=q.getName()&&
"html"!=q.getName();){b+=q.$.offsetLeft-q.$.scrollLeft;c+=q.$.offsetTop-q.$.scrollTop;q.equals(this)||(b+=q.$.clientLeft||0,c+=q.$.clientTop||0);for(;w&&!w.equals(q);)b-=w.$.scrollLeft,c-=w.$.scrollTop,w=w.getParent();w=q;q=(f=q.$.offsetParent)?new CKEDITOR.dom.element(f):null}a&&(f=this.getWindow(),q=a.getWindow(),!f.equals(q)&&f.$.frameElement&&(a=(new CKEDITOR.dom.element(f.$.frameElement)).getDocumentPosition(a),b+=a.x,c+=a.y));document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||
r||(b+=this.$.clientLeft?1:0,c+=this.$.clientTop?1:0);return{x:b,y:c}},scrollIntoView:function(a){var b=this.getParent();if(b){do if((b.$.clientWidth&&b.$.clientWidth<b.$.scrollWidth||b.$.clientHeight&&b.$.clientHeight<b.$.scrollHeight)&&!b.is("body")&&this.scrollIntoParent(b,a,1),b.is("html")){var c=b.getWindow();try{var e=c.$.frameElement;e&&(b=new CKEDITOR.dom.element(e))}catch(d){}}while(b=b.getParent())}},scrollIntoParent:function(a,b,c){var e,d,r,f;function g(b,c){/body|html/.test(a.getName())?
a.getWindow().$.scrollBy(b,c):(a.$.scrollLeft+=b,a.$.scrollTop+=c)}function q(a,b){var c={x:0,y:0};if(!a.is(k?"body":"html")){var e=a.$.getBoundingClientRect();c.x=e.left;c.y=e.top}e=a.getWindow();e.equals(b)||(e=q(CKEDITOR.dom.element.get(e.$.frameElement),b),c.x+=e.x,c.y+=e.y);return c}function w(a,b){return parseInt(a.getComputedStyle("margin-"+b)||0,10)||0}!a&&(a=this.getWindow());r=a.getDocument();var k="BackCompat"==r.$.compatMode;a instanceof CKEDITOR.dom.window&&(a=k?r.getBody():r.getDocumentElement());
CKEDITOR.env.webkit&&(r=this.getEditor(!1))&&(r._.previousScrollTop=null);r=a.getWindow();d=q(this,r);var t=q(a,r),v=this.$.offsetHeight;e=this.$.offsetWidth;var h=a.$.clientHeight,p=a.$.clientWidth;r=d.x-w(this,"left")-t.x||0;f=d.y-w(this,"top")-t.y||0;e=d.x+e+w(this,"right")-(t.x+p)||0;d=d.y+v+w(this,"bottom")-(t.y+h)||0;(0>f||0<d)&&g(0,!0===b?f:!1===b?d:0>f?f:d);c&&(0>r||0<e)&&g(0>r?r:e,0)},setState:function(a,b,c){b=b||"cke";switch(a){case CKEDITOR.TRISTATE_ON:this.addClass(b+"_on");this.removeClass(b+
"_off");this.removeClass(b+"_disabled");c&&this.setAttribute("aria-pressed",!0);c&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(b+"_disabled");this.removeClass(b+"_off");this.removeClass(b+"_on");c&&this.setAttribute("aria-disabled",!0);c&&this.removeAttribute("aria-pressed");break;default:this.addClass(b+"_off"),this.removeClass(b+"_on"),this.removeClass(b+"_disabled"),c&&this.removeAttribute("aria-pressed"),c&&this.removeAttribute("aria-disabled")}},
getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(b){a.src=a.src}return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,b){var c=this.$.attributes;b=b||{};for(var e=0;e<c.length;e++){var d=c[e],f=d.nodeName.toLowerCase(),g;if(!(f in b))if("checked"==f&&(g=this.getAttribute(f)))a.setAttribute(f,g);else if(!CKEDITOR.env.ie||this.hasAttribute(f))g=this.getAttribute(f),null===g&&(g=d.nodeValue),a.setAttribute(f,g)}""!==this.$.style.cssText&&
(a.$.style.cssText=this.$.style.cssText)},renameNode:function(a){if(this.getName()!=a){var b=this.getDocument();a=new CKEDITOR.dom.element(a,b);this.copyAttributes(a);this.moveChildren(a);this.getParent(!0)&&this.$.parentNode.replaceChild(a.$,this.$);a.$["data-cke-expando"]=this.$["data-cke-expando"];this.$=a.$;delete this.getName}},getChild:function(){function a(b,c){var e=b.childNodes;if(0<=c&&c<e.length)return e[c]}return function(b){var c=this.$;if(b.slice)for(b=b.slice();0<b.length&&c;)c=a(c,
b.shift());else c=a(c,b);return c?new CKEDITOR.dom.node(c):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function a(b){return b.type==CKEDITOR.NODE_ELEMENT&&b.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(b){b.data.getTarget().getAscendant(a,!0)||b.data.preventDefault()})},getDirection:function(a){return a?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||
"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(a,b){a="data-"+a;if(void 0===b)return this.getAttribute(a);!1===b?this.removeAttribute(a):this.setAttribute(a,b);return null},getEditor:function(a){var b=CKEDITOR.instances,c,e,d;a=a||void 0===a;for(c in b)if(e=b[c],e.element.equals(this)&&e.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!a&&(d=e.editable(),d.equals(this)||d.contains(this)))return e;return null},find:function(a){var c=d(this);a=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(b(this,
a)));c();return a},findOne:function(a){var c=d(this);a=this.$.querySelector(b(this,a));c();return a?new CKEDITOR.dom.element(a):null},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var e=a(this);if(!1!==e){c=this.getChildren();for(var d=0;d<c.count();d++)e=c.getItem(d),e.type==CKEDITOR.NODE_ELEMENT?e.forEach(a,b):b&&e.type!=b||a(e)}}});var k={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};
CKEDITOR.dom.element.prototype.setSize=function(a,b,d){"number"==typeof b&&(!d||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(b-=c.call(this,a)),this.setStyle(a,b+"px"))};CKEDITOR.dom.element.prototype.getSize=function(a,b){var d=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(a)],this.$["client"+CKEDITOR.tools.capitalize(a)])||0;b&&(d-=c.call(this,a));return d}})();CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document;this.$=a.type==CKEDITOR.NODE_DOCUMENT?a.$.createDocumentFragment():a};
CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(a){a=a.$;a.parentNode.insertBefore(this.$,a.nextSibling)},getHtml:function(){var a=new CKEDITOR.dom.element("div");this.clone(1,1).appendTo(a);return a.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,
insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});
(function(){function a(a,b){var c=this.range;if(this._.end)return null;if(!this._.start){this._.start=1;if(c.collapsed)return this.end(),null;c.optimize()}var e,d=c.startContainer;e=c.endContainer;var f=c.startOffset,A=c.endOffset,v,h=this.guard,p=this.type,n=a?"getPreviousSourceNode":"getNextSourceNode";if(!a&&!this._.guardLTR){var y=e.type==CKEDITOR.NODE_ELEMENT?e:e.getParent(),z=e.type==CKEDITOR.NODE_ELEMENT?e.getChild(A):e.getNext();this._.guardLTR=function(a,b){return(!b||!y.equals(a))&&(!z||
!a.equals(z))&&(a.type!=CKEDITOR.NODE_ELEMENT||!b||!a.equals(c.root))}}if(a&&!this._.guardRTL){var g=d.type==CKEDITOR.NODE_ELEMENT?d:d.getParent(),E=d.type==CKEDITOR.NODE_ELEMENT?f?d.getChild(f-1):null:d.getPrevious();this._.guardRTL=function(a,b){return(!b||!g.equals(a))&&(!E||!a.equals(E))&&(a.type!=CKEDITOR.NODE_ELEMENT||!b||!a.equals(c.root))}}var k=a?this._.guardRTL:this._.guardLTR;v=h?function(a,b){return!1===k(a,b)?!1:h(a,b)}:k;this.current?e=this.current[n](!1,p,v):(a?e.type==CKEDITOR.NODE_ELEMENT&&
(e=0<A?e.getChild(A-1):!1===v(e,!0)?null:e.getPreviousSourceNode(!0,p,v)):(e=d,e.type==CKEDITOR.NODE_ELEMENT&&((e=e.getChild(f))||(e=!1===v(d,!0)?null:d.getNextSourceNode(!0,p,v)))),e&&!1===v(e)&&(e=null));for(;e&&!this._.end;){this.current=e;if(!this.evaluator||!1!==this.evaluator(e)){if(!b)return e}else if(b&&this.evaluator)return!1;e=e[n](!1,p,v)}this.end();return this.current=null}function d(b){for(var c,e=null;c=a.call(this,b);)e=c;return e}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(a){this.range=
a;this._={}},proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return!1!==a.call(this,0,1)},checkBackward:function(){return!1!==a.call(this,1,1)},lastForward:function(){return d.call(this)},lastBackward:function(){return d.call(this,1)},reset:function(){delete this.current;this._={}}}});var b={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,
"table-column":1,"table-cell":1,"table-caption":1},c={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(a){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in c||!b[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||a&&this.is(a)):!0};CKEDITOR.dom.walker.blockBoundary=function(a){return function(b){return!(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary(a))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};
CKEDITOR.dom.walker.bookmark=function(a,b){function c(a){return a&&a.getName&&"span"==a.getName()&&a.data("cke-bookmark")}return function(e){var d,f;d=e&&e.type!=CKEDITOR.NODE_ELEMENT&&(f=e.getParent())&&c(f);d=a?d:d||c(e);return!!(b^d)}};CKEDITOR.dom.walker.whitespaces=function(a){return function(b){var c;b&&b.type==CKEDITOR.NODE_TEXT&&(c=!CKEDITOR.tools.trim(b.getText())||CKEDITOR.env.webkit&&b.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE);return!!(a^c)}};CKEDITOR.dom.walker.invisible=
function(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.env.webkit?1:0;return function(e){b(e)?e=1:(e.type==CKEDITOR.NODE_TEXT&&(e=e.getParent()),e=e.$.offsetWidth<=c);return!!(a^e)}};CKEDITOR.dom.walker.nodeType=function(a,b){return function(c){return!!(b^c.type==a)}};CKEDITOR.dom.walker.bogus=function(a){function b(a){return!g(a)&&!k(a)}return function(c){var e=CKEDITOR.env.needsBrFiller?c.is&&c.is("br"):c.getText&&f.test(c.getText());e&&(e=c.getParent(),c=c.getNext(b),e=e.isBlockBoundary()&&
(!c||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()));return!!(a^e)}};CKEDITOR.dom.walker.temp=function(a){return function(b){b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());b=b&&b.hasAttribute("data-cke-temp");return!!(a^b)}};var f=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,g=CKEDITOR.dom.walker.whitespaces(),k=CKEDITOR.dom.walker.bookmark(),l=CKEDITOR.dom.walker.temp(),m=function(a){return k(a)||g(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$inline)&&!a.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=
function(a){return function(b){b=g(b)||k(b)||l(b);return!!(a^b)}};var u=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(a){return function(b){for(var c=0,e=b.getChildCount();c<e;++c)if(!u(b.getChild(c)))return!!a;return!a}};var e=CKEDITOR.dom.walker.empty(),A=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(a){var b={},c;for(c in a)CKEDITOR.dtd[c]["#"]&&(b[c]=1);return b}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(a){return function(b){b=
u(b)?!1:b.type==CKEDITOR.NODE_TEXT||b.type==CKEDITOR.NODE_ELEMENT&&(b.is(CKEDITOR.dtd.$inline)||b.is("hr")||"false"==b.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&b.is(A)&&e(b))?!0:!1;return!!(a^b)}};CKEDITOR.dom.element.prototype.getBogus=function(){var a=this;do a=a.getPreviousSourceNode();while(m(a));return a&&(CKEDITOR.env.needsBrFiller?a.is&&a.is("br"):a.getText&&f.test(a.getText()))?a:!1}})();
CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=!0;var d=a instanceof CKEDITOR.dom.document;this.document=d?a:a.getDocument();this.root=d?a.getBody():a};
(function(){function a(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset}function d(a,b,c,d,f){function q(a,b,c,e){var d=c?a.getPrevious():a.getNext();if(e&&l)return d;h||e?b.append(a.clone(!0,f),c):(a.remove(),v&&b.append(a));return d}function g(){var a,b,c,e=Math.min(N.length,B.length);for(a=0;a<e;a++)if(b=N[a],c=B[a],!b.equals(c))return a;return a-1}function k(){var b=I-1,c=C&&u&&!p.equals(n);b<F-1||b<K-1||c?(c?a.moveToPosition(n,
CKEDITOR.POSITION_BEFORE_START):K==b+1&&E?a.moveToPosition(B[b],CKEDITOR.POSITION_BEFORE_END):a.moveToPosition(B[b+1],CKEDITOR.POSITION_BEFORE_START),d&&(b=N[b+1])&&b.type==CKEDITOR.NODE_ELEMENT&&(c=CKEDITOR.dom.element.createFromHtml('\x3cspan data-cke-bookmark\x3d"1" style\x3d"display:none"\x3e\x26nbsp;\x3c/span\x3e',a.document),c.insertAfter(b),b.mergeSiblings(!1),a.moveToBookmark({startNode:c}))):a.collapse(!0)}a.optimizeBookmark();var l=0===b,v=1==b,h=2==b;b=h||v;var p=a.startContainer,n=a.endContainer,
y=a.startOffset,z=a.endOffset,J,E,C,u,m,O;if(h&&n.type==CKEDITOR.NODE_TEXT&&p.equals(n))p=a.document.createText(p.substring(y,z)),c.append(p);else{n.type==CKEDITOR.NODE_TEXT?h?O=!0:n=n.split(z):0<n.getChildCount()?z>=n.getChildCount()?(n=n.getChild(z-1),E=!0):n=n.getChild(z):u=E=!0;p.type==CKEDITOR.NODE_TEXT?h?m=!0:p.split(y):0<p.getChildCount()?0===y?(p=p.getChild(y),J=!0):p=p.getChild(y-1):C=J=!0;for(var N=p.getParents(),B=n.getParents(),I=g(),F=N.length-1,K=B.length-1,G=c,L,Z,U,fa=-1,Q=I;Q<=F;Q++){Z=
N[Q];U=Z.getNext();for(Q!=F||Z.equals(B[Q])&&F<K?b&&(L=G.append(Z.clone(0,f))):J?q(Z,G,!1,C):m&&G.append(a.document.createText(Z.substring(y)));U;){if(U.equals(B[Q])){fa=Q;break}U=q(U,G)}G=L}G=c;for(Q=I;Q<=K;Q++)if(c=B[Q],U=c.getPrevious(),c.equals(N[Q]))b&&(G=G.getChild(0));else{Q!=K||c.equals(N[Q])&&K<F?b&&(L=G.append(c.clone(0,f))):E?q(c,G,!1,u):O&&G.append(a.document.createText(c.substring(0,z)));if(Q>fa)for(;U;)U=q(U,G,!0);G=L}h||k()}}function b(){var a=!1,b=CKEDITOR.dom.walker.whitespaces(),
c=CKEDITOR.dom.walker.bookmark(!0),d=CKEDITOR.dom.walker.bogus();return function(f){return c(f)||b(f)?!0:d(f)&&!a?a=!0:f.type==CKEDITOR.NODE_TEXT&&(f.hasAscendant("pre")||CKEDITOR.tools.trim(f.getText()).length)||f.type==CKEDITOR.NODE_ELEMENT&&!f.is(g)?!1:!0}}function c(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(1);return function(d){return c(d)||b(d)?!0:!a&&k(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.is(CKEDITOR.dtd.$removeEmpty)}}function f(a){return function(){var b;return this[a?
"getPreviousNode":"getNextNode"](function(a){!b&&u(a)&&(b=a);return m(a)&&!(k(a)&&a.equals(b))})}}var g={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},k=CKEDITOR.dom.walker.bogus(),l=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,m=CKEDITOR.dom.walker.editable(),u=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var a=new CKEDITOR.dom.range(this.root);a._setStartContainer(this.startContainer);
a.startOffset=this.startOffset;a._setEndContainer(this.endContainer);a.endOffset=this.endOffset;a.collapsed=this.collapsed;return a},collapse:function(a){a?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset);this.collapsed=!0},cloneContents:function(a){var b=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||d(this,2,b,!1,"undefined"==typeof a?!0:a);return b},deleteContents:function(a){this.collapsed||
d(this,0,null,a)},extractContents:function(a,b){var c=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||d(this,1,c,a,"undefined"==typeof b?!0:b);return c},createBookmark:function(a){var b,c,d,f,q=this.collapsed;b=this.document.createElement("span");b.data("cke-bookmark",1);b.setStyle("display","none");b.setHtml("\x26nbsp;");a&&(d="cke_bm_"+CKEDITOR.tools.getNextNumber(),b.setAttribute("id",d+(q?"C":"S")));q||(c=b.clone(),c.setHtml("\x26nbsp;"),a&&c.setAttribute("id",d+"E"),f=this.clone(),
f.collapse(),f.insertNode(c));f=this.clone();f.collapse(!0);f.insertNode(b);c?(this.setStartAfter(b),this.setEndBefore(c)):this.moveToPosition(b,CKEDITOR.POSITION_AFTER_END);return{startNode:a?d+(q?"C":"S"):b,endNode:a?d+"E":c,serializable:a,collapsed:q}},createBookmark2:function(){function a(b){var e=b.container,d=b.offset,f;f=e;var g=d;f=f.type!=CKEDITOR.NODE_ELEMENT||0===g||g==f.getChildCount()?0:f.getChild(g-1).type==CKEDITOR.NODE_TEXT&&f.getChild(g).type==CKEDITOR.NODE_TEXT;f&&(e=e.getChild(d-
1),d=e.getLength());if(e.type==CKEDITOR.NODE_ELEMENT&&0<d){a:{for(f=e;d--;)if(g=f.getChild(d).getIndex(!0),0<=g){d=g;break a}d=-1}d+=1}if(e.type==CKEDITOR.NODE_TEXT){f=e;for(g=0;(f=f.getPrevious())&&f.type==CKEDITOR.NODE_TEXT;)g+=f.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;f=g;e.getText()?d+=f:(g=e.getPrevious(c),f?(d=f,e=g?g.getNext():e.getParent().getFirst()):(e=e.getParent(),d=g?g.getIndex(!0)+1:0))}b.container=e;b.offset=d}function b(a,c){var e=c.getCustomData("cke-fillingChar");
if(e){var d=a.container;e.equals(d)&&(a.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=a.offset&&(a.offset=d.getIndex(),a.container=d.getParent()))}}var c=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(c){var d=this.collapsed,f={container:this.startContainer,offset:this.startOffset},g={container:this.endContainer,offset:this.endOffset};c&&(a(f),b(f,this.root),d||(a(g),b(g,this.root)));return{start:f.container.getAddress(c),end:d?null:g.container.getAddress(c),
startOffset:f.offset,endOffset:g.offset,normalized:c,collapsed:d,is2:!0}}}(),moveToBookmark:function(a){if(a.is2){var b=this.document.getByAddress(a.start,a.normalized),c=a.startOffset,d=a.end&&this.document.getByAddress(a.end,a.normalized);a=a.endOffset;this.setStart(b,c);d?this.setEnd(d,a):this.collapse(!0)}else b=(c=a.serializable)?this.document.getById(a.startNode):a.startNode,a=c?this.document.getById(a.endNode):a.endNode,this.setStartBefore(b),b.remove(),a?(this.setEndBefore(a),a.remove()):
this.collapse(!0)},getBoundaryNodes:function(){var a=this.startContainer,b=this.endContainer,c=this.startOffset,d=this.endOffset,f;if(a.type==CKEDITOR.NODE_ELEMENT)if(f=a.getChildCount(),f>c)a=a.getChild(c);else if(1>f)a=a.getPreviousSourceNode();else{for(a=a.$;a.lastChild;)a=a.lastChild;a=new CKEDITOR.dom.node(a);a=a.getNextSourceNode()||a}if(b.type==CKEDITOR.NODE_ELEMENT)if(f=b.getChildCount(),f>d)b=b.getChild(d).getPreviousSourceNode(!0);else if(1>f)b=b.getPreviousSourceNode();else{for(b=b.$;b.lastChild;)b=
b.lastChild;b=new CKEDITOR.dom.node(b)}a.getPosition(b)&CKEDITOR.POSITION_FOLLOWING&&(a=b);return{startNode:a,endNode:b}},getCommonAncestor:function(a,b){var c=this.startContainer,d=this.endContainer,c=c.equals(d)?a&&c.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?c.getChild(this.startOffset):c:c.getCommonAncestor(d);return b&&!c.is?c.getParent():c},optimize:function(){var a=this.startContainer,b=this.startOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setStartAfter(a):
this.setStartBefore(a));a=this.endContainer;b=this.endOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setEndAfter(a):this.setEndBefore(a))},optimizeBookmark:function(){var a=this.startContainer,b=this.endContainer;a.is&&a.is("span")&&a.data("cke-bookmark")&&this.setStartAt(a,CKEDITOR.POSITION_BEFORE_START);b&&b.is&&b.is("span")&&b.data("cke-bookmark")&&this.setEndAt(b,CKEDITOR.POSITION_AFTER_END)},trim:function(a,b){var c=this.startContainer,d=this.startOffset,f=this.collapsed;if((!a||
f)&&c&&c.type==CKEDITOR.NODE_TEXT){if(d)if(d>=c.getLength())d=c.getIndex()+1,c=c.getParent();else{var q=c.split(d),d=c.getIndex()+1,c=c.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(q,this.endOffset-this.startOffset):c.equals(this.endContainer)&&(this.endOffset+=1)}else d=c.getIndex(),c=c.getParent();this.setStart(c,d);if(f){this.collapse(!0);return}}c=this.endContainer;d=this.endOffset;b||f||!c||c.type!=CKEDITOR.NODE_TEXT||(d?(d>=c.getLength()||c.split(d),d=c.getIndex()+1):
d=c.getIndex(),c=c.getParent(),this.setEnd(c,d))},enlarge:function(a,b){function c(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")?null:a}var d=new RegExp(/[^\s\ufeff]/);switch(a){case CKEDITOR.ENLARGE_INLINE:var f=1;case CKEDITOR.ENLARGE_ELEMENT:var q=function(a,b){var c=new CKEDITOR.dom.range(k);c.setStart(a,b);c.setEndAt(k,CKEDITOR.POSITION_BEFORE_END);var c=new CKEDITOR.dom.walker(c),e;for(c.guard=function(a){return!(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())};e=
c.next();){if(e.type!=CKEDITOR.NODE_TEXT)return!1;J=e!=a?e.getText():e.substring(b);if(d.test(J))return!1}return!0};if(this.collapsed)break;var g=this.getCommonAncestor(),k=this.root,l,v,h,p,n,y=!1,z,J;z=this.startContainer;var E=this.startOffset;z.type==CKEDITOR.NODE_TEXT?(E&&(z=!CKEDITOR.tools.trim(z.substring(0,E)).length&&z,y=!!z),z&&((p=z.getPrevious())||(h=z.getParent()))):(E&&(p=z.getChild(E-1)||z.getLast()),p||(h=z));for(h=c(h);h||p;){if(h&&!p){!n&&h.equals(g)&&(n=!0);if(f?h.isBlockBoundary():
!k.contains(h))break;y&&"inline"==h.getComputedStyle("display")||(y=!1,n?l=h:this.setStartBefore(h));p=h.getPrevious()}for(;p;)if(z=!1,p.type==CKEDITOR.NODE_COMMENT)p=p.getPrevious();else{if(p.type==CKEDITOR.NODE_TEXT)J=p.getText(),d.test(J)&&(p=null),z=/[\s\ufeff]$/.test(J);else if((p.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||b&&p.is("br"))&&!p.data("cke-bookmark"))if(y&&CKEDITOR.dtd.$removeEmpty[p.getName()]){J=p.getText();if(d.test(J))p=null;else for(var E=p.$.getElementsByTagName("*"),C=0,u;u=
E[C++];)if(!CKEDITOR.dtd.$removeEmpty[u.nodeName.toLowerCase()]){p=null;break}p&&(z=!!J.length)}else p=null;z&&(y?n?l=h:h&&this.setStartBefore(h):y=!0);if(p){z=p.getPrevious();if(!h&&!z){h=p;p=null;break}p=z}else h=null}h&&(h=c(h.getParent()))}z=this.endContainer;E=this.endOffset;h=p=null;n=y=!1;z.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(z.substring(E)).length?y=!0:(y=!z.getLength(),E==z.getLength()?(p=z.getNext())||(h=z.getParent()):q(z,E)&&(h=z.getParent())):(p=z.getChild(E))||(h=z);for(;h||
p;){if(h&&!p){!n&&h.equals(g)&&(n=!0);if(f?h.isBlockBoundary():!k.contains(h))break;y&&"inline"==h.getComputedStyle("display")||(y=!1,n?v=h:h&&this.setEndAfter(h));p=h.getNext()}for(;p;){z=!1;if(p.type==CKEDITOR.NODE_TEXT)J=p.getText(),q(p,0)||(p=null),z=/^[\s\ufeff]/.test(J);else if(p.type==CKEDITOR.NODE_ELEMENT){if((0<p.$.offsetWidth||b&&p.is("br"))&&!p.data("cke-bookmark"))if(y&&CKEDITOR.dtd.$removeEmpty[p.getName()]){J=p.getText();if(d.test(J))p=null;else for(E=p.$.getElementsByTagName("*"),C=
0;u=E[C++];)if(!CKEDITOR.dtd.$removeEmpty[u.nodeName.toLowerCase()]){p=null;break}p&&(z=!!J.length)}else p=null}else z=1;z&&y&&(n?v=h:this.setEndAfter(h));if(p){z=p.getNext();if(!h&&!z){h=p;p=null;break}p=z}else h=null}h&&(h=c(h.getParent()))}l&&v&&(g=l.contains(v)?v:l,this.setStartBefore(g),this.setEndAfter(g));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:h=new CKEDITOR.dom.range(this.root);k=this.root;h.setStartAt(k,CKEDITOR.POSITION_AFTER_START);h.setEnd(this.startContainer,
this.startOffset);h=new CKEDITOR.dom.walker(h);var m,O,N=CKEDITOR.dom.walker.blockBoundary(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),B=null,I=function(a){if(a.type==CKEDITOR.NODE_ELEMENT&&"false"==a.getAttribute("contenteditable"))if(B){if(B.equals(a)){B=null;return}}else B=a;else if(B)return;var b=N(a);b||(m=a);return b},f=function(a){var b=I(a);!b&&a.is&&a.is("br")&&(O=a);return b};h.guard=I;h=h.lastBackward();m=m||k;this.setStartAt(m,!m.is("br")&&(!h&&this.checkStartOfBlock()||h&&m.contains(h))?
CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){h=this.clone();h=new CKEDITOR.dom.walker(h);var F=CKEDITOR.dom.walker.whitespaces(),K=CKEDITOR.dom.walker.bookmark();h.evaluator=function(a){return!F(a)&&!K(a)};if((h=h.previous())&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("br"))break}h=this.clone();h.collapse();h.setEndAt(k,CKEDITOR.POSITION_BEFORE_END);h=new CKEDITOR.dom.walker(h);h.guard=a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?f:I;m=B=O=null;h=h.lastForward();
m=m||k;this.setEndAt(m,!h&&this.checkEndOfBlock()||h&&m.contains(h)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);O&&this.setEndAfter(O)}},shrink:function(a,b,c){if(!this.collapsed){a=a||CKEDITOR.SHRINK_TEXT;var d=this.clone(),f=this.startContainer,q=this.endContainer,g=this.startOffset,k=this.endOffset,l=1,v=1;f&&f.type==CKEDITOR.NODE_TEXT&&(g?g>=f.getLength()?d.setStartAfter(f):(d.setStartBefore(f),l=0):d.setStartBefore(f));q&&q.type==CKEDITOR.NODE_TEXT&&(k?k>=q.getLength()?d.setEndAfter(q):
(d.setEndAfter(q),v=0):d.setEndBefore(q));var d=new CKEDITOR.dom.walker(d),h=CKEDITOR.dom.walker.bookmark();d.evaluator=function(b){return b.type==(a==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var p;d.guard=function(b,d){if(h(b))return!0;if(a==CKEDITOR.SHRINK_ELEMENT&&b.type==CKEDITOR.NODE_TEXT||d&&b.equals(p)||!1===c&&b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary()||b.type==CKEDITOR.NODE_ELEMENT&&b.hasAttribute("contenteditable"))return!1;d||b.type!=CKEDITOR.NODE_ELEMENT||
(p=b);return!0};l&&(f=d[a==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(f,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);v&&(d.reset(),(d=d[a==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(d,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END));return!(!l&&!v)}},insertNode:function(a){this.optimizeBookmark();this.trim(!1,!0);var b=this.startContainer,c=b.getChild(this.startOffset);c?a.insertBefore(c):b.append(a);a.getParent()&&a.getParent().equals(this.endContainer)&&
this.endOffset++;this.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b);this.collapse(!0)},moveToRange:function(a){this.setStart(a.startContainer,a.startOffset);this.setEnd(a.endContainer,a.endOffset)},selectNodeContents:function(a){this.setStart(a,0);this.setEnd(a,a.type==CKEDITOR.NODE_TEXT?a.getLength():a.getChildCount())},setStart:function(b,c){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(c=b.getIndex(),b=b.getParent());this._setStartContainer(b);this.startOffset=
c;this.endContainer||(this._setEndContainer(b),this.endOffset=c);a(this)},setEnd:function(b,c){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(c=b.getIndex()+1,b=b.getParent());this._setEndContainer(b);this.endOffset=c;this.startContainer||(this._setStartContainer(b),this.startOffset=c);a(this)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())},setEndAfter:function(a){this.setEnd(a.getParent(),
a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(b,c){switch(c){case CKEDITOR.POSITION_AFTER_START:this.setStart(b,0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setStart(b,b.getLength()):this.setStart(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(b)}a(this)},setEndAt:function(b,c){switch(c){case CKEDITOR.POSITION_AFTER_START:this.setEnd(b,
0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setEnd(b,b.getLength()):this.setEnd(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(b)}a(this)},fixBlock:function(a,b){var c=this.createBookmark(),d=this.document.createElement(b);this.collapse(a);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(d);d.trim();this.insertNode(d);var f=d.getBogus();f&&f.remove();
d.appendBogus();this.moveToBookmark(c);return d},splitBlock:function(a,b){var c=new CKEDITOR.dom.elementPath(this.startContainer,this.root),d=new CKEDITOR.dom.elementPath(this.endContainer,this.root),f=c.block,q=d.block,g=null;if(!c.blockLimit.equals(d.blockLimit))return null;"br"!=a&&(f||(f=this.fixBlock(!0,a),q=(new CKEDITOR.dom.elementPath(this.endContainer,this.root)).block),q||(q=this.fixBlock(!1,a)));c=f&&this.checkStartOfBlock();d=q&&this.checkEndOfBlock();this.deleteContents();f&&f.equals(q)&&
(d?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(q,CKEDITOR.POSITION_AFTER_END),q=null):c?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(f,CKEDITOR.POSITION_BEFORE_START),f=null):(q=this.splitElement(f,b||!1),f.is("ul","ol")||f.appendBogus()));return{previousBlock:f,nextBlock:q,wasStartOfBlock:c,wasEndOfBlock:d,elementPath:g}},splitElement:function(a,b){if(!this.collapsed)return null;this.setEndAt(a,CKEDITOR.POSITION_BEFORE_END);
var c=this.extractContents(!1,b||!1),d=a.clone(!1,b||!1);c.appendTo(d);d.insertAfter(a);this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END);return d},removeEmptyBlocksAtEnd:function(){function a(d){return function(a){return b(a)||c(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isEmptyInlineRemoveable()||d.is("table")&&a.is("caption")?!1:!0}}var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!1);return function(b){for(var c=this.createBookmark(),d=this[b?"endPath":"startPath"](),f=d.block||
d.blockLimit,g;f&&!f.equals(d.root)&&!f.getFirst(a(f));)g=f.getParent(),this[b?"setEndAt":"setStartAt"](f,CKEDITOR.POSITION_AFTER_END),f.remove(1),f=g;this.moveToBookmark(c)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(a,b){var d=b==CKEDITOR.START,f=this.clone();f.collapse(d);f[d?"setStartAt":"setEndAt"](a,d?CKEDITOR.POSITION_AFTER_START:
CKEDITOR.POSITION_BEFORE_END);f=new CKEDITOR.dom.walker(f);f.evaluator=c(d);return f[d?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var a=this.startContainer,c=this.startOffset;CKEDITOR.env.ie&&c&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.ltrim(a.substring(0,c)),l.test(a)&&this.trim(0,1));this.trim();a=new CKEDITOR.dom.elementPath(this.startContainer,this.root);c=this.clone();c.collapse(!0);c.setStartAt(a.block||a.blockLimit,CKEDITOR.POSITION_AFTER_START);a=new CKEDITOR.dom.walker(c);
a.evaluator=b();return a.checkBackward()},checkEndOfBlock:function(){var a=this.endContainer,c=this.endOffset;CKEDITOR.env.ie&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.rtrim(a.substring(c)),l.test(a)&&this.trim(1,0));this.trim();a=new CKEDITOR.dom.elementPath(this.endContainer,this.root);c=this.clone();c.collapse(!1);c.setEndAt(a.block||a.blockLimit,CKEDITOR.POSITION_BEFORE_END);a=new CKEDITOR.dom.walker(c);a.evaluator=b();return a.checkForward()},getPreviousNode:function(a,b,c){var d=this.clone();
d.collapse(1);d.setStartAt(c||this.root,CKEDITOR.POSITION_AFTER_START);c=new CKEDITOR.dom.walker(d);c.evaluator=a;c.guard=b;return c.previous()},getNextNode:function(a,b,c){var d=this.clone();d.collapse();d.setEndAt(c||this.root,CKEDITOR.POSITION_BEFORE_END);c=new CKEDITOR.dom.walker(d);c.evaluator=a;c.guard=b;return c.next()},checkReadOnly:function(){function a(b,c){for(;b;){if(b.type==CKEDITOR.NODE_ELEMENT){if("false"==b.getAttribute("contentEditable")&&!b.data("cke-editable"))return 0;if(b.is("html")||
"true"==b.getAttribute("contentEditable")&&(b.contains(c)||b.equals(c)))break}b=b.getParent()}return 1}return function(){var b=this.startContainer,c=this.endContainer;return!(a(b,c)&&a(c,b))}}(),moveToElementEditablePosition:function(a,b){if(a.type==CKEDITOR.NODE_ELEMENT&&!a.isEditable(!1))return this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var c=0;a;){if(a.type==CKEDITOR.NODE_TEXT){b&&this.endContainer&&this.checkEndOfBlock()&&l.test(a.getText())?this.moveToPosition(a,
CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);c=1;break}if(a.type==CKEDITOR.NODE_ELEMENT)if(a.isEditable())this.moveToPosition(a,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),c=1;else if(b&&a.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START);else if("false"==a.getAttribute("contenteditable")&&a.is(CKEDITOR.dtd.$block))return this.setStartBefore(a),this.setEndAfter(a),
!0;var d=a,f=c,q=void 0;d.type==CKEDITOR.NODE_ELEMENT&&d.isEditable(!1)&&(q=d[b?"getLast":"getFirst"](u));f||q||(q=d[b?"getPrevious":"getNext"](u));a=q}return!!c},moveToClosestEditablePosition:function(a,b){var c,d=0,f,q,g=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];a?(c=new CKEDITOR.dom.range(this.root),c.moveToPosition(a,g[b?0:1])):c=this.clone();if(a&&!a.is(CKEDITOR.dtd.$block))d=1;else if(f=c[b?"getNextEditableNode":"getPreviousEditableNode"]())d=1,(q=f.type==CKEDITOR.NODE_ELEMENT)&&
f.is(CKEDITOR.dtd.$block)&&"false"==f.getAttribute("contenteditable")?(c.setStartAt(f,CKEDITOR.POSITION_BEFORE_START),c.setEndAt(f,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&q&&f.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(c.setEnd(f,0),c.collapse()):c.moveToPosition(f,g[b?1:0]);d&&this.moveToRange(c);return!!d},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){var a=
this.clone();a.optimize();if(a.startContainer.type!=CKEDITOR.NODE_ELEMENT||a.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var a=new CKEDITOR.dom.walker(a),b=CKEDITOR.dom.walker.bookmark(!1,!0),c=CKEDITOR.dom.walker.whitespaces(!0);a.evaluator=function(a){return c(a)&&b(a)};var d=a.next();a.reset();return d&&d.equals(a.previous())?d:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=
this.endContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.endOffset-1)||a},getNextEditableNode:f(),getPreviousEditableNode:f(1),scrollIntoView:function(){var a=new CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",this.document),b,c,d,f=this.clone();f.optimize();(d=f.startContainer.type==CKEDITOR.NODE_TEXT)?(c=f.startContainer.getText(),b=f.startContainer.split(f.startOffset),a.insertAfter(f.startContainer)):f.insertNode(a);a.scrollIntoView();
d&&(f.startContainer.setText(c),b.remove());a.remove()},_setStartContainer:function(a){this.startContainer=a},_setEndContainer:function(a){this.endContainer=a},_find:function(a,b){var c=this.getCommonAncestor(),d=this.getBoundaryNodes(),f=[],q,g,k,l;if(c&&c.find)for(g=c.find(a),q=0;q<g.count();q++)if(c=g.getItem(q),b||!c.isReadOnly())k=c.getPosition(d.startNode)&CKEDITOR.POSITION_FOLLOWING||d.startNode.equals(c),l=c.getPosition(d.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED,
k&&l&&f.push(c);return f}}})();CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.ENLARGE_INLINE=4;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;"use strict";
(function(){function a(a){1>arguments.length||(this.range=a,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function d(a){var b=[];a.forEach(function(a){if("true"==a.getAttribute("contenteditable"))return b.push(a),!1},CKEDITOR.NODE_ELEMENT,!0);return b}function b(a,c,f,g){a:{null==g&&(g=d(f));for(var k;k=g.shift();)if(k.getDtd().p){g={element:k,remaining:g};break a}g=null}if(!g)return 0;if((k=CKEDITOR.filter.instances[g.element.data("cke-filter")])&&!k.check(c))return b(a,
c,f,g.remaining);c=new CKEDITOR.dom.range(g.element);c.selectNodeContents(g.element);c=c.createIterator();c.enlargeBr=a.enlargeBr;c.enforceRealBlocks=a.enforceRealBlocks;c.activeFilter=c.filter=k;a._.nestedEditable={element:g.element,container:f,remaining:g.remaining,iterator:c};return 1}function c(a,b,c){if(!b)return!1;a=a.clone();a.collapse(!c);return a.checkBoundaryOfElement(b,c?CKEDITOR.START:CKEDITOR.END)}var f=/^[\r\n\t ]+$/,g=CKEDITOR.dom.walker.bookmark(!1,!0),k=CKEDITOR.dom.walker.whitespaces(!0),
l=function(a){return g(a)&&k(a)},m={dd:1,dt:1,li:1};a.prototype={getNextParagraph:function(a){var d,k,r,x,D;a=a||"p";if(this._.nestedEditable){if(d=this._.nestedEditable.iterator.getNextParagraph(a))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,d;this.activeFilter=this.filter;if(b(this,a,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(a);this._.nestedEditable=
null}if(!this.range.root.getDtd()[a])return null;if(!this._.started){var q=this.range.clone();k=q.startPath();var w=q.endPath(),H=!q.collapsed&&c(q,k.block),t=!q.collapsed&&c(q,w.block,1);q.shrink(CKEDITOR.SHRINK_ELEMENT,!0);H&&q.setStartAt(k.block,CKEDITOR.POSITION_BEFORE_END);t&&q.setEndAt(w.block,CKEDITOR.POSITION_AFTER_START);k=q.endContainer.hasAscendant("pre",!0)||q.startContainer.hasAscendant("pre",!0);q.enlarge(this.forceBrBreak&&!k||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);
q.collapsed||(k=new CKEDITOR.dom.walker(q.clone()),w=CKEDITOR.dom.walker.bookmark(!0,!0),k.evaluator=w,this._.nextNode=k.next(),k=new CKEDITOR.dom.walker(q.clone()),k.evaluator=w,k=k.previous(),this._.lastNode=k.getNextSourceNode(!0,null,q.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(w=this.range.clone(),w.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),w.checkEndOfBlock()&&
(w=new CKEDITOR.dom.elementPath(w.endContainer,w.root),this._.lastNode=(w.block||w.blockLimit).getNextSourceNode(!0))),this._.lastNode&&q.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=q.document.createText(""),this._.lastNode.insertAfter(k)),q=null);this._.started=1;k=q}w=this._.nextNode;q=this._.lastNode;for(this._.nextNode=null;w;){var H=0,t=w.hasAscendant("pre"),v=w.type!=CKEDITOR.NODE_ELEMENT,h=0;if(v)w.type==CKEDITOR.NODE_TEXT&&f.test(w.getText())&&(v=0);else{var p=w.getName();
if(CKEDITOR.dtd.$block[p]&&"false"==w.getAttribute("contenteditable")){d=w;b(this,a,d);break}else if(w.isBlockBoundary(this.forceBrBreak&&!t&&{br:1})){if("br"==p)v=1;else if(!k&&!w.getChildCount()&&"hr"!=p){d=w;r=w.equals(q);break}k&&(k.setEndAt(w,CKEDITOR.POSITION_BEFORE_START),"br"!=p&&(this._.nextNode=w));H=1}else{if(w.getFirst()){k||(k=this.range.clone(),k.setStartAt(w,CKEDITOR.POSITION_BEFORE_START));w=w.getFirst();continue}v=1}}v&&!k&&(k=this.range.clone(),k.setStartAt(w,CKEDITOR.POSITION_BEFORE_START));
r=(!H||v)&&w.equals(q);if(k&&!H)for(;!w.getNext(l)&&!r;){p=w.getParent();if(p.isBlockBoundary(this.forceBrBreak&&!t&&{br:1})){H=1;v=0;r||p.equals(q);k.setEndAt(p,CKEDITOR.POSITION_BEFORE_END);break}w=p;v=1;r=w.equals(q);h=1}v&&k.setEndAt(w,CKEDITOR.POSITION_AFTER_END);w=this._getNextSourceNode(w,h,q);if((r=!w)||H&&k)break}if(!d){if(!k)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;d=new CKEDITOR.dom.elementPath(k.startContainer,k.root);w=d.blockLimit;H={div:1,th:1,td:1};
d=d.block;!d&&w&&!this.enforceRealBlocks&&H[w.getName()]&&k.checkStartOfBlock()&&k.checkEndOfBlock()&&!w.equals(k.root)?d=w:!d||this.enforceRealBlocks&&d.is(m)?(d=this.range.document.createElement(a),k.extractContents().appendTo(d),d.trim(),k.insertNode(d),x=D=!0):"li"!=d.getName()?k.checkStartOfBlock()&&k.checkEndOfBlock()||(d=d.clone(!1),k.extractContents().appendTo(d),d.trim(),D=k.splitBlock(),x=!D.wasStartOfBlock,D=!D.wasEndOfBlock,k.insertNode(d)):r||(this._.nextNode=d.equals(q)?null:this._getNextSourceNode(k.getBoundaryNodes().endNode,
1,q))}x&&(x=d.getPrevious())&&x.type==CKEDITOR.NODE_ELEMENT&&("br"==x.getName()?x.remove():x.getLast()&&"br"==x.getLast().$.nodeName.toLowerCase()&&x.getLast().remove());D&&(x=d.getLast())&&x.type==CKEDITOR.NODE_ELEMENT&&"br"==x.getName()&&(!CKEDITOR.env.needsBrFiller||x.getPrevious(g)||x.getNext(g))&&x.remove();this._.nextNode||(this._.nextNode=r||d.equals(q)||!q?null:this._getNextSourceNode(d,1,q));return d},_getNextSourceNode:function(a,b,c){function d(a){return!(a.equals(c)||a.equals(f))}var f=
this.range.root;for(a=a.getNextSourceNode(b,null,d);!g(a);)a=a.getNextSourceNode(b,null,d);return a}};CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this)}})();
CKEDITOR.command=function(a,d){this.uiItems=[];this.exec=function(b){if(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())return!1;this.editorFocus&&a.focus();return!1===this.fire("exec")?!0:!1!==d.exec.call(this,a,b)};this.refresh=function(a,b){if(!this.readOnly&&a.readOnly)return!0;if(this.context&&!b.isContextFor(this.context)||!this.checkAllowed(!0))return this.disable(),!0;this.startDisabled||this.enable();this.modes&&!this.modes[a.mode]&&this.disable();return!1===this.fire("refresh",
{editor:a,path:b})?!0:d.refresh&&!1!==d.refresh.apply(this,arguments)};var b;this.checkAllowed=function(c){return c||"boolean"!=typeof b?b=a.activeFilter.checkFeature(this):b};CKEDITOR.tools.extend(this,d,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!d.context,state:CKEDITOR.TRISTATE_DISABLED});CKEDITOR.event.call(this)};
CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(a){if(this.state==a||a!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())return!1;this.previousState=this.state;this.state=a;this.fire("state");return!0},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?
this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.event.implementOn(CKEDITOR.command.prototype);CKEDITOR.ENTER_P=1;CKEDITOR.ENTER_BR=2;CKEDITOR.ENTER_DIV=3;
CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"\x3c!DOCTYPE html\x3e",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1E4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]};
(function(){function a(a,b,c,d,f){var h,p;a=[];for(h in b){p=b[h];p="boolean"==typeof p?{}:"function"==typeof p?{match:p}:C(p);"$"!=h.charAt(0)&&(p.elements=h);c&&(p.featureName=c.toLowerCase());var n=p;n.elements=k(n.elements,/\s+/)||null;n.propertiesOnly=n.propertiesOnly||!0===n.elements;var e=/\s*,\s*/,F=void 0;for(F in O){n[F]=k(n[F],e)||null;var q=n,g=N[F],v=k(n[N[F]],e),y=n[F],B=[],z=!0,K=void 0;v?z=!1:v={};for(K in y)"!"==K.charAt(0)&&(K=K.slice(1),B.push(K),v[K]=!0,z=!1);for(;K=B.pop();)y[K]=
y["!"+K],delete y["!"+K];q[g]=(z?!1:v)||null}n.match=n.match||null;d.push(p);a.push(p)}b=f.elements;f=f.generic;var E;c=0;for(d=a.length;c<d;++c){h=C(a[c]);p=!0===h.classes||!0===h.styles||!0===h.attributes;n=h;F=g=e=void 0;for(e in O)n[e]=H(n[e]);q=!0;for(F in N){e=N[F];g=n[e];v=[];y=void 0;for(y in g)-1<y.indexOf("*")?v.push(new RegExp("^"+y.replace(/\*/g,".*")+"$")):v.push(y);g=v;g.length&&(n[e]=g,q=!1)}n.nothingRequired=q;n.noProperties=!(n.attributes||n.classes||n.styles);if(!0===h.elements||
null===h.elements)f[p?"unshift":"push"](h);else for(E in n=h.elements,delete h.elements,n)if(b[E])b[E][p?"unshift":"push"](h);else b[E]=[h]}}function d(a,c,d,h){if(!a.match||a.match(c))if(h||l(a,c))if(a.propertiesOnly||(d.valid=!0),d.allAttributes||(d.allAttributes=b(a.attributes,c.attributes,d.validAttributes)),d.allStyles||(d.allStyles=b(a.styles,c.styles,d.validStyles)),!d.allClasses){a=a.classes;c=c.classes;h=d.validClasses;if(a)if(!0===a)a=!0;else{for(var p=0,f=c.length,n;p<f;++p)n=c[p],h[n]||
(h[n]=a(n));a=!1}else a=!1;d.allClasses=a}}function b(a,b,c){if(!a)return!1;if(!0===a)return!0;for(var d in b)c[d]||(c[d]=a(d));return!1}function c(a,b,c){if(!a.match||a.match(b)){if(a.noProperties)return!1;c.hadInvalidAttribute=f(a.attributes,b.attributes)||c.hadInvalidAttribute;c.hadInvalidStyle=f(a.styles,b.styles)||c.hadInvalidStyle;a=a.classes;b=b.classes;if(a){for(var d=!1,h=!0===a,p=b.length;p--;)if(h||a(b[p]))b.splice(p,1),d=!0;a=d}else a=!1;c.hadInvalidClass=a||c.hadInvalidClass}}function f(a,
b){if(!a)return!1;var c=!1,d=!0===a,h;for(h in b)if(d||a(h))delete b[h],c=!0;return c}function g(a,b,c){if(a.disabled||a.customConfig&&!c||!b)return!1;a._.cachedChecks={};return!0}function k(a,b){if(!a)return!1;if(!0===a)return a;if("string"==typeof a)return a=Y(a),"*"==a?!0:CKEDITOR.tools.convertArrayToObject(a.split(b));if(CKEDITOR.tools.isArray(a))return a.length?CKEDITOR.tools.convertArrayToObject(a):!1;var c={},d=0,h;for(h in a)c[h]=a[h],d++;return d?c:!1}function l(a,b){if(a.nothingRequired)return!0;
var c,d,h,p;if(h=a.requiredClasses)for(p=b.classes,c=0;c<h.length;++c)if(d=h[c],"string"==typeof d){if(-1==CKEDITOR.tools.indexOf(p,d))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(p,d))return!1;return m(b.styles,a.requiredStyles)&&m(b.attributes,a.requiredAttributes)}function m(a,b){if(!b)return!0;for(var c=0,d;c<b.length;++c)if(d=b[c],"string"==typeof d){if(!(d in a))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(a,d))return!1;return!0}function u(a){if(!a)return{};
a=a.split(/\s*,\s*/).sort();for(var b={};a.length;)b[a.shift()]="cke-test";return b}function e(a){var b,c,d,h,p={},f=1;for(a=Y(a);b=a.match(B);)(c=b[2])?(d=A(c,"styles"),h=A(c,"attrs"),c=A(c,"classes")):d=h=c=null,p["$"+f++]={elements:b[1],classes:c,styles:d,attributes:h},a=a.slice(b[0].length);return p}function A(a,b){var c=a.match(I[b]);return c?Y(c[1]):null}function r(a){var b=a.styleBackup=a.attributes.style,c=a.classBackup=a.attributes["class"];a.styles||(a.styles=CKEDITOR.tools.parseCssText(b||
"",1));a.classes||(a.classes=c?c.split(/\s+/):[])}function x(a,b,h,f){var n=0,e;f.toHtml&&(b.name=b.name.replace(F,"$1"));if(f.doCallbacks&&a.elementCallbacks){a:{e=a.elementCallbacks;for(var g=0,v=e.length,y;g<v;++g)if(y=e[g](b)){e=y;break a}e=void 0}if(e)return e}if(f.doTransform&&(e=a._.transformations[b.name])){r(b);for(g=0;g<e.length;++g)p(a,b,e[g]);q(b)}if(f.doFilter){a:{g=b.name;v=a._;a=v.allowedRules.elements[g];e=v.allowedRules.generic;g=v.disallowedRules.elements[g];v=v.disallowedRules.generic;
y=f.skipRequired;var k={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1},B,z;if(a||e){r(b);if(g)for(B=0,z=g.length;B<z;++B)if(!1===c(g[B],b,k)){a=null;break a}if(v)for(B=0,z=v.length;B<z;++B)c(v[B],b,k);if(a)for(B=0,z=a.length;B<z;++B)d(a[B],b,k,y);if(e)for(B=0,z=e.length;B<z;++B)d(e[B],b,k,y);a=k}else a=null}if(!a||!a.valid)return h.push(b),1;z=a.validAttributes;var E=a.validStyles;
e=a.validClasses;var g=b.attributes,J=b.styles,v=b.classes;y=b.classBackup;var l=b.styleBackup,G,I,C=[],k=[],m=/^data-cke-/;B=!1;delete g.style;delete g["class"];delete b.classBackup;delete b.styleBackup;if(!a.allAttributes)for(G in g)z[G]||(m.test(G)?G==(I=G.replace(/^data-cke-saved-/,""))||z[I]||(delete g[G],B=!0):(delete g[G],B=!0));if(!a.allStyles||a.hadInvalidStyle){for(G in J)a.allStyles||E[G]?C.push(G+":"+J[G]):B=!0;C.length&&(g.style=C.sort().join("; "))}else l&&(g.style=l);if(!a.allClasses||
a.hadInvalidClass){for(G=0;G<v.length;++G)(a.allClasses||e[v[G]])&&k.push(v[G]);k.length&&(g["class"]=k.sort().join(" "));y&&k.length<y.split(/\s+/).length&&(B=!0)}else y&&(g["class"]=y);B&&(n=1);if(!f.skipFinalValidation&&!w(b))return h.push(b),1}f.toHtml&&(b.name=b.name.replace(K,"cke:$1"));return n}function D(a){var b=[],c;for(c in a)-1<c.indexOf("*")&&b.push(c.replace(/\*/g,".*"));return b.length?new RegExp("^(?:"+b.join("|")+")$"):null}function q(a){var b=a.attributes,c;delete b.style;delete b["class"];
if(c=CKEDITOR.tools.writeCssText(a.styles,!0))b.style=c;a.classes.length&&(b["class"]=a.classes.sort().join(" "))}function w(a){switch(a.name){case "a":if(!(a.children.length||a.attributes.name||a.attributes.id))return!1;break;case "img":if(!a.attributes.src)return!1}return!0}function H(a){if(!a)return!1;if(!0===a)return!0;var b=D(a);return function(c){return c in a||b&&c.match(b)}}function t(){return new CKEDITOR.htmlParser.element("br")}function v(a){return a.type==CKEDITOR.NODE_ELEMENT&&("br"==
a.name||E.$block[a.name])}function h(a,b,c){var d=a.name;if(E.$empty[d]||!a.children.length)"hr"==d&&"br"==b?a.replaceWith(t()):(a.parent&&c.push({check:"it",el:a.parent}),a.remove());else if(E.$block[d]||"tr"==d)if("br"==b)a.previous&&!v(a.previous)&&(b=t(),b.insertBefore(a)),a.next&&!v(a.next)&&(b=t(),b.insertAfter(a)),a.replaceWithChildren();else{var d=a.children,h;b:{h=E[b];for(var p=0,f=d.length,n;p<f;++p)if(n=d[p],n.type==CKEDITOR.NODE_ELEMENT&&!h[n.name]){h=!1;break b}h=!0}if(h)a.name=b,a.attributes=
{},c.push({check:"parent-down",el:a});else{h=a.parent;for(var p=h.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==h.name,e,g,f=d.length;0<f;)n=d[--f],p&&(n.type==CKEDITOR.NODE_TEXT||n.type==CKEDITOR.NODE_ELEMENT&&E.$inline[n.name])?(e||(e=new CKEDITOR.htmlParser.element(b),e.insertAfter(a),c.push({check:"parent-down",el:e})),e.add(n,0)):(e=null,g=E[h.name]||E.span,n.insertAfter(a),h.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||n.type!=CKEDITOR.NODE_ELEMENT||g[n.name]||c.push({check:"el-up",el:n}));a.remove()}}else d in
{style:1,script:1}?a.remove():(a.parent&&c.push({check:"it",el:a.parent}),a.replaceWithChildren())}function p(a,b,c){var d,h;for(d=0;d<c.length;++d)if(h=c[d],!(h.check&&!a.check(h.check,!1)||h.left&&!h.left(b))){h.right(b,G);break}}function n(a,b){var c=b.getDefinition(),d=c.attributes,h=c.styles,p,f,n,e;if(a.name!=c.element)return!1;for(p in d)if("class"==p)for(c=d[p].split(/\s+/),n=a.classes.join("|");e=c.pop();){if(-1==n.indexOf(e))return!1}else if(a.attributes[p]!=d[p])return!1;for(f in h)if(a.styles[f]!=
h[f])return!1;return!0}function y(a,b){var c,d;"string"==typeof a?c=a:a instanceof CKEDITOR.style?d=a:(c=a[0],d=a[1]);return[{element:c,left:d,right:function(a,c){c.transform(a,b)}}]}function z(a){return function(b){return n(b,a)}}function J(a){return function(b,c){c[a](b)}}var E=CKEDITOR.dtd,C=CKEDITOR.tools.copy,Y=CKEDITOR.tools.trim,P=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2;CKEDITOR.filter=function(a){this.allowedContent=[];this.disallowedContent=[];this.elementCallbacks=null;this.disabled=
!1;this.editor=null;this.id=CKEDITOR.tools.getNextNumber();this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}};CKEDITOR.filter.instances[this.id]=this;if(a instanceof CKEDITOR.editor){a=this.editor=a;this.customConfig=!0;var b=a.config.allowedContent;!0===b?this.disabled=!0:(b||(this.customConfig=!1),this.allow(b,"config",1),this.allow(a.config.extraAllowedContent,"extra",1),this.allow(P[a.enterMode]+" "+P[a.shiftEnterMode],"default",
1),this.disallow(a.config.disallowedContent))}else this.customConfig=!1,this.allow(a,"default",1)};CKEDITOR.filter.instances={};CKEDITOR.filter.prototype={allow:function(b,c,d){if(!g(this,b,d))return!1;var h,p;if("string"==typeof b)b=e(b);else if(b instanceof CKEDITOR.style){if(b.toAllowedContentRules)return this.allow(b.toAllowedContentRules(this.editor),c,d);h=b.getDefinition();b={};d=h.attributes;b[h.element]=h={styles:h.styles,requiredStyles:h.styles&&CKEDITOR.tools.objectKeys(h.styles)};d&&(d=
C(d),h.classes=d["class"]?d["class"].split(/\s+/):null,h.requiredClasses=h.classes,delete d["class"],h.attributes=d,h.requiredAttributes=d&&CKEDITOR.tools.objectKeys(d))}else if(CKEDITOR.tools.isArray(b)){for(h=0;h<b.length;++h)p=this.allow(b[h],c,d);return p}a(this,b,c,this.allowedContent,this._.allowedRules);return!0},applyTo:function(a,b,c,d){if(this.disabled)return!1;var p=this,f=[],n=this.editor&&this.editor.config.protectedSource,e,g=!1,F={doFilter:!c,doTransform:!0,doCallbacks:!0,toHtml:b};
a.forEach(function(a){if(a.type==CKEDITOR.NODE_ELEMENT){if("off"==a.attributes["data-cke-filter"])return!1;if(!b||"span"!=a.name||!~CKEDITOR.tools.objectKeys(a.attributes).join("|").indexOf("data-cke-"))if(e=x(p,a,f,F),e&1)g=!0;else if(e&2)return!1}else if(a.type==CKEDITOR.NODE_COMMENT&&a.value.match(/^\{cke_protected\}(?!\{C\})/)){var c;a:{var d=decodeURIComponent(a.value.replace(/^\{cke_protected\}/,""));c=[];var h,v,y;if(n)for(v=0;v<n.length;++v)if((y=d.match(n[v]))&&y[0].length==d.length){c=!0;
break a}d=CKEDITOR.htmlParser.fragment.fromHtml(d);1==d.children.length&&(h=d.children[0]).type==CKEDITOR.NODE_ELEMENT&&x(p,h,c,F);c=!c.length}c||f.push(a)}},null,!0);f.length&&(g=!0);var v;a=[];d=P[d||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var y;c=f.pop();)c.type==CKEDITOR.NODE_ELEMENT?h(c,d,a):c.remove();for(;v=a.pop();)if(c=v.el,c.parent)switch(y=E[c.parent.name]||E.span,v.check){case "it":E.$removeEmpty[c.name]&&!c.children.length?h(c,d,a):w(c)||h(c,d,a);break;case "el-up":c.parent.type==
CKEDITOR.NODE_DOCUMENT_FRAGMENT||y[c.name]||h(c,d,a);break;case "parent-down":c.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||y[c.name]||h(c.parent,d,a)}return g},checkFeature:function(a){if(this.disabled||!a)return!0;a.toFeature&&(a=a.toFeature(this.editor));return!a.requiredContent||this.check(a.requiredContent)},disable:function(){this.disabled=!0},disallow:function(b){if(!g(this,b,!0))return!1;"string"==typeof b&&(b=e(b));a(this,b,null,this.disallowedContent,this._.disallowedRules);return!0},
addContentForms:function(a){if(!this.disabled&&a){var b,c,d=[],h;for(b=0;b<a.length&&!h;++b)c=a[b],("string"==typeof c||c instanceof CKEDITOR.style)&&this.check(c)&&(h=c);if(h){for(b=0;b<a.length;++b)d.push(y(a[b],h));this.addTransformations(d)}}},addElementCallback:function(a){this.elementCallbacks||(this.elementCallbacks=[]);this.elementCallbacks.push(a)},addFeature:function(a){if(this.disabled||!a)return!0;a.toFeature&&(a=a.toFeature(this.editor));this.allow(a.allowedContent,a.name);this.addTransformations(a.contentTransformations);
this.addContentForms(a.contentForms);return a.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(a.requiredContent):!0},addTransformations:function(a){var b,c;if(!this.disabled&&a){var d=this._.transformations,h;for(h=0;h<a.length;++h){b=a[h];var p=void 0,f=void 0,n=void 0,e=void 0,g=void 0,v=void 0;c=[];for(f=0;f<b.length;++f)n=b[f],"string"==typeof n?(n=n.split(/\s*:\s*/),e=n[0],g=null,v=n[1]):(e=n.check,g=n.left,v=n.right),p||(p=n,p=p.element?p.element:e?e.match(/^([a-z0-9]+)/i)[0]:
p.left.getDefinition().element),g instanceof CKEDITOR.style&&(g=z(g)),c.push({check:e==p?null:e,left:g,right:"string"==typeof v?J(v):v});b=p;d[b]||(d[b]=[]);d[b].push(c)}}},check:function(a,b,c){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(a)){for(var d=a.length;d--;)if(this.check(a[d],b,c))return!0;return!1}var h,f;if("string"==typeof a){f=a+"\x3c"+(!1===b?"0":"1")+(c?"1":"0")+"\x3e";if(f in this._.cachedChecks)return this._.cachedChecks[f];d=e(a).$1;h=d.styles;var n=d.classes;d.name=d.elements;
d.classes=n=n?n.split(/\s*,\s*/):[];d.styles=u(h);d.attributes=u(d.attributes);d.children=[];n.length&&(d.attributes["class"]=n.join(" "));h&&(d.attributes.style=CKEDITOR.tools.writeCssText(d.styles));h=d}else d=a.getDefinition(),h=d.styles,n=d.attributes||{},h&&!CKEDITOR.tools.isEmpty(h)?(h=C(h),n.style=CKEDITOR.tools.writeCssText(h,!0)):h={},h={name:d.element,attributes:n,classes:n["class"]?n["class"].split(/\s+/):[],styles:h,children:[]};var n=CKEDITOR.tools.clone(h),g=[],v;if(!1!==b&&(v=this._.transformations[h.name])){for(d=
0;d<v.length;++d)p(this,h,v[d]);q(h)}x(this,n,g,{doFilter:!0,doTransform:!1!==b,skipRequired:!c,skipFinalValidation:!c});b=0<g.length?!1:CKEDITOR.tools.objectCompare(h.attributes,n.attributes,!0)?!0:!1;"string"==typeof a&&(this._.cachedChecks[f]=b);return b},getAllowedEnterMode:function(){var a=["p","div","br"],b={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(c,d){var h=a.slice(),p;if(this.check(P[c]))return c;for(d||(h=h.reverse());p=h.pop();)if(this.check(p))return b[p];
return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id];delete this._;delete this.allowedContent;delete this.disallowedContent}};var O={styles:1,attributes:1,classes:1},N={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},B=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,I={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},F=/^cke:(object|embed|param)$/,
K=/^(object|embed|param)$/,G;G=CKEDITOR.filter.transformationsTools={sizeToStyle:function(a){this.lengthToStyle(a,"width");this.lengthToStyle(a,"height")},sizeToAttribute:function(a){this.lengthToAttribute(a,"width");this.lengthToAttribute(a,"height")},lengthToStyle:function(a,b,c){c=c||b;if(!(c in a.styles)){var d=a.attributes[b];d&&(/^\d+$/.test(d)&&(d+="px"),a.styles[c]=d)}delete a.attributes[b]},lengthToAttribute:function(a,b,c){c=c||b;if(!(c in a.attributes)){var d=a.styles[b],h=d&&d.match(/^(\d+)(?:\.\d*)?px$/);
h?a.attributes[c]=h[1]:"cke-test"==d&&(a.attributes[c]="cke-test")}delete a.styles[b]},alignmentToStyle:function(a){if(!("float"in a.styles)){var b=a.attributes.align;if("left"==b||"right"==b)a.styles["float"]=b}delete a.attributes.align},alignmentToAttribute:function(a){if(!("align"in a.attributes)){var b=a.styles["float"];if("left"==b||"right"==b)a.attributes.align=b}delete a.styles["float"]},matchesStyle:n,transform:function(a,b){if("string"==typeof b)a.name=b;else{var c=b.getDefinition(),d=c.styles,
h=c.attributes,p,n,f,e;a.name=c.element;for(p in h)if("class"==p)for(c=a.classes.join("|"),f=h[p].split(/\s+/);e=f.pop();)-1==c.indexOf(e)&&a.classes.push(e);else a.attributes[p]=h[p];for(n in d)a.styles[n]=d[n]}}}})();
(function(){CKEDITOR.focusManager=function(a){if(a.focusManager)return a.focusManager;this.hasFocus=!1;this.currentActive=null;this._={editor:a};return this};CKEDITOR.focusManager._={blurDelay:200};CKEDITOR.focusManager.prototype={focus:function(a){this._.timer&&clearTimeout(this._.timer);a&&(this.currentActive=a);this.hasFocus||this._.locked||((a=CKEDITOR.currentInstance)&&a.focusManager.blur(1),this.hasFocus=!0,(a=this._.editor.container)&&a.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=
1},unlock:function(){delete this._.locked},blur:function(a){function d(){if(this.hasFocus){this.hasFocus=!1;var a=this._.editor.container;a&&a.removeClass("cke_focus");this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var b=CKEDITOR.focusManager._.blurDelay;a||!b?d.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer;d.call(this)},b,this)}},add:function(a,d){var b=a.getCustomData("focusmanager");if(!b||b!=this){b&&b.remove(a);var b=
"focus",c="blur";d&&(CKEDITOR.env.ie?(b="focusin",c="focusout"):CKEDITOR.event.useCapture=1);var f={blur:function(){a.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(a)}};a.on(b,f.focus,this);a.on(c,f.blur,this);d&&(CKEDITOR.event.useCapture=0);a.setCustomData("focusmanager",this);a.setCustomData("focusmanager_handlers",f)}},remove:function(a){a.removeCustomData("focusmanager");var d=a.removeCustomData("focusmanager_handlers");a.removeListener("blur",d.blur);a.removeListener("focus",
d.focus)}}})();CKEDITOR.keystrokeHandler=function(a){if(a.keystrokeHandler)return a.keystrokeHandler;this.keystrokes={};this.blockedKeystrokes={};this._={editor:a};return this};
(function(){var a,d=function(b){b=b.data;var d=b.getKeystroke(),g=this.keystrokes[d],k=this._.editor;a=!1===k.fire("key",{keyCode:d,domEvent:b});a||(g&&(a=!1!==k.execCommand(g,{from:"keystrokeHandler"})),a||(a=!!this.blockedKeystrokes[d]));a&&b.preventDefault(!0);return!a},b=function(b){a&&(a=!1,b.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(a){a.on("keydown",d,this);if(CKEDITOR.env.gecko&&CKEDITOR.env.mac)a.on("keypress",b,this)}}})();
(function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(a,d,b){a&&CKEDITOR.lang.languages[a]||(a=
this.detect(d,a));var c=this;d=function(){c[a].dir=c.rtl[a]?"rtl":"ltr";b(a,c[a])};this[a]?d():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+a+".js"),d,this)},detect:function(a,d){var b=this.languages;d=d||navigator.userLanguage||navigator.language||a;var c=d.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),f=c[1],c=c[2];b[f+"-"+c]?f=f+"-"+c:b[f]||(f=null);CKEDITOR.lang.detect=f?function(){return f}:function(a){return a};return f||a}}})();
CKEDITOR.scriptLoader=function(){var a={},d={};return{load:function(b,c,f,g){var k="string"==typeof b;k&&(b=[b]);f||(f=CKEDITOR);var l=b.length,m=[],u=[],e=function(a){c&&(k?c.call(f,a):c.call(f,m,u))};if(0===l)e(!0);else{var A=function(a,b){(b?m:u).push(a);0>=--l&&(g&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),e(b))},r=function(b,c){a[b]=1;var f=d[b];delete d[b];for(var e=0;e<f.length;e++)f[e](b,c)},x=function(b){if(a[b])A(b,!0);else{var f=d[b]||(d[b]=[]);f.push(A);if(!(1<f.length)){var e=
new CKEDITOR.dom.element("script");e.setAttributes({type:"text/javascript",src:b});c&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?e.$.onreadystatechange=function(){if("loaded"==e.$.readyState||"complete"==e.$.readyState)e.$.onreadystatechange=null,r(b,!0)}:(e.$.onload=function(){setTimeout(function(){r(b,!0)},0)},e.$.onerror=function(){r(b,!1)}));e.appendTo(CKEDITOR.document.getHead())}}};g&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var D=0;D<l;D++)x(b[D])}},
queue:function(){function a(){var b;(b=c[0])&&this.load(b.scriptUrl,b.callback,CKEDITOR,0)}var c=[];return function(d,g){var k=this;c.push({scriptUrl:d,callback:function(){g&&g.apply(this,arguments);c.shift();a.call(k)}});1==c.length&&a.call(this)}}()}}();CKEDITOR.resourceManager=function(a,d){this.basePath=a;this.fileName=d;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}}};
CKEDITOR.resourceManager.prototype={add:function(a,d){if(this.registered[a])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+a+'" is already registered.');var b=this.registered[a]=d||{};b.name=a;b.path=this.getPath(a);CKEDITOR.fire(a+CKEDITOR.tools.capitalize(this.fileName)+"Ready",b);return this.get(a)},get:function(a){return this.registered[a]||null},getPath:function(a){var d=this.externals[a];return CKEDITOR.getUrl(d&&d.dir||this.basePath+a+"/")},getFilePath:function(a){var d=this.externals[a];
return CKEDITOR.getUrl(this.getPath(a)+(d?d.file:this.fileName+".js"))},addExternal:function(a,d,b){a=a.split(",");for(var c=0;c<a.length;c++){var f=a[c];b||(d=d.replace(/[^\/]+$/,function(a){b=a;return""}));this.externals[f]={dir:d,file:b||this.fileName+".js"}}},load:function(a,d,b){CKEDITOR.tools.isArray(a)||(a=a?[a]:[]);for(var c=this.loaded,f=this.registered,g=[],k={},l={},m=0;m<a.length;m++){var u=a[m];if(u)if(c[u]||f[u])l[u]=this.get(u);else{var e=this.getFilePath(u);g.push(e);e in k||(k[e]=
[]);k[e].push(u)}}CKEDITOR.scriptLoader.load(g,function(a,f){if(f.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+k[f[0]].join(",")+'" was not found at "'+f[0]+'".');for(var e=0;e<a.length;e++)for(var g=k[a[e]],q=0;q<g.length;q++){var w=g[q];l[w]=this.get(w);c[w]=1}d.call(b,l)},this)}};CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin");
CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(a){var d={};return function(b,c,f){var g={},k=function(b){a.call(this,b,function(a){CKEDITOR.tools.extend(g,a);var b=[],e;for(e in a){var l=a[e],r=l&&l.requires;if(!d[e]){if(l.icons)for(var x=l.icons.split(","),D=x.length;D--;)CKEDITOR.skin.addIcon(x[D],l.path+"icons/"+(CKEDITOR.env.hidpi&&l.hidpi?"hidpi/":"")+x[D]+".png");d[e]=1}if(r)for(r.split&&(r=r.split(",")),l=0;l<r.length;l++)g[r[l]]||b.push(r[l])}if(b.length)k.call(this,
b);else{for(e in g)l=g[e],l.onLoad&&!l.onLoad._called&&(!1===l.onLoad()&&delete g[e],l.onLoad._called=1);c&&c.call(f||window,g)}},this)};k.call(this,b)}});CKEDITOR.plugins.setLang=function(a,d,b){var c=this.get(a);a=c.langEntries||(c.langEntries={});c=c.lang||(c.lang=[]);c.split&&(c=c.split(","));-1==CKEDITOR.tools.indexOf(c,d)&&c.push(d);a[d]=b};CKEDITOR.ui=function(a){if(a.ui)return a.ui;this.items={};this.instances={};this.editor=a;this._={handlers:{}};return this};
CKEDITOR.ui.prototype={add:function(a,d,b){b.name=a.toLowerCase();var c=this.items[a]={type:d,command:b.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(c,b)},get:function(a){return this.instances[a]},create:function(a){var d=this.items[a],b=d&&this._.handlers[d.type],c=d&&d.command&&this.editor.getCommand(d.command),b=b&&b.create.apply(this,d.args);this.instances[a]=b;c&&c.uiItems.push(b);b&&!b.type&&(b.type=d.type);return b},addHandler:function(a,d){this._.handlers[a]=
d},space:function(a){return CKEDITOR.document.getById(this.spaceId(a))},spaceId:function(a){return this.editor.id+"_"+a}};CKEDITOR.event.implementOn(CKEDITOR.ui);
(function(){function a(a,f,e){CKEDITOR.event.call(this);a=a&&CKEDITOR.tools.clone(a);if(void 0!==f){if(!(f instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!e)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&e==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!b(f,e))throw Error('The specified element mode is not supported on element: "'+f.getName()+'".');
this.element=f;this.elementMode=e;this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(f.getId()||f.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={};this.commands={};this.templates={};this.name=this.name||d();this.id=CKEDITOR.tools.getNextId();this.status="unloaded";this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);this.focusManager=new CKEDITOR.focusManager(this);this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this);this.on("readOnly",
c);this.on("selectionChange",function(a){g(this,a.data.path)});this.on("activeFilterChange",function(){g(this,this.elementPath(),!0)});this.on("mode",c);this.on("instanceReady",function(){this.config.startupFocus&&this.focus()});CKEDITOR.fire("instanceCreated",null,this);CKEDITOR.add(this);CKEDITOR.tools.setTimeout(function(){"destroyed"!==this.status?l(this,a):CKEDITOR.warn("editor-incorrect-destroy")},0,this)}function d(){do var a="editor"+ ++x;while(CKEDITOR.instances[a]);return a}function b(a,
b){return b==CKEDITOR.ELEMENT_MODE_INLINE?a.is(CKEDITOR.dtd.$editable)||a.is("textarea"):b==CKEDITOR.ELEMENT_MODE_REPLACE?!a.is(CKEDITOR.dtd.$nonBodyContent):1}function c(){var a=this.commands,b;for(b in a)f(this,a[b])}function f(a,b){b[b.startDisabled?"disable":a.readOnly&&!b.readOnly?"disable":b.modes[a.mode]?"enable":"disable"]()}function g(a,b,c){if(b){var d,f,h=a.commands;for(f in h)d=h[f],(c||d.contextSensitive)&&d.refresh(a,b)}}function k(a){var b=a.config.customConfig;if(!b)return!1;var b=
CKEDITOR.getUrl(b),c=D[b]||(D[b]={});c.fn?(c.fn.call(a,a.config),CKEDITOR.getUrl(a.config.customConfig)!=b&&k(a)||a.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(b,function(){c.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};k(a)});return!0}function l(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);CKEDITOR.tools.extend(a.config,b,!0);delete a.config.on}c=a.config;a.readOnly=c.readOnly?!0:a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?
a.element.is("textarea")?a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"):a.element.isReadOnly():a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"):!1;a.blockless=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(a.element.is("textarea")||CKEDITOR.dtd[a.element.getName()].p):!1;a.tabIndex=c.tabIndex||a.element&&a.element.getAttribute("tabindex")||0;a.activeEnterMode=a.enterMode=a.blockless?CKEDITOR.ENTER_BR:c.enterMode;
a.activeShiftEnterMode=a.shiftEnterMode=a.blockless?CKEDITOR.ENTER_BR:c.shiftEnterMode;c.skin&&(CKEDITOR.skinName=c.skin);a.fireOnce("configLoaded");a.dataProcessor=new CKEDITOR.htmlDataProcessor(a);a.filter=a.activeFilter=new CKEDITOR.filter(a);m(a)});b&&null!=b.customConfig&&(a.config.customConfig=b.customConfig);k(a)||a.fireOnce("customConfigLoaded")}function m(a){CKEDITOR.skin.loadPart("editor",function(){u(a)})}function u(a){CKEDITOR.lang.load(a.config.language,a.config.defaultLanguage,function(b,
c){var d=a.config.title;a.langCode=b;a.lang=CKEDITOR.tools.prototypedCopy(c);a.title="string"==typeof d||!1===d?d:[a.lang.editor,a.name].join(", ");a.config.contentsLangDirection||(a.config.contentsLangDirection=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.getDirection(1):a.lang.dir);a.fire("langLoaded");e(a)})}function e(a){a.getStylesSet(function(b){a.once("loaded",function(){a.fire("stylesSet",{styles:b})},null,null,1);A(a)})}function A(a){var b=a.config,c=b.plugins,d=b.extraPlugins,f=
b.removePlugins;if(d)var h=new RegExp("(?:^|,)(?:"+d.replace(/\s*,\s*/g,"|")+")(?\x3d,|$)","g"),c=c.replace(h,""),c=c+(","+d);if(f)var p=new RegExp("(?:^|,)(?:"+f.replace(/\s*,\s*/g,"|")+")(?\x3d,|$)","g"),c=c.replace(p,"");CKEDITOR.env.air&&(c+=",adobeair");CKEDITOR.plugins.load(c.split(","),function(c){var d=[],h=[],f=[];a.plugins=c;for(var e in c){var g=c[e],v=g.lang,k=null,l=g.requires,m;CKEDITOR.tools.isArray(l)&&(l=l.join(","));if(l&&(m=l.match(p)))for(;l=m.pop();)CKEDITOR.error("editor-plugin-required",
{plugin:l.replace(",",""),requiredBy:e});v&&!a.lang[e]&&(v.split&&(v=v.split(",")),0<=CKEDITOR.tools.indexOf(v,a.langCode)?k=a.langCode:(k=a.langCode.replace(/-.*/,""),k=k!=a.langCode&&0<=CKEDITOR.tools.indexOf(v,k)?k:0<=CKEDITOR.tools.indexOf(v,"en")?"en":v[0]),g.langEntries&&g.langEntries[k]?(a.lang[e]=g.langEntries[k],k=null):f.push(CKEDITOR.getUrl(g.path+"lang/"+k+".js")));h.push(k);d.push(g)}CKEDITOR.scriptLoader.load(f,function(){for(var c=["beforeInit","init","afterInit"],f=0;f<c.length;f++)for(var p=
0;p<d.length;p++){var n=d[p];0===f&&h[p]&&n.lang&&n.langEntries&&(a.lang[n.name]=n.langEntries[h[p]]);if(n[c[f]])n[c[f]](a)}a.fireOnce("pluginsLoaded");b.keystrokes&&a.setKeystroke(a.config.keystrokes);for(p=0;p<a.config.blockedKeystrokes.length;p++)a.keystrokeHandler.blockedKeystrokes[a.config.blockedKeystrokes[p]]=1;a.status="loaded";a.fireOnce("loaded");CKEDITOR.fire("instanceLoaded",null,a)})})}function r(){var a=this.element;if(a&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var b=this.getData();
this.config.htmlEncodeOutput&&(b=CKEDITOR.tools.htmlEncode(b));a.is("textarea")?a.setValue(b):a.setHtml(b);return!0}return!1}a.prototype=CKEDITOR.editor.prototype;CKEDITOR.editor=a;var x=0,D={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(a,b){b.name=a.toLowerCase();var c=new CKEDITOR.command(this,b);this.mode&&f(this,c);return this.commands[a]=c},_attachToForm:function(){function a(b){c.updateElement();c._.required&&!d.getValue()&&!1===c.fire("required")&&b.data.preventDefault()}
function b(a){return!!(a&&a.call&&a.apply)}var c=this,d=c.element,f=new CKEDITOR.dom.element(d.$.form);d.is("textarea")&&f&&(f.on("submit",a),b(f.$.submit)&&(f.$.submit=CKEDITOR.tools.override(f.$.submit,function(b){return function(){a();b.apply?b.apply(this):b()}})),c.on("destroy",function(){f.removeListener("submit",a)}))},destroy:function(a){this.fire("beforeDestroy");!a&&r.call(this);this.editable(null);this.filter&&(this.filter.destroy(),delete this.filter);delete this.activeFilter;this.status=
"destroyed";this.fire("destroy");this.removeAllListeners();CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(a){if(!a){a=this.getSelection();if(!a)return null;a=a.getStartElement()}return a?new CKEDITOR.dom.elementPath(a,this.editable()):null},createRange:function(){var a=this.editable();return a?new CKEDITOR.dom.range(a):null},execCommand:function(a,b){var c=this.getCommand(a),d={name:a,commandData:b,command:c};return c&&c.state!=CKEDITOR.TRISTATE_DISABLED&&
!1!==this.fire("beforeCommandExec",d)&&(d.returnValue=c.exec(d.commandData),!c.async&&!1!==this.fire("afterCommandExec",d))?d.returnValue:!1},getCommand:function(a){return this.commands[a]},getData:function(a){!a&&this.fire("beforeGetData");var b=this._.data;"string"!=typeof b&&(b=(b=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?b.is("textarea")?b.getValue():b.getHtml():"");b={dataValue:b};!a&&this.fire("getData",b);return b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");
"string"!=typeof a&&(a=(a=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.is("textarea")?a.getValue():a.getHtml():"");return a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){var d=!0,f=b;b&&"object"==typeof b&&(c=b.internal,f=b.callback,d=!b.noSnapshot);!c&&d&&this.fire("saveSnapshot");if(f||!c)this.once("dataReady",function(a){!c&&d&&this.fire("saveSnapshot");f&&f.call(a.editor)});a={dataValue:a};!c&&this.fire("setData",a);this._.data=a.dataValue;
!c&&this.fire("afterSetData",a)},setReadOnly:function(a){a=null==a||a;this.readOnly!=a&&(this.readOnly=a,this.keystrokeHandler.blockedKeystrokes[8]=+a,this.editable().setReadOnly(a),this.fire("readOnly"))},insertHtml:function(a,b,c){this.fire("insertHtml",{dataValue:a,mode:b,range:c})},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)},getSelectedHtml:function(a){var b=this.editable(),c=this.getSelection(),c=c&&c.getRanges();if(!b||!c||0===c.length)return null;
for(var d=new CKEDITOR.dom.documentFragment,f,h,p,n=0;n<c.length;n++){var e=c[n],g=e.startContainer;g.getName&&"tr"==g.getName()?(f||(f=g.getAscendant("table").clone(),f.append(g.getAscendant("tbody").clone()),d.append(f),f=f.findOne("tbody")),h&&h.equals(g)||(h=g,p=g.clone(),f.append(p)),p.append(e.cloneContents())):d.append(e.cloneContents())}b=f?d:b.getHtmlFromRange(c[0]);return a?b.getHtml():b},extractSelectedHtml:function(a,b){var c=this.editable(),d=this.getSelection().getRanges();if(!c||0===
d.length)return null;d=d[0];c=c.extractHtmlFromRange(d,b);b||this.getSelection().selectRanges([d]);return a?c.getHtml():c},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return r.call(this)},setKeystroke:function(){for(var a=this.keystrokeHandler.keystrokes,b=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,
0)],c,d,f=b.length;f--;)c=b[f],d=0,CKEDITOR.tools.isArray(c)&&(d=c[1],c=c[0]),d?a[c]=d:delete a[c]},addFeature:function(a){return this.filter.addFeature(a)},setActiveFilter:function(a){a||(a=this.filter);this.activeFilter!==a&&(this.activeFilter=a,this.fire("activeFilterChange"),a===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(a.getAllowedEnterMode(this.enterMode),a.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(a,b){a=a?this.blockless?CKEDITOR.ENTER_BR:
a:this.enterMode;b=b?this.blockless?CKEDITOR.ENTER_BR:b:this.shiftEnterMode;if(this.activeEnterMode!=a||this.activeShiftEnterMode!=b)this.activeEnterMode=a,this.activeShiftEnterMode=b,this.fire("activeEnterModeChange")},showNotification:function(a){alert(a)}})})();CKEDITOR.ELEMENT_MODE_NONE=0;CKEDITOR.ELEMENT_MODE_REPLACE=1;CKEDITOR.ELEMENT_MODE_APPENDTO=2;CKEDITOR.ELEMENT_MODE_INLINE=3;CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}};
(function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,d={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(b){for(var c,f,g=0,k;c=this._.htmlPartsRegex.exec(b);){f=c.index;if(f>g)if(g=b.substring(g,f),k)k.push(g);else this.onText(g);
g=this._.htmlPartsRegex.lastIndex;if(f=c[1])if(f=f.toLowerCase(),k&&CKEDITOR.dtd.$cdata[f]&&(this.onCDATA(k.join("")),k=null),!k){this.onTagClose(f);continue}if(k)k.push(c[0]);else if(f=c[3]){if(f=f.toLowerCase(),!/="/.test(f)){var l={},m,u=c[4];c=!!c[5];if(u)for(;m=a.exec(u);){var e=m[1].toLowerCase();m=m[2]||m[3]||m[4]||"";l[e]=!m&&d[e]?e:CKEDITOR.tools.htmlDecodeAttr(m)}this.onTagOpen(f,l,c);!k&&CKEDITOR.dtd.$cdata[f]&&(k=[])}}else if(f=c[2])this.onComment(f)}if(b.length>g)this.onText(b.substring(g,
b.length))}}})();
CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a){this._.output.push("\x3c",a)},openTagClose:function(a,d){d?this._.output.push(" /\x3e"):this._.output.push("\x3e")},attribute:function(a,d){"string"==typeof d&&(d=CKEDITOR.tools.htmlEncodeAttr(d));this._.output.push(" ",a,'\x3d"',d,'"')},closeTag:function(a){this._.output.push("\x3c/",a,"\x3e")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("\x3c!--",a,
"--\x3e")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[];this._.indent=!1},getHtml:function(a){var d=this._.output.join("");a&&this.reset();return d}}});"use strict";
(function(){CKEDITOR.htmlParser.node=function(){};CKEDITOR.htmlParser.node.prototype={remove:function(){var a=this.parent.children,d=CKEDITOR.tools.indexOf(a,this),b=this.previous,c=this.next;b&&(b.next=c);c&&(c.previous=b);a.splice(d,1);this.parent=null},replaceWith:function(a){var d=this.parent.children,b=CKEDITOR.tools.indexOf(d,this),c=a.previous=this.previous,f=a.next=this.next;c&&(c.next=a);f&&(f.previous=a);d[b]=a;a.parent=this.parent;this.parent=null},insertAfter:function(a){var d=a.parent.children,
b=CKEDITOR.tools.indexOf(d,a),c=a.next;d.splice(b+1,0,this);this.next=a.next;this.previous=a;a.next=this;c&&(c.previous=this);this.parent=a.parent},insertBefore:function(a){var d=a.parent.children,b=CKEDITOR.tools.indexOf(d,a);d.splice(b,0,this);this.next=a;(this.previous=a.previous)&&(a.previous.next=this);a.previous=this;this.parent=a.parent},getAscendant:function(a){var d="function"==typeof a?a:"string"==typeof a?function(b){return b.name==a}:function(b){return b.name in a},b=this.parent;for(;b&&
b.type==CKEDITOR.NODE_ELEMENT;){if(d(b))return b;b=b.parent}return null},wrapWith:function(a){this.replaceWith(a);a.add(this);return a},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(a){return a||{}}}})();"use strict";CKEDITOR.htmlParser.comment=function(a){this.value=a;this._={isBlockLike:!1}};
CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(a,d){var b=this.value;if(!(b=a.onComment(d,b,this)))return this.remove(),!1;if("string"!=typeof b)return this.replaceWith(b),!1;this.value=b;return!0},writeHtml:function(a,d){d&&this.filter(d);a.comment(this.value)}});"use strict";
(function(){CKEDITOR.htmlParser.text=function(a){this.value=a;this._={isBlockLike:!1}};CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(a,d){if(!(this.value=a.onText(d,this.value,this)))return this.remove(),!1},writeHtml:function(a,d){d&&this.filter(d);a.text(this.value)}})})();"use strict";
(function(){CKEDITOR.htmlParser.cdata=function(a){this.value=a};CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(a){a.write(this.value)}})})();"use strict";CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:!0,hasInlineStarted:!1}};
(function(){function a(a){return a.attributes["data-cke-survive"]?!1:"a"==a.name&&a.attributes.href||CKEDITOR.dtd.$removeEmpty[a.name]}var d=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),b={ol:1,ul:1},c=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),f={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=
function(g,k,l){function m(a){var b;if(0<w.length)for(var c=0;c<w.length;c++){var d=w[c],h=d.name,f=CKEDITOR.dtd[h],e=t.name&&CKEDITOR.dtd[t.name];e&&!e[h]||a&&f&&!f[a]&&CKEDITOR.dtd[a]?h==t.name&&(A(t,t.parent,1),c--):(b||(u(),b=1),d=d.clone(),d.parent=t,t=d,w.splice(c,1),c--)}}function u(){for(;H.length;)A(H.shift(),t)}function e(a){if(a._.isBlockLike&&"pre"!=a.name&&"textarea"!=a.name){var b=a.children.length,c=a.children[b-1],d;c&&c.type==CKEDITOR.NODE_TEXT&&((d=CKEDITOR.tools.rtrim(c.value))?
c.value=d:a.children.length=b-1)}}function A(b,c,d){c=c||t||q;var f=t;void 0===b.previous&&(r(c,b)&&(t=c,D.onTagOpen(l,{}),b.returnPoint=c=t),e(b),a(b)&&!b.children.length||c.add(b),"pre"==b.name&&(h=!1),"textarea"==b.name&&(v=!1));b.returnPoint?(t=b.returnPoint,delete b.returnPoint):t=d?c:f}function r(a,b){if((a==q||"body"==a.name)&&l&&(!a.name||CKEDITOR.dtd[a.name][l])){var c,d;return(c=b.attributes&&(d=b.attributes["data-cke-real-element-type"])?d:b.name)&&c in CKEDITOR.dtd.$inline&&!(c in CKEDITOR.dtd.head)&&
!b.isOrphan||b.type==CKEDITOR.NODE_TEXT}}function x(a,b){return a in CKEDITOR.dtd.$listItem||a in CKEDITOR.dtd.$tableContent?a==b||"dt"==a&&"dd"==b||"dd"==a&&"dt"==b:!1}var D=new CKEDITOR.htmlParser,q=k instanceof CKEDITOR.htmlParser.element?k:"string"==typeof k?new CKEDITOR.htmlParser.element(k):new CKEDITOR.htmlParser.fragment,w=[],H=[],t=q,v="textarea"==q.name,h="pre"==q.name;D.onTagOpen=function(f,n,e,g){n=new CKEDITOR.htmlParser.element(f,n);n.isUnknown&&e&&(n.isEmpty=!0);n.isOptionalClose=g;
if(a(n))w.push(n);else{if("pre"==f)h=!0;else{if("br"==f&&h){t.add(new CKEDITOR.htmlParser.text("\n"));return}"textarea"==f&&(v=!0)}if("br"==f)H.push(n);else{for(;!(g=(e=t.name)?CKEDITOR.dtd[e]||(t._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):c,n.isUnknown||t.isUnknown||g[f]);)if(t.isOptionalClose)D.onTagClose(e);else if(f in b&&e in b)e=t.children,(e=e[e.length-1])&&"li"==e.name||A(e=new CKEDITOR.htmlParser.element("li"),t),!n.returnPoint&&(n.returnPoint=t),t=e;else if(f in CKEDITOR.dtd.$listItem&&
!x(f,e))D.onTagOpen("li"==f?"ul":"dl",{},0,1);else if(e in d&&!x(f,e))!n.returnPoint&&(n.returnPoint=t),t=t.parent;else if(e in CKEDITOR.dtd.$inline&&w.unshift(t),t.parent)A(t,t.parent,1);else{n.isOrphan=1;break}m(f);u();n.parent=t;n.isEmpty?A(n):t=n}}};D.onTagClose=function(a){for(var b=w.length-1;0<=b;b--)if(a==w[b].name){w.splice(b,1);return}for(var c=[],d=[],h=t;h!=q&&h.name!=a;)h._.isBlockLike||d.unshift(h),c.push(h),h=h.returnPoint||h.parent;if(h!=q){for(b=0;b<c.length;b++){var f=c[b];A(f,f.parent)}t=
h;h._.isBlockLike&&u();A(h,h.parent);h==t&&(t=t.parent);w=w.concat(d)}"body"==a&&(l=!1)};D.onText=function(a){if(!(t._.hasInlineStarted&&!H.length||h||v)&&(a=CKEDITOR.tools.ltrim(a),0===a.length))return;var b=t.name,e=b?CKEDITOR.dtd[b]||(t._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):c;if(!v&&!e["#"]&&b in d)D.onTagOpen(f[b]||""),D.onText(a);else{u();m();h||v||(a=a.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));a=new CKEDITOR.htmlParser.text(a);if(r(t,a))this.onTagOpen(l,{},0,1);t.add(a)}};D.onCDATA=
function(a){t.add(new CKEDITOR.htmlParser.cdata(a))};D.onComment=function(a){u();m();t.add(new CKEDITOR.htmlParser.comment(a))};D.parse(g);for(u();t!=q;)A(t,t.parent,1);e(q);return q};CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(a,b){isNaN(b)&&(b=this.children.length);var c=0<b?this.children[b-1]:null;if(c){if(a._.isBlockLike&&c.type==CKEDITOR.NODE_TEXT&&(c.value=CKEDITOR.tools.rtrim(c.value),0===c.value.length)){this.children.pop();this.add(a);return}c.next=
a}a.previous=c;a.parent=this;this.children.splice(b,0,a);this._.hasInlineStarted||(this._.hasInlineStarted=a.type==CKEDITOR.NODE_TEXT||a.type==CKEDITOR.NODE_ELEMENT&&!a._.isBlockLike)},filter:function(a,b){b=this.getFilterContext(b);a.onRoot(b,this);this.filterChildren(a,!1,b)},filterChildren:function(a,b,c){if(this.childrenFilteredBy!=a.id){c=this.getFilterContext(c);if(b&&!this.parent)a.onRoot(c,this);this.childrenFilteredBy=a.id;for(b=0;b<this.children.length;b++)!1===this.children[b].filter(a,
c)&&b--}},writeHtml:function(a,b){b&&this.filter(b);this.writeChildrenHtml(a)},writeChildrenHtml:function(a,b,c){var d=this.getFilterContext();if(c&&!this.parent&&b)b.onRoot(d,this);b&&this.filterChildren(b,!1,d);b=0;c=this.children;for(d=c.length;b<d;b++)c[b].writeHtml(a)},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var d=a(this);if(!1!==d){c=this.children;for(var f=0;f<c.length;f++)d=c[f],d.type==CKEDITOR.NODE_ELEMENT?d.forEach(a,b):b&&d.type!=b||a(d)}},getFilterContext:function(a){return a||
{}}}})();"use strict";
(function(){function a(){this.rules=[]}function d(b,c,d,g){var k,l;for(k in c)(l=b[k])||(l=b[k]=new a),l.add(c[k],d,g)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(b){this.id=CKEDITOR.tools.getNextNumber();this.elementNameRules=new a;this.attributeNameRules=new a;this.elementsRules={};this.attributesRules={};this.textRules=new a;this.commentRules=new a;this.rootRules=new a;b&&this.addRules(b,10)},proto:{addRules:function(a,c){var f;"number"==typeof c?f=c:c&&"priority"in c&&(f=
c.priority);"number"!=typeof f&&(f=10);"object"!=typeof c&&(c={});a.elementNames&&this.elementNameRules.addMany(a.elementNames,f,c);a.attributeNames&&this.attributeNameRules.addMany(a.attributeNames,f,c);a.elements&&d(this.elementsRules,a.elements,f,c);a.attributes&&d(this.attributesRules,a.attributes,f,c);a.text&&this.textRules.add(a.text,f,c);a.comment&&this.commentRules.add(a.comment,f,c);a.root&&this.rootRules.add(a.root,f,c)},applyTo:function(a){a.filter(this)},onElementName:function(a,c){return this.elementNameRules.execOnName(a,
c)},onAttributeName:function(a,c){return this.attributeNameRules.execOnName(a,c)},onText:function(a,c,d){return this.textRules.exec(a,c,d)},onComment:function(a,c,d){return this.commentRules.exec(a,c,d)},onRoot:function(a,c){return this.rootRules.exec(a,c)},onElement:function(a,c){for(var d=[this.elementsRules["^"],this.elementsRules[c.name],this.elementsRules.$],g,k=0;3>k;k++)if(g=d[k]){g=g.exec(a,c,this);if(!1===g)return null;if(g&&g!=c)return this.onNode(a,g);if(c.parent&&!c.name)break}return c},
onNode:function(a,c){var d=c.type;return d==CKEDITOR.NODE_ELEMENT?this.onElement(a,c):d==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(a,c.value)):d==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(a,c.value)):null},onAttribute:function(a,c,d,g){return(d=this.attributesRules[d])?d.exec(a,g,c,this):g}}});CKEDITOR.htmlParser.filterRulesGroup=a;a.prototype={add:function(a,c,d){this.rules.splice(this.findIndex(c),0,{value:a,priority:c,options:d})},addMany:function(a,
c,d){for(var g=[this.findIndex(c),0],k=0,l=a.length;k<l;k++)g.push({value:a[k],priority:c,options:d});this.rules.splice.apply(this.rules,g)},findIndex:function(a){for(var c=this.rules,d=c.length-1;0<=d&&a<c[d].priority;)d--;return d+1},exec:function(a,c){var d=c instanceof CKEDITOR.htmlParser.node||c instanceof CKEDITOR.htmlParser.fragment,g=Array.prototype.slice.call(arguments,1),k=this.rules,l=k.length,m,u,e,A;for(A=0;A<l;A++)if(d&&(m=c.type,u=c.name),e=k[A],!(a.nonEditable&&!e.options.applyToAll||
a.nestedEditable&&e.options.excludeNestedEditable)){e=e.value.apply(null,g);if(!1===e||d&&e&&(e.name!=u||e.type!=m))return e;null!=e&&(g[0]=c=e)}return c},execOnName:function(a,c){for(var d=0,g=this.rules,k=g.length,l;c&&d<k;d++)l=g[d],a.nonEditable&&!l.options.applyToAll||a.nestedEditable&&l.options.excludeNestedEditable||(c=c.replace(l.value[0],l.value[1]));return c}}})();
(function(){function a(a,d){function e(a){return a||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function n(a,d){return function(h){if(h.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var f=[],n=b(h),v,F;if(n)for(p(n,1)&&f.push(n);n;)g(n)&&(v=c(n))&&p(v)&&((F=c(v))&&!g(F)?f.push(v):(e(y).insertAfter(v),v.remove())),n=n.previous;for(n=0;n<f.length;n++)f[n].remove();if(f=!a||!1!==("function"==typeof d?d(h):d))y||CKEDITOR.env.needsBrFiller||
h.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT?y||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||h.name in CKEDITOR.dtd.tr||h.name in CKEDITOR.dtd.$listItem)?(f=b(h),f=!f||"form"==h.name&&"input"==f.name):f=!1:f=!1;f&&h.add(e(a))}}}function p(a,b){if((!y||CKEDITOR.env.needsBrFiller)&&a.type==CKEDITOR.NODE_ELEMENT&&"br"==a.name&&!a.attributes["data-cke-eol"])return!0;var c;return a.type==CKEDITOR.NODE_TEXT&&(c=a.value.match(w))&&(c.index&&((new CKEDITOR.htmlParser.text(a.value.substring(0,c.index))).insertBefore(a),
a.value=c[0]),!CKEDITOR.env.needsBrFiller&&y&&(!b||a.parent.name in B)||!y&&((c=a.previous)&&"br"==c.name||!c||g(c)))?!0:!1}var v={elements:{}},y="html"==d,B=CKEDITOR.tools.extend({},h),z;for(z in B)"#"in t[z]||delete B[z];for(z in B)v.elements[z]=n(y,a.config.fillEmptyBlocks);v.root=n(y,!1);v.elements.br=function(a){return function(b){if(b.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var d=b.attributes;if("data-cke-bogus"in d||"data-cke-eol"in d)delete d["data-cke-bogus"];else{for(d=b.next;d&&f(d);)d=
d.next;var h=c(b);!d&&g(b.parent)?k(b.parent,e(a)):g(d)&&h&&!g(h)&&e(a).insertBefore(d)}}}}(y);return v}function d(a,b){return a!=CKEDITOR.ENTER_BR&&!1!==b?a==CKEDITOR.ENTER_DIV?"div":"p":!1}function b(a){for(a=a.children[a.children.length-1];a&&f(a);)a=a.previous;return a}function c(a){for(a=a.previous;a&&f(a);)a=a.previous;return a}function f(a){return a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(a.value)||a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-bookmark"]}function g(a){return a&&
(a.type==CKEDITOR.NODE_ELEMENT&&a.name in h||a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function k(a,b){var c=a.children[a.children.length-1];a.children.push(b);b.parent=a;c&&(c.next=b,b.previous=c)}function l(a){a=a.attributes;"false"!=a.contenteditable&&(a["data-cke-editable"]=a.contenteditable?"true":1);a.contenteditable="false"}function m(a){a=a.attributes;switch(a["data-cke-editable"]){case "true":a.contenteditable="true";break;case "1":delete a.contenteditable}}function u(a){return a.replace(J,
function(a,b,c){return"\x3c"+b+c.replace(E,function(a,b){return C.test(b)&&-1==c.indexOf("data-cke-saved-"+b)?" data-cke-saved-"+a+" data-cke-"+CKEDITOR.rnd+"-"+a:a})+"\x3e"})}function e(a,b){return a.replace(b,function(a,b,c){0===a.indexOf("\x3ctextarea")&&(a=b+x(c).replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")+"\x3c/textarea\x3e");return"\x3ccke:encoded\x3e"+encodeURIComponent(a)+"\x3c/cke:encoded\x3e"})}function A(a){return a.replace(O,function(a,b){return decodeURIComponent(b)})}function r(a){return a.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,
function(a){return"\x3c!--"+H+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"--\x3e"})}function x(a){return a.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(a,b){return decodeURIComponent(b)})}function D(a,b){var c=b._.dataStore;return a.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(a,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(a,b){return c&&c[b]||""})}function q(a,b){var c=[],d=b.config.protectedSource,h=b._.dataStore||(b._.dataStore=
{id:1}),f=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,d=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(d);a=a.replace(/\x3c!--[\s\S]*?--\x3e/g,function(a){return"\x3c!--{cke_tempcomment}"+(c.push(a)-1)+"--\x3e"});for(var e=0;e<d.length;e++)a=a.replace(d[e],function(a){a=a.replace(f,function(a,b,d){return c[d]});return/cke_temp(comment)?/.test(a)?a:"\x3c!--{cke_temp}"+(c.push(a)-1)+"--\x3e"});a=a.replace(f,function(a,b,d){return"\x3c!--"+H+(b?"{C}":
"")+encodeURIComponent(c[d]).replace(/--/g,"%2D%2D")+"--\x3e"});a=a.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(a){return a.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(a,b){h[h.id]=decodeURIComponent(b);return"{cke_protected_"+h.id++ +"}"})});return a=a.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(a,c,d,h){return"\x3c"+c+d+"\x3e"+D(x(h),b)+"\x3c/"+c+"\x3e"})}CKEDITOR.htmlDataProcessor=function(b){var c,
h,f=this;this.editor=b;this.dataFilter=c=new CKEDITOR.htmlParser.filter;this.htmlFilter=h=new CKEDITOR.htmlParser.filter;this.writer=new CKEDITOR.htmlParser.basicWriter;c.addRules(p);c.addRules(n,{applyToAll:!0});c.addRules(a(b,"data"),{applyToAll:!0});h.addRules(y);h.addRules(z,{applyToAll:!0});h.addRules(a(b,"html"),{applyToAll:!0});b.on("toHtml",function(a){a=a.data;var c=a.dataValue,h,c=q(c,b),c=e(c,P),c=u(c),c=e(c,Y),c=c.replace(N,"$1cke:$2"),c=c.replace(I,"\x3ccke:$1$2\x3e\x3c/cke:$1\x3e"),
c=c.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),c=c.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");h=a.context||b.editable().getName();var f;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==h&&(h="div",c="\x3cpre\x3e"+c+"\x3c/pre\x3e",f=1);h=b.document.createElement(h);h.setHtml("a"+c);c=h.getHtml().substr(1);c=c.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),"");f&&(c=c.replace(/^<pre>|<\/pre>$/gi,""));c=c.replace(B,"$1$2");c=A(c);c=x(c);h=!1===a.fixForBody?!1:
d(a.enterMode,b.config.autoParagraph);c=CKEDITOR.htmlParser.fragment.fromHtml(c,a.context,h);h&&(f=c,!f.children.length&&CKEDITOR.dtd[f.name][h]&&(h=new CKEDITOR.htmlParser.element(h),f.add(h)));a.dataValue=c},null,null,5);b.on("toHtml",function(a){a.data.filter.applyTo(a.data.dataValue,!0,a.data.dontFilter,a.data.enterMode)&&b.fire("dataFiltered")},null,null,6);b.on("toHtml",function(a){a.data.dataValue.filterChildren(f.dataFilter,!0)},null,null,10);b.on("toHtml",function(a){a=a.data;var b=a.dataValue,
c=new CKEDITOR.htmlParser.basicWriter;b.writeChildrenHtml(c);b=c.getHtml(!0);a.dataValue=r(b)},null,null,15);b.on("toDataFormat",function(a){var c=a.data.dataValue;a.data.enterMode!=CKEDITOR.ENTER_BR&&(c=c.replace(/^<br *\/?>/i,""));a.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(c,a.data.context,d(a.data.enterMode,b.config.autoParagraph))},null,null,5);b.on("toDataFormat",function(a){a.data.dataValue.filterChildren(f.htmlFilter,!0)},null,null,10);b.on("toDataFormat",function(a){a.data.filter.applyTo(a.data.dataValue,
!1,!0)},null,null,11);b.on("toDataFormat",function(a){var c=a.data.dataValue,d=f.writer;d.reset();c.writeChildrenHtml(d);c=d.getHtml(!0);c=x(c);c=D(c,b);a.data.dataValue=c},null,null,15)};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(a,b,c,d){var h=this.editor,f,e,n,p;b&&"object"==typeof b?(f=b.context,c=b.fixForBody,d=b.dontFilter,e=b.filter,n=b.enterMode,p=b.protectedWhitespaces):f=b;f||null===f||(f=h.editable().getName());return h.fire("toHtml",{dataValue:a,context:f,fixForBody:c,dontFilter:d,
filter:e||h.filter,enterMode:n||h.enterMode,protectedWhitespaces:p}).dataValue},toDataFormat:function(a,b){var c,d,h;b&&(c=b.context,d=b.filter,h=b.enterMode);c||null===c||(c=this.editor.editable().getName());return this.editor.fire("toDataFormat",{dataValue:a,filter:d||this.editor.filter,context:c,enterMode:h||this.editor.enterMode}).dataValue}};var w=/(?:&nbsp;|\xa0)$/,H="{cke_protected}",t=CKEDITOR.dtd,v="caption colgroup col thead tfoot tbody".split(" "),h=CKEDITOR.tools.extend({},t.$blockLimit,
t.$block),p={elements:{input:l,textarea:l}},n={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},y={elements:{embed:function(a){var b=a.parent;if(b&&"object"==b.name){var c=b.attributes.width,b=b.attributes.height;c&&(a.attributes.width=c);b&&(a.attributes.height=b)}},a:function(a){var b=a.attributes;if(!(a.children.length||b.name||b.id||a.attributes["data-cke-saved-name"]))return!1}}},z={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,
""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;for(var c=["name","href","src"],d,h=0;h<c.length;h++)d="data-cke-saved-"+c[h],d in b&&delete b[c[h]]}return a},table:function(a){a.children.slice(0).sort(function(a,b){var c,d;a.type==CKEDITOR.NODE_ELEMENT&&b.type==a.type&&(c=CKEDITOR.tools.indexOf(v,a.name),d=CKEDITOR.tools.indexOf(v,b.name));-1<c&&-1<d&&c!=d||(c=a.parent?a.getIndex():-1,d=b.parent?b.getIndex():-1);return c>d?
1:-1})},param:function(a){a.children=[];a.isEmpty=!0;return a},span:function(a){"Apple-style-span"==a.attributes["class"]&&delete a.name},html:function(a){delete a.attributes.contenteditable;delete a.attributes["class"]},body:function(a){delete a.attributes.spellcheck;delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=CKEDITOR.tools.trim(b.value));a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];!b&&k(a,b=new CKEDITOR.htmlParser.text);
b.value=a.attributes["data-cke-title"]||""},input:m,textarea:m},attributes:{"class":function(a){return CKEDITOR.tools.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(z.attributes.style=function(a){return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase()})});var J=/<(a|area|img|input|source)\b([^>]*)>/gi,E=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,C=/^(href|src|name)$/i,Y=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,
P=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,O=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,N=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,B=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,I=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi})();"use strict";
CKEDITOR.htmlParser.element=function(a,d){this.name=a;this.attributes=d||{};this.children=[];var b=a||"",c=b.match(/^cke:(.*)/);c&&(b=c[1]);b=!!(CKEDITOR.dtd.$nonBodyContent[b]||CKEDITOR.dtd.$block[b]||CKEDITOR.dtd.$listItem[b]||CKEDITOR.dtd.$tableContent[b]||CKEDITOR.dtd.$nonEditable[b]||"br"==b);this.isEmpty=!!CKEDITOR.dtd.$empty[a];this.isUnknown=!CKEDITOR.dtd[a];this._={isBlockLike:b,hasInlineStarted:this.isEmpty||!b}};
CKEDITOR.htmlParser.cssStyle=function(a){var d={};((a instanceof CKEDITOR.htmlParser.element?a.attributes.style:a)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,f){"font-family"==c&&(f=f.replace(/["']/g,""));d[c.toLowerCase()]=f});return{rules:d,populate:function(a){var c=this.toString();c&&(a instanceof CKEDITOR.dom.element?a.setAttribute("style",c):a instanceof CKEDITOR.htmlParser.element?a.attributes.style=c:a.style=c)},toString:function(){var a=[],c;
for(c in d)d[c]&&a.push(c,":",d[c],";");return a.join("")}}};
(function(){function a(a){return function(b){return b.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof a?b.name==a:b.name in a)}}var d=function(a,b){a=a[0];b=b[0];return a<b?-1:a>b?1:0},b=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:b.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(a,b){var d=this,k,l;b=d.getFilterContext(b);if(b.off)return!0;
if(!d.parent)a.onRoot(b,d);for(;;){k=d.name;if(!(l=a.onElementName(b,k)))return this.remove(),!1;d.name=l;if(!(d=a.onElement(b,d)))return this.remove(),!1;if(d!==this)return this.replaceWith(d),!1;if(d.name==k)break;if(d.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(d),!1;if(!d.name)return this.replaceWithChildren(),!1}k=d.attributes;var m,u;for(m in k){for(l=k[m];;)if(u=a.onAttributeName(b,m))if(u!=m)delete k[m],m=u;else break;else{delete k[m];break}u&&(!1===(l=a.onAttribute(b,d,u,l))?delete k[u]:
k[u]=l)}d.isEmpty||this.filterChildren(a,!1,b);return!0},filterChildren:b.filterChildren,writeHtml:function(a,b){b&&this.filter(b);var g=this.name,k=[],l=this.attributes,m,u;a.openTag(g,l);for(m in l)k.push([m,l[m]]);a.sortAttributes&&k.sort(d);m=0;for(u=k.length;m<u;m++)l=k[m],a.attribute(l[0],l[1]);a.openTagClose(g,this.isEmpty);this.writeChildrenHtml(a);this.isEmpty||a.closeTag(g)},writeChildrenHtml:b.writeChildrenHtml,replaceWithChildren:function(){for(var a=this.children,b=a.length;b;)a[--b].insertAfter(this);
this.remove()},forEach:b.forEach,getFirst:function(b){if(!b)return this.children.length?this.children[0]:null;"function"!=typeof b&&(b=a(b));for(var d=0,g=this.children.length;d<g;++d)if(b(this.children[d]))return this.children[d];return null},getHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml(a);return a.getHtml()},setHtml:function(a){a=this.children=CKEDITOR.htmlParser.fragment.fromHtml(a).children;for(var b=0,d=a.length;b<d;++b)a[b].parent=this},getOuterHtml:function(){var a=
new CKEDITOR.htmlParser.basicWriter;this.writeHtml(a);return a.getHtml()},split:function(a){for(var b=this.children.splice(a,this.children.length-a),d=this.clone(),k=0;k<b.length;++k)b[k].parent=d;d.children=b;b[0]&&(b[0].previous=null);0<a&&(this.children[a-1].next=null);this.parent.add(d,this.getIndex()+1);return d},addClass:function(a){if(!this.hasClass(a)){var b=this.attributes["class"]||"";this.attributes["class"]=b+(b?" ":"")+a}},removeClass:function(a){var b=this.attributes["class"];b&&((b=
CKEDITOR.tools.trim(b.replace(new RegExp("(?:\\s+|^)"+a+"(?:\\s+|$)")," ")))?this.attributes["class"]=b:delete this.attributes["class"])},hasClass:function(a){var b=this.attributes["class"];return b?(new RegExp("(?:^|\\s)"+a+"(?\x3d\\s|$)")).test(b):!1},getFilterContext:function(a){var b=[];a||(a={off:!1,nonEditable:!1,nestedEditable:!1});a.off||"off"!=this.attributes["data-cke-processor"]||b.push("off",!0);a.nonEditable||"false"!=this.attributes.contenteditable?a.nonEditable&&!a.nestedEditable&&
"true"==this.attributes.contenteditable&&b.push("nestedEditable",!0):b.push("nonEditable",!0);if(b.length){a=CKEDITOR.tools.copy(a);for(var d=0;d<b.length;d+=2)a[b[d]]=b[d+1]}return a}},!0)})();
(function(){var a={},d=/{([^}]+)}/g,b=/([\\'])/g,c=/\n/g,f=/\r/g;CKEDITOR.template=function(g){if(a[g])this.output=a[g];else{var k=g.replace(b,"\\$1").replace(c,"\\n").replace(f,"\\r").replace(d,function(a,b){return"',data['"+b+"']\x3d\x3dundefined?'{"+b+"}':data['"+b+"'],'"});this.output=a[g]=Function("data","buffer","return buffer?buffer.push('"+k+"'):['"+k+"'].join('');")}}})();delete CKEDITOR.loadFullCore;CKEDITOR.instances={};CKEDITOR.document=new CKEDITOR.dom.document(document);
CKEDITOR.add=function(a){CKEDITOR.instances[a.name]=a;a.on("focus",function(){CKEDITOR.currentInstance!=a&&(CKEDITOR.currentInstance=a,CKEDITOR.fire("currentInstance"))});a.on("blur",function(){CKEDITOR.currentInstance==a&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))});CKEDITOR.fire("instance",null,a)};CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name]};
(function(){var a={};CKEDITOR.addTemplate=function(d,b){var c=a[d];if(c)return c;c={name:d,source:b};CKEDITOR.fire("template",c);return a[d]=new CKEDITOR.template(c.source)};CKEDITOR.getTemplate=function(d){return a[d]}})();(function(){var a=[];CKEDITOR.addCss=function(d){a.push(d)};CKEDITOR.getCss=function(){return a.join("\n")}})();CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")});CKEDITOR.TRISTATE_ON=1;CKEDITOR.TRISTATE_OFF=2;
CKEDITOR.TRISTATE_DISABLED=0;
(function(){CKEDITOR.inline=function(a,d){if(!CKEDITOR.env.isCompatible)return null;a=CKEDITOR.dom.element.get(a);if(a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var b=new CKEDITOR.editor(d,a,CKEDITOR.ELEMENT_MODE_INLINE),c=a.is("textarea")?a:null;c?(b.setData(c.getValue(),null,!0),a=CKEDITOR.dom.element.createFromHtml('\x3cdiv contenteditable\x3d"'+!!b.readOnly+'" class\x3d"cke_textarea_inline"\x3e'+c.getValue()+"\x3c/div\x3e",CKEDITOR.document),
a.insertAfter(c),c.hide(),c.$.form&&b._attachToForm()):b.setData(a.getHtml(),null,!0);b.on("loaded",function(){b.fire("uiReady");b.editable(a);b.container=a;b.ui.contentsElement=a;b.setData(b.getData(1));b.resetDirty();b.fire("contentDom");b.mode="wysiwyg";b.fire("mode");b.status="ready";b.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,b)},null,null,1E4);b.on("destroy",function(){c&&(b.container.clearCustomData(),b.container.remove(),c.show());b.element.clearCustomData();delete b.element});
return b};CKEDITOR.inlineAll=function(){var a,d,b;for(b in CKEDITOR.dtd.$editable)for(var c=CKEDITOR.document.getElementsByTag(b),f=0,g=c.count();f<g;f++)a=c.getItem(f),"true"==a.getAttribute("contenteditable")&&(d={element:a,config:{}},!1!==CKEDITOR.fire("inline",d)&&CKEDITOR.inline(a,d.config))};CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})})();CKEDITOR.replaceClass="ckeditor";
(function(){function a(a,f,g,k){if(!CKEDITOR.env.isCompatible)return null;a=CKEDITOR.dom.element.get(a);if(a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var l=new CKEDITOR.editor(f,a,k);k==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.setStyle("visibility","hidden"),l._.required=a.hasAttribute("required"),a.removeAttribute("required"));g&&l.setData(g,null,!0);l.on("loaded",function(){b(l);k==CKEDITOR.ELEMENT_MODE_REPLACE&&l.config.autoUpdateElement&&
a.$.form&&l._attachToForm();l.setMode(l.config.startupMode,function(){l.resetDirty();l.status="ready";l.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,l)})});l.on("destroy",d);return l}function d(){var a=this.container,b=this.element;a&&(a.clearCustomData(),a.remove());b&&(b.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(b.show(),this._.required&&b.setAttribute("required","required")),delete this.element)}function b(a){var b=a.name,d=a.element,k=a.elementMode,l=
a.fire("uiSpace",{space:"top",html:""}).html,m=a.fire("uiSpace",{space:"bottom",html:""}).html,u=new CKEDITOR.template('\x3c{outerEl} id\x3d"cke_{name}" class\x3d"{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"application"'+(a.title?' aria-labelledby\x3d"cke_{name}_arialbl"':"")+"\x3e"+(a.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':"")+'\x3c{outerEl} class\x3d"cke_inner cke_reset" role\x3d"presentation"\x3e{topHtml}\x3c{outerEl} id\x3d"{contentId}" class\x3d"cke_contents cke_reset" role\x3d"presentation"\x3e\x3c/{outerEl}\x3e{bottomHtml}\x3c/{outerEl}\x3e\x3c/{outerEl}\x3e'),
b=CKEDITOR.dom.element.createFromHtml(u.output({id:a.id,name:b,langDir:a.lang.dir,langCode:a.langCode,voiceLabel:a.title,topHtml:l?'\x3cspan id\x3d"'+a.ui.spaceId("top")+'" class\x3d"cke_top cke_reset_all" role\x3d"presentation" style\x3d"height:auto"\x3e'+l+"\x3c/span\x3e":"",contentId:a.ui.spaceId("contents"),bottomHtml:m?'\x3cspan id\x3d"'+a.ui.spaceId("bottom")+'" class\x3d"cke_bottom cke_reset_all" role\x3d"presentation"\x3e'+m+"\x3c/span\x3e":"",outerEl:CKEDITOR.env.ie?"span":"div"}));k==CKEDITOR.ELEMENT_MODE_REPLACE?
(d.hide(),b.insertAfter(d)):d.append(b);a.container=b;a.ui.contentsElement=a.ui.space("contents");l&&a.ui.space("top").unselectable();m&&a.ui.space("bottom").unselectable();d=a.config.width;k=a.config.height;d&&b.setStyle("width",CKEDITOR.tools.cssLength(d));k&&a.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(k));b.disableContextMenu();CKEDITOR.env.webkit&&b.on("focus",function(){a.focus()});a.fireOnce("uiReady")}CKEDITOR.replace=function(b,d){return a(b,d,null,CKEDITOR.ELEMENT_MODE_REPLACE)};
CKEDITOR.appendTo=function(b,d,g){return a(b,d,g,CKEDITOR.ELEMENT_MODE_APPENDTO)};CKEDITOR.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++){var d=null,k=a[b];if(k.name||k.id){if("string"==typeof arguments[0]){if(!(new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)")).test(k.className))continue}else if("function"==typeof arguments[0]&&(d={},!1===arguments[0](k,d)))continue;this.replace(k,d)}}};CKEDITOR.editor.prototype.addMode=function(a,b){(this._.modes||(this._.modes=
{}))[a]=b};CKEDITOR.editor.prototype.setMode=function(a,b){var d=this,k=this._.modes;if(a!=d.mode&&k&&k[a]){d.fire("beforeSetMode",a);if(d.mode){var l=d.checkDirty(),k=d._.previousModeData,m,u=0;d.fire("beforeModeUnload");d.editable(0);d._.previousMode=d.mode;d._.previousModeData=m=d.getData(1);"source"==d.mode&&k==m&&(d.fire("lockSnapshot",{forceUpdate:!0}),u=1);d.ui.space("contents").setHtml("");d.mode=""}else d._.previousModeData=d.getData(1);this._.modes[a](function(){d.mode=a;void 0!==l&&!l&&
d.resetDirty();u?d.fire("unlockSnapshot"):"wysiwyg"==a&&d.fire("saveSnapshot");setTimeout(function(){d.fire("mode");b&&b.call(d)},0)})}};CKEDITOR.editor.prototype.resize=function(a,b,d,k){var l=this.container,m=this.ui.space("contents"),u=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;k=k?this.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}):l;k.setSize("width",a,!0);u&&(u.style.width="1%");var e=(k.$.offsetHeight||0)-(m.$.clientHeight||
0),l=Math.max(b-(d?0:e),0);b=d?b+e:b;m.setStyle("height",l+"px");u&&(u.style.width="100%");this.fire("resize",{outerHeight:b,contentsHeight:l,outerWidth:a||k.getSize("width")})};CKEDITOR.editor.prototype.getResizable=function(a){return a?this.ui.space("contents"):this.container};CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})})();CKEDITOR.config.startupMode="wysiwyg";
(function(){function a(a){var b=a.editor,e=a.data.path,n=e.blockLimit,f=a.data.selection,g=f.getRanges()[0],l;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)if(f=d(f,e))f.appendBogus(),l=CKEDITOR.env.ie;k(b,e.block,n)&&g.collapsed&&!g.getCommonAncestor().isReadOnly()&&(e=g.clone(),e.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),n=new CKEDITOR.dom.walker(e),n.guard=function(a){return!c(a)||a.type==CKEDITOR.NODE_COMMENT||a.isReadOnly()},!n.checkForward()||e.checkStartOfBlock()&&e.checkEndOfBlock())&&
(b=g.fixBlock(!0,b.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(b=b.getFirst(c))&&b.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(b.getText()).match(/^(?:&nbsp;|\xa0)$/)&&b.remove(),l=1,a.cancel());l&&g.select()}function d(a,b){if(a.isFake)return 0;var d=b.block||b.blockLimit,e=d&&d.getLast(c);if(!(!d||!d.isBlockBoundary()||e&&e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary()||d.is("pre")||d.getBogus()))return d}function b(a){var b=a.data.getTarget();b.is("input")&&
(b=b.getAttribute("type"),"submit"!=b&&"reset"!=b||a.data.preventDefault())}function c(a){return e(a)&&A(a)}function f(a,b){return function(c){var d=c.data.$.toElement||c.data.$.fromElement||c.data.$.relatedTarget;(d=d&&d.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(d):null)&&(b.equals(d)||b.contains(d))||a.call(this,c)}}function g(a){function b(a){return function(b,h){h&&b.type==CKEDITOR.NODE_ELEMENT&&b.is(f)&&(d=b);if(!(h||!c(b)||a&&x(b)))return!1}}var d,e=a.getRanges()[0];a=a.root;
var f={table:1,ul:1,ol:1,dl:1};if(e.startPath().contains(f)){var g=e.clone();g.collapse(1);g.setStartAt(a,CKEDITOR.POSITION_AFTER_START);a=new CKEDITOR.dom.walker(g);a.guard=b();a.checkBackward();if(d)return g=e.clone(),g.collapse(),g.setEndAt(d,CKEDITOR.POSITION_AFTER_END),a=new CKEDITOR.dom.walker(g),a.guard=b(!0),d=!1,a.checkForward(),d}return null}function k(a,b,c){return!1!==a.config.autoParagraph&&a.activeEnterMode!=CKEDITOR.ENTER_BR&&(a.editable().equals(c)&&!b||b&&"true"==b.getAttribute("contenteditable"))}
function l(a){return a.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==a.config.autoParagraph?a.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1}function m(a){var b=a.editor;b.getSelection().scrollIntoView();setTimeout(function(){b.fire("saveSnapshot")},0)}function u(a,b,c){var d=a.getCommonAncestor(b);for(b=a=c?b:a;(a=a.getParent())&&!d.equals(a)&&1==a.getChildCount();)b=a;b.remove()}var e,A,r,x,D,q,w,H,t;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(a,b){this.base(b.$||
b);this.editor=a;this.status="unloaded";this.hasFocus=!1;this.setup()},proto:{focus:function(){var a;if(CKEDITOR.env.webkit&&!this.hasFocus&&(a=this.editor._.previousActive||this.getDocument().getActive(),this.contains(a))){a.focus();return}CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document)?
this.$.focus():this.$.setActive()}catch(b){if(!CKEDITOR.env.ie)throw b;}CKEDITOR.env.safari&&!this.isInline()&&(a=CKEDITOR.document.getActive(),a.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(a,b){var c=Array.prototype.slice.call(arguments,0);CKEDITOR.env.ie&&/^focus|blur$/.exec(a)&&(a="focus"==a?"focusin":"focusout",b=f(b,this),c[0]=a,c[1]=b);return CKEDITOR.dom.element.prototype.on.apply(this,c)},attachListener:function(a){!this._.listeners&&(this._.listeners=[]);var b=
Array.prototype.slice.call(arguments,1),b=a.on.apply(a,b);this._.listeners.push(b);return b},clearListeners:function(){var a=this._.listeners;try{for(;a.length;)a.pop().removeListener()}catch(b){}},restoreAttrs:function(){var a=this._.attrChanges,b,c;for(c in a)a.hasOwnProperty(c)&&(b=a[c],null!==b?this.setAttribute(c,b):this.removeAttribute(c))},attachClass:function(a){var b=this.getCustomData("classes");this.hasClass(a)||(!b&&(b=[]),b.push(a),this.setCustomData("classes",b),this.addClass(a))},changeAttr:function(a,
b){var c=this.getAttribute(a);b!==c&&(!this._.attrChanges&&(this._.attrChanges={}),a in this._.attrChanges||(this._.attrChanges[a]=c),this.setAttribute(a,b))},insertText:function(a){this.editor.focus();this.insertHtml(this.transformPlainTextToHtml(a),"text")},transformPlainTextToHtml:function(a){var b=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(a,b)},insertHtml:function(a,b,c){var d=
this.editor;d.focus();d.fire("saveSnapshot");c||(c=d.getSelection().getRanges()[0]);q(this,b||"html",a,c);c.select();m(this);this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(a,b,c){q(this,c||"html",a,b);this.editor.fire("afterInsertHtml",{intoRange:b})},insertElement:function(a,b){var d=this.editor;d.focus();d.fire("saveSnapshot");var e=d.activeEnterMode,d=d.getSelection(),f=a.getName(),f=CKEDITOR.dtd.$block[f];b||(b=d.getRanges()[0]);this.insertElementIntoRange(a,b)&&(b.moveToPosition(a,
CKEDITOR.POSITION_AFTER_END),f&&((f=a.getNext(function(a){return c(a)&&!x(a)}))&&f.type==CKEDITOR.NODE_ELEMENT&&f.is(CKEDITOR.dtd.$block)?f.getDtd()["#"]?b.moveToElementEditStart(f):b.moveToElementEditEnd(a):f||e==CKEDITOR.ENTER_BR||(f=b.fixBlock(!0,e==CKEDITOR.ENTER_DIV?"div":"p"),b.moveToElementEditStart(f))));d.selectRanges([b]);m(this)},insertElementIntoSelection:function(a){this.insertElement(a)},insertElementIntoRange:function(a,b){var c=this.editor,d=c.config.enterMode,e=a.getName(),f=CKEDITOR.dtd.$block[e];
if(b.checkReadOnly())return!1;b.deleteContents(1);b.startContainer.type==CKEDITOR.NODE_ELEMENT&&b.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&w(b);var g,k;if(f)for(;(g=b.getCommonAncestor(0,1))&&(k=CKEDITOR.dtd[g.getName()])&&(!k||!k[e]);)g.getName()in CKEDITOR.dtd.span?b.splitElement(g):b.checkStartOfBlock()&&b.checkEndOfBlock()?(b.setStartBefore(g),b.collapse(!0),g.remove()):b.splitBlock(d==CKEDITOR.ENTER_DIV?"div":"p",c.editable());b.insertNode(a);return!0},setData:function(a,b){b||
(a=this.editor.dataProcessor.toHtml(a));this.setHtml(a);this.fixInitialSelection();"unloaded"==this.status&&(this.status="ready");this.editor.fire("dataReady")},getData:function(a){var b=this.getHtml();a||(b=this.editor.dataProcessor.toDataFormat(b));return b},setReadOnly:function(a){this.setAttribute("contenteditable",!a)},detach:function(){this.removeClass("cke_editable");this.status="detached";var a=this.editor;this._.detach();delete a.document;delete a.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},
fixInitialSelection:function(){function a(){var b=c.getDocument().$,d=b.getSelection(),h;a:if(d.anchorNode&&d.anchorNode==c.$)h=!0;else{if(CKEDITOR.env.webkit&&(h=c.getDocument().getActive())&&h.equals(c)&&!d.anchorNode){h=!0;break a}h=void 0}h&&(h=new CKEDITOR.dom.range(c),h.moveToElementEditStart(c),b=b.createRange(),b.setStart(h.startContainer.$,h.startOffset),b.collapse(!0),d.removeAllRanges(),d.addRange(b))}function b(){var a=c.getDocument().$,d=a.selection,h=c.getDocument().getActive();"None"==
d.type&&h.equals(c)&&(d=new CKEDITOR.dom.range(c),a=a.body.createTextRange(),d.moveToElementEditStart(c),d=d.startContainer,d.type!=CKEDITOR.NODE_ELEMENT&&(d=d.getParent()),a.moveToElementText(d.$),a.collapse(!0),a.select())}var c=this;if(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks))this.hasFocus&&(this.focus(),b());else if(this.hasFocus)this.focus(),a();else this.once("focus",function(){a()},null,null,-999)},getHtmlFromRange:function(a){if(a.collapsed)return new CKEDITOR.dom.documentFragment(a.document);
a={doc:this.getDocument(),range:a.clone()};H.eol.detect(a,this);H.bogus.exclude(a);H.cell.shrink(a);a.fragment=a.range.cloneContents();H.tree.rebuild(a,this);H.eol.fix(a,this);return new CKEDITOR.dom.documentFragment(a.fragment.$)},extractHtmlFromRange:function(a,b){var c=t,d={range:a,doc:a.document},e=this.getHtmlFromRange(a);if(a.collapsed)return a.optimize(),e;a.enlarge(CKEDITOR.ENLARGE_INLINE,1);c.table.detectPurge(d);d.bookmark=a.createBookmark();delete d.range;var f=this.editor.createRange();
f.moveToPosition(d.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START);d.targetBookmark=f.createBookmark();c.list.detectMerge(d,this);c.table.detectRanges(d,this);c.block.detectMerge(d,this);d.tableContentsRanges?(c.table.deleteRanges(d),a.moveToBookmark(d.bookmark),d.range=a):(a.moveToBookmark(d.bookmark),d.range=a,a.extractContents(c.detectExtractMerge(d)));a.moveToBookmark(d.targetBookmark);a.optimize();c.fixUneditableRangePosition(a);c.list.merge(d,this);c.table.purge(d,this);c.block.merge(d,this);
if(b){c=a.startPath();if(d=a.checkStartOfBlock()&&a.checkEndOfBlock()&&c.block&&!a.root.equals(c.block)){a:{var d=c.block.getElementsByTag("span"),f=0,g;if(d)for(;g=d.getItem(f++);)if(!A(g)){d=!0;break a}d=!1}d=!d}d&&(a.moveToPosition(c.block,CKEDITOR.POSITION_BEFORE_START),c.block.remove())}else c.autoParagraph(this.editor,a),r(a.startContainer)&&a.startContainer.appendBogus();a.startContainer.mergeSiblings();return e},setup:function(){var a=this.editor;this.attachListener(a,"beforeGetData",function(){var b=
this.getData();this.is("textarea")||!1!==a.config.ignoreEmptyParagraph&&(b=b.replace(D,function(a,b){return b}));a.setData(b,null,1)},this);this.attachListener(a,"getSnapshot",function(a){a.data=this.getData(1)},this);this.attachListener(a,"afterSetData",function(){this.setData(a.getData(1))},this);this.attachListener(a,"loadSnapshot",function(a){this.setData(a.data,1)},this);this.attachListener(a,"beforeFocus",function(){var b=a.getSelection();(b=b&&b.getNative())&&"Control"==b.type||this.focus()},
this);this.attachListener(a,"insertHtml",function(a){this.insertHtml(a.data.dataValue,a.data.mode,a.data.range)},this);this.attachListener(a,"insertElement",function(a){this.insertElement(a.data)},this);this.attachListener(a,"insertText",function(a){this.insertText(a.data)},this);this.setReadOnly(a.readOnly);this.attachClass("cke_editable");a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):a.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&a.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||
this.attachClass("cke_editable_themed");this.attachClass("cke_contents_"+a.config.contentsLangDirection);a.keystrokeHandler.blockedKeystrokes[8]=+a.readOnly;a.keystrokeHandler.attach(this);this.on("blur",function(){this.hasFocus=!1},null,null,-1);this.on("focus",function(){this.hasFocus=!0},null,null,-1);if(CKEDITOR.env.webkit)this.on("scroll",function(){a._.previousScrollTop=a.editable().$.scrollTop},null,null,-1);if(CKEDITOR.env.edge&&14<CKEDITOR.env.version){var d=function(){var b=a.editable();
null!=a._.previousScrollTop&&b.getDocument().equals(CKEDITOR.document)&&(b.$.scrollTop=a._.previousScrollTop,a._.previousScrollTop=null,this.removeListener("scroll",d))};this.on("scroll",d)}a.focusManager.add(this);this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,a.once("contentDom",function(){a.focusManager.focus(this)},this));this.isInline()&&this.changeAttr("tabindex",a.tabIndex);if(!this.is("textarea")){a.document=this.getDocument();a.window=this.getWindow();var f=a.document;this.changeAttr("spellcheck",
!a.config.disableNativeSpellChecker);var n=a.config.contentsLangDirection;this.getDirection(1)!=n&&this.changeAttr("dir",n);var k=CKEDITOR.getCss();if(k){var n=f.getHead(),z=n.getCustomData("stylesheet");z?k!=z.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?z.$.styleSheet.cssText=k:z.setText(k)):(k=f.appendStyleText(k),k=new CKEDITOR.dom.element(k.ownerNode||k.owningElement),n.setCustomData("stylesheet",k),k.data("cke-temp",1))}n=f.getCustomData("stylesheet_ref")||0;f.setCustomData("stylesheet_ref",
n+1);this.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling);this.attachListener(this,"click",function(a){a=a.data;var b=(new CKEDITOR.dom.elementPath(a.getTarget(),this)).contains("a");b&&2!=a.$.button&&b.isReadOnly()&&a.preventDefault()});var l={8:1,46:1};this.attachListener(a,"key",function(b){if(a.readOnly)return!0;var c=b.data.domEvent.getKey(),d;if(c in l){b=a.getSelection();var h,f=b.getRanges()[0],n=f.startPath(),p,k,y,c=8==c;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(h=
b.getSelectedElement())||(h=g(b))?(a.fire("saveSnapshot"),f.moveToPosition(h,CKEDITOR.POSITION_BEFORE_START),h.remove(),f.select(),a.fire("saveSnapshot"),d=1):f.collapsed&&((p=n.block)&&(y=p[c?"getPrevious":"getNext"](e))&&y.type==CKEDITOR.NODE_ELEMENT&&y.is("table")&&f[c?"checkStartOfBlock":"checkEndOfBlock"]()?(a.fire("saveSnapshot"),f[c?"checkEndOfBlock":"checkStartOfBlock"]()&&p.remove(),f["moveToElementEdit"+(c?"End":"Start")](y),f.select(),a.fire("saveSnapshot"),d=1):n.blockLimit&&n.blockLimit.is("td")&&
(k=n.blockLimit.getAscendant("table"))&&f.checkBoundaryOfElement(k,c?CKEDITOR.START:CKEDITOR.END)&&(y=k[c?"getPrevious":"getNext"](e))?(a.fire("saveSnapshot"),f["moveToElementEdit"+(c?"End":"Start")](y),f.checkStartOfBlock()&&f.checkEndOfBlock()?y.remove():f.select(),a.fire("saveSnapshot"),d=1):(k=n.contains(["td","th","caption"]))&&f.checkBoundaryOfElement(k,c?CKEDITOR.START:CKEDITOR.END)&&(d=1))}return!d});a.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",
function(b){b.data.getKeystroke()in l&&!this.getFirst(c)&&(this.appendBogus(),b=a.createRange(),b.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),b.select())});this.attachListener(this,"dblclick",function(b){if(a.readOnly)return!1;b={element:b.data.getTarget()};a.fire("doubleclick",b)});CKEDITOR.env.ie&&this.attachListener(this,"click",b);CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(b){var c=b.data.getTarget();c.is("img","hr","input","textarea","select")&&
!c.isReadOnly()&&(a.getSelection().selectElement(c),c.is("input","textarea","select")&&b.data.preventDefault())});CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(b){(b=b.data.getTarget())&&b.is("img")&&a.getSelection().selectElement(b)});CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(b){if(2==b.data.$.button&&(b=b.data.getTarget(),!b.getOuterHtml().replace(D,""))){var c=a.createRange();c.moveToElementEditStart(b);c.select(!0)}});CKEDITOR.env.webkit&&(this.attachListener(this,
"click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()}),this.attachListener(this,"mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()}));CKEDITOR.env.webkit&&this.attachListener(a,"key",function(b){if(a.readOnly)return!0;b=b.data.domEvent.getKey();if(b in l){var c=8==b,d=a.getSelection().getRanges()[0];b=d.startPath();if(d.collapsed)a:{var h=b.block;if(h&&d[c?"checkStartOfBlock":"checkEndOfBlock"]()&&d.moveToClosestEditablePosition(h,
!c)&&d.collapsed){if(d.startContainer.type==CKEDITOR.NODE_ELEMENT){var f=d.startContainer.getChild(d.startOffset-(c?1:0));if(f&&f.type==CKEDITOR.NODE_ELEMENT&&f.is("hr")){a.fire("saveSnapshot");f.remove();b=!0;break a}}d=d.startPath().block;if(!d||d&&d.contains(h))b=void 0;else{a.fire("saveSnapshot");var e;(e=(c?d:h).getBogus())&&e.remove();e=a.getSelection();f=e.createBookmarks();(c?h:d).moveChildren(c?d:h,!1);b.lastElement.mergeSiblings();u(h,d,!c);e.selectBookmarks(f);b=!0}}else b=!1}else c=d,
e=b.block,d=c.endPath().block,e&&d&&!e.equals(d)?(a.fire("saveSnapshot"),(h=e.getBogus())&&h.remove(),c.enlarge(CKEDITOR.ENLARGE_INLINE),c.deleteContents(),d.getParent()&&(d.moveChildren(e,!1),b.lastElement.mergeSiblings(),u(e,d,!0)),c=a.getSelection().getRanges()[0],c.collapse(1),c.optimize(),""===c.startContainer.getHtml()&&c.startContainer.appendBogus(),c.select(),b=!0):b=!1;if(!b)return;a.getSelection().scrollIntoView();a.fire("saveSnapshot");return!1}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),
0,1);this.clearListeners();this.restoreAttrs();var a;if(a=this.removeCustomData("classes"))for(;a.length;)this.removeClass(a.pop());if(!this.is("textarea")){a=this.getDocument();var b=a.getHead();if(b.getCustomData("stylesheet")){var c=a.getCustomData("stylesheet_ref");--c?a.setCustomData("stylesheet_ref",c):(a.removeCustomData("stylesheet_ref"),b.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload");delete this.editor}}});CKEDITOR.editor.prototype.editable=function(a){var b=
this._.editable;if(b&&a)return 0;arguments.length&&(b=this._.editable=a?a instanceof CKEDITOR.editable?a:new CKEDITOR.editable(this,a):(b&&b.detach(),null));return b};CKEDITOR.on("instanceLoaded",function(b){var c=b.editor;c.on("insertElement",function(a){a=a.data;a.type==CKEDITOR.NODE_ELEMENT&&(a.is("input")||a.is("textarea"))&&("false"!=a.getAttribute("contentEditable")&&a.data("cke-editable",a.hasAttribute("contenteditable")?"true":"1"),a.setAttribute("contentEditable",!1))});c.on("selectionChange",
function(b){if(!c.readOnly){var d=c.getSelection();d&&!d.isLocked&&(d=c.checkDirty(),c.fire("lockSnapshot"),a(b),c.fire("unlockSnapshot"),!d&&c.resetDirty())}})});CKEDITOR.on("instanceCreated",function(a){var b=a.editor;b.on("mode",function(){var a=b.editable();if(a&&a.isInline()){var c=b.title;a.changeAttr("role","textbox");a.changeAttr("aria-label",c);c&&a.changeAttr("title",c);var d=b.fire("ariaEditorHelpLabel",{}).label;if(d&&(c=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":
"contents"))){var f=CKEDITOR.tools.getNextId(),d=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+f+'" class\x3d"cke_voice_label"\x3e'+d+"\x3c/span\x3e");c.append(d);a.changeAttr("aria-describedby",f)}}})});CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");e=CKEDITOR.dom.walker.whitespaces(!0);A=CKEDITOR.dom.walker.bookmark(!1,!0);r=CKEDITOR.dom.walker.empty();x=CKEDITOR.dom.walker.bogus();D=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi;
q=function(){function a(b){return b.type==CKEDITOR.NODE_ELEMENT}function b(c,d){var f,e,n,p,g=[],k=d.range.startContainer;f=d.range.startPath();for(var k=E[k.getName()],y=0,l=c.getChildren(),z=l.count(),J=-1,m=-1,q=0,u=f.contains(E.$list);y<z;++y)f=l.getItem(y),a(f)?(n=f.getName(),u&&n in CKEDITOR.dtd.$list?g=g.concat(b(f,d)):(p=!!k[n],"br"!=n||!f.data("cke-eol")||y&&y!=z-1||(q=(e=y?g[y-1].node:l.getItem(y+1))&&(!a(e)||!e.is("br")),e=e&&a(e)&&E.$block[e.getName()]),-1!=J||p||(J=y),p||(m=y),g.push({isElement:1,
isLineBreak:q,isBlock:f.isBlockBoundary(),hasBlockSibling:e,node:f,name:n,allowed:p}),e=q=0)):g.push({isElement:0,node:f,allowed:1});-1<J&&(g[J].firstNotAllowed=1);-1<m&&(g[m].lastNotAllowed=1);return g}function d(b,c){var f=[],e=b.getChildren(),h=e.count(),n,g=0,k=E[c],y=!b.is(E.$inline)||b.is("br");for(y&&f.push(" ");g<h;g++)n=e.getItem(g),a(n)&&!n.is(k)?f=f.concat(d(n,c)):f.push(n);y&&f.push(" ");return f}function f(b){return a(b.startContainer)&&b.startContainer.getChild(b.startOffset-1)}function e(b){return b&&
a(b)&&(b.is(E.$removeEmpty)||b.is("a")&&!b.isBlockBoundary())}function g(b,c,d,f){var e=b.clone(),h,n;e.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);(h=(new CKEDITOR.dom.walker(e)).next())&&a(h)&&m[h.getName()]&&(n=h.getPrevious())&&a(n)&&!n.getParent().equals(b.startContainer)&&d.contains(n)&&f.contains(h)&&h.isIdentical(n)&&(h.moveChildren(n),h.remove(),g(b,c,d,f))}function J(b,c){function d(b,c){if(c.isBlock&&c.isElement&&!c.node.is("br")&&a(b)&&b.is("br"))return b.remove(),1}var f=c.endContainer.getChild(c.endOffset),
e=c.endContainer.getChild(c.endOffset-1);f&&d(f,b[b.length-1]);e&&d(e,b[0])&&(c.setEnd(c.endContainer,c.endOffset-1),c.collapse())}var E=CKEDITOR.dtd,m={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},q={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},u=CKEDITOR.tools.extend({},E.$inline);delete u.br;return function(m,C,B,I){var F=m.editor,K=!1;"unfiltered_html"==C&&(C="html",K=!0);if(!I.checkReadOnly()){var G=(new CKEDITOR.dom.elementPath(I.startContainer,I.root)).blockLimit||
I.root;m={type:C,dontFilter:K,editable:m,editor:F,range:I,blockLimit:G,mergeCandidates:[],zombies:[]};C=m.range;I=m.mergeCandidates;var L,r;"text"==m.type&&C.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(L=CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",C.document),C.insertNode(L),C.setStartAfter(L));K=new CKEDITOR.dom.elementPath(C.startContainer);m.endPath=G=new CKEDITOR.dom.elementPath(C.endContainer);if(!C.collapsed){var F=G.block||G.blockLimit,w=C.getCommonAncestor();F&&!F.equals(w)&&
!F.contains(w)&&C.checkEndOfBlock()&&m.zombies.push(F);C.deleteContents()}for(;(r=f(C))&&a(r)&&r.isBlockBoundary()&&K.contains(r);)C.moveToPosition(r,CKEDITOR.POSITION_BEFORE_END);g(C,m.blockLimit,K,G);L&&(C.setEndBefore(L),C.collapse(),L.remove());L=C.startPath();if(F=L.contains(e,!1,1))C.splitElement(F),m.inlineStylesRoot=F,m.inlineStylesPeak=L.lastElement;L=C.createBookmark();(F=L.startNode.getPrevious(c))&&a(F)&&e(F)&&I.push(F);(F=L.startNode.getNext(c))&&a(F)&&e(F)&&I.push(F);for(F=L.startNode;(F=
F.getParent())&&e(F);)I.push(F);C.moveToBookmark(L);if(L=B){L=m.range;if("text"==m.type&&m.inlineStylesRoot){r=m.inlineStylesPeak;C=r.getDocument().createText("{cke-peak}");for(I=m.inlineStylesRoot.getParent();!r.equals(I);)C=C.appendTo(r.clone()),r=r.getParent();B=C.getOuterHtml().split("{cke-peak}").join(B)}r=m.blockLimit.getName();if(/^\s+|\s+$/.test(B)&&"span"in CKEDITOR.dtd[r]){var A='\x3cspan data-cke-marker\x3d"1"\x3e\x26nbsp;\x3c/span\x3e';B=A+B+A}B=m.editor.dataProcessor.toHtml(B,{context:null,
fixForBody:!1,protectedWhitespaces:!!A,dontFilter:m.dontFilter,filter:m.editor.activeFilter,enterMode:m.editor.activeEnterMode});r=L.document.createElement("body");r.setHtml(B);A&&(r.getFirst().remove(),r.getLast().remove());if((A=L.startPath().block)&&(1!=A.getChildCount()||!A.getBogus()))a:{var x;if(1==r.getChildCount()&&a(x=r.getFirst())&&x.is(q)&&!x.hasAttribute("contenteditable")){A=x.getElementsByTag("*");L=0;for(I=A.count();L<I;L++)if(C=A.getItem(L),!C.is(u))break a;x.moveChildren(x.getParent(1));
x.remove()}}m.dataWrapper=r;L=B}if(L){x=m.range;L=x.document;var t;r=m.blockLimit;I=0;var D,A=[],M,H;B=F=0;var R,W;C=x.startContainer;var K=m.endPath.elements[0],X,G=K.getPosition(C),w=!!K.getCommonAncestor(C)&&G!=CKEDITOR.POSITION_IDENTICAL&&!(G&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);C=b(m.dataWrapper,m);for(J(C,x);I<C.length;I++){G=C[I];if(t=G.isLineBreak){t=x;R=r;var T=void 0,aa=void 0;G.hasBlockSibling?t=1:(T=t.startContainer.getAscendant(E.$block,1))&&T.is({div:1,p:1})?(aa=
T.getPosition(R),aa==CKEDITOR.POSITION_IDENTICAL||aa==CKEDITOR.POSITION_CONTAINS?t=0:(R=t.splitElement(T),t.moveToPosition(R,CKEDITOR.POSITION_AFTER_START),t=1)):t=0}if(t)B=0<I;else{t=x.startPath();!G.isBlock&&k(m.editor,t.block,t.blockLimit)&&(H=l(m.editor))&&(H=L.createElement(H),H.appendBogus(),x.insertNode(H),CKEDITOR.env.needsBrFiller&&(D=H.getBogus())&&D.remove(),x.moveToPosition(H,CKEDITOR.POSITION_BEFORE_END));if((t=x.startPath().block)&&!t.equals(M)){if(D=t.getBogus())D.remove(),A.push(t);
M=t}G.firstNotAllowed&&(F=1);if(F&&G.isElement){t=x.startContainer;for(R=null;t&&!E[t.getName()][G.name];){if(t.equals(r)){t=null;break}R=t;t=t.getParent()}if(t)R&&(W=x.splitElement(R),m.zombies.push(W),m.zombies.push(R));else{R=r.getName();X=!I;t=I==C.length-1;R=d(G.node,R);for(var T=[],aa=R.length,ba=0,da=void 0,ea=0,ga=-1;ba<aa;ba++)da=R[ba]," "==da?(ea||X&&!ba||(T.push(new CKEDITOR.dom.text(" ")),ga=T.length),ea=1):(T.push(da),ea=0);t&&ga==T.length&&T.pop();X=T}}if(X){for(;t=X.pop();)x.insertNode(t);
X=0}else x.insertNode(G.node);G.lastNotAllowed&&I<C.length-1&&((W=w?K:W)&&x.setEndAt(W,CKEDITOR.POSITION_AFTER_START),F=0);x.collapse()}}1!=C.length?D=!1:(D=C[0],D=D.isElement&&"false"==D.node.getAttribute("contenteditable"));D&&(B=!0,t=C[0].node,x.setStartAt(t,CKEDITOR.POSITION_BEFORE_START),x.setEndAt(t,CKEDITOR.POSITION_AFTER_END));m.dontMoveCaret=B;m.bogusNeededBlocks=A}D=m.range;var S;W=m.bogusNeededBlocks;for(X=D.createBookmark();M=m.zombies.pop();)M.getParent()&&(H=D.clone(),H.moveToElementEditStart(M),
H.removeEmptyBlocksAtEnd());if(W)for(;M=W.pop();)CKEDITOR.env.needsBrFiller?M.appendBogus():M.append(D.document.createText(" "));for(;M=m.mergeCandidates.pop();)M.mergeSiblings();D.moveToBookmark(X);if(!m.dontMoveCaret){for(M=f(D);M&&a(M)&&!M.is(E.$empty);){if(M.isBlockBoundary())D.moveToPosition(M,CKEDITOR.POSITION_BEFORE_END);else{if(e(M)&&M.getHtml().match(/(\s|&nbsp;)$/g)){S=null;break}S=D.clone();S.moveToPosition(M,CKEDITOR.POSITION_BEFORE_END)}M=M.getLast(c)}S&&D.moveToRange(S)}}}}();w=function(){function a(b){b=
new CKEDITOR.dom.walker(b);b.guard=function(a,b){if(b)return!1;if(a.type==CKEDITOR.NODE_ELEMENT)return a.is(CKEDITOR.dtd.$tableContent)};b.evaluator=function(a){return a.type==CKEDITOR.NODE_ELEMENT};return b}function b(a,c,d){c=a.getDocument().createElement(c);a.append(c,d);return c}function c(a){var b=a.count(),d;for(b;0<b--;)d=a.getItem(b),CKEDITOR.tools.trim(d.getHtml())||(d.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&d.getChildCount()&&d.getFirst().remove())}return function(d){var f=
d.startContainer,e=f.getAscendant("table",1),g=!1;c(e.getElementsByTag("td"));c(e.getElementsByTag("th"));e=d.clone();e.setStart(f,0);e=a(e).lastBackward();e||(e=d.clone(),e.setEndAt(f,CKEDITOR.POSITION_BEFORE_END),e=a(e).lastForward(),g=!0);e||(e=f);e.is("table")?(d.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),d.collapse(!0),e.remove()):(e.is({tbody:1,thead:1,tfoot:1})&&(e=b(e,"tr",g)),e.is("tr")&&(e=b(e,e.getParent().is("thead")?"th":"td",g)),(f=e.getBogus())&&f.remove(),d.moveToPosition(e,g?CKEDITOR.POSITION_AFTER_START:
CKEDITOR.POSITION_BEFORE_END))}}();H={eol:{detect:function(a,b){var c=a.range,d=c.clone(),e=c.clone(),f=new CKEDITOR.dom.elementPath(c.startContainer,b),g=new CKEDITOR.dom.elementPath(c.endContainer,b);d.collapse(1);e.collapse();f.block&&d.checkBoundaryOfElement(f.block,CKEDITOR.END)&&(c.setStartAfter(f.block),a.prependEolBr=1);g.block&&e.checkBoundaryOfElement(g.block,CKEDITOR.START)&&(c.setEndBefore(g.block),a.appendEolBr=1)},fix:function(a,b){var c=b.getDocument(),d;a.appendEolBr&&(d=this.createEolBr(c),
a.fragment.append(d));!a.prependEolBr||d&&!d.getPrevious()||a.fragment.append(this.createEolBr(c),1)},createEolBr:function(a){return a.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(a){var b=a.range.getBoundaryNodes(),c=b.startNode,b=b.endNode;!b||!x(b)||c&&c.equals(b)||a.range.setEndBefore(b)}},tree:{rebuild:function(a,b){var c=a.range,d=c.getCommonAncestor(),e=new CKEDITOR.dom.elementPath(d,b),f=new CKEDITOR.dom.elementPath(c.startContainer,b),c=new CKEDITOR.dom.elementPath(c.endContainer,
b),g;d.type==CKEDITOR.NODE_TEXT&&(d=d.getParent());if(e.blockLimit.is({tr:1,table:1})){var k=e.contains("table").getParent();g=function(a){return!a.equals(k)}}else if(e.block&&e.block.is(CKEDITOR.dtd.$listItem)&&(f=f.contains(CKEDITOR.dtd.$list),c=c.contains(CKEDITOR.dtd.$list),!f.equals(c))){var l=e.contains(CKEDITOR.dtd.$list).getParent();g=function(a){return!a.equals(l)}}g||(g=function(a){return!a.equals(e.block)&&!a.equals(e.blockLimit)});this.rebuildFragment(a,b,d,g)},rebuildFragment:function(a,
b,c,d){for(var e;c&&!c.equals(b)&&d(c);)e=c.clone(0,1),a.fragment.appendTo(e),a.fragment=e,c=c.getParent()}},cell:{shrink:function(a){a=a.range;var b=a.startContainer,c=a.endContainer,d=a.startOffset,e=a.endOffset;b.type==CKEDITOR.NODE_ELEMENT&&b.equals(c)&&b.is("tr")&&++d==e&&a.shrink(CKEDITOR.SHRINK_TEXT)}}};t=function(){function a(b,c){var d=b.getParent();if(d.is(CKEDITOR.dtd.$inline))b[c?"insertBefore":"insertAfter"](d)}function b(c,d,e){a(d);a(e,1);for(var f;f=e.getNext();)f.insertAfter(d),d=
f;r(c)&&c.remove()}function c(a,b){var d=new CKEDITOR.dom.range(a);d.setStartAfter(b.startNode);d.setEndBefore(b.endNode);return d}return{list:{detectMerge:function(a,b){var d=c(b,a.bookmark),e=d.startPath(),f=d.endPath(),h=e.contains(CKEDITOR.dtd.$list),g=f.contains(CKEDITOR.dtd.$list);a.mergeList=h&&g&&h.getParent().equals(g.getParent())&&!h.equals(g);a.mergeListItems=e.block&&f.block&&e.block.is(CKEDITOR.dtd.$listItem)&&f.block.is(CKEDITOR.dtd.$listItem);if(a.mergeList||a.mergeListItems)d=d.clone(),
d.setStartBefore(a.bookmark.startNode),d.setEndAfter(a.bookmark.endNode),a.mergeListBookmark=d.createBookmark()},merge:function(a,c){if(a.mergeListBookmark){var d=a.mergeListBookmark.startNode,e=a.mergeListBookmark.endNode,f=new CKEDITOR.dom.elementPath(d,c),g=new CKEDITOR.dom.elementPath(e,c);if(a.mergeList){var p=f.contains(CKEDITOR.dtd.$list),k=g.contains(CKEDITOR.dtd.$list);p.equals(k)||(k.moveChildren(p),k.remove())}a.mergeListItems&&(f=f.contains(CKEDITOR.dtd.$listItem),g=g.contains(CKEDITOR.dtd.$listItem),
f.equals(g)||b(g,d,e));d.remove();e.remove()}}},block:{detectMerge:function(a,b){if(!a.tableContentsRanges&&!a.mergeListBookmark){var c=new CKEDITOR.dom.range(b);c.setStartBefore(a.bookmark.startNode);c.setEndAfter(a.bookmark.endNode);a.mergeBlockBookmark=c.createBookmark()}},merge:function(a,c){if(a.mergeBlockBookmark&&!a.purgeTableBookmark){var d=a.mergeBlockBookmark.startNode,e=a.mergeBlockBookmark.endNode,f=new CKEDITOR.dom.elementPath(d,c),g=new CKEDITOR.dom.elementPath(e,c),f=f.block,g=g.block;
f&&g&&!f.equals(g)&&b(g,d,e);d.remove();e.remove()}}},table:function(){function a(c){var e=[],f,h=new CKEDITOR.dom.walker(c),g=c.startPath().contains(d),n=c.endPath().contains(d),p={};h.guard=function(a,h){if(a.type==CKEDITOR.NODE_ELEMENT){var k="visited_"+(h?"out":"in");if(a.getCustomData(k))return;CKEDITOR.dom.element.setMarker(p,a,k,1)}if(h&&g&&a.equals(g))f=c.clone(),f.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),e.push(f);else if(!h&&n&&a.equals(n))f=c.clone(),f.setStartAt(n,CKEDITOR.POSITION_AFTER_START),
e.push(f);else{if(k=!h)k=a.type==CKEDITOR.NODE_ELEMENT&&a.is(d)&&(!g||b(a,g))&&(!n||b(a,n));k&&(f=c.clone(),f.selectNodeContents(a),e.push(f))}};h.lastForward();CKEDITOR.dom.element.clearAllMarkers(p);return e}function b(a,c){var d=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,e=a.getPosition(c);return e===CKEDITOR.POSITION_IDENTICAL?!1:0===(e&d)}var d={td:1,th:1,caption:1};return{detectPurge:function(a){var b=a.range,c=b.clone();c.enlarge(CKEDITOR.ENLARGE_ELEMENT);var c=new CKEDITOR.dom.walker(c),
e=0;c.evaluator=function(a){a.type==CKEDITOR.NODE_ELEMENT&&a.is(d)&&++e};c.checkForward();if(1<e){var c=b.startPath().contains("table"),f=b.endPath().contains("table");c&&f&&b.checkBoundaryOfElement(c,CKEDITOR.START)&&b.checkBoundaryOfElement(f,CKEDITOR.END)&&(b=a.range.clone(),b.setStartBefore(c),b.setEndAfter(f),a.purgeTableBookmark=b.createBookmark())}},detectRanges:function(e,f){var h=c(f,e.bookmark),g=h.clone(),k,l,m=h.getCommonAncestor();m.is(CKEDITOR.dtd.$tableContent)&&!m.is(d)&&(m=m.getAscendant("table",
!0));l=m;m=new CKEDITOR.dom.elementPath(h.startContainer,l);l=new CKEDITOR.dom.elementPath(h.endContainer,l);m=m.contains("table");l=l.contains("table");if(m||l)m&&l&&b(m,l)?(e.tableSurroundingRange=g,g.setStartAt(m,CKEDITOR.POSITION_AFTER_END),g.setEndAt(l,CKEDITOR.POSITION_BEFORE_START),g=h.clone(),g.setEndAt(m,CKEDITOR.POSITION_AFTER_END),k=h.clone(),k.setStartAt(l,CKEDITOR.POSITION_BEFORE_START),k=a(g).concat(a(k))):m?l||(e.tableSurroundingRange=g,g.setStartAt(m,CKEDITOR.POSITION_AFTER_END),h.setEndAt(m,
CKEDITOR.POSITION_AFTER_END)):(e.tableSurroundingRange=g,g.setEndAt(l,CKEDITOR.POSITION_BEFORE_START),h.setStartAt(l,CKEDITOR.POSITION_AFTER_START)),e.tableContentsRanges=k?k:a(h)},deleteRanges:function(a){for(var b;b=a.tableContentsRanges.pop();)b.extractContents(),r(b.startContainer)&&b.startContainer.appendBogus();a.tableSurroundingRange&&a.tableSurroundingRange.extractContents()},purge:function(a){if(a.purgeTableBookmark){var b=a.doc,c=a.range.clone(),b=b.createElement("p");b.insertBefore(a.purgeTableBookmark.startNode);
c.moveToBookmark(a.purgeTableBookmark);c.deleteContents();a.range.moveToPosition(b,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(a){return!(a.range.startPath().contains(CKEDITOR.dtd.$listItem)&&a.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(a){a.startContainer.getDtd()["#"]||a.moveToClosestEditablePosition(null,!0)},autoParagraph:function(a,b){var c=b.startPath(),d;k(a,c.block,c.blockLimit)&&(d=l(a))&&(d=b.document.createElement(d),d.appendBogus(),
b.insertNode(d),b.moveToPosition(d,CKEDITOR.POSITION_AFTER_START))}}}()})();
(function(){function a(){var a=this._.fakeSelection,b;a&&(b=this.getSelection(1),b&&b.isHidden()||(a.reset(),a=0));if(!a&&(a=b||this.getSelection(1),!a||a.getType()==CKEDITOR.SELECTION_NONE))return;this.fire("selectionCheck",a);b=this.elementPath();if(!b.compare(this._.selectionPreviousPath)){var c=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(b.blockLimit);CKEDITOR.env.webkit&&!c&&(this._.previousActive=this.document.getActive());this._.selectionPreviousPath=b;this.fire("selectionChange",
{selection:a,path:b})}}function d(){w=!0;q||(b.call(this),q=CKEDITOR.tools.setTimeout(b,200,this))}function b(){q=null;w&&(CKEDITOR.tools.setTimeout(a,0,this),w=!1)}function c(a){return H(a)||a.type==CKEDITOR.NODE_ELEMENT&&!a.is(CKEDITOR.dtd.$empty)?!0:!1}function f(a){function b(c,d){return c&&c.type!=CKEDITOR.NODE_TEXT?a.clone()["moveToElementEdit"+(d?"End":"Start")](c):!1}if(!(a.root instanceof CKEDITOR.editable))return!1;var d=a.startContainer,e=a.getPreviousNode(c,null,d),f=a.getNextNode(c,null,
d);return b(e)||b(f,1)||!(e||f||d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()&&d.getBogus())?!0:!1}function g(a){k(a,!1);var b=a.getDocument().createText(x);a.setCustomData("cke-fillingChar",b);return b}function k(a,b){var c=a&&a.removeCustomData("cke-fillingChar");if(c){if(!1!==b){var d=a.getDocument().getSelection().getNative(),e=d&&"None"!=d.type&&d.getRangeAt(0),f=x.length;if(c.getLength()>f&&e&&e.intersectsNode(c.$)){var g=[{node:d.anchorNode,offset:d.anchorOffset},{node:d.focusNode,offset:d.focusOffset}];
d.anchorNode==c.$&&d.anchorOffset>f&&(g[0].offset-=f);d.focusNode==c.$&&d.focusOffset>f&&(g[1].offset-=f)}}c.setText(l(c.getText(),1));g&&(c=a.getDocument().$,d=c.getSelection(),c=c.createRange(),c.setStart(g[0].node,g[0].offset),c.collapse(!0),d.removeAllRanges(),d.addRange(c),d.extend(g[1].node,g[1].offset))}}function l(a,b){return b?a.replace(D,function(a,b){return b?" ":""}):a.replace(x,"")}function m(a,b){var c=CKEDITOR.dom.element.createFromHtml('\x3cdiv data-cke-hidden-sel\x3d"1" data-cke-temp\x3d"1" style\x3d"'+
(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px")+'"\x3e'+(b||"\x26nbsp;")+"\x3c/div\x3e",a.document);a.fire("lockSnapshot");a.editable().append(c);var d=a.getSelection(1),e=a.createRange(),f=d.root.on("selectionchange",function(a){a.cancel()},null,null,0);e.setStartAt(c,CKEDITOR.POSITION_AFTER_START);e.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);d.selectRanges([e]);f.removeListener();a.fire("unlockSnapshot");a._.hiddenSelectionContainer=c}function u(a){var b=
{37:1,39:1,8:1,46:1};return function(c){var d=c.data.getKeystroke();if(b[d]){var e=a.getSelection().getRanges(),f=e[0];1==e.length&&f.collapsed&&(d=f[38>d?"getPreviousEditableNode":"getNextEditableNode"]())&&d.type==CKEDITOR.NODE_ELEMENT&&"false"==d.getAttribute("contenteditable")&&(a.getSelection().fake(d),c.data.preventDefault(),c.cancel())}}}function e(a){for(var b=0;b<a.length;b++){var c=a[b];c.getCommonAncestor().isReadOnly()&&a.splice(b,1);if(!c.collapsed){if(c.startContainer.isReadOnly())for(var d=
c.startContainer,e;d&&!((e=d.type==CKEDITOR.NODE_ELEMENT)&&d.is("body")||!d.isReadOnly());)e&&"false"==d.getAttribute("contentEditable")&&c.setStartAfter(d),d=d.getParent();d=c.startContainer;e=c.endContainer;var f=c.startOffset,g=c.endOffset,k=c.clone();d&&d.type==CKEDITOR.NODE_TEXT&&(f>=d.getLength()?k.setStartAfter(d):k.setStartBefore(d));e&&e.type==CKEDITOR.NODE_TEXT&&(g?k.setEndAfter(e):k.setEndBefore(e));d=new CKEDITOR.dom.walker(k);d.evaluator=function(d){if(d.type==CKEDITOR.NODE_ELEMENT&&
d.isReadOnly()){var e=c.clone();c.setEndBefore(d);c.collapsed&&a.splice(b--,1);d.getPosition(k.endContainer)&CKEDITOR.POSITION_CONTAINS||(e.setStartAfter(d),e.collapsed||a.splice(b+1,0,e));return!0}return!1};d.next()}}return a}var A="function"!=typeof window.getSelection,r=1,x=CKEDITOR.tools.repeat("​",7),D=new RegExp(x+"( )?","g"),q,w,H=CKEDITOR.dom.walker.invisible(1),t=function(){function a(b){return function(a){var c=a.editor.createRange();c.moveToClosestEditablePosition(a.selected,b)&&a.editor.getSelection().selectRanges([c]);
return!1}}function b(a){return function(b){var c=b.editor,d=c.createRange(),e;(e=d.moveToClosestEditablePosition(b.selected,a))||(e=d.moveToClosestEditablePosition(b.selected,!a));e&&c.getSelection().selectRanges([d]);c.fire("saveSnapshot");b.selected.remove();e||(d.moveToElementEditablePosition(c.editable()),c.getSelection().selectRanges([d]));c.fire("saveSnapshot");return!1}}var c=a(),d=a(1);return{37:c,38:c,39:d,40:d,8:b(),46:b(1)}}();CKEDITOR.on("instanceCreated",function(b){function c(){var a=
e.getSelection();a&&a.removeAllRanges()}var e=b.editor;e.on("contentDom",function(){function b(){B=new CKEDITOR.dom.selection(e.getSelection());B.lock()}function c(){h.removeListener("mouseup",c);l.removeListener("mouseup",c);var a=CKEDITOR.document.$.selection,b=a.createRange();"None"!=a.type&&b.parentElement().ownerDocument==f.$&&b.select()}var f=e.document,h=CKEDITOR.document,g=e.editable(),p=f.getBody(),l=f.getDocumentElement(),m=g.isInline(),q,B;CKEDITOR.env.gecko&&g.attachListener(g,"focus",
function(a){a.removeListener();0!==q&&(a=e.getSelection().getNative())&&a.isCollapsed&&a.anchorNode==g.$&&(a=e.createRange(),a.moveToElementEditStart(g),a.select())},null,null,-2);g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){q&&CKEDITOR.env.webkit&&(q=e._.previousActive&&e._.previousActive.equals(f.getActive()))&&null!=e._.previousScrollTop&&e._.previousScrollTop!=g.$.scrollTop&&(g.$.scrollTop=e._.previousScrollTop);e.unlockSelection(q);q=0},null,null,-1);g.attachListener(g,
"mousedown",function(){q=0});if(CKEDITOR.env.ie||m)A?g.attachListener(g,"beforedeactivate",b,null,null,-1):g.attachListener(e,"selectionCheck",b,null,null,-1),g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){e.lockSelection(B);q=1},null,null,-1),g.attachListener(g,"mousedown",function(){q=0});if(CKEDITOR.env.ie&&!m){var I;g.attachListener(g,"mousedown",function(a){2==a.data.$.button&&((a=e.document.getSelection())&&a.getType()!=CKEDITOR.SELECTION_NONE||(I=e.window.getScrollPosition()))});
g.attachListener(g,"mouseup",function(a){2==a.data.$.button&&I&&(e.document.$.documentElement.scrollLeft=I.x,e.document.$.documentElement.scrollTop=I.y);I=null});if("BackCompat"!=f.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat){var F,K;l.on("mousedown",function(a){function b(a){a=a.data.$;if(F){var c=p.$.createTextRange();try{c.moveToPoint(a.clientX,a.clientY)}catch(d){}F.setEndPoint(0>K.compareEndPoints("StartToStart",c)?"EndToEnd":"StartToStart",c);F.select()}}function c(){l.removeListener("mousemove",
b);h.removeListener("mouseup",c);l.removeListener("mouseup",c);F.select()}a=a.data;if(a.getTarget().is("html")&&a.$.y<l.$.clientHeight&&a.$.x<l.$.clientWidth){F=p.$.createTextRange();try{F.moveToPoint(a.$.clientX,a.$.clientY)}catch(d){}K=F.duplicate();l.on("mousemove",b);h.on("mouseup",c);l.on("mouseup",c)}})}if(7<CKEDITOR.env.version&&11>CKEDITOR.env.version)l.on("mousedown",function(a){a.data.getTarget().is("html")&&(h.on("mouseup",c),l.on("mouseup",c))})}}g.attachListener(g,"selectionchange",a,
e);g.attachListener(g,"keyup",d,e);g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){e.forceNextSelectionCheck();e.selectionChange(1)});if(m&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var G;g.attachListener(g,"mousedown",function(){G=1});g.attachListener(f.getDocumentElement(),"mouseup",function(){G&&d.call(e);G=0})}else g.attachListener(CKEDITOR.env.ie?g:f.getDocumentElement(),"mouseup",d,e);CKEDITOR.env.webkit&&g.attachListener(f,"keydown",function(a){switch(a.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:k(g)}},
null,null,-1);g.attachListener(g,"keydown",u(e),null,null,-1)});e.on("setData",function(){e.unlockSelection();CKEDITOR.env.webkit&&c()});e.on("contentDomUnload",function(){e.unlockSelection()});if(CKEDITOR.env.ie9Compat)e.on("beforeDestroy",c,null,null,9);e.on("dataReady",function(){delete e._.fakeSelection;delete e._.hiddenSelectionContainer;e.selectionChange(1)});e.on("loadSnapshot",function(){var a=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),b=e.editable().getLast(a);b&&b.hasAttribute("data-cke-hidden-sel")&&
(b.remove(),CKEDITOR.env.gecko&&(a=e.editable().getFirst(a))&&a.is("br")&&a.getAttribute("_moz_editor_bogus_node")&&a.remove())},null,null,100);e.on("key",function(a){if("wysiwyg"==e.mode){var b=e.getSelection();if(b.isFake){var c=t[a.data.keyCode];if(c)return c({editor:e,selected:b.getSelectedElement(),selection:b,keyEvent:a})}}})});if(CKEDITOR.env.webkit)CKEDITOR.on("instanceReady",function(a){var b=a.editor;b.on("selectionChange",function(){var a=b.editable(),c=a.getCustomData("cke-fillingChar");
c&&(c.getCustomData("ready")?k(a):c.setCustomData("ready",1))},null,null,-1);b.on("beforeSetMode",function(){k(b.editable())},null,null,-1);b.on("getSnapshot",function(a){a.data&&(a.data=l(a.data))},b,null,20);b.on("toDataFormat",function(a){a.data.dataValue=l(a.data.dataValue)},null,null,0)});CKEDITOR.editor.prototype.selectionChange=function(b){(b?a:d).call(this)};CKEDITOR.editor.prototype.getSelection=function(a){return!this._.savedSelection&&!this._.fakeSelection||a?(a=this.editable())&&"wysiwyg"==
this.mode?new CKEDITOR.dom.selection(a):null:this._.savedSelection||this._.fakeSelection};CKEDITOR.editor.prototype.lockSelection=function(a){a=a||this.getSelection(1);return a.getType()!=CKEDITOR.SELECTION_NONE?(!a.isLocked&&a.lock(),this._.savedSelection=a,!0):!1};CKEDITOR.editor.prototype.unlockSelection=function(a){var b=this._.savedSelection;return b?(b.unlock(a),delete this._.savedSelection,!0):!1};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath};
CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)};CKEDITOR.dom.range.prototype.select=function(){var a=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);a.selectRanges([this]);return a};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;CKEDITOR.dom.selection=function(a){if(a instanceof CKEDITOR.dom.selection){var b=a;a=a.root}var c=a instanceof CKEDITOR.dom.element;
this.rev=b?b.rev:r++;this.document=a instanceof CKEDITOR.dom.document?a:a.getDocument();this.root=c?a:this.document.getBody();this.isLocked=0;this._={cache:{}};if(b)return CKEDITOR.tools.extend(this._.cache,b._.cache),this.isFake=b.isFake,this.isLocked=b.isLocked,this;a=this.getNative();var d,e;if(a)if(a.getRangeAt)d=(e=a.rangeCount&&a.getRangeAt(0))&&new CKEDITOR.dom.node(e.commonAncestorContainer);else{try{e=a.createRange()}catch(f){}d=e&&CKEDITOR.dom.element.get(e.item&&e.item(0)||e.parentElement())}if(!d||
d.type!=CKEDITOR.NODE_ELEMENT&&d.type!=CKEDITOR.NODE_TEXT||!this.root.equals(d)&&!this.root.contains(d))this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList;return this};var v={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:l,
_createFillingCharSequenceNode:g,FILLING_CHAR_SEQUENCE:x});CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=A?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:A?function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_NONE;try{var c=this.getNative(),d=c.type;"Text"==d&&(b=CKEDITOR.SELECTION_TEXT);"Control"==d&&(b=CKEDITOR.SELECTION_ELEMENT);c.createRange().parentElement()&&
(b=CKEDITOR.SELECTION_TEXT)}catch(e){}return a.type=b}:function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_TEXT,c=this.getNative();if(!c||!c.rangeCount)b=CKEDITOR.SELECTION_NONE;else if(1==c.rangeCount){var c=c.getRangeAt(0),d=c.startContainer;d==c.endContainer&&1==d.nodeType&&1==c.endOffset-c.startOffset&&v[d.childNodes[c.startOffset].nodeName.toLowerCase()]&&(b=CKEDITOR.SELECTION_ELEMENT)}return a.type=b},getRanges:function(){var a=A?function(){function a(b){return(new CKEDITOR.dom.node(b)).getIndex()}
var b=function(b,c){b=b.duplicate();b.collapse(c);var d=b.parentElement();if(!d.hasChildNodes())return{container:d,offset:0};for(var e=d.children,f,h,g=b.duplicate(),k=0,l=e.length-1,B=-1,n,m;k<=l;)if(B=Math.floor((k+l)/2),f=e[B],g.moveToElementText(f),n=g.compareEndPoints("StartToStart",b),0<n)l=B-1;else if(0>n)k=B+1;else return{container:d,offset:a(f)};if(-1==B||B==e.length-1&&0>n){g.moveToElementText(d);g.setEndPoint("StartToStart",b);g=g.text.replace(/(\r\n|\r)/g,"\n").length;e=d.childNodes;if(!g)return f=
e[e.length-1],f.nodeType!=CKEDITOR.NODE_TEXT?{container:d,offset:e.length}:{container:f,offset:f.nodeValue.length};for(d=e.length;0<g&&0<d;)h=e[--d],h.nodeType==CKEDITOR.NODE_TEXT&&(m=h,g-=h.nodeValue.length);return{container:m,offset:-g}}g.collapse(0<n?!0:!1);g.setEndPoint(0<n?"StartToStart":"EndToStart",b);g=g.text.replace(/(\r\n|\r)/g,"\n").length;if(!g)return{container:d,offset:a(f)+(0<n?0:1)};for(;0<g;)try{h=f[0<n?"previousSibling":"nextSibling"],h.nodeType==CKEDITOR.NODE_TEXT&&(g-=h.nodeValue.length,
m=h),f=h}catch(K){return{container:d,offset:a(f)}}return{container:m,offset:0<n?-g:m.nodeValue.length+g}};return function(){var a=this.getNative(),c=a&&a.createRange(),d=this.getType();if(!a)return[];if(d==CKEDITOR.SELECTION_TEXT)return a=new CKEDITOR.dom.range(this.root),d=b(c,!0),a.setStart(new CKEDITOR.dom.node(d.container),d.offset),d=b(c),a.setEnd(new CKEDITOR.dom.node(d.container),d.offset),a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&
a.collapse(),[a];if(d==CKEDITOR.SELECTION_ELEMENT){for(var d=[],e=0;e<c.length;e++){for(var f=c.item(e),g=f.parentNode,h=0,a=new CKEDITOR.dom.range(this.root);h<g.childNodes.length&&g.childNodes[h]!=f;h++);a.setStart(new CKEDITOR.dom.node(g),h);a.setEnd(new CKEDITOR.dom.node(g),h+1);d.push(a)}return d}return[]}}():function(){var a=[],b,c=this.getNative();if(!c)return a;for(var d=0;d<c.rangeCount;d++){var e=c.getRangeAt(d);b=new CKEDITOR.dom.range(this.root);b.setStart(new CKEDITOR.dom.node(e.startContainer),
e.startOffset);b.setEnd(new CKEDITOR.dom.node(e.endContainer),e.endOffset);a.push(b)}return a};return function(b){var c=this._.cache,d=c.ranges;d||(c.ranges=d=new CKEDITOR.dom.rangeList(a.call(this)));return b?e(new CKEDITOR.dom.rangeList(d.slice())):d}}(),getStartElement:function(){var a=this._.cache;if(void 0!==a.startElement)return a.startElement;var b;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var c=this.getRanges()[0];
if(c){if(c.collapsed)b=c.startContainer,b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());else{for(c.optimize();b=c.startContainer,c.startOffset==(b.getChildCount?b.getChildCount():b.getLength())&&!b.isBlockBoundary();)c.setStartAfter(b);b=c.startContainer;if(b.type!=CKEDITOR.NODE_ELEMENT)return b.getParent();if((b=b.getChild(c.startOffset))&&b.type==CKEDITOR.NODE_ELEMENT)for(c=b.getFirst();c&&c.type==CKEDITOR.NODE_ELEMENT;)b=c,c=c.getFirst();else b=c.startContainer}b=b.$}}return a.startElement=b?
new CKEDITOR.dom.element(b):null},getSelectedElement:function(){var a=this._.cache;if(void 0!==a.selectedElement)return a.selectedElement;var b=this,c=CKEDITOR.tools.tryThese(function(){return b.getNative().createRange().item(0)},function(){for(var a=b.getRanges()[0].clone(),c,d,e=2;e&&!((c=a.getEnclosedNode())&&c.type==CKEDITOR.NODE_ELEMENT&&v[c.getName()]&&(d=c));e--)a.shrink(CKEDITOR.SHRINK_ELEMENT);return d&&d.$});return a.selectedElement=c?new CKEDITOR.dom.element(c):null},getSelectedText:function(){var a=
this._.cache;if(void 0!==a.selectedText)return a.selectedText;var b=this.getNative(),b=A?"Control"==b.type?"":b.createRange().text:b.toString();return a.selectedText=b},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this.getSelectedText();this._.cache.nativeSel=null;this.isLocked=1},unlock:function(a){if(this.isLocked){if(a)var b=this.getSelectedElement(),c=!b&&this.getRanges(),d=this.isFake;this.isLocked=0;this.reset();a&&(a=b||c[0]&&c[0].getCommonAncestor())&&
a.getAscendant("body",1)&&(d?this.fake(b):b?this.selectElement(b):this.selectRanges(c))}},reset:function(){this._.cache={};this.isFake=0;var a=this.root.editor;if(a&&a._.fakeSelection)if(this.rev==a._.fakeSelection.rev){delete a._.fakeSelection;var b=a._.hiddenSelectionContainer;if(b){var c=a.checkDirty();a.fire("lockSnapshot");b.remove();a.fire("unlockSnapshot");!c&&a.resetDirty()}delete a._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=r++},selectElement:function(a){var b=
new CKEDITOR.dom.range(this.root);b.setStartBefore(a);b.setEndAfter(a);this.selectRanges([b])},selectRanges:function(a){var b=this.root.editor,b=b&&b._.hiddenSelectionContainer;this.reset();if(b)for(var b=this.root,c,d=0;d<a.length;++d)c=a[d],c.endContainer.equals(b)&&(c.endOffset=Math.min(c.endOffset,b.getChildCount()));if(a.length)if(this.isLocked){var e=CKEDITOR.document.getActive();this.unlock();this.selectRanges(a);this.lock();e&&!e.equals(this.root)&&e.focus()}else{var l;a:{var m,q;if(1==a.length&&
!(q=a[0]).collapsed&&(l=q.getEnclosedNode())&&l.type==CKEDITOR.NODE_ELEMENT&&(q=q.clone(),q.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(m=q.getEnclosedNode())&&m.type==CKEDITOR.NODE_ELEMENT&&(l=m),"false"==l.getAttribute("contenteditable")))break a;l=void 0}if(l)this.fake(l);else{if(A){q=CKEDITOR.dom.walker.whitespaces(!0);m=/\ufeff|\u00a0/;b={table:1,tbody:1,tr:1};1<a.length&&(l=a[a.length-1],a[0].setEnd(l.endContainer,l.endOffset));l=a[0];a=l.collapsed;var u,r,t;if((c=l.getEnclosedNode())&&c.type==CKEDITOR.NODE_ELEMENT&&
c.getName()in v&&(!c.is("a")||!c.getText()))try{t=c.$.createControlRange();t.addElement(c.$);t.select();return}catch(x){}if(l.startContainer.type==CKEDITOR.NODE_ELEMENT&&l.startContainer.getName()in b||l.endContainer.type==CKEDITOR.NODE_ELEMENT&&l.endContainer.getName()in b)l.shrink(CKEDITOR.NODE_ELEMENT,!0),a=l.collapsed;t=l.createBookmark();b=t.startNode;a||(e=t.endNode);t=l.document.$.body.createTextRange();t.moveToElementText(b.$);t.moveStart("character",1);e?(m=l.document.$.body.createTextRange(),
m.moveToElementText(e.$),t.setEndPoint("EndToEnd",m),t.moveEnd("character",-1)):(u=b.getNext(q),r=b.hasAscendant("pre"),u=!(u&&u.getText&&u.getText().match(m))&&(r||!b.hasPrevious()||b.getPrevious().is&&b.getPrevious().is("br")),r=l.document.createElement("span"),r.setHtml("\x26#65279;"),r.insertBefore(b),u&&l.document.createText("﻿").insertBefore(b));l.setStartBefore(b);b.remove();a?(u?(t.moveStart("character",-1),t.select(),l.document.$.selection.clear()):t.select(),l.moveToPosition(r,CKEDITOR.POSITION_BEFORE_START),
r.remove()):(l.setEndBefore(e),e.remove(),t.select())}else{e=this.getNative();if(!e)return;this.removeAllRanges();for(t=0;t<a.length;t++){if(t<a.length-1&&(u=a[t],r=a[t+1],m=u.clone(),m.setStart(u.endContainer,u.endOffset),m.setEnd(r.startContainer,r.startOffset),!m.collapsed&&(m.shrink(CKEDITOR.NODE_ELEMENT,!0),l=m.getCommonAncestor(),m=m.getEnclosedNode(),l.isReadOnly()||m&&m.isReadOnly()))){r.setStart(u.startContainer,u.startOffset);a.splice(t--,1);continue}l=a[t];r=this.document.$.createRange();
l.collapsed&&CKEDITOR.env.webkit&&f(l)&&(m=g(this.root),l.insertNode(m),(u=m.getNext())&&!m.getPrevious()&&u.type==CKEDITOR.NODE_ELEMENT&&"br"==u.getName()?(k(this.root),l.moveToPosition(u,CKEDITOR.POSITION_BEFORE_START)):l.moveToPosition(m,CKEDITOR.POSITION_AFTER_END));r.setStart(l.startContainer.$,l.startOffset);try{r.setEnd(l.endContainer.$,l.endOffset)}catch(B){if(0<=B.toString().indexOf("NS_ERROR_ILLEGAL_VALUE"))l.collapse(1),r.setEnd(l.endContainer.$,l.endOffset);else throw B;}e.addRange(r)}}this.reset();
this.root.fire("selectionchange")}}},fake:function(a,b){var c=this.root.editor;void 0===b&&a.hasAttribute("aria-label")&&(b=a.getAttribute("aria-label"));this.reset();m(c,b);var d=this._.cache,e=new CKEDITOR.dom.range(this.root);e.setStartBefore(a);e.setEndAfter(a);d.ranges=new CKEDITOR.dom.rangeList(e);d.selectedElement=d.startElement=a;d.type=CKEDITOR.SELECTION_ELEMENT;d.selectedText=d.nativeSel=null;this.isFake=1;this.rev=r++;c._.fakeSelection=this;this.root.fire("selectionchange")},isHidden:function(){var a=
this.getCommonAncestor();a&&a.type==CKEDITOR.NODE_TEXT&&(a=a.getParent());return!(!a||!a.data("cke-hidden-sel"))},createBookmarks:function(a){a=this.getRanges().createBookmarks(a);this.isFake&&(a.isFake=1);return a},createBookmarks2:function(a){a=this.getRanges().createBookmarks2(a);this.isFake&&(a.isFake=1);return a},selectBookmarks:function(a){for(var b=[],c,d=0;d<a.length;d++){var e=new CKEDITOR.dom.range(this.root);e.moveToBookmark(a[d]);b.push(e)}a.isFake&&(c=b[0].getEnclosedNode(),c&&c.type==
CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),a.isFake=0));a.isFake?this.fake(c):this.selectRanges(b);return this},getCommonAncestor:function(){var a=this.getRanges();return a.length?a[0].startContainer.getCommonAncestor(a[a.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var a=this.getNative();try{a&&a[A?"empty":"removeAllRanges"]()}catch(b){}this.reset()}}}})();
"use strict";CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;
(function(){function a(a,b){for(var c,d;(a=a.getParent())&&!a.equals(b);)if(a.getAttribute("data-nostyle"))c=a;else if(!d){var e=a.getAttribute("contentEditable");"false"==e?c=a:"true"==e&&(d=1)}return c}function d(a,b,c,d){return(a.getPosition(b)|d)==d&&(!c.childRule||c.childRule(a))}function b(c){var e=c.document;if(c.collapsed)e=H(this,e),c.insertNode(e),c.moveToPosition(e,CKEDITOR.POSITION_BEFORE_END);else{var g=this.element,h=this._.definition,k,l=h.ignoreReadonly,m=l||h.includeReadonly;null==
m&&(m=c.root.getCustomData("cke_includeReadonly"));var n=CKEDITOR.dtd[g];n||(k=!0,n=CKEDITOR.dtd.span);c.enlarge(CKEDITOR.ENLARGE_INLINE,1);c.trim();var p=c.createBookmark(),q=p.startNode,u=p.endNode,r=q,t;if(!l){var v=c.getCommonAncestor(),l=a(q,v),v=a(u,v);l&&(r=l.getNextSourceNode(!0));v&&(u=v)}for(r.getPosition(u)==CKEDITOR.POSITION_FOLLOWING&&(r=0);r;){l=!1;if(r.equals(u))r=null,l=!0;else{var x=r.type==CKEDITOR.NODE_ELEMENT?r.getName():null,v=x&&"false"==r.getAttribute("contentEditable"),A=x&&
r.getAttribute("data-nostyle");if(x&&r.data("cke-bookmark")){r=r.getNextSourceNode(!0);continue}if(v&&m&&CKEDITOR.dtd.$block[x])for(var w=r,y=f(w),z=void 0,C=y.length,E=0,w=C&&new CKEDITOR.dom.range(w.getDocument());E<C;++E){var z=y[E],J=CKEDITOR.filter.instances[z.data("cke-filter")];if(J?J.check(this):1)w.selectNodeContents(z),b.call(this,w)}y=x?!n[x]||A?0:v&&!m?0:d(r,u,h,O):1;if(y)if(z=r.getParent(),y=h,C=g,E=k,!z||!(z.getDtd()||CKEDITOR.dtd.span)[C]&&!E||y.parentRule&&!y.parentRule(z))l=!0;else{if(t||
x&&CKEDITOR.dtd.$removeEmpty[x]&&(r.getPosition(u)|O)!=O||(t=c.clone(),t.setStartBefore(r)),x=r.type,x==CKEDITOR.NODE_TEXT||v||x==CKEDITOR.NODE_ELEMENT&&!r.getChildCount()){for(var x=r,P;(l=!x.getNext(Y))&&(P=x.getParent(),n[P.getName()])&&d(P,q,h,N);)x=P;t.setEndAfter(x)}}else l=!0;r=r.getNextSourceNode(A||v)}if(l&&t&&!t.collapsed){for(var l=H(this,e),v=l.hasAttributes(),A=t.getCommonAncestor(),x={},y={},z={},C={},S,V,ca;l&&A;){if(A.getName()==g){for(S in h.attributes)!C[S]&&(ca=A.getAttribute(V))&&
(l.getAttribute(S)==ca?y[S]=1:C[S]=1);for(V in h.styles)!z[V]&&(ca=A.getStyle(V))&&(l.getStyle(V)==ca?x[V]=1:z[V]=1)}A=A.getParent()}for(S in y)l.removeAttribute(S);for(V in x)l.removeStyle(V);v&&!l.hasAttributes()&&(l=null);l?(t.extractContents().appendTo(l),t.insertNode(l),D.call(this,l),l.mergeSiblings(),CKEDITOR.env.ie||l.$.normalize()):(l=new CKEDITOR.dom.element("span"),t.extractContents().appendTo(l),t.insertNode(l),D.call(this,l),l.remove(!0));t=null}}c.moveToBookmark(p);c.shrink(CKEDITOR.SHRINK_TEXT);
c.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function c(a){function b(){for(var a=new CKEDITOR.dom.elementPath(d.getParent()),c=new CKEDITOR.dom.elementPath(m.getParent()),e=null,f=null,g=0;g<a.elements.length;g++){var h=a.elements[g];if(h==a.block||h==a.blockLimit)break;n.checkElementRemovable(h,!0)&&(e=h)}for(g=0;g<c.elements.length;g++){h=c.elements[g];if(h==c.block||h==c.blockLimit)break;n.checkElementRemovable(h,!0)&&(f=h)}f&&m.breakParent(f);e&&d.breakParent(e)}a.enlarge(CKEDITOR.ENLARGE_INLINE,1);var c=
a.createBookmark(),d=c.startNode;if(a.collapsed){for(var e=new CKEDITOR.dom.elementPath(d.getParent(),a.root),f,g=0,k;g<e.elements.length&&(k=e.elements[g])&&k!=e.block&&k!=e.blockLimit;g++)if(this.checkElementRemovable(k)){var l;a.collapsed&&(a.checkBoundaryOfElement(k,CKEDITOR.END)||(l=a.checkBoundaryOfElement(k,CKEDITOR.START)))?(f=k,f.match=l?"start":"end"):(k.mergeSiblings(),k.is(this.element)?x.call(this,k):q(k,h(this)[k.getName()]))}if(f){k=d;for(g=0;;g++){l=e.elements[g];if(l.equals(f))break;
else if(l.match)continue;else l=l.clone();l.append(k);k=l}k["start"==f.match?"insertBefore":"insertAfter"](f)}}else{var m=c.endNode,n=this;b();for(e=d;!e.equals(m);)f=e.getNextSourceNode(),e.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(e)&&(e.getName()==this.element?x.call(this,e):q(e,h(this)[e.getName()]),f.type==CKEDITOR.NODE_ELEMENT&&f.contains(d)&&(b(),f=d.getNext())),e=f}a.moveToBookmark(c);a.shrink(CKEDITOR.NODE_ELEMENT,!0)}function f(a){var b=[];a.forEach(function(a){if("true"==
a.getAttribute("contenteditable"))return b.push(a),!1},CKEDITOR.NODE_ELEMENT,!0);return b}function g(a){var b=a.getEnclosedNode()||a.getCommonAncestor(!1,!0);(a=(new CKEDITOR.dom.elementPath(b,a.root)).contains(this.element,1))&&!a.isReadOnly()&&t(a,this)}function k(a){var b=a.getCommonAncestor(!0,!0);if(a=(new CKEDITOR.dom.elementPath(b,a.root)).contains(this.element,1)){var b=this._.definition,c=b.attributes;if(c)for(var d in c)a.removeAttribute(d,c[d]);if(b.styles)for(var e in b.styles)b.styles.hasOwnProperty(e)&&
a.removeStyle(e)}}function l(a){var b=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0;this._.enterMode&&(c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var d,e=a.document,f;d=c.getNextParagraph();)!d.isReadOnly()&&(c.activeFilter?c.activeFilter.check(this):1)&&(f=H(this,e,d),u(d,f));a.moveToBookmark(b)}function m(a){var b=a.createBookmark(1),c=a.createIterator();c.enforceRealBlocks=!0;c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var d,e;d=c.getNextParagraph();)this.checkElementRemovable(d)&&
(d.is("pre")?((e=this._.enterMode==CKEDITOR.ENTER_BR?null:a.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&d.copyAttributes(e),u(d,e)):x.call(this,d));a.moveToBookmark(b)}function u(a,b){var c=!b;c&&(b=a.getDocument().createElement("div"),a.copyAttributes(b));var d=b&&b.is("pre"),f=a.is("pre"),g=!d&&f;if(d&&!f){f=b;(g=a.getBogus())&&g.remove();g=a.getHtml();g=A(g,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");g=g.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");g=g.replace(/([ \t\n\r]+|&nbsp;)/g,
" ");g=g.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var h=a.getDocument().createElement("div");h.append(f);f.$.outerHTML="\x3cpre\x3e"+g+"\x3c/pre\x3e";f.copyAttributes(h.getFirst());f=h.getFirst().remove()}else f.setHtml(g);b=f}else g?b=r(c?[a.getHtml()]:e(a),b):a.moveChildren(b);b.replace(a);if(d){var c=b,k;(k=c.getPrevious(P))&&k.type==CKEDITOR.NODE_ELEMENT&&k.is("pre")&&(d=A(k.getHtml(),/\n$/,"")+"\n\n"+A(c.getHtml(),/^\n/,""),CKEDITOR.env.ie?c.$.outerHTML="\x3cpre\x3e"+d+"\x3c/pre\x3e":
c.setHtml(d),k.remove())}else c&&w(b)}function e(a){var b=[];A(a.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(a,b,c){return b+"\x3c/pre\x3e"+c+"\x3cpre\x3e"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,c){b.push(c)});return b}function A(a,b,c){var d="",e="";a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,c){b&&(d=b);c&&(e=c);return""});return d+a.replace(b,c)+e}function r(a,b){var c;
1<a.length&&(c=new CKEDITOR.dom.documentFragment(b.getDocument()));for(var d=0;d<a.length;d++){var e=a[d],e=e.replace(/(\r\n|\r)/g,"\n"),e=A(e,/^[ \t]*\n/,""),e=A(e,/\n$/,""),e=A(e,/^[ \t]+|[ \t]+$/g,function(a,b){return 1==a.length?"\x26nbsp;":b?" "+CKEDITOR.tools.repeat("\x26nbsp;",a.length-1):CKEDITOR.tools.repeat("\x26nbsp;",a.length-1)+" "}),e=e.replace(/\n/g,"\x3cbr\x3e"),e=e.replace(/[ \t]{2,}/g,function(a){return CKEDITOR.tools.repeat("\x26nbsp;",a.length-1)+" "});if(c){var f=b.clone();f.setHtml(e);
c.append(f)}else b.setHtml(e)}return c||b}function x(a,b){var c=this._.definition,d=c.attributes,c=c.styles,e=h(this)[a.getName()],f=CKEDITOR.tools.isEmpty(d)&&CKEDITOR.tools.isEmpty(c),g;for(g in d)if("class"!=g&&!this._.definition.fullMatch||a.getAttribute(g)==p(g,d[g]))b&&"data-"==g.slice(0,5)||(f=a.hasAttribute(g),a.removeAttribute(g));for(var k in c)this._.definition.fullMatch&&a.getStyle(k)!=p(k,c[k],!0)||(f=f||!!a.getStyle(k),a.removeStyle(k));q(a,e,z[a.getName()]);f&&(this._.definition.alwaysRemoveElement?
w(a,1):!CKEDITOR.dtd.$block[a.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!a.hasAttributes()?w(a):a.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function D(a){for(var b=h(this),c=a.getElementsByTag(this.element),d,e=c.count();0<=--e;)d=c.getItem(e),d.isReadOnly()||x.call(this,d,!0);for(var f in b)if(f!=this.element)for(c=a.getElementsByTag(f),e=c.count()-1;0<=e;e--)d=c.getItem(e),d.isReadOnly()||q(d,b[f])}function q(a,b,c){if(b=b&&b.attributes)for(var d=0;d<b.length;d++){var e=b[d][0],
f;if(f=a.getAttribute(e)){var g=b[d][1];(null===g||g.test&&g.test(f)||"string"==typeof g&&f==g)&&a.removeAttribute(e)}}c||w(a)}function w(a,b){if(!a.hasAttributes()||b)if(CKEDITOR.dtd.$block[a.getName()]){var c=a.getPrevious(P),d=a.getNext(P);!c||c.type!=CKEDITOR.NODE_TEXT&&c.isBlockBoundary({br:1})||a.append("br",1);!d||d.type!=CKEDITOR.NODE_TEXT&&d.isBlockBoundary({br:1})||a.append("br");a.remove(!0)}else c=a.getFirst(),d=a.getLast(),a.remove(!0),c&&(c.type==CKEDITOR.NODE_ELEMENT&&c.mergeSiblings(),
d&&!c.equals(d)&&d.type==CKEDITOR.NODE_ELEMENT&&d.mergeSiblings())}function H(a,b,c){var d;d=a.element;"*"==d&&(d="span");d=new CKEDITOR.dom.element(d,b);c&&c.copyAttributes(d);d=t(d,a);b.getCustomData("doc_processing_style")&&d.hasAttribute("id")?d.removeAttribute("id"):b.setCustomData("doc_processing_style",1);return d}function t(a,b){var c=b._.definition,d=c.attributes,c=CKEDITOR.style.getStyleText(c);if(d)for(var e in d)a.setAttribute(e,d[e]);c&&a.setAttribute("style",c);return a}function v(a,
b){for(var c in a)a[c]=a[c].replace(C,function(a,c){return b[c]})}function h(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},c=a._.definition.overrides;if(c){CKEDITOR.tools.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var e=c[d],f,g;"string"==typeof e?f=e.toLowerCase():(f=e.element?e.element.toLowerCase():a.element,g=e.attributes);e=b[f]||(b[f]={});if(g){var e=e.attributes=e.attributes||[],h;for(h in g)e.push([h.toLowerCase(),g[h]])}}}return b}function p(a,b,c){var d=new CKEDITOR.dom.element("span");
d[c?"setStyle":"setAttribute"](a,b);return d[c?"getStyle":"getAttribute"](a)}function n(a,b){function c(a,b){return"font-family"==b.toLowerCase()?a.replace(/["']/g,""):a}"string"==typeof a&&(a=CKEDITOR.tools.parseCssText(a));"string"==typeof b&&(b=CKEDITOR.tools.parseCssText(b,!0));for(var d in a)if(!(d in b)||c(b[d],d)!=c(a[d],d)&&"inherit"!=a[d]&&"inherit"!=b[d])return!1;return!0}function y(a,b,c){var d=a.document,e=a.getRanges();b=b?this.removeFromRange:this.applyToRange;for(var f,g=e.createIterator();f=
g.getNextRange();)b.call(this,f,c);a.selectRanges(e);d.removeCustomData("doc_processing_style")}var z={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},J={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},E=/\s*(?:;\s*|$)/,C=/#\((.+?)\)/g,Y=CKEDITOR.dom.walker.bookmark(0,
1),P=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(a,b){if("string"==typeof a.type)return new CKEDITOR.style.customHandlers[a.type](a);var c=a.attributes;c&&c.style&&(a.styles=CKEDITOR.tools.extend({},a.styles,CKEDITOR.tools.parseCssText(c.style)),delete c.style);b&&(a=CKEDITOR.tools.clone(a),v(a.attributes,b),v(a.styles,b));c=this.element=a.element?"string"==typeof a.element?a.element.toLowerCase():a.element:"*";this.type=a.type||(z[c]?CKEDITOR.STYLE_BLOCK:J[c]?CKEDITOR.STYLE_OBJECT:
CKEDITOR.STYLE_INLINE);"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT);this._={definition:a}};CKEDITOR.style.prototype={apply:function(a){if(a instanceof CKEDITOR.dom.document)return y.call(this,a.getSelection());if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode);y.call(this,a.getSelection(),0,a);this._.enterMode=b}},remove:function(a){if(a instanceof CKEDITOR.dom.document)return y.call(this,a.getSelection(),1);if(this.checkApplicable(a.elementPath(),
a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode);y.call(this,a.getSelection(),1,a);this._.enterMode=b}},applyToRange:function(a){this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?b:this.type==CKEDITOR.STYLE_BLOCK?l:this.type==CKEDITOR.STYLE_OBJECT?g:null;return this.applyToRange(a)},removeFromRange:function(a){this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?c:this.type==CKEDITOR.STYLE_BLOCK?m:this.type==CKEDITOR.STYLE_OBJECT?k:null;return this.removeFromRange(a)},applyToObject:function(a){t(a,
this)},checkActive:function(a,b){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(a.block||a.blockLimit,!0,b);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var c=a.elements,d=0,e;d<c.length;d++)if(e=c[d],this.type!=CKEDITOR.STYLE_INLINE||e!=a.block&&e!=a.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var f=e.getName();if(!("string"==typeof this.element?f==this.element:f in this.element))continue}if(this.checkElementRemovable(e,!0,b))return!0}}return!1},checkApplicable:function(a,
b,c){b&&b instanceof CKEDITOR.filter&&(c=b);if(c&&!c.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!a.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!a.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(a,b){var c=this._.definition;if(!a||!c.ignoreReadonly&&a.isReadOnly())return!1;var d=a.getName();if("string"==typeof this.element?d==this.element:d in this.element){if(!b&&!a.hasAttributes())return!0;if(d=c._AC)c=d;else{var d={},e=0,f=c.attributes;
if(f)for(var g in f)e++,d[g]=f[g];if(g=CKEDITOR.style.getStyleText(c))d.style||e++,d.style=g;d._length=e;c=c._AC=d}if(c._length){for(var h in c)if("_length"!=h)if(d=a.getAttribute(h)||"","style"==h?n(c[h],d):c[h]==d){if(!b)return!0}else if(b)return!1;if(b)return!0}else return!0}return!1},checkElementRemovable:function(a,b,c){if(this.checkElementMatch(a,b,c))return!0;if(b=h(this)[a.getName()]){var d;if(!(b=b.attributes))return!0;for(c=0;c<b.length;c++)if(d=b[c][0],d=a.getAttribute(d)){var e=b[c][1];
if(null===e)return!0;if("string"==typeof e){if(d==e)return!0}else if(e.test(d))return!0}}return!1},buildPreview:function(a){var b=this._.definition,c=[],d=b.element;"bdo"==d&&(d="span");var c=["\x3c",d],e=b.attributes;if(e)for(var f in e)c.push(" ",f,'\x3d"',e[f],'"');(e=CKEDITOR.style.getStyleText(b))&&c.push(' style\x3d"',e,'"');c.push("\x3e",a||b.name,"\x3c/",d,"\x3e");return c.join("")},getDefinition:function(){return this._.definition}};CKEDITOR.style.getStyleText=function(a){var b=a._ST;if(b)return b;
var b=a.styles,c=a.attributes&&a.attributes.style||"",d="";c.length&&(c=c.replace(E,";"));for(var e in b){var f=b[e],g=(e+":"+f).replace(E,";");"inherit"==f?d+=g:c+=g}c.length&&(c=CKEDITOR.tools.normalizeCssText(c,!0));return a._ST=c+d};CKEDITOR.style.customHandlers={};CKEDITOR.style.addCustomHandler=function(a){var b=function(a){this._={definition:a};this.setup&&this.setup(a)};b.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},
a,!0);return this.customHandlers[a.type]=b};var O=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,N=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED})();CKEDITOR.styleCommand=function(a,d){this.requiredContent=this.allowedContent=this.style=a;CKEDITOR.tools.extend(this,d,!0)};
CKEDITOR.styleCommand.prototype.exec=function(a){a.focus();this.state==CKEDITOR.TRISTATE_OFF?a.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&a.removeStyle(this.style)};CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet");CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(a,d,b){CKEDITOR.stylesSet.addExternal(a,d,"");CKEDITOR.stylesSet.load(a,b)};
CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(a,d){var b=this._.styleStateChangeCallbacks;b||(b=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(a){for(var d=0;d<b.length;d++){var g=b[d],k=g.style.checkActive(a.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;g.fn.call(this,k)}}));b.push({style:a,fn:d})},applyStyle:function(a){a.apply(this)},removeStyle:function(a){a.remove(this)},getStylesSet:function(a){if(this._.stylesDefinitions)a(this._.stylesDefinitions);
else{var d=this,b=d.config.stylesCombo_stylesSet||d.config.stylesSet;if(!1===b)a(null);else if(b instanceof Array)d._.stylesDefinitions=b,a(b);else{b||(b="default");var b=b.split(":"),c=b[0];CKEDITOR.stylesSet.addExternal(c,b[1]?b.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),"");CKEDITOR.stylesSet.load(c,function(b){d._.stylesDefinitions=b[c];a(d._.stylesDefinitions)})}}}});
CKEDITOR.dom.comment=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createComment(a));CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}});"use strict";
(function(){var a={},d={},b;for(b in CKEDITOR.dtd.$blockLimit)b in CKEDITOR.dtd.$list||(a[b]=1);for(b in CKEDITOR.dtd.$block)b in CKEDITOR.dtd.$blockLimit||b in CKEDITOR.dtd.$empty||(d[b]=1);CKEDITOR.dom.elementPath=function(b,f){var g=null,k=null,l=[],m=b,u;f=f||b.getDocument().getBody();do if(m.type==CKEDITOR.NODE_ELEMENT){l.push(m);if(!this.lastElement&&(this.lastElement=m,m.is(CKEDITOR.dtd.$object)||"false"==m.getAttribute("contenteditable")))continue;if(m.equals(f))break;if(!k&&(u=m.getName(),
"true"==m.getAttribute("contenteditable")?k=m:!g&&d[u]&&(g=m),a[u])){if(u=!g&&"div"==u){a:{u=m.getChildren();for(var e=0,A=u.count();e<A;e++){var r=u.getItem(e);if(r.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[r.getName()]){u=!0;break a}}u=!1}u=!u}u?g=m:k=m}}while(m=m.getParent());k||(k=f);this.block=g;this.blockLimit=k;this.root=f;this.elements=l}})();
CKEDITOR.dom.elementPath.prototype={compare:function(a){var d=this.elements;a=a&&a.elements;if(!a||d.length!=a.length)return!1;for(var b=0;b<d.length;b++)if(!d[b].equals(a[b]))return!1;return!0},contains:function(a,d,b){var c;"string"==typeof a&&(c=function(b){return b.getName()==a});a instanceof CKEDITOR.dom.element?c=function(b){return b.equals(a)}:CKEDITOR.tools.isArray(a)?c=function(b){return-1<CKEDITOR.tools.indexOf(a,b.getName())}:"function"==typeof a?c=a:"object"==typeof a&&(c=function(b){return b.getName()in
a});var f=this.elements,g=f.length;d&&g--;b&&(f=Array.prototype.slice.call(f,0),f.reverse());for(d=0;d<g;d++)if(c(f[d]))return f[d];return null},isContextFor:function(a){var d;return a in CKEDITOR.dtd.$block?(d=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!d.getDtd()[a]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}};
CKEDITOR.dom.text=function(a,d){"string"==typeof a&&(a=(d?d.$:document).createTextNode(a));this.$=a};CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node;
CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(a){this.$.nodeValue=a},split:function(a){var d=this.$.parentNode,b=d.childNodes.length,c=this.getLength(),f=this.getDocument(),g=new CKEDITOR.dom.text(this.$.splitText(a),f);d.childNodes.length==b&&(a>=c?(g=f.createText(""),g.insertAfter(this)):(a=f.createText(""),a.insertAfter(g),a.remove()));return g},substring:function(a,
d){return"number"!=typeof d?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,d)}});
(function(){function a(a,c,d){var g=a.serializable,k=c[d?"endContainer":"startContainer"],l=d?"endOffset":"startOffset",m=g?c.document.getById(a.startNode):a.startNode;a=g?c.document.getById(a.endNode):a.endNode;k.equals(m.getPrevious())?(c.startOffset=c.startOffset-k.getLength()-a.getPrevious().getLength(),k=a.getNext()):k.equals(a.getPrevious())&&(c.startOffset-=k.getLength(),k=a.getNext());k.equals(m.getParent())&&c[l]++;k.equals(a.getParent())&&c[l]++;c[d?"endContainer":"startContainer"]=k;return c}
CKEDITOR.dom.rangeList=function(a){if(a instanceof CKEDITOR.dom.rangeList)return a;a?a instanceof CKEDITOR.dom.range&&(a=[a]):a=[];return CKEDITOR.tools.extend(a,d)};var d={createIterator:function(){var a=this,c=CKEDITOR.dom.walker.bookmark(),d=[],g;return{getNextRange:function(k){g=void 0===g?0:g+1;var l=a[g];if(l&&1<a.length){if(!g)for(var m=a.length-1;0<=m;m--)d.unshift(a[m].createBookmark(!0));if(k)for(var u=0;a[g+u+1];){var e=l.document;k=0;m=e.getById(d[u].endNode);for(e=e.getById(d[u+1].startNode);;){m=
m.getNextSourceNode(!1);if(e.equals(m))k=1;else if(c(m)||m.type==CKEDITOR.NODE_ELEMENT&&m.isBlockBoundary())continue;break}if(!k)break;u++}for(l.moveToBookmark(d.shift());u--;)m=a[++g],m.moveToBookmark(d.shift()),l.setEnd(m.endContainer,m.endOffset)}return l}}},createBookmarks:function(b){for(var c=[],d,g=0;g<this.length;g++){c.push(d=this[g].createBookmark(b,!0));for(var k=g+1;k<this.length;k++)this[k]=a(d,this[k]),this[k]=a(d,this[k],!0)}return c},createBookmarks2:function(a){for(var c=[],d=0;d<
this.length;d++)c.push(this[d].createBookmark2(a));return c},moveToBookmarks:function(a){for(var c=0;c<this.length;c++)this[c].moveToBookmark(a[c])}}})();
(function(){function a(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function d(b){var c=CKEDITOR.skin["ua_"+b],d=CKEDITOR.env;if(c)for(var c=c.split(",").sort(function(a,b){return a>b?-1:1}),f=0,g;f<c.length;f++)if(g=c[f],d.ie&&(g.replace(/^ie/,"")==d.version||d.quirks&&"iequirks"==g)&&(g="ie"),d[g]){b+="_"+c[f];break}return CKEDITOR.getUrl(a()+b+".css")}function b(a,b){g[a]||(CKEDITOR.document.appendStyleSheet(d(a)),g[a]=1);b&&b()}function c(a){var b=
a.getById(k);b||(b=a.getHead().append("style"),b.setAttribute("id",k),b.setAttribute("type","text/css"));return b}function f(a,b,c){var d,f,g;if(CKEDITOR.env.webkit)for(b=b.split("}").slice(0,-1),f=0;f<b.length;f++)b[f]=b[f].split("{");for(var k=0;k<a.length;k++)if(CKEDITOR.env.webkit)for(f=0;f<b.length;f++){g=b[f][1];for(d=0;d<c.length;d++)g=g.replace(c[d][0],c[d][1]);a[k].$.sheet.addRule(b[f][0],g)}else{g=b;for(d=0;d<c.length;d++)g=g.replace(c[d][0],c[d][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?
a[k].$.styleSheet.cssText+=g:a[k].$.innerHTML+=g}}var g={};CKEDITOR.skin={path:a,loadPart:function(c,d){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(a()+"skin.js"),function(){b(c,d)}):b(c,d)},getPath:function(a){return CKEDITOR.getUrl(d(a))},icons:{},addIcon:function(a,b,c,d){a=a.toLowerCase();this.icons[a]||(this.icons[a]={path:b,offset:c||0,bgsize:d||"16px"})},getIconStyle:function(a,b,c,d,f){var g;a&&(a=a.toLowerCase(),b&&(g=this.icons[a+"-rtl"]),
g||(g=this.icons[a]));a=c||g&&g.path||"";d=d||g&&g.offset;f=f||g&&g.bgsize||"16px";a&&(a=a.replace(/'/g,"\\'"));return a&&"background-image:url('"+CKEDITOR.getUrl(a)+"');background-position:0 "+d+"px;background-size:"+f+";"}};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(a){var b=c(CKEDITOR.document);return(this.setUiColor=function(a){this.uiColor=a;var c=CKEDITOR.skin.chameleon,d="",g="";"function"==typeof c&&(d=c(this,"editor"),g=
c(this,"panel"));a=[[m,a]];f([b],d,a);f(l,g,a)}).call(this,a)}});var k="cke_ui_color",l=[],m=/\$color/g;CKEDITOR.on("instanceLoaded",function(a){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var b=a.editor;a=function(a){a=(a.data[0]||a.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!a.getById("cke_ui_color")){a=c(a);l.push(a);var d=b.getUiColor();d&&f([a],CKEDITOR.skin.chameleon(b,"panel"),[[m,d]])}};b.on("panelShow",a);b.on("menuShow",a);b.config.uiColor&&b.setUiColor(b.config.uiColor)}})})();
(function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var a=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"\x3e\x3c/div\x3e',CKEDITOR.document);a.appendTo(CKEDITOR.document.getHead());try{var d=a.getComputedStyle("border-top-color"),b=a.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!d||d!=b)}catch(c){CKEDITOR.env.hc=!1}a.remove()}CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc");CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}");
CKEDITOR.status="loaded";CKEDITOR.fireOnce("loaded");if(a=CKEDITOR._.pending)for(delete CKEDITOR._.pending,d=0;d<a.length;d++)CKEDITOR.editor.prototype.constructor.apply(a[d][0],a[d][1]),CKEDITOR.add(a[d][0])})();/*
 Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
CKEDITOR.skin.name="moono";CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko";CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8";
CKEDITOR.skin.chameleon=function(){var b=function(){return function(b,e){for(var a=b.match(/[^#]./g),c=0;3>c;c++){var f=c,d;d=parseInt(a[c],16);d=("0"+(0>e?0|d*(1+e):0|d+(255-d)*e).toString(16)).slice(-2);a[f]=d}return"#"+a.join("")}}(),c=function(){var b=new CKEDITOR.template("background:#{to};background-image:linear-gradient(to bottom,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType\x3d0,startColorstr\x3d'{from}',endColorstr\x3d'{to}');");return function(c,a){return b.output({from:c,
to:a})}}(),f={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),
panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};
return function(g,e){var a=g.uiColor,a={id:"."+g.id,defaultBorder:b(a,-.1),defaultGradient:c(b(a,.9),a),lightGradient:c(b(a,1),b(a,.7)),mediumGradient:c(b(a,.8),b(a,.5)),ckeButtonOn:c(b(a,.6),b(a,.7)),ckeResizer:b(a,-.4),ckeToolbarSeparator:b(a,.5),ckeColorauto:b(a,.8),dialogBody:b(a,.7),dialogTabSelected:c("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:b(a,-.6),elementsPathBg:a,menubuttonIcon:b(a,.5),menubuttonIconHover:b(a,.3)};return f[e].output(a).replace(/\[/g,"{").replace(/\]/g,
"}")}}();CKEDITOR.plugins.add("dialogui",{onLoad:function(){var h=function(b){this._||(this._={});this._["default"]=this._.initValue=b["default"]||"";this._.required=b.required||!1;for(var a=[this._],d=1;d<arguments.length;d++)a.push(arguments[d]);a.push(!0);CKEDITOR.tools.extend.apply(CKEDITOR.tools,a);return this._},v={build:function(b,a,d){return new CKEDITOR.ui.dialog.textInput(b,a,d)}},n={build:function(b,a,d){return new CKEDITOR.ui.dialog[a.type](b,a,d)}},q={isChanged:function(){return this.getValue()!=
this.getInitValue()},reset:function(b){this.setValue(this.getInitValue(),b)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},r=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(b,a){this._.domOnChangeRegistered||(b.on("load",function(){this.getInputElement().on("change",function(){b.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},
this)},this),this._.domOnChangeRegistered=!0);this.on("change",a)}},!0),x=/^on([A-Z]\w+)/,t=function(b){for(var a in b)(x.test(a)||"title"==a||"type"==a)&&delete b[a];return b},w=function(b){b=b.data.getKeystroke();b==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):b==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(b,a,d,f){if(!(4>arguments.length)){var c=h.call(this,a);c.labelId=CKEDITOR.tools.getNextId()+
"_label";this._.children=[];var e={role:a.role||"presentation"};a.includeLabel&&(e["aria-labelledby"]=c.labelId);CKEDITOR.ui.dialog.uiElement.call(this,b,a,d,"div",null,e,function(){var e=[],g=a.required?" cke_required":"";"horizontal"!=a.labelLayout?e.push('\x3clabel class\x3d"cke_dialog_ui_labeled_label'+g+'" ',' id\x3d"'+c.labelId+'"',c.inputId?' for\x3d"'+c.inputId+'"':"",(a.labelStyle?' style\x3d"'+a.labelStyle+'"':"")+"\x3e",a.label,"\x3c/label\x3e",'\x3cdiv class\x3d"cke_dialog_ui_labeled_content"',
a.controlStyle?' style\x3d"'+a.controlStyle+'"':"",' role\x3d"presentation"\x3e',f.call(this,b,a),"\x3c/div\x3e"):(g={type:"hbox",widths:a.widths,padding:0,children:[{type:"html",html:'\x3clabel class\x3d"cke_dialog_ui_labeled_label'+g+'" id\x3d"'+c.labelId+'" for\x3d"'+c.inputId+'"'+(a.labelStyle?' style\x3d"'+a.labelStyle+'"':"")+"\x3e"+CKEDITOR.tools.htmlEncode(a.label)+"\x3c/label\x3e"},{type:"html",html:'\x3cspan class\x3d"cke_dialog_ui_labeled_content"'+(a.controlStyle?' style\x3d"'+a.controlStyle+
'"':"")+"\x3e"+f.call(this,b,a)+"\x3c/span\x3e"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(b,g,e));return e.join("")})}},textInput:function(b,a,d){if(!(3>arguments.length)){h.call(this,a);var f=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",c={"class":"cke_dialog_ui_input_"+a.type,id:f,type:a.type};a.validate&&(this.validate=a.validate);a.maxLength&&(c.maxlength=a.maxLength);a.size&&(c.size=a.size);a.inputStyle&&(c.style=a.inputStyle);var e=this,m=!1;b.on("load",function(){e.getInputElement().on("keydown",
function(a){13==a.data.getKeystroke()&&(m=!0)});e.getInputElement().on("keyup",function(a){13==a.data.getKeystroke()&&m&&(b.getButton("ok")&&setTimeout(function(){b.getButton("ok").click()},0),m=!1);e.bidi&&w.call(e,a)},null,null,1E3)});CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){var b=['\x3cdiv class\x3d"cke_dialog_ui_input_',a.type,'" role\x3d"presentation"'];a.width&&b.push('style\x3d"width:'+a.width+'" ');b.push("\x3e\x3cinput ");c["aria-labelledby"]=this._.labelId;this._.required&&
(c["aria-required"]=this._.required);for(var e in c)b.push(e+'\x3d"'+c[e]+'" ');b.push(" /\x3e\x3c/div\x3e");return b.join("")})}},textarea:function(b,a,d){if(!(3>arguments.length)){h.call(this,a);var f=this,c=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",e={};a.validate&&(this.validate=a.validate);e.rows=a.rows||5;e.cols=a.cols||20;e["class"]="cke_dialog_ui_input_textarea "+(a["class"]||"");"undefined"!=typeof a.inputStyle&&(e.style=a.inputStyle);a.dir&&(e.dir=a.dir);if(f.bidi)b.on("load",
function(){f.getInputElement().on("keyup",w)},f);CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){e["aria-labelledby"]=this._.labelId;this._.required&&(e["aria-required"]=this._.required);var a=['\x3cdiv class\x3d"cke_dialog_ui_input_textarea" role\x3d"presentation"\x3e\x3ctextarea id\x3d"',c,'" '],b;for(b in e)a.push(b+'\x3d"'+CKEDITOR.tools.htmlEncode(e[b])+'" ');a.push("\x3e",CKEDITOR.tools.htmlEncode(f._["default"]),"\x3c/textarea\x3e\x3c/div\x3e");return a.join("")})}},checkbox:function(b,
a,d){if(!(3>arguments.length)){var f=h.call(this,a,{"default":!!a["default"]});a.validate&&(this.validate=a.validate);CKEDITOR.ui.dialog.uiElement.call(this,b,a,d,"span",null,null,function(){var c=CKEDITOR.tools.extend({},a,{id:a.id?a.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),e=[],d=CKEDITOR.tools.getNextId()+"_label",g={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":d};t(c);a["default"]&&(g.checked="checked");"undefined"!=typeof c.inputStyle&&(c.style=c.inputStyle);
f.checkbox=new CKEDITOR.ui.dialog.uiElement(b,c,e,"input",null,g);e.push(' \x3clabel id\x3d"',d,'" for\x3d"',g.id,'"'+(a.labelStyle?' style\x3d"'+a.labelStyle+'"':"")+"\x3e",CKEDITOR.tools.htmlEncode(a.label),"\x3c/label\x3e");return e.join("")})}},radio:function(b,a,d){if(!(3>arguments.length)){h.call(this,a);this._["default"]||(this._["default"]=this._.initValue=a.items[0][1]);a.validate&&(this.validate=a.validate);var f=[],c=this;a.role="radiogroup";a.includeLabel=!0;CKEDITOR.ui.dialog.labeledElement.call(this,
b,a,d,function(){for(var e=[],d=[],g=(a.id?a.id:CKEDITOR.tools.getNextId())+"_radio",k=0;k<a.items.length;k++){var l=a.items[k],h=void 0!==l[2]?l[2]:l[0],n=void 0!==l[1]?l[1]:l[0],p=CKEDITOR.tools.getNextId()+"_radio_input",q=p+"_label",p=CKEDITOR.tools.extend({},a,{id:p,title:null,type:null},!0),h=CKEDITOR.tools.extend({},p,{title:h},!0),r={type:"radio","class":"cke_dialog_ui_radio_input",name:g,value:n,"aria-labelledby":q},u=[];c._["default"]==n&&(r.checked="checked");t(p);t(h);"undefined"!=typeof p.inputStyle&&
(p.style=p.inputStyle);p.keyboardFocusable=!0;f.push(new CKEDITOR.ui.dialog.uiElement(b,p,u,"input",null,r));u.push(" ");new CKEDITOR.ui.dialog.uiElement(b,h,u,"label",null,{id:q,"for":r.id},l[0]);e.push(u.join(""))}new CKEDITOR.ui.dialog.hbox(b,f,e,d);return d.join("")});this._.children=f}},button:function(b,a,d){if(arguments.length){"function"==typeof a&&(a=a(b.getParentEditor()));h.call(this,a,{disabled:a.disabled||!1});CKEDITOR.event.implementOn(this);var f=this;b.on("load",function(){var a=this.getElement();
(function(){a.on("click",function(a){f.click();a.data.preventDefault()});a.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(f.click(),a.data.preventDefault())})})();a.unselectable()},this);var c=CKEDITOR.tools.extend({},a);delete c.style;var e=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,b,c,d,"a",null,{style:a.style,href:"javascript:void(0)",title:a.label,hidefocus:"true","class":a["class"],role:"button","aria-labelledby":e},'\x3cspan id\x3d"'+e+'" class\x3d"cke_dialog_ui_button"\x3e'+
CKEDITOR.tools.htmlEncode(a.label)+"\x3c/span\x3e")}},select:function(b,a,d){if(!(3>arguments.length)){var f=h.call(this,a);a.validate&&(this.validate=a.validate);f.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){var c=CKEDITOR.tools.extend({},a,{id:a.id?a.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),e=[],d=[],g={id:f.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};e.push('\x3cdiv class\x3d"cke_dialog_ui_input_',
a.type,'" role\x3d"presentation"');a.width&&e.push('style\x3d"width:'+a.width+'" ');e.push("\x3e");void 0!==a.size&&(g.size=a.size);void 0!==a.multiple&&(g.multiple=a.multiple);t(c);for(var k=0,l;k<a.items.length&&(l=a.items[k]);k++)d.push('\x3coption value\x3d"',CKEDITOR.tools.htmlEncode(void 0!==l[1]?l[1]:l[0]).replace(/"/g,"\x26quot;"),'" /\x3e ',CKEDITOR.tools.htmlEncode(l[0]));"undefined"!=typeof c.inputStyle&&(c.style=c.inputStyle);f.select=new CKEDITOR.ui.dialog.uiElement(b,c,e,"select",null,
g,d.join(""));e.push("\x3c/div\x3e");return e.join("")})}},file:function(b,a,d){if(!(3>arguments.length)){void 0===a["default"]&&(a["default"]="");var f=CKEDITOR.tools.extend(h.call(this,a),{definition:a,buttons:[]});a.validate&&(this.validate=a.validate);b.on("load",function(){CKEDITOR.document.getById(f.frameId).getParent().addClass("cke_dialog_ui_input_file")});CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){f.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var b=['\x3ciframe frameborder\x3d"0" allowtransparency\x3d"0" class\x3d"cke_dialog_ui_input_file" role\x3d"presentation" id\x3d"',
f.frameId,'" title\x3d"',a.label,'" src\x3d"javascript:void('];b.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0");b.push(')"\x3e\x3c/iframe\x3e');return b.join("")})}},fileButton:function(b,a,d){var f=this;if(!(3>arguments.length)){h.call(this,a);a.validate&&(this.validate=a.validate);var c=CKEDITOR.tools.extend({},a),e=c.onClick;c.className=(c.className?c.className+" ":"")+"cke_dialog_ui_button";c.onClick=function(c){var d=
a["for"];e&&!1===e.call(this,c)||(b.getContentElement(d[0],d[1]).submit(),this.disable())};b.on("load",function(){b.getContentElement(a["for"][0],a["for"][1])._.buttons.push(f)});CKEDITOR.ui.dialog.button.call(this,b,c,d)}},html:function(){var b=/^\s*<[\w:]+\s+([^>]*)?>/,a=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,d=/\/$/;return function(f,c,e){if(!(3>arguments.length)){var m=[],g=c.html;"\x3c"!=g.charAt(0)&&(g="\x3cspan\x3e"+g+"\x3c/span\x3e");var k=c.focus;if(k){var l=this.focus;this.focus=function(){("function"==
typeof k?k:l).call(this);this.fire("focus")};c.isFocusable&&(this.isFocusable=this.isFocusable);this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,f,c,m,"span",null,null,"");m=m.join("").match(b);g=g.match(a)||["","",""];d.test(g[1])&&(g[1]=g[1].slice(0,-1),g[2]="/"+g[2]);e.push([g[1]," ",m[1]||"",g[2]].join(""))}}}(),fieldset:function(b,a,d,f,c){var e=c.label;this._={children:a};CKEDITOR.ui.dialog.uiElement.call(this,b,c,f,"fieldset",null,null,function(){var a=[];e&&a.push("\x3clegend"+
(c.labelStyle?' style\x3d"'+c.labelStyle+'"':"")+"\x3e"+e+"\x3c/legend\x3e");for(var b=0;b<d.length;b++)a.push(d[b]);return a.join("")})}},!0);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(b){var a=CKEDITOR.document.getById(this._.labelId);1>a.getChildCount()?(new CKEDITOR.dom.text(b,CKEDITOR.document)).appendTo(a):a.getChild(0).$.nodeValue=b;return this},getLabel:function(){var b=
CKEDITOR.document.getById(this._.labelId);return!b||1>b.getChildCount()?"":b.getChild(0).getText()},eventProcessors:r},!0);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var b=this.getElement();b&&b.removeClass("cke_disabled")},disable:function(){this._.disabled=!0;this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},
isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(b,a){this.on("click",function(){a.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},
focus:function(){var b=this.selectParentTab();setTimeout(function(){var a=b.getInputElement();a&&a.$.focus()},0)},select:function(){var b=this.selectParentTab();setTimeout(function(){var a=b.getInputElement();a&&(a.$.focus(),a.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(b){if(this.bidi){var a=b&&b.charAt(0);(a="‪"==a?"ltr":"‫"==a?"rtl":null)&&(b=b.slice(1));this.setDirectionMarker(a)}b||(b="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},
getValue:function(){var b=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&b){var a=this.getDirectionMarker();a&&(b=("ltr"==a?"‪":"‫")+b)}return b},setDirectionMarker:function(b){var a=this.getInputElement();b?a.setAttributes({dir:b,"data-cke-dir-marker":b}):this.getDirectionMarker()&&a.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},q,!0);CKEDITOR.ui.dialog.textarea.prototype=
new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(b,a,d){var f=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),c=this.getInputElement().$;f.$.text=b;f.$.value=void 0===a||null===a?b:a;void 0===d||null===d?CKEDITOR.env.ie?c.add(f.$):c.add(f.$,null):c.add(f.$,d);return this},remove:function(b){this.getInputElement().$.remove(b);
return this},clear:function(){for(var b=this.getInputElement().$;0<b.length;)b.remove(0);return this},keyboardFocusable:!0},q,!0);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(b,a){this.getInputElement().$.checked=b;!a&&this.fire("change",{value:b})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(b,
a){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return r.onChange.apply(this,arguments);b.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$;"checked"==b.propertyName&&this.fire("change",{value:a.$.checked})},this)},this);this.on("change",a);return null}},keyboardFocusable:!0},q,!0);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(b,a){for(var d=this._.children,f,c=0;c<d.length&&(f=d[c]);c++)f.getElement().$.checked=
f.getValue()==b;!a&&this.fire("change",{value:b})},getValue:function(){for(var b=this._.children,a=0;a<b.length;a++)if(b[a].getElement().$.checked)return b[a].getValue();return null},accessKeyUp:function(){var b=this._.children,a;for(a=0;a<b.length;a++)if(b[a].getElement().$.checked){b[a].getElement().focus();return}b[0].getElement().focus()},eventProcessors:{onChange:function(b,a){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return r.onChange.apply(this,arguments);b.on("load",function(){for(var a=
this._.children,b=this,c=0;c<a.length;c++)a[c].getElement().on("propertychange",function(a){a=a.data.$;"checked"==a.propertyName&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})})},this);this.on("change",a);return null}}},q,!0);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,q,{getInputElement:function(){var b=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<b.$.forms.length?new CKEDITOR.dom.element(b.$.forms[0].elements[0]):
this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(b){var a=/^on([A-Z]\w+)/,d,f=function(a,b,c,d){a.on("formLoaded",function(){a.getInputElement().on(c,d,a)})},c;for(c in b)if(d=c.match(a))this.eventProcessors[c]?this.eventProcessors[c].call(this,this._.dialog,b[c]):f(this,this._.dialog,d[1].toLowerCase(),b[c]);return this},reset:function(){function b(){d.$.open();
var b="";f.size&&(b=f.size-(CKEDITOR.env.ie?7:0));var h=a.frameId+"_input";d.$.write(['\x3chtml dir\x3d"'+g+'" lang\x3d"'+k+'"\x3e\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e\x3cbody style\x3d"margin: 0; overflow: hidden; background: transparent;"\x3e','\x3cform enctype\x3d"multipart/form-data" method\x3d"POST" dir\x3d"'+g+'" lang\x3d"'+k+'" action\x3d"',CKEDITOR.tools.htmlEncode(f.action),'"\x3e\x3clabel id\x3d"',a.labelId,'" for\x3d"',h,'" style\x3d"display:none"\x3e',CKEDITOR.tools.htmlEncode(f.label),
'\x3c/label\x3e\x3cinput style\x3d"width:100%" id\x3d"',h,'" aria-labelledby\x3d"',a.labelId,'" type\x3d"file" name\x3d"',CKEDITOR.tools.htmlEncode(f.id||"cke_upload"),'" size\x3d"',CKEDITOR.tools.htmlEncode(0<b?b:""),'" /\x3e\x3c/form\x3e\x3c/body\x3e\x3c/html\x3e\x3cscript\x3e',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+e+");","window.onbeforeunload \x3d function() {window.parent.CKEDITOR.tools.callFunction("+m+")}","\x3c/script\x3e"].join(""));
d.$.close();for(b=0;b<c.length;b++)c[b].enable()}var a=this._,d=CKEDITOR.document.getById(a.frameId).getFrameDocument(),f=a.definition,c=a.buttons,e=this.formLoadedNumber,m=this.formUnloadNumber,g=a.dialog._.editor.lang.dir,k=a.dialog._.editor.langCode;e||(e=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),m=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(e);
CKEDITOR.tools.removeFunction(m)}));CKEDITOR.env.gecko?setTimeout(b,500):b()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(b,a){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",a)}},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.fileButton.prototype=
new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",v);CKEDITOR.dialog.addUIElement("password",v);CKEDITOR.dialog.addUIElement("textarea",n);CKEDITOR.dialog.addUIElement("checkbox",n);CKEDITOR.dialog.addUIElement("radio",n);CKEDITOR.dialog.addUIElement("button",n);CKEDITOR.dialog.addUIElement("select",n);CKEDITOR.dialog.addUIElement("file",n);CKEDITOR.dialog.addUIElement("fileButton",n);CKEDITOR.dialog.addUIElement("html",
n);CKEDITOR.dialog.addUIElement("fieldset",{build:function(b,a,d){for(var f=a.children,c,e=[],h=[],g=0;g<f.length&&(c=f[g]);g++){var k=[];e.push(k);h.push(CKEDITOR.dialog._.uiElementBuilders[c.type].build(b,c,k))}return new CKEDITOR.ui.dialog[a.type](b,h,e,d,a)}})}});CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;CKEDITOR.DIALOG_STATE_IDLE=1;CKEDITOR.DIALOG_STATE_BUSY=2;
(function(){function x(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+a,c=b-1;c>b-a;c--)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function A(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),c=b+1;c<b+a;c++)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function K(a,b){for(var c=a.$.getElementsByTagName("input"),
d=0,e=c.length;d<e;d++){var f=new CKEDITOR.dom.element(c[d]);"text"==f.getAttribute("type").toLowerCase()&&(b?(f.setAttribute("value",f.getCustomData("fake_value")||""),f.removeCustomData("fake_value")):(f.setCustomData("fake_value",f.getAttribute("value")),f.setAttribute("value","")))}}function T(a,b){var c=this.getInputElement();c&&(a?c.removeAttribute("aria-invalid"):c.setAttribute("aria-invalid",!0));a||(this.select?this.select():this.focus());b&&alert(b);this.fire("validated",{valid:a,msg:b})}
function U(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}function V(a){var b=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",W).output({id:CKEDITOR.tools.getNextNumber(),editorId:a.id,langDir:a.lang.dir,langCode:a.langCode,editorDialogClass:"cke_editor_"+a.name.replace(/\./g,"\\.")+"_dialog",closeTitle:a.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),c=b.getChild([0,0,0,0,0]),d=c.getChild(0),e=c.getChild(1);a.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(c);
!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(a="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('\x3ciframe frameBorder\x3d"0" class\x3d"cke_iframe_shim" src\x3d"'+a+'" tabIndex\x3d"-1"\x3e\x3c/iframe\x3e').appendTo(c.getParent()));d.unselectable();e.unselectable();return{element:b,parts:{dialog:b.getChild(0),title:d,close:e,tabs:c.getChild(2),contents:c.getChild([3,0,0,0]),
footer:c.getChild([3,0,1,0])}}}function L(a,b,c){this.element=b;this.focusIndex=c;this.tabIndex=0;this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()};this.focus=function(){a._.currentFocusIndex=this.focusIndex;this.element.focus()};b.on("keydown",function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")});b.on("focus",function(){this.fire("mouseover")});b.on("blur",function(){this.fire("mouseout")})}function X(a){function b(){a.layout()}var c=CKEDITOR.document.getWindow();
c.on("resize",b);a.on("hide",function(){c.removeListener("resize",b)})}function M(a,b){this._={dialog:a};CKEDITOR.tools.extend(this,b)}function Y(a){function b(b){var c=a.getSize(),k=CKEDITOR.document.getWindow().getViewPaneSize(),q=b.data.$.screenX,n=b.data.$.screenY,r=q-d.x,l=n-d.y;d={x:q,y:n};e.x+=r;e.y+=l;a.move(e.x+h[3]<g?-h[3]:e.x-h[1]>k.width-c.width-g?k.width-c.width+("rtl"==f.lang.dir?0:h[1]):e.x,e.y+h[0]<g?-h[0]:e.y-h[2]>k.height-c.height-g?k.height-c.height+h[2]:e.y,1);b.data.preventDefault()}
function c(){CKEDITOR.document.removeListener("mousemove",b);CKEDITOR.document.removeListener("mouseup",c);if(CKEDITOR.env.ie6Compat){var a=u.getChild(0).getFrameDocument();a.removeListener("mousemove",b);a.removeListener("mouseup",c)}}var d=null,e=null,f=a.getParentEditor(),g=f.config.dialog_magnetDistance,h=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof g&&(g=20);a.parts.title.on("mousedown",function(g){d={x:g.data.$.screenX,y:g.data.$.screenY};CKEDITOR.document.on("mousemove",b);CKEDITOR.document.on("mouseup",
c);e=a.getPosition();if(CKEDITOR.env.ie6Compat){var f=u.getChild(0).getFrameDocument();f.on("mousemove",b);f.on("mouseup",c)}g.data.preventDefault()},a)}function Z(a){function b(b){var c="rtl"==f.lang.dir,n=k.width,q=k.height,G=n+(b.data.$.screenX-m.x)*(c?-1:1)*(a._.moved?1:2),H=q+(b.data.$.screenY-m.y)*(a._.moved?1:2),B=a._.element.getFirst(),B=c&&B.getComputedStyle("right"),C=a.getPosition();C.y+H>p.height&&(H=p.height-C.y);(c?B:C.x)+G>p.width&&(G=p.width-(c?B:C.x));if(e==CKEDITOR.DIALOG_RESIZE_WIDTH||
e==CKEDITOR.DIALOG_RESIZE_BOTH)n=Math.max(d.minWidth||0,G-g);if(e==CKEDITOR.DIALOG_RESIZE_HEIGHT||e==CKEDITOR.DIALOG_RESIZE_BOTH)q=Math.max(d.minHeight||0,H-h);a.resize(n,q);a._.moved||a.layout();b.data.preventDefault()}function c(){CKEDITOR.document.removeListener("mouseup",c);CKEDITOR.document.removeListener("mousemove",b);q&&(q.remove(),q=null);if(CKEDITOR.env.ie6Compat){var a=u.getChild(0).getFrameDocument();a.removeListener("mouseup",c);a.removeListener("mousemove",b)}}var d=a.definition,e=d.resizable;
if(e!=CKEDITOR.DIALOG_RESIZE_NONE){var f=a.getParentEditor(),g,h,p,m,k,q,n=CKEDITOR.tools.addFunction(function(e){k=a.getSize();var d=a.parts.contents;d.$.getElementsByTagName("iframe").length&&(q=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_dialog_resize_cover" style\x3d"height: 100%; position: absolute; width: 100%;"\x3e\x3c/div\x3e'),d.append(q));h=k.height-a.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks));g=k.width-a.parts.contents.getSize("width",
1);m={x:e.screenX,y:e.screenY};p=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",b);CKEDITOR.document.on("mouseup",c);CKEDITOR.env.ie6Compat&&(d=u.getChild(0).getFrameDocument(),d.on("mousemove",b),d.on("mouseup",c));e.preventDefault&&e.preventDefault()});a.on("load",function(){var b="";e==CKEDITOR.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":e==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical");b=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_resizer'+
b+" cke_resizer_"+f.lang.dir+'" title\x3d"'+CKEDITOR.tools.htmlEncode(f.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+n+', event )"\x3e'+("ltr"==f.lang.dir?"◢":"◣")+"\x3c/div\x3e");a.parts.footer.append(b,1)});f.on("destroy",function(){CKEDITOR.tools.removeFunction(n)})}}function I(a){a.data.preventDefault(1)}function N(a){var b=CKEDITOR.document.getWindow(),c=a.config,d=c.dialog_backgroundCoverColor||"white",e=c.dialog_backgroundCoverOpacity,f=c.baseFloatZIndex,c=CKEDITOR.tools.genKey(d,
e,f),g=z[c];g?g.show():(f=['\x3cdiv tabIndex\x3d"-1" style\x3d"position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",f,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+d,'" class\x3d"cke_dialog_background_cover"\x3e'],CKEDITOR.env.ie6Compat&&(d="\x3chtml\x3e\x3cbody style\x3d\\'background-color:"+d+";\\'\x3e\x3c/body\x3e\x3c/html\x3e",f.push('\x3ciframe hidefocus\x3d"true" frameborder\x3d"0" id\x3d"cke_dialog_background_iframe" src\x3d"javascript:'),f.push("void((function(){"+
encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+d+"' );document.close();")+"})())"),f.push('" style\x3d"position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity\x3d0)"\x3e\x3c/iframe\x3e')),f.push("\x3c/div\x3e"),g=CKEDITOR.dom.element.createFromHtml(f.join("")),g.setOpacity(void 0!==e?e:.5),g.on("keydown",I),g.on("keypress",I),g.on("keyup",I),g.appendTo(CKEDITOR.document.getBody()),z[c]=g);a.focusManager.add(g);
u=g;a=function(){var a=b.getViewPaneSize();g.setStyles({width:a.width+"px",height:a.height+"px"})};var h=function(){var a=b.getScrollPosition(),c=CKEDITOR.dialog._.currentTop;g.setStyles({left:a.x+"px",top:a.y+"px"});if(c){do a=c.getPosition(),c.move(a.x,a.y);while(c=c._.parentDialog)}};J=a;b.on("resize",a);a();CKEDITOR.env.mac&&CKEDITOR.env.webkit||g.focus();if(CKEDITOR.env.ie6Compat){var p=function(){h();arguments.callee.prevScrollHandler.apply(this,arguments)};b.$.setTimeout(function(){p.prevScrollHandler=
window.onscroll||function(){};window.onscroll=p},0);h()}}function O(a){u&&(a.focusManager.remove(u),a=CKEDITOR.document.getWindow(),u.hide(),a.removeListener("resize",J),CKEDITOR.env.ie6Compat&&a.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),J=null)}var v=CKEDITOR.tools.cssLength,W='\x3cdiv class\x3d"cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"dialog" aria-labelledby\x3d"cke_dialog_title_{id}"\x3e\x3ctable class\x3d"cke_dialog '+
CKEDITOR.env.cssClass+' cke_{langDir}" style\x3d"position:absolute" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd role\x3d"presentation"\x3e\x3cdiv class\x3d"cke_dialog_body" role\x3d"presentation"\x3e\x3cdiv id\x3d"cke_dialog_title_{id}" class\x3d"cke_dialog_title" role\x3d"presentation"\x3e\x3c/div\x3e\x3ca id\x3d"cke_dialog_close_button_{id}" class\x3d"cke_dialog_close_button" href\x3d"javascript:void(0)" title\x3d"{closeTitle}" role\x3d"button"\x3e\x3cspan class\x3d"cke_label"\x3eX\x3c/span\x3e\x3c/a\x3e\x3cdiv id\x3d"cke_dialog_tabs_{id}" class\x3d"cke_dialog_tabs" role\x3d"tablist"\x3e\x3c/div\x3e\x3ctable class\x3d"cke_dialog_contents" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_contents_{id}" class\x3d"cke_dialog_contents_body" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_footer_{id}" class\x3d"cke_dialog_footer" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e';
CKEDITOR.dialog=function(a,b){function c(){var a=l._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex});for(var b=a.length,c=0;c<b;c++)a[c].focusIndex=c}function d(a){var b=l._.focusList;a=a||0;if(!(1>b.length)){var c=l._.currentFocusIndex;l._.tabBarMode&&0>a&&(c=0);try{b[c].getInputElement().$.blur()}catch(e){}var d=c,g=1<l._.pageCount;do{d+=a;if(g&&!l._.tabBarMode&&(d==b.length||-1==d)){l._.tabBarMode=!0;l._.tabs[l._.currentTabId][0].focus();
l._.currentFocusIndex=-1;return}d=(d+b.length)%b.length;if(d==c)break}while(a&&!b[d].isFocusable());b[d].focus();"text"==b[d].type&&b[d].select()}}function e(b){if(l==CKEDITOR.dialog._.currentTop){var c=b.data.getKeystroke(),e="rtl"==a.lang.dir,g=[37,38,39,40];q=n=0;if(9==c||c==CKEDITOR.SHIFT+9)d(c==CKEDITOR.SHIFT+9?-1:1),q=1;else if(c==CKEDITOR.ALT+121&&!l._.tabBarMode&&1<l.getPageCount())l._.tabBarMode=!0,l._.tabs[l._.currentTabId][0].focus(),l._.currentFocusIndex=-1,q=1;else if(-1!=CKEDITOR.tools.indexOf(g,
c)&&l._.tabBarMode)c=-1!=CKEDITOR.tools.indexOf([e?39:37,38],c)?x.call(l):A.call(l),l.selectPage(c),l._.tabs[c][0].focus(),q=1;else if(13!=c&&32!=c||!l._.tabBarMode)if(13==c)c=b.data.getTarget(),c.is("a","button","select","textarea")||c.is("input")&&"button"==c.$.type||((c=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(c.click,0,c),q=1),n=1;else if(27==c)(c=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(c.click,0,c):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),n=1;else return;else this.selectPage(this._.currentTabId),
this._.tabBarMode=!1,this._.currentFocusIndex=-1,d(1),q=1;f(b)}}function f(a){q?a.data.preventDefault(1):n&&a.data.stopPropagation()}var g=CKEDITOR.dialog._.dialogDefinitions[b],h=CKEDITOR.tools.clone(aa),p=a.config.dialog_buttonsOrder||"OS",m=a.lang.dir,k={},q,n;("OS"==p&&CKEDITOR.env.mac||"rtl"==p&&"ltr"==m||"ltr"==p&&"rtl"==m)&&h.buttons.reverse();g=CKEDITOR.tools.extend(g(a),h);g=CKEDITOR.tools.clone(g);g=new P(this,g);h=V(a);this._={editor:a,element:h.element,name:b,contentSize:{width:0,height:0},
size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1};this.parts=h.parts;CKEDITOR.tools.setTimeout(function(){a.fire("ariaWidget",this.parts.contents)},0,this);h={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};h["rtl"==m?"right":"left"]=0;this.parts.dialog.setStyles(h);CKEDITOR.event.call(this);this.definition=g=CKEDITOR.fire("dialogDefinition",
{name:b,definition:g},a).definition;if(!("removeDialogTabs"in a._)&&a.config.removeDialogTabs){h=a.config.removeDialogTabs.split(";");for(m=0;m<h.length;m++)if(p=h[m].split(":"),2==p.length){var r=p[0];k[r]||(k[r]=[]);k[r].push(p[1])}a._.removeDialogTabs=k}if(a._.removeDialogTabs&&(k=a._.removeDialogTabs[b]))for(m=0;m<k.length;m++)g.removeContents(k[m]);if(g.onLoad)this.on("load",g.onLoad);if(g.onShow)this.on("show",g.onShow);if(g.onHide)this.on("hide",g.onHide);if(g.onOk)this.on("ok",function(b){a.fire("saveSnapshot");
setTimeout(function(){a.fire("saveSnapshot")},0);!1===g.onOk.call(this,b)&&(b.data.hide=!1)});this.state=CKEDITOR.DIALOG_STATE_IDLE;if(g.onCancel)this.on("cancel",function(a){!1===g.onCancel.call(this,a)&&(a.data.hide=!1)});var l=this,t=function(a){var b=l._.contents,c=!1,d;for(d in b)for(var e in b[d])if(c=a.call(this,b[d][e]))return};this.on("ok",function(a){t(function(b){if(b.validate){var c=b.validate(this),d="string"==typeof c||!1===c;d&&(a.data.hide=!1,a.stop());T.call(b,!d,"string"==typeof c?
c:void 0);return d}})},this,null,0);this.on("cancel",function(b){t(function(c){if(c.isChanged())return a.config.dialog_noConfirmCancel||confirm(a.lang.common.confirmCancel)||(b.data.hide=!1),!0})},this,null,0);this.parts.close.on("click",function(a){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide();a.data.preventDefault()},this);this.changeFocus=d;var y=this._.element;a.focusManager.add(y,1);this.on("show",function(){y.on("keydown",e,this);if(CKEDITOR.env.gecko)y.on("keypress",f,this)});this.on("hide",
function(){y.removeListener("keydown",e);CKEDITOR.env.gecko&&y.removeListener("keypress",f);t(function(a){U.apply(a)})});this.on("iframeAdded",function(a){(new CKEDITOR.dom.document(a.data.iframe.$.contentWindow.document)).on("keydown",e,this,null,0)});this.on("show",function(){c();var b=1<l._.pageCount;a.config.dialog_startupFocusTab&&b?(l._.tabBarMode=!0,l._.tabs[l._.currentTabId][0].focus(),l._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=b?-1:this._.focusList.length-1,g.onFocus?
(b=g.onFocus.call(this))&&b.focus():d(1))},this,null,4294967295);if(CKEDITOR.env.ie6Compat)this.on("load",function(){var a=this.getElement(),b=a.getFirst();b.remove();b.appendTo(a)},this);Y(this);Z(this);(new CKEDITOR.dom.text(g.title,CKEDITOR.document)).appendTo(this.parts.title);for(m=0;m<g.contents.length;m++)(k=g.contents[m])&&this.addPage(k);this.parts.tabs.on("click",function(a){var b=a.data.getTarget();b.hasClass("cke_dialog_tab")&&(b=b.$.id,this.selectPage(b.substring(4,b.lastIndexOf("_"))),
this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,d(1)),a.data.preventDefault())},this);m=[];k=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:g.buttons},m).getChild();this.parts.footer.setHtml(m.join(""));for(m=0;m<k.length;m++)this._.buttons[k[m].id]=k[m]};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:function(){return function(a,b){this._.contentSize&&this._.contentSize.width==
a&&this._.contentSize.height==b||(CKEDITOR.dialog.fire("resize",{dialog:this,width:a,height:b},this._.editor),this.fire("resize",{width:a,height:b},this._.editor),this.parts.contents.setStyles({width:a+"px",height:b+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:a,height:b})}}(),getSize:function(){var a=this._.element.getFirst();
return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(a,b,c){var d=this._.element.getFirst(),e="rtl"==this._.editor.lang.dir,f="fixed"==d.getComputedStyle("position");CKEDITOR.env.ie&&d.setStyle("zoom","100%");f&&this._.position&&this._.position.x==a&&this._.position.y==b||(this._.position={x:a,y:b},f||(f=CKEDITOR.document.getWindow().getScrollPosition(),a+=f.x,b+=f.y),e&&(f=this.getSize(),a=CKEDITOR.document.getWindow().getViewPaneSize().width-f.width-a),b={top:(0<b?b:0)+"px"},
b[e?"right":"left"]=(0<a?a:0)+"px",d.setStyles(b),c&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var a=this._.element,b=this.definition;a.getParent()&&a.getParent().equals(CKEDITOR.document.getBody())?a.setStyle("display","block"):a.appendTo(CKEDITOR.document.getBody());this.resize(this._.contentSize&&this._.contentSize.width||b.width||b.minWidth,this._.contentSize&&this._.contentSize.height||b.height||b.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);
null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex);this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,N(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this);
a.on("keydown",Q);a.on("keyup",R);this._.hasFocus=!1;for(var c in b.contents)if(b.contents[c]){var a=b.contents[c],d=this._.tabs[a.id],e=a.requiredContent,f=0;if(d){for(var g in this._.contents[a.id]){var h=this._.contents[a.id][g];"hbox"!=h.type&&"vbox"!=h.type&&h.getInputElement()&&(h.requiredContent&&!this._.editor.activeFilter.check(h.requiredContent)?h.disable():(h.enable(),f++))}!f||e&&!this._.editor.activeFilter.check(e)?d[0].addClass("cke_dialog_tab_disabled"):d[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout();
X(this);this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this._.parentDialog||this._.editor.focusManager.lock();this.foreach(function(a){a.setInitValue&&a.setInitValue()})},100,this)},layout:function(){var a=this.parts.dialog,b=this.getSize(),c=CKEDITOR.document.getWindow().getViewPaneSize(),d=(c.width-b.width)/2,e=(c.height-b.height)/2;CKEDITOR.env.ie6Compat||(b.height+(0<e?e:0)>c.height||
b.width+(0<d?d:0)>c.width?a.setStyle("position","absolute"):a.setStyle("position","fixed"));this.move(this._.moved?this._.position.x:d,this._.moved?this._.position.y:e)},foreach:function(a){for(var b in this._.contents)for(var c in this._.contents[b])a.call(this,this._.contents[b][c]);return this},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){this.foreach(a);return this}}(),setupContent:function(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},
commitContent:function(){var a=arguments;this.foreach(function(b){CKEDITOR.env.ie&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur();b.commit&&b.commit.apply(b,a)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{});this._.editor.fire("dialogHide",this);this.selectPage(this._.tabIdList[0]);var a=this._.element;a.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");for(ba(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();
if(this._.parentDialog){var b=this._.parentDialog.getElement().getFirst();b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else O(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null;a.removeListener("keydown",Q);a.removeListener("keyup",R);var c=this._.editor;c.focus();setTimeout(function(){c.focusManager.unlock();CKEDITOR.env.iOS&&c.window.focus()},0)}delete this._.parentDialog;
this.foreach(function(a){a.resetInitValue&&a.resetInitValue()});this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(a){if(!a.requiredContent||this._.editor.filter.check(a.requiredContent)){for(var b=[],c=a.label?' title\x3d"'+CKEDITOR.tools.htmlEncode(a.label)+'"':"",d=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%;"},b),e=this._.contents[a.id]={},f=d.getChild(),
g=0;d=f.shift();)d.notAllowed||"hbox"==d.type||"vbox"==d.type||g++,e[d.id]=d,"function"==typeof d.getChild&&f.push.apply(f,d.getChild());g||(a.hidden=!0);b=CKEDITOR.dom.element.createFromHtml(b.join(""));b.setAttribute("role","tabpanel");d=CKEDITOR.env;e="cke_"+a.id+"_"+CKEDITOR.tools.getNextNumber();c=CKEDITOR.dom.element.createFromHtml(['\x3ca class\x3d"cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",c,a.hidden?' style\x3d"display:none"':"",' id\x3d"',e,'"',d.gecko&&!d.hc?"":' href\x3d"javascript:void(0)"',
' tabIndex\x3d"-1" hidefocus\x3d"true" role\x3d"tab"\x3e',a.label,"\x3c/a\x3e"].join(""));b.setAttribute("aria-labelledby",e);this._.tabs[a.id]=[c,b];this._.tabIdList.push(a.id);!a.hidden&&this._.pageCount++;this._.lastTab=c;this.updateStyle();b.setAttribute("name",a.id);b.appendTo(this.parts.contents);c.unselectable();this.parts.tabs.append(c);a.accessKey&&(S(this,this,"CTRL+"+a.accessKey,ca,da),this._.accessKeyMap["CTRL+"+a.accessKey]=a.id)}},selectPage:function(a){if(this._.currentTabId!=a&&!this._.tabs[a][0].hasClass("cke_dialog_tab_disabled")&&
!1!==this.fire("selectPage",{page:a,currentPage:this._.currentTabId})){for(var b in this._.tabs){var c=this._.tabs[b][0],d=this._.tabs[b][1];b!=a&&(c.removeClass("cke_dialog_tab_selected"),d.hide());d.setAttribute("aria-hidden",b!=a)}var e=this._.tabs[a];e[0].addClass("cke_dialog_tab_selected");CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(K(e[1]),e[1].show(),setTimeout(function(){K(e[1],1)},0)):e[1].show();this._.currentTabId=a;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,a)}},
updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(a){var b=this._.tabs[a]&&this._.tabs[a][0];b&&1!=this._.pageCount&&b.isVisible()&&(a==this._.currentTabId&&this.selectPage(x.call(this)),b.hide(),this._.pageCount--,this.updateStyle())},showPage:function(a){if(a=this._.tabs[a]&&this._.tabs[a][0])a.show(),this._.pageCount++,this.updateStyle()},getElement:function(){return this._.element},getName:function(){return this._.name},
getContentElement:function(a,b){var c=this._.contents[a];return c&&c[b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},
getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){if("undefined"==typeof b)b=this._.focusList.length,this._.focusList.push(new L(this,a,b));else{this._.focusList.splice(b,0,new L(this,a,b));for(var c=b+1;c<this._.focusList.length;c++)this._.focusList[c].focusIndex++}},setState:function(a){if(this.state!=a){this.state=a;if(a==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var b=this.getParentEditor().lang.dir,c={attributes:{"class":"cke_dialog_spinner"},
styles:{"float":"rtl"==b?"right":"left"}};c.styles["margin-"+("rtl"==b?"left":"right")]="8px";this.parts.spinner=CKEDITOR.document.createElement("div",c);this.parts.spinner.setHtml("\x26#8987;");this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show();this.getButton("ok").disable()}else a==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",a)}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(a,b){this._.dialogDefinitions[a]&&
"function"!=typeof b||(this._.dialogDefinitions[a]=b)},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(a,b,c){a=a.config.removeDialogTabs;return!(a&&a.match(new RegExp("(?:^|;)"+b+":"+c+"(?:$|;)","i")))},okButton:function(){var a=function(a,c){c=c||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){a=a.data.dialog;!1!==a.fire("ok",
{hide:!0}).hide&&a.hide()}},c,!0)};a.type="button";a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)};return a}(),cancelButton:function(){var a=function(a,c){c=c||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:a.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(a){a=a.data.dialog;!1!==a.fire("cancel",{hide:!0}).hide&&a.hide()}},c,!0)};a.type="button";a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,
b)},{type:"button"},!0)};return a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var aa={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},D=function(a,b,c){for(var d=0,e;e=a[d];d++)if(e.id==b||c&&e[c]&&(e=D(e[c],
b,c)))return e;return null},E=function(a,b,c,d,e){if(c){for(var f=0,g;g=a[f];f++){if(g.id==c)return a.splice(f,0,b),b;if(d&&g[d]&&(g=E(g[d],b,c,d,!0)))return g}if(e)return null}a.push(b);return b},F=function(a,b,c){for(var d=0,e;e=a[d];d++){if(e.id==b)return a.splice(d,1);if(c&&e[c]&&(e=F(e[c],b,c)))return e}return null},P=function(a,b){this.dialog=a;for(var c=b.contents,d=0,e;e=c[d];d++)c[d]=e&&new M(a,e);CKEDITOR.tools.extend(this,b)};P.prototype={getContents:function(a){return D(this.contents,
a)},getButton:function(a){return D(this.buttons,a)},addContents:function(a,b){return E(this.contents,a,b)},addButton:function(a,b){return E(this.buttons,a,b)},removeContents:function(a){F(this.contents,a)},removeButton:function(a){F(this.buttons,a)}};M.prototype={get:function(a){return D(this.elements,a,"children")},add:function(a,b){return E(this.elements,a,b,"children")},remove:function(a){F(this.elements,a,"children")}};var J,z={},u,w={},Q=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=
a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=w[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keydown&&b.keydown.call(b.uiElement,b.dialog,b.key),a.data.preventDefault())},R=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=w[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keyup&&(b.keyup.call(b.uiElement,b.dialog,b.key),
a.data.preventDefault()))},S=function(a,b,c,d,e){(w[c]||(w[c]=[])).push({uiElement:a,dialog:b,key:c,keyup:e||a.accessKeyUp,keydown:d||a.accessKeyDown})},ba=function(a){for(var b in w){for(var c=w[b],d=c.length-1;0<=d;d--)c[d].dialog!=a&&c[d].uiElement!=a||c.splice(d,1);0===c.length&&delete w[b]}},da=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},ca=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(a,b,c,d,e,f,g){if(!(4>arguments.length)){var h=(d.call?d(b):d)||
"div",p=["\x3c",h," "],m=(e&&e.call?e(b):e)||{},k=(f&&f.call?f(b):f)||{},q=(g&&g.call?g.call(this,a,b):g)||"",n=this.domId=k.id||CKEDITOR.tools.getNextId()+"_uiElement";b.requiredContent&&!a.getParentEditor().filter.check(b.requiredContent)&&(m.display="none",this.notAllowed=!0);k.id=n;var r={};b.type&&(r["cke_dialog_ui_"+b.type]=1);b.className&&(r[b.className]=1);b.disabled&&(r.cke_disabled=1);for(var l=k["class"]&&k["class"].split?k["class"].split(" "):[],n=0;n<l.length;n++)l[n]&&(r[l[n]]=1);l=
[];for(n in r)l.push(n);k["class"]=l.join(" ");b.title&&(k.title=b.title);r=(b.style||"").split(";");b.align&&(l=b.align,m["margin-left"]="left"==l?0:"auto",m["margin-right"]="right"==l?0:"auto");for(n in m)r.push(n+":"+m[n]);b.hidden&&r.push("display:none");for(n=r.length-1;0<=n;n--)""===r[n]&&r.splice(n,1);0<r.length&&(k.style=(k.style?k.style+"; ":"")+r.join("; "));for(n in k)p.push(n+'\x3d"'+CKEDITOR.tools.htmlEncode(k[n])+'" ');p.push("\x3e",q,"\x3c/",h,"\x3e");c.push(p.join(""));(this._||(this._=
{})).dialog=a;"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged});"function"==typeof b.isChanged&&(this.isChanged=b.isChanged);"function"==typeof b.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(a){return function(c){a.call(this,b.setValue.call(this,c))}}));"function"==typeof b.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(a){return function(){return b.getValue.call(this,a.call(this))}}));CKEDITOR.event.implementOn(this);
this.registerEvents(b);this.accessKeyUp&&this.accessKeyDown&&b.accessKey&&S(this,a,"CTRL+"+b.accessKey);var t=this;a.on("load",function(){var b=t.getInputElement();if(b){var c=t.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";b.on("focus",function(){a._.tabBarMode=!1;a._.hasFocus=!0;t.fire("focus");c&&this.addClass(c)});b.on("blur",function(){t.fire("blur");c&&this.removeClass(c)})}});CKEDITOR.tools.extend(this,b);this.keyboardFocusable&&(this.tabIndex=
b.tabIndex||0,this.focusIndex=a._.focusList.push(this)-1,this.on("focus",function(){a._.currentFocusIndex=t.focusIndex}))}},hbox:function(a,b,c,d,e){if(!(4>arguments.length)){this._||(this._={});var f=this._.children=b,g=e&&e.widths||null,h=e&&e.height||null,p,m={role:"presentation"};e&&e.align&&(m.align=e.align);CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"hbox"},d,"table",{},m,function(){var a=['\x3ctbody\x3e\x3ctr class\x3d"cke_dialog_ui_hbox"\x3e'];for(p=0;p<c.length;p++){var b="cke_dialog_ui_hbox_child",
d=[];0===p&&(b="cke_dialog_ui_hbox_first");p==c.length-1&&(b="cke_dialog_ui_hbox_last");a.push('\x3ctd class\x3d"',b,'" role\x3d"presentation" ');g?g[p]&&d.push("width:"+v(g[p])):d.push("width:"+Math.floor(100/c.length)+"%");h&&d.push("height:"+v(h));e&&void 0!==e.padding&&d.push("padding:"+v(e.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f[p].align&&d.push("text-align:"+f[p].align);0<d.length&&a.push('style\x3d"'+d.join("; ")+'" ');a.push("\x3e",c[p],"\x3c/td\x3e")}a.push("\x3c/tr\x3e\x3c/tbody\x3e");
return a.join("")})}},vbox:function(a,b,c,d,e){if(!(3>arguments.length)){this._||(this._={});var f=this._.children=b,g=e&&e.width||null,h=e&&e.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"vbox"},d,"div",null,{role:"presentation"},function(){var b=['\x3ctable role\x3d"presentation" cellspacing\x3d"0" border\x3d"0" '];b.push('style\x3d"');e&&e.expand&&b.push("height:100%;");b.push("width:"+v(g||"100%"),";");CKEDITOR.env.webkit&&b.push("float:none;");b.push('"');b.push('align\x3d"',
CKEDITOR.tools.htmlEncode(e&&e.align||("ltr"==a.getParentEditor().lang.dir?"left":"right")),'" ');b.push("\x3e\x3ctbody\x3e");for(var d=0;d<c.length;d++){var k=[];b.push('\x3ctr\x3e\x3ctd role\x3d"presentation" ');g&&k.push("width:"+v(g||"100%"));h?k.push("height:"+v(h[d])):e&&e.expand&&k.push("height:"+Math.floor(100/c.length)+"%");e&&void 0!==e.padding&&k.push("padding:"+v(e.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f[d].align&&k.push("text-align:"+f[d].align);0<k.length&&b.push('style\x3d"',
k.join("; "),'" ');b.push(' class\x3d"cke_dialog_ui_vbox_child"\x3e',c[d],"\x3c/td\x3e\x3c/tr\x3e")}b.push("\x3c/tbody\x3e\x3c/table\x3e");return b.join("")})}}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){this.getInputElement().setValue(a);!b&&this.fire("change",{value:a});return this},getValue:function(){return this.getInputElement().getValue()},
isChanged:function(){return!1},selectParentTab:function(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents"););if(!a)return this;a=a.getAttribute("name");this._.dialog._.currentTabId!=a&&this._.dialog.selectPage(a);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(a){var b=/^on([A-Z]\w+)/,c,d=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})},e;for(e in a)if(c=
e.match(b))this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e]);return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var a=this.getElement();this.getInputElement().setAttribute("disabled","true");a.addClass("cke_disabled")},enable:function(){var a=
this.getElement();this.getInputElement().removeAttribute("disabled");a.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(a){if(1>arguments.length)return this._.children.concat();a.splice||(a=[a]);return 2>
a.length?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?this._.children[a[0]].getChild(a.slice(1,a.length)):null}},!0);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;(function(){var a={build:function(a,c,d){for(var e=c.children,f,g=[],h=[],p=0;p<e.length&&(f=e[p]);p++){var m=[];g.push(m);h.push(CKEDITOR.dialog._.uiElementBuilders[f.type].build(a,f,m))}return new CKEDITOR.ui.dialog[c.type](a,h,g,d,c)}};CKEDITOR.dialog.addUIElement("hbox",a);CKEDITOR.dialog.addUIElement("vbox",
a)})();CKEDITOR.dialogCommand=function(a,b){this.dialogName=a;CKEDITOR.tools.extend(this,b,!0)};CKEDITOR.dialogCommand.prototype={exec:function(a){a.openDialog(this.dialogName)},canUndo:!1,editorFocus:1};(function(){var a=/^([a]|[^a])+$/,b=/^\d*$/,c=/^\d*(?:\.\d+)?$/,d=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,e=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,f=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var a=
arguments;return function(){var b=this&&this.getValue?this.getValue():a[0],c,d=CKEDITOR.VALIDATE_AND,e=[],f;for(f=0;f<a.length;f++)if("function"==typeof a[f])e.push(a[f]);else break;f<a.length&&"string"==typeof a[f]&&(c=a[f],f++);f<a.length&&"number"==typeof a[f]&&(d=a[f]);var n=d==CKEDITOR.VALIDATE_AND?!0:!1;for(f=0;f<e.length;f++)n=d==CKEDITOR.VALIDATE_AND?n&&e[f](b):n||e[f](b);return n?!0:c}},regex:function(a,b){return function(c){c=this&&this.getValue?this.getValue():c;return a.test(c)?!0:b}},
notEmpty:function(b){return this.regex(a,b)},integer:function(a){return this.regex(b,a)},number:function(a){return this.regex(c,a)},cssLength:function(a){return this.functions(function(a){return e.test(CKEDITOR.tools.trim(a))},a)},htmlLength:function(a){return this.functions(function(a){return d.test(CKEDITOR.tools.trim(a))},a)},inlineStyle:function(a){return this.functions(function(a){return f.test(CKEDITOR.tools.trim(a))},a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},
notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}};CKEDITOR.on("instanceDestroyed",function(a){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var b;b=CKEDITOR.dialog._.currentTop;)b.hide();for(var c in z)z[c].remove();z={}}a=a.editor._.storedDialogs;for(var d in a)a[d].destroy()})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(a,b){var c=null,d=CKEDITOR.dialog._.dialogDefinitions[a];null===CKEDITOR.dialog._.currentTop&&N(this);if("function"==typeof d)c=
this._.storedDialogs||(this._.storedDialogs={}),c=c[a]||(c[a]=new CKEDITOR.dialog(this,a)),b&&b.call(c,c),c.show();else{if("failed"==d)throw O(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+a+'" failed when loading definition.');"string"==typeof d&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(d),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[a]&&(CKEDITOR.dialog._.dialogDefinitions[a]="failed");this.openDialog(a,b)},this,0,1)}CKEDITOR.skin.loadPart("dialog");return c}})})();
CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(x){x.on("doubleclick",function(A){A.data.dialog&&x.openDialog(A.data.dialog)},null,null,999)}});CKEDITOR.plugins.add("about",{requires:"dialog",init:function(a){var b=a.addCommand("about",new CKEDITOR.dialogCommand("about"));b.modes={wysiwyg:1,source:1};b.canUndo=!1;b.readOnly=1;a.ui.addButton&&a.ui.addButton("About",{label:a.lang.about.title,command:"about",toolbar:"about"});CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}});(function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(b){var c=this;b.addCommand("a11yHelp",{exec:function(){var a=b.langCode,a=c.availableLangs[a]?
a:c.availableLangs[a.replace(/-.*/,"")]?a.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+a+".js"),function(){b.lang.a11yhelp=c.langEntries[a];b.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1});b.setKeystroke(CKEDITOR.ALT+48,"a11yHelp");CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js");b.on("ariaEditorHelpLabel",function(a){a.data.label=b.lang.common.editorHelp})}})})();(function(){function f(c){var a=this.att;c=c&&c.hasAttribute(a)&&c.getAttribute(a)||"";void 0!==c&&this.setValue(c)}function g(){for(var c,a=0;a<arguments.length;a++)if(arguments[a]instanceof CKEDITOR.dom.element){c=arguments[a];break}if(c){var a=this.att,b=this.getValue();b?c.setAttribute(a,b):c.removeAttribute(a,b)}}var k={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",allowedContent:function(c){c||(c=k);var a=[];c.id&&a.push("id");c.dir&&a.push("dir");var b=
"";a.length&&(b+="["+a.join(",")+"]");c.classes&&(b+="(*)");c.styles&&(b+="{*}");return b},createAdvancedTab:function(c,a,b){a||(a=k);var d=c.lang.common,h={id:"advanced",label:d.advancedTab,title:d.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},e=[];if(a.id||a.dir)a.id&&e.push({id:"advId",att:"id",type:"text",requiredContent:b?b+"[id]":null,label:d.id,setup:f,commit:g}),a.dir&&e.push({id:"advLangDir",att:"dir",type:"select",requiredContent:b?b+"[dir]":null,label:d.langDir,"default":"",
style:"width:100%",items:[[d.notSet,""],[d.langDirLTR,"ltr"],[d.langDirRTL,"rtl"]],setup:f,commit:g}),h.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(e)});if(a.styles||a.classes)e=[],a.styles&&e.push({id:"advStyles",att:"style",type:"text",requiredContent:b?b+"{cke-xyz}":null,label:d.styles,"default":"",validate:CKEDITOR.dialog.validate.inlineStyle(d.invalidInlineStyle),onChange:function(){},getStyle:function(a,c){var b=this.getValue().match(new RegExp("(?:^|;)\\s*"+
a+"\\s*:\\s*([^;]*)","i"));return b?b[1]:c},updateStyle:function(a,b){var d=this.getValue(),e=c.document.createElement("span");e.setAttribute("style",d);e.setStyle(a,b);d=CKEDITOR.tools.normalizeCssText(e.getAttribute("style"));this.setValue(d,1)},setup:f,commit:g}),a.classes&&e.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:b?b+"(cke-xyz)":null,label:d.cssClasses,"default":"",setup:f,commit:g}]}),h.elements[0].children.push({type:"hbox",
widths:["50%","50%"],children:[].concat(e)});return h}})})();CKEDITOR.plugins.add("basicstyles",{init:function(c){var e=0,d=function(g,d,b,a){if(a){a=new CKEDITOR.style(a);var f=h[b];f.unshift(a);c.attachStyleStateChange(a,function(a){!c.readOnly&&c.getCommand(b).setState(a)});c.addCommand(b,new CKEDITOR.styleCommand(a,{contentForms:f}));c.ui.addButton&&c.ui.addButton(g,{label:d,command:b,toolbar:"basicstyles,"+(e+=10)})}},h={bold:["strong","b",["span",function(a){a=a.styles["font-weight"];return"bold"==a||700<=+a}]],italic:["em","i",["span",function(a){return"italic"==
a.styles["font-style"]}]],underline:["u",["span",function(a){return"underline"==a.styles["text-decoration"]}]],strike:["s","strike",["span",function(a){return"line-through"==a.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},b=c.config,a=c.lang.basicstyles;d("Bold",a.bold,"bold",b.coreStyles_bold);d("Italic",a.italic,"italic",b.coreStyles_italic);d("Underline",a.underline,"underline",b.coreStyles_underline);d("Strike",a.strike,"strike",b.coreStyles_strike);d("Subscript",a.subscript,
"subscript",b.coreStyles_subscript);d("Superscript",a.superscript,"superscript",b.coreStyles_superscript);c.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}});CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"};CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"};CKEDITOR.config.coreStyles_underline={element:"u"};CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"};CKEDITOR.config.coreStyles_subscript={element:"sub"};
CKEDITOR.config.coreStyles_superscript={element:"sup"};(function(){function q(a,f,d,b){if(!a.isReadOnly()&&!a.equals(d.editable())){CKEDITOR.dom.element.setMarker(b,a,"bidi_processed",1);b=a;for(var c=d.editable();(b=b.getParent())&&!b.equals(c);)if(b.getCustomData("bidi_processed")){a.removeStyle("direction");a.removeAttribute("dir");return}b="useComputedState"in d.config?d.config.useComputedState:1;(b?a.getComputedStyle("direction"):a.getStyle("direction")||a.hasAttribute("dir"))!=f&&(a.removeStyle("direction"),b?(a.removeAttribute("dir"),f!=a.getComputedStyle("direction")&&
a.setAttribute("dir",f)):a.setAttribute("dir",f),d.forceNextSelectionCheck())}}function v(a,f,d){var b=a.getCommonAncestor(!1,!0);a=a.clone();a.enlarge(d==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(a.checkBoundaryOfElement(b,CKEDITOR.START)&&a.checkBoundaryOfElement(b,CKEDITOR.END)){for(var c;b&&b.type==CKEDITOR.NODE_ELEMENT&&(c=b.getParent())&&1==c.getChildCount()&&!(b.getName()in f);)b=c;return b.type==CKEDITOR.NODE_ELEMENT&&b.getName()in f&&b}}function p(a){return{context:"p",
allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},requiredContent:"p[dir]",refresh:function(a,d){var b=a.config.useComputedState,c,b=void 0===b||b;if(!b){c=d.lastElement;for(var h=a.editable();c&&!(c.getName()in u||c.equals(h));){var e=c.getParent();if(!e)break;c=e}}c=c||d.block||d.blockLimit;c.equals(a.editable())&&(h=a.getSelection().getRanges()[0].getEnclosedNode())&&h.type==CKEDITOR.NODE_ELEMENT&&(c=h);c&&(b=b?c.getComputedStyle("direction"):
c.getStyle("direction")||c.getAttribute("dir"),a.getCommand("bidirtl").setState("rtl"==b?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),a.getCommand("bidiltr").setState("ltr"==b?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF));b=(d.block||d.blockLimit||a.editable()).getDirection(1);b!=(a._.selDir||a.lang.dir)&&(a._.selDir=b,a.fire("contentDirChanged",b))},exec:function(f){var d=f.getSelection(),b=f.config.enterMode,c=d.getRanges();if(c&&c.length){for(var h={},e=d.createBookmarks(),c=c.createIterator(),g,
l=0;g=c.getNextRange(1);){var k=g.getEnclosedNode();k&&(!k||k.type==CKEDITOR.NODE_ELEMENT&&k.getName()in r)||(k=v(g,t,b));k&&q(k,a,f,h);var m=new CKEDITOR.dom.walker(g),n=e[l].startNode,p=e[l++].endNode;m.evaluator=function(a){var c=b==CKEDITOR.ENTER_P?"p":"div",d;if(d=(a?a.type==CKEDITOR.NODE_ELEMENT:!1)&&a.getName()in t){if(c=a.is(c))c=(c=a.getParent())?c.type==CKEDITOR.NODE_ELEMENT:!1;d=!(c&&a.getParent().is("blockquote"))}return!!(d&&a.getPosition(n)&CKEDITOR.POSITION_FOLLOWING&&(a.getPosition(p)&
CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};for(;k=m.next();)q(k,a,f,h);g=g.createIterator();for(g.enlargeBr=b!=CKEDITOR.ENTER_BR;k=g.getNextParagraph(b==CKEDITOR.ENTER_P?"p":"div");)q(k,a,f,h)}CKEDITOR.dom.element.clearAllMarkers(h);f.forceNextSelectionCheck();d.selectBookmarks(e);f.focus()}}}}function w(a){var f=a==l.setAttribute,d=a==l.removeAttribute,b=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(c,h){if(!this.isReadOnly()){var e;if(e=c==(f||d?
"dir":"direction")||"style"==c&&(d||b.test(h))){a:{e=this;for(var g=e.getDocument().getBody().getParent();e;){if(e.equals(g)){e=!1;break a}e=e.getParent()}e=!0}e=!e}if(e&&(e=this.getDirection(1),g=a.apply(this,arguments),e!=this.getDirection(1)))return this.getDocument().fire("dirChanged",this),g}return a.apply(this,arguments)}}var t={table:1,ul:1,ol:1,blockquote:1,div:1},r={},u={};CKEDITOR.tools.extend(r,t,{tr:1,p:1,div:1,li:1});CKEDITOR.tools.extend(u,r,{td:1});CKEDITOR.plugins.add("bidi",{init:function(a){function f(b,
c,d,e,f){a.addCommand(d,new CKEDITOR.command(a,e));a.ui.addButton&&a.ui.addButton(b,{label:c,command:d,toolbar:"bidi,"+f})}if(!a.blockless){var d=a.lang.bidi;f("BidiLtr",d.ltr,"bidiltr",p("ltr"),10);f("BidiRtl",d.rtl,"bidirtl",p("rtl"),20);a.on("contentDom",function(){a.document.on("dirChanged",function(b){a.fire("dirChanged",{node:b.data,dir:b.data.getDirection(1)})})});a.on("contentDirChanged",function(b){b=(a.lang.dir!=b.data?"add":"remove")+"Class";var c=a.ui.space(a.config.toolbarLocation);if(c)c[b]("cke_mixed_dir_content")})}}});
for(var l=CKEDITOR.dom.element.prototype,n=["setStyle","removeStyle","setAttribute","removeAttribute"],m=0;m<n.length;m++)l[n[m]]=CKEDITOR.tools.override(l[n[m]],w)})();(function(){var m={exec:function(g){var a=g.getCommand("blockquote").state,k=g.getSelection(),c=k&&k.getRanges()[0];if(c){var h=k.createBookmarks();if(CKEDITOR.env.ie){var e=h[0].startNode,b=h[0].endNode,d;if(e&&"blockquote"==e.getParent().getName())for(d=e;d=d.getNext();)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){e.move(d,!0);break}if(b&&"blockquote"==b.getParent().getName())for(d=b;d=d.getPrevious();)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){b.move(d);break}}var f=c.createIterator();
f.enlargeBr=g.config.enterMode!=CKEDITOR.ENTER_BR;if(a==CKEDITOR.TRISTATE_OFF){for(e=[];a=f.getNextParagraph();)e.push(a);1>e.length&&(a=g.document.createElement(g.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),b=h.shift(),c.insertNode(a),a.append(new CKEDITOR.dom.text("﻿",g.document)),c.moveToBookmark(b),c.selectNodeContents(a),c.collapse(!0),b=c.createBookmark(),e.push(a),h.unshift(b));d=e[0].getParent();c=[];for(b=0;b<e.length;b++)a=e[b],d=d.getCommonAncestor(a.getParent());for(a={table:1,tbody:1,
tr:1,ol:1,ul:1};a[d.getName()];)d=d.getParent();for(b=null;0<e.length;){for(a=e.shift();!a.getParent().equals(d);)a=a.getParent();a.equals(b)||c.push(a);b=a}for(;0<c.length;)if(a=c.shift(),"blockquote"==a.getName()){for(b=new CKEDITOR.dom.documentFragment(g.document);a.getFirst();)b.append(a.getFirst().remove()),e.push(b.getLast());b.replace(a)}else e.push(a);c=g.document.createElement("blockquote");for(c.insertBefore(e[0]);0<e.length;)a=e.shift(),c.append(a)}else if(a==CKEDITOR.TRISTATE_ON){b=[];
for(d={};a=f.getNextParagraph();){for(e=c=null;a.getParent();){if("blockquote"==a.getParent().getName()){c=a.getParent();e=a;break}a=a.getParent()}c&&e&&!e.getCustomData("blockquote_moveout")&&(b.push(e),CKEDITOR.dom.element.setMarker(d,e,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers(d);a=[];e=[];for(d={};0<b.length;)f=b.shift(),c=f.getParent(),f.getPrevious()?f.getNext()?(f.breakParent(f.getParent()),e.push(f.getNext())):f.remove().insertAfter(c):f.remove().insertBefore(c),c.getCustomData("blockquote_processed")||
(e.push(c),CKEDITOR.dom.element.setMarker(d,c,"blockquote_processed",!0)),a.push(f);CKEDITOR.dom.element.clearAllMarkers(d);for(b=e.length-1;0<=b;b--){c=e[b];a:{d=c;for(var f=0,m=d.getChildCount(),l=void 0;f<m&&(l=d.getChild(f));f++)if(l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()){d=!1;break a}d=!0}d&&c.remove()}if(g.config.enterMode==CKEDITOR.ENTER_BR)for(c=!0;a.length;)if(f=a.shift(),"div"==f.getName()){b=new CKEDITOR.dom.documentFragment(g.document);!c||!f.getPrevious()||f.getPrevious().type==
CKEDITOR.NODE_ELEMENT&&f.getPrevious().isBlockBoundary()||b.append(g.document.createElement("br"));for(c=f.getNext()&&!(f.getNext().type==CKEDITOR.NODE_ELEMENT&&f.getNext().isBlockBoundary());f.getFirst();)f.getFirst().remove().appendTo(b);c&&b.append(g.document.createElement("br"));b.replace(f);c=!1}}k.selectBookmarks(h);g.focus()}},refresh:function(g,a){this.setState(g.elementPath(a.block||a.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",
requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(g){g.blockless||(g.addCommand("blockquote",m),g.ui.addButton&&g.ui.addButton("Blockquote",{label:g.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})})();(function(){function r(b,a,c){a.type||(a.type="auto");if(c&&!1===b.fire("beforePaste",a)||!a.dataValue&&a.dataTransfer.isEmpty())return!1;a.dataValue||(a.dataValue="");if(CKEDITOR.env.gecko&&"drop"==a.method&&b.toolbox)b.once("afterPaste",function(){b.toolbox.focus()});return b.fire("paste",a)}function y(b){function a(){var a=b.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var d=function(a){b.readOnly&&"cut"==a.name||n.initPasteDataTransfer(a,b);a.data.preventDefault()};a.on("copy",
d);a.on("cut",d);a.on("cut",function(){b.readOnly||b.extractSelectedHtml()},null,null,999)}a.on(n.mainPasteEvent,function(b){"beforepaste"==n.mainPasteEvent&&p||k(b)});"beforepaste"==n.mainPasteEvent&&(a.on("paste",function(a){v||(e(),a.data.preventDefault(),k(a),f("paste")||b.openDialog("paste"))}),a.on("contextmenu",g,null,null,0),a.on("beforepaste",function(b){!b.data||b.data.$.ctrlKey||b.data.$.shiftKey||g()},null,null,0));a.on("beforecut",function(){!p&&h(b)});var c;a.attachListener(CKEDITOR.env.ie?
a:b.document.getDocumentElement(),"mouseup",function(){c=setTimeout(function(){t()},0)});b.on("destroy",function(){clearTimeout(c)});a.on("keyup",t)}function c(a){return{type:a,canUndo:"cut"==a,startDisabled:!0,exec:function(){"cut"==this.type&&h();var a;var d=this.type;if(CKEDITOR.env.ie)a=f(d);else try{a=b.document.$.execCommand(d,!1,null)}catch(c){a=!1}a||b.showNotification(b.lang.clipboard[this.type+"Error"]);return a}}}function d(){return{canUndo:!1,async:!0,exec:function(b,a){var d=this,c=function(a,
c){a&&r(b,a,!!c);b.fire("afterCommandExec",{name:"paste",command:d,returnValue:!!a})};"string"==typeof a?c({dataValue:a,method:"paste",dataTransfer:n.initPasteDataTransfer()},1):b.getClipboardData(c)}}}function e(){v=1;setTimeout(function(){v=0},100)}function g(){p=1;setTimeout(function(){p=0},10)}function f(a){var d=b.document,c=d.getBody(),e=!1,f=function(){e=!0};c.on(a,f);7<CKEDITOR.env.version?d.$.execCommand(a):d.$.selection.createRange().execCommand(a);c.removeListener(a,f);return e}function h(){if(CKEDITOR.env.ie&&
!CKEDITOR.env.quirks){var a=b.getSelection(),d,c,e;a.getType()==CKEDITOR.SELECTION_ELEMENT&&(d=a.getSelectedElement())&&(c=a.getRanges()[0],e=b.document.createText(""),e.insertBefore(d),c.setStartBefore(e),c.setEndAfter(d),a.selectRanges([c]),setTimeout(function(){d.getParent()&&(e.remove(),a.selectElement(d))},0))}}function l(a,d){var c=b.document,e=b.editable(),f=function(b){b.cancel()},q;if(!c.getById("cke_pastebin")){var g=b.getSelection(),h=g.createBookmarks();CKEDITOR.env.ie&&g.root.fire("selectionchange");
var m=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!e.is("body")||CKEDITOR.env.ie?"div":"body",c);m.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var k=0,c=c.getWindow();CKEDITOR.env.webkit?(e.append(m),m.addClass("cke_editable"),e.is("body")||(k="static"!=e.getComputedStyle("position")?e:CKEDITOR.dom.element.get(e.$.offsetParent),k=k.getDocumentPosition().y)):e.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(m);m.setStyles({position:"absolute",top:c.getScrollPosition().y-k+10+"px",
width:"1px",height:Math.max(1,c.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0});CKEDITOR.env.safari&&m.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text"));(k=m.getParent().isReadOnly())?(m.setOpacity(0),m.setAttribute("contenteditable",!0)):m.setStyle("ltr"==b.config.contentsLangDirection?"left":"right","-10000px");b.on("selectionChange",f,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko)q=e.once("blur",f,null,null,-100);k&&m.focus();k=new CKEDITOR.dom.range(m);
k.selectNodeContents(m);var t=k.select();CKEDITOR.env.ie&&(q=e.once("blur",function(){b.lockSelection(t)}));var l=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=l);q&&q.removeListener();CKEDITOR.env.ie&&e.focus();g.selectBookmarks(h);m.remove();var a;CKEDITOR.env.webkit&&(a=m.getFirst())&&a.is&&a.hasClass("Apple-style-span")&&(m=a);b.removeListener("selectionChange",f);d(m.getHtml())},0)}}function z(){if("paste"==
n.mainPasteEvent)return b.fire("beforePaste",{type:"auto",method:"paste"}),!1;b.focus();e();var a=b.focusManager;a.lock();if(b.editable().fire(n.mainPasteEvent)&&!f("paste"))return a.unlock(),!1;a.unlock();return!0}function q(a){if("wysiwyg"==b.mode)switch(a.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:a=b.editable();e();"paste"==n.mainPasteEvent&&a.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:b.fire("saveSnapshot"),setTimeout(function(){b.fire("saveSnapshot")},
50)}}function k(a){var d={type:"auto",method:"paste",dataTransfer:n.initPasteDataTransfer(a)};d.dataTransfer.cacheData();var c=!1!==b.fire("beforePaste",d);c&&n.canClipboardApiBeTrusted(d.dataTransfer,b)?(a.data.preventDefault(),setTimeout(function(){r(b,d)},0)):l(a,function(a){d.dataValue=a.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,"");c&&r(b,d)})}function t(){if("wysiwyg"==b.mode){var a=u("paste");b.getCommand("cut").setState(u("cut"));b.getCommand("copy").setState(u("copy"));b.getCommand("paste").setState(a);
b.fire("pasteState",a)}}function u(a){if(w&&a in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==a)return CKEDITOR.TRISTATE_OFF;a=b.getSelection();var d=a.getRanges();return a.getType()==CKEDITOR.SELECTION_NONE||1==d.length&&d[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var n=CKEDITOR.plugins.clipboard,p=0,v=0,w=0;(function(){b.on("key",q);b.on("contentDom",a);b.on("selectionChange",function(b){w=b.data.selection.getRanges()[0].checkReadOnly();t()});b.contextMenu&&b.contextMenu.addListener(function(b,
a){w=a.getRanges()[0].checkReadOnly();return{cut:u("cut"),copy:u("copy"),paste:u("paste")}})})();(function(){function a(d,c,e,f,q){var g=b.lang.clipboard[c];b.addCommand(c,e);b.ui.addButton&&b.ui.addButton(d,{label:g,command:c,toolbar:"clipboard,"+f});b.addMenuItems&&b.addMenuItem(c,{label:g,command:c,group:"clipboard",order:q})}a("Cut","cut",c("cut"),10,1);a("Copy","copy",c("copy"),20,4);a("Paste","paste",d(),30,8)})();b.getClipboardData=function(a,d){function c(a){a.removeListener();a.cancel();
d(a.data)}function e(a){a.removeListener();a.cancel();k=!0;d({type:g,dataValue:a.data.dataValue,dataTransfer:a.data.dataTransfer,method:"paste"})}function f(){this.customTitle=a&&a.title}var q=!1,g="auto",k=!1;d||(d=a,a=null);b.on("paste",c,null,null,0);b.on("beforePaste",function(a){a.removeListener();q=!0;g=a.data.type},null,null,1E3);!1===z()&&(b.removeListener("paste",c),q&&b.fire("pasteDialog",f)?(b.on("pasteDialogCommit",e),b.on("dialogHide",function(a){a.removeListener();a.data.removeListener("pasteDialogCommit",
e);setTimeout(function(){k||d(null)},10)})):d(null))}}function A(b){if(CKEDITOR.env.webkit){if(!b.match(/^[^<]*$/g)&&!b.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!b.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!b.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else if(CKEDITOR.env.gecko){if(!b.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}else return"html";return"htmlifiedtext"}function B(b,a){function c(a){return CKEDITOR.tools.repeat("\x3c/p\x3e\x3cp\x3e",
~~(a/2))+(1==a%2?"\x3cbr\x3e":"")}a=a.replace(/\s+/g," ").replace(/> +</g,"\x3e\x3c").replace(/<br ?\/>/gi,"\x3cbr\x3e");a=a.replace(/<\/?[A-Z]+>/g,function(a){return a.toLowerCase()});if(a.match(/^[^<]$/))return a;CKEDITOR.env.webkit&&-1<a.indexOf("\x3cdiv\x3e")&&(a=a.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"\x3cbr\x3e").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"\x3cdiv\x3e\x3c/div\x3e"),a.match(/<div>(<br>|)<\/div>/)&&(a="\x3cp\x3e"+a.replace(/(<div>(<br>|)<\/div>)+/g,function(a){return c(a.split("\x3c/div\x3e\x3cdiv\x3e").length+
1)})+"\x3c/p\x3e"),a=a.replace(/<\/div><div>/g,"\x3cbr\x3e"),a=a.replace(/<\/?div>/g,""));CKEDITOR.env.gecko&&b.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(a=a.replace(/^<br><br>$/,"\x3cbr\x3e")),-1<a.indexOf("\x3cbr\x3e\x3cbr\x3e")&&(a="\x3cp\x3e"+a.replace(/(<br>){2,}/g,function(a){return c(a.length/4)})+"\x3c/p\x3e"));return C(b,a)}function D(){function b(){var a={},b;for(b in CKEDITOR.dtd)"$"!=b.charAt(0)&&"div"!=b&&"span"!=b&&(a[b]=1);return a}var a={};return{get:function(c){return"plain-text"==
c?a.plainText||(a.plainText=new CKEDITOR.filter("br")):"semantic-content"==c?((c=a.semanticContent)||(c=new CKEDITOR.filter,c.allow({$1:{elements:b(),attributes:!0,styles:!1,classes:!1}}),c=a.semanticContent=c),c):c?new CKEDITOR.filter(c):null}}}function x(b,a,c){a=CKEDITOR.htmlParser.fragment.fromHtml(a);var d=new CKEDITOR.htmlParser.basicWriter;c.applyTo(a,!0,!1,b.activeEnterMode);a.writeHtml(d);return d.getHtml()}function C(b,a){b.enterMode==CKEDITOR.ENTER_BR?a=a.replace(/(<\/p><p>)+/g,function(a){return CKEDITOR.tools.repeat("\x3cbr\x3e",
a.length/7*2)}).replace(/<\/?p>/g,""):b.enterMode==CKEDITOR.ENTER_DIV&&(a=a.replace(/<(\/)?p>/g,"\x3c$1div\x3e"));return a}function E(b){b.data.preventDefault();b.data.$.dataTransfer.dropEffect="none"}function F(b){var a=CKEDITOR.plugins.clipboard;b.on("contentDom",function(){function c(a,d,c){d.select();r(b,{dataTransfer:c,method:"drop"},1);c.sourceEditor.fire("saveSnapshot");c.sourceEditor.editable().extractHtmlFromRange(a);c.sourceEditor.getSelection().selectRanges([a]);c.sourceEditor.fire("saveSnapshot")}
function d(d,c){d.select();r(b,{dataTransfer:c,method:"drop"},1);a.resetDragDataTransfer()}function e(a,d,c){var e={$:a.data.$,target:a.data.getTarget()};d&&(e.dragRange=d);c&&(e.dropRange=c);!1===b.fire(a.name,e)&&a.data.preventDefault()}function g(a){a.type!=CKEDITOR.NODE_ELEMENT&&(a=a.getParent());return a.getChildCount()}var f=b.editable(),h=CKEDITOR.plugins.clipboard.getDropTarget(b),l=b.ui.space("top"),p=b.ui.space("bottom");a.preventDefaultDropOnElement(l);a.preventDefaultDropOnElement(p);
f.attachListener(h,"dragstart",e);f.attachListener(b,"dragstart",a.resetDragDataTransfer,a,null,1);f.attachListener(b,"dragstart",function(d){a.initDragDataTransfer(d,b)},null,null,2);f.attachListener(b,"dragstart",function(){var d=a.dragRange=b.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(a.dragStartContainerChildCount=d?g(d.startContainer):null,a.dragEndContainerChildCount=d?g(d.endContainer):null)},null,null,100);f.attachListener(h,"dragend",e);f.attachListener(b,"dragend",
a.initDragDataTransfer,a,null,1);f.attachListener(b,"dragend",a.resetDragDataTransfer,a,null,100);f.attachListener(h,"dragover",function(a){var b=a.data.getTarget();b&&b.is&&b.is("html")?a.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&a.data.$.dataTransfer.types.contains("Files")&&a.data.preventDefault()});f.attachListener(h,"drop",function(d){if(!d.data.$.defaultPrevented){d.data.preventDefault();var c=d.data.getTarget();if(!c.isReadOnly()||c.type==CKEDITOR.NODE_ELEMENT&&
c.is("html")){var c=a.getRangeAtDropPosition(d,b),f=a.dragRange;c&&e(d,f,c)}}},null,null,9999);f.attachListener(b,"drop",a.initDragDataTransfer,a,null,1);f.attachListener(b,"drop",function(e){if(e=e.data){var f=e.dropRange,g=e.dragRange,h=e.dataTransfer;h.getTransferType(b)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){a.internalDrop(g,f,h,b)},0):h.getTransferType(b)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?c(g,f,h):d(f,h)}},null,null,9999)})}CKEDITOR.plugins.add("clipboard",{requires:"dialog",
init:function(b){var a,c=D();b.config.forcePasteAsPlainText?a="plain-text":b.config.pasteFilter?a=b.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in b.config||(a="semantic-content");b.pasteFilter=c.get(a);y(b);F(b);CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));b.on("paste",function(a){a.data.dataTransfer||(a.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer);if(!a.data.dataValue){var c=a.data.dataTransfer,g=c.getData("text/html");if(g)a.data.dataValue=
g,a.data.type="html";else if(g=c.getData("text/plain"))a.data.dataValue=b.editable().transformPlainTextToHtml(g),a.data.type="text"}},null,null,1);b.on("paste",function(a){var b=a.data.dataValue,c=CKEDITOR.dtd.$block;-1<b.indexOf("Apple-")&&(b=b.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=a.data.type&&(b=b.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(a,b){return b.replace(/\t/g,"\x26nbsp;\x26nbsp; \x26nbsp;")})),-1<b.indexOf('\x3cbr class\x3d"Apple-interchange-newline"\x3e')&&
(a.data.startsWithEOL=1,a.data.preSniffing="html",b=b.replace(/<br class="Apple-interchange-newline">/,"")),b=b.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(b.match(/^<[^<]+cke_(editable|contents)/i)){var f,h,l=new CKEDITOR.dom.element("div");for(l.setHtml(b);1==l.getChildCount()&&(f=l.getFirst())&&f.type==CKEDITOR.NODE_ELEMENT&&(f.hasClass("cke_editable")||f.hasClass("cke_contents"));)l=h=f;h&&(b=h.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?b=b.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(b,
f){return f.toLowerCase()in c?(a.data.preSniffing="html","\x3c"+f):b}):CKEDITOR.env.webkit?b=b.replace(/<\/(\w+)><div><br><\/div>$/,function(b,f){return f in c?(a.data.endsWithEOL=1,"\x3c/"+f+"\x3e"):b}):CKEDITOR.env.gecko&&(b=b.replace(/(\s)<br>$/,"$1"));a.data.dataValue=b},null,null,3);b.on("paste",function(a){a=a.data;var e=a.type,g=a.dataValue,f,h=b.config.clipboard_defaultContentType||"html",l=a.dataTransfer.getTransferType(b);f="html"==e||"html"==a.preSniffing?"html":A(g);"htmlifiedtext"==f&&
(g=B(b.config,g));"text"==e&&"html"==f?g=x(b,g,c.get("plain-text")):l==CKEDITOR.DATA_TRANSFER_EXTERNAL&&b.pasteFilter&&!a.dontFilter&&(g=x(b,g,b.pasteFilter));a.startsWithEOL&&(g='\x3cbr data-cke-eol\x3d"1"\x3e'+g);a.endsWithEOL&&(g+='\x3cbr data-cke-eol\x3d"1"\x3e');"auto"==e&&(e="html"==f||"html"==h?"html":"text");a.type=e;a.dataValue=g;delete a.preSniffing;delete a.startsWithEOL;delete a.endsWithEOL},null,null,6);b.on("paste",function(a){a=a.data;a.dataValue&&(b.insertHtml(a.dataValue,a.type,a.range),
setTimeout(function(){b.fire("afterPaste")},0))},null,null,1E3);b.on("pasteDialog",function(a){setTimeout(function(){b.openDialog("paste",a.data)},0)})}});CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!CKEDITOR.env.ie&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",canClipboardApiBeTrusted:function(b,a){return b.getTransferType(a)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||
CKEDITOR.env.chrome&&!b.isEmpty()||CKEDITOR.env.gecko&&(b.getData("text/html")||b.getFilesCount())?!0:!1},getDropTarget:function(b){var a=b.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||a.isInline()?a:b.document},fixSplitNodesAfterDrop:function(b,a,c,d){function e(b,c,d){var e=b;e.type==CKEDITOR.NODE_TEXT&&(e=b.getParent());if(e.equals(c)&&d!=c.getChildCount())return b=a.startContainer.getChild(a.startOffset-1),c=a.startContainer.getChild(a.startOffset),b&&b.type==CKEDITOR.NODE_TEXT&&
c&&c.type==CKEDITOR.NODE_TEXT&&(d=b.getLength(),b.setText(b.getText()+c.getText()),c.remove(),a.setStart(b,d),a.collapse(!0)),!0}var g=a.startContainer;"number"==typeof d&&"number"==typeof c&&g.type==CKEDITOR.NODE_ELEMENT&&(e(b.startContainer,g,c)||e(b.endContainer,g,d))},isDropRangeAffectedByDragRange:function(b,a){var c=a.startContainer,d=a.endOffset;return b.endContainer.equals(c)&&b.endOffset<=d||b.startContainer.getParent().equals(c)&&b.startContainer.getIndex()<d||b.endContainer.getParent().equals(c)&&
b.endContainer.getIndex()<d?!0:!1},internalDrop:function(b,a,c,d){var e=CKEDITOR.plugins.clipboard,g=d.editable(),f,h;d.fire("saveSnapshot");d.fire("lockSnapshot",{dontUpdate:1});CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(b,a,e.dragStartContainerChildCount,e.dragEndContainerChildCount);(h=this.isDropRangeAffectedByDragRange(b,a))||(f=b.createBookmark(!1));e=a.clone().createBookmark(!1);h&&(f=b.createBookmark(!1));b=f.startNode;a=f.endNode;h=e.startNode;a&&b.getPosition(h)&
CKEDITOR.POSITION_PRECEDING&&a.getPosition(h)&CKEDITOR.POSITION_FOLLOWING&&h.insertBefore(b);b=d.createRange();b.moveToBookmark(f);g.extractHtmlFromRange(b,1);a=d.createRange();a.moveToBookmark(e);r(d,{dataTransfer:c,method:"drop",range:a},1);d.fire("unlockSnapshot")},getRangeAtDropPosition:function(b,a){var c=b.data.$,d=c.clientX,e=c.clientY,g=a.getSelection(!0).getRanges()[0],f=a.createRange();if(b.data.testRange)return b.data.testRange;if(document.caretRangeFromPoint)c=a.document.$.caretRangeFromPoint(d,
e),f.setStart(CKEDITOR.dom.node(c.startContainer),c.startOffset),f.collapse(!0);else if(c.rangeParent)f.setStart(CKEDITOR.dom.node(c.rangeParent),c.rangeOffset),f.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&g&&a.editable().hasFocus)return g;if(document.body.createTextRange){a.focus();c=a.document.getBody().$.createTextRange();try{for(var h=!1,l=0;20>l&&!h;l++){if(!h)try{c.moveToPoint(d,e-l),h=!0}catch(p){}if(!h)try{c.moveToPoint(d,e+l),h=!0}catch(q){}}if(h){var k="cke-temp-"+(new Date).getTime();
c.pasteHTML('\x3cspan id\x3d"'+k+'"\x3e​\x3c/span\x3e');var t=a.document.getById(k);f.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START);t.remove()}else{var u=a.document.$.elementFromPoint(d,e),n=new CKEDITOR.dom.element(u),r;if(n.equals(a.editable())||"html"==n.getName())return g&&g.startContainer&&!g.startContainer.equals(a.editable())?g:null;r=n.getClientRect();d<r.left?f.setStartAt(n,CKEDITOR.POSITION_AFTER_START):f.setStartAt(n,CKEDITOR.POSITION_BEFORE_END);f.collapse(!0)}}catch(v){return null}}else return null}return f},
initDragDataTransfer:function(b,a){var c=b.data.$?b.data.$.dataTransfer:null,d=new this.dataTransfer(c,a);c?this.dragData&&d.id==this.dragData.id?d=this.dragData:this.dragData=d:this.dragData?d=this.dragData:this.dragData=d;b.data.dataTransfer=d},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(b,a){if(this.isCustomCopyCutSupported){if(b&&b.data&&b.data.$){var c=new this.dataTransfer(b.data.$.clipboardData,a);this.copyCutData&&c.id==this.copyCutData.id?(c=this.copyCutData,
c.$=b.data.$.clipboardData):this.copyCutData=c;return c}return new this.dataTransfer(null,a)}return new this.dataTransfer(CKEDITOR.env.edge&&b&&b.data.$&&b.data.$.clipboardData||null,a)},preventDefaultDropOnElement:function(b){b&&b.on("dragover",E)}};var p=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text";CKEDITOR.plugins.clipboard.dataTransfer=function(b,a){b&&(this.$=b);this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,
data:{},files:[],normalizeType:function(a){a=a.toLowerCase();return"text"==a||"text/plain"==a?"Text":"url"==a?"URL":a}};this.id=this.getData(p);this.id||(this.id="Text"==p?"":"cke-"+CKEDITOR.tools.getUniqueId());if("Text"!=p)try{this.$.setData(p,this.id)}catch(c){}a&&(this.sourceEditor=a,this.setData("text/html",a.getSelectedHtml(1)),"Text"==p||this.getData("text/plain")||this.setData("text/plain",a.getSelection().getSelectedText()))};CKEDITOR.DATA_TRANSFER_INTERNAL=1;CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=
2;CKEDITOR.DATA_TRANSFER_EXTERNAL=3;CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(b){b=this._.normalizeType(b);var a=this._.data[b];if(void 0===a||null===a||""===a)try{a=this.$.getData(b)}catch(c){}if(void 0===a||null===a||""===a)a="";"text/html"==b?(a=a.replace(this._.metaRegExp,""),(b=this._.bodyRegExp.exec(a))&&b.length&&(a=b[1],a=a.replace(this._.fragmentRegExp,""))):"Text"==b&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==a.substring(0,7)&&(a="");return a},setData:function(b,
a){b=this._.normalizeType(b);this._.data[b]=a;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==b||"Text"==b){"Text"==p&&"Text"==b&&(this.id=a);try{this.$.setData(b,a)}catch(c){}}},getTransferType:function(b){return this.sourceEditor?this.sourceEditor==b?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function b(b){b=a._.normalizeType(b);var c=a.getData(b);c&&(a._.data[b]=c)}if(this.$){var a=this,c,d;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(c=
0;c<this.$.types.length;c++)b(this.$.types[c])}else b("Text"),b("URL");d=this._getImageFromClipboard();if(this.$&&this.$.files||d){this._.files=[];if(this.$.files&&this.$.files.length)for(c=0;c<this.$.files.length;c++)this._.files.push(this.$.files[c]);0===this._.files.length&&d&&this._.files.push(d)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(b){return this._.files.length?
this._.files[b]:this.$&&this.$.files&&this.$.files.length?this.$.files[b]:0===b?this._getImageFromClipboard():void 0},isEmpty:function(){var b={},a;if(this.getFilesCount())return!1;for(a in this._.data)b[a]=1;if(this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var c=0;c<this.$.types.length;c++)b[this.$.types[c]]=1}else b.Text=1,b.URL=1;"Text"!=p&&(b[p]=0);for(a in b)if(b[a]&&""!==this.getData(a))return!1;return!0},_getImageFromClipboard:function(){var b;if(this.$&&
this.$.items&&this.$.items[0])try{if((b=this.$.items[0].getAsFile())&&b.type)return b}catch(a){}}}})();(function(){var c='\x3ca id\x3d"{id}" class\x3d"cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+' title\x3d"{title}" tabindex\x3d"-1" hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"{hasArrow}" aria-disabled\x3d"{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(c+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(c+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');
var c=c+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{style}"'),c=c+'\x3e\x26nbsp;\x3c/span\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_button_label cke_button__{name}_label" aria-hidden\x3d"false"\x3e{label}\x3c/span\x3e{arrowHtml}\x3c/a\x3e',
r=CKEDITOR.addTemplate("buttonArrow",'\x3cspan class\x3d"cke_button_arrow"\x3e'+(CKEDITOR.env.hc?"\x26#9660;":"")+"\x3c/span\x3e"),t=CKEDITOR.addTemplate("button",c);CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON="button";CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,click:a.click||function(b){b.execCommand(a.command)}});this._={}};CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}};
CKEDITOR.ui.button.prototype={render:function(a,b){function c(){var e=a.mode;e&&(e=this.modes[e]?void 0!==k[e]?k[e]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,e=a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:e,this.setState(e),this.refresh&&this.refresh())}var l=CKEDITOR.env,m=this._.id=CKEDITOR.tools.getNextId(),f="",g=this.command,n;this._.editor=a;var d={id:m,button:this,editor:a,focus:function(){CKEDITOR.document.getById(m).focus()},execute:function(){this.button.click(a)},attach:function(a){this.button.attach(a)}},
u=CKEDITOR.tools.addFunction(function(a){if(d.onkey)return a=new CKEDITOR.dom.event(a),!1!==d.onkey(d,a.getKeystroke())}),v=CKEDITOR.tools.addFunction(function(a){var b;d.onfocus&&(b=!1!==d.onfocus(d,new CKEDITOR.dom.event(a)));return b}),p=0;d.clickFn=n=CKEDITOR.tools.addFunction(function(){p&&(a.unlockSelection(1),p=0);d.execute();l.iOS&&a.focus()});if(this.modes){var k={};a.on("beforeModeUnload",function(){a.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(k[a.mode]=this._.state)},this);a.on("activeFilterChange",
c,this);a.on("mode",c,this);!this.readOnly&&a.on("readOnly",c,this)}else g&&(g=a.getCommand(g))&&(g.on("state",function(){this.setState(g.state)},this),f+=g.state==CKEDITOR.TRISTATE_ON?"on":g.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");if(this.directional)a.on("contentDirChanged",function(b){var c=CKEDITOR.document.getById(this._.id),d=c.getFirst();b=b.data;b!=a.lang.dir?c.addClass("cke_"+b):c.removeClass("cke_ltr").removeClass("cke_rtl");d.setAttribute("style",CKEDITOR.skin.getIconStyle(h,
"rtl"==b,this.icon,this.iconOffset))},this);g||(f+="off");var q=this.name||this.command,h=q;this.icon&&!/\./.test(this.icon)&&(h=this.icon,this.icon=null);f={id:m,name:q,iconName:h,label:this.label,cls:this.className||"",state:f,ariaDisabled:"disabled"==f?"true":"false",title:this.title,titleJs:l.gecko&&!l.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:u,focusFn:v,clickFn:n,style:CKEDITOR.skin.getIconStyle(h,"rtl"==a.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?
r.output():""};t.output(f,b);if(this.onRender)this.onRender();return d},setState:function(a){if(this._.state==a)return!1;this._.state=a;var b=CKEDITOR.document.getById(this._.id);return b?(b.setState(a,"cke_button"),a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),this.hasArrow?(a=a==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(a)):a==CKEDITOR.TRISTATE_ON?
b.setAttribute("aria-pressed",!0):b.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(a){if(this._.feature)return this._.feature;var b=this;this.allowedContent||this.requiredContent||!this.command||(b=a.getCommand(this.command)||b);return this._.feature=b}};CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b)}})();CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function e(c){var a=this._;a.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(c),a.on?a.panel.hide():a.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(c){var a=c.panel||{};delete c.panel;this.base(c);this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document;a.block={attributes:a.attributes};this.hasArrow=a.toolbarRelated=
!0;this.click=e;this._={panelDefinition:a}},statics:{handler:{create:function(c){return new CKEDITOR.ui.panelButton(c)}}},proto:{createPanel:function(c){var a=this._;if(!a.panel){var f=this._.panelDefinition,e=this._.panelDefinition.block,g=f.parent||CKEDITOR.document.getBody(),d=this._.panel=new CKEDITOR.ui.floatPanel(c,g,f),f=d.addBlock(a.id,e),b=this;d.onShow=function(){b.className&&this.element.addClass(b.className+"_panel");b.setState(CKEDITOR.TRISTATE_ON);a.on=1;b.editorFocus&&c.focus();if(b.onOpen)b.onOpen()};
d.onHide=function(d){b.className&&this.element.getFirst().removeClass(b.className+"_panel");b.setState(b.modes&&b.modes[c.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);a.on=0;if(!d&&b.onClose)b.onClose()};d.onEscape=function(){d.hide(1);b.document.getById(a.id).focus()};if(this.onBlock)this.onBlock(d,f);f.onHide=function(){a.on=0;b.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}});
CKEDITOR.UI_PANELBUTTON="panelbutton";(function(){CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}});CKEDITOR.UI_PANEL="panel";CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b);CKEDITOR.tools.extend(this,{className:"",css:[]});this.id=CKEDITOR.tools.getNextId();this.document=a;this.isFramed=this.forceIFrame||this.css.length;this._={blocks:{}}};CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};var f=CKEDITOR.addTemplate("panel",
'\x3cdiv lang\x3d"{langCode}" id\x3d"{id}" dir\x3d{dir} class\x3d"cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style\x3d"z-index:{z-index}" role\x3d"presentation"\x3e{frame}\x3c/div\x3e'),g=CKEDITOR.addTemplate("panel-frame",'\x3ciframe id\x3d"{id}" class\x3d"cke_panel_frame" role\x3d"presentation" frameborder\x3d"0" src\x3d"{src}"\x3e\x3c/iframe\x3e'),h=CKEDITOR.addTemplate("panel-frame-inner",'\x3c!DOCTYPE html\x3e\x3chtml class\x3d"cke_panel_container {env}" dir\x3d"{dir}" lang\x3d"{langCode}"\x3e\x3chead\x3e{css}\x3c/head\x3e\x3cbody class\x3d"cke_{dir}" style\x3d"margin:0;padding:0" onload\x3d"{onload}"\x3e\x3c/body\x3e\x3c/html\x3e');
CKEDITOR.ui.panel.prototype={render:function(a,b){this.getHolderElement=function(){var a=this._.holder;if(!a){if(this.isFramed){var a=this.document.getById(this.id+"_frame"),b=a.getParent(),a=a.getFrameDocument();CKEDITOR.env.iOS&&b.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"});b=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0;if(this.onLoad)this.onLoad()},this));a.write(h.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+
b+");"},d)));a.getWindow().$.CKEDITOR=CKEDITOR;a.on("keydown",function(a){var b=a.data.getKeystroke(),c=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(b)?a.data.preventDefault():(27==b||b==("rtl"==c?39:37))&&this.onEscape&&!1===this.onEscape(b)&&a.data.preventDefault()},this);a=a.getBody();a.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(b)}else a=this.document.getById(this.id);this._.holder=a}return a};var d={editorId:a.id,id:this.id,langCode:a.langCode,
dir:a.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":a.config.baseFloatZIndex+1};if(this.isFramed){var e=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";d.frame=g.output({id:this.id+"_frame",src:e})}e=f.output(d);b&&b.push(e);return e},addBlock:function(a,b){b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),
b);this._.currentBlock||this.showBlock(a);return b},getBlock:function(a){return this._.blocks[a]},showBlock:function(a){a=this._.blocks[a];var b=this._.currentBlock,d=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");b&&b.hide();this._.currentBlock=a;CKEDITOR.fire("ariaWidget",d);a._.focusIndex=-1;this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a);a.show();return a},destroy:function(){this.element&&this.element.remove()}};CKEDITOR.ui.panel.block=
CKEDITOR.tools.createClass({$:function(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}}));b&&CKEDITOR.tools.extend(this,b);this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]});this.keys={};this._.focusIndex=-1;this.element.disableContextMenu()},_:{markItem:function(a){-1!=a&&(a=this.element.getElementsByTag("a").getItem(this._.focusIndex=
a),CKEDITOR.env.webkit&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(a,b){var d=this.keys[a];switch(d){case "next":for(var e=this._.focusIndex,d=this.element.getElementsByTag("a"),c;c=d.getItem(++e);)if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=e;c.focus();break}return c||
b?!1:(this._.focusIndex=-1,this.onKeyDown(a,1));case "prev":e=this._.focusIndex;for(d=this.element.getElementsByTag("a");0<e&&(c=d.getItem(--e));){if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=e;c.focus();break}c=null}return c||b?!1:(this._.focusIndex=d.count(),this.onKeyDown(a,1));case "click":case "mouseup":return e=this._.focusIndex,(c=0<=e&&this.element.getElementsByTag("a").getItem(e))&&(c.$[d]?c.$[d]():c.$["on"+d]()),!1}return!0}}})})();CKEDITOR.plugins.add("floatpanel",{requires:"panel"});
(function(){function v(a,b,c,l,h){h=CKEDITOR.tools.genKey(b.getUniqueId(),c.getUniqueId(),a.lang.dir,a.uiColor||"",l.css||"",h||"");var g=f[h];g||(g=f[h]=new CKEDITOR.ui.panel(b,l),g.element=c.append(CKEDITOR.dom.element.createFromHtml(g.render(a),b)),g.element.setStyles({display:"none",position:"absolute"}));return g}var f={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(a,b,c,l){function h(){e.hide()}c.forceIFrame=1;c.toolbarRelated&&a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&
(b=CKEDITOR.document.getById("cke_"+a.name));var g=b.getDocument();l=v(a,g,b,c,l||0);var m=l.element,p=m.getFirst(),e=this;m.disableContextMenu();this.element=m;this._={editor:a,panel:l,parentElement:b,definition:c,document:g,iframe:p,children:[],dir:a.lang.dir,showBlockParams:null};a.on("mode",h);a.on("resize",h);g.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(a,b){return this._.panel.addBlock(a,b)},addListBlock:function(a,b){return this._.panel.addListBlock(a,
b)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(a,b,c,l,h,g){var m=this._.panel,p=m.showBlock(a);this._.showBlockParams=[].slice.call(arguments);this.allowBlur(!1);var e=this._.editor.editable();this._.returnFocus=e.hasFocus?e:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);this._.hideTimeout=0;var k=this.element,e=this._.iframe,e=CKEDITOR.env.ie&&!CKEDITOR.env.edge?e:new CKEDITOR.dom.window(e.$.contentWindow),f=k.getDocument(),r=this._.parentElement.getPositionedAncestor(),
t=b.getDocumentPosition(f),f=r?r.getDocumentPosition(f):{x:0,y:0},q="rtl"==this._.dir,d=t.x+(l||0)-f.x,n=t.y+(h||0)-f.y;!q||1!=c&&4!=c?q||2!=c&&3!=c||(d+=b.$.offsetWidth-1):d+=b.$.offsetWidth;if(3==c||4==c)n+=b.$.offsetHeight-1;this._.panel._.offsetParentId=b.getId();k.setStyles({top:n+"px",left:0,display:""});k.setOpacity(0);k.getFirst().removeStyle("width");this._.editor.focusManager.add(e);this._.blurSet||(CKEDITOR.event.useCapture=!0,e.on("blur",function(a){function u(){delete this._.returnFocus;
this.hide()}this.allowBlur()&&a.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(u,0,this)):u.call(this))},this),e.on("focus",function(){this._.focused=!0;this.hideChild();this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(e.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),e.on("touchend",function(){this._.hideTimeout=0;this.focus()},this)),CKEDITOR.event.useCapture=!1,
this._.blurSet=1);m.onEscape=CKEDITOR.tools.bind(function(a){if(this.onEscape&&!1===this.onEscape(a))return!1},this);CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.tools.bind(function(){var a=k;a.removeStyle("width");if(p.autoSize){var b=p.element.getDocument(),b=(CKEDITOR.env.webkit||CKEDITOR.env.edge?p.element:b.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<b&&(b+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)+3);a.setStyle("width",b+10+"px");b=p.element.$.scrollHeight;CKEDITOR.env.ie&&
CKEDITOR.env.quirks&&0<b&&(b+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)+3);a.setStyle("height",b+"px");m._.currentBlock.element.setStyle("display","none").removeStyle("display")}else a.removeStyle("height");q&&(d-=k.$.offsetWidth);k.setStyle("left",d+"px");var b=m.element.getWindow(),a=k.$.getBoundingClientRect(),b=b.getViewPaneSize(),c=a.width||a.right-a.left,e=a.height||a.bottom-a.top,l=q?a.right:b.width-a.left,h=q?b.width-a.right:a.left;q?l<c&&(d=h>c?d+c:b.width>c?d-a.left:d-a.right+b.width):
l<c&&(d=h>c?d-c:b.width>c?d-a.right+b.width:d-a.left);c=a.top;b.height-a.top<e&&(n=c>e?n-e:b.height>e?n-a.bottom+b.height:n-a.top);CKEDITOR.env.ie&&(b=a=new CKEDITOR.dom.element(k.$.offsetParent),"html"==b.getName()&&(b=b.getDocument().getBody()),"rtl"==b.getComputedStyle("direction")&&(d=CKEDITOR.env.ie8Compat?d-2*k.getDocument().getDocumentElement().$.scrollLeft:d-(a.$.scrollWidth-a.$.clientWidth)));var a=k.getFirst(),f;(f=a.getCustomData("activePanel"))&&f.onHide&&f.onHide.call(this,1);a.setCustomData("activePanel",
this);k.setStyles({top:n+"px",left:d+"px"});k.setOpacity(1);g&&g()},this);m.isLoaded?a():m.onLoad=a;CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus();p.element.focus();CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=a);this.allowBlur(!0);this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this);this.visible=1;this.onShow&&this.onShow.call(this)},reposition:function(){var a=this._.showBlockParams;
this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,a))},focus:function(){if(CKEDITOR.env.webkit){var a=CKEDITOR.document.getActive();a&&!a.equals(this._.iframe)&&a.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var a=this._.iframe.getFrameDocument().getActive();a&&a.is("a")&&(this._.lastFocused=a)},hide:function(a){if(this.visible&&(!this.onHide||!0!==this.onHide.call(this))){this.hideChild();CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur();
this.element.setStyle("display","none");this.visible=0;this.element.getFirst().removeCustomData("activePanel");if(a=a&&this._.returnFocus)CKEDITOR.env.webkit&&a.type&&a.getWindow().$.focus(),a.focus();delete this._.lastFocused;this._.showBlockParams=null;this._.editor.fire("panelHide",this)}},allowBlur:function(a){var b=this._.panel;void 0!==a&&(b.allowBlur=a);return b.allowBlur},showAsChild:function(a,b,c,f,h,g){if(this._.activeChild!=a||a._.panel._.offsetParentId!=c.getId())this.hideChild(),a.onHide=
CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=a,this._.focused=!1,a.showBlock(b,c,f,h,g),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100)},hideChild:function(a){var b=this._.activeChild;b&&(delete b.onHide,delete this._.activeChild,b.hide(),a&&this.focus())}}});CKEDITOR.on("instanceDestroyed",function(){var a=CKEDITOR.tools.isEmpty(CKEDITOR.instances),
b;for(b in f){var c=f[b];a?c.destroy():c.element.hide()}a&&(f={})})})();CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(c){function r(p,h,e,f){var l=new CKEDITOR.style(k["colorButton_"+h+"Style"]),m=CKEDITOR.tools.getNextId()+"_colorBox";c.ui.add(p,CKEDITOR.UI_PANELBUTTON,{label:e,title:e,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+f,allowedContent:l,requiredContent:l,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":g.panelTitle}},onBlock:function(a,b){b.autoSize=!0;b.element.addClass("cke_colorblock");
b.element.setHtml(u(a,h,m));b.element.getDocument().getBody().setStyle("overflow","hidden");CKEDITOR.ui.fire("ready",this);var d=b.keys,e="rtl"==c.lang.dir;d[e?37:39]="next";d[40]="next";d[9]="next";d[e?39:37]="prev";d[38]="prev";d[CKEDITOR.SHIFT+9]="prev";d[32]="click"},refresh:function(){c.activeFilter.check(l)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var a=c.getSelection(),a=a&&a.getStartElement(),a=c.elementPath(a),b;if(a){a=a.block||a.blockLimit||c.document.getBody();do b=
a&&a.getComputedStyle("back"==h?"background-color":"color")||"transparent";while("back"==h&&"transparent"==b&&a&&(a=a.getParent()));b&&"transparent"!=b||(b="#ffffff");!1!==k.colorButton_enableAutomatic&&this._.panel._.iframe.getFrameDocument().getById(m).setStyle("background-color",b);return b}}})}function u(p,h,e){var f=[],l=k.colorButton_colors.split(","),m=c.plugins.colordialog&&!1!==k.colorButton_enableMore,a=l.length+(m?2:1),b=CKEDITOR.tools.addFunction(function(a,b){function d(a){this.removeListener("ok",
d);this.removeListener("cancel",d);"ok"==a.name&&e(this.getContentElement("picker","selectedColor").getValue(),b)}var e=arguments.callee;if("?"==a)c.openDialog("colordialog",function(){this.on("ok",d);this.on("cancel",d)});else{c.focus();p.hide();c.fire("saveSnapshot");c.removeStyle(new CKEDITOR.style(k["colorButton_"+b+"Style"],{color:"inherit"}));if(a){var f=k["colorButton_"+b+"Style"];f.childRule="back"==b?function(a){return t(a)}:function(a){return!(a.is("a")||a.getElementsByTag("a").count())||
t(a)};c.applyStyle(new CKEDITOR.style(f,{color:a}))}c.fire("saveSnapshot")}});!1!==k.colorButton_enableAutomatic&&f.push('\x3ca class\x3d"cke_colorauto" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',g.auto,'" onclick\x3d"CKEDITOR.tools.callFunction(',b,",null,'",h,"');return false;\" href\x3d\"javascript:void('",g.auto,'\')" role\x3d"option" aria-posinset\x3d"1" aria-setsize\x3d"',a,'"\x3e\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"cke_colorbox" id\x3d"',
e,'"\x3e\x3c/span\x3e\x3c/td\x3e\x3ctd colspan\x3d7 align\x3dcenter\x3e',g.auto,"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/a\x3e");f.push('\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e');for(e=0;e<l.length;e++){0===e%8&&f.push("\x3c/tr\x3e\x3ctr\x3e");var d=l[e].split("/"),n=d[0],q=d[1]||n;d[1]||(n="#"+n.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));d=c.lang.colorbutton.colors[q]||q;f.push('\x3ctd\x3e\x3ca class\x3d"cke_colorbox" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',
d,'" onclick\x3d"CKEDITOR.tools.callFunction(',b,",'",n,"','",h,"'); return false;\" href\x3d\"javascript:void('",d,'\')" role\x3d"option" aria-posinset\x3d"',e+2,'" aria-setsize\x3d"',a,'"\x3e\x3cspan class\x3d"cke_colorbox" style\x3d"background-color:#',q,'"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/td\x3e')}m&&f.push('\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d8 align\x3dcenter\x3e\x3ca class\x3d"cke_colormore" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',g.more,'" onclick\x3d"CKEDITOR.tools.callFunction(',
b,",'?','",h,"');return false;\" href\x3d\"javascript:void('",g.more,"')\"",' role\x3d"option" aria-posinset\x3d"',a,'" aria-setsize\x3d"',a,'"\x3e',g.more,"\x3c/a\x3e\x3c/td\x3e");f.push("\x3c/tr\x3e\x3c/table\x3e");return f.join("")}function t(c){return"false"==c.getAttribute("contentEditable")||c.getAttribute("data-nostyle")}var k=c.config,g=c.lang.colorbutton;CKEDITOR.env.hc||(r("TextColor","fore",g.textColorTitle,10),r("BGColor","back",g.bgColorTitle,20))}});
CKEDITOR.config.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF";CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]};CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}};CKEDITOR.plugins.colordialog={requires:"dialog",init:function(b){var c=new CKEDITOR.dialogCommand("colordialog");c.editorFocus=!1;b.addCommand("colordialog",c);CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js");b.getColorFromDialog=function(c,f){var d=function(a){this.removeListener("ok",d);this.removeListener("cancel",d);a="ok"==a.name?this.getValueOf("picker","selectedColor"):null;c.call(f,a)},e=function(a){a.on("ok",d);a.on("cancel",d)};b.execCommand("colordialog");if(b._.storedDialogs&&
b._.storedDialogs.colordialog)e(b._.storedDialogs.colordialog);else CKEDITOR.on("dialogDefinition",function(a){if("colordialog"==a.data.name){var b=a.data.definition;a.removeListener();b.onLoad=CKEDITOR.tools.override(b.onLoad,function(a){return function(){e(this);b.onLoad=a;"function"==typeof a&&a.call(this)}})}})}}};CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog);(function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(a){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js"));a.addCommand("templates",new CKEDITOR.dialogCommand("templates"));a.ui.addButton&&a.ui.addButton("Templates",{label:a.lang.templates.button,command:"templates",toolbar:"doctools,10"})}});var c={},f={};CKEDITOR.addTemplates=function(a,d){c[a]=d};CKEDITOR.getTemplates=function(a){return c[a]};CKEDITOR.loadTemplates=function(a,d){for(var e=
[],b=0,c=a.length;b<c;b++)f[a[b]]||(e.push(a[b]),f[a[b]]=1);e.length?CKEDITOR.scriptLoader.load(e,d):setTimeout(d,0)}})();CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")];CKEDITOR.config.templates_replaceContent=!0;CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(g){for(var h=g.config.menu_groups.split(","),p=g._.menuGroups={},n=g._.menuItems={},a=0;a<h.length;a++)p[h[a]]=a+1;g.addMenuGroup=function(b,a){p[b]=a||100};g.addMenuItem=function(a,c){p[c.group]&&(n[a]=new CKEDITOR.menuItem(this,a,c))};g.addMenuItems=function(a){for(var c in a)this.addMenuItem(c,a[c])};g.getMenuItem=function(a){return n[a]};g.removeMenuItem=function(a){delete n[a]}}});
(function(){function g(a){a.sort(function(a,c){return a.group<c.group?-1:a.group>c.group?1:a.order<c.order?-1:a.order>c.order?1:0})}var h='\x3cspan class\x3d"cke_menuitem"\x3e\x3ca id\x3d"{id}" class\x3d"cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href\x3d"{href}" title\x3d"{title}" tabindex\x3d"-1"_cke_focus\x3d1 hidefocus\x3d"true" role\x3d"{role}" aria-haspopup\x3d"{hasPopup}" aria-disabled\x3d"{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(h+=' onkeypress\x3d"return false;"');
CKEDITOR.env.gecko&&(h+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var h=h+(' onmouseover\x3d"CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout\x3d"CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;"\x3e'),p=CKEDITOR.addTemplate("menuItem",h+'\x3cspan class\x3d"cke_menubutton_inner"\x3e\x3cspan class\x3d"cke_menubutton_icon"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{iconStyle}"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"cke_menubutton_label"\x3e{label}\x3c/span\x3e{arrowHtml}\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e'),
n=CKEDITOR.addTemplate("menuArrow",'\x3cspan class\x3d"cke_menuarrow"\x3e\x3cspan\x3e{label}\x3c/span\x3e\x3c/span\x3e');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(a,b){b=this._.definition=b||{};this.id=CKEDITOR.tools.getNextId();this.editor=a;this.items=[];this._.listeners=[];this._.level=b.level||1;var c=CKEDITOR.tools.extend({},b.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),m=c.block.attributes=c.attributes||{};!m.role&&(m.role="menu");this._.panelDefinition=
c},_:{onShow:function(){var a=this.editor.getSelection(),b=a&&a.getStartElement(),c=this.editor.elementPath(),m=this._.listeners;this.removeAll();for(var e=0;e<m.length;e++){var l=m[e](b,a,c);if(l)for(var k in l){var f=this.editor.getMenuItem(k);!f||f.command&&!this.editor.getCommand(f.command).state||(f.state=l[k],this.add(f))}}},onClick:function(a){this.hide();if(a.onClick)a.onClick();else a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var b=this.parent;b?b._.panel.hideChild(1):
27==a&&this.hide(1);return!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(a){var b=this._.subMenu,c=this.items[a];if(c=c.getItems&&c.getItems()){b?b.removeAll():(b=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),b.parent=this,b._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var m in c){var e=this.editor.getMenuItem(m);e&&(e.state=c[m],b.add(e))}var l=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+
String(a));setTimeout(function(){b.show(l,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(a){a.order||(a.order=this.items.length);this.items.push(a)},removeAll:function(){this.items=[]},show:function(a,b,c,m){if(!this.parent&&(this._.onShow(),!this.items.length))return;b=b||("rtl"==this.editor.lang.dir?2:1);var e=this.items,l=this.editor,k=this._.panel,f=this._.element;if(!k){k=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);
k.onEscape=CKEDITOR.tools.bind(function(a){if(!1===this._.onEscape(a))return!1},this);k.onShow=function(){k._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")};k.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this);f=k.addBlock(this.id,this._.panelDefinition.block);f.autoSize=!0;var d=f.keys;d[40]="next";d[9]="next";d[38]="prev";d[CKEDITOR.SHIFT+9]="prev";d["rtl"==l.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click";d[32]=CKEDITOR.env.ie?"mouseup":
"click";CKEDITOR.env.ie&&(d[13]="mouseup");f=this._.element=f.element;d=f.getDocument();d.getBody().setStyle("overflow","hidden");d.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");this._.itemOverFn=CKEDITOR.tools.addFunction(function(a){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,l.config.menu_subMenuDelay||400,this,[a])},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this);
this._.itemClickFn=CKEDITOR.tools.addFunction(function(a){var b=this.items[a];if(b.state==CKEDITOR.TRISTATE_DISABLED)this.hide(1);else if(b.getItems)this._.showSubMenu(a);else this._.onClick(b)},this)}g(e);for(var d=l.elementPath(),d=['\x3cdiv class\x3d"cke_menu'+(d&&d.direction()!=l.lang.dir?" cke_mixed_dir_content":"")+'" role\x3d"presentation"\x3e'],h=e.length,p=h&&e[0].group,n=0;n<h;n++){var q=e[n];p!=q.group&&(d.push('\x3cdiv class\x3d"cke_menuseparator" role\x3d"separator"\x3e\x3c/div\x3e'),
p=q.group);q.render(this,n,d)}d.push("\x3c/div\x3e");f.setHtml(d.join(""));CKEDITOR.ui.fire("ready",this);this.parent?this.parent._.panel.showAsChild(k,this.id,a,b,c,m):k.showBlock(this.id,a,b,c,m);l.fire("menuShow",[k])},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide(a)}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(a,b,c){CKEDITOR.tools.extend(this,c,{order:0,className:"cke_menubutton__"+b});this.group=
a._.menuGroups[this.group];this.editor=a;this.name=b},proto:{render:function(a,b,c){var h=a.id+String(b),e="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,l="",k=e==CKEDITOR.TRISTATE_ON?"on":e==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(l=' aria-checked\x3d"'+(e==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var f=this.getItems,d="\x26#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",g=this.name;this.icon&&!/\./.test(this.icon)&&(g=
this.icon);a={id:h,name:this.name,iconName:g,label:this.label,cls:this.className||"",state:k,hasPopup:f?"true":"false",disabled:e==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:a._.itemOverFn,moveOutFn:a._.itemOutFn,clickFn:a._.itemClickFn,index:b,iconStyle:CKEDITOR.skin.getIconStyle(g,"rtl"==this.editor.lang.dir,g==this.icon?null:this.icon,this.iconOffset),arrowHtml:f?n.output({label:d}):"",role:this.role?this.role:"menuitem",ariaChecked:l};
p.output(a,c)}}})})();CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div";CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(a){this.base.call(this,a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,e){a.on("contextmenu",function(a){a=a.data;var c=CKEDITOR.env.webkit?f:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey;if(!e||!c){a.preventDefault();if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var c=this.editor,
b=(new CKEDITOR.dom.elementPath(a.getTarget(),c.editable())).contains(function(a){return a.hasAttribute("contenteditable")},!0);b&&"false"==b.getAttribute("contenteditable")&&c.getSelection().fake(b)}var b=a.getTarget().getDocument(),d=a.getTarget().getDocument().getDocumentElement(),c=!b.equals(CKEDITOR.document),b=b.getWindow().getScrollPosition(),g=c?a.$.clientX:a.$.pageX||b.x+a.$.clientX,h=c?a.$.clientY:a.$.pageY||b.y+a.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(d,null,g,h)},CKEDITOR.env.ie?
200:0,this)}},this);if(CKEDITOR.env.webkit){var f,d=function(){f=0};a.on("keydown",function(a){f=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey});a.on("keyup",d);a.on("contextmenu",d)}},open:function(a,e,f,d){this.editor.focus();a=a||CKEDITOR.document.getDocumentElement();this.editor.selectionChange(1);this.show(a,e,f,d)}}})},beforeInit:function(a){var e=a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.on("contentDom",function(){e.addTarget(a.editable(),!1!==a.config.browserContextMenuOnCtrl)});
a.addCommand("contextMenu",{exec:function(){a.contextMenu.open(a.document.getBody())}});a.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu");a.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}});(function(){CKEDITOR.plugins.add("div",{requires:"dialog",init:function(a){if(!a.blockless){var c=a.lang.div,b="div(*)";CKEDITOR.dialog.isTabEnabled(a,"editdiv","advanced")&&(b+=";div[dir,id,lang,title]{*}");a.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:b,requiredContent:"div",contextSensitive:!0,refresh:function(a,c){this.setState("div"in(a.config.div_wrapTable?c.root:c.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}}));a.addCommand("editdiv",
new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"}));a.addCommand("removediv",{requiredContent:"div",exec:function(a){function c(b){(b=CKEDITOR.plugins.div.getSurroundDiv(a,b))&&!b.data("cke-div-added")&&(f.push(b),b.data("cke-div-added"))}for(var b=a.getSelection(),g=b&&b.getRanges(),e,h=b.createBookmarks(),f=[],d=0;d<g.length;d++)e=g[d],e.collapsed?c(b.getStartElement()):(e=new CKEDITOR.dom.walker(e),e.evaluator=c,e.lastForward());for(d=0;d<f.length;d++)f[d].remove(!0);b.selectBookmarks(h)}});
a.ui.addButton&&a.ui.addButton("CreateDiv",{label:c.toolbar,command:"creatediv",toolbar:"blocks,50"});a.addMenuItems&&(a.addMenuItems({editdiv:{label:c.edit,command:"editdiv",group:"div",order:1},removediv:{label:c.remove,command:"removediv",group:"div",order:5}}),a.contextMenu&&a.contextMenu.addListener(function(b){return!b||b.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(a)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null}));CKEDITOR.dialog.add("creatediv",this.path+
"dialogs/div.js");CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}});CKEDITOR.plugins.div={getSurroundDiv:function(a,c){var b=a.elementPath(c);return a.elementPath(b.blockLimit).contains(function(a){return a.is("div")&&!a.isReadOnly()},1)}}})();CKEDITOR.plugins.add("resize",{init:function(b){function f(d){var e=c.width,m=c.height,f=e+(d.data.$.screenX-n.x)*("rtl"==g?-1:1);d=m+(d.data.$.screenY-n.y);h&&(e=Math.max(a.resize_minWidth,Math.min(f,a.resize_maxWidth)));p&&(m=Math.max(a.resize_minHeight,Math.min(d,a.resize_maxHeight)));b.resize(h?e:null,m)}function k(){CKEDITOR.document.removeListener("mousemove",f);CKEDITOR.document.removeListener("mouseup",k);b.document&&(b.document.removeListener("mousemove",f),b.document.removeListener("mouseup",
k))}var a=b.config,r=b.ui.spaceId("resizer"),g=b.element?b.element.getDirection(1):"ltr";!a.resize_dir&&(a.resize_dir="vertical");void 0===a.resize_maxWidth&&(a.resize_maxWidth=3E3);void 0===a.resize_maxHeight&&(a.resize_maxHeight=3E3);void 0===a.resize_minWidth&&(a.resize_minWidth=750);void 0===a.resize_minHeight&&(a.resize_minHeight=250);if(!1!==a.resize_enabled){var l=null,n,c,h=("both"==a.resize_dir||"horizontal"==a.resize_dir)&&a.resize_minWidth!=a.resize_maxWidth,p=("both"==a.resize_dir||"vertical"==
a.resize_dir)&&a.resize_minHeight!=a.resize_maxHeight,q=CKEDITOR.tools.addFunction(function(d){l||(l=b.getResizable());c={width:l.$.offsetWidth||0,height:l.$.offsetHeight||0};n={x:d.screenX,y:d.screenY};a.resize_minWidth>c.width&&(a.resize_minWidth=c.width);a.resize_minHeight>c.height&&(a.resize_minHeight=c.height);CKEDITOR.document.on("mousemove",f);CKEDITOR.document.on("mouseup",k);b.document&&(b.document.on("mousemove",f),b.document.on("mouseup",k));d.preventDefault&&d.preventDefault()});b.on("destroy",
function(){CKEDITOR.tools.removeFunction(q)});b.on("uiSpace",function(a){if("bottom"==a.data.space){var e="";h&&!p&&(e=" cke_resizer_horizontal");!h&&p&&(e=" cke_resizer_vertical");var c='\x3cspan id\x3d"'+r+'" class\x3d"cke_resizer'+e+" cke_resizer_"+g+'" title\x3d"'+CKEDITOR.tools.htmlEncode(b.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+q+', event)"\x3e'+("ltr"==g?"◢":"◣")+"\x3c/span\x3e";"ltr"==g&&"ltr"==e?a.data.html+=c:a.data.html=c+a.data.html}},b,null,100);b.on("maximize",
function(a){b.ui.space("resizer")[a.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}});(function(){function B(a){function d(){for(var b=g(),e=CKEDITOR.tools.clone(a.config.toolbarGroups)||q(a),f=0;f<e.length;f++){var l=e[f];if("/"!=l){"string"==typeof l&&(l=e[f]={name:l});var m,d=l.groups;if(d)for(var h=0;h<d.length;h++)m=d[h],(m=b[m])&&c(l,m);(m=b[l.name])&&c(l,m)}}return e}function g(){var b={},c,f,e;for(c in a.ui.items)f=a.ui.items[c],e=f.toolbar||"others",e=e.split(","),f=e[0],e=parseInt(e[1]||-1,10),b[f]||(b[f]=[]),b[f].push({name:c,order:e});for(f in b)b[f]=b[f].sort(function(b,
a){return b.order==a.order?0:0>a.order?-1:0>b.order?1:b.order<a.order?-1:1});return b}function c(c,e){if(e.length){c.items?c.items.push(a.ui.create("-")):c.items=[];for(var f;f=e.shift();)f="string"==typeof f?f:f.name,b&&-1!=CKEDITOR.tools.indexOf(b,f)||(f=a.ui.create(f))&&a.addFeature(f)&&c.items.push(f)}}function h(b){var a=[],e,d,h;for(e=0;e<b.length;++e)d=b[e],h={},"/"==d?a.push(d):CKEDITOR.tools.isArray(d)?(c(h,CKEDITOR.tools.clone(d)),a.push(h)):d.items&&(c(h,CKEDITOR.tools.clone(d.items)),
h.name=d.name,a.push(h));return a}var b=a.config.removeButtons,b=b&&b.split(","),e=a.config.toolbar;"string"==typeof e&&(e=a.config["toolbar_"+e]);return a.toolbar=e?h(e):d()}function q(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list",
"indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var y=function(){this.toolbars=[];this.focusCommandExecuted=!1};y.prototype.focus=function(){for(var a=0,d;d=this.toolbars[a++];)for(var g=0,c;c=d.items[g++];)if(c.focus){c.focus();return}};var C={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus()},
100):a.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(a){var d,g=function(c,h){var b,e="rtl"==a.lang.dir,k=a.config.toolbarGroupCycling,r=e?37:39,e=e?39:37,k=void 0===k||k;switch(h){case 9:case CKEDITOR.SHIFT+9:for(;!b||!b.items.length;)if(b=9==h?(b?b.next:c.toolbar.next)||a.toolbox.toolbars[0]:(b?b.previous:c.toolbar.previous)||a.toolbox.toolbars[a.toolbox.toolbars.length-1],b.items.length)for(c=b.items[d?b.items.length-1:0];c&&!c.focus;)(c=d?c.previous:c.next)||
(b=0);c&&c.focus();return!1;case r:b=c;do b=b.next,!b&&k&&(b=c.toolbar.items[0]);while(b&&!b.focus);b?b.focus():g(c,9);return!1;case 40:return c.button&&c.button.hasArrow?(a.once("panelShow",function(b){b.data._.panel._.currentBlock.onKeyDown(40)}),c.execute()):g(c,40==h?r:e),!1;case e:case 38:b=c;do b=b.previous,!b&&k&&(b=c.toolbar.items[c.toolbar.items.length-1]);while(b&&!b.focus);b?b.focus():(d=1,g(c,CKEDITOR.SHIFT+9),d=0);return!1;case 27:return a.focus(),!1;case 13:case 32:return c.execute(),
!1}return!0};a.on("uiSpace",function(c){if(c.data.space==a.config.toolbarLocation){c.removeListener();a.toolbox=new y;var d=CKEDITOR.tools.getNextId(),b=['\x3cspan id\x3d"',d,'" class\x3d"cke_voice_label"\x3e',a.lang.toolbar.toolbars,"\x3c/span\x3e",'\x3cspan id\x3d"'+a.ui.spaceId("toolbox")+'" class\x3d"cke_toolbox" role\x3d"group" aria-labelledby\x3d"',d,'" onmousedown\x3d"return false;"\x3e'],d=!1!==a.config.toolbarStartupExpanded,e,k;a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&
b.push('\x3cspan class\x3d"cke_toolbox_main"'+(d?"\x3e":' style\x3d"display:none"\x3e'));for(var r=a.toolbox.toolbars,f=B(a),l=0;l<f.length;l++){var m,n=0,v,p=f[l],w;if(p)if(e&&(b.push("\x3c/span\x3e"),k=e=0),"/"===p)b.push('\x3cspan class\x3d"cke_toolbar_break"\x3e\x3c/span\x3e');else{w=p.items||p;for(var x=0;x<w.length;x++){var t=w[x],q;if(t){var z=function(c){c=c.render(a,b);u=n.items.push(c)-1;0<u&&(c.previous=n.items[u-1],c.previous.next=c);c.toolbar=n;c.onkey=g;c.onfocus=function(){a.toolbox.focusCommandExecuted||
a.focus()}};if(t.type==CKEDITOR.UI_SEPARATOR)k=e&&t;else{q=!1!==t.canGroup;if(!n){m=CKEDITOR.tools.getNextId();n={id:m,items:[]};v=p.name&&(a.lang.toolbar.toolbarGroups[p.name]||p.name);b.push('\x3cspan id\x3d"',m,'" class\x3d"cke_toolbar"',v?' aria-labelledby\x3d"'+m+'_label"':"",' role\x3d"toolbar"\x3e');v&&b.push('\x3cspan id\x3d"',m,'_label" class\x3d"cke_voice_label"\x3e',v,"\x3c/span\x3e");b.push('\x3cspan class\x3d"cke_toolbar_start"\x3e\x3c/span\x3e');var u=r.push(n)-1;0<u&&(n.previous=r[u-
1],n.previous.next=n)}q?e||(b.push('\x3cspan class\x3d"cke_toolgroup" role\x3d"presentation"\x3e'),e=1):e&&(b.push("\x3c/span\x3e"),e=0);k&&(z(k),k=0);z(t)}}}e&&(b.push("\x3c/span\x3e"),k=e=0);n&&b.push('\x3cspan class\x3d"cke_toolbar_end"\x3e\x3c/span\x3e\x3c/span\x3e')}}a.config.toolbarCanCollapse&&b.push("\x3c/span\x3e");if(a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var A=CKEDITOR.tools.addFunction(function(){a.execCommand("toolbarCollapse")});a.on("destroy",function(){CKEDITOR.tools.removeFunction(A)});
a.addCommand("toolbarCollapse",{readOnly:1,exec:function(b){var a=b.ui.space("toolbar_collapser"),c=a.getPrevious(),e=b.ui.space("contents"),d=c.getParent(),f=parseInt(e.$.style.height,10),h=d.$.offsetHeight,g=a.hasClass("cke_toolbox_collapser_min");g?(c.show(),a.removeClass("cke_toolbox_collapser_min"),a.setAttribute("title",b.lang.toolbar.toolbarCollapse)):(c.hide(),a.addClass("cke_toolbox_collapser_min"),a.setAttribute("title",b.lang.toolbar.toolbarExpand));a.getFirst().setText(g?"▲":"◀");e.setStyle("height",
f-(d.$.offsetHeight-h)+"px");b.fire("resize",{outerHeight:b.container.$.offsetHeight,contentsHeight:e.$.offsetHeight,outerWidth:b.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}});a.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse");b.push('\x3ca title\x3d"'+(d?a.lang.toolbar.toolbarCollapse:a.lang.toolbar.toolbarExpand)+'" id\x3d"'+a.ui.spaceId("toolbar_collapser")+'" tabIndex\x3d"-1" class\x3d"cke_toolbox_collapser');d||b.push(" cke_toolbox_collapser_min");
b.push('" onclick\x3d"CKEDITOR.tools.callFunction('+A+')"\x3e','\x3cspan class\x3d"cke_arrow"\x3e\x26#9650;\x3c/span\x3e',"\x3c/a\x3e")}b.push("\x3c/span\x3e");c.data.html+=b.join("")}});a.on("destroy",function(){if(this.toolbox){var a,d=0,b,e,g;for(a=this.toolbox.toolbars;d<a.length;d++)for(e=a[d].items,b=0;b<e.length;b++)g=e[b],g.clickFn&&CKEDITOR.tools.removeFunction(g.clickFn),g.keyDownFn&&CKEDITOR.tools.removeFunction(g.keyDownFn)}});a.on("uiReady",function(){var c=a.ui.space("toolbox");c&&a.focusManager.add(c,
1)});a.addCommand("toolbarFocus",C);a.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus");a.ui.add("-",CKEDITOR.UI_SEPARATOR,{});a.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(a,d){d.push('\x3cspan class\x3d"cke_toolbar_separator" role\x3d"separator"\x3e\x3c/span\x3e');return{}}}}})}});CKEDITOR.ui.prototype.addToolbarGroup=function(a,d,g){var c=q(this.editor),h=0===d,b={name:a};if(g){if(g=CKEDITOR.tools.search(c,function(a){return a.name==g})){!g.groups&&(g.groups=[]);if(d&&
(d=CKEDITOR.tools.indexOf(g.groups,d),0<=d)){g.groups.splice(d+1,0,a);return}h?g.groups.splice(0,0,a):g.groups.push(a);return}d=null}d&&(d=CKEDITOR.tools.indexOf(c,function(a){return a.name==d}));h?c.splice(0,0,a):"number"==typeof d?c.splice(d+1,0,b):c.push(a)}})();CKEDITOR.UI_SEPARATOR="separator";CKEDITOR.config.toolbarLocation="top";(function(){function q(a,e){function l(c){c=k.list[c];var d;c.equals(a.editable())||"true"==c.getAttribute("contenteditable")?(d=a.createRange(),d.selectNodeContents(c),d=d.select()):(d=a.getSelection(),d.selectElement(c));CKEDITOR.env.ie&&a.fire("selectionChange",{selection:d,path:new CKEDITOR.dom.elementPath(c)});a.focus()}function m(){n&&n.setHtml('\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e');delete k.list}var p=a.ui.spaceId("path"),n,k=a._.elementsPath,q=k.idBase;e.html+='\x3cspan id\x3d"'+
p+'_label" class\x3d"cke_voice_label"\x3e'+a.lang.elementspath.eleLabel+'\x3c/span\x3e\x3cspan id\x3d"'+p+'" class\x3d"cke_path" role\x3d"group" aria-labelledby\x3d"'+p+'_label"\x3e\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e\x3c/span\x3e';a.on("uiReady",function(){var c=a.ui.space("path");c&&a.focusManager.add(c,1)});k.onClick=l;var v=CKEDITOR.tools.addFunction(l),w=CKEDITOR.tools.addFunction(function(c,d){var g=k.idBase,b;d=new CKEDITOR.dom.event(d);b="rtl"==a.lang.dir;switch(d.getKeystroke()){case b?
39:37:case 9:return(b=CKEDITOR.document.getById(g+(c+1)))||(b=CKEDITOR.document.getById(g+"0")),b.focus(),!1;case b?37:39:case CKEDITOR.SHIFT+9:return(b=CKEDITOR.document.getById(g+(c-1)))||(b=CKEDITOR.document.getById(g+(k.list.length-1))),b.focus(),!1;case 27:return a.focus(),!1;case 13:case 32:return l(c),!1}return!0});a.on("selectionChange",function(){for(var c=[],d=k.list=[],g=[],b=k.filters,e=!0,l=a.elementPath().elements,f,u=l.length;u--;){var h=l[u],r=0;f=h.data("cke-display-name")?h.data("cke-display-name"):
h.data("cke-real-element-type")?h.data("cke-real-element-type"):h.getName();(e=h.hasAttribute("contenteditable")?"true"==h.getAttribute("contenteditable"):e)||h.hasAttribute("contenteditable")||(r=1);for(var t=0;t<b.length;t++){var m=b[t](h,f);if(!1===m){r=1;break}f=m||f}r||(d.unshift(h),g.unshift(f))}d=d.length;for(b=0;b<d;b++)f=g[b],e=a.lang.elementspath.eleTitle.replace(/%1/,f),f=x.output({id:q+b,label:e,text:f,jsTitle:"javascript:void('"+f+"')",index:b,keyDownFn:w,clickFn:v}),c.unshift(f);n||
(n=CKEDITOR.document.getById(p));g=n;g.setHtml(c.join("")+'\x3cspan class\x3d"cke_path_empty"\x3e\x26nbsp;\x3c/span\x3e');a.fire("elementsPathUpdate",{space:g})});a.on("readOnly",m);a.on("contentDomUnload",m);a.addCommand("elementsPathFocus",y.toolbarFocus);a.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var y={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(a){(a=CKEDITOR.document.getById(a._.elementsPath.idBase+"0"))&&a.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},e="";CKEDITOR.env.gecko&&
CKEDITOR.env.mac&&(e+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(e+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var x=CKEDITOR.addTemplate("pathItem",'\x3ca id\x3d"{id}" href\x3d"{jsTitle}" tabindex\x3d"-1" class\x3d"cke_path_item" title\x3d"{label}"'+e+' hidefocus\x3d"true"  onkeydown\x3d"return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role\x3d"button" aria-label\x3d"{label}"\x3e{text}\x3c/a\x3e');
CKEDITOR.plugins.add("elementspath",{init:function(a){a._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]};a.on("uiSpace",function(e){"bottom"==e.data.space&&q(a,e.data)})}})})();(function(){function q(b,d,a){a=b.config.forceEnterMode||a;"wysiwyg"==b.mode&&(d||(d=b.activeEnterMode),b.elementPath().isContextFor("p")||(d=CKEDITOR.ENTER_BR,a=1),b.fire("saveSnapshot"),d==CKEDITOR.ENTER_BR?t(b,d,null,a):u(b,d,null,a),b.fire("saveSnapshot"))}function v(b){b=b.getSelection().getRanges(!0);for(var d=b.length-1;0<d;d--)b[d].deleteContents();return b[0]}function y(b){var d=b.startContainer.getAscendant(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&"true"==a.getAttribute("contenteditable")},
!0);if(b.root.equals(d))return b;d=new CKEDITOR.dom.range(d);d.moveToRange(b);return d}CKEDITOR.plugins.add("enterkey",{init:function(b){b.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){q(b)}});b.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){q(b,b.activeShiftEnterMode,1)}});b.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var z=CKEDITOR.dom.walker.whitespaces(),A=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(b,
d,a,h){if(a=a||v(b)){a=y(a);var f=a.document,k=a.checkStartOfBlock(),m=a.checkEndOfBlock(),l=b.elementPath(a.startContainer),c=l.block,n=d==CKEDITOR.ENTER_DIV?"div":"p",e;if(k&&m){if(c&&(c.is("li")||c.getParent().is("li"))){c.is("li")||(c=c.getParent());a=c.getParent();e=a.getParent();h=!c.hasPrevious();var p=!c.hasNext(),n=b.getSelection(),g=n.createBookmarks(),k=c.getDirection(1),m=c.getAttribute("class"),r=c.getAttribute("style"),q=e.getDirection(1)!=k;b=b.enterMode!=CKEDITOR.ENTER_BR||q||r||m;
if(e.is("li"))h||p?(h&&p&&a.remove(),c[p?"insertAfter":"insertBefore"](e)):c.breakParent(e);else{if(b)if(l.block.is("li")?(e=f.createElement(d==CKEDITOR.ENTER_P?"p":"div"),q&&e.setAttribute("dir",k),r&&e.setAttribute("style",r),m&&e.setAttribute("class",m),c.moveChildren(e)):e=l.block,h||p)e[h?"insertBefore":"insertAfter"](a);else c.breakParent(a),e.insertAfter(a);else if(c.appendBogus(!0),h||p)for(;f=c[h?"getFirst":"getLast"]();)f[h?"insertBefore":"insertAfter"](a);else for(c.breakParent(a);f=c.getLast();)f.insertAfter(a);
c.remove()}n.selectBookmarks(g);return}if(c&&c.getParent().is("blockquote")){c.breakParent(c.getParent());c.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||c.getPrevious().remove();c.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||c.getNext().remove();a.moveToElementEditStart(c);a.select();return}}else if(c&&c.is("pre")&&!m){t(b,d,a,h);return}if(k=a.splitBlock(n)){d=k.previousBlock;c=k.nextBlock;l=k.wasStartOfBlock;b=k.wasEndOfBlock;c?(g=c.getParent(),g.is("li")&&(c.breakParent(g),
c.move(c.getNext(),1))):d&&(g=d.getParent())&&g.is("li")&&(d.breakParent(g),g=d.getNext(),a.moveToElementEditStart(g),d.move(d.getPrevious()));if(l||b){if(d){if(d.is("li")||!w.test(d.getName())&&!d.is("pre"))e=d.clone()}else c&&(e=c.clone());e?h&&!e.is("li")&&e.renameNode(n):g&&g.is("li")?e=g:(e=f.createElement(n),d&&(p=d.getDirection())&&e.setAttribute("dir",p));if(f=k.elementPath)for(h=0,n=f.elements.length;h<n;h++){g=f.elements[h];if(g.equals(f.block)||g.equals(f.blockLimit))break;CKEDITOR.dtd.$removeEmpty[g.getName()]&&
(g=g.clone(),e.moveChildren(g),e.append(g))}e.appendBogus();e.getParent()||a.insertNode(e);e.is("li")&&e.removeAttribute("value");!CKEDITOR.env.ie||!l||b&&d.getChildCount()||(a.moveToElementEditStart(b?d:e),a.select());a.moveToElementEditStart(l&&!b?c:e)}else c.is("li")&&(e=a.clone(),e.selectNodeContents(c),e=new CKEDITOR.dom.walker(e),e.evaluator=function(a){return!(A(a)||z(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$inline&&!(a.getName()in CKEDITOR.dtd.$empty))},(g=e.next())&&
g.type==CKEDITOR.NODE_ELEMENT&&g.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?f.createElement("br"):f.createText(" ")).insertBefore(g)),c&&a.moveToElementEditStart(c);a.select();a.scrollIntoView()}}},enterBr:function(b,d,a,h){if(a=a||v(b)){var f=a.document,k=a.checkEndOfBlock(),m=new CKEDITOR.dom.elementPath(b.getSelection().getStartElement()),l=m.block,c=l&&m.block.getName();h||"li"!=c?(!h&&k&&w.test(c)?(k=l.getDirection())?(f=f.createElement("div"),f.setAttribute("dir",k),f.insertAfter(l),a.setStart(f,
0)):(f.createElement("br").insertAfter(l),CKEDITOR.env.gecko&&f.createText("").insertAfter(l),a.setStartAt(l.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(b="pre"==c&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?f.createText("\r"):f.createElement("br"),a.deleteContents(),a.insertNode(b),CKEDITOR.env.needsBrFiller?(f.createText("﻿").insertAfter(b),k&&(l||m.blockLimit).appendBogus(),b.getNext().$.nodeValue="",a.setStartAt(b.getNext(),CKEDITOR.POSITION_AFTER_START)):
a.setStartAt(b,CKEDITOR.POSITION_AFTER_END)),a.collapse(!0),a.select(),a.scrollIntoView()):u(b,d,a,h)}}};var x=CKEDITOR.plugins.enterkey,t=x.enterBr,u=x.enterBlock,w=/^h[1-6]$/})();(function(){function k(b,f){var g={},c=[],e={nbsp:" ",shy:"­",gt:"\x3e",lt:"\x3c",amp:"\x26",apos:"'",quot:'"'};b=b.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(b,a){var d=f?"\x26"+a+";":e[a];g[d]=f?e[a]:"\x26"+a+";";c.push(d);return""});if(!f&&b){b=b.split(",");var a=document.createElement("div"),d;a.innerHTML="\x26"+b.join(";\x26")+";";d=a.innerHTML;a=null;for(a=0;a<d.length;a++){var h=d.charAt(a);g[h]="\x26"+b[a]+";";c.push(h)}}g.regex=c.join(f?"|":"");return g}CKEDITOR.plugins.add("entities",
{afterInit:function(b){function f(a){return h[a]}function g(b){return"force"!=c.entities_processNumerical&&a[b]?a[b]:"\x26#"+b.charCodeAt(0)+";"}var c=b.config;if(b=(b=b.dataProcessor)&&b.htmlFilter){var e=[];!1!==c.basicEntities&&e.push("nbsp,gt,lt,amp");c.entities&&(e.length&&e.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),
c.entities_latin&&e.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),c.entities_greek&&e.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),
c.entities_additional&&e.push(c.entities_additional));var a=k(e.join(",")),d=a.regex?"["+a.regex+"]":"a^";delete a.regex;c.entities&&c.entities_processNumerical&&(d="[^ -~]|"+d);var d=new RegExp(d,"g"),h=k("nbsp,gt,lt,amp,shy",!0),l=new RegExp(h.regex,"g");b.addRules({text:function(a){return a.replace(l,f).replace(d,g)}},{applyToAll:!0,excludeNestedEditable:!0})}}})})();CKEDITOR.config.basicEntities=!0;CKEDITOR.config.entities=!0;CKEDITOR.config.entities_latin=!0;CKEDITOR.config.entities_greek=!0;
CKEDITOR.config.entities_additional="#39";CKEDITOR.plugins.add("popup");
CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,a,b,d){a=a||"80%";b=b||"70%";"string"==typeof a&&1<a.length&&"%"==a.substr(a.length-1,1)&&(a=parseInt(window.screen.width*parseInt(a,10)/100,10));"string"==typeof b&&1<b.length&&"%"==b.substr(b.length-1,1)&&(b=parseInt(window.screen.height*parseInt(b,10)/100,10));640>a&&(a=640);420>b&&(b=420);var f=parseInt((window.screen.height-b)/2,10),g=parseInt((window.screen.width-a)/2,10);d=(d||"location\x3dno,menubar\x3dno,toolbar\x3dno,dependent\x3dyes,minimizable\x3dno,modal\x3dyes,alwaysRaised\x3dyes,resizable\x3dyes,scrollbars\x3dyes")+",width\x3d"+
a+",height\x3d"+b+",top\x3d"+f+",left\x3d"+g;var c=window.open("",null,d,!0);if(!c)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(c.moveTo(g,f),c.resizeTo(a,b)),c.focus(),c.location.href=e}catch(h){window.open(e,null,d,!0)}return!0}});(function(){function g(a,c){var d=[];if(c)for(var b in c)d.push(b+"\x3d"+encodeURIComponent(c[b]));else return a;return a+(-1!=a.indexOf("?")?"\x26":"?")+d.join("\x26")}function k(a){a+="";return a.charAt(0).toUpperCase()+a.substr(1)}function m(){var a=this.getDialog(),c=a.getParentEditor();c._.filebrowserSe=this;var d=c.config["filebrowser"+k(a.getName())+"WindowWidth"]||c.config.filebrowserWindowWidth||"80%",a=c.config["filebrowser"+k(a.getName())+"WindowHeight"]||c.config.filebrowserWindowHeight||
"70%",b=this.filebrowser.params||{};b.CKEditor=c.name;b.CKEditorFuncNum=c._.filebrowserFn;b.langCode||(b.langCode=c.langCode);b=g(this.filebrowser.url,b);c.popup(b,d,a,c.config.filebrowserWindowFeatures||c.config.fileBrowserWindowFeatures)}function n(){var a=this.getDialog();a.getParentEditor()._.filebrowserSe=this;return a.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value&&a.getContentElement(this["for"][0],this["for"][1]).getAction()?!0:!1}function p(a,c,d){var b=d.params||
{};b.CKEditor=a.name;b.CKEditorFuncNum=a._.filebrowserFn;b.langCode||(b.langCode=a.langCode);c.action=g(d.url,b);c.filebrowser=d}function l(a,c,d,b){if(b&&b.length)for(var e,g=b.length;g--;)if(e=b[g],"hbox"!=e.type&&"vbox"!=e.type&&"fieldset"!=e.type||l(a,c,d,e.children),e.filebrowser)if("string"==typeof e.filebrowser&&(e.filebrowser={action:"fileButton"==e.type?"QuickUpload":"Browse",target:e.filebrowser}),"Browse"==e.filebrowser.action){var f=e.filebrowser.url;void 0===f&&(f=a.config["filebrowser"+
k(c)+"BrowseUrl"],void 0===f&&(f=a.config.filebrowserBrowseUrl));f&&(e.onClick=m,e.filebrowser.url=f,e.hidden=!1)}else if("QuickUpload"==e.filebrowser.action&&e["for"]&&(f=e.filebrowser.url,void 0===f&&(f=a.config["filebrowser"+k(c)+"UploadUrl"],void 0===f&&(f=a.config.filebrowserUploadUrl)),f)){var h=e.onClick;e.onClick=function(a){var b=a.sender;if(h&&!1===h.call(b,a))return!1;if(n.call(b,a)){a=b.getDialog().getContentElement(this["for"][0],this["for"][1]).getInputElement();if(b=new CKEDITOR.dom.element(a.$.form))(a=
b.$.elements.ckCsrfToken)?a=new CKEDITOR.dom.element(a):(a=new CKEDITOR.dom.element("input"),a.setAttributes({name:"ckCsrfToken",type:"hidden"}),b.append(a)),a.setAttribute("value",CKEDITOR.tools.getCsrfToken());return!0}return!1};e.filebrowser.url=f;e.hidden=!1;p(a,d.getContents(e["for"][0]).get(e["for"][1]),e.filebrowser)}}function h(a,c,d){if(-1!==d.indexOf(";")){d=d.split(";");for(var b=0;b<d.length;b++)if(h(a,c,d[b]))return!0;return!1}return(a=a.getContents(c).get(d).filebrowser)&&a.url}function q(a,
c){var d=this._.filebrowserSe.getDialog(),b=this._.filebrowserSe["for"],e=this._.filebrowserSe.filebrowser.onSelect;b&&d.getContentElement(b[0],b[1]).reset();if("function"!=typeof c||!1!==c.call(this._.filebrowserSe))if(!e||!1!==e.call(this._.filebrowserSe,a,c))if("string"==typeof c&&c&&alert(c),a&&(b=this._.filebrowserSe,d=b.getDialog(),b=b.filebrowser.target||null))if(b=b.split(":"),e=d.getContentElement(b[0],b[1]))e.setValue(a),d.selectPage(b[0])}CKEDITOR.plugins.add("filebrowser",{requires:"popup",
init:function(a){a._.filebrowserFn=CKEDITOR.tools.addFunction(q,a);a.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}});CKEDITOR.on("dialogDefinition",function(a){if(a.editor.plugins.filebrowser)for(var c=a.data.definition,d,b=0;b<c.contents.length;++b)if(d=c.contents[b])l(a.editor,a.data.name,c,d.elements),d.hidden&&d.filebrowser&&(d.hidden=!h(c,d.id,d.filebrowser))})})();CKEDITOR.plugins.add("find",{requires:"dialog",init:function(a){var b=a.addCommand("find",new CKEDITOR.dialogCommand("find"));b.canUndo=!1;b.readOnly=1;a.addCommand("replace",new CKEDITOR.dialogCommand("replace")).canUndo=!1;a.ui.addButton&&(a.ui.addButton("Find",{label:a.lang.find.find,command:"find",toolbar:"find,10"}),a.ui.addButton("Replace",{label:a.lang.find.replace,command:"replace",toolbar:"find,20"}));CKEDITOR.dialog.add("find",this.path+"dialogs/find.js");CKEDITOR.dialog.add("replace",this.path+
"dialogs/find.js")}});CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}};(function(){function g(a,b){var c=l.exec(a),d=l.exec(b);if(c){if(!c[2]&&"px"==d[2])return d[1];if("px"==c[2]&&!d[2])return d[1]+"px"}return b}var k=CKEDITOR.htmlParser.cssStyle,h=CKEDITOR.tools.cssLength,l=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,m={elements:{$:function(a){var b=a.attributes;if((b=(b=(b=b&&b["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(b)))&&b.children[0])&&a.attributes["data-cke-resizable"]){var c=(new k(a)).rules;a=b.attributes;var d=c.width,
c=c.height;d&&(a.width=g(a.width,d));c&&(a.height=g(a.height,c))}return b}}};CKEDITOR.plugins.add("fakeobjects",{init:function(a){a.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(a){(a=(a=a.dataProcessor)&&a.htmlFilter)&&a.addRules(m,{applyToAll:!0})}});CKEDITOR.editor.prototype.createFakeElement=function(a,b,c,d){var e=this.lang.fakeobjects,e=e[c]||e.unknown;b={"class":b,"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,
alt:e,title:e,align:a.getAttribute("align")||""};CKEDITOR.env.hc||(b.src=CKEDITOR.tools.transparentImageData);c&&(b["data-cke-real-element-type"]=c);d&&(b["data-cke-resizable"]=d,c=new k,d=a.getAttribute("width"),a=a.getAttribute("height"),d&&(c.rules.width=h(d)),a&&(c.rules.height=h(a)),c.populate(b));return this.document.createElement("img",{attributes:b})};CKEDITOR.editor.prototype.createFakeParserElement=function(a,b,c,d){var e=this.lang.fakeobjects,e=e[c]||e.unknown,f;f=new CKEDITOR.htmlParser.basicWriter;
a.writeHtml(f);f=f.getHtml();b={"class":b,"data-cke-realelement":encodeURIComponent(f),"data-cke-real-node-type":a.type,alt:e,title:e,align:a.attributes.align||""};CKEDITOR.env.hc||(b.src=CKEDITOR.tools.transparentImageData);c&&(b["data-cke-real-element-type"]=c);d&&(b["data-cke-resizable"]=d,d=a.attributes,a=new k,c=d.width,d=d.height,void 0!==c&&(a.rules.width=h(c)),void 0!==d&&(a.rules.height=h(d)),a.populate(b));return new CKEDITOR.htmlParser.element("img",b)};CKEDITOR.editor.prototype.restoreRealElement=
function(a){if(a.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var b=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(a.data("cke-realelement")),this.document);if(a.data("cke-resizable")){var c=a.getStyle("width");a=a.getStyle("height");c&&b.setAttribute("width",g(b.getAttribute("width"),c));a&&b.setAttribute("height",g(b.getAttribute("height"),a))}return b}})();(function(){function d(a){a=a.attributes;return"application/x-shockwave-flash"==a.type||f.test(a.src||"")}function e(a,b){return a.createFakeParserElement(b,"cke_flash","flash",!0)}var f=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},
init:function(a){var b="object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]";CKEDITOR.dialog.isTabEnabled(a,"flash","properties")&&(b+=";object[align]; embed[allowscriptaccess,quality,scale,wmode]");CKEDITOR.dialog.isTabEnabled(a,"flash","advanced")&&(b+=";object[id]{*}; embed[bgcolor]{*}(*)");a.addCommand("flash",new CKEDITOR.dialogCommand("flash",{allowedContent:b,requiredContent:"embed"}));a.ui.addButton&&a.ui.addButton("Flash",
{label:a.lang.common.flash,command:"flash",toolbar:"insert,20"});CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js");a.addMenuItems&&a.addMenuItems({flash:{label:a.lang.flash.properties,command:"flash",group:"flash"}});a.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&"flash"==b.data("cke-real-element-type")&&(a.data.dialog="flash")});a.contextMenu&&a.contextMenu.addListener(function(a){if(a&&a.is("img")&&!a.isReadOnly()&&"flash"==a.data("cke-real-element-type"))return{flash:CKEDITOR.TRISTATE_OFF}})},
afterInit:function(a){var b=a.dataProcessor;(b=b&&b.dataFilter)&&b.addRules({elements:{"cke:object":function(b){var c=b.attributes;if(!(c.classid&&String(c.classid).toLowerCase()||d(b))){for(c=0;c<b.children.length;c++)if("cke:embed"==b.children[c].name){if(!d(b.children[c]))break;return e(a,b)}return null}return e(a,b)},"cke:embed":function(b){return d(b)?e(a,b):null}}},5)}})})();CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1});(function(){function k(a){var l=a.config,p=a.fire("uiSpace",{space:"top",html:""}).html,t=function(){function f(a,c,e){b.setStyle(c,w(e));b.setStyle("position",a)}function e(a){var b=k.getDocumentPosition();switch(a){case "top":f("absolute","top",b.y-q-r);break;case "pin":f("fixed","top",x);break;case "bottom":f("absolute","top",b.y+(c.height||c.bottom-c.top)+r)}m=a}var m,k,n,c,h,q,v,p=l.floatSpaceDockedOffsetX||0,r=l.floatSpaceDockedOffsetY||0,u=l.floatSpacePinnedOffsetX||0,x=l.floatSpacePinnedOffsetY||
0;return function(d){if(k=a.editable()){var f=d&&"focus"==d.name;f&&b.show();a.fire("floatingSpaceLayout",{show:f});b.removeStyle("left");b.removeStyle("right");n=b.getClientRect();c=k.getClientRect();h=g.getViewPaneSize();q=n.height;v="pageXOffset"in g.$?g.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft;m?(q+r<=c.top?e("top"):q+r>h.height-c.bottom?e("pin"):e("bottom"),d=h.width/2,d=l.floatSpacePreferRight?"right":0<c.left&&c.right<h.width&&c.width>n.width?"rtl"==l.contentsLangDirection?
"right":"left":d-c.left>c.right-d?"left":"right",n.width>h.width?(d="left",f=0):(f="left"==d?0<c.left?c.left:0:c.right<h.width?h.width-c.right:0,f+n.width>h.width&&(d="left"==d?"right":"left",f=0)),b.setStyle(d,w(("pin"==m?u:p)+f+("pin"==m?0:"left"==d?v:-v)))):(m="pin",e("pin"),t(d))}}}();if(p){var k=new CKEDITOR.template('\x3cdiv id\x3d"cke_{name}" class\x3d"cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir\x3d"{langDir}" title\x3d"'+(CKEDITOR.env.gecko?
" ":"")+'" lang\x3d"{langCode}" role\x3d"application" style\x3d"{style}"'+(a.title?' aria-labelledby\x3d"cke_{name}_arialbl"':" ")+"\x3e"+(a.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':" ")+'\x3cdiv class\x3d"cke_inner"\x3e\x3cdiv id\x3d"{topId}" class\x3d"cke_top" role\x3d"presentation"\x3e{content}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),b=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(k.output({content:p,id:a.id,langDir:a.lang.dir,
langCode:a.langCode,name:a.name,style:"display:none;z-index:"+(l.baseFloatZIndex-1),topId:a.ui.spaceId("top"),voiceLabel:a.title}))),u=CKEDITOR.tools.eventsBuffer(500,t),e=CKEDITOR.tools.eventsBuffer(100,t);b.unselectable();b.on("mousedown",function(a){a=a.data;a.getTarget().hasAscendant("a",1)||a.preventDefault()});a.on("focus",function(b){t(b);a.on("change",u.input);g.on("scroll",e.input);g.on("resize",e.input)});a.on("blur",function(){b.hide();a.removeListener("change",u.input);g.removeListener("scroll",
e.input);g.removeListener("resize",e.input)});a.on("destroy",function(){g.removeListener("scroll",e.input);g.removeListener("resize",e.input);b.clearCustomData();b.remove()});a.focusManager.hasFocus&&b.show();a.focusManager.add(b,1)}}var g=CKEDITOR.document.getWindow(),w=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(a){a.on("loaded",function(){k(this)},null,null,20)}})})();CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var f=CKEDITOR.addTemplate("panel-list",'\x3cul role\x3d"presentation" class\x3d"cke_panel_list"\x3e{items}\x3c/ul\x3e'),g=CKEDITOR.addTemplate("panel-list-item",'\x3cli id\x3d"{id}" class\x3d"cke_panel_listItem" role\x3dpresentation\x3e\x3ca id\x3d"{id}_option" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"{title}" href\x3d"javascript:void(\'{val}\')"  {onclick}\x3d"CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role\x3d"option"\x3e{text}\x3c/a\x3e\x3c/li\x3e'),
h=CKEDITOR.addTemplate("panel-list-group",'\x3ch1 id\x3d"{id}" class\x3d"cke_panel_grouptitle" role\x3d"presentation" \x3e{label}\x3c/h1\x3e'),k=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),b))};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,b){b=b||{};var c=b.attributes||(b.attributes={});(this.multiSelect=!!b.multiSelect)&&(c["aria-multiselectable"]=!0);!c.role&&
(c.role="listbox");this.base.apply(this,arguments);this.element.setAttribute("role",c.role);c=this.keys;c[40]="next";c[9]="next";c[38]="prev";c[CKEDITOR.SHIFT+9]="prev";c[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(c[13]="mouseup");this._.pendingHtml=[];this._.pendingList=[];this._.items={};this._.groups={}},_:{close:function(){if(this._.started){var a=f.output({items:this._.pendingList.join("")});this._.pendingList=[];this._.pendingHtml.push(a);delete this._.started}},getClick:function(){this._.click||
(this._.click=CKEDITOR.tools.addFunction(function(a){var b=this.toggle(a);if(this.onClick)this.onClick(a,b)},this));return this._.click}},proto:{add:function(a,b,c){var d=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0);this._.items[a]=d;var e;e=CKEDITOR.tools.htmlEncodeAttr(a).replace(k,"\\'");a={id:d,val:e,onclick:CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(c||a),text:b||a};
this._.pendingList.push(g.output(a))},startGroup:function(a){this._.close();var b=CKEDITOR.tools.getNextId();this._.groups[a]=b;this._.pendingHtml.push(h.output({id:b,label:a}))},commit:function(){this._.close();this.element.appendHtml(this._.pendingHtml.join(""));delete this._.size;this._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);b?this.unmark(a):this.mark(a);return!b},hideGroup:function(a){var b=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display",
"none"),b&&"ul"==b.getName()&&b.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var a=this._.items,b=this._.groups,c=this.element.getDocument(),d;for(d in a)c.getById(a[d]).setStyle("display","");for(var e in b)a=c.getById(b[e]),d=a.getNext(),a.setStyle("display",""),d&&"ul"==d.getName()&&d.setStyle("display","")},mark:function(a){this.multiSelect||this.unmarkAll();a=this._.items[a];var b=this.element.getDocument().getById(a);
b.addClass("cke_selected");this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0);this.onMark&&this.onMark(b)},unmark:function(a){var b=this.element.getDocument();a=this._.items[a];var c=b.getById(a);c.removeClass("cke_selected");b.getById(a+"_option").removeAttribute("aria-selected");this.onUnmark&&this.onUnmark(c)},unmarkAll:function(){var a=this._.items,b=this.element.getDocument(),c;for(c in a){var d=a[c];b.getById(d).removeClass("cke_selected");b.getById(d+"_option").removeAttribute("aria-selected")}this.onUnmark&&
this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;var b=this.element.getElementsByTag("a"),c,d=-1;if(a)for(c=this.element.getDocument().getById(this._.items[a]).getFirst();a=b.getItem(++d);){if(a.equals(c)){this._.focusIndex=d;break}}else this.element.focus();c&&setTimeout(function(){c.focus()},0)}}})}});CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(d){d.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}});
(function(){var d='\x3cspan id\x3d"{id}" class\x3d"cke_combo cke_combo__{name} {cls}" role\x3d"presentation"\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_combo_label"\x3e{label}\x3c/span\x3e\x3ca class\x3d"cke_combo_button" title\x3d"{title}" tabindex\x3d"-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+' hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(d+=' onkeypress\x3d"return false;"');
CKEDITOR.env.gecko&&(d+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var d=d+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan id\x3d"{id}_text" class\x3d"cke_combo_text cke_combo_inlinelabel"\x3e{label}\x3c/span\x3e\x3cspan class\x3d"cke_combo_open"\x3e\x3cspan class\x3d"cke_combo_arrow"\x3e'+
(CKEDITOR.env.hc?"\x26#9660;":CKEDITOR.env.air?"\x26nbsp;":"")+"\x3c/span\x3e\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e"),k=CKEDITOR.addTemplate("combo",d);CKEDITOR.UI_RICHCOMBO="richcombo";CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(a){CKEDITOR.tools.extend(this,a,{canGroup:!1,title:a.label,modes:{wysiwyg:1},editorFocus:1});a=this.panel||{};delete this.panel;this.id=CKEDITOR.tools.getNextNumber();this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document;a.className="cke_combopanel";
a.block={multiSelect:a.multiSelect,attributes:a.attributes};a.toolbarRelated=!0;this._={panelDefinition:a,items:{}}},proto:{renderHtml:function(a){var b=[];this.render(a,b);return b.join("")},render:function(a,b){function g(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var c=this.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;a.readOnly&&!this.readOnly&&(c=CKEDITOR.TRISTATE_DISABLED);this.setState(c);this.setValue("");c!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var d=
CKEDITOR.env,h="cke_"+this.id,e=CKEDITOR.tools.addFunction(function(b){l&&(a.unlockSelection(1),l=0);c.execute(b)},this),f=this,c={id:h,combo:this,focus:function(){CKEDITOR.document.getById(h).getChild(1).focus()},execute:function(c){var b=f._;if(b.state!=CKEDITOR.TRISTATE_DISABLED)if(f.createPanel(a),b.on)b.panel.hide();else{f.commit();var d=f.getValue();d?b.list.mark(d):b.list.unmarkAll();b.panel.showBlock(f.id,new CKEDITOR.dom.element(c),4)}},clickFn:e};a.on("activeFilterChange",g,this);a.on("mode",
g,this);a.on("selectionChange",g,this);!this.readOnly&&a.on("readOnly",g,this);var m=CKEDITOR.tools.addFunction(function(b,d){b=new CKEDITOR.dom.event(b);var g=b.getKeystroke();if(40==g)a.once("panelShow",function(a){a.data._.panel._.currentBlock.onKeyDown(40)});switch(g){case 13:case 32:case 40:CKEDITOR.tools.callFunction(e,d);break;default:c.onkey(c,g)}b.preventDefault()}),n=CKEDITOR.tools.addFunction(function(){c.onfocus&&c.onfocus()}),l=0;c.keyDownFn=m;d={id:h,name:this.name||this.command,label:this.label,
title:this.title,cls:this.className||"",titleJs:d.gecko&&!d.hc?"":(this.title||"").replace("'",""),keydownFn:m,focusFn:n,clickFn:e};k.output(d,b);if(this.onRender)this.onRender();return c},createPanel:function(a){if(!this._.panel){var b=this._.panelDefinition,d=this._.panelDefinition.block,k=b.parent||CKEDITOR.document.getBody(),h="cke_combopanel__"+this.name,e=new CKEDITOR.ui.floatPanel(a,k,b),f=e.addListBlock(this.id,d),c=this;e.onShow=function(){this.element.addClass(h);c.setState(CKEDITOR.TRISTATE_ON);
c._.on=1;c.editorFocus&&!a.focusManager.hasFocus&&a.focus();if(c.onOpen)c.onOpen();a.once("panelShow",function(){f.focus(!f.multiSelect&&c.getValue())})};e.onHide=function(b){this.element.removeClass(h);c.setState(c.modes&&c.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);c._.on=0;if(!b&&c.onClose)c.onClose()};e.onEscape=function(){e.hide(1)};f.onClick=function(a,b){c.onClick&&c.onClick.call(c,a,b);e.hide()};this._.panel=e;this._.list=f;e.getBlock(this.id).onHide=function(){c._.on=
0;c.setState(CKEDITOR.TRISTATE_OFF)};this.init&&this.init()}},setValue:function(a,b){this._.value=a;var d=this.document.getById("cke_"+this.id+"_text");d&&(a||b?d.removeClass("cke_combo_inlinelabel"):(b=this.label,d.addClass("cke_combo_inlinelabel")),d.setText("undefined"!=typeof b?b:a))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},
showAll:function(){this._.list.showAll()},add:function(a,b,d){this._.items[a]=d||a;this._.list.add(a,b,d)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this));this._.committed=1},setState:function(a){if(this._.state!=a){var b=this.document.getById("cke_"+this.id);b.setState(a,"cke_combo");a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled");this._.state=
a}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(a){return new CKEDITOR.ui.richCombo(a)}}}});CKEDITOR.ui.prototype.addRichCombo=function(a,b){this.add(a,CKEDITOR.UI_RICHCOMBO,b)}})();(function(){function l(a,b,c,f,p,l,t,v){var w=a.config,q=new CKEDITOR.style(t),k=p.split(";");p=[];for(var m={},d=0;d<k.length;d++){var h=k[d];if(h){var h=h.split("/"),u={},n=k[d]=h[0];u[c]=p[d]=h[1]||n;m[n]=new CKEDITOR.style(t,u);m[n]._.definition.name=n}else k.splice(d--,1)}a.ui.addRichCombo(b,{label:f.label,title:f.panelTitle,toolbar:"styles,"+v,allowedContent:q,requiredContent:q,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(w.contentsCss),multiSelect:!1,attributes:{"aria-label":f.panelTitle}},
init:function(){this.startGroup(f.panelTitle);for(var a=0;a<k.length;a++){var b=k[a];this.add(b,m[b].buildPreview(),b)}},onClick:function(b){a.focus();a.fire("saveSnapshot");var c=this.getValue(),f=m[b];if(c&&b!=c){var k=m[c],e=a.getSelection().getRanges()[0];if(e.collapsed){var d=a.elementPath(),g=d.contains(function(a){return k.checkElementRemovable(a)});if(g){var h=e.checkBoundaryOfElement(g,CKEDITOR.START),l=e.checkBoundaryOfElement(g,CKEDITOR.END);if(h&&l){for(h=e.createBookmark();d=g.getFirst();)d.insertBefore(g);
g.remove();e.moveToBookmark(h)}else h?e.moveToPosition(g,CKEDITOR.POSITION_BEFORE_START):l?e.moveToPosition(g,CKEDITOR.POSITION_AFTER_END):(e.splitElement(g),e.moveToPosition(g,CKEDITOR.POSITION_AFTER_END),r(e,d.elements.slice(),g));a.getSelection().selectRanges([e])}}else a.removeStyle(k)}a[c==b?"removeStyle":"applyStyle"](f);a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(b){var c=this.getValue();b=b.data.path.elements;for(var d=0,f;d<b.length;d++){f=b[d];for(var e in m)if(m[e].checkElementMatch(f,
!0,a)){e!=c&&this.setValue(e);return}}this.setValue("",l)},this)},refresh:function(){a.activeFilter.check(q)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})}function r(a,b,c){var f=b.pop();if(f){if(c)return r(a,b,f.equals(c)?null:c);c=f.clone();a.insertNode(c);a.moveToPosition(c,CKEDITOR.POSITION_AFTER_START);r(a,b)}}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(a){var b=a.config;l(a,"Font","family",a.lang.font,b.font_names,b.font_defaultLabel,b.font_style,30);l(a,"FontSize","size",
a.lang.font.fontSize,b.fontSize_sizes,b.fontSize_defaultLabel,b.fontSize_style,40)}})})();CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif";
CKEDITOR.config.font_defaultLabel="";CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]};CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px";CKEDITOR.config.fontSize_defaultLabel="";CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]};CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n");CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(a){var b=a.lang,g=0,h={email:1,password:1,search:1,tel:1,text:1,url:1},l={checkbox:"input[type,name,checked,required]",
radio:"input[type,name,checked,required]",textfield:"input[type,name,value,size,maxlength,required]",textarea:"textarea[cols,rows,name,required]",select:"select[name,size,multiple,required]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},m={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",
select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},e=function(d,c,e){var h={allowedContent:l[c],requiredContent:m[c]};"form"==c&&(h.context="form");a.addCommand(c,new CKEDITOR.dialogCommand(c,h));a.ui.addButton&&a.ui.addButton(d,{label:b.common[d.charAt(0).toLowerCase()+d.slice(1)],command:c,toolbar:"forms,"+(g+=10)});CKEDITOR.dialog.add(c,e)},f=this.path+"dialogs/";!a.blockless&&e("Form","form",f+"form.js");e("Checkbox","checkbox",f+"checkbox.js");e("Radio","radio",
f+"radio.js");e("TextField","textfield",f+"textfield.js");e("Textarea","textarea",f+"textarea.js");e("Select","select",f+"select.js");e("Button","button",f+"button.js");var k=a.plugins.image;k&&!a.plugins.image2&&e("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js");e("HiddenField","hiddenfield",f+"hiddenfield.js");a.addMenuItems&&(e={checkbox:{label:b.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:b.forms.checkboxAndRadio.radioTitle,
command:"radio",group:"radio"},textfield:{label:b.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:b.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:b.forms.button.title,command:"button",group:"button"},select:{label:b.forms.select.title,command:"select",group:"select"},textarea:{label:b.forms.textarea.title,command:"textarea",group:"textarea"}},k&&(e.imagebutton={label:b.image.titleButton,command:"imagebutton",group:"imagebutton"}),!a.blockless&&
(e.form={label:b.forms.form.menu,command:"form",group:"form"}),a.addMenuItems(e));a.contextMenu&&(!a.blockless&&a.contextMenu.addListener(function(d,c,a){if((d=a.contains("form",1))&&!d.isReadOnly())return{form:CKEDITOR.TRISTATE_OFF}}),a.contextMenu.addListener(function(d){if(d&&!d.isReadOnly()){var c=d.getName();if("select"==c)return{select:CKEDITOR.TRISTATE_OFF};if("textarea"==c)return{textarea:CKEDITOR.TRISTATE_OFF};if("input"==c){var a=d.getAttribute("type")||"text";switch(a){case "button":case "submit":case "reset":return{button:CKEDITOR.TRISTATE_OFF};
case "checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case "radio":return{radio:CKEDITOR.TRISTATE_OFF};case "image":return k?{imagebutton:CKEDITOR.TRISTATE_OFF}:null}if(h[a])return{textfield:CKEDITOR.TRISTATE_OFF}}if("img"==c&&"hiddenfield"==d.data("cke-real-element-type"))return{hiddenfield:CKEDITOR.TRISTATE_OFF}}}));a.on("doubleclick",function(d){var c=d.data.element;if(!a.blockless&&c.is("form"))d.data.dialog="form";else if(c.is("select"))d.data.dialog="select";else if(c.is("textarea"))d.data.dialog=
"textarea";else if(c.is("img")&&"hiddenfield"==c.data("cke-real-element-type"))d.data.dialog="hiddenfield";else if(c.is("input")){c=c.getAttribute("type")||"text";switch(c){case "button":case "submit":case "reset":d.data.dialog="button";break;case "checkbox":d.data.dialog="checkbox";break;case "radio":d.data.dialog="radio";break;case "image":d.data.dialog="imagebutton"}h[c]&&(d.data.dialog="textfield")}})},afterInit:function(a){var b=a.dataProcessor,g=b&&b.htmlFilter,b=b&&b.dataFilter;CKEDITOR.env.ie&&
g&&g.addRules({elements:{input:function(a){a=a.attributes;var b=a.type;b||(a.type="text");"checkbox"!=b&&"radio"!=b||"on"!=a.value||delete a.value}}},{applyToAll:!0});b&&b.addRules({elements:{input:function(b){if("hidden"==b.attributes.type)return a.createFakeParserElement(b,"cke_hidden","hiddenfield")}}},{applyToAll:!0})}});CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(a){if(!a.blockless){for(var f=a.config,c=a.lang.format,l=f.format_tags.split(";"),d={},m=0,n=[],g=0;g<l.length;g++){var h=l[g],k=new CKEDITOR.style(f["format_"+h]);if(!a.filter.customConfig||a.filter.check(k))m++,d[h]=k,d[h]._.enterMode=a.config.enterMode,n.push(k)}0!==m&&a.ui.addRichCombo("Format",{label:c.label,title:c.panelTitle,toolbar:"styles,20",allowedContent:n,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(f.contentsCss),
multiSelect:!1,attributes:{"aria-label":c.panelTitle}},init:function(){this.startGroup(c.panelTitle);for(var a in d){var e=c["tag_"+a];this.add(a,d[a].buildPreview(e),e)}},onClick:function(b){a.focus();a.fire("saveSnapshot");b=d[b];var e=a.elementPath();a[b.checkActive(e,a)?"removeStyle":"applyStyle"](b);setTimeout(function(){a.fire("saveSnapshot")},0)},onRender:function(){a.on("selectionChange",function(b){var e=this.getValue();b=b.data.path;this.refresh();for(var c in d)if(d[c].checkActive(b,a)){c!=
e&&this.setValue(c,a.lang.format["tag_"+c]);return}this.setValue("")},this)},onOpen:function(){this.showAll();for(var b in d)a.activeFilter.check(d[b])||this.hideItem(b)},refresh:function(){var b=a.elementPath();if(b){if(b.isContextFor("p"))for(var c in d)if(a.activeFilter.check(d[c]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}});CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div";CKEDITOR.config.format_p={element:"p"};CKEDITOR.config.format_div={element:"div"};
CKEDITOR.config.format_pre={element:"pre"};CKEDITOR.config.format_address={element:"address"};CKEDITOR.config.format_h1={element:"h1"};CKEDITOR.config.format_h2={element:"h2"};CKEDITOR.config.format_h3={element:"h3"};CKEDITOR.config.format_h4={element:"h4"};CKEDITOR.config.format_h5={element:"h5"};CKEDITOR.config.format_h6={element:"h6"};(function(){var b={canUndo:!1,exec:function(a){var b=a.document.createElement("hr");a.insertElement(b)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(a){a.blockless||(a.addCommand("horizontalrule",b),a.ui.addButton&&a.ui.addButton("HorizontalRule",{label:a.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})})();CKEDITOR.plugins.add("htmlwriter",{init:function(b){var a=new CKEDITOR.htmlWriter;a.forceSimpleAmpersand=b.config.forceSimpleAmpersand;a.indentationChars=b.config.dataIndentationChars||"\t";b.dataProcessor.writer=a}});
CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base();this.indentationChars="\t";this.selfClosingEnd=" /\x3e";this.lineBreakChars="\n";this.sortAttributes=1;this._.indent=0;this._.indentation="";this._.inPre=0;this._.rules={};var b=CKEDITOR.dtd,a;for(a in CKEDITOR.tools.extend({},b.$nonBodyContent,b.$block,b.$listItem,b.$tableContent))this.setRules(a,{indent:!b[a]["#"],breakBeforeOpen:1,breakBeforeClose:!b[a]["#"],breakAfterClose:1,needsSpace:a in
b.$block&&!(a in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1});this.setRules("title",{indent:0,breakAfterOpen:0});this.setRules("style",{indent:0,breakBeforeClose:1});this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(b){var a=this._.rules[b];this._.afterCloser&&a&&a.needsSpace&&this._.needsSpace&&this._.output.push("\n");this._.indent?this.indentation():a&&a.breakBeforeOpen&&(this.lineBreak(),this.indentation());this._.output.push("\x3c",b);this._.afterCloser=0},
openTagClose:function(b,a){var c=this._.rules[b];a?(this._.output.push(this.selfClosingEnd),c&&c.breakAfterClose&&(this._.needsSpace=c.needsSpace)):(this._.output.push("\x3e"),c&&c.indent&&(this._.indentation+=this.indentationChars));c&&c.breakAfterOpen&&this.lineBreak();"pre"==b&&(this._.inPre=1)},attribute:function(b,a){"string"==typeof a&&(this.forceSimpleAmpersand&&(a=a.replace(/&amp;/g,"\x26")),a=CKEDITOR.tools.htmlEncodeAttr(a));this._.output.push(" ",b,'\x3d"',a,'"')},closeTag:function(b){var a=
this._.rules[b];a&&a.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length));this._.indent?this.indentation():a&&a.breakBeforeClose&&(this.lineBreak(),this.indentation());this._.output.push("\x3c/",b,"\x3e");"pre"==b&&(this._.inPre=0);a&&a.breakAfterClose&&(this.lineBreak(),this._.needsSpace=a.needsSpace);this._.afterCloser=1},text:function(b){this._.indent&&(this.indentation(),!this._.inPre&&(b=CKEDITOR.tools.ltrim(b)));this._.output.push(b)},comment:function(b){this._.indent&&
this.indentation();this._.output.push("\x3c!--",b,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars);this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation);this._.indent=0},reset:function(){this._.output=[];this._.indent=0;this._.indentation="";this._.afterCloser=0;this._.inPre=0;this._.needsSpace=0},setRules:function(b,a){var c=this._.rules[b];c?CKEDITOR.tools.extend(c,a,!0):this._.rules[b]=
a}}});(function(){CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(a){var b=a.lang.iframe,c="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";a.plugins.dialogadvtab&&(c+=";iframe"+a.plugins.dialogadvtab.allowedContent({id:1,
classes:1,styles:1}));CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js");a.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:c,requiredContent:"iframe"}));a.ui.addButton&&a.ui.addButton("Iframe",{label:b.toolbar,command:"iframe",toolbar:"insert,80"});a.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&"iframe"==b.data("cke-real-element-type")&&(a.data.dialog="iframe")});a.addMenuItems&&a.addMenuItems({iframe:{label:b.title,command:"iframe",group:"image"}});
a.contextMenu&&a.contextMenu.addListener(function(a){if(a&&a.is("img")&&"iframe"==a.data("cke-real-element-type"))return{iframe:CKEDITOR.TRISTATE_OFF}})},afterInit:function(a){var b=a.dataProcessor;(b=b&&b.dataFilter)&&b.addRules({elements:{iframe:function(b){return a.createFakeParserElement(b,"cke_iframe","iframe",!0)}}})}})})();(function(){function m(a){function f(a){var b=!1;g.attachListener(g,"keydown",function(){var d=c.getBody().getElementsByTag(a);if(!b){for(var e=0;e<d.count();e++)d.getItem(e).setCustomData("retain",!0);b=!0}},null,null,1);g.attachListener(g,"keyup",function(){var d=c.getElementsByTag(a);b&&(1!=d.count()||d.getItem(0).getCustomData("retain")||d.getItem(0).hasAttribute("data-cke-temp")||d.getItem(0).remove(1),b=!1)})}var b=this.editor,c=a.document,d=c.body,e=c.getElementById("cke_actscrpt");e&&e.parentNode.removeChild(e);
(e=c.getElementById("cke_shimscrpt"))&&e.parentNode.removeChild(e);(e=c.getElementById("cke_basetagscrpt"))&&e.parentNode.removeChild(e);d.contentEditable=!0;CKEDITOR.env.ie&&(d.hideFocus=!0,d.disabled=!0,d.removeAttribute("disabled"));delete this._.isLoadingData;this.$=d;c=new CKEDITOR.dom.document(c);this.setup();this.fixInitialSelection();var g=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&c.getDocumentElement().addClass(c.$.compatMode);CKEDITOR.env.ie&&!CKEDITOR.env.edge&&b.enterMode!=CKEDITOR.ENTER_P?
f("p"):CKEDITOR.env.edge&&b.enterMode!=CKEDITOR.ENTER_DIV&&f("div");if(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)c.getDocumentElement().on("mousedown",function(a){a.data.getTarget().is("html")&&setTimeout(function(){b.editable().focus()})});n(b);try{b.document.$.execCommand("2D-position",!1,!0)}catch(h){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==b.document.$.compatMode)&&this.attachListener(this,"keydown",function(a){var c=a.data.getKeystroke();if(33==c||34==c)if(CKEDITOR.env.ie)setTimeout(function(){b.getSelection().scrollIntoView()},
0);else if(b.window.$.innerHeight>this.$.offsetHeight){var d=b.createRange();d[33==c?"moveToElementEditStart":"moveToElementEditEnd"](this);d.select();a.data.preventDefault()}});CKEDITOR.env.ie&&this.attachListener(c,"blur",function(){try{c.$.selection.empty()}catch(a){}});CKEDITOR.env.iOS&&this.attachListener(c,"touchend",function(){a.focus()});d=b.document.getElementsByTag("title").getItem(0);d.data("cke-title",d.getText());CKEDITOR.env.ie&&(b.document.$.title=this._.docTitle);CKEDITOR.tools.setTimeout(function(){"unloaded"==
this.status&&(this.status="ready");b.fire("contentDom");this._.isPendingFocus&&(b.focus(),this._.isPendingFocus=!1);setTimeout(function(){b.fire("dataReady")},0)},0,this)}function n(a){function f(){var c;a.editable().attachListener(a,"selectionChange",function(){var d=a.getSelection().getSelectedElement();d&&(c&&(c.detachEvent("onresizestart",b),c=null),d.$.attachEvent("onresizestart",b),c=d.$)})}function b(a){a.returnValue=!1}if(CKEDITOR.env.gecko)try{var c=a.document.$;c.execCommand("enableObjectResizing",
!1,!a.config.disableObjectResizing);c.execCommand("enableInlineTableEditing",!1,!a.config.disableNativeTableHandles)}catch(d){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&a.config.disableObjectResizing&&f(a)}function p(){var a=[];if(8<=CKEDITOR.document.$.documentMode){a.push("html.CSS1Compat [contenteditable\x3dfalse]{min-height:0 !important}");var f=[],b;for(b in CKEDITOR.dtd.$removeEmpty)f.push("html.CSS1Compat "+b+"[contenteditable\x3dfalse]");a.push(f.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&
(a.push("html{height:100% !important}"),a.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));a.push("html{cursor:text;*cursor:auto}");a.push("img,input,textarea{cursor:default}");return a.join("\n")}var l;CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"});a.addMode("wysiwyg",function(f){function b(b){b&&b.removeListener();
a.editable(new l(a,d.$.contentWindow.document.body));a.setData(a.getData(1),f)}var c="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",c=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(c)+"}())":"",d=CKEDITOR.dom.element.createFromHtml('\x3ciframe src\x3d"'+c+'" frameBorder\x3d"0"\x3e\x3c/iframe\x3e');d.setStyles({width:"100%",height:"100%"});d.addClass("cke_wysiwyg_frame").addClass("cke_reset");
c=a.ui.space("contents");c.append(d);var e=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;if(e)d.on("load",b);var g=a.title,h=a.fire("ariaEditorHelpLabel",{}).label;g&&(CKEDITOR.env.ie&&h&&(g+=", "+h),d.setAttribute("title",g));if(h){var g=CKEDITOR.tools.getNextId(),k=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+g+'" class\x3d"cke_voice_label"\x3e'+h+"\x3c/span\x3e");c.append(k,1);d.setAttribute("aria-describedby",g)}a.on("beforeModeUnload",function(a){a.removeListener();k&&k.remove()});
d.setAttributes({tabIndex:a.tabIndex,allowTransparency:"true"});!e&&b();a.fire("ariaWidget",d)})}});CKEDITOR.editor.prototype.addContentsCss=function(a){var f=this.config,b=f.contentsCss;CKEDITOR.tools.isArray(b)||(f.contentsCss=b?[b]:[]);f.contentsCss.push(a)};l=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments);this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(a){CKEDITOR.tools.setTimeout(m,0,this,a)},this);this._.docTitle=this.getWindow().getFrame().getAttribute("title")},
base:CKEDITOR.editable,proto:{setData:function(a,f){var b=this.editor;if(f)this.setHtml(a),this.fixInitialSelection(),b.fire("dataReady");else{this._.isLoadingData=!0;b._.dataStore={id:1};var c=b.config,d=c.fullPage,e=c.docType,g=CKEDITOR.tools.buildStyleHtml(p()).replace(/<style>/,'\x3cstyle data-cke-temp\x3d"1"\x3e');d||(g+=CKEDITOR.tools.buildStyleHtml(b.config.contentsCss));var h=c.baseHref?'\x3cbase href\x3d"'+c.baseHref+'" data-cke-temp\x3d"1" /\x3e':"";d&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){b.docType=
e=a;return""}).replace(/<\?xml\s[^\?]*\?>/i,function(a){b.xmlDeclaration=a;return""}));a=b.dataProcessor.toHtml(a);d?(/<body[\s|>]/.test(a)||(a="\x3cbody\x3e"+a),/<html[\s|>]/.test(a)||(a="\x3chtml\x3e"+a+"\x3c/html\x3e"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$\x26\x3ctitle\x3e\x3c/title\x3e")):a=a.replace(/<html[^>]*>/,"$\x26\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e"),h&&(a=a.replace(/<head[^>]*?>/,"$\x26"+h)),a=a.replace(/<\/head\s*>/,g+"$\x26"),a=
e+a):a=c.docType+'\x3chtml dir\x3d"'+c.contentsLangDirection+'" lang\x3d"'+(c.contentsLanguage||b.langCode)+'"\x3e\x3chead\x3e\x3ctitle\x3e'+this._.docTitle+"\x3c/title\x3e"+h+g+"\x3c/head\x3e\x3cbody"+(c.bodyId?' id\x3d"'+c.bodyId+'"':"")+(c.bodyClass?' class\x3d"'+c.bodyClass+'"':"")+"\x3e"+a+"\x3c/body\x3e\x3c/html\x3e";CKEDITOR.env.gecko&&(a=a.replace(/<body/,'\x3cbody contenteditable\x3d"true" '),2E4>CKEDITOR.env.version&&(a=a.replace(/<body[^>]*>/,"$\x26\x3c!-- cke-content-start --\x3e")));
c='\x3cscript id\x3d"cke_actscrpt" type\x3d"text/javascript"'+(CKEDITOR.env.ie?' defer\x3d"defer" ':"")+"\x3evar wasLoaded\x3d0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded\x3d1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"\x3c/script\x3e";CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(c+='\x3cscript id\x3d"cke_shimscrpt"\x3ewindow.parent.CKEDITOR.tools.enableHtml5Elements(document)\x3c/script\x3e');
h&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(c+='\x3cscript id\x3d"cke_basetagscrpt"\x3evar baseTag \x3d document.querySelector( "base" );baseTag.href \x3d baseTag.href;\x3c/script\x3e');a=a.replace(/(?=\s*<\/(:?head)>)/,c);this.clearCustomData();this.clearListeners();b.fire("contentDomUnload");var k=this.getDocument();try{k.write(a)}catch(l){setTimeout(function(){k.write(a)},0)}}},getData:function(a){if(a)return this.getHtml();a=this.editor;var f=a.config,b=f.fullPage,c=b&&a.docType,d=b&&a.xmlDeclaration,
e=this.getDocument(),b=b?e.getDocumentElement().getOuterHtml():e.getBody().getHtml();CKEDITOR.env.gecko&&f.enterMode!=CKEDITOR.ENTER_BR&&(b=b.replace(/<br>(?=\s*(:?$|<\/body>))/,""));b=a.dataProcessor.toDataFormat(b);d&&(b=d+"\n"+b);c&&(b=c+"\n"+b);return b},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:l.baseProto.focus.call(this)},detach:function(){var a=this.editor,f=a.document,b;try{b=a.window.getFrame()}catch(c){}l.baseProto.detach.call(this);this.clearCustomData();f.getDocumentElement().clearCustomData();
CKEDITOR.tools.removeFunction(this._.frameLoadedHandler);b&&b.getParent()?(b.clearCustomData(),(a=b.removeCustomData("onResize"))&&a.removeListener(),b.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})})();CKEDITOR.config.disableObjectResizing=!1;CKEDITOR.config.disableNativeTableHandles=!0;CKEDITOR.config.disableNativeSpellChecker=!0;(function(){function e(b,a){a||(a=b.getSelection().getSelectedElement());if(a&&a.is("img")&&!a.data("cke-realelement")&&!a.isReadOnly())return a}function f(b){var a=b.getStyle("float");if("inherit"==a||"none"==a)a=0;a||(a=b.getAttribute("align"));return a}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(b){if(!b.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var a="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";
CKEDITOR.dialog.isTabEnabled(b,"image","advanced")&&(a="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)");b.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:a,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]}));b.ui.addButton&&b.ui.addButton("Image",{label:b.lang.common.image,command:"image",toolbar:"insert,10"});b.on("doubleclick",function(b){var a=
b.data.element;!a.is("img")||a.data("cke-realelement")||a.isReadOnly()||(b.data.dialog="image")});b.addMenuItems&&b.addMenuItems({image:{label:b.lang.image.menu,command:"image",group:"image"}});b.contextMenu&&b.contextMenu.addListener(function(a){if(e(b,a))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(b){function a(a){var d=b.getCommand("justify"+a);if(d){if("left"==a||"right"==a)d.on("exec",function(d){var c=e(b),g;c&&(g=f(c),g==a?(c.removeStyle("float"),a==f(c)&&c.removeAttribute("align")):
c.setStyle("float",a),d.cancel())});d.on("refresh",function(d){var c=e(b);c&&(c=f(c),this.setState(c==a?CKEDITOR.TRISTATE_ON:"right"==a||"left"==a?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),d.cancel())})}}b.plugins.image2||(a("left"),a("right"),a("center"),a("block"))}})})();CKEDITOR.config.image_removeLinkByEmptyURL=!0;(function(){function m(a,b){var e,f;b.on("refresh",function(a){var b=[k],c;for(c in a.data.states)b.push(a.data.states[c]);this.setState(CKEDITOR.tools.search(b,p)?p:k)},b,null,100);b.on("exec",function(b){e=a.getSelection();f=e.createBookmarks(1);b.data||(b.data={});b.data.done=!1},b,null,0);b.on("exec",function(){a.forceNextSelectionCheck();e.selectBookmarks(f)},b,null,100)}var k=CKEDITOR.TRISTATE_DISABLED,p=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(a){var b=CKEDITOR.plugins.indent.genericDefinition;
m(a,a.addCommand("indent",new b(!0)));m(a,a.addCommand("outdent",new b));a.ui.addButton&&(a.ui.addButton("Indent",{label:a.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),a.ui.addButton("Outdent",{label:a.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"}));a.on("dirChanged",function(b){var f=a.createRange(),l=b.data.node;f.setStartBefore(l);f.setEndAfter(l);for(var n=new CKEDITOR.dom.walker(f),c;c=n.next();)if(c.type==CKEDITOR.NODE_ELEMENT)if(!c.equals(l)&&
c.getDirection())f.setStartAfter(c),n=new CKEDITOR.dom.walker(f);else{var d=a.config.indentClasses;if(d)for(var g="ltr"==b.data.dir?["_rtl",""]:["","_rtl"],h=0;h<d.length;h++)c.hasClass(d[h]+g[0])&&(c.removeClass(d[h]+g[0]),c.addClass(d[h]+g[1]));d=c.getStyle("margin-right");g=c.getStyle("margin-left");d?c.setStyle("margin-left",d):c.removeStyle("margin-left");g?c.setStyle("margin-right",g):c.removeStyle("margin-right")}})}});CKEDITOR.plugins.indent={genericDefinition:function(a){this.isIndent=!!a;
this.startDisabled=!this.isIndent},specificDefinition:function(a,b,e){this.name=b;this.editor=a;this.jobs={};this.enterBr=a.config.enterMode==CKEDITOR.ENTER_BR;this.isIndent=!!e;this.relatedGlobal=e?"indent":"outdent";this.indentKey=e?9:CKEDITOR.SHIFT+9;this.database={}},registerCommands:function(a,b){a.on("pluginsLoaded",function(){for(var a in b)(function(a,b){var e=a.getCommand(b.relatedGlobal),c;for(c in b.jobs)e.on("exec",function(d){d.data.done||(a.fire("lockSnapshot"),b.execJob(a,c)&&(d.data.done=
!0),a.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(b.database))},this,null,c),e.on("refresh",function(d){d.data.states||(d.data.states={});d.data.states[b.name+"@"+c]=b.refreshJob(a,c,d.data.path)},this,null,c);a.addFeature(b)})(this,b[a])})}};CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}};CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(a,b){var e=this.jobs[b];if(e.state!=k)return e.exec.call(this,a)},refreshJob:function(a,
b,e){b=this.jobs[b];a.activeFilter.checkFeature(this)?b.state=b.refresh.call(this,a,e):b.state=k;return b.state},getContext:function(a){return a.contains(this.context)}}})();(function(){function f(b,c,a){if(!b.getCustomData("indent_processed")){var d=this.editor,l=this.isIndent;if(c){d=b.$.className.match(this.classNameRegex);a=0;d&&(d=d[1],a=CKEDITOR.tools.indexOf(c,d)+1);if(0>(a+=l?1:-1))return;a=Math.min(a,c.length);a=Math.max(a,0);b.$.className=CKEDITOR.tools.ltrim(b.$.className.replace(this.classNameRegex,""));0<a&&b.addClass(c[a-1])}else{c=m(b,a);a=parseInt(b.getStyle(c),10);var g=d.config.indentOffset||40;isNaN(a)&&(a=0);a+=(l?1:-1)*g;if(0>a)return;a=Math.max(a,
0);a=Math.ceil(a/g)*g;b.setStyle(c,a?a+(d.config.indentUnit||"px"):"");""===b.getAttribute("style")&&b.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,b,"indent_processed",1)}}function m(b,c){return"ltr"==(c||b.getComputedStyle("direction"))?"margin-left":"margin-right"}var h=CKEDITOR.dtd.$listItem,p=CKEDITOR.dtd.$list,k=CKEDITOR.TRISTATE_DISABLED,n=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(b){function c(){a.specificDefinition.apply(this,
arguments);this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:d?null:"margin-left,margin-right",classes:d||null}};this.enterBr&&(this.allowedContent.div=!0);this.requiredContent=(this.enterBr?"div":"p")+(d?"("+d.join(",")+")":"{margin-left}");this.jobs={20:{refresh:function(a,b){var e=b.block||b.blockLimit;if(!e.is(h))var c=e.getAscendant(h),e=c&&b.contains(c)||e;e.is(h)&&(e=e.getParent());if(this.enterBr||this.getContext(b)){if(d){var c=d,e=e.$.className.match(this.classNameRegex),
f=this.isIndent,c=e?f?e[1]!=c.slice(-1):!0:f;return c?n:k}return this.isIndent?n:e?CKEDITOR[0>=(parseInt(e.getStyle(m(e)),10)||0)?"TRISTATE_DISABLED":"TRISTATE_OFF"]:k}return k},exec:function(a){var b=a.getSelection(),b=b&&b.getRanges()[0],c;if(c=a.elementPath().contains(p))f.call(this,c,d);else for(b=b.createIterator(),a=a.config.enterMode,b.enforceRealBlocks=!0,b.enlargeBr=a!=CKEDITOR.ENTER_BR;c=b.getNextParagraph(a==CKEDITOR.ENTER_P?"p":"div");)c.isReadOnly()||f.call(this,c,d);return!0}}}}var a=
CKEDITOR.plugins.indent,d=b.config.indentClasses;a.registerCommands(b,{indentblock:new c(b,"indentblock",!0),outdentblock:new c(b,"outdentblock")});CKEDITOR.tools.extend(c.prototype,a.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:d?new RegExp("(?:^|\\s+)("+d.join("|")+")(?\x3d$|\\s)"):null})}})})();(function(){function w(c){function f(b){for(var e=d.startContainer,a=d.endContainer;e&&!e.getParent().equals(b);)e=e.getParent();for(;a&&!a.getParent().equals(b);)a=a.getParent();if(!e||!a)return!1;for(var g=e,e=[],k=!1;!k;)g.equals(a)&&(k=!0),e.push(g),g=g.getNext();if(1>e.length)return!1;g=b.getParents(!0);for(a=0;a<g.length;a++)if(g[a].getName&&p[g[a].getName()]){b=g[a];break}for(var g=l.isIndent?1:-1,a=e[0],e=e[e.length-1],k=CKEDITOR.plugins.list.listToArray(b,q),n=k[e.getCustomData("listarray_index")].indent,
a=a.getCustomData("listarray_index");a<=e.getCustomData("listarray_index");a++)if(k[a].indent+=g,0<g){var h=k[a].parent;k[a].parent=new CKEDITOR.dom.element(h.getName(),h.getDocument())}for(a=e.getCustomData("listarray_index")+1;a<k.length&&k[a].indent>n;a++)k[a].indent+=g;e=CKEDITOR.plugins.list.arrayToList(k,q,null,c.config.enterMode,b.getDirection());if(!l.isIndent){var f;if((f=b.getParent())&&f.is("li"))for(var g=e.listNode.getChildren(),r=[],m,a=g.count()-1;0<=a;a--)(m=g.getItem(a))&&m.is&&m.is("li")&&
r.push(m)}e&&e.listNode.replace(b);if(r&&r.length)for(a=0;a<r.length;a++){for(m=b=r[a];(m=m.getNext())&&m.is&&m.getName()in p;)CKEDITOR.env.needsNbspFiller&&!b.getFirst(x)&&b.append(d.document.createText(" ")),b.append(m);b.insertAfter(f)}e&&c.fire("contentDomInvalidated");return!0}for(var l=this,q=this.database,p=this.context,n=c.getSelection(),n=(n&&n.getRanges()).createIterator(),d;d=n.getNextRange();){for(var b=d.getCommonAncestor();b&&(b.type!=CKEDITOR.NODE_ELEMENT||!p[b.getName()]);){if(c.editable().equals(b)){b=
!1;break}b=b.getParent()}b||(b=d.startPath().contains(p))&&d.setEndAt(b,CKEDITOR.POSITION_BEFORE_END);if(!b){var h=d.getEnclosedNode();h&&h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in p&&(d.setStartAt(h,CKEDITOR.POSITION_AFTER_START),d.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),b=h)}b&&d.startContainer.type==CKEDITOR.NODE_ELEMENT&&d.startContainer.getName()in p&&(h=new CKEDITOR.dom.walker(d),h.evaluator=t,d.startContainer=h.next());b&&d.endContainer.type==CKEDITOR.NODE_ELEMENT&&d.endContainer.getName()in
p&&(h=new CKEDITOR.dom.walker(d),h.evaluator=t,d.endContainer=h.previous());if(b)return f(b)}return 0}function t(c){return c.type==CKEDITOR.NODE_ELEMENT&&c.is("li")}function x(c){return y(c)&&z(c)}var y=CKEDITOR.dom.walker.whitespaces(!0),z=CKEDITOR.dom.walker.bookmark(!1,!0),u=CKEDITOR.TRISTATE_DISABLED,v=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(c){function f(c){l.specificDefinition.apply(this,arguments);this.requiredContent=["ul","ol"];c.on("key",
function(f){if("wysiwyg"==c.mode&&f.data.keyCode==this.indentKey){var n=this.getContext(c.elementPath());!n||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,c.elementPath(),n)||(c.execCommand(this.relatedGlobal),f.cancel())}},this);this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(c,f){var d=this.getContext(f),b=CKEDITOR.plugins.indentList.firstItemInPath(this.context,f,d);return d&&this.isIndent&&!b?v:u}:function(c,f){return!this.getContext(f)||this.isIndent?
u:v},exec:CKEDITOR.tools.bind(w,this)}}var l=CKEDITOR.plugins.indent;l.registerCommands(c,{indentlist:new f(c,"indentlist",!0),outdentlist:new f(c,"outdentlist")});CKEDITOR.tools.extend(f.prototype,l.specificDefinition.prototype,{context:{ol:1,ul:1}})}});CKEDITOR.plugins.indentList={};CKEDITOR.plugins.indentList.firstItemInPath=function(c,f,l){var q=f.contains(t);l||(l=f.contains(c));return l&&q&&q.equals(l.getFirst(t))}})();CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function(a){a.config.smiley_path=a.config.smiley_path||this.path+"images/";a.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"}));a.ui.addButton&&a.ui.addButton("Smiley",{label:a.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"});CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}});CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" ");
CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";");(function(){function n(a,c){c=void 0===c||c;var b;if(c)b=a.getComputedStyle("text-align");else{for(;!a.hasAttribute||!a.hasAttribute("align")&&!a.getStyle("text-align");){b=a.getParent();if(!b)break;a=b}b=a.getStyle("text-align")||a.getAttribute("align")||""}b&&(b=b.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,""));!b&&c&&(b="rtl"==a.getComputedStyle("direction")?"right":"left");return b}function g(a,c,b){this.editor=a;this.name=c;this.value=b;this.context="p";c=a.config.justifyClasses;var h=a.config.enterMode==
CKEDITOR.ENTER_P?"p":"div";if(c){switch(b){case "left":this.cssClassName=c[0];break;case "center":this.cssClassName=c[1];break;case "right":this.cssClassName=c[2];break;case "justify":this.cssClassName=c[3]}this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+c.join("|")+")(?\x3d$|\\s)");this.requiredContent=h+"("+this.cssClassName+")"}else this.requiredContent=h+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",
classes:this.cssClassName||null}};a.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function l(a){var c=a.editor,b=c.createRange();b.setStartBefore(a.data.node);b.setEndAfter(a.data.node);for(var h=new CKEDITOR.dom.walker(b),d;d=h.next();)if(d.type==CKEDITOR.NODE_ELEMENT)if(!d.equals(a.data.node)&&d.getDirection())b.setStartAfter(d),h=new CKEDITOR.dom.walker(b);else{var e=c.config.justifyClasses;e&&(d.hasClass(e[0])?(d.removeClass(e[0]),d.addClass(e[2])):d.hasClass(e[2])&&(d.removeClass(e[2]),
d.addClass(e[0])));e=d.getStyle("text-align");"left"==e?d.setStyle("text-align","right"):"right"==e&&d.setStyle("text-align","left")}}g.prototype={exec:function(a){var c=a.getSelection(),b=a.config.enterMode;if(c){for(var h=c.createBookmarks(),d=c.getRanges(),e=this.cssClassName,g,f,k=a.config.useComputedState,k=void 0===k||k,m=d.length-1;0<=m;m--)for(g=d[m].createIterator(),g.enlargeBr=b!=CKEDITOR.ENTER_BR;f=g.getNextParagraph(b==CKEDITOR.ENTER_P?"p":"div");)if(!f.isReadOnly()){f.removeAttribute("align");
f.removeStyle("text-align");var l=e&&(f.$.className=CKEDITOR.tools.ltrim(f.$.className.replace(this.cssClassRegex,""))),p=this.state==CKEDITOR.TRISTATE_OFF&&(!k||n(f,!0)!=this.value);e?p?f.addClass(e):l||f.removeAttribute("class"):p&&f.setStyle("text-align",this.value)}a.focus();a.forceNextSelectionCheck();c.selectBookmarks(h)}},refresh:function(a,c){var b=c.block||c.blockLimit;this.setState("body"!=b.getName()&&n(b,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}};
CKEDITOR.plugins.add("justify",{init:function(a){if(!a.blockless){var c=new g(a,"justifyleft","left"),b=new g(a,"justifycenter","center"),h=new g(a,"justifyright","right"),d=new g(a,"justifyblock","justify");a.addCommand("justifyleft",c);a.addCommand("justifycenter",b);a.addCommand("justifyright",h);a.addCommand("justifyblock",d);a.ui.addButton&&(a.ui.addButton("JustifyLeft",{label:a.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),a.ui.addButton("JustifyCenter",{label:a.lang.justify.center,
command:"justifycenter",toolbar:"align,20"}),a.ui.addButton("JustifyRight",{label:a.lang.justify.right,command:"justifyright",toolbar:"align,30"}),a.ui.addButton("JustifyBlock",{label:a.lang.justify.block,command:"justifyblock",toolbar:"align,40"}));a.on("dirChanged",l)}}})})();CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var d=function(c){var a=this._,b=a.menu;a.state!==CKEDITOR.TRISTATE_DISABLED&&(a.on&&b?b.hide():(a.previousState=a.state,b||(b=a.menu=new CKEDITOR.menu(c,{panel:{className:"cke_menu_panel",attributes:{"aria-label":c.lang.common.options}}}),b.onHide=CKEDITOR.tools.bind(function(){var b=this.command?c.getCommand(this.command).modes:this.modes;this.setState(!b||b[c.mode]?a.previousState:CKEDITOR.TRISTATE_DISABLED);a.on=0},this),
this.onMenu&&b.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),a.on=1,setTimeout(function(){b.show(CKEDITOR.document.getById(a.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(c){delete c.panel;this.base(c);this.hasArrow=!0;this.click=d},statics:{handler:{create:function(c){return new CKEDITOR.ui.menuButton(c)}}}})},beforeInit:function(d){d.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}});
CKEDITOR.UI_MENUBUTTON="menubutton";(function(){CKEDITOR.plugins.add("language",{requires:"menubutton",init:function(a){var b=a.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],c=this,d=a.lang.language,e={},g,h,k,f;a.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(a,b){var c=e["language_"+b];if(c)a[c.style.checkActive(a.elementPath(),a)?"removeStyle":"applyStyle"](c.style)},refresh:function(a){this.setState(c.getCurrentLangElement(a)?CKEDITOR.TRISTATE_ON:
CKEDITOR.TRISTATE_OFF)}});for(f=0;f<b.length;f++)g=b[f].split(":"),h=g[0],k="language_"+h,e[k]={label:g[1],langId:h,group:"language",order:f,ltr:"rtl"!=(""+g[2]).toLowerCase(),onClick:function(){a.execCommand("language",this.langId)},role:"menuitemcheckbox"},e[k].style=new CKEDITOR.style({element:"span",attributes:{lang:h,dir:e[k].ltr?"ltr":"rtl"}});e.language_remove={label:d.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:e.length,onClick:function(){var b=c.getCurrentLangElement(a);
b&&a.execCommand("language",b.getAttribute("lang"))}};a.addMenuGroup("language",1);a.addMenuGroup("language_remove");a.addMenuItems(e);a.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:d.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var b={},d=c.getCurrentLangElement(a),f;for(f in e)b[f]=CKEDITOR.TRISTATE_OFF;b.language_remove=d?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;d&&(b["language_"+d.getAttribute("lang")]=
CKEDITOR.TRISTATE_ON);return b}})},getCurrentLangElement:function(a){var b=a.elementPath();a=b&&b.elements;var c;if(b)for(var d=0;d<a.length;d++)b=a[d],!c&&"span"==b.getName()&&b.hasAttribute("dir")&&b.hasAttribute("lang")&&(c=b);return c}})})();(function(){function p(c){return c.replace(/'/g,"\\$\x26")}function q(c){for(var b,a=c.length,f=[],e=0;e<a;e++)b=c.charCodeAt(e),f.push(b);return"String.fromCharCode("+f.join(",")+")"}function r(c,b){var a=c.plugins.link,f=a.compiledProtectionFunction.params,e,d;d=[a.compiledProtectionFunction.name,"("];for(var g=0;g<f.length;g++)a=f[g].toLowerCase(),e=b[a],0<g&&d.push(","),d.push("'",e?p(encodeURIComponent(b[a])):"","'");d.push(")");return d.join("")}function n(c){c=c.config.emailProtection||"";
var b;c&&"encode"!=c&&(b={},c.replace(/^([^(]+)\(([^)]+)\)$/,function(a,c,e){b.name=c;b.params=[];e.replace(/[^,\s]+/g,function(a){b.params.push(a)})}));return b}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function c(b){return a.replace(/%1/g,"rtl"==b?"right":"left").replace(/%2/g,"cke_contents_"+b)}var b="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",
a=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+b+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+b+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(c("ltr")+c("rtl"))},init:function(c){var b="a[!href]";CKEDITOR.dialog.isTabEnabled(c,"link","advanced")&&(b=b.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)"));CKEDITOR.dialog.isTabEnabled(c,"link","target")&&(b=b.replace("]",
",target,onclick]"));c.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:b,requiredContent:"a[href]"}));c.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"}));c.addCommand("unlink",new CKEDITOR.unlinkCommand);c.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand);c.setKeystroke(CKEDITOR.CTRL+76,"link");c.ui.addButton&&(c.ui.addButton("Link",{label:c.lang.link.toolbar,command:"link",toolbar:"links,10"}),c.ui.addButton("Unlink",
{label:c.lang.link.unlink,command:"unlink",toolbar:"links,20"}),c.ui.addButton("Anchor",{label:c.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"}));CKEDITOR.dialog.add("link",this.path+"dialogs/link.js");CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js");c.on("doubleclick",function(a){var b=CKEDITOR.plugins.link.getSelectedLink(c)||a.data.element;b.isReadOnly()||(b.is("a")?(a.data.dialog=!b.getAttribute("name")||b.getAttribute("href")&&b.getChildCount()?"link":"anchor",a.data.link=
b):CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,b)&&(a.data.dialog="anchor"))},null,null,0);c.on("doubleclick",function(a){a.data.dialog in{link:1,anchor:1}&&a.data.link&&c.getSelection().selectElement(a.data.link)},null,null,20);c.addMenuItems&&c.addMenuItems({anchor:{label:c.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:c.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:c.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:c.lang.link.unlink,
command:"unlink",group:"link",order:5}});c.contextMenu&&c.contextMenu.addListener(function(a){if(!a||a.isReadOnly())return null;a=CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,a);if(!a&&!(a=CKEDITOR.plugins.link.getSelectedLink(c)))return null;var b={};a.getAttribute("href")&&a.getChildCount()&&(b={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF});a&&a.hasAttribute("name")&&(b.anchor=b.removeAnchor=CKEDITOR.TRISTATE_OFF);return b});this.compiledProtectionFunction=n(c)},afterInit:function(c){c.dataProcessor.dataFilter.addRules({elements:{a:function(a){return a.attributes.name?
a.children.length?null:c.createFakeParserElement(a,"cke_anchor","anchor"):null}}});var b=c._.elementsPath&&c._.elementsPath.filters;b&&b.push(function(a,b){if("a"==b&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,a)||a.getAttribute("name")&&(!a.getAttribute("href")||!a.getChildCount())))return"anchor"})}});var t=/^javascript:/,u=/^mailto:([^?]+)(?:\?(.+))?$/,v=/subject=([^;?:@&=$,\/]*)/i,w=/body=([^;?:@&=$,\/]*)/i,x=/^#(.*)$/,y=/^((?:http|https|ftp|news):\/\/)?(.*)$/,z=/^(_(?:self|top|parent|blank))$/,
A=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,B=/^javascript:([^(]+)\(([^)]+)\)$/,C=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,D=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,m={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType","class":"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};
CKEDITOR.plugins.link={getSelectedLink:function(c){var b=c.getSelection(),a=b.getSelectedElement();return a&&a.is("a")?a:(b=b.getRanges()[0])?(b.shrink(CKEDITOR.SHRINK_TEXT),c.elementPath(b.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(c){for(var b=c.editable(),a=b.isInline()&&!c.plugins.divarea?c.document:b,b=a.getElementsByTag("a"),a=a.getElementsByTag("img"),f=[],e=0,d;d=b.getItem(e++);)(d.data("cke-saved-name")||d.hasAttribute("name"))&&f.push({name:d.data("cke-saved-name")||
d.getAttribute("name"),id:d.getAttribute("id")});for(e=0;d=a.getItem(e++);)(d=this.tryRestoreFakeAnchor(c,d))&&f.push({name:d.getAttribute("name"),id:d.getAttribute("id")});return f},fakeAnchor:!0,tryRestoreFakeAnchor:function(c,b){if(b&&b.data("cke-real-element-type")&&"anchor"==b.data("cke-real-element-type")){var a=c.restoreRealElement(b);if(a.data("cke-saved-name"))return a}},parseLinkAttributes:function(c,b){var a=b&&(b.data("cke-saved-href")||b.getAttribute("href"))||"",f=c.plugins.link.compiledProtectionFunction,
e=c.config.emailProtection,d,g={};a.match(t)&&("encode"==e?a=a.replace(A,function(a,b,c){c=c||"";return"mailto:"+String.fromCharCode.apply(String,b.split(","))+c.replace(/\\'/g,"'")}):e&&a.replace(B,function(a,b,c){if(b==f.name){g.type="email";a=g.email={};b=/(^')|('$)/g;c=c.match(/[^,\s]+/g);for(var d=c.length,e,h,k=0;k<d;k++)e=decodeURIComponent,h=c[k].replace(b,"").replace(/\\'/g,"'"),h=e(h),e=f.params[k].toLowerCase(),a[e]=h;a.address=[a.name,a.domain].join("@")}}));if(!g.type)if(e=a.match(x))g.type=
"anchor",g.anchor={},g.anchor.name=g.anchor.id=e[1];else if(e=a.match(u)){d=a.match(v);a=a.match(w);g.type="email";var k=g.email={};k.address=e[1];d&&(k.subject=decodeURIComponent(d[1]));a&&(k.body=decodeURIComponent(a[1]))}else a&&(d=a.match(y))&&(g.type="url",g.url={},g.url.protocol=d[1],g.url.url=d[2]);if(b){if(a=b.getAttribute("target"))g.target={type:a.match(z)?a:"frame",name:a};else if(a=(a=b.data("cke-pa-onclick")||b.getAttribute("onclick"))&&a.match(C))for(g.target={type:"popup",name:a[1]};e=
D.exec(a[2]);)"yes"!=e[2]&&"1"!=e[2]||e[1]in{height:1,width:1,top:1,left:1}?isFinite(e[2])&&(g.target[e[1]]=e[2]):g.target[e[1]]=!0;var a={},h;for(h in m)(e=b.getAttribute(h))&&(a[m[h]]=e);if(h=b.data("cke-saved-name")||a.advName)a.advName=h;CKEDITOR.tools.isEmpty(a)||(g.advanced=a)}return g},getLinkAttributes:function(c,b){var a=c.config.emailProtection||"",f={};switch(b.type){case "url":var a=b.url&&void 0!==b.url.protocol?b.url.protocol:"http://",e=b.url&&CKEDITOR.tools.trim(b.url.url)||"";f["data-cke-saved-href"]=
0===e.indexOf("/")?e:a+e;break;case "anchor":a=b.anchor&&b.anchor.id;f["data-cke-saved-href"]="#"+(b.anchor&&b.anchor.name||a||"");break;case "email":var d=b.email,e=d.address;switch(a){case "":case "encode":var g=encodeURIComponent(d.subject||""),k=encodeURIComponent(d.body||""),d=[];g&&d.push("subject\x3d"+g);k&&d.push("body\x3d"+k);d=d.length?"?"+d.join("\x26"):"";"encode"==a?(a=["javascript:void(location.href\x3d'mailto:'+",q(e)],d&&a.push("+'",p(d),"'"),a.push(")")):a=["mailto:",e,d];break;default:a=
e.split("@",2),d.name=a[0],d.domain=a[1],a=["javascript:",r(c,d)]}f["data-cke-saved-href"]=a.join("")}if(b.target)if("popup"==b.target.type){for(var a=["window.open(this.href, '",b.target.name||"","', '"],h="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),e=h.length,g=function(a){b.target[a]&&h.push(a+"\x3d"+b.target[a])},d=0;d<e;d++)h[d]+=b.target[h[d]]?"\x3dyes":"\x3dno";g("width");g("left");g("height");g("top");a.push(h.join(","),"'); return false;");f["data-cke-pa-onclick"]=
a.join("")}else"notSet"!=b.target.type&&b.target.name&&(f.target=b.target.name);if(b.advanced){for(var l in m)(a=b.advanced[m[l]])&&(f[l]=a);f.name&&(f["data-cke-saved-name"]=f.name)}f["data-cke-saved-href"]&&(f.href=f["data-cke-saved-href"]);l={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1};b.advanced&&CKEDITOR.tools.extend(l,m);for(var n in f)delete l[n];return{set:f,removed:CKEDITOR.tools.objectKeys(l)}},showDisplayTextForElement:function(c,b){var a={img:1,table:1,tbody:1,
thead:1,tfoot:1,input:1,select:1,textarea:1};return b.widgets&&b.widgets.focused?!1:!c||!c.getName||!c.is(a)}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype={exec:function(c){var b=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});c.removeStyle(b)},refresh:function(c,b){var a=b.lastElement&&b.lastElement.getAscendant("a",!0);a&&"a"==a.getName()&&a.getAttribute("href")&&a.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},
contextSensitive:1,startDisabled:1,requiredContent:"a[href]"};CKEDITOR.removeAnchorCommand=function(){};CKEDITOR.removeAnchorCommand.prototype={exec:function(c){var b=c.getSelection(),a=b.createBookmarks(),f;if(b&&(f=b.getSelectedElement())&&(f.getChildCount()?f.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,f)))f.remove(1);else if(f=CKEDITOR.plugins.link.getSelectedLink(c))f.hasAttribute("href")?(f.removeAttributes({name:1,"data-cke-saved-name":1}),f.removeClass("cke_anchor")):f.remove(1);
b.selectBookmarks(a)},requiredContent:"a[name]"};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})})();(function(){function I(b,m,e){function c(c){if(!(!(a=d[c?"getFirst":"getLast"]())||a.is&&a.isBlockBoundary()||!(p=m.root[c?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||p.is&&p.isBlockBoundary({br:1})))b.document.createElement("br")[c?"insertBefore":"insertAfter"](a)}for(var f=CKEDITOR.plugins.list.listToArray(m.root,e),g=[],k=0;k<m.contents.length;k++){var h=m.contents[k];(h=h.getAscendant("li",!0))&&!h.getCustomData("list_item_processed")&&(g.push(h),CKEDITOR.dom.element.setMarker(e,
h,"list_item_processed",!0))}h=null;for(k=0;k<g.length;k++)h=g[k].getCustomData("listarray_index"),f[h].indent=-1;for(k=h+1;k<f.length;k++)if(f[k].indent>f[k-1].indent+1){g=f[k-1].indent+1-f[k].indent;for(h=f[k].indent;f[k]&&f[k].indent>=h;)f[k].indent+=g,k++;k--}var d=CKEDITOR.plugins.list.arrayToList(f,e,null,b.config.enterMode,m.root.getAttribute("dir")).listNode,a,p;c(!0);c();d.replace(m.root);b.fire("contentDomInvalidated")}function B(b,m){this.name=b;this.context=this.type=m;this.allowedContent=
m+" li";this.requiredContent=m}function E(b,m,e,c){for(var f,g;f=b[c?"getLast":"getFirst"](J);)(g=f.getDirection(1))!==m.getDirection(1)&&f.setAttribute("dir",g),f.remove(),e?f[c?"insertBefore":"insertAfter"](e):m.append(f,c)}function F(b){function m(e){var c=b[e?"getPrevious":"getNext"](u);c&&c.type==CKEDITOR.NODE_ELEMENT&&c.is(b.getName())&&(E(b,c,null,!e),b.remove(),b=c)}m();m(1)}function G(b){return b.type==CKEDITOR.NODE_ELEMENT&&(b.getName()in CKEDITOR.dtd.$block||b.getName()in CKEDITOR.dtd.$listItem)&&
CKEDITOR.dtd[b.getName()]["#"]}function C(b,m,e){b.fire("saveSnapshot");e.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var c=e.extractContents();m.trim(!1,!0);var f=m.createBookmark(),g=new CKEDITOR.dom.elementPath(m.startContainer),k=g.block,g=g.lastElement.getAscendant("li",1)||k,h=new CKEDITOR.dom.elementPath(e.startContainer),d=h.contains(CKEDITOR.dtd.$listItem),h=h.contains(CKEDITOR.dtd.$list);k?(k=k.getBogus())&&k.remove():h&&(k=h.getPrevious(u))&&z(k)&&k.remove();(k=c.getLast())&&k.type==CKEDITOR.NODE_ELEMENT&&
k.is("br")&&k.remove();(k=m.startContainer.getChild(m.startOffset))?c.insertBefore(k):m.startContainer.append(c);d&&(c=A(d))&&(g.contains(d)?(E(c,d.getParent(),d),c.remove()):g.append(c));for(;e.checkStartOfBlock()&&e.checkEndOfBlock();){h=e.startPath();c=h.block;if(!c)break;c.is("li")&&(g=c.getParent(),c.equals(g.getLast(u))&&c.equals(g.getFirst(u))&&(c=g));e.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START);c.remove()}e=e.clone();c=b.editable();e.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);e=new CKEDITOR.dom.walker(e);
e.evaluator=function(a){return u(a)&&!z(a)};(e=e.next())&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$list&&F(e);m.moveToBookmark(f);m.select();b.fire("saveSnapshot")}function A(b){return(b=b.getLast(u))&&b.type==CKEDITOR.NODE_ELEMENT&&b.getName()in v?b:null}var v={ol:1,ul:1},K=CKEDITOR.dom.walker.whitespaces(),H=CKEDITOR.dom.walker.bookmark(),u=function(b){return!(K(b)||H(b))},z=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(b,m,e,c,f){if(!v[b.getName()])return[];
c||(c=0);e||(e=[]);for(var g=0,k=b.getChildCount();g<k;g++){var h=b.getChild(g);h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(h,m,e,c+1);if("li"==h.$.nodeName.toLowerCase()){var d={parent:b,indent:c,element:h,contents:[]};f?d.grandparent=f:(d.grandparent=b.getParent(),d.grandparent&&"li"==d.grandparent.$.nodeName.toLowerCase()&&(d.grandparent=d.grandparent.getParent()));m&&CKEDITOR.dom.element.setMarker(m,h,"listarray_index",e.length);e.push(d);
for(var a=0,p=h.getChildCount(),l;a<p;a++)l=h.getChild(a),l.type==CKEDITOR.NODE_ELEMENT&&v[l.getName()]?CKEDITOR.plugins.list.listToArray(l,m,e,c+1,d.grandparent):d.contents.push(l)}}return e},arrayToList:function(b,m,e,c,f){e||(e=0);if(!b||b.length<e+1)return null;for(var g,k=b[e].parent.getDocument(),h=new CKEDITOR.dom.documentFragment(k),d=null,a=e,p=Math.max(b[e].indent,0),l=null,q,n,t=c==CKEDITOR.ENTER_P?"p":"div";;){var r=b[a];g=r.grandparent;q=r.element.getDirection(1);if(r.indent==p){d&&b[a].parent.getName()==
d.getName()||(d=b[a].parent.clone(!1,1),f&&d.setAttribute("dir",f),h.append(d));l=d.append(r.element.clone(0,1));q!=d.getDirection(1)&&l.setAttribute("dir",q);for(g=0;g<r.contents.length;g++)l.append(r.contents[g].clone(1,1));a++}else if(r.indent==Math.max(p,0)+1)r=b[a-1].element.getDirection(1),a=CKEDITOR.plugins.list.arrayToList(b,null,a,c,r!=q?q:null),!l.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=k.$.documentMode&&l.append(k.createText(" ")),l.append(a.listNode),a=a.nextIndex;else if(-1==
r.indent&&!e&&g){v[g.getName()]?(l=r.element.clone(!1,!0),q!=g.getDirection(1)&&l.setAttribute("dir",q)):l=new CKEDITOR.dom.documentFragment(k);var d=g.getDirection(1)!=q,y=r.element,D=y.getAttribute("class"),z=y.getAttribute("style"),A=l.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(c!=CKEDITOR.ENTER_BR||d||z||D),w,B=r.contents.length,x;for(g=0;g<B;g++)if(w=r.contents[g],H(w)&&1<B)A?x=w.clone(1,1):l.append(w.clone(1,1));else if(w.type==CKEDITOR.NODE_ELEMENT&&w.isBlockBoundary()){d&&!w.getDirection()&&
w.setAttribute("dir",q);n=w;var C=y.getAttribute("style");C&&n.setAttribute("style",C.replace(/([^;])$/,"$1;")+(n.getAttribute("style")||""));D&&w.addClass(D);n=null;x&&(l.append(x),x=null);l.append(w.clone(1,1))}else A?(n||(n=k.createElement(t),l.append(n),d&&n.setAttribute("dir",q)),z&&n.setAttribute("style",z),D&&n.setAttribute("class",D),x&&(n.append(x),x=null),n.append(w.clone(1,1))):l.append(w.clone(1,1));x&&((n||l).append(x),x=null);l.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&a!=b.length-1&&(CKEDITOR.env.needsBrFiller&&
(q=l.getLast())&&q.type==CKEDITOR.NODE_ELEMENT&&q.is("br")&&q.remove(),(q=l.getLast(u))&&q.type==CKEDITOR.NODE_ELEMENT&&q.is(CKEDITOR.dtd.$block)||l.append(k.createElement("br")));q=l.$.nodeName.toLowerCase();"div"!=q&&"p"!=q||l.appendBogus();h.append(l);d=null;a++}else return null;n=null;if(b.length<=a||Math.max(b[a].indent,0)<p)break}if(m)for(b=h.getFirst();b;){if(b.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(m,b),b.getName()in CKEDITOR.dtd.$listItem&&(e=b,k=f=c=void 0,c=e.getDirection()))){for(f=
e.getParent();f&&!(k=f.getDirection());)f=f.getParent();c==k&&e.removeAttribute("dir")}b=b.getNextSourceNode()}return{listNode:h,nextIndex:a}}};var L=/^h[1-6]$/,J=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);B.prototype={exec:function(b){this.refresh(b,b.elementPath());var m=b.config,e=b.getSelection(),c=e&&e.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var f=b.editable();if(f.getFirst(u)){var g=1==c.length&&c[0];(m=g&&g.getEnclosedNode())&&m.is&&this.type==m.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else m.enterMode==
CKEDITOR.ENTER_BR?f.appendBogus():c[0].fixBlock(1,m.enterMode==CKEDITOR.ENTER_P?"p":"div"),e.selectRanges(c)}for(var m=e.createBookmarks(!0),f=[],k={},c=c.createIterator(),h=0;(g=c.getNextRange())&&++h;){var d=g.getBoundaryNodes(),a=d.startNode,p=d.endNode;a.type==CKEDITOR.NODE_ELEMENT&&"td"==a.getName()&&g.setStartAt(d.startNode,CKEDITOR.POSITION_AFTER_START);p.type==CKEDITOR.NODE_ELEMENT&&"td"==p.getName()&&g.setEndAt(d.endNode,CKEDITOR.POSITION_BEFORE_END);g=g.createIterator();for(g.forceBrBreak=
this.state==CKEDITOR.TRISTATE_OFF;d=g.getNextParagraph();)if(!d.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(k,d,"list_block",1);for(var l=b.elementPath(d),a=l.elements,p=0,l=l.blockLimit,q,n=a.length-1;0<=n&&(q=a[n]);n--)if(v[q.getName()]&&l.contains(q)){l.removeCustomData("list_group_object_"+h);(a=q.getCustomData("list_group_object"))?a.contents.push(d):(a={root:q,contents:[d]},f.push(a),CKEDITOR.dom.element.setMarker(k,q,"list_group_object",a));p=1;break}p||(p=l,p.getCustomData("list_group_object_"+
h)?p.getCustomData("list_group_object_"+h).contents.push(d):(a={root:p,contents:[d]},CKEDITOR.dom.element.setMarker(k,p,"list_group_object_"+h,a),f.push(a)))}}for(q=[];0<f.length;)if(a=f.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(v[a.root.getName()]){c=b;h=a;a=k;g=q;p=CKEDITOR.plugins.list.listToArray(h.root,a);l=[];for(d=0;d<h.contents.length;d++)n=h.contents[d],(n=n.getAscendant("li",!0))&&!n.getCustomData("list_item_processed")&&(l.push(n),CKEDITOR.dom.element.setMarker(a,n,"list_item_processed",
!0));for(var n=h.root.getDocument(),t=void 0,r=void 0,d=0;d<l.length;d++){var y=l[d].getCustomData("listarray_index"),t=p[y].parent;t.is(this.type)||(r=n.createElement(this.type),t.copyAttributes(r,{start:1,type:1}),r.removeStyle("list-style-type"),p[y].parent=r)}a=CKEDITOR.plugins.list.arrayToList(p,a,null,c.config.enterMode);p=void 0;l=a.listNode.getChildCount();for(d=0;d<l&&(p=a.listNode.getChild(d));d++)p.getName()==this.type&&g.push(p);a.listNode.replace(h.root);c.fire("contentDomInvalidated")}else{p=
b;g=a;d=q;l=g.contents;c=g.root.getDocument();h=[];1==l.length&&l[0].equals(g.root)&&(a=c.createElement("div"),l[0].moveChildren&&l[0].moveChildren(a),l[0].append(a),l[0]=a);g=g.contents[0].getParent();for(n=0;n<l.length;n++)g=g.getCommonAncestor(l[n].getParent());t=p.config.useComputedState;p=a=void 0;t=void 0===t||t;for(n=0;n<l.length;n++)for(r=l[n];y=r.getParent();){if(y.equals(g)){h.push(r);!p&&r.getDirection()&&(p=1);r=r.getDirection(t);null!==a&&(a=a&&a!=r?null:r);break}r=y}if(!(1>h.length)){l=
h[h.length-1].getNext();n=c.createElement(this.type);d.push(n);for(t=d=void 0;h.length;)d=h.shift(),t=c.createElement("li"),r=d,r.is("pre")||L.test(r.getName())||"false"==r.getAttribute("contenteditable")?d.appendTo(t):(d.copyAttributes(t),a&&d.getDirection()&&(t.removeStyle("direction"),t.removeAttribute("dir")),d.moveChildren(t),d.remove()),t.appendTo(n);a&&p&&n.setAttribute("dir",a);l?n.insertBefore(l):n.appendTo(g)}}else this.state==CKEDITOR.TRISTATE_ON&&v[a.root.getName()]&&I.call(this,b,a,k);
for(n=0;n<q.length;n++)F(q[n]);CKEDITOR.dom.element.clearAllMarkers(k);e.selectBookmarks(m);b.focus()},refresh:function(b,m){var e=m.contains(v,1),c=m.blockLimit||m.root;e&&c.contains(e)?this.setState(e.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(b){b.blockless||(b.addCommand("numberedlist",new B("numberedlist","ol")),b.addCommand("bulletedlist",new B("bulletedlist","ul")),b.ui.addButton&&
(b.ui.addButton("NumberedList",{label:b.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),b.ui.addButton("BulletedList",{label:b.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),b.on("key",function(m){var e=m.data.domEvent.getKey(),c;if("wysiwyg"==b.mode&&e in{8:1,46:1}){var f=b.getSelection().getRanges()[0],g=f&&f.startPath();if(f&&f.collapsed){var k=8==e,h=b.editable(),d=new CKEDITOR.dom.walker(f.clone());d.evaluator=function(a){return u(a)&&
!z(a)};d.guard=function(a,b){return!(b&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))};e=f.clone();if(k){var a;(a=g.contains(v))&&f.checkBoundaryOfElement(a,CKEDITOR.START)&&(a=a.getParent())&&a.is("li")&&(a=A(a))?(c=a,a=a.getPrevious(u),e.moveToPosition(a&&z(a)?a:c,CKEDITOR.POSITION_BEFORE_START)):(d.range.setStartAt(h,CKEDITOR.POSITION_AFTER_START),d.range.setEnd(f.startContainer,f.startOffset),(a=d.previous())&&a.type==CKEDITOR.NODE_ELEMENT&&(a.getName()in v||a.is("li"))&&(a.is("li")||(d.range.selectNodeContents(a),
d.reset(),d.evaluator=G,a=d.previous()),c=a,e.moveToElementEditEnd(c),e.moveToPosition(e.endPath().block,CKEDITOR.POSITION_BEFORE_END)));if(c)C(b,e,f),m.cancel();else{var p=g.contains(v);p&&f.checkBoundaryOfElement(p,CKEDITOR.START)&&(c=p.getFirst(u),f.checkBoundaryOfElement(c,CKEDITOR.START)&&(a=p.getPrevious(u),A(c)?a&&(f.moveToElementEditEnd(a),f.select()):b.execCommand("outdent"),m.cancel()))}}else if(c=g.contains("li")){if(d.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),k=(h=c.getLast(u))&&
G(h)?h:c,g=0,(a=d.next())&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in v&&a.equals(h)?(g=1,a=d.next()):f.checkBoundaryOfElement(k,CKEDITOR.END)&&(g=2),g&&a){f=f.clone();f.moveToElementEditStart(a);if(1==g&&(e.optimize(),!e.startContainer.equals(c))){for(c=e.startContainer;c.is(CKEDITOR.dtd.$inline);)p=c,c=c.getParent();p&&e.moveToPosition(p,CKEDITOR.POSITION_AFTER_END)}2==g&&(e.moveToPosition(e.endPath().block,CKEDITOR.POSITION_BEFORE_END),f.endPath().block&&f.moveToPosition(f.endPath().block,CKEDITOR.POSITION_AFTER_START));
C(b,e,f);m.cancel()}}else d.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),(a=d.next())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is(v)&&(a=a.getFirst(u),g.block&&f.checkStartOfBlock()&&f.checkEndOfBlock()?(g.block.remove(),f.moveToElementEditStart(a),f.select()):A(a)?(f.moveToElementEditStart(a),f.select()):(f=f.clone(),f.moveToElementEditStart(a),C(b,e,f)),m.cancel());setTimeout(function(){b.selectionChange(1)})}}}))}})})();(function(){CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(a){if(!a.blockless){var b;b=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]"});b=a.addCommand("numberedListStyle",b);a.addFeature(b);CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js");b=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}"});b=a.addCommand("bulletedListStyle",b);
a.addFeature(b);CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js");a.addMenuGroup("list",108);a.addMenuItems({numberedlist:{label:a.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:a.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}});a.contextMenu.addListener(function(a){if(!a||a.isReadOnly())return null;for(;a;){var b=a.getName();if("ol"==b)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==b)return{bulletedlist:CKEDITOR.TRISTATE_OFF};
a=a.getParent()}return null})}}};CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle)})();(function(){function V(a,c,d){return n(c)&&n(d)&&d.equals(c.getNext(function(a){return!(E(a)||F(a)||u(a))}))}function z(a){this.upper=a[0];this.lower=a[1];this.set.apply(this,a.slice(2))}function O(a){var c=a.element;if(c&&n(c)&&(c=c.getAscendant(a.triggers,!0))&&a.editable.contains(c)){var d=P(c);if("true"==d.getAttribute("contenteditable"))return c;if(d.is(a.triggers))return d}return null}function ka(a,c,d){r(a,c);r(a,d);a=c.size.bottom;d=d.size.top;return a&&d?0|(a+d)/2:a||d}function w(a,c,d){return c=
c[d?"getPrevious":"getNext"](function(b){return b&&b.type==CKEDITOR.NODE_TEXT&&!E(b)||n(b)&&!u(b)&&!A(a,b)})}function q(a,c,d){return a>c&&a<d}function P(a,c){if(a.data("cke-editable"))return null;for(c||(a=a.getParent());a&&!a.data("cke-editable");){if(a.hasAttribute("contenteditable"))return a;a=a.getParent()}return null}function la(a){var c=a.doc,d=G('\x3cspan contenteditable\x3d"false" style\x3d"'+Q+"position:absolute;border-top:1px dashed "+a.boxColor+'"\x3e\x3c/span\x3e',c),b=CKEDITOR.getUrl(this.path+
"images/"+(t.hidpi?"hidpi/":"")+"icon"+(a.rtl?"-rtl":"")+".png");v(d,{attach:function(){this.wrap.getParent()||this.wrap.appendTo(a.editable,!0);return this},lineChildren:[v(G('\x3cspan title\x3d"'+a.editor.lang.magicline.title+'" contenteditable\x3d"false"\x3e\x26#8629;\x3c/span\x3e',c),{base:Q+"height:17px;width:17px;"+(a.rtl?"left":"right")+":17px;background:url("+b+") center no-repeat "+a.boxColor+";cursor:pointer;"+(t.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":
"")+(t.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),v(G(W,c),{base:X+"left:0px;border-left-color:"+a.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),v(G(W,c),{base:X+"right:0px;border-right-color:"+a.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px",
"border-width:0 8px 8px 0;top:0px"]})],detach:function(){this.wrap.getParent()&&this.wrap.remove();return this},mouseNear:function(){r(a,this);var b=a.holdDistance,c=this.size;return c&&q(a.mouse.y,c.top-b,c.bottom+b)&&q(a.mouse.x,c.left-b,c.right+b)?!0:!1},place:function(){var b=a.view,c=a.editable,d=a.trigger,h=d.upper,g=d.lower,l=h||g,p=l.getParent(),m={};this.trigger=d;h&&r(a,h,!0);g&&r(a,g,!0);r(a,p,!0);a.inInlineMode&&H(a,!0);p.equals(c)?(m.left=b.scroll.x,m.right=-b.scroll.x,m.width=""):(m.left=
l.size.left-l.size.margin.left+b.scroll.x-(a.inInlineMode?b.editable.left+b.editable.border.left:0),m.width=l.size.outerWidth+l.size.margin.left+l.size.margin.right+b.scroll.x,m.right="");h&&g?m.top=h.size.margin.bottom===g.size.margin.top?0|h.size.bottom+h.size.margin.bottom/2:h.size.margin.bottom<g.size.margin.top?h.size.bottom+h.size.margin.bottom:h.size.bottom+h.size.margin.bottom-g.size.margin.top:h?g||(m.top=h.size.bottom+h.size.margin.bottom):m.top=g.size.top-g.size.margin.top;d.is(C)||q(m.top,
b.scroll.y-15,b.scroll.y+5)?(m.top=a.inInlineMode?0:b.scroll.y,this.look(C)):d.is(D)||q(m.top,b.pane.bottom-5,b.pane.bottom+15)?(m.top=a.inInlineMode?b.editable.height+b.editable.padding.top+b.editable.padding.bottom:b.pane.bottom-1,this.look(D)):(a.inInlineMode&&(m.top-=b.editable.top+b.editable.border.top),this.look(x));a.inInlineMode&&(m.top--,m.top+=b.editable.scroll.top,m.left+=b.editable.scroll.left);for(var n in m)m[n]=CKEDITOR.tools.cssLength(m[n]);this.setStyles(m)},look:function(a){if(this.oldLook!=
a){for(var b=this.lineChildren.length,c;b--;)(c=this.lineChildren[b]).setAttribute("style",c.base+c.looks[0|a/2]);this.oldLook=a}},wrap:new R("span",a.doc)});for(c=d.lineChildren.length;c--;)d.lineChildren[c].appendTo(d);d.look(x);d.appendTo(d.wrap);d.unselectable();d.lineChildren[0].on("mouseup",function(b){d.detach();S(a,function(b){var c=a.line.trigger;b[c.is(I)?"insertBefore":"insertAfter"](c.is(I)?c.lower:c.upper)},!0);a.editor.focus();t.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView();
b.data.preventDefault(!0)});d.on("mousedown",function(a){a.data.preventDefault(!0)});a.line=d}function S(a,c,d){var b=new CKEDITOR.dom.range(a.doc),e=a.editor,f;t.ie&&a.enterMode==CKEDITOR.ENTER_BR?f=a.doc.createText(J):(f=(f=P(a.element,!0))&&f.data("cke-enter-mode")||a.enterMode,f=new R(K[f],a.doc),f.is("br")||a.doc.createText(J).appendTo(f));d&&e.fire("saveSnapshot");c(f);b.moveToPosition(f,CKEDITOR.POSITION_AFTER_START);e.getSelection().selectRanges([b]);a.hotNode=f;d&&e.fire("saveSnapshot")}
function Y(a,c){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function d(b){var d=t.ie&&9>t.version?" ":J,f=a.hotNode&&a.hotNode.getText()==d&&a.element.equals(a.hotNode)&&a.lastCmdDirection===!!c;S(a,function(d){f&&a.hotNode&&a.hotNode.remove();d[c?"insertAfter":"insertBefore"](b);d.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!c});a.lastCmdDirection=!!c});t.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView();a.line.detach()}return function(b){b=b.getSelection().getStartElement();
var e;b=b.getAscendant(Z,1);if(!aa(a,b)&&b&&!b.equals(a.editable)&&!b.contains(a.editable)){(e=P(b))&&"false"==e.getAttribute("contenteditable")&&(b=e);a.element=b;e=w(a,b,!c);var f;n(e)&&e.is(a.triggers)&&e.is(ma)&&(!w(a,e,!c)||(f=w(a,e,!c))&&n(f)&&f.is(a.triggers))?d(e):(f=O(a,b),n(f)&&(w(a,f,!c)?(b=w(a,f,!c))&&n(b)&&b.is(a.triggers)&&d(f):d(f)))}}}()}}function A(a,c){if(!c||c.type!=CKEDITOR.NODE_ELEMENT||!c.$)return!1;var d=a.line;return d.wrap.equals(c)||d.wrap.contains(c)}function n(a){return a&&
a.type==CKEDITOR.NODE_ELEMENT&&a.$}function u(a){if(!n(a))return!1;var c;(c=ba(a))||(n(a)?(c={left:1,right:1,center:1},c=!(!c[a.getComputedStyle("float")]&&!c[a.getAttribute("align")])):c=!1);return c}function ba(a){return!!{absolute:1,fixed:1}[a.getComputedStyle("position")]}function L(a,c){return n(c)?c.is(a.triggers):null}function aa(a,c){if(!c)return!1;for(var d=c.getParents(1),b=d.length;b--;)for(var e=a.tabuList.length;e--;)if(d[b].hasAttribute(a.tabuList[e]))return!0;return!1}function na(a,
c,d){c=c[d?"getLast":"getFirst"](function(b){return a.isRelevant(b)&&!b.is(oa)});if(!c)return!1;r(a,c);return d?c.size.top>a.mouse.y:c.size.bottom<a.mouse.y}function ca(a){var c=a.editable,d=a.mouse,b=a.view,e=a.triggerOffset;H(a);var f=d.y>(a.inInlineMode?b.editable.top+b.editable.height/2:Math.min(b.editable.height,b.pane.height)/2),c=c[f?"getLast":"getFirst"](function(a){return!(E(a)||F(a))});if(!c)return null;A(a,c)&&(c=a.line.wrap[f?"getPrevious":"getNext"](function(a){return!(E(a)||F(a))}));
if(!n(c)||u(c)||!L(a,c))return null;r(a,c);return!f&&0<=c.size.top&&q(d.y,0,c.size.top+e)?(a=a.inInlineMode||0===b.scroll.y?C:x,new z([null,c,I,M,a])):f&&c.size.bottom<=b.pane.height&&q(d.y,c.size.bottom-e,b.pane.height)?(a=a.inInlineMode||q(c.size.bottom,b.pane.height-e,b.pane.height)?D:x,new z([c,null,da,M,a])):null}function ea(a){var c=a.mouse,d=a.view,b=a.triggerOffset,e=O(a);if(!e)return null;r(a,e);var b=Math.min(b,0|e.size.outerHeight/2),f=[],k,h;if(q(c.y,e.size.top-1,e.size.top+b))h=!1;else if(q(c.y,
e.size.bottom-b,e.size.bottom+1))h=!0;else return null;if(u(e)||na(a,e,h)||e.getParent().is(fa))return null;var g=w(a,e,!h);if(g){if(g&&g.type==CKEDITOR.NODE_TEXT)return null;if(n(g)){if(u(g)||!L(a,g)||g.getParent().is(fa))return null;f=[g,e][h?"reverse":"concat"]().concat([T,M])}}else e.equals(a.editable[h?"getLast":"getFirst"](a.isRelevant))?(H(a),h&&q(c.y,e.size.bottom-b,d.pane.height)&&q(e.size.bottom,d.pane.height-b,d.pane.height)?k=D:q(c.y,0,e.size.top+b)&&(k=C)):k=x,f=[null,e][h?"reverse":
"concat"]().concat([h?da:I,M,k,e.equals(a.editable[h?"getLast":"getFirst"](a.isRelevant))?h?D:C:x]);return 0 in f?new z(f):null}function U(a,c,d,b){for(var e=c.getDocumentPosition(),f={},k={},h={},g={},l=y.length;l--;)f[y[l]]=parseInt(c.getComputedStyle.call(c,"border-"+y[l]+"-width"),10)||0,h[y[l]]=parseInt(c.getComputedStyle.call(c,"padding-"+y[l]),10)||0,k[y[l]]=parseInt(c.getComputedStyle.call(c,"margin-"+y[l]),10)||0;d&&!b||N(a,b);g.top=e.y-(d?0:a.view.scroll.y);g.left=e.x-(d?0:a.view.scroll.x);
g.outerWidth=c.$.offsetWidth;g.outerHeight=c.$.offsetHeight;g.height=g.outerHeight-(h.top+h.bottom+f.top+f.bottom);g.width=g.outerWidth-(h.left+h.right+f.left+f.right);g.bottom=g.top+g.outerHeight;g.right=g.left+g.outerWidth;a.inInlineMode&&(g.scroll={top:c.$.scrollTop,left:c.$.scrollLeft});return v({border:f,padding:h,margin:k,ignoreScroll:d},g,!0)}function r(a,c,d){if(!n(c))return c.size=null;if(!c.size)c.size={};else if(c.size.ignoreScroll==d&&c.size.date>new Date-ga)return null;return v(c.size,
U(a,c,d),{date:+new Date},!0)}function H(a,c){a.view.editable=U(a,a.editable,c,!0)}function N(a,c){a.view||(a.view={});var d=a.view;if(!(!c&&d&&d.date>new Date-ga)){var b=a.win,d=b.getScrollPosition(),b=b.getViewPaneSize();v(a.view,{scroll:{x:d.x,y:d.y,width:a.doc.$.documentElement.scrollWidth-b.width,height:a.doc.$.documentElement.scrollHeight-b.height},pane:{width:b.width,height:b.height,bottom:b.height+d.y},date:+new Date},!0)}}function pa(a,c,d,b){for(var e=b,f=b,k=0,h=!1,g=!1,l=a.view.pane.height,
p=a.mouse;p.y+k<l&&0<p.y-k;){h||(h=c(e,b));g||(g=c(f,b));!h&&0<p.y-k&&(e=d(a,{x:p.x,y:p.y-k}));!g&&p.y+k<l&&(f=d(a,{x:p.x,y:p.y+k}));if(h&&g)break;k+=2}return new z([e,f,null,null])}CKEDITOR.plugins.add("magicline",{init:function(a){var c=a.config,d=c.magicline_triggerOffset||30,b={editor:a,enterMode:c.enterMode,triggerOffset:d,holdDistance:0|d*(c.magicline_holdDistance||.5),boxColor:c.magicline_color||"#ff0000",rtl:"rtl"==c.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(c.magicline_tabuList||
[]),triggers:c.magicline_everywhere?Z:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},e,f,k;b.isRelevant=function(a){return n(a)&&!A(b,a)&&!u(a)};a.on("contentDom",function(){var d=a.editable(),g=a.document,l=a.window;v(b,{editable:d,inInlineMode:d.isInline(),doc:g,win:l,hotNode:null},!0);b.boundary=b.inInlineMode?b.editable:b.doc.getDocumentElement();d.is(B.$inline)||(b.inInlineMode&&!ba(d)&&d.setStyles({position:"relative",top:null,left:null}),la.call(this,b),N(b),d.attachListener(a,"beforeUndoImage",
function(){b.line.detach()}),d.attachListener(a,"beforeGetData",function(){b.line.wrap.getParent()&&(b.line.detach(),a.once("getData",function(){b.line.attach()},null,null,1E3))},null,null,0),d.attachListener(b.inInlineMode?g:g.getWindow().getFrame(),"mouseout",function(c){if("wysiwyg"==a.mode)if(b.inInlineMode){var d=c.data.$.clientX;c=c.data.$.clientY;N(b);H(b,!0);var e=b.view.editable,f=b.view.scroll;d>e.left-f.x&&d<e.right-f.x&&c>e.top-f.y&&c<e.bottom-f.y||(clearTimeout(k),k=null,b.line.detach())}else clearTimeout(k),
k=null,b.line.detach()}),d.attachListener(d,"keyup",function(){b.hiddenMode=0}),d.attachListener(d,"keydown",function(c){if("wysiwyg"==a.mode)switch(c.data.getKeystroke()){case 2228240:case 16:b.hiddenMode=1,b.line.detach()}}),d.attachListener(b.inInlineMode?d:g,"mousemove",function(c){f=!0;if("wysiwyg"==a.mode&&!a.readOnly&&!k){var d={x:c.data.$.clientX,y:c.data.$.clientY};k=setTimeout(function(){b.mouse=d;k=b.trigger=null;N(b);f&&!b.hiddenMode&&a.focusManager.hasFocus&&!b.line.mouseNear()&&(b.element=
ha(b,!0))&&((b.trigger=ca(b)||ea(b)||ia(b))&&!aa(b,b.trigger.upper||b.trigger.lower)?b.line.attach().place():(b.trigger=null,b.line.detach()),f=!1)},30)}}),d.attachListener(l,"scroll",function(){"wysiwyg"==a.mode&&(b.line.detach(),t.webkit&&(b.hiddenMode=1,clearTimeout(e),e=setTimeout(function(){b.mouseDown||(b.hiddenMode=0)},50)))}),d.attachListener(ja?g:l,"mousedown",function(){"wysiwyg"==a.mode&&(b.line.detach(),b.hiddenMode=1,b.mouseDown=1)}),d.attachListener(ja?g:l,"mouseup",function(){b.hiddenMode=
0;b.mouseDown=0}),a.addCommand("accessPreviousSpace",Y(b)),a.addCommand("accessNextSpace",Y(b,!0)),a.setKeystroke([[c.magicline_keystrokePrevious,"accessPreviousSpace"],[c.magicline_keystrokeNext,"accessNextSpace"]]),a.on("loadSnapshot",function(){var c,d,e,f;for(f in{p:1,br:1,div:1})for(c=a.document.getElementsByTag(f),e=c.count();e--;)if((d=c.getItem(e)).data("cke-magicline-hot")){b.hotNode=d;b.lastCmdDirection="true"===d.data("cke-magicline-dir")?!0:!1;return}}),this.backdoor={accessFocusSpace:S,
boxTrigger:z,isLine:A,getAscendantTrigger:O,getNonEmptyNeighbour:w,getSize:U,that:b,triggerEdge:ea,triggerEditable:ca,triggerExpand:ia})},this)}});var v=CKEDITOR.tools.extend,R=CKEDITOR.dom.element,G=R.createFromHtml,t=CKEDITOR.env,ja=CKEDITOR.env.ie&&9>CKEDITOR.env.version,B=CKEDITOR.dtd,K={},I=128,da=64,T=32,M=16,C=4,D=2,x=1,J=" ",fa=B.$listItem,oa=B.$tableContent,ma=v({},B.$nonEditable,B.$empty),Z=B.$block,ga=100,Q="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",
X=Q+"border-color:transparent;display:block;border-style:solid;",W="\x3cspan\x3e"+J+"\x3c/span\x3e";K[CKEDITOR.ENTER_BR]="br";K[CKEDITOR.ENTER_P]="p";K[CKEDITOR.ENTER_DIV]="div";z.prototype={set:function(a,c,d){this.properties=a+c+(d||x);return this},is:function(a){return(this.properties&a)==a}};var ha=function(){function a(a,d){var b=a.$.elementFromPoint(d.x,d.y);return b&&b.nodeType?new CKEDITOR.dom.element(b):null}return function(c,d,b){if(!c.mouse)return null;var e=c.doc,f=c.line.wrap;b=b||c.mouse;
var k=a(e,b);d&&A(c,k)&&(f.hide(),k=a(e,b),f.show());return!k||k.type!=CKEDITOR.NODE_ELEMENT||!k.$||t.ie&&9>t.version&&!c.boundary.equals(k)&&!c.boundary.contains(k)?null:k}}(),E=CKEDITOR.dom.walker.whitespaces(),F=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),ia=function(){function a(a){var b=a.element,e,f,k;if(!n(b)||b.contains(a.editable)||b.isReadOnly())return null;k=pa(a,function(a,b){return!b.equals(a)},function(a,b){return ha(a,!0,b)},b);e=k.upper;f=k.lower;if(V(a,e,f))return k.set(T,
8);if(e&&b.contains(e))for(;!e.getParent().equals(b);)e=e.getParent();else e=b.getFirst(function(b){return c(a,b)});if(f&&b.contains(f))for(;!f.getParent().equals(b);)f=f.getParent();else f=b.getLast(function(b){return c(a,b)});if(!e||!f)return null;r(a,e);r(a,f);if(!q(a.mouse.y,e.size.top,f.size.bottom))return null;for(var b=Number.MAX_VALUE,h,g,l,p;f&&!f.equals(e)&&(g=e.getNext(a.isRelevant));)h=Math.abs(ka(a,e,g)-a.mouse.y),h<b&&(b=h,l=e,p=g),e=g,r(a,e);if(!l||!p||!q(a.mouse.y,l.size.top,p.size.bottom))return null;
k.upper=l;k.lower=p;return k.set(T,8)}function c(a,b){return!(b&&b.type==CKEDITOR.NODE_TEXT||F(b)||u(b)||A(a,b)||b.type==CKEDITOR.NODE_ELEMENT&&b.$&&b.is("br"))}return function(c){var b=a(c),e;if(e=b){e=b.upper;var f=b.lower;e=!e||!f||u(f)||u(e)||f.equals(e)||e.equals(f)||f.contains(e)||e.contains(f)?!1:L(c,e)&&L(c,f)&&V(c,e,f)?!0:!1}return e?b:null}}(),y=["top","left","right","bottom"]})();CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51;
CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52;(function(){function n(a){if(!a||a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())return[];for(var e=[],f=["style","className"],b=0;b<f.length;b++){var c=a.$.elements.namedItem(f[b]);c&&(c=new CKEDITOR.dom.element(c),e.push([c,c.nextSibling]),c.remove())}return e}function t(a,e){if(a&&a.type==CKEDITOR.NODE_ELEMENT&&"form"==a.getName()&&0<e.length)for(var f=e.length-1;0<=f;f--){var b=e[f][0],c=e[f][1];c?b.insertBefore(c):b.appendTo(a)}}function r(a,e){var f=n(a),b={},c=a.$;e||(b["class"]=c.className||
"",c.className="");b.inline=c.style.cssText||"";e||(c.style.cssText="position: static; overflow: visible");t(f);return b}function u(a,e){var f=n(a),b=a.$;"class"in e&&(b.className=e["class"]);"inline"in e&&(b.style.cssText=e.inline);t(f)}function v(a){if(!a.editable().isInline()){var e=CKEDITOR.instances,f;for(f in e){var b=e[f];"wysiwyg"!=b.mode||b.readOnly||(b=b.document.getBody(),b.setAttribute("contentEditable",!1),b.setAttribute("contentEditable",!0))}a.editable().hasFocus&&(a.toolbox.focus(),
a.focus())}}CKEDITOR.plugins.add("maximize",{init:function(a){function e(){var b=c.getViewPaneSize();a.resize(b.width,b.height,null,!0)}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var f=a.lang,b=CKEDITOR.document,c=b.getWindow(),l,m,p,n=CKEDITOR.TRISTATE_OFF;a.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var h=a.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}),g=a.ui.space("contents");
if("wysiwyg"==a.mode){var d=a.getSelection();l=d&&d.getRanges();m=c.getScrollPosition()}else{var k=a.editable().$;l=!CKEDITOR.env.ie&&[k.selectionStart,k.selectionEnd];m=[k.scrollLeft,k.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){c.on("resize",e);p=c.getScrollPosition();for(d=a.container;d=d.getParent();)d.setCustomData("maximize_saved_styles",r(d)),d.setStyle("z-index",a.config.baseFloatZIndex-5);g.setCustomData("maximize_saved_styles",r(g,!0));h.setCustomData("maximize_saved_styles",r(h,!0));
g={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0};b.getDocumentElement().setStyles(g);!CKEDITOR.env.gecko&&b.getDocumentElement().setStyle("position","fixed");CKEDITOR.env.gecko&&CKEDITOR.env.quirks||b.getBody().setStyles(g);CKEDITOR.env.ie?setTimeout(function(){c.$.scrollTo(0,0)},0):c.$.scrollTo(0,0);h.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute");h.$.offsetLeft;h.setStyles({"z-index":a.config.baseFloatZIndex-5,left:"0px",top:"0px"});h.addClass("cke_maximized");
e();g=h.getDocumentPosition();h.setStyles({left:-1*g.x+"px",top:-1*g.y+"px"});CKEDITOR.env.gecko&&v(a)}else if(this.state==CKEDITOR.TRISTATE_ON){c.removeListener("resize",e);for(var d=[g,h],q=0;q<d.length;q++)u(d[q],d[q].getCustomData("maximize_saved_styles")),d[q].removeCustomData("maximize_saved_styles");for(d=a.container;d=d.getParent();)u(d,d.getCustomData("maximize_saved_styles")),d.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){c.$.scrollTo(p.x,p.y)},0):c.$.scrollTo(p.x,
p.y);h.removeClass("cke_maximized");CKEDITOR.env.webkit&&(h.setStyle("display","inline"),setTimeout(function(){h.setStyle("display","block")},0));a.fire("resize",{outerHeight:a.container.$.offsetHeight,contentsHeight:g.$.offsetHeight,outerWidth:a.container.$.offsetWidth})}this.toggleState();if(d=this.uiItems[0])g=this.state==CKEDITOR.TRISTATE_OFF?f.maximize.maximize:f.maximize.minimize,d=CKEDITOR.document.getById(d._.id),d.getChild(1).setHtml(g),d.setAttribute("title",g),d.setAttribute("href",'javascript:void("'+
g+'");');"wysiwyg"==a.mode?l?(CKEDITOR.env.gecko&&v(a),a.getSelection().selectRanges(l),(k=a.getSelection().getStartElement())&&k.scrollIntoView(!0)):c.$.scrollTo(m.x,m.y):(l&&(k.selectionStart=l[0],k.selectionEnd=l[1]),k.scrollLeft=m[0],k.scrollTop=m[1]);l=m=null;n=this.state;a.fire("maximize",this.state)},canUndo:!1});a.ui.addButton&&a.ui.addButton("Maximize",{label:f.maximize.maximize,command:"maximize",toolbar:"tools,10"});a.on("mode",function(){var b=a.getCommand("maximize");b.setState(b.state==
CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:n)},null,null,100)}}})})();CKEDITOR.plugins.add("newpage",{init:function(a){a.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(b){var a=this;b.setData(b.config.newpage_html||"",function(){b.focus();setTimeout(function(){b.fire("afterCommandExec",{name:"newpage",command:a});b.selectionChange()},200)})},async:!0});a.ui.addButton&&a.ui.addButton("NewPage",{label:a.lang.newpage.toolbar,command:"newpage",toolbar:"document,20"})}});(function(){function e(a){return{"aria-label":a,"class":"cke_pagebreak",contenteditable:"false","data-cke-display-name":"pagebreak","data-cke-pagebreak":1,style:"page-break-after: always",title:a}}CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",onLoad:function(){var a=("background:url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:7px;cursor:default;").replace(/;/g,
" !important;");CKEDITOR.addCss("div.cke_pagebreak{"+a+"}")},init:function(a){a.blockless||(a.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),a.ui.addButton&&a.ui.addButton("PageBreak",{label:a.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.webkit&&a.on("contentDom",function(){a.document.on("click",function(b){b=b.data.getTarget();b.is("div")&&b.hasClass("cke_pagebreak")&&a.getSelection().selectElement(b)})}))},afterInit:function(a){function b(f){CKEDITOR.tools.extend(f.attributes,
e(a.lang.pagebreak.alt),!0);f.children.length=0}var c=a.dataProcessor,g=c&&c.dataFilter,c=c&&c.htmlFilter,h=/page-break-after\s*:\s*always/i,k=/display\s*:\s*none/i;c&&c.addRules({attributes:{"class":function(a,b){var c=a.replace("cke_pagebreak","");if(c!=a){var d=CKEDITOR.htmlParser.fragment.fromHtml('\x3cspan style\x3d"display: none;"\x3e\x26nbsp;\x3c/span\x3e').children[0];b.children.length=0;b.add(d);d=b.attributes;delete d["aria-label"];delete d.contenteditable;delete d.title}return c}}},{applyToAll:!0,
priority:5});g&&g.addRules({elements:{div:function(a){if(a.attributes["data-cke-pagebreak"])b(a);else if(h.test(a.attributes.style)){var c=a.children[0];c&&"span"==c.name&&k.test(c.attributes.style)&&b(a)}}}})}});CKEDITOR.plugins.pagebreakCmd={exec:function(a){var b=a.document.createElement("div",{attributes:e(a.lang.pagebreak.alt)});a.insertElement(b)},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function(a){return(a=a.parent)&&"div"==a.name&&a.styles&&a.styles["page-break-after"]},
styles:"display"}},requiredContent:"div{page-break-after}"}})();(function(){var c={canUndo:!1,async:!0,exec:function(a){a.getClipboardData({title:a.lang.pastetext.title},function(b){b&&a.fire("paste",{type:"text",dataValue:b.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});a.fire("afterCommandExec",{name:"pastetext",command:c,returnValue:!!b})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(a){a.addCommand("pastetext",c);a.ui.addButton&&a.ui.addButton("PasteText",{label:a.lang.pastetext.button,
command:"pastetext",toolbar:"clipboard,40"});if(a.config.forcePasteAsPlainText)a.on("beforePaste",function(a){"html"!=a.data.type&&(a.data.type="text")});a.on("pasteState",function(b){a.getCommand("pastetext").setState(b.data)})}})})();(function(){function h(a,d,f){var b=CKEDITOR.cleanWord;b?f():(a=CKEDITOR.getUrl(a.config.pasteFromWordCleanupFile||d+"filter/default.js"),CKEDITOR.scriptLoader.load(a,f,null,!0));return!b}function k(a){a.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(a){var d=0,f=this.path;a.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(a){var e=this;d=1;a.once("beforePaste",k);a.getClipboardData({title:a.lang.pastefromword.title},function(c){c&&a.fire("paste",
{type:"html",dataValue:c.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()});a.fire("afterCommandExec",{name:"pastefromword",command:e,returnValue:!!c})})}});a.ui.addButton&&a.ui.addButton("PasteFromWord",{label:a.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"});a.on("pasteState",function(b){a.getCommand("pastefromword").setState(b.data)});a.on("paste",function(b){var e=b.data,c=e.dataValue;if(c&&(d||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(c))){e.dontFilter=
!0;var g=h(a,f,function(){if(g)a.fire("paste",e);else if(!a.config.pasteFromWordPromptCleanup||d||confirm(a.lang.pastefromword.confirmCleanup))e.dataValue=CKEDITOR.cleanWord(c,a);d=0});g&&b.cancel()}},null,null,3)}})})();(function(){var h,k={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(a){var g,b=a.config,f=b.baseHref?'\x3cbase href\x3d"'+b.baseHref+'"/\x3e':"";if(b.fullPage)g=a.getData().replace(/<head>/,"$\x26"+f).replace(/[^>]*(?=<\/title>)/,"$\x26 \x26mdash; "+a.lang.preview.preview);else{var b="\x3cbody ",d=a.document&&a.document.getBody();d&&(d.getAttribute("id")&&(b+='id\x3d"'+d.getAttribute("id")+'" '),d.getAttribute("class")&&(b+='class\x3d"'+d.getAttribute("class")+'" '));b+="\x3e";g=a.config.docType+
'\x3chtml dir\x3d"'+a.config.contentsLangDirection+'"\x3e\x3chead\x3e'+f+"\x3ctitle\x3e"+a.lang.preview.preview+"\x3c/title\x3e"+CKEDITOR.tools.buildStyleHtml(a.config.contentsCss)+"\x3c/head\x3e"+b+a.getData()+"\x3c/body\x3e\x3c/html\x3e"}f=640;b=420;d=80;try{var c=window.screen,f=Math.round(.8*c.width),b=Math.round(.7*c.height),d=Math.round(.1*c.width)}catch(k){}if(!1===a.fire("contentPreview",a={dataValue:g}))return!1;var c="",e;CKEDITOR.env.ie&&(window._cke_htmlToLoad=a.dataValue,e="javascript:void( (function(){document.open();"+
("("+CKEDITOR.tools.fixDomain+")();").replace(/\/\/.*?\n/g,"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad \x3d null;})() )",c="");CKEDITOR.env.gecko&&(window._cke_htmlToLoad=a.dataValue,c=CKEDITOR.getUrl(h+"preview.html"));c=window.open(c,null,"toolbar\x3dyes,location\x3dno,status\x3dyes,menubar\x3dyes,scrollbars\x3dyes,resizable\x3dyes,width\x3d"+f+",height\x3d"+b+",left\x3d"+d);CKEDITOR.env.ie&&c&&(c.location=
e);CKEDITOR.env.ie||CKEDITOR.env.gecko||(e=c.document,e.open(),e.write(a.dataValue),e.close());return!0}};CKEDITOR.plugins.add("preview",{init:function(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(h=this.path,a.addCommand("preview",k),a.ui.addButton&&a.ui.addButton("Preview",{label:a.lang.preview.preview,command:"preview",toolbar:"document,40"}))}})})();CKEDITOR.plugins.add("print",{init:function(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(a.addCommand("print",CKEDITOR.plugins.print),a.ui.addButton&&a.ui.addButton("Print",{label:a.lang.print.toolbar,command:"print",toolbar:"document,50"}))}});CKEDITOR.plugins.print={exec:function(a){CKEDITOR.env.gecko?a.window.$.print():a.document.$.execCommand("Print")},canUndo:!1,readOnly:1,modes:{wysiwyg:1}};CKEDITOR.plugins.add("removeformat",{init:function(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat);a.ui.addButton&&a.ui.addButton("RemoveFormat",{label:a.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}});
CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(a){for(var h=a._.removeFormatRegex||(a._.removeFormatRegex=new RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),e=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),f=CKEDITOR.plugins.removeformat.filter,m=a.getSelection().getRanges(),n=m.createIterator(),p=function(a){return a.type==CKEDITOR.NODE_ELEMENT},c;c=n.getNextRange();){c.collapsed||c.enlarge(CKEDITOR.ENLARGE_ELEMENT);
var l=c.createBookmark(),b=l.startNode,d=l.endNode,k=function(b){for(var c=a.elementPath(b),e=c.elements,d=1,g;(g=e[d])&&!g.equals(c.block)&&!g.equals(c.blockLimit);d++)h.test(g.getName())&&f(a,g)&&b.breakParent(g)};k(b);if(d)for(k(d),b=b.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);b&&!b.equals(d);)if(b.isReadOnly()){if(b.getPosition(d)&CKEDITOR.POSITION_CONTAINS)break;b=b.getNext(p)}else k=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==b.getName()&&b.data("cke-realelement")||!f(a,b)||(h.test(b.getName())?
b.remove(1):(b.removeAttributes(e),a.fire("removeFormatCleanup",b))),b=k;c.moveToBookmark(l)}a.forceNextSelectionCheck();a.getSelection().selectRanges(m)}}},filter:function(a,h){for(var e=a._.removeFormatFilters||[],f=0;f<e.length;f++)if(!1===e[f](h))return!1;return!0}};CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormatFilters||(this._.removeFormatFilters=[]);this._.removeFormatFilters.push(a)};CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var";
CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign";(function(){var b={readOnly:1,exec:function(a){if(a.fire("save")&&(a=a.element.$.form))try{a.submit()}catch(b){a.submit.click&&a.submit.click()}}};CKEDITOR.plugins.add("save",{init:function(a){a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.addCommand("save",b).modes={wysiwyg:!!a.element.$.form},a.ui.addButton&&a.ui.addButton("Save",{label:a.lang.save.toolbar,command:"save",toolbar:"document,10"}))}})})();(function(){CKEDITOR.plugins.add("selectall",{init:function(b){b.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(a){var b=a.editable();if(b.is("textarea"))a=b.$,CKEDITOR.env.ie?a.createTextRange().execCommand("SelectAll"):(a.selectionStart=0,a.selectionEnd=a.value.length),a.focus();else{if(b.is("body"))a.document.$.execCommand("SelectAll",!1,null);else{var c=a.createRange();c.selectNodeContents(b);c.select()}a.forceNextSelectionCheck();a.selectionChange()}},canUndo:!1});b.ui.addButton&&
b.ui.addButton("SelectAll",{label:b.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}})})();(function(){var k={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(a){this.toggleState();this.refresh(a)},refresh:function(a){if(a.document){var c=this.state!=CKEDITOR.TRISTATE_ON||a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!a.focusManager.hasFocus?"removeClass":"attachClass";a.editable()[c]("cke_show_blocks")}}};CKEDITOR.plugins.add("showblocks",{onLoad:function(){var a="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),c,b,e,f,k=CKEDITOR.getUrl(this.path),l=!(CKEDITOR.env.ie&&
9>CKEDITOR.env.version),g=l?":not([contenteditable\x3dfalse]):not(.cke_show_blocks_off)":"",d,h;for(c=b=e=f="";d=a.pop();)h=a.length?",":"",c+=".cke_show_blocks "+d+g+h,e+=".cke_show_blocks.cke_contents_ltr "+d+g+h,f+=".cke_show_blocks.cke_contents_rtl "+d+g+h,b+=".cke_show_blocks "+d+g+"{background-image:url("+CKEDITOR.getUrl(k+"images/block_"+d+".png")+")}";CKEDITOR.addCss((c+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(b,e+"{background-position:top left;padding-left:8px}",
f+"{background-position:top right;padding-right:8px}"));l||CKEDITOR.addCss(".cke_show_blocks [contenteditable\x3dfalse],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable\x3dfalse],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable\x3dfalse],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}")},init:function(a){function c(){b.refresh(a)}
if(!a.blockless){var b=a.addCommand("showblocks",k);b.canUndo=!1;a.config.startupOutlineBlocks&&b.setState(CKEDITOR.TRISTATE_ON);a.ui.addButton&&a.ui.addButton("ShowBlocks",{label:a.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"});a.on("mode",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)});a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(a.on("focus",c),a.on("blur",c));a.on("contentDom",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)})}}})})();(function(){var f={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(a){this.toggleState();this.refresh(a)},refresh:function(a){if(a.document){var b=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";a.editable()[b]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var a;a=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 \x3e tr \x3e td, .%1 table.%2 \x3e tr \x3e th,;.%1 table.%2 \x3e tbody \x3e tr \x3e td, .%1 table.%2 \x3e tbody \x3e tr \x3e th,;.%1 table.%2 \x3e thead \x3e tr \x3e td, .%1 table.%2 \x3e thead \x3e tr \x3e th,;.%1 table.%2 \x3e tfoot \x3e tr \x3e td, .%1 table.%2 \x3e tfoot \x3e tr \x3e th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,
"cke_show_border").replace(/%1/g,"cke_show_borders ");CKEDITOR.addCss(a)},init:function(a){var b=a.addCommand("showborders",f);b.canUndo=!1;!1!==a.config.startupShowBorders&&b.setState(CKEDITOR.TRISTATE_ON);a.on("mode",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)},null,null,100);a.on("contentDom",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a)});a.on("removeFormatCleanup",function(d){d=d.data;a.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&d.is("table")&&(!d.hasAttribute("border")||
0>=parseInt(d.getAttribute("border"),10))&&d.addClass("cke_show_border")})},afterInit:function(a){var b=a.dataProcessor;a=b&&b.dataFilter;b=b&&b.htmlFilter;a&&a.addRules({elements:{table:function(a){a=a.attributes;var b=a["class"],c=parseInt(a.border,10);c&&!(0>=c)||b&&-1!=b.indexOf("cke_show_border")||(a["class"]=(b||"")+" cke_show_border")}}});b&&b.addRules({elements:{table:function(a){a=a.attributes;var b=a["class"];b&&(a["class"]=b.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,
""))}}})}});CKEDITOR.on("dialogDefinition",function(a){var b=a.data.name;if("table"==b||"tableProperties"==b)if(a=a.data.definition,b=a.getContents("info").get("txtBorder"),b.commit=CKEDITOR.tools.override(b.commit,function(a){return function(b,c){a.apply(this,arguments);var e=parseInt(this.getValue(),10);c[!e||0>=e?"addClass":"removeClass"]("cke_show_border")}}),a=(a=a.getContents("advanced"))&&a.get("advCSSClasses"))a.setup=CKEDITOR.tools.override(a.setup,function(a){return function(){a.apply(this,
arguments);this.setValue(this.getValue().replace(/cke_show_border/,""))}}),a.commit=CKEDITOR.tools.override(a.commit,function(a){return function(b,c){a.apply(this,arguments);parseInt(c.getAttribute("border"),10)||c.addClass("cke_show_border")}})})})();(function(){CKEDITOR.plugins.add("sourcearea",{init:function(a){function d(){var a=e&&this.equals(CKEDITOR.document.getActive());this.hide();this.setStyle("height",this.getParent().$.clientHeight+"px");this.setStyle("width",this.getParent().$.clientWidth+"px");this.show();a&&this.focus()}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var f=CKEDITOR.plugins.sourcearea;a.addMode("source",function(e){var b=a.ui.space("contents").getDocument().createElement("textarea");b.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?
"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",a.config.sourceAreaTabSize||4)));b.setAttribute("dir","ltr");b.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu");a.ui.space("contents").append(b);b=a.editable(new c(a,b));b.setData(a.getData(1));CKEDITOR.env.ie&&(b.attachListener(a,"resize",d,b),b.attachListener(CKEDITOR.document.getWindow(),"resize",d,b),CKEDITOR.tools.setTimeout(d,0,b));a.fire("ariaWidget",
this);e()});a.addCommand("source",f.commands.source);a.ui.addButton&&a.ui.addButton("Source",{label:a.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"});a.on("mode",function(){a.getCommand("source").setState("source"==a.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var e=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var c=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(a){this.setValue(a);this.status="ready";this.editor.fire("dataReady")},getData:function(){return this.getValue()},
insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(a){this[(a?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){c.baseProto.detach.call(this);this.clearCustomData();this.remove()}}})})();
CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(c){"wysiwyg"==c.mode&&c.fire("saveSnapshot");c.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);c.setMode("source"==c.mode?"wysiwyg":"source")},canUndo:!1}}};CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(a){var c=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js");a.addCommand("specialchar",{exec:function(){var b=
a.langCode,b=c.availableLangs[b]?b:c.availableLangs[b.replace(/-.*/,"")]?b.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+b+".js"),function(){CKEDITOR.tools.extend(a.lang.specialchar,c.langEntries[b]);a.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1});a.ui.addButton&&a.ui.addButton("SpecialChar",{label:a.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}});CKEDITOR.config.specialChars="! \x26quot; # $ % \x26amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; \x26lt; \x3d \x26gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ \x26euro; \x26lsquo; \x26rsquo; \x26ldquo; \x26rdquo; \x26ndash; \x26mdash; \x26iexcl; \x26cent; \x26pound; \x26curren; \x26yen; \x26brvbar; \x26sect; \x26uml; \x26copy; \x26ordf; \x26laquo; \x26not; \x26reg; \x26macr; \x26deg; \x26sup2; \x26sup3; \x26acute; \x26micro; \x26para; \x26middot; \x26cedil; \x26sup1; \x26ordm; \x26raquo; \x26frac14; \x26frac12; \x26frac34; \x26iquest; \x26Agrave; \x26Aacute; \x26Acirc; \x26Atilde; \x26Auml; \x26Aring; \x26AElig; \x26Ccedil; \x26Egrave; \x26Eacute; \x26Ecirc; \x26Euml; \x26Igrave; \x26Iacute; \x26Icirc; \x26Iuml; \x26ETH; \x26Ntilde; \x26Ograve; \x26Oacute; \x26Ocirc; \x26Otilde; \x26Ouml; \x26times; \x26Oslash; \x26Ugrave; \x26Uacute; \x26Ucirc; \x26Uuml; \x26Yacute; \x26THORN; \x26szlig; \x26agrave; \x26aacute; \x26acirc; \x26atilde; \x26auml; \x26aring; \x26aelig; \x26ccedil; \x26egrave; \x26eacute; \x26ecirc; \x26euml; \x26igrave; \x26iacute; \x26icirc; \x26iuml; \x26eth; \x26ntilde; \x26ograve; \x26oacute; \x26ocirc; \x26otilde; \x26ouml; \x26divide; \x26oslash; \x26ugrave; \x26uacute; \x26ucirc; \x26uuml; \x26yacute; \x26thorn; \x26yuml; \x26OElig; \x26oelig; \x26#372; \x26#374 \x26#373 \x26#375; \x26sbquo; \x26#8219; \x26bdquo; \x26hellip; \x26trade; \x26#9658; \x26bull; \x26rarr; \x26rArr; \x26hArr; \x26diams; \x26asymp;".split(" ");CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",init:function(a){var c=this,d=CKEDITOR.plugins.scayt;this.bindEvents(a);this.parseConfig(a);this.addRule(a);CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js"));this.addMenuItems(a);var b=a.lang.scayt,e=CKEDITOR.env;a.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:b.text_title,title:a.plugins.wsc?a.lang.wsc.title:b.text_title,modes:{wysiwyg:!(e.ie&&(8>e.version||e.quirks))},
toolbar:"spellchecker,20",refresh:function(){var b=a.ui.instances.Scayt.getState();a.scayt&&(b=d.state.scayt[a.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);a.fire("scaytButtonState",b)},onRender:function(){var b=this;a.on("scaytButtonState",function(a){void 0!==typeof a.data&&b.setState(a.data)})},onMenu:function(){var b=a.scayt;a.getMenuItem("scaytToggle").label=a.lang.scayt[b&&d.state.scayt[a.name]?"btn_disable":"btn_enable"];b={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:b?CKEDITOR.TRISTATE_OFF:
CKEDITOR.TRISTATE_DISABLED,scaytLangs:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:a.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};a.config.scayt_uiTabs[0]||delete b.scaytOptions;a.config.scayt_uiTabs[1]||delete b.scaytLangs;a.config.scayt_uiTabs[2]||delete b.scaytDict;return b}});a.contextMenu&&a.addMenuItems&&(a.contextMenu.addListener(function(b,d){var e=
a.scayt,k,l;e&&(l=e.getSelectionNode())&&(k=c.menuGenerator(a,l),e.showBanner("."+a.contextMenu._.definition.panel.className.split(" ").join(" .")));return k}),a.contextMenu._.onHide=CKEDITOR.tools.override(a.contextMenu._.onHide,function(b){return function(){var d=a.scayt;d&&d.hideBanner();return b.apply(this)}}))},addMenuItems:function(a){var c=this,d=CKEDITOR.plugins.scayt;a.addMenuGroup("scaytButton");for(var b=a.config.scayt_contextMenuItemsOrder.split("|"),e=0;e<b.length;e++)b[e]="scayt_"+b[e];
if((b=["grayt_description","grayt_suggest","grayt_control"].concat(b))&&b.length)for(e=0;e<b.length;e++)a.addMenuGroup(b[e],e-10);a.addCommand("scaytToggle",{exec:function(a){var b=a.scayt;d.state.scayt[a.name]=!d.state.scayt[a.name];!0===d.state.scayt[a.name]?b||d.createScayt(a):b&&d.destroy(a)}});a.addCommand("scaytAbout",{exec:function(a){a.scayt.tabToOpen="about";a.lockSelection();a.openDialog(c.dialogName)}});a.addCommand("scaytOptions",{exec:function(a){a.scayt.tabToOpen="options";a.lockSelection();
a.openDialog(c.dialogName)}});a.addCommand("scaytLangs",{exec:function(a){a.scayt.tabToOpen="langs";a.lockSelection();a.openDialog(c.dialogName)}});a.addCommand("scaytDict",{exec:function(a){a.scayt.tabToOpen="dictionaries";a.lockSelection();a.openDialog(c.dialogName)}});b={scaytToggle:{label:a.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:a.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:a.lang.scayt.btn_options,group:"scaytButton",
command:"scaytOptions"},scaytLangs:{label:a.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:a.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}};a.plugins.wsc&&(b.WSC={label:a.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var b=CKEDITOR.plugins.scayt,d=a.scayt,c=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(c=c.replace(/\s/g,""))?(d&&b.state.scayt[a.name]&&d.setMarkupPaused&&d.setMarkupPaused(!0),
a.lockSelection(),a.execCommand("checkspell")):alert("Nothing to check!")}});a.addMenuItems(b)},bindEvents:function(a){var c=CKEDITOR.plugins.scayt,d=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,b=function(){c.destroy(a)},e=function(){!c.state.scayt[a.name]||a.readOnly||a.scayt||c.createScayt(a)},f=function(){var b=a.editable();b.attachListener(b,"focus",function(b){CKEDITOR.plugins.scayt&&!a.scayt&&setTimeout(e,0);b=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[a.name]&&a.scayt;var c,
h;if((d||b)&&a._.savedSelection){b=a._.savedSelection.getSelectedElement();b=!b&&a._.savedSelection.getRanges();for(var f=0;f<b.length;f++)h=b[f],"string"===typeof h.startContainer.$.nodeValue&&(c=h.startContainer.getText().length,(c<h.startOffset||c<h.endOffset)&&a.unlockSelection(!1))}},this,null,-10)},g=function(){d?a.config.scayt_inlineModeImmediateMarkup?e():(a.on("blur",function(){setTimeout(b,0)}),a.on("focus",e),a.focusManager.hasFocus&&e()):e();f();var c=a.editable();c.attachListener(c,"mousedown",
function(b){b=b.data.getTarget();var d=a.widgets&&a.widgets.getByElement(b);d&&(d.wrapper=b.getAscendant(function(a){return a.hasAttribute("data-cke-widget-wrapper")},!0))},this,null,-10)};a.on("contentDom",g);a.on("beforeCommandExec",function(b){var d=a.scayt,e=null,f=!1,g=!0;b.data.name in c.options.disablingCommandExec&&"wysiwyg"==a.mode?d&&(c.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==b.data.name&&"italic"!==b.data.name&&"underline"!==b.data.name&&"strike"!==b.data.name&&
"subscript"!==b.data.name&&"superscript"!==b.data.name&&"enter"!==b.data.name&&"cut"!==b.data.name&&"language"!==b.data.name||!d||("cut"===b.data.name&&(g=!1,f=!0),"language"===b.data.name&&(e=(e=a.plugins.language.getCurrentLangElement(a))&&e.$,f=!0),a.fire("reloadMarkupScayt",{removeOptions:{removeInside:g,forceBookmark:f,selectionNode:e},timeout:0}))});a.on("beforeSetMode",function(b){if("source"==b.data){if(b=a.scayt)c.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED);a.document&&
a.document.getBody().removeAttribute("_jquid")}});a.on("afterCommandExec",function(b){"wysiwyg"!=a.mode||"undo"!=b.data.name&&"redo"!=b.data.name||setTimeout(function(){var b=a.scayt,d=b&&b.getScaytLangList();d&&d.ltr&&d.rtl&&b.fire("startSpellCheck, startGrammarCheck")},250)});a.on("readOnly",function(b){var d;b&&(d=a.scayt,!0===b.editor.readOnly?d&&d.fire("removeMarkupInDocument",{}):d?d.fire("startSpellCheck, startGrammarCheck"):"wysiwyg"==b.editor.mode&&!0===c.state.scayt[b.editor.name]&&(c.createScayt(a),
b.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))});a.on("beforeDestroy",b);a.on("setData",function(){b();(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||a.plugins.divarea)&&g()},this,null,50);a.on("reloadMarkupScayt",function(b){var d=b.data&&b.data.removeOptions;setTimeout(function(){var b=a.scayt,c=b&&b.getScaytLangList();c&&c.ltr&&c.rtl&&(a.document.fire("keydown",new CKEDITOR.dom.event({keyCode:37})),b.removeMarkupInSelectionNode(d),b.fire("startSpellCheck, startGrammarCheck"))},b.data&&
b.data.timeout||0)});a.on("insertElement",function(){a.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})},this,null,50);a.on("insertHtml",function(){a.fire("reloadMarkupScayt")},this,null,50);a.on("insertText",function(){a.fire("reloadMarkupScayt")},this,null,50);a.on("scaytDialogShown",function(b){b.data.selectPage(a.scayt.tabToOpen)})},parseConfig:function(a){var c=CKEDITOR.plugins.scayt;c.replaceOldOptionsNames(a.config);"boolean"!==typeof a.config.scayt_autoStartup&&(a.config.scayt_autoStartup=
!1);c.state.scayt[a.name]=a.config.scayt_autoStartup;"boolean"!==typeof a.config.grayt_autoStartup&&(a.config.grayt_autoStartup=!1);"boolean"!==typeof a.config.scayt_inlineModeImmediateMarkup&&(a.config.scayt_inlineModeImmediateMarkup=!1);c.state.grayt[a.name]=a.config.grayt_autoStartup;a.config.scayt_contextCommands||(a.config.scayt_contextCommands="ignore|ignoreall|add");a.config.scayt_contextMenuItemsOrder||(a.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control");a.config.scayt_sLang||
(a.config.scayt_sLang="en_US");if(void 0===a.config.scayt_maxSuggestions||"number"!=typeof a.config.scayt_maxSuggestions||0>a.config.scayt_maxSuggestions)a.config.scayt_maxSuggestions=5;if(void 0===a.config.scayt_minWordLength||"number"!=typeof a.config.scayt_minWordLength||1>a.config.scayt_minWordLength)a.config.scayt_minWordLength=4;if(void 0===a.config.scayt_customDictionaryIds||"string"!==typeof a.config.scayt_customDictionaryIds)a.config.scayt_customDictionaryIds="";if(void 0===a.config.scayt_userDictionaryName||
"string"!==typeof a.config.scayt_userDictionaryName)a.config.scayt_userDictionaryName=null;if("string"===typeof a.config.scayt_uiTabs&&3===a.config.scayt_uiTabs.split(",").length){var d=[],b=[];a.config.scayt_uiTabs=a.config.scayt_uiTabs.split(",");CKEDITOR.tools.search(a.config.scayt_uiTabs,function(a){1===Number(a)||0===Number(a)?(b.push(!0),d.push(Number(a))):b.push(!1)});null===CKEDITOR.tools.search(b,!1)?a.config.scayt_uiTabs=d:a.config.scayt_uiTabs=[1,1,1]}else a.config.scayt_uiTabs=[1,1,1];
"string"!=typeof a.config.scayt_serviceProtocol&&(a.config.scayt_serviceProtocol=null);"string"!=typeof a.config.scayt_serviceHost&&(a.config.scayt_serviceHost=null);"string"!=typeof a.config.scayt_servicePort&&(a.config.scayt_servicePort=null);"string"!=typeof a.config.scayt_servicePath&&(a.config.scayt_servicePath=null);a.config.scayt_moreSuggestions||(a.config.scayt_moreSuggestions="on");"string"!==typeof a.config.scayt_customerId&&(a.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2");
"string"!==typeof a.config.scayt_srcUrl&&(c=document.location.protocol,c=-1!=c.search(/https?:/)?c:"http:",a.config.scayt_srcUrl=c+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js");"boolean"!==typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0);"boolean"!==typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0);CKEDITOR.config.scayt_handleUndoRedo=CKEDITOR.plugins.undo?CKEDITOR.config.scayt_handleUndoRedo:!1;
"boolean"!==typeof a.config.scayt_multiLanguageMode&&(a.config.scayt_multiLanguageMode=!1);"object"!==typeof a.config.scayt_multiLanguageStyles&&(a.config.scayt_multiLanguageStyles={});a.config.scayt_ignoreAllCapsWords&&"boolean"!==typeof a.config.scayt_ignoreAllCapsWords&&(a.config.scayt_ignoreAllCapsWords=!1);a.config.scayt_ignoreDomainNames&&"boolean"!==typeof a.config.scayt_ignoreDomainNames&&(a.config.scayt_ignoreDomainNames=!1);a.config.scayt_ignoreWordsWithMixedCases&&"boolean"!==typeof a.config.scayt_ignoreWordsWithMixedCases&&
(a.config.scayt_ignoreWordsWithMixedCases=!1);a.config.scayt_ignoreWordsWithNumbers&&"boolean"!==typeof a.config.scayt_ignoreWordsWithNumbers&&(a.config.scayt_ignoreWordsWithNumbers=!1);if(a.config.scayt_disableOptionsStorage){var c=CKEDITOR.tools.isArray(a.config.scayt_disableOptionsStorage)?a.config.scayt_disableOptionsStorage:"string"===typeof a.config.scayt_disableOptionsStorage?[a.config.scayt_disableOptionsStorage]:void 0,e="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),
f=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],g=CKEDITOR.tools.search,h=CKEDITOR.tools.indexOf;a.config.scayt_disableOptionsStorage=function(a){for(var b=[],d=0;d<a.length;d++){var c=a[d],m=!!g(a,"options");if(!g(e,c)||m&&g(f,function(a){if("lang"===a)return!1}))return;g(f,c)&&f.splice(h(f,c),1);if("all"===c||m&&g(a,"lang"))return[];"options"===c&&(f=["lang"])}return b=b.concat(f)}(c)}},addRule:function(a){var c=CKEDITOR.plugins.scayt,
d=a.dataProcessor,b=d&&d.htmlFilter,e=a._.elementsPath&&a._.elementsPath.filters,d=d&&d.dataFilter,f=a.addRemoveFormatFilter,g=function(b){if(a.scayt&&(b.hasAttribute(c.options.data_attribute_name)||b.hasAttribute(c.options.problem_grammar_data_attribute)))return!1},h=function(b){var d=!0;a.scayt&&(b.hasAttribute(c.options.data_attribute_name)||b.hasAttribute(c.options.problem_grammar_data_attribute))&&(d=!1);return d};e&&e.push(g);d&&d.addRules({elements:{span:function(a){var b=a.hasClass(c.options.misspelled_word_class)&&
a.attributes[c.options.data_attribute_name],d=a.hasClass(c.options.problem_grammar_class)&&a.attributes[c.options.problem_grammar_data_attribute];c&&(b||d)&&delete a.name;return a}}});b&&b.addRules({elements:{span:function(a){var b=a.hasClass(c.options.misspelled_word_class)&&a.attributes[c.options.data_attribute_name],d=a.hasClass(c.options.problem_grammar_class)&&a.attributes[c.options.problem_grammar_data_attribute];c&&(b||d)&&delete a.name;return a}}});f&&f.call(a,h)},scaytMenuDefinition:function(a){var c=
this;a=a.scayt;return{scayt:{scayt_ignore:{label:a.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(a){a.scayt.ignoreWord()}},scayt_ignoreall:{label:a.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(a){a.scayt.ignoreAllWords()}},scayt_add:{label:a.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(a){var b=a.scayt;setTimeout(function(){b.addWordToUserDictionary()},10)}},scayt_option:{label:a.getLocal("btn_options"),group:"scayt_control",order:4,
exec:function(a){a.scayt.tabToOpen="options";a.lockSelection();a.openDialog(c.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[0]?!0:!1}},scayt_language:{label:a.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(a){a.scayt.tabToOpen="langs";a.lockSelection();a.openDialog(c.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[1]?!0:!1}},scayt_dictionary:{label:a.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(a){a.scayt.tabToOpen=
"dictionaries";a.lockSelection();a.openDialog(c.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[2]?!0:!1}},scayt_about:{label:a.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(a){a.scayt.tabToOpen="about";a.lockSelection();a.openDialog(c.dialogName)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(a){}},grayt_ignore:{label:a.getLocal("btn_ignore"),group:"grayt_control",
order:2,exec:function(a){a.scayt.ignorePhrase()}}}}},buildSuggestionMenuItems:function(a,c,d){var b={},e={},f=d?"word":"phrase",g=d?"startGrammarCheck":"startSpellCheck",h=a.scayt;if(0<c.length&&"no_any_suggestions"!==c[0])if(d)for(d=0;d<c.length;d++){var k="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[d].replace(" ","_");a.addCommand(k,this.createCommand(CKEDITOR.plugins.scayt.suggestions[d],f,g));d<a.config.scayt_maxSuggestions?(a.addMenuItem(k,{label:c[d],command:k,group:"scayt_suggest",
order:d+1}),b[k]=CKEDITOR.TRISTATE_OFF):(a.addMenuItem(k,{label:c[d],command:k,group:"scayt_moresuggest",order:d+1}),e[k]=CKEDITOR.TRISTATE_OFF,"on"===a.config.scayt_moreSuggestions&&(a.addMenuItem("scayt_moresuggest",{label:h.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return e}}),b.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(d=0;d<c.length;d++)k="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[d].replace(" ","_"),a.addCommand(k,this.createCommand(CKEDITOR.plugins.scayt.suggestions[d],
f,g)),a.addMenuItem(k,{label:c[d],command:k,group:"grayt_suggest",order:d+1}),b[k]=CKEDITOR.TRISTATE_OFF;else b.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,a.addCommand("no_scayt_suggest",{exec:function(){}}),a.addMenuItem("no_scayt_suggest",{label:h.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return b},menuGenerator:function(a,c){var d=a.scayt,b=this.scaytMenuDefinition(a),e={},f=a.config.scayt_contextCommands.split("|"),g=c.getAttribute(d.getLangAttribute())||
d.getLang(),h,k;h=d.isScaytNode(c);k=d.isGraytNode(c);h?(b=b.scayt,e=c.getAttribute(d.getScaytNodeAttributeName()),d.fire("getSuggestionsList",{lang:g,word:e}),e=this.buildSuggestionMenuItems(a,CKEDITOR.plugins.scayt.suggestions,h)):k&&(b=b.grayt,e=c.getAttribute(d.getGraytNodeAttributeName()),k=d.getProblemDescriptionText(e,g),b.grayt_problemdescription&&k&&(b.grayt_problemdescription.label=k),d.fire("getGrammarSuggestionsList",{lang:g,phrase:e}),e=this.buildSuggestionMenuItems(a,CKEDITOR.plugins.scayt.suggestions,
h));if(h&&"off"==a.config.scayt_contextCommands)return e;for(var l in b)h&&-1==CKEDITOR.tools.indexOf(f,l.replace("scayt_",""))&&"all"!=a.config.scayt_contextCommands||(e[l]="undefined"!=typeof b[l].state?b[l].state:CKEDITOR.TRISTATE_OFF,"function"!==typeof b[l].verification||b[l].verification(a)||delete e[l],a.addCommand(l,{exec:b[l].exec}),a.addMenuItem(l,{label:a.lang.scayt[b[l].label]||b[l].label,command:l,group:b[l].group,order:b[l].order}));return e},createCommand:function(a,c,d){return{exec:function(b){b=
b.scayt;var e={};e[c]=a;b.replaceSelectionNode(e);"startGrammarCheck"===d&&b.removeMarkupInSelectionNode({grammarOnly:!0});b.fire(d)}}}});
CKEDITOR.plugins.scayt={state:{scayt:{},grayt:{}},suggestions:[],loadingHelper:{loadOrder:[]},isLoading:!1,options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",
scayt_customerid:"scayt_customerId"},replaceOldOptionsNames:function(a){for(var c in a)c in this.backCompatibilityMap&&(a[this.backCompatibilityMap[c]]=a[c],delete a[c])},createScayt:function(a){var c=this,d=CKEDITOR.plugins.scayt;this.loadScaytLibrary(a,function(a){var e=a.window&&a.window.getFrame()||a.editable();e?(e={lang:a.config.scayt_sLang,container:e.$,customDictionary:a.config.scayt_customDictionaryIds,userDictionaryName:a.config.scayt_userDictionaryName,localization:a.langCode,customer_id:a.config.scayt_customerId,
debug:a.config.scayt_debug,data_attribute_name:c.options.data_attribute_name,misspelled_word_class:c.options.misspelled_word_class,problem_grammar_data_attribute:c.options.problem_grammar_data_attribute,problem_grammar_class:c.options.problem_grammar_class,"options-to-restore":a.config.scayt_disableOptionsStorage,focused:a.editable().hasFocus,ignoreElementsRegex:a.config.scayt_elementsToIgnore,minWordLength:a.config.scayt_minWordLength,multiLanguageMode:a.config.scayt_multiLanguageMode,multiLanguageStyles:a.config.scayt_multiLanguageStyles,
graytAutoStartup:d.state.grayt[a.name]},a.config.scayt_serviceProtocol&&(e.service_protocol=a.config.scayt_serviceProtocol),a.config.scayt_serviceHost&&(e.service_host=a.config.scayt_serviceHost),a.config.scayt_servicePort&&(e.service_port=a.config.scayt_servicePort),a.config.scayt_servicePath&&(e.service_path=a.config.scayt_servicePath),"boolean"===typeof a.config.scayt_ignoreAllCapsWords&&(e["ignore-all-caps-words"]=a.config.scayt_ignoreAllCapsWords),"boolean"===typeof a.config.scayt_ignoreDomainNames&&
(e["ignore-domain-names"]=a.config.scayt_ignoreDomainNames),"boolean"===typeof a.config.scayt_ignoreWordsWithMixedCases&&(e["ignore-words-with-mixed-cases"]=a.config.scayt_ignoreWordsWithMixedCases),"boolean"===typeof a.config.scayt_ignoreWordsWithNumbers&&(e["ignore-words-with-numbers"]=a.config.scayt_ignoreWordsWithNumbers),e=new SCAYT.CKSCAYT(e,function(){},function(){}),e.subscribe("suggestionListSend",function(a){for(var b={},d=[],c=0;c<a.suggestionList.length;c++)b["word_"+a.suggestionList[c]]||
(b["word_"+a.suggestionList[c]]=a.suggestionList[c],d.push(a.suggestionList[c]));CKEDITOR.plugins.scayt.suggestions=d}),e.subscribe("selectionIsChanged",function(d){a.getSelection().isLocked&&a.lockSelection()}),e.subscribe("graytStateChanged",function(c){d.state.grayt[a.name]=c.state}),a.scayt=e,a.fire("scaytButtonState",a.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)):d.state.scayt[a.name]=!1})},destroy:function(a){a.scayt&&a.scayt.destroy();delete a.scayt;a.fire("scaytButtonState",
CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(a,c){var d=this,b,e;this.loadingHelper[a.name]||("undefined"===typeof window.SCAYT||"function"!==typeof window.SCAYT.CKSCAYT?(this.loadingHelper[a.name]=c,this.loadingHelper.loadOrder.push(a.name),b=new Date,b=b.getTime(),e=a.config.scayt_srcUrl,e+=0<=e.indexOf("?")?"":"?"+b,this.loadingHelper.ckscaytLoading||(CKEDITOR.scriptLoader.load(e,function(a){if(a){CKEDITOR.fireOnce("scaytReady");for(var b=0;b<d.loadingHelper.loadOrder.length;b++){a=d.loadingHelper.loadOrder[b];
if("function"===typeof d.loadingHelper[a])d.loadingHelper[a](CKEDITOR.instances[a]);delete d.loadingHelper[a]}d.loadingHelper.loadOrder=[]}}),this.loadingHelper.ckscaytLoading=!0)):window.SCAYT&&"function"===typeof window.SCAYT.CKSCAYT&&(CKEDITOR.fireOnce("scaytReady"),a.scayt||"function"===typeof c&&c(a)))}};
CKEDITOR.on("dialogDefinition",function(a){var c=a.data.name;a=a.data.definition.dialog;if("scaytDialog"===c)a.on("cancel",function(a){return!1},this,null,-1);if("checkspell"===c)a.on("cancel",function(a){a=a.sender&&a.sender.getParentEditor();var b=CKEDITOR.plugins.scayt,c=a.scayt;c&&b.state.scayt[a.name]&&c.setMarkupPaused&&c.setMarkupPaused(!1);a.unlockSelection()},this,null,-2);if("link"===c)a.on("ok",function(a){var b=a.sender&&a.sender.getParentEditor();b&&setTimeout(function(){b.fire("reloadMarkupScayt",
{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})},0)})});
CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty){var a=CKEDITOR.editor.prototype;a.checkDirty=CKEDITOR.tools.override(a.checkDirty,function(a){return function(){var b=null,c=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(b="ready"==this.status)var f=c.removeMarkupFromString(this.getSnapshot()),c=c.removeMarkupFromString(this._.previousValue),b=b&&c!==f}else b=a.call(this);return b}});a.resetDirty=CKEDITOR.tools.override(a.resetDirty,
function(a){return function(){var b=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=b.removeMarkupFromString(this.getSnapshot()):a.call(this)}})}if(!0===CKEDITOR.config.scayt_handleUndoRedo){var a=CKEDITOR.plugins.undo.Image.prototype,c="function"==typeof a.equalsContent?"equalsContent":"equals";a[c]=CKEDITOR.tools.override(a[c],function(a){return function(b){var c=b.editor.scayt,f=this.contents,g=b.contents,h=null;CKEDITOR.plugins.scayt&&
CKEDITOR.plugins.scayt.state.scayt[b.editor.name]&&b.editor.scayt&&(this.contents=c.removeMarkupFromString(f)||"",b.contents=c.removeMarkupFromString(g)||"");h=a.apply(this,arguments);this.contents=f;b.contents=g;return h}})}});(function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(c){var l=c.config,g=c.lang.stylescombo,f={},k=[],m=[];c.on("stylesSet",function(b){if(b=b.data.styles){for(var a,h,d,e=0,n=b.length;e<n;e++)(a=b[e],c.blockless&&a.element in CKEDITOR.dtd.$block||(h=a.name,a=new CKEDITOR.style(a),c.filter.customConfig&&!c.filter.check(a)))||(a._name=h,a._.enterMode=l.enterMode,a._.type=d=a.assignedTo||a.type,a._.weight=e+1E3*(d==CKEDITOR.STYLE_OBJECT?1:d==CKEDITOR.STYLE_BLOCK?2:3),f[h]=
a,k.push(a),m.push(a));k.sort(function(a,b){return a._.weight-b._.weight})}});c.ui.addRichCombo("Styles",{label:g.label,title:g.panelTitle,toolbar:"styles,10",allowedContent:m,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(l.contentsCss),multiSelect:!0,attributes:{"aria-label":g.panelTitle}},init:function(){var b,a,c,d,e,f;e=0;for(f=k.length;e<f;e++)b=k[e],a=b._name,d=b._.type,d!=c&&(this.startGroup(g["panelTitle"+String(d)]),c=d),this.add(a,b.type==CKEDITOR.STYLE_OBJECT?a:b.buildPreview(),a);
this.commit()},onClick:function(b){c.focus();c.fire("saveSnapshot");b=f[b];var a=c.elementPath();c[b.checkActive(a,c)?"removeStyle":"applyStyle"](b);c.fire("saveSnapshot")},onRender:function(){c.on("selectionChange",function(b){var a=this.getValue();b=b.data.path.elements;for(var h=0,d=b.length,e;h<d;h++){e=b[h];for(var g in f)if(f[g].checkElementRemovable(e,!0,c)){g!=a&&this.setValue(g);return}}this.setValue("")},this)},onOpen:function(){var b=c.getSelection().getSelectedElement(),b=c.elementPath(b),
a=[0,0,0,0];this.showAll();this.unmarkAll();for(var h in f){var d=f[h],e=d._.type;d.checkApplicable(b,c,c.activeFilter)?a[e]++:this.hideItem(h);d.checkActive(b,c)&&this.mark(h)}a[CKEDITOR.STYLE_BLOCK]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]);a[CKEDITOR.STYLE_INLINE]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_INLINE)]);a[CKEDITOR.STYLE_OBJECT]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var b=c.elementPath();if(b){for(var a in f)if(f[a].checkApplicable(b,
c,c.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){f={};k=[]}})}})})();(function(){function k(c){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(d){if(d.editable().hasFocus){var e=d.getSelection(),b;if(b=(new CKEDITOR.dom.elementPath(e.getCommonAncestor(),e.root)).contains({td:1,th:1},1)){var e=d.createRange(),a=CKEDITOR.tools.tryThese(function(){var a=b.getParent().$.cells[b.$.cellIndex+(c?-1:1)];a.parentNode.parentNode;return a},function(){var a=b.getParent(),a=a.getAscendant("table").$.rows[a.$.rowIndex+(c?-1:1)];return a.cells[c?a.cells.length-1:
0]});if(a||c)if(a)a=new CKEDITOR.dom.element(a),e.moveToElementEditStart(a),e.checkStartOfBlock()&&e.checkEndOfBlock()||e.selectNodeContents(a);else return!0;else{for(var f=b.getAscendant("table").$,a=b.getParent().$.cells,f=new CKEDITOR.dom.element(f.insertRow(-1),d.document),g=0,h=a.length;g<h;g++)f.append((new CKEDITOR.dom.element(a[g],d.document)).clone(!1,!1)).appendBogus();e.moveToElementEditStart(f)}e.select(!0);return!0}}return!1}}}var h={editorFocus:!1,modes:{wysiwyg:1,source:1}},g={exec:function(c){c.container.focusNext(!0,
c.tabIndex)}},f={exec:function(c){c.container.focusPrevious(!0,c.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(c){for(var d=!1!==c.config.enableTabKeyTools,e=c.config.tabSpaces||0,b="";e--;)b+=" ";if(b)c.on("key",function(a){9==a.data.keyCode&&(c.insertText(b),a.cancel())});if(d)c.on("key",function(a){(9==a.data.keyCode&&c.execCommand("selectNextCell")||a.data.keyCode==CKEDITOR.SHIFT+9&&c.execCommand("selectPreviousCell"))&&a.cancel()});c.addCommand("blur",CKEDITOR.tools.extend(g,h));c.addCommand("blurBack",
CKEDITOR.tools.extend(f,h));c.addCommand("selectNextCell",k());c.addCommand("selectPreviousCell",k(!0))}})})();
CKEDITOR.dom.element.prototype.focusNext=function(k,h){var g=void 0===h?this.getTabIndex():h,f,c,d,e,b,a;if(0>=g)for(b=this.getNextSourceNode(k,CKEDITOR.NODE_ELEMENT);b;){if(b.isVisible()&&0===b.getTabIndex()){d=b;break}b=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(b=this.getDocument().getBody().getFirst();b=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f)if(!c&&b.equals(this)){if(c=!0,k){if(!(b=b.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;f=1}}else c&&!this.contains(b)&&
(f=1);if(b.isVisible()&&!(0>(a=b.getTabIndex()))){if(f&&a==g){d=b;break}a>g&&(!d||!e||a<e)?(d=b,e=a):d||0!==a||(d=b,e=a)}}d&&d.focus()};
CKEDITOR.dom.element.prototype.focusPrevious=function(k,h){for(var g=void 0===h?this.getTabIndex():h,f,c,d,e=0,b,a=this.getDocument().getBody().getLast();a=a.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f)if(!c&&a.equals(this)){if(c=!0,k){if(!(a=a.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;f=1}}else c&&!this.contains(a)&&(f=1);if(a.isVisible()&&!(0>(b=a.getTabIndex())))if(0>=g){if(f&&0===b){d=a;break}b>e&&(d=a,e=b)}else{if(f&&b==g){d=a;break}b<g&&(!d||b>e)&&(d=a,e=b)}}d&&d.focus()};CKEDITOR.plugins.add("table",{requires:"dialog",init:function(a){function e(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,f){this.setState(f.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!a.blockless){var c=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(a.plugins.dialogadvtab?
"table"+a.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]}));a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",e()));a.addCommand("tableDelete",e({exec:function(a){var b=a.elementPath().contains("table",1);if(b){var d=b.getParent(),c=a.editable();1!=d.getChildCount()||d.is("td","th")||d.equals(c)||(b=d);a=a.createRange();a.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START);
b.remove();a.select()}}}));a.ui.addButton&&a.ui.addButton("Table",{label:c.toolbar,command:"table",toolbar:"insert,30"});CKEDITOR.dialog.add("table",this.path+"dialogs/table.js");CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js");a.addMenuItems&&a.addMenuItems({table:{label:c.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:c.deleteTable,command:"tableDelete",group:"table",order:1}});a.on("doubleclick",function(a){a.data.element.is("table")&&(a.data.dialog=
"tableProperties")});a.contextMenu&&a.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}});(function(){function t(e){function d(a){0<b.length||a.type!=CKEDITOR.NODE_ELEMENT||!C.test(a.getName())||a.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(c,a,"selected_cell",!0),b.push(a))}e=e.getRanges();for(var b=[],c={},a=0;a<e.length;a++){var f=e[a];if(f.collapsed)f=f.getCommonAncestor(),(f=f.getAscendant("td",!0)||f.getAscendant("th",!0))&&b.push(f);else{var f=new CKEDITOR.dom.walker(f),g;for(f.guard=d;g=f.next();)g.type==CKEDITOR.NODE_ELEMENT&&g.is(CKEDITOR.dtd.table)||(g=g.getAscendant("td",
!0)||g.getAscendant("th",!0))&&!g.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(c,g,"selected_cell",!0),b.push(g))}}CKEDITOR.dom.element.clearAllMarkers(c);return b}function p(e,d){for(var b=t(e),c=b[0],a=c.getAscendant("table"),c=c.getDocument(),f=b[0].getParent(),g=f.$.rowIndex,b=b[b.length-1],h=b.getParent().$.rowIndex+b.$.rowSpan-1,b=new CKEDITOR.dom.element(a.$.rows[h]),g=d?g:h,f=d?f:b,b=CKEDITOR.tools.buildTableMap(a),a=b[g],g=d?b[g-1]:b[g+1],b=b[0].length,c=c.createElement("tr"),
h=0;a[h]&&h<b;h++){var k;1<a[h].rowSpan&&g&&a[h]==g[h]?(k=a[h],k.rowSpan+=1):(k=(new CKEDITOR.dom.element(a[h])).clone(),k.removeAttribute("rowSpan"),k.appendBogus(),c.append(k),k=k.$);h+=k.colSpan-1}d?c.insertBefore(f):c.insertAfter(f)}function u(e){if(e instanceof CKEDITOR.dom.selection){var d=t(e),b=d[0].getAscendant("table"),c=CKEDITOR.tools.buildTableMap(b);e=d[0].getParent().$.rowIndex;for(var d=d[d.length-1],a=d.getParent().$.rowIndex+d.$.rowSpan-1,d=[],f=e;f<=a;f++){for(var g=c[f],h=new CKEDITOR.dom.element(b.$.rows[f]),
k=0;k<g.length;k++){var l=new CKEDITOR.dom.element(g[k]),n=l.getParent().$.rowIndex;1==l.$.rowSpan?l.remove():(--l.$.rowSpan,n==f&&(n=c[f+1],n[k-1]?l.insertAfter(new CKEDITOR.dom.element(n[k-1])):(new CKEDITOR.dom.element(b.$.rows[f+1])).append(l,1)));k+=l.$.colSpan-1}d.push(h)}c=b.$.rows;b=new CKEDITOR.dom.element(c[a+1]||(0<e?c[e-1]:null)||b.$.parentNode);for(f=d.length;0<=f;f--)u(d[f]);return b}e instanceof CKEDITOR.dom.element&&(b=e.getAscendant("table"),1==b.$.rows.length?b.remove():e.remove());
return null}function v(e,d){for(var b=d?Infinity:0,c=0;c<e.length;c++){var a;a=e[c];for(var f=d,g=a.getParent().$.cells,h=0,k=0;k<g.length;k++){var l=g[k],h=h+(f?1:l.colSpan);if(l==a.$)break}a=h-1;if(d?a<b:a>b)b=a}return b}function m(e,d){for(var b=t(e),c=b[0].getAscendant("table"),a=v(b,1),b=v(b),a=d?a:b,f=CKEDITOR.tools.buildTableMap(c),c=[],b=[],g=f.length,h=0;h<g;h++)c.push(f[h][a]),b.push(d?f[h][a-1]:f[h][a+1]);for(h=0;h<g;h++)c[h]&&(1<c[h].colSpan&&b[h]==c[h]?(a=c[h],a.colSpan+=1):(a=(new CKEDITOR.dom.element(c[h])).clone(),
a.removeAttribute("colSpan"),a.appendBogus(),a[d?"insertBefore":"insertAfter"].call(a,new CKEDITOR.dom.element(c[h])),a=a.$),h+=a.rowSpan-1)}function y(e,d){var b=e.getStartElement();if(b=b.getAscendant("td",1)||b.getAscendant("th",1)){var c=b.clone();c.appendBogus();d?c.insertBefore(b):c.insertAfter(b)}}function x(e){if(e instanceof CKEDITOR.dom.selection){e=t(e);var d=e[0]&&e[0].getAscendant("table"),b;a:{var c=0;b=e.length-1;for(var a={},f,g;f=e[c++];)CKEDITOR.dom.element.setMarker(a,f,"delete_cell",
!0);for(c=0;f=e[c++];)if((g=f.getPrevious())&&!g.getCustomData("delete_cell")||(g=f.getNext())&&!g.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(a);b=g;break a}CKEDITOR.dom.element.clearAllMarkers(a);g=e[0].getParent();(g=g.getPrevious())?b=g.getLast():(g=e[b].getParent(),b=(g=g.getNext())?g.getChild(0):null)}for(g=e.length-1;0<=g;g--)x(e[g]);b?q(b,!0):d&&d.remove()}else e instanceof CKEDITOR.dom.element&&(d=e.getParent(),1==d.getChildCount()?d.remove():e.remove())}function q(e,
d){var b=e.getDocument(),c=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(c.focus(),b.focus());b=new CKEDITOR.dom.range(b);b["moveToElementEdit"+(d?"End":"Start")](e)||(b.selectNodeContents(e),b.collapse(d?!1:!0));b.select(!0)}function z(e,d,b){e=e[d];if("undefined"==typeof b)return e;for(d=0;e&&d<e.length;d++){if(b.is&&e[d]==b.$)return d;if(d==b)return new CKEDITOR.dom.element(e[d])}return b.is?-1:null}function w(e,d,b){var c=t(e),a;if((d?1!=c.length:2>c.length)||(a=e.getCommonAncestor())&&
a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))return!1;var f;e=c[0];a=e.getAscendant("table");var g=CKEDITOR.tools.buildTableMap(a),h=g.length,k=g[0].length,l=e.getParent().$.rowIndex,n=z(g,l,e);if(d){var r;try{var q=parseInt(e.getAttribute("rowspan"),10)||1;f=parseInt(e.getAttribute("colspan"),10)||1;r=g["up"==d?l-q:"down"==d?l+q:l]["left"==d?n-f:"right"==d?n+f:n]}catch(D){return!1}if(!r||e.$==r)return!1;c["up"==d||"left"==d?"unshift":"push"](new CKEDITOR.dom.element(r))}d=e.getDocument();var p=l,
q=r=0,u=!b&&new CKEDITOR.dom.documentFragment(d),w=0;for(d=0;d<c.length;d++){f=c[d];var m=f.getParent(),x=f.getFirst(),v=f.$.colSpan,y=f.$.rowSpan,m=m.$.rowIndex,A=z(g,m,f),w=w+v*y,q=Math.max(q,A-n+v);r=Math.max(r,m-l+y);b||(v=f,(y=v.getBogus())&&y.remove(),v.trim(),f.getChildren().count()&&(m==p||!x||x.isBlockBoundary&&x.isBlockBoundary({br:1})||(p=u.getLast(CKEDITOR.dom.walker.whitespaces(!0)),!p||p.is&&p.is("br")||u.append("br")),f.moveChildren(u)),d?f.remove():f.setHtml(""));p=m}if(b)return r*
q==w;u.moveChildren(e);e.appendBogus();q>=k?e.removeAttribute("rowSpan"):e.$.rowSpan=r;r>=h?e.removeAttribute("colSpan"):e.$.colSpan=q;b=new CKEDITOR.dom.nodeList(a.$.rows);c=b.count();for(d=c-1;0<=d;d--)a=b.getItem(d),a.$.cells.length||(a.remove(),c++);return e}function A(e,d){var b=t(e);if(1<b.length)return!1;if(d)return!0;var b=b[0],c=b.getParent(),a=c.getAscendant("table"),f=CKEDITOR.tools.buildTableMap(a),g=c.$.rowIndex,h=z(f,g,b),k=b.$.rowSpan,l;if(1<k){l=Math.ceil(k/2);for(var k=Math.floor(k/
2),c=g+l,a=new CKEDITOR.dom.element(a.$.rows[c]),f=z(f,c),n,c=b.clone(),g=0;g<f.length;g++)if(n=f[g],n.parentNode==a.$&&g>h){c.insertBefore(new CKEDITOR.dom.element(n));break}else n=null;n||a.append(c)}else for(k=l=1,a=c.clone(),a.insertAfter(c),a.append(c=b.clone()),n=z(f,g),h=0;h<n.length;h++)n[h].rowSpan++;c.appendBogus();b.$.rowSpan=l;c.$.rowSpan=k;1==l&&b.removeAttribute("rowSpan");1==k&&c.removeAttribute("rowSpan");return c}function B(e,d){var b=t(e);if(1<b.length)return!1;if(d)return!0;var b=
b[0],c=b.getParent(),a=c.getAscendant("table"),a=CKEDITOR.tools.buildTableMap(a),f=z(a,c.$.rowIndex,b),g=b.$.colSpan;if(1<g)c=Math.ceil(g/2),g=Math.floor(g/2);else{for(var g=c=1,h=[],k=0;k<a.length;k++){var l=a[k];h.push(l[f]);1<l[f].rowSpan&&(k+=l[f].rowSpan-1)}for(a=0;a<h.length;a++)h[a].colSpan++}a=b.clone();a.insertAfter(b);a.appendBogus();b.$.colSpan=c;a.$.colSpan=g;1==c&&b.removeAttribute("colSpan");1==g&&a.removeAttribute("colSpan");return a}var C=/^(?:td|th)$/;CKEDITOR.plugins.tabletools=
{requires:"table,dialog,contextmenu",init:function(e){function d(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function b(a,b){var c=e.addCommand(a,b);e.addFeature(c)}var c=e.lang.table;b("cellProperties",new CKEDITOR.dialogCommand("cellProperties",d({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",
requiredContent:"table"})));CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js");b("rowDelete",d({requiredContent:"table",exec:function(a){a=a.getSelection();q(u(a))}}));b("rowInsertBefore",d({requiredContent:"table",exec:function(a){a=a.getSelection();p(a,!0)}}));b("rowInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection();p(a)}}));b("columnDelete",d({requiredContent:"table",exec:function(a){a=a.getSelection();a=t(a);var b=a[0],c=a[a.length-1];a=b.getAscendant("table");
for(var d=CKEDITOR.tools.buildTableMap(a),e,l,n=[],r=0,p=d.length;r<p;r++)for(var m=0,u=d[r].length;m<u;m++)d[r][m]==b.$&&(e=m),d[r][m]==c.$&&(l=m);for(r=e;r<=l;r++)for(m=0;m<d.length;m++)c=d[m],b=new CKEDITOR.dom.element(a.$.rows[m]),c=new CKEDITOR.dom.element(c[r]),c.$&&(1==c.$.colSpan?c.remove():--c.$.colSpan,m+=c.$.rowSpan-1,b.$.cells.length||n.push(b));l=a.$.rows[0]&&a.$.rows[0].cells;e=new CKEDITOR.dom.element(l[e]||(e?l[e-1]:a.$.parentNode));n.length==p&&a.remove();e&&q(e,!0)}}));b("columnInsertBefore",
d({requiredContent:"table",exec:function(a){a=a.getSelection();m(a,!0)}}));b("columnInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection();m(a)}}));b("cellDelete",d({requiredContent:"table",exec:function(a){a=a.getSelection();x(a)}}));b("cellMerge",d({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(a){q(w(a.getSelection()),!0)}}));b("cellMergeRight",d({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){q(w(a.getSelection(),
"right"),!0)}}));b("cellMergeDown",d({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){q(w(a.getSelection(),"down"),!0)}}));b("cellVerticalSplit",d({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){q(B(a.getSelection()))}}));b("cellHorizontalSplit",d({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){q(A(a.getSelection()))}}));b("cellInsertBefore",d({requiredContent:"table",exec:function(a){a=a.getSelection();y(a,!0)}}));
b("cellInsertAfter",d({requiredContent:"table",exec:function(a){a=a.getSelection();y(a)}}));e.addMenuItems&&e.addMenuItems({tablecell:{label:c.cell.menu,group:"tablecell",order:1,getItems:function(){var a=e.getSelection(),b=t(a);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:w(a,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:w(a,"right",!0)?CKEDITOR.TRISTATE_OFF:
CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:w(a,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:B(a,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:A(a,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<b.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:c.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:c.cell.insertAfter,
group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:c.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:c.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:c.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:c.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:c.cell.splitHorizontal,group:"tablecell",
command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:c.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:c.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:c.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:c.row.insertBefore,
group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:c.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:c.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:c.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:c.column.insertBefore,
group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:c.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:c.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}});e.contextMenu&&e.contextMenu.addListener(function(a,b,c){return(a=c.contains({td:1,th:1},1))&&!a.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:t};
CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)})();CKEDITOR.tools.buildTableMap=function(t){t=t.$.rows;for(var p=-1,u=[],v=0;v<t.length;v++){p++;!u[p]&&(u[p]=[]);for(var m=-1,y=0;y<t[v].cells.length;y++){var x=t[v].cells[y];for(m++;u[p][m];)m++;for(var q=isNaN(x.colSpan)?1:x.colSpan,x=isNaN(x.rowSpan)?1:x.rowSpan,z=0;z<x;z++){u[p+z]||(u[p+z]=[]);for(var w=0;w<q;w++)u[p+z][m+w]=t[v].cells[y]}m+=q-1}}return u};(function(){var g=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],n={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(a){function b(a){d.enabled&&!1!==a.data.command.canUndo&&d.save()}function c(){d.enabled=a.readOnly?!1:"wysiwyg"==a.mode;d.onChange()}var d=a.undoManager=new e(a),l=d.editingHandler=new k(d),f=a.addCommand("undo",{exec:function(){d.undo()&&(a.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),h=a.addCommand("redo",{exec:function(){d.redo()&&
(a.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});a.setKeystroke([[g[0],"undo"],[g[1],"redo"],[g[2],"redo"]]);d.onChange=function(){f.setState(d.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);h.setState(d.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};a.on("beforeCommandExec",b);a.on("afterCommandExec",b);a.on("saveSnapshot",function(a){d.save(a.data&&a.data.contentOnly)});a.on("contentDom",l.attachListeners,l);a.on("instanceReady",function(){a.fire("saveSnapshot")});
a.on("beforeModeUnload",function(){"wysiwyg"==a.mode&&d.save(!0)});a.on("mode",c);a.on("readOnly",c);a.ui.addButton&&(a.ui.addButton("Undo",{label:a.lang.undo.undo,command:"undo",toolbar:"undo,10"}),a.ui.addButton("Redo",{label:a.lang.undo.redo,command:"redo",toolbar:"undo,20"}));a.resetUndo=function(){d.reset();a.fire("saveSnapshot")};a.on("updateSnapshot",function(){d.currentImage&&d.update()});a.on("lockSnapshot",function(a){a=a.data;d.lock(a&&a.dontUpdate,a&&a.forceUpdate)});a.on("unlockSnapshot",
d.unlock,d)}});CKEDITOR.plugins.undo={};var e=CKEDITOR.plugins.undo.UndoManager=function(a){this.strokesRecorded=[0,0];this.locked=null;this.previousKeyGroup=-1;this.limit=a.config.undoStackSize||20;this.strokesLimit=25;this.editor=a;this.reset()};e.prototype={type:function(a,b){var c=e.getKeyGroup(a),d=this.strokesRecorded[c]+1;b=b||d>=this.strokesLimit;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange());b?(d=0,this.editor.fire("saveSnapshot")):this.editor.fire("change");this.strokesRecorded[c]=
d;this.previousKeyGroup=c},keyGroupChanged:function(a){return e.getKeyGroup(a)!=this.previousKeyGroup},reset:function(){this.snapshots=[];this.index=-1;this.currentImage=null;this.hasRedo=this.hasUndo=!1;this.locked=null;this.resetType()},resetType:function(){this.strokesRecorded=[0,0];this.typing=!1;this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0);this.hasRedo=!!this.getNextImage(!1);this.resetType();this.onChange()},save:function(a,b,c){var d=this.editor;if(this.locked||
"ready"!=d.status||"wysiwyg"!=d.mode)return!1;var e=d.editable();if(!e||"ready"!=e.status)return!1;e=this.snapshots;b||(b=new f(d));if(!1===b.contents)return!1;if(this.currentImage)if(b.equalsContent(this.currentImage)){if(a||b.equalsSelection(this.currentImage))return!1}else!1!==c&&d.fire("change");e.splice(this.index+1,e.length-this.index-1);e.length==this.limit&&e.shift();this.index=e.push(b)-1;this.currentImage=b;!1!==c&&this.refreshState();return!0},restoreImage:function(a){var b=this.editor,
c;a.bookmarks&&(b.focus(),c=b.getSelection());this.locked={level:999};this.editor.loadSnapshot(a.contents);a.bookmarks?c.selectBookmarks(a.bookmarks):CKEDITOR.env.ie&&(c=this.editor.document.getBody().$.createTextRange(),c.collapse(!0),c.select());this.locked=null;this.index=a.index;this.currentImage=this.snapshots[this.index];this.update();this.refreshState();b.fire("change")},getNextImage:function(a){var b=this.snapshots,c=this.currentImage,d;if(c)if(a)for(d=this.index-1;0<=d;d--){if(a=b[d],!c.equalsContent(a))return a.index=
d,a}else for(d=this.index+1;d<b.length;d++)if(a=b[d],!c.equalsContent(a))return a.index=d,a;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var a=this.getNextImage(!0);if(a)return this.restoreImage(a),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var a=this.getNextImage(!1);if(a)return this.restoreImage(a),!0}return!1},update:function(a){if(!this.locked){a||
(a=new f(this.editor));for(var b=this.index,c=this.snapshots;0<b&&this.currentImage.equalsContent(c[b-1]);)--b;c.splice(b,this.index-b+1,a);this.index=b;this.currentImage=a}},updateSelection:function(a){if(!this.snapshots.length)return!1;var b=this.snapshots,c=b[b.length-1];return c.equalsContent(a)&&!c.equalsSelection(a)?(this.currentImage=b[b.length-1]=a,!0):!1},lock:function(a,b){if(this.locked)this.locked.level++;else if(a)this.locked={level:1};else{var c=null;if(b)c=!0;else{var d=new f(this.editor,
!0);this.currentImage&&this.currentImage.equalsContent(d)&&(c=d)}this.locked={update:c,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var a=this.locked.update;this.locked=null;if(!0===a)this.update();else if(a){var b=new f(this.editor,!0);a.equalsContent(b)||this.update()}}}};e.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1};e.keyGroups={PRINTABLE:0,FUNCTIONAL:1};e.isNavigationKey=function(a){return!!e.navigationKeyCodes[a]};e.getKeyGroup=function(a){var b=e.keyGroups;
return n[a]?b.FUNCTIONAL:b.PRINTABLE};e.getOppositeKeyGroup=function(a){var b=e.keyGroups;return a==b.FUNCTIONAL?b.PRINTABLE:b.FUNCTIONAL};e.ieFunctionalKeysBug=function(a){return CKEDITOR.env.ie&&e.getKeyGroup(a)==e.keyGroups.FUNCTIONAL};var f=CKEDITOR.plugins.undo.Image=function(a,b){this.editor=a;a.fire("beforeUndoImage");var c=a.getSnapshot();CKEDITOR.env.ie&&c&&(c=c.replace(/\s+data-cke-expando=".*?"/g,""));this.contents=c;b||(this.bookmarks=(c=c&&a.getSelection())&&c.createBookmarks2(!0));a.fire("afterUndoImage")},
h=/\b(?:href|src|name)="[^"]*?"/gi;f.prototype={equalsContent:function(a){var b=this.contents;a=a.contents;CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(b=b.replace(h,""),a=a.replace(h,""));return b!=a?!1:!0},equalsSelection:function(a){var b=this.bookmarks;a=a.bookmarks;if(b||a){if(!b||!a||b.length!=a.length)return!1;for(var c=0;c<b.length;c++){var d=b[c],e=a[c];if(d.startOffset!=e.startOffset||d.endOffset!=e.endOffset||!CKEDITOR.tools.arrayCompare(d.start,e.start)||!CKEDITOR.tools.arrayCompare(d.end,
e.end))return!1}}return!0}};var k=CKEDITOR.plugins.undo.NativeEditingHandler=function(a){this.undoManager=a;this.ignoreInputEvent=!1;this.keyEventsStack=new m;this.lastKeydownImage=null};k.prototype={onKeydown:function(a){var b=a.data.getKey();if(229!==b)if(-1<CKEDITOR.tools.indexOf(g,a.data.getKeystroke()))a.data.preventDefault();else if(this.keyEventsStack.cleanUp(a),a=this.undoManager,this.keyEventsStack.getLast(b)||this.keyEventsStack.push(b),this.lastKeydownImage=new f(a.editor),e.isNavigationKey(b)||
this.undoManager.keyGroupChanged(b))if(a.strokesRecorded[0]||a.strokesRecorded[1])a.save(!1,this.lastKeydownImage,!1),a.resetType()},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var a=this.keyEventsStack.getLast();a||(a=this.keyEventsStack.push(0));this.keyEventsStack.increment(a.keyCode);this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(a.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(a){var b=this.undoManager;
a=a.data.getKey();var c=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(a);if(!(e.ieFunctionalKeysBug(a)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new f(b.editor,!0))))if(0<c)b.type(a);else if(e.isNavigationKey(a))this.onNavigationKey(!0)},onNavigationKey:function(a){var b=this.undoManager;!a&&b.save(!0,null,!1)||b.updateSelection(new f(b.editor));b.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var a=this.undoManager.editor,
b=a.editable(),c=this;b.attachListener(b,"keydown",function(a){c.onKeydown(a);if(e.ieFunctionalKeysBug(a.data.getKey()))c.onInput()},null,null,999);b.attachListener(b,CKEDITOR.env.ie?"keypress":"input",c.onInput,c,null,999);b.attachListener(b,"keyup",c.onKeyup,c,null,999);b.attachListener(b,"paste",c.ignoreInputEventListener,c,null,999);b.attachListener(b,"drop",c.ignoreInputEventListener,c,null,999);b.attachListener(b.isInline()?b:a.document.getDocumentElement(),"click",function(){c.onNavigationKey()},
null,null,999);b.attachListener(this.undoManager.editor,"blur",function(){c.keyEventsStack.remove(9)},null,null,999)}};var m=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};m.prototype={push:function(a){a=this.stack.push({keyCode:a,inputs:0});return this.stack[a-1]},getLastIndex:function(a){if("number"!=typeof a)return this.stack.length-1;for(var b=this.stack.length;b--;)if(this.stack[b].keyCode==a)return b;return-1},getLast:function(a){a=this.getLastIndex(a);return-1!=a?this.stack[a]:
null},increment:function(a){this.getLast(a).inputs++},remove:function(a){a=this.getLastIndex(a);-1!=a&&this.stack.splice(a,1)},resetInputs:function(a){if("number"==typeof a)this.getLast(a).inputs=0;else for(a=this.stack.length;a--;)this.stack[a].inputs=0},getTotalInputs:function(){for(var a=this.stack.length,b=0;a--;)b+=this.stack[a].inputs;return b},cleanUp:function(a){a=a.data.$;a.ctrlKey||a.metaKey||this.remove(17);a.shiftKey||this.remove(16);a.altKey||this.remove(18)}}})();CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(a){a.config.wsc_onFinish="function"===typeof a.config.wsc_onFinish?a.config.wsc_onFinish:function(){};a.config.wsc_onClose="function"===typeof a.config.wsc_onClose?a.config.wsc_onClose:function(){}},parseConfig:function(a){a.config.wsc_customerId=a.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk";a.config.wsc_customDictionaryIds=a.config.wsc_customDictionaryIds||
CKEDITOR.config.wsc_customDictionaryIds||"";a.config.wsc_userDictionaryName=a.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"";a.config.wsc_customLoaderScript=a.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript;CKEDITOR.config.wsc_cmd=a.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell";CKEDITOR.config.wsc_version="v4.3.0-master-d769233";CKEDITOR.config.wsc_removeGlobalVariable=!0},init:function(a){var b=CKEDITOR.env;this.parseConfig(a);this.parseApi(a);
a.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname&&!(b.ie&&(8>b.version||b.quirks))};"undefined"==typeof a.plugins.scayt&&a.ui.addButton&&a.ui.addButton("SpellChecker",{label:a.lang.wsc.toolbar,click:function(a){var b=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(b=b.replace(/\s/g,""))?a.execCommand("checkspell"):alert("Nothing to check!")},
toolbar:"spellchecker,10"});CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}});(function(){function m(a,d){CKEDITOR.tools.extend(this,{editor:a,editable:a.editable(),doc:a.document,win:a.window},d,!0);this.inline=this.editable.isInline();this.inline||(this.frame=this.win.getFrame());this.target=this[this.inline?"editable":"doc"]}function n(a,d){CKEDITOR.tools.extend(this,d,{editor:a},!0)}function p(a,d){var b=a.editable();CKEDITOR.tools.extend(this,{editor:a,editable:b,inline:b.isInline(),doc:a.document,win:a.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},
d,!0);this.hidden={};this.visible={};this.inline||(this.frame=this.win.getFrame());this.queryViewport();var c=CKEDITOR.tools.bind(this.queryViewport,this),e=CKEDITOR.tools.bind(this.hideVisible,this),g=CKEDITOR.tools.bind(this.removeAll,this);b.attachListener(this.winTop,"resize",c);b.attachListener(this.winTop,"scroll",c);b.attachListener(this.winTop,"resize",e);b.attachListener(this.win,"scroll",e);b.attachListener(this.inline?b:this.frame,"mouseout",function(a){var b=a.data.$.clientX;a=a.data.$.clientY;
this.queryViewport();(b<=this.rect.left||b>=this.rect.right||a<=this.rect.top||a>=this.rect.bottom)&&this.hideVisible();(0>=b||b>=this.winTopPane.width||0>=a||a>=this.winTopPane.height)&&this.hideVisible()},this);b.attachListener(a,"resize",c);b.attachListener(a,"mode",g);a.on("destroy",g);this.lineTpl=(new CKEDITOR.template('\x3cdiv data-cke-lineutils-line\x3d"1" class\x3d"cke_reset_all" style\x3d"{lineStyle}"\x3e\x3cspan style\x3d"{tipLeftStyle}"\x3e\x26nbsp;\x3c/span\x3e\x3cspan style\x3d"{tipRightStyle}"\x3e\x26nbsp;\x3c/span\x3e\x3c/div\x3e')).output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},
t,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},q,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},q,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function l(a){var d;if(d=a&&a.type==CKEDITOR.NODE_ELEMENT)d=!(r[a.getComputedStyle("float")]||r[a.getAttribute("align")]);return d&&
!u[a.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils");CKEDITOR.LINEUTILS_BEFORE=1;CKEDITOR.LINEUTILS_AFTER=2;CKEDITOR.LINEUTILS_INSIDE=4;m.prototype={start:function(a){var d=this,b=this.editor,c=this.doc,e,g,f,h,k=CKEDITOR.tools.eventsBuffer(50,function(){b.readOnly||"wysiwyg"!=b.mode||(d.relations={},(g=c.$.elementFromPoint(f,h))&&g.nodeType&&(e=new CKEDITOR.dom.element(g),d.traverseSearch(e),isNaN(f+h)||d.pixelSearch(e,f,h),a&&a(d.relations,f,h)))});this.listener=this.editable.attachListener(this.target,
"mousemove",function(a){f=a.data.$.clientX;h=a.data.$.clientY;k.input()});this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",function(){k.reset()})},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var a={};a[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START;a[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END;a[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START;return function(d){var b=this.editor.createRange();b.moveToPosition(this.relations[d.uid].element,
a[d.type]);return b}}(),store:function(){function a(a,b,c){var e=a.getUniqueId();e in c?c[e].type|=b:c[e]={element:a,type:b}}return function(d,b){var c;b&CKEDITOR.LINEUTILS_AFTER&&l(c=d.getNext())&&c.isVisible()&&(a(c,CKEDITOR.LINEUTILS_BEFORE,this.relations),b^=CKEDITOR.LINEUTILS_AFTER);b&CKEDITOR.LINEUTILS_INSIDE&&l(c=d.getFirst())&&c.isVisible()&&(a(c,CKEDITOR.LINEUTILS_BEFORE,this.relations),b^=CKEDITOR.LINEUTILS_INSIDE);a(d,b,this.relations)}}(),traverseSearch:function(a){var d,b,c;do if(c=a.$["data-cke-expando"],
!(c&&c in this.relations)){if(a.equals(this.editable))break;if(l(a))for(d in this.lookups)(b=this.lookups[d](a))&&this.store(a,b)}while((!a||a.type!=CKEDITOR.NODE_ELEMENT||"true"!=a.getAttribute("contenteditable"))&&(a=a.getParent()))},pixelSearch:function(){function a(a,c,e,g,f){for(var h=0,k;f(e);){e+=g;if(25==++h)break;if(k=this.doc.$.elementFromPoint(c,e))if(k==a)h=0;else if(d(a,k)&&(h=0,l(k=new CKEDITOR.dom.element(k))))return k}}var d=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(a,c){return a.contains(c)}:
function(a,c){return!!(a.compareDocumentPosition(c)&16)};return function(b,c,d){var g=this.win.getViewPaneSize().height,f=a.call(this,b.$,c,d,-1,function(a){return 0<a});c=a.call(this,b.$,c,d,1,function(a){return a<g});if(f)for(this.traverseSearch(f);!f.getParent().equals(b);)f=f.getParent();if(c)for(this.traverseSearch(c);!c.getParent().equals(b);)c=c.getParent();for(;f||c;){f&&(f=f.getNext(l));if(!f||f.equals(c))break;this.traverseSearch(f);c&&(c=c.getPrevious(l));if(!c||c.equals(f))break;this.traverseSearch(c)}}}(),
greedySearch:function(){this.relations={};for(var a=this.editable.getElementsByTag("*"),d=0,b,c,e;b=a.getItem(d++);)if(!b.equals(this.editable)&&b.type==CKEDITOR.NODE_ELEMENT&&(b.hasAttribute("contenteditable")||!b.isReadOnly())&&l(b)&&b.isVisible())for(e in this.lookups)(c=this.lookups[e](b))&&this.store(b,c);return this.relations}};n.prototype={locate:function(){function a(a,b){var c=a.element[b===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return c&&l(c)?(a.siblingRect=c.getClientRect(),
b==CKEDITOR.LINEUTILS_BEFORE?(a.siblingRect.bottom+a.elementRect.top)/2:(a.elementRect.bottom+a.siblingRect.top)/2):b==CKEDITOR.LINEUTILS_BEFORE?a.elementRect.top:a.elementRect.bottom}return function(d){var b;this.locations={};for(var c in d)b=d[c],b.elementRect=b.element.getClientRect(),b.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(c,CKEDITOR.LINEUTILS_BEFORE,a(b,CKEDITOR.LINEUTILS_BEFORE)),b.type&CKEDITOR.LINEUTILS_AFTER&&this.store(c,CKEDITOR.LINEUTILS_AFTER,a(b,CKEDITOR.LINEUTILS_AFTER)),b.type&
CKEDITOR.LINEUTILS_INSIDE&&this.store(c,CKEDITOR.LINEUTILS_INSIDE,(b.elementRect.top+b.elementRect.bottom)/2);return this.locations}}(),sort:function(){var a,d,b,c;return function(e,g){a=this.locations;d=[];for(var f in a)for(var h in a[f])if(b=Math.abs(e-a[f][h]),d.length){for(c=0;c<d.length;c++)if(b<d[c].dist){d.splice(c,0,{uid:+f,type:h,dist:b});break}c==d.length&&d.push({uid:+f,type:h,dist:b})}else d.push({uid:+f,type:h,dist:b});return"undefined"!=typeof g?d.slice(0,g):d}}(),store:function(a,
d,b){this.locations[a]||(this.locations[a]={});this.locations[a][d]=b}};var q={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},t={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};p.prototype={removeAll:function(){for(var a in this.hidden)this.hidden[a].remove(),delete this.hidden[a];for(a in this.visible)this.visible[a].remove(),delete this.visible[a]},hideLine:function(a){var d=a.getUniqueId();
a.hide();this.hidden[d]=a;delete this.visible[d]},showLine:function(a){var d=a.getUniqueId();a.show();this.visible[d]=a;delete this.hidden[d]},hideVisible:function(){for(var a in this.visible)this.hideLine(this.visible[a])},placeLine:function(a,d){var b,c,e;if(b=this.getStyle(a.uid,a.type)){for(e in this.visible)if(this.visible[e].getCustomData("hash")!==this.hash){c=this.visible[e];break}if(!c)for(e in this.hidden)if(this.hidden[e].getCustomData("hash")!==this.hash){this.showLine(c=this.hidden[e]);
break}c||this.showLine(c=this.addLine());c.setCustomData("hash",this.hash);this.visible[c.getUniqueId()]=c;c.setStyles(b);d&&d(c)}},getStyle:function(a,d){var b=this.relations[a],c=this.locations[a][d],e={};e.width=b.siblingRect?Math.max(b.siblingRect.width,b.elementRect.width):b.elementRect.width;e.top=this.inline?c+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+c;if(e.top-this.winTopScroll.y<this.rect.top||e.top-this.winTopScroll.y>this.rect.bottom)return!1;this.inline?
e.left=b.elementRect.left-this.rect.relativeX:(0<b.elementRect.left?e.left=this.rect.left+b.elementRect.left:(e.width+=b.elementRect.left,e.left=this.rect.left),0<(b=e.left+e.width-(this.rect.left+this.winPane.width))&&(e.width-=b));e.left+=this.winTopScroll.x;for(var g in e)e[g]=CKEDITOR.tools.cssLength(e[g]);return e},addLine:function(){var a=CKEDITOR.dom.element.createFromHtml(this.lineTpl);a.appendTo(this.container);return a},prepare:function(a,d){this.relations=a;this.locations=d;this.hash=Math.random()},
cleanup:function(){var a,d;for(d in this.visible)a=this.visible[d],a.getCustomData("hash")!==this.hash&&this.hideLine(a)},queryViewport:function(){this.winPane=this.win.getViewPaneSize();this.winTopScroll=this.winTop.getScrollPosition();this.winTopPane=this.winTop.getViewPaneSize();this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(a){a=a.getClientRect();var d=this.container.getDocumentPosition(),b=this.container.getComputedStyle("position");a.relativeX=a.relativeY=
0;"static"!=b&&(a.relativeY=d.y,a.relativeX=d.x,a.top-=a.relativeY,a.bottom-=a.relativeY,a.left-=a.relativeX,a.right-=a.relativeX);return a}};var r={left:1,right:1,center:1},u={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:m,locator:n,liner:p}})();(function(){function p(a){this.editor=a;this.registered={};this.instances={};this.selected=[];this.widgetHoldingFocusedEditable=this.focused=null;this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}};F(this);G(this);this.on("checkWidgets",H);this.editor.on("contentDomInvalidated",this.checkWidgets,this);I(this);J(this);K(this);L(this);M(this)}function g(a,b,c,d,e){var f=a.editor;CKEDITOR.tools.extend(this,d,{editor:f,id:b,inline:"span"==c.getParent().getName(),element:c,data:CKEDITOR.tools.extend({},
"function"==typeof d.defaults?d.defaults():d.defaults),dataReady:!1,inited:!1,ready:!1,edit:g.prototype.edit,focusedEditable:null,definition:d,repository:a,draggable:!1!==d.draggable,_:{downcastFn:d.downcast&&"string"==typeof d.downcast?d.downcasts[d.downcast]:d.downcast}},!0);a.fire("instanceCreated",this);N(this,d);this.init&&this.init();this.inited=!0;(a=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(a)));e&&this.setData(e);this.data.classes||this.setData("classes",
this.getClasses());this.dataReady=!0;r(this);this.fire("data",this.data);this.isInited()&&f.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function q(a,b,c){CKEDITOR.dom.element.call(this,b.$);this.editor=a;this._={};b=this.filter=c.filter;CKEDITOR.dtd[this.getName()].p?(this.enterMode=b?b.getAllowedEnterMode(a.enterMode):a.enterMode,this.shiftEnterMode=b?b.getAllowedEnterMode(a.shiftEnterMode,!0):a.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function O(a,
b){a.addCommand(b.name,{exec:function(a,d){function e(){a.widgets.finalizeCreation(k)}var f=a.widgets.focused;if(f&&f.name==b.name)f.edit();else if(b.insert)b.insert();else if(b.template){var f="function"==typeof b.defaults?b.defaults():b.defaults,f=CKEDITOR.dom.element.createFromHtml(b.template.output(f)),h,l=a.widgets.wrapElement(f,b.name),k=new CKEDITOR.dom.documentFragment(l.getDocument());k.append(l);(h=a.widgets.initOn(f,b,d&&d.startupData))?(f=h.once("edit",function(b){if(b.data.dialog)h.once("dialog",
function(b){b=b.data;var d,f;d=b.once("ok",e,null,null,20);f=b.once("cancel",function(b){b.data&&!1===b.data.hide||a.widgets.destroy(h,!0)});b.once("hide",function(){d.removeListener();f.removeListener()})});else e()},null,null,999),h.edit(),f.removeListener()):e()}},allowedContent:b.allowedContent,requiredContent:b.requiredContent,contentForms:b.contentForms,contentTransformations:b.contentTransformations})}function P(a,b){function c(c,b,d){var e=CKEDITOR.tools.getIndex(a._.upcasts,function(a){return a[2]>
d});0>e&&(e=a._.upcasts.length);a._.upcasts.splice(e,0,[c,b,d])}var d=b.upcast,e=b.upcastPriority||10;if(d)if("string"==typeof d)for(d=d.split(",");d.length;)c(b.upcasts[d.pop()],b.name,e);else c(d,b.name,e)}function t(a,b){a.focused=null;if(b.isInited()){var c=b.editor.checkDirty();a.fire("widgetBlurred",{widget:b});b.setFocused(!1);!c&&b.editor.resetDirty()}}function H(a){a=a.data;if("wysiwyg"==this.editor.mode){var b=this.editor.editable(),c=this.instances,d,e,f,h;if(b){for(d in c)c[d].isReady()&&
!b.contains(c[d].wrapper)&&this.destroy(c[d],!0);if(a&&a.initOnlyNew)c=this.initOnAll();else{var l=b.find(".cke_widget_wrapper"),c=[];d=0;for(e=l.count();d<e;d++){f=l.getItem(d);if(h=!this.getByElement(f,!0)){a:{h=Q;for(var k=f;k=k.getParent();)if(h(k)){h=!0;break a}h=!1}h=!h}h&&b.contains(f)&&(f.addClass("cke_widget_new"),c.push(this.initOn(f.getFirst(g.isDomWidgetElement))))}}a&&a.focusInited&&1==c.length&&c[0].focus()}}}function u(a,b,c){if(!c.allowedContent)return null;var d=this._.filters[a];
d||(this._.filters[a]=d={});(a=d[b])||(d[b]=a=new CKEDITOR.filter(c.allowedContent));return a}function R(a){var b=[],c=a._.upcasts,d=a._.upcastCallbacks;return{toBeWrapped:b,iterator:function(a){var f,h,l,k,m;if("data-cke-widget-wrapper"in a.attributes)return(a=a.getFirst(g.isParserWidgetElement))&&b.push([a]),!1;if("data-widget"in a.attributes)return b.push([a]),!1;if(m=c.length){if(a.attributes["data-cke-widget-upcasted"])return!1;k=0;for(f=d.length;k<f;++k)if(!1===d[k](a))return;for(k=0;k<m;++k)if(f=
c[k],l={},h=f[0](a,l))return h instanceof CKEDITOR.htmlParser.element&&(a=h),a.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(l)),a.attributes["data-cke-widget-upcasted"]=1,b.push([a,f[1]]),!1}}}}function v(a){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off","class":"cke_widget_wrapper cke_widget_new cke_widget_"+(a?"inline":"block")}}function w(a,b,c){if(a.type==CKEDITOR.NODE_ELEMENT){var d=CKEDITOR.dtd[a.name];if(d&&!d[c.name]){var d=
a.split(b),e=a.parent;b=d.getIndex();a.children.length||(--b,a.remove());d.children.length||d.remove();return w(e,b,c)}}a.add(c,b)}function x(a,b){return"boolean"==typeof a.inline?a.inline:!!CKEDITOR.dtd.$inline[b]}function Q(a){return a.hasAttribute("data-cke-temp")}function n(a,b,c,d){var e=a.editor;e.fire("lockSnapshot");c?(d=c.data("cke-widget-editable"),d=b.editables[d],a.widgetHoldingFocusedEditable=b,b.focusedEditable=d,c.addClass("cke_widget_editable_focused"),d.filter&&e.setActiveFilter(d.filter),
e.setActiveEnterMode(d.enterMode,d.shiftEnterMode)):(d||b.focusedEditable.removeClass("cke_widget_editable_focused"),b.focusedEditable=null,a.widgetHoldingFocusedEditable=null,e.setActiveFilter(null),e.setActiveEnterMode(null,null));e.fire("unlockSnapshot")}function S(a){a.contextMenu&&a.contextMenu.addListener(function(b){if(b=a.widgets.getByElement(b,!0))return b.fire("contextMenu",{})})}function T(a,b){return CKEDITOR.tools.trim(b)}function L(a){var b=a.editor,c=CKEDITOR.plugins.lineutils;b.on("dragstart",
function(c){var e=c.data.target;g.isDomDragHandler(e)&&(e=a.getByElement(e),c.data.dataTransfer.setData("cke/widget-id",e.id),b.focus(),e.focus())});b.on("drop",function(c){var e=c.data.dataTransfer,f=e.getData("cke/widget-id"),h=e.getTransferType(b),e=b.createRange();""!==f&&h===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?c.cancel():""!==f&&h==CKEDITOR.DATA_TRANSFER_INTERNAL&&(f=a.instances[f])&&(e.setStartBefore(f.wrapper),e.setEndAfter(f.wrapper),c.data.dragRange=e,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,
delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,c.data.dataTransfer.setData("text/html",b.editable().getHtmlFromRange(e).getHtml()),b.widgets.destroy(f,!0))});b.on("contentDom",function(){var d=b.editable();CKEDITOR.tools.extend(a,{finder:new c.finder(b,{lookups:{"default":function(c){if(!c.is(CKEDITOR.dtd.$listItem)&&c.is(CKEDITOR.dtd.$block)&&!g.isDomNestedEditable(c)&&!a._.draggedWidget.wrapper.contains(c)){var b=g.getNestedEditable(d,c);if(b){c=a._.draggedWidget;if(a.getByElement(b)==
c)return;b=CKEDITOR.filter.instances[b.data("cke-filter")];c=c.requiredContent;if(b&&c&&!b.check(c))return}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new c.locator(b),liner:new c.liner(b,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)})}function J(a){var b=a.editor;b.on("contentDom",function(){var c=b.editable(),d=c.isInline()?c:b.document,e,f;c.attachListener(d,
"mousedown",function(c){var d=c.data.getTarget();if(!d.type)return!1;e=a.getByElement(d);f=0;e&&(e.inline&&d.type==CKEDITOR.NODE_ELEMENT&&d.hasAttribute("data-cke-widget-drag-handler")?(f=1,a.focused!=e&&b.getSelection().removeAllRanges()):g.getNestedEditable(e.wrapper,d)?e=null:(c.data.preventDefault(),CKEDITOR.env.ie||e.focus()))});c.attachListener(d,"mouseup",function(){f&&e&&e.wrapper&&(f=0,e.focus())});CKEDITOR.env.ie&&c.attachListener(d,"mouseup",function(){setTimeout(function(){e&&e.wrapper&&
c.contains(e.wrapper)&&(e.focus(),e=null)})})});b.on("doubleclick",function(c){var b=a.getByElement(c.data.element);if(b&&!g.getNestedEditable(b.wrapper,c.data.element))return b.fire("doubleclick",{element:c.data.element})},null,null,1)}function K(a){a.editor.on("key",function(b){var c=a.focused,d=a.widgetHoldingFocusedEditable,e;c?e=c.fire("key",{keyCode:b.data.keyCode}):d&&(c=b.data.keyCode,b=d.focusedEditable,c==CKEDITOR.CTRL+65?(c=b.getBogus(),d=d.editor.createRange(),d.selectNodeContents(b),
c&&d.setEndAt(c,CKEDITOR.POSITION_BEFORE_START),d.select(),e=!1):8==c||46==c?(e=d.editor.getSelection().getRanges(),d=e[0],e=!(1==e.length&&d.collapsed&&d.checkBoundaryOfElement(b,CKEDITOR[8==c?"START":"END"]))):e=void 0);return e},null,null,1)}function M(a){function b(c){a.focused&&y(a.focused,"cut"==c.name)}var c=a.editor;c.on("contentDom",function(){var a=c.editable();a.attachListener(a,"copy",b);a.attachListener(a,"cut",b)})}function I(a){var b=a.editor;b.on("selectionCheck",function(){a.fire("checkSelection")});
a.on("checkSelection",a.checkSelection,a);b.on("selectionChange",function(c){var d=(c=g.getNestedEditable(b.editable(),c.data.selection.getStartElement()))&&a.getByElement(c),e=a.widgetHoldingFocusedEditable;e?e===d&&e.focusedEditable.equals(c)||(n(a,e,null),d&&c&&n(a,d,c)):d&&c&&n(a,d,c)});b.on("dataReady",function(){z(a).commit()});b.on("blur",function(){var c;(c=a.focused)&&t(a,c);(c=a.widgetHoldingFocusedEditable)&&n(a,c,null)})}function G(a){var b=a.editor,c={};b.on("toDataFormat",function(b){var e=
CKEDITOR.tools.getNextNumber(),f=[];b.data.downcastingSessionId=e;c[e]=f;b.data.dataValue.forEach(function(c){var b=c.attributes,d;if("data-cke-widget-id"in b){if(b=a.instances[b["data-cke-widget-id"]])d=c.getFirst(g.isParserWidgetElement),f.push({wrapper:c,element:d,widget:b,editables:{}}),"1"!=d.attributes["data-cke-widget-keep-attr"]&&delete d.attributes["data-widget"]}else if("data-cke-widget-editable"in b)return f[f.length-1].editables[b["data-cke-widget-editable"]]=c,!1},CKEDITOR.NODE_ELEMENT,
!0)},null,null,8);b.on("toDataFormat",function(a){if(a.data.downcastingSessionId){a=c[a.data.downcastingSessionId];for(var b,f,h,l,g,m;b=a.shift();){f=b.widget;h=b.element;l=f._.downcastFn&&f._.downcastFn.call(f,h);for(m in b.editables)g=b.editables[m],delete g.attributes.contenteditable,g.setHtml(f.editables[m].getData());l||(l=h);b.wrapper.replaceWith(l)}}},null,null,13);b.on("contentDomUnload",function(){a.destroyAll(!0)})}function F(a){var b=a.editor,c,d;b.on("toHtml",function(b){var d=R(a),h;
for(b.data.dataValue.forEach(d.iterator,CKEDITOR.NODE_ELEMENT,!0);h=d.toBeWrapped.pop();){var l=h[0],k=l.parent;k.type==CKEDITOR.NODE_ELEMENT&&k.attributes["data-cke-widget-wrapper"]&&k.replaceWith(l);a.wrapElement(h[0],h[1])}c=b.data.protectedWhitespaces?3==b.data.dataValue.children.length&&g.isParserWidgetWrapper(b.data.dataValue.children[1]):1==b.data.dataValue.children.length&&g.isParserWidgetWrapper(b.data.dataValue.children[0])},null,null,8);b.on("dataReady",function(){if(d)for(var c=b.editable().find(".cke_widget_wrapper"),
f,h,l=0,k=c.count();l<k;++l)f=c.getItem(l),h=f.getFirst(g.isDomWidgetElement),h.type==CKEDITOR.NODE_ELEMENT&&h.data("widget")?(h.replace(f),a.wrapElement(h)):f.remove();d=0;a.destroyAll(!0);a.initOnAll()});b.on("loadSnapshot",function(c){/data-cke-widget/.test(c.data)&&(d=1);a.destroyAll(!0)},null,null,9);b.on("paste",function(a){a=a.data;a.dataValue=a.dataValue.replace(U,T);a.range&&(a=g.getNestedEditable(b.editable(),a.range.startContainer))&&(a=CKEDITOR.filter.instances[a.data("cke-filter")])&&
b.setActiveFilter(a)});b.on("afterInsertHtml",function(d){d.data.intoRange?a.checkWidgets({initOnlyNew:!0}):(b.fire("lockSnapshot"),a.checkWidgets({initOnlyNew:!0,focusInited:c}),b.fire("unlockSnapshot"))})}function z(a){var b=a.selected,c=[],d=b.slice(0),e=null;return{select:function(a){0>CKEDITOR.tools.indexOf(b,a)&&c.push(a);a=CKEDITOR.tools.indexOf(d,a);0<=a&&d.splice(a,1);return this},focus:function(a){e=a;return this},commit:function(){var f=a.focused!==e,h,g;a.editor.fire("lockSnapshot");for(f&&
(h=a.focused)&&t(a,h);h=d.pop();)b.splice(CKEDITOR.tools.indexOf(b,h),1),h.isInited()&&(g=h.editor.checkDirty(),h.setSelected(!1),!g&&h.editor.resetDirty());f&&e&&(g=a.editor.checkDirty(),a.focused=e,a.fire("widgetFocused",{widget:e}),e.setFocused(!0),!g&&a.editor.resetDirty());for(;h=c.pop();)b.push(h),h.setSelected(!0);a.editor.fire("unlockSnapshot")}}}function A(a,b,c){var d=0;b=B(b);var e=a.data.classes||{},f;if(b){for(e=CKEDITOR.tools.clone(e);f=b.pop();)c?e[f]||(d=e[f]=1):e[f]&&(delete e[f],
d=1);d&&a.setData("classes",e)}}function C(a){a.cancel()}function y(a,b){var c=a.editor,d=c.document;if(!d.getById("cke_copybin")){var e=c.blockless||CKEDITOR.env.ie?"span":"div",f=d.createElement(e),h=d.createElement(e),e=CKEDITOR.env.ie&&9>CKEDITOR.env.version;h.setAttributes({id:"cke_copybin","data-cke-temp":"1"});f.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"});f.setStyle("ltr"==c.config.contentsLangDirection?"left":"right","-5000px");var g=c.createRange();g.setStartBefore(a.wrapper);
g.setEndAfter(a.wrapper);f.setHtml('\x3cspan data-cke-copybin-start\x3d"1"\x3e​\x3c/span\x3e'+c.editable().getHtmlFromRange(g).getHtml()+'\x3cspan data-cke-copybin-end\x3d"1"\x3e​\x3c/span\x3e');c.fire("saveSnapshot");c.fire("lockSnapshot");h.append(f);c.editable().append(h);var k=c.on("selectionChange",C,null,null,0),m=a.repository.on("checkSelection",C,null,null,0);if(e)var n=d.getDocumentElement().$,p=n.scrollTop;g=c.createRange();g.selectNodeContents(f);g.select();e&&(n.scrollTop=p);setTimeout(function(){b||
a.focus();h.remove();k.removeListener();m.removeListener();c.fire("unlockSnapshot");b&&(a.repository.del(a),c.fire("saveSnapshot"))},100)}}function B(a){return(a=(a=a.getDefinition().attributes)&&a["class"])?a.split(/\s+/):null}function D(){var a=CKEDITOR.document.getActive(),b=this.editor,c=b.editable();(c.isInline()?c:b.document.getWindow().getFrame()).equals(a)&&b.focusManager.focus(c)}function E(){CKEDITOR.env.gecko&&this.editor.unlockSelection();CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),
this.editor.selectionChange(1))}function V(a){var b=null;a.on("data",function(){var a=this.data.classes,d;if(b!=a){for(d in b)a&&a[d]||this.removeClass(d);for(d in a)this.addClass(d);b=a}})}function W(a){a.on("data",function(){if(a.wrapper){var b=this.getLabel?this.getLabel():this.editor.lang.widget.label.replace(/%1/,this.pathName||this.element.getName());a.wrapper.setAttribute("role","region");a.wrapper.setAttribute("aria-label",b)}},null,null,9999)}function X(a){if(a.draggable){var b=a.editor,
c=a.wrapper.getLast(g.isDomDragHandlerContainer),d;c?d=c.findOne("img"):(c=new CKEDITOR.dom.element("span",b.document),c.setAttributes({"class":"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+b.plugins.widget.path+"images/handle.png)"}),d=new CKEDITOR.dom.element("img",b.document),d.setAttributes({"class":"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:b.lang.widget.move,
height:15,role:"presentation"}),a.inline&&d.setAttribute("draggable","true"),c.append(d),a.wrapper.append(c));a.wrapper.on("dragover",function(a){a.data.preventDefault()});a.wrapper.on("mouseenter",a.updateDragHandlerPosition,a);setTimeout(function(){a.on("data",a.updateDragHandlerPosition,a)},50);if(!a.inline&&(d.on("mousedown",Y,a),CKEDITOR.env.ie&&9>CKEDITOR.env.version))d.on("dragstart",function(a){a.data.preventDefault(!0)});a.dragHandlerContainer=c}}function Y(a){function b(){var b;for(q.reset();b=
g.pop();)b.removeListener();var c=k;b=a.sender;var d=this.repository.finder,e=this.repository.liner,f=this.editor,h=this.editor.editable();CKEDITOR.tools.isEmpty(e.visible)||(c=d.getRange(c[0]),this.focus(),f.fire("drop",{dropRange:c,target:c.startContainer}));h.removeClass("cke_widget_dragging");e.hideVisible();f.fire("dragend",{target:b})}var c=this.repository.finder,d=this.repository.locator,e=this.repository.liner,f=this.editor,h=f.editable(),g=[],k=[],m,n;this.repository._.draggedWidget=this;
var p=c.greedySearch(),q=CKEDITOR.tools.eventsBuffer(50,function(){m=d.locate(p);k=d.sort(n,1);k.length&&(e.prepare(p,m),e.placeLine(k[0]),e.cleanup())});h.addClass("cke_widget_dragging");g.push(h.on("mousemove",function(a){n=a.data.$.clientY;q.input()}));f.fire("dragstart",{target:a.sender});g.push(f.document.once("mouseup",b,this));h.isInline()||g.push(CKEDITOR.document.once("mouseup",b,this))}function Z(a){var b,c,d=a.editables;a.editables={};if(a.editables)for(b in d)c=d[b],a.initEditable(b,"string"==
typeof c?{selector:c}:c)}function aa(a){if(a.mask){var b=a.wrapper.findOne(".cke_widget_mask");b||(b=new CKEDITOR.dom.element("img",a.editor.document),b.setAttributes({src:CKEDITOR.tools.transparentImageData,"class":"cke_reset cke_widget_mask"}),a.wrapper.append(b));a.mask=b}}function ba(a){if(a.parts){var b={},c,d;for(d in a.parts)c=a.wrapper.findOne(a.parts[d]),b[d]=c;a.parts=b}}function N(a,b){ca(a);ba(a);Z(a);aa(a);X(a);V(a);W(a);if(CKEDITOR.env.ie&&9>CKEDITOR.env.version)a.wrapper.on("dragstart",
function(b){var d=b.data.getTarget();g.getNestedEditable(a,d)||a.inline&&g.isDomDragHandler(d)||b.data.preventDefault()});a.wrapper.removeClass("cke_widget_new");a.element.addClass("cke_widget_element");a.on("key",function(b){b=b.data.keyCode;if(13==b)a.edit();else{if(b==CKEDITOR.CTRL+67||b==CKEDITOR.CTRL+88){y(a,b==CKEDITOR.CTRL+88);return}if(b in da||CKEDITOR.CTRL&b||CKEDITOR.ALT&b)return}return!1},null,null,999);a.on("doubleclick",function(b){a.edit()&&b.cancel()});if(b.data)a.on("data",b.data);
if(b.edit)a.on("edit",b.edit)}function ca(a){(a.wrapper=a.element.getParent()).setAttribute("data-cke-widget-id",a.id)}function r(a){a.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(a.data)))}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard",onLoad:function(){CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover\x3e.cke_widget_element{outline:2px solid yellow;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid yellow}.cke_widget_wrapper.cke_widget_focused\x3e.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #ace}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:none;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover\x3e.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}")},
beforeInit:function(a){a.widgets=new p(a)},afterInit:function(a){var b=a.widgets.registered,c,d,e;for(d in b)c=b[d],(e=c.button)&&a.ui.addButton&&a.ui.addButton(CKEDITOR.tools.capitalize(c.name,!0),{label:e,command:c.name,toolbar:"insert,10"});S(a)}});p.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(a,b){b=CKEDITOR.tools.prototypedCopy(b);b.name=a;b._=b._||{};this.editor.fire("widgetDefinition",b);b.template&&(b.template=new CKEDITOR.template(b.template));O(this.editor,b);P(this,b);return this.registered[a]=
b},addUpcastCallback:function(a){this._.upcastCallbacks.push(a)},checkSelection:function(){var a=this.editor.getSelection(),b=a.getSelectedElement(),c=z(this),d;if(b&&(d=this.getByElement(b,!0)))return c.focus(d).select(d).commit();a=a.getRanges()[0];if(!a||a.collapsed)return c.commit();a=new CKEDITOR.dom.walker(a);for(a.evaluator=g.isDomWidgetWrapper;b=a.next();)c.select(this.getByElement(b));c.commit()},checkWidgets:function(a){this.fire("checkWidgets",CKEDITOR.tools.copy(a||{}))},del:function(a){if(this.focused===
a){var b=a.editor,c=b.createRange(),d;(d=c.moveToClosestEditablePosition(a.wrapper,!0))||(d=c.moveToClosestEditablePosition(a.wrapper,!1));d&&b.getSelection().selectRanges([c])}a.wrapper.remove();this.destroy(a,!0)},destroy:function(a,b){this.widgetHoldingFocusedEditable===a&&n(this,a,null,b);a.destroy(b);delete this.instances[a.id];this.fire("instanceDestroyed",a)},destroyAll:function(a,b){var c,d,e=this.instances;if(b&&!a){d=b.find(".cke_widget_wrapper");for(var e=d.count(),f=0;f<e;++f)(c=this.getByElement(d.getItem(f),
!0))&&this.destroy(c)}else for(d in e)c=e[d],this.destroy(c,a)},finalizeCreation:function(a){(a=a.getFirst())&&g.isDomWidgetWrapper(a)&&(this.editor.insertElement(a),a=this.getByElement(a),a.ready=!0,a.fire("ready"),a.focus())},getByElement:function(){function a(a){return a.is(b)&&a.data("cke-widget-id")}var b={div:1,span:1};return function(b,d){if(!b)return null;var e=a(b);if(!d&&!e){var f=this.editor.editable();do b=b.getParent();while(b&&!b.equals(f)&&!(e=a(b)))}return this.instances[e]||null}}(),
initOn:function(a,b,c){b?"string"==typeof b&&(b=this.registered[b]):b=this.registered[a.data("widget")];if(!b)return null;var d=this.wrapElement(a,b.name);return d?d.hasClass("cke_widget_new")?(a=new g(this,this._.nextId++,a,b,c),a.isInited()?this.instances[a.id]=a:null):this.getByElement(a):null},initOnAll:function(a){a=(a||this.editor.editable()).find(".cke_widget_new");for(var b=[],c,d=a.count();d--;)(c=this.initOn(a.getItem(d).getFirst(g.isDomWidgetElement)))&&b.push(c);return b},onWidget:function(a){var b=
Array.prototype.slice.call(arguments);b.shift();for(var c in this.instances){var d=this.instances[c];d.name==a&&d.on.apply(d,b)}this.on("instanceCreated",function(c){c=c.data;c.name==a&&c.on.apply(c,b)})},parseElementClasses:function(a){if(!a)return null;a=CKEDITOR.tools.trim(a).split(/\s+/);for(var b,c={},d=0;b=a.pop();)-1==b.indexOf("cke_")&&(c[b]=d=1);return d?c:null},wrapElement:function(a,b){var c=null,d,e;if(a instanceof CKEDITOR.dom.element){d=this.registered[b||a.data("widget")];if(!d)return null;
if((c=a.getParent())&&c.type==CKEDITOR.NODE_ELEMENT&&c.data("cke-widget-wrapper"))return c;a.hasAttribute("data-cke-widget-keep-attr")||a.data("cke-widget-keep-attr",a.data("widget")?1:0);b&&a.data("widget",b);e=x(d,a.getName());c=new CKEDITOR.dom.element(e?"span":"div");c.setAttributes(v(e));c.data("cke-display-name",d.pathName?d.pathName:a.getName());a.getParent(!0)&&c.replace(a);a.appendTo(c)}else if(a instanceof CKEDITOR.htmlParser.element){d=this.registered[b||a.attributes["data-widget"]];if(!d)return null;
if((c=a.parent)&&c.type==CKEDITOR.NODE_ELEMENT&&c.attributes["data-cke-widget-wrapper"])return c;"data-cke-widget-keep-attr"in a.attributes||(a.attributes["data-cke-widget-keep-attr"]=a.attributes["data-widget"]?1:0);b&&(a.attributes["data-widget"]=b);e=x(d,a.name);c=new CKEDITOR.htmlParser.element(e?"span":"div",v(e));c.attributes["data-cke-display-name"]=d.pathName?d.pathName:a.name;d=a.parent;var f;d&&(f=a.getIndex(),a.remove());c.add(a);d&&w(d,f,c)}return c},_tests_createEditableFilter:u};CKEDITOR.event.implementOn(p.prototype);
g.prototype={addClass:function(a){this.element.addClass(a)},applyStyle:function(a){A(this,a,1)},checkStyleActive:function(a){a=B(a);var b;if(!a)return!1;for(;b=a.pop();)if(!this.hasClass(b))return!1;return!0},destroy:function(a){this.fire("destroy");if(this.editables)for(var b in this.editables)this.destroyEditable(b,a);a||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),
this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper));this.wrapper=null},destroyEditable:function(a,b){var c=this.editables[a];c.removeListener("focus",E);c.removeListener("blur",D);this.editor.focusManager.remove(c);b||(this.repository.destroyAll(!1,c),c.removeClass("cke_widget_editable"),c.removeClass("cke_widget_editable_focused"),c.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"]));delete this.editables[a]},edit:function(){var a=
{dialog:this.dialog},b=this;if(!1===this.fire("edit",a)||!a.dialog)return!1;this.editor.openDialog(a.dialog,function(a){var d,e;!1!==b.fire("dialog",a)&&(d=a.on("show",function(){a.setupContent(b)}),e=a.on("ok",function(){var d,e=b.on("data",function(a){d=1;a.cancel()},null,null,0);b.editor.fire("saveSnapshot");a.commitContent(b);e.removeListener();d&&(b.fire("data",b.data),b.editor.fire("saveSnapshot"))}),a.once("hide",function(){d.removeListener();e.removeListener()}))});return!0},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},
hasClass:function(a){return this.element.hasClass(a)},initEditable:function(a,b){var c=this._findOneNotNested(b.selector);return c&&c.is(CKEDITOR.dtd.$editable)?(c=new q(this.editor,c,{filter:u.call(this.repository,this.name,a,b)}),this.editables[a]=c,c.setAttributes({contenteditable:"true","data-cke-widget-editable":a,"data-cke-enter-mode":c.enterMode}),c.filter&&c.data("cke-filter",c.filter.id),c.addClass("cke_widget_editable"),c.removeClass("cke_widget_editable_focused"),b.pathName&&c.data("cke-display-name",
b.pathName),this.editor.focusManager.add(c),c.on("focus",E,this),CKEDITOR.env.ie&&c.on("blur",D,this),c._.initialSetData=!0,c.setData(c.getHtml()),!0):!1},_findOneNotNested:function(a){a=this.wrapper.find(a);for(var b,c,d=0;d<a.count();d++)if(b=a.getItem(d),c=b.getAscendant(g.isDomWidgetWrapper),this.wrapper.equals(c))return b;return null},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var a=this.editor.getSelection();
if(a){var b=this.editor.checkDirty();a.fake(this.wrapper);!b&&this.editor.resetDirty()}this.editor.focus()},removeClass:function(a){this.element.removeClass(a)},removeStyle:function(a){A(this,a,0)},setData:function(a,b){var c=this.data,d=0;if("string"==typeof a)c[a]!==b&&(c[a]=b,d=1);else{var e=a;for(a in e)c[a]!==e[a]&&(d=1,c[a]=e[a])}d&&this.dataReady&&(r(this),this.fire("data",c));return this},setFocused:function(a){this.wrapper[a?"addClass":"removeClass"]("cke_widget_focused");this.fire(a?"focus":
"blur");return this},setSelected:function(a){this.wrapper[a?"addClass":"removeClass"]("cke_widget_selected");this.fire(a?"select":"deselect");return this},updateDragHandlerPosition:function(){var a=this.editor,b=this.element.$,c=this._.dragHandlerOffset,b={x:b.offsetLeft,y:b.offsetTop-15};c&&b.x==c.x&&b.y==c.y||(c=a.checkDirty(),a.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:b.y+"px",left:b.x+"px",display:"block"}),a.fire("unlockSnapshot"),!c&&a.resetDirty(),this._.dragHandlerOffset=
b)}};CKEDITOR.event.implementOn(g.prototype);g.getNestedEditable=function(a,b){return!b||b.equals(a)?null:g.isDomNestedEditable(b)?b:g.getNestedEditable(a,b.getParent())};g.isDomDragHandler=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-drag-handler")};g.isDomDragHandlerContainer=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_widget_drag_handler_container")};g.isDomNestedEditable=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-editable")};
g.isDomWidgetElement=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-widget")};g.isDomWidgetWrapper=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-wrapper")};g.isParserWidgetElement=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&!!a.attributes["data-widget"]};g.isParserWidgetWrapper=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&!!a.attributes["data-cke-widget-wrapper"]};q.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),
{setData:function(a){this._.initialSetData||this.editor.widgets.destroyAll(!1,this);this._.initialSetData=!1;a=this.editor.dataProcessor.toHtml(a,{context:this.getName(),filter:this.filter,enterMode:this.enterMode});this.setHtml(a);this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var U=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,
da={37:1,38:1,39:1,40:1,8:1,46:1};(function(){function a(){}function b(a,b,e){return e&&this.checkElement(a)?(a=e.widgets.getByElement(a,!0))&&a.checkStyleActive(this):!1}CKEDITOR.style.addCustomHandler({type:"widget",setup:function(a){this.widget=a.widget},apply:function(a){a instanceof CKEDITOR.editor&&this.checkApplicable(a.elementPath(),a)&&a.widgets.focused.applyStyle(this)},remove:function(a){a instanceof CKEDITOR.editor&&this.checkApplicable(a.elementPath(),a)&&a.widgets.focused.removeStyle(this)},
checkActive:function(a,b){return this.checkElementMatch(a.lastElement,0,b)},checkApplicable:function(a,b){return b instanceof CKEDITOR.editor?this.checkElement(a.lastElement):!1},checkElementMatch:b,checkElementRemovable:b,checkElement:function(a){return g.isDomWidgetWrapper(a)?(a=a.getFirst(g.isDomWidgetElement))&&a.data("widget")==this.widget:!1},buildPreview:function(a){return a||this._.definition.name},toAllowedContentRules:function(a){if(!a)return null;a=a.widgets.registered[this.widget];var b,
e={};if(!a)return null;if(a.styleableElements){b=this.getClassesArray();if(!b)return null;e[a.styleableElements]={classes:b,propertiesOnly:!0};return e}return a.styleToAllowedContentRules?a.styleToAllowedContentRules(this):null},getClassesArray:function(){var a=this._.definition.attributes&&this._.definition.attributes["class"];return a?CKEDITOR.tools.trim(a).split(/\s+/):null},applyToRange:a,removeFromRange:a,applyToObject:a})})();CKEDITOR.plugins.widget=g;g.repository=p;g.nestedEditable=q})();CKEDITOR.config.plugins='dialogui,dialog,about,a11yhelp,dialogadvtab,basicstyles,bidi,blockquote,clipboard,button,panelbutton,panel,floatpanel,colorbutton,colordialog,templates,menu,contextmenu,div,resize,toolbar,elementspath,enterkey,entities,popup,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,forms,format,horizontalrule,htmlwriter,iframe,wysiwygarea,image,indent,indentblock,indentlist,smiley,justify,menubutton,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastetext,pastefromword,preview,print,removeformat,save,selectall,showblocks,showborders,sourcearea,specialchar,scayt,stylescombo,tab,table,tabletools,undo,wsc,lineutils,widget';CKEDITOR.config.skin='moono';(function() {var setIcons = function(icons, strip) {var path = CKEDITOR.getUrl( 'plugins/' + strip );icons = icons.split( ',' );for ( var i = 0; i < icons.length; i++ )CKEDITOR.skin.icons[ icons[ i ] ] = { path: path, offset: -icons[ ++i ], bgsize : icons[ ++i ] };};if (CKEDITOR.env.hidpi) setIcons('about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,templates-rtl,432,,templates,456,,creatediv,480,,find-rtl,504,,find,528,,replace,552,,flash,576,,button,600,,checkbox,624,,form,648,,hiddenfield,672,,imagebutton,696,,radio,720,,select-rtl,744,,select,768,,textarea-rtl,792,,textarea,816,,textfield-rtl,840,,textfield,864,,horizontalrule,888,,iframe,912,,image,936,,indent-rtl,960,,indent,984,,outdent-rtl,1008,,outdent,1032,,smiley,1056,,justifyblock,1080,,justifycenter,1104,,justifyleft,1128,,justifyright,1152,,language,1176,,anchor-rtl,1200,,anchor,1224,,link,1248,,unlink,1272,,bulletedlist-rtl,1296,,bulletedlist,1320,,numberedlist-rtl,1344,,numberedlist,1368,,maximize,1392,,newpage-rtl,1416,,newpage,1440,,pagebreak-rtl,1464,,pagebreak,1488,,pastetext-rtl,1512,,pastetext,1536,,pastefromword-rtl,1560,,pastefromword,1584,,preview-rtl,1608,,preview,1632,,print,1656,,removeformat,1680,,save,1704,,selectall,1728,,showblocks-rtl,1752,,showblocks,1776,,source-rtl,1800,,source,1824,,specialchar,1848,,scayt,1872,,table,1896,,redo-rtl,1920,,redo,1944,,undo-rtl,1968,,undo,1992,,spellchecker,2016,','icons_hidpi.png');else setIcons('about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,templates-rtl,432,auto,templates,456,auto,creatediv,480,auto,find-rtl,504,auto,find,528,auto,replace,552,auto,flash,576,auto,button,600,auto,checkbox,624,auto,form,648,auto,hiddenfield,672,auto,imagebutton,696,auto,radio,720,auto,select-rtl,744,auto,select,768,auto,textarea-rtl,792,auto,textarea,816,auto,textfield-rtl,840,auto,textfield,864,auto,horizontalrule,888,auto,iframe,912,auto,image,936,auto,indent-rtl,960,auto,indent,984,auto,outdent-rtl,1008,auto,outdent,1032,auto,smiley,1056,auto,justifyblock,1080,auto,justifycenter,1104,auto,justifyleft,1128,auto,justifyright,1152,auto,language,1176,auto,anchor-rtl,1200,auto,anchor,1224,auto,link,1248,auto,unlink,1272,auto,bulletedlist-rtl,1296,auto,bulletedlist,1320,auto,numberedlist-rtl,1344,auto,numberedlist,1368,auto,maximize,1392,auto,newpage-rtl,1416,auto,newpage,1440,auto,pagebreak-rtl,1464,auto,pagebreak,1488,auto,pastetext-rtl,1512,auto,pastetext,1536,auto,pastefromword-rtl,1560,auto,pastefromword,1584,auto,preview-rtl,1608,auto,preview,1632,auto,print,1656,auto,removeformat,1680,auto,save,1704,auto,selectall,1728,auto,showblocks-rtl,1752,auto,showblocks,1776,auto,source-rtl,1800,auto,source,1824,auto,specialchar,1848,auto,scayt,1872,auto,table,1896,auto,redo-rtl,1920,auto,redo,1944,auto,undo-rtl,1968,auto,undo,1992,auto,spellchecker,2016,auto','icons.png');})();CKEDITOR.lang.languages={"af":1,"sq":1,"ar":1,"eu":1,"bn":1,"bs":1,"bg":1,"ca":1,"zh-cn":1,"zh":1,"hr":1,"cs":1,"da":1,"nl":1,"en":1,"en-au":1,"en-ca":1,"en-gb":1,"eo":1,"et":1,"fo":1,"fi":1,"fr":1,"fr-ca":1,"gl":1,"ka":1,"de":1,"de-ch":1,"el":1,"gu":1,"he":1,"hi":1,"hu":1,"is":1,"id":1,"it":1,"ja":1,"km":1,"ko":1,"ku":1,"lv":1,"lt":1,"mk":1,"ms":1,"mn":1,"no":1,"nb":1,"fa":1,"pl":1,"pt-br":1,"pt":1,"ro":1,"ru":1,"sr":1,"sr-latn":1,"si":1,"sk":1,"sl":1,"es":1,"sv":1,"tt":1,"th":1,"tr":1,"ug":1,"uk":1,"vi":1,"cy":1};}());
(function ($) {
    if (CKEDITOR && CKEDITOR.plugins && CKEDITOR.plugins.registered && CKEDITOR.plugins.registered.cmswidget) {
        return;
    }

    /**
     * Returns the focused widget, if of the type specific for this plugin.
     * If no widget is focused, `null` is returned.
     *
     * @param {CKEDITOR.editor} editor
     * @returns {CKEDITOR.plugins.widget|null} widget
     */
    function getSelectedWidget(editor) {
        var widget = editor.widgets.focused;

        if (widget && widget.name === 'cmswidget') {
            return widget;
        }

        widget = editor.widgets.selected;

        if (widget && widget.length) {
            var index = widget.findIndex(function (w) {
                return w.name === 'cmswidget';
            });

            if (index !== -1) {
                return widget[index];
            }
        }

        return null;
    }

    /**
     * Block / inline-but-block widgets can't be aligned properly
     * because CKEDITOR unwraps them and widget markup is then injected incorrectly
     * into resulting markup. This is not the complete solution, but this is what we have.
     *
     * @param {CKEDITOR.plugins.widget} widget widget
     * @returns {Boolean}
     */
    function canWidgetBeAligned(widget) {
        if (widget.inline) {
            if (CMS.$(widget.wrapper.$).hasClass('cke_widget_wrapper_force_block')) {
                return false;
            }

            return true;
        }

        return false;
    }

    var alignCommandIntegrator = function (editor) {
        var execCallbacks = [];

        return function (value) {
            var command = editor.getCommand('justify' + value);

            if (!command) {
                return;
            }

            execCallbacks.push(function () {
                command.refresh(editor, editor.elementPath());
            });

            command.on('exec', function (e) {
                var widget = getSelectedWidget(editor);

                if (widget) {
                    var enabled = canWidgetBeAligned(widget);

                    if (!enabled) {
                        // Once the widget changed its align, all the align commands
                        // must be refreshed: the event is to be cancelled.
                        for (var i = execCallbacks.length; i--;) {
                            execCallbacks[i]();
                        }

                        e.cancel();
                    }
                }
            });

            command.on('refresh', function (e) {
                var widget = getSelectedWidget(editor);

                if (!widget) {
                    return;
                }

                var enabled = canWidgetBeAligned(widget);

                // Don't allow justify commands when widget alignment is disabled
                if (!enabled) {
                    this.setState(CKEDITOR.TRISTATE_DISABLED);
                    e.cancel();
                }
            });
        };
    };

    CKEDITOR.plugins.add('cmswidget', {
        requires: 'widget',
        onLoad: function () {
            CKEDITOR.addCss(
                // when widget contents are inline,
                // but have block-level css
                '.cke_widget_wrapper_force_block{' +
                    'display:block!important;' +
                '}' +
                // empty elements focus outline
                '.cke_widget_block>.cke_widget_element{' +
                    'display:block!important;' +
                '}' +
                'span.cms-ckeditor-plugin-label{' +
                    'display: inline-block !important;' +
                    'padding-left: 8px;' +
                    'padding-right: 8px;' +
                '}' +
                '.cms-ckeditor-plugin-label{' +
                    'background: black;' +
                    'color: white;' +
                    'text-align: center;' +
                    'border-radius: 3px;' +
                    'height: 24px;' +
                    'line-height: 24px;' +
                    'font-size: 14px !important;' +
                '}'
            );
        },

        init: function (editor) {
            this.addWidgetDefinition(editor);
        },

        afterInit: function (editor) {
            // Integrate with align commands (justify plugin).
            var integrate = alignCommandIntegrator(editor);

            ['left', 'right', 'center', 'block'].forEach(integrate);
        },

        addWidgetDefinition: function (editor) {
            editor.widgets.add('cmswidget', {
                button: 'CMS Plugin',

                template:
                    '<cms-plugin style="unset: all">' +
                    '</cms-plugin>',

                allowedContent: 'cms-plugin',
                disallowedContent: 'cms-plugin{float}',

                requiredContent: 'cms-plugin',

                upcast: function (element) {
                    return element.name === 'cms-plugin';
                },

                init: function () {
                    var contents = $(this.element.$).children();
                    var displayProp = contents.css('display');

                    if (displayProp !== 'inline' && displayProp !== 'inline-block') {
                        this.wrapper.addClass('cke_widget_wrapper_force_block');
                    }
                }
            });
        }
    });
})(CMS.$);

(function ($) {
if (CKEDITOR && CKEDITOR.plugins && CKEDITOR.plugins.registered && CKEDITOR.plugins.registered.cmsdialog) {
    return;
}
/**
 * Modified version of the dialog plugin to support touch events.
 *
 * @license Copyright (c) 2003-2015, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or http://ckeditor.com/license
 */

/**
 * @fileOverview The floating dialog plugin.
 */

/**
 * No resize for this dialog.
 *
 * @readonly
 * @property {Number} [=0]
 * @member CKEDITOR
 */
CKEDITOR.DIALOG_RESIZE_NONE = 0;

/**
 * Only allow horizontal resizing for this dialog, disable vertical resizing.
 *
 * @readonly
 * @property {Number} [=1]
 * @member CKEDITOR
 */
CKEDITOR.DIALOG_RESIZE_WIDTH = 1;

/**
 * Only allow vertical resizing for this dialog, disable horizontal resizing.
 *
 * @readonly
 * @property {Number} [=2]
 * @member CKEDITOR
 */
CKEDITOR.DIALOG_RESIZE_HEIGHT = 2;

/**
 * Allow the dialog to be resized in both directions.
 *
 * @readonly
 * @property {Number} [=3]
 * @member CKEDITOR
 */
CKEDITOR.DIALOG_RESIZE_BOTH = 3;

/**
 * Dialog state when idle.
 *
 * @readonly
 * @property {Number} [=1]
 * @member CKEDITOR
 */
CKEDITOR.DIALOG_STATE_IDLE = 1;

/**
 * Dialog state when busy.
 *
 * @readonly
 * @property {Number} [=2]
 * @member CKEDITOR
 */
CKEDITOR.DIALOG_STATE_BUSY = 2;

( function() {
    var cssLength = CKEDITOR.tools.cssLength;

    function isTabVisible( tabId ) {
        return !!this._.tabs[ tabId ][ 0 ].$.offsetHeight;
    }

    function getPreviousVisibleTab() {
        var tabId = this._.currentTabId,
            length = this._.tabIdList.length,
            tabIndex = CKEDITOR.tools.indexOf( this._.tabIdList, tabId ) + length;

        for ( var i = tabIndex - 1; i > tabIndex - length; i-- ) {
            if ( isTabVisible.call( this, this._.tabIdList[ i % length ] ) )
                return this._.tabIdList[ i % length ];
        }

        return null;
    }

    function getNextVisibleTab() {
        var tabId = this._.currentTabId,
            length = this._.tabIdList.length,
            tabIndex = CKEDITOR.tools.indexOf( this._.tabIdList, tabId );

        for ( var i = tabIndex + 1; i < tabIndex + length; i++ ) {
            if ( isTabVisible.call( this, this._.tabIdList[ i % length ] ) )
                return this._.tabIdList[ i % length ];
        }

        return null;
    }


    function clearOrRecoverTextInputValue( container, isRecover ) {
        var inputs = container.$.getElementsByTagName( 'input' );
        for ( var i = 0, length = inputs.length; i < length; i++ ) {
            var item = new CKEDITOR.dom.element( inputs[ i ] );

            if ( item.getAttribute( 'type' ).toLowerCase() == 'text' ) {
                if ( isRecover ) {
                    item.setAttribute( 'value', item.getCustomData( 'fake_value' ) || '' );
                    item.removeCustomData( 'fake_value' );
                } else {
                    item.setCustomData( 'fake_value', item.getAttribute( 'value' ) );
                    item.setAttribute( 'value', '' );
                }
            }
        }
    }

    // Handle dialog element validation state UI changes.
    function handleFieldValidated( isValid, msg ) {
        var input = this.getInputElement();
        if ( input )
            isValid ? input.removeAttribute( 'aria-invalid' ) : input.setAttribute( 'aria-invalid', true );

        if ( !isValid ) {
            if ( this.select )
                this.select();
            else
                this.focus();
        }

        msg && alert( msg ); // jshint ignore:line

        this.fire( 'validated', { valid: isValid, msg: msg } );
    }

    function resetField() {
        var input = this.getInputElement();
        input && input.removeAttribute( 'aria-invalid' );
    }

    var templateSource = '<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}' +
        '" dir="{langDir}"' +
        ' lang="{langCode}"' +
        ' role="dialog"' +
        ' aria-labelledby="cke_dialog_title_{id}"' +
        '>' +
        '<table class="cke_dialog ' + CKEDITOR.env.cssClass + ' cke_{langDir}"' +
            ' style="position:absolute" role="presentation">' +
            '<tr><td role="presentation">' +
            '<div class="cke_dialog_body" role="presentation">' +
                '<div id="cke_dialog_title_{id}" class="cke_dialog_title cms-ckeditor-dialog-title" role="presentation"></div>' +
                '<a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a>' +
                '<div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div>' +
                '<table class="cke_dialog_contents" role="presentation">' +
                '<tr>' +
                    '<td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td>' +
                '</tr>' +
                '<tr>' +
                    '<td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td>' +
                '</tr>' +
                '</table>' +
            '</div>' +
            '</td></tr>' +
        '</table>' +
        '</div>';

    function buildDialog( editor ) {
        var element = CKEDITOR.dom.element.createFromHtml( CKEDITOR.addTemplate( 'dialog', templateSource ).output( {
            id: CKEDITOR.tools.getNextNumber(),
            editorId: editor.id,
            langDir: editor.lang.dir,
            langCode: editor.langCode,
            editorDialogClass: 'cke_editor_' + editor.name.replace( /\./g, '\\.' ) + '_dialog',
            closeTitle: editor.lang.common.close,
            hidpi: CKEDITOR.env.hidpi ? 'cke_hidpi' : ''
        } ) );

        // TODO: Change this to getById(), so it'll support custom templates.
        var body = element.getChild( [ 0, 0, 0, 0, 0 ] ),
            title = body.getChild( 0 ),
            close = body.getChild( 1 );

        // Don't allow dragging on dialog (#13184).
        // editor.plugins.clipboard && CKEDITOR.plugins.clipboard.preventDefaultDropOnElement( body );

        // IFrame shim for dialog that masks activeX in IE. (#7619)
        if ( CKEDITOR.env.ie && !CKEDITOR.env.quirks && !CKEDITOR.env.edge ) {
            var src = 'javascript:void(function(){' + encodeURIComponent( 'document.open();(' + CKEDITOR.tools.fixDomain + ')();document.close();' ) + '}())', // jshint ignore:line
                iframe = CKEDITOR.dom.element.createFromHtml( '<iframe' +
                    ' frameBorder="0"' +
                    ' class="cke_iframe_shim"' +
                    ' src="' + src + '"' +
                    ' tabIndex="-1"' +
                    '></iframe>' );
            iframe.appendTo( body.getParent() );
        }

        // Make the Title and Close Button unselectable.
        title.unselectable();
        close.unselectable();

        return {
            element: element,
            parts: {
                dialog: element.getChild( 0 ),
                title: title,
                close: close,
                tabs: body.getChild( 2 ),
                contents: body.getChild( [ 3, 0, 0, 0 ] ),
                footer: body.getChild( [ 3, 0, 1, 0 ] )
            }
        };
    }

    /**
     * This is the base class for runtime dialog objects. An instance of this
     * class represents a single named dialog for a single editor instance.
     *
     *        var dialogObj = new CKEDITOR.dialog( editor, 'smiley' );
     *
     * @class
     * @constructor Creates a dialog class instance.
     * @param {Object} editor The editor which created the dialog.
     * @param {String} dialogName The dialog's registered name.
     */
    CKEDITOR.dialog = function( editor, dialogName ) {
        // Load the dialog definition.
        var definition = CKEDITOR.dialog._.dialogDefinitions[ dialogName ],
            defaultDefinition = CKEDITOR.tools.clone( defaultDialogDefinition ),
            buttonsOrder = editor.config.dialog_buttonsOrder || 'OS',
            dir = editor.lang.dir,
            tabsToRemove = {},
            i, processed, stopPropagation;

        if ( ( buttonsOrder == 'OS' && CKEDITOR.env.mac ) || // The buttons in MacOS Apps are in reverse order (#4750)
        ( buttonsOrder == 'rtl' && dir == 'ltr' ) || ( buttonsOrder == 'ltr' && dir == 'rtl' ) )
            defaultDefinition.buttons.reverse();


        // Completes the definition with the default values.
        definition = CKEDITOR.tools.extend( definition( editor ), defaultDefinition );

        // Clone a functionally independent copy for this dialog.
        definition = CKEDITOR.tools.clone( definition );

        // Create a complex definition object, extending it with the API
        // functions.
        definition = new definitionObject( this, definition );

        var themeBuilt = buildDialog( editor );

        // Initialize some basic parameters.
        this._ = {
            editor: editor,
            element: themeBuilt.element,
            name: dialogName,
            contentSize: { width: 0, height: 0 },
            size: { width: 0, height: 0 },
            contents: {},
            buttons: {},
            accessKeyMap: {},

            // Initialize the tab and page map.
            tabs: {},
            tabIdList: [],
            currentTabId: null,
            currentTabIndex: null,
            pageCount: 0,
            lastTab: null,
            tabBarMode: false,

            // Initialize the tab order array for input widgets.
            focusList: [],
            currentFocusIndex: 0,
            hasFocus: false
        };

        this.parts = themeBuilt.parts;

        CKEDITOR.tools.setTimeout( function() {
            editor.fire( 'ariaWidget', this.parts.contents );
        }, 0, this );

        // Set the startup styles for the dialog, avoiding it enlarging the
        // page size on the dialog creation.
        var startStyles = {
            position: CKEDITOR.env.ie6Compat ? 'absolute' : 'fixed',
            top: 0,
            visibility: 'hidden'
        };

        startStyles[ dir == 'rtl' ? 'right' : 'left' ] = 0;
        this.parts.dialog.setStyles( startStyles );


        // Call the CKEDITOR.event constructor to initialize this instance.
        CKEDITOR.event.call( this );

        // Fire the "dialogDefinition" event, making it possible to customize
        // the dialog definition.
        this.definition = definition = CKEDITOR.fire( 'dialogDefinition', {
            name: dialogName,
            definition: definition
        }, editor ).definition;

        // Cache tabs that should be removed.
        if ( !( 'removeDialogTabs' in editor._ ) && editor.config.removeDialogTabs ) {
            var removeContents = editor.config.removeDialogTabs.split( ';' );

            for ( i = 0; i < removeContents.length; i++ ) {
                var parts = removeContents[ i ].split( ':' );
                if ( parts.length == 2 ) {
                    var removeDialogName = parts[ 0 ];
                    if ( !tabsToRemove[ removeDialogName ] )
                        tabsToRemove[ removeDialogName ] = [];
                    tabsToRemove[ removeDialogName ].push( parts[ 1 ] );
                }
            }
            editor._.removeDialogTabs = tabsToRemove;
        }

        // Remove tabs of this dialog.
        if ( editor._.removeDialogTabs && ( tabsToRemove = editor._.removeDialogTabs[ dialogName ] ) ) {
            for ( i = 0; i < tabsToRemove.length; i++ )
                definition.removeContents( tabsToRemove[ i ] );
        }

        // Initialize load, show, hide, ok and cancel events.
        if ( definition.onLoad )
            this.on( 'load', definition.onLoad );

        if ( definition.onShow )
            this.on( 'show', definition.onShow );

        if ( definition.onHide )
            this.on( 'hide', definition.onHide );

        if ( definition.onOk ) {
            this.on( 'ok', function( evt ) {
                // Dialog confirm might probably introduce content changes (#5415).
                editor.fire( 'saveSnapshot' );
                setTimeout( function() {
                    editor.fire( 'saveSnapshot' );
                }, 0 );
                if ( definition.onOk.call( this, evt ) === false )
                    evt.data.hide = false;
            } );
        }

        // Set default dialog state.
        this.state = CKEDITOR.DIALOG_STATE_IDLE;

        if ( definition.onCancel ) {
            this.on( 'cancel', function( evt ) {
                if ( definition.onCancel.call( this, evt ) === false )
                    evt.data.hide = false;
            } );
        }

        var me = this;

        // Iterates over all items inside all content in the dialog, calling a
        // function for each of them.
        var iterContents = function( func ) {
                var contents = me._.contents,
                    stop = false;

                for ( var i in contents ) {
                    for ( var j in contents[ i ] ) {
                        stop = func.call( this, contents[ i ][ j ] );
                        if ( stop )
                            return;
                    }
                }
            };

        this.on( 'ok', function( evt ) {
            iterContents( function( item ) {
                if ( item.validate ) {
                    var retval = item.validate( this ),
                        invalid = ( typeof retval == 'string' ) || retval === false;

                    if ( invalid ) {
                        evt.data.hide = false;
                        evt.stop();
                    }

                    handleFieldValidated.call( item, !invalid, typeof retval == 'string' ? retval : undefined );
                    return invalid;
                }
            } );
        }, this, null, 0 );

        this.on( 'cancel', function( evt ) {
            iterContents( function( item ) {
                if ( item.isChanged() ) {
                    if ( !editor.config.dialog_noConfirmCancel && !confirm( editor.lang.common.confirmCancel ) ) // jshint ignore:line
                        evt.data.hide = false;
                    return true;
                }
            } );
        }, this, null, 0 );

        this.parts.close.on( 'click', function( evt ) {
            if ( this.fire( 'cancel', { hide: true } ).hide !== false )
                this.hide();
            evt.data.preventDefault();
        }, this );

        // Sort focus list according to tab order definitions.
        function setupFocus() {
            var focusList = me._.focusList;
            focusList.sort( function( a, b ) {
                // Mimics browser tab order logics;
                if ( a.tabIndex != b.tabIndex )
                    return b.tabIndex - a.tabIndex;
                //  Sort is not stable in some browsers,
                // fall-back the comparator to 'focusIndex';
                else
                    return a.focusIndex - b.focusIndex;
            } );

            var size = focusList.length;
            for ( var i = 0; i < size; i++ )
                focusList[ i ].focusIndex = i;
        }

        // Expects 1 or -1 as an offset, meaning direction of the offset change.
        function changeFocus( offset ) {
            var focusList = me._.focusList;
            offset = offset || 0;

            if ( focusList.length < 1 )
                return;

            var startIndex = me._.currentFocusIndex;

            if ( me._.tabBarMode && offset < 0 ) {
                // If we are in tab mode, we need to mimic that we started tabbing back from the first
                // focusList (so it will go to the last one).
                startIndex = 0;
            }

            // Trigger the 'blur' event of  any input element before anything,
            // since certain UI updates may depend on it.
            try {
                focusList[ startIndex ].getInputElement().$.blur();
            } catch ( e ) {}

            var currentIndex = startIndex,
                hasTabs = me._.pageCount > 1;

            do {
                currentIndex = currentIndex + offset;

                if ( hasTabs && !me._.tabBarMode && ( currentIndex == focusList.length || currentIndex == -1 ) ) {
                    // If the dialog was not in tab mode, then focus the first tab (#13027).
                    me._.tabBarMode = true;
                    me._.tabs[ me._.currentTabId ][ 0 ].focus();
                    me._.currentFocusIndex = -1;

                    // Early return, in order to avoid accessing focusList[ -1 ].
                    return;
                }

                currentIndex = ( currentIndex + focusList.length ) % focusList.length;

                if ( currentIndex == startIndex ) {
                    break;
                }
            } while ( offset && !focusList[ currentIndex ].isFocusable() );

            focusList[ currentIndex ].focus();

            // Select whole field content.
            if ( focusList[ currentIndex ].type == 'text' )
                focusList[ currentIndex ].select();
        }

        this.changeFocus = changeFocus;


        function keydownHandler( evt ) {
            // If I'm not the top dialog, ignore.
            if ( me != CKEDITOR.dialog._.currentTop )
                return;

            var keystroke = evt.data.getKeystroke(),
                rtl = editor.lang.dir == 'rtl',
                arrowKeys = [ 37, 38, 39, 40 ],
                button;

            processed = stopPropagation = 0;

            if ( keystroke == 9 || keystroke == CKEDITOR.SHIFT + 9 ) {
                var shiftPressed = ( keystroke == CKEDITOR.SHIFT + 9 );
                changeFocus( shiftPressed ? -1 : 1 );
                processed = 1;
            } else if ( keystroke == CKEDITOR.ALT + 121 && !me._.tabBarMode && me.getPageCount() > 1 ) {
                // Alt-F10 puts focus into the current tab item in the tab bar.
                me._.tabBarMode = true;
                me._.tabs[ me._.currentTabId ][ 0 ].focus();
                me._.currentFocusIndex = -1;
                processed = 1;
            } else if ( CKEDITOR.tools.indexOf( arrowKeys, keystroke ) != -1 && me._.tabBarMode ) {
                // Array with key codes that activate previous tab.
                var prevKeyCodes = [
                        // Depending on the lang dir: right or left key
                        rtl ? 39 : 37,
                        // Top/bot arrow: actually for both cases it's the same.
                        38
                    ],
                    nextId = CKEDITOR.tools.indexOf( prevKeyCodes, keystroke ) != -1 ? getPreviousVisibleTab.call( me ) : getNextVisibleTab.call( me );

                me.selectPage( nextId );
                me._.tabs[ nextId ][ 0 ].focus();
                processed = 1;
            } else if ( ( keystroke == 13 || keystroke == 32 ) && me._.tabBarMode ) {
                this.selectPage( this._.currentTabId );
                this._.tabBarMode = false;
                this._.currentFocusIndex = -1;
                changeFocus( 1 );
                processed = 1;
            }
            // If user presses enter key in a text box, it implies clicking OK for the dialog.
            else if ( keystroke == 13 /*ENTER*/ ) {
                // Don't do that for a target that handles ENTER.
                var target = evt.data.getTarget();
                if ( !target.is( 'a', 'button', 'select', 'textarea' ) && ( !target.is( 'input' ) || target.$.type != 'button' ) ) {
                    button = this.getButton( 'ok' );
                    button && CKEDITOR.tools.setTimeout( button.click, 0, button );
                    processed = 1;
                }
                stopPropagation = 1; // Always block the propagation (#4269)
            } else if ( keystroke == 27 /*ESC*/ ) {
                button = this.getButton( 'cancel' );

                // If there's a Cancel button, click it, else just fire the cancel event and hide the dialog.
                if ( button )
                    CKEDITOR.tools.setTimeout( button.click, 0, button );
                else {
                    if ( this.fire( 'cancel', { hide: true } ).hide !== false )
                        this.hide();
                }
                stopPropagation = 1; // Always block the propagation (#4269)
            } else {
                return;
            }

            keypressHandler( evt );
        }

        function keypressHandler( evt ) {
            if ( processed )
                evt.data.preventDefault( 1 );
            else if ( stopPropagation )
                evt.data.stopPropagation();
        }

        var dialogElement = this._.element;

        editor.focusManager.add( dialogElement, 1 );

        // Add the dialog keyboard handlers.
        this.on( 'show', function() {
            dialogElement.on( 'keydown', keydownHandler, this );

            // Some browsers instead, don't cancel key events in the keydown, but in the
            // keypress. So we must do a longer trip in those cases. (#4531,#8985)
            if ( CKEDITOR.env.gecko )
                dialogElement.on( 'keypress', keypressHandler, this );

        } );
        this.on( 'hide', function() {
            dialogElement.removeListener( 'keydown', keydownHandler );
            if ( CKEDITOR.env.gecko )
                dialogElement.removeListener( 'keypress', keypressHandler );

            // Reset fields state when closing dialog.
            iterContents( function( item ) {
                resetField.apply( item );
            } );
        } );
        this.on( 'iframeAdded', function( evt ) {
            var doc = new CKEDITOR.dom.document( evt.data.iframe.$.contentWindow.document );
            doc.on( 'keydown', keydownHandler, this, null, 0 );
        } );

        // Auto-focus logic in dialog.
        this.on( 'show', function() {
            // Setup tabIndex on showing the dialog instead of on loading
            // to allow dynamic tab order happen in dialog definition.
            setupFocus();

            var hasTabs = me._.pageCount > 1;

            if ( editor.config.dialog_startupFocusTab && hasTabs ) {
                me._.tabBarMode = true;
                me._.tabs[ me._.currentTabId ][ 0 ].focus();
                me._.currentFocusIndex = -1;
            } else if ( !this._.hasFocus ) {
                // http://dev.ckeditor.com/ticket/13114#comment:4.
                this._.currentFocusIndex = hasTabs ? -1 : this._.focusList.length - 1;

                // Decide where to put the initial focus.
                if ( definition.onFocus ) {
                    var initialFocus = definition.onFocus.call( this );
                    // Focus the field that the user specified.
                    initialFocus && initialFocus.focus();
                }
                // Focus the first field in layout order.
                else {
                    changeFocus( 1 );
                }
            }
        }, this, null, 0xffffffff );

        // IE6 BUG: Text fields and text areas are only half-rendered the first time the dialog appears in IE6 (#2661).
        // This is still needed after [2708] and [2709] because text fields in hidden TR tags are still broken.
        if ( CKEDITOR.env.ie6Compat ) {
            this.on( 'load', function() {
                var outer = this.getElement(),
                    inner = outer.getFirst();
                inner.remove();
                inner.appendTo( outer );
            }, this );
        }

        initDragAndDrop( this );
        initResizeHandles( this );

        // Insert the title.
        ( new CKEDITOR.dom.text( definition.title, CKEDITOR.document ) ).appendTo( this.parts.title );

        // Insert the tabs and contents.
        for ( i = 0; i < definition.contents.length; i++ ) {
            var page = definition.contents[ i ];
            page && this.addPage( page );
        }

        this.parts.tabs.on( 'click', function( evt ) {
            var target = evt.data.getTarget();
            // If we aren't inside a tab, bail out.
            if ( target.hasClass( 'cke_dialog_tab' ) ) {
                // Get the ID of the tab, without the 'cke_' prefix and the unique number suffix.
                var id = target.$.id;
                this.selectPage( id.substring( 4, id.lastIndexOf( '_' ) ) );

                if ( this._.tabBarMode ) {
                    this._.tabBarMode = false;
                    this._.currentFocusIndex = -1;
                    changeFocus( 1 );
                }
                evt.data.preventDefault();
            }
        }, this );

        // Insert buttons.
        var buttonsHtml = [],
            buttons = CKEDITOR.dialog._.uiElementBuilders.hbox.build( this, {
                type: 'hbox',
                className: 'cke_dialog_footer_buttons',
                widths: [],
                children: definition.buttons
            }, buttonsHtml ).getChild();
        this.parts.footer.setHtml( buttonsHtml.join( '' ) );

        for ( i = 0; i < buttons.length; i++ )
            this._.buttons[ buttons[ i ].id ] = buttons[ i ];

        /**
         * Current state of the dialog. Use the {@link #setState} method to update it.
         * See the {@link #event-state} event to know more.
         *
         * @readonly
         * @property {Number} [state=CKEDITOR.DIALOG_STATE_IDLE]
         */
    };

    // Focusable interface. Use it via dialog.addFocusable.
    function Focusable( dialog, element, index ) {
        this.element = element;
        this.focusIndex = index;
        // TODO: support tabIndex for focusables.
        this.tabIndex = 0;
        this.isFocusable = function() {
            return !element.getAttribute( 'disabled' ) && element.isVisible();
        };
        this.focus = function() {
            dialog._.currentFocusIndex = this.focusIndex;
            this.element.focus();
        };
        // Bind events
        element.on( 'keydown', function( e ) {
            if ( e.data.getKeystroke() in { 32: 1, 13: 1 } )
                this.fire( 'click' );
        } );
        element.on( 'focus', function() {
            this.fire( 'mouseover' );
        } );
        element.on( 'blur', function() {
            this.fire( 'mouseout' );
        } );
    }

    // Re-layout the dialog on window resize.
    function resizeWithWindow( dialog ) {
        var win = CKEDITOR.document.getWindow();
        function resizeHandler() {
            dialog.layout();
        }
        win.on( 'resize', resizeHandler );
        dialog.on( 'hide', function() {
            win.removeListener( 'resize', resizeHandler );
        } );
    }

    CKEDITOR.dialog.prototype = {
        destroy: function() {
            this.hide();
            this._.element.remove();
        },

        /**
         * Resizes the dialog.
         *
         *        dialogObj.resize( 800, 640 );
         *
         * @method
         * @param {Number} width The width of the dialog in pixels.
         * @param {Number} height The height of the dialog in pixels.
         */
        resize: ( function() {
            return function( width, height ) {
                if ( this._.contentSize && this._.contentSize.width == width && this._.contentSize.height == height )
                    return;

                CKEDITOR.dialog.fire( 'resize', {
                    dialog: this,
                    width: width,
                    height: height
                }, this._.editor );

                this.fire( 'resize', {
                    width: width,
                    height: height
                }, this._.editor );

                var contents = this.parts.contents;
                contents.setStyles( {
                    width: width + 'px',
                    height: height + 'px'
                } );

                // Update dialog position when dimension get changed in RTL.
                if ( this._.editor.lang.dir == 'rtl' && this._.position )
                    this._.position.x = CKEDITOR.document.getWindow().getViewPaneSize().width - this._.contentSize.width - parseInt( this._.element.getFirst().getStyle( 'right' ), 10 );

                this._.contentSize = { width: width, height: height };
            };
        } )(),

        /**
         * Gets the current size of the dialog in pixels.
         *
         * var width = dialogObj.getSize().width;
         *
         * @returns {Object}
         * @returns {Number} return.width
         * @returns {Number} return.height
         */
        getSize: function() {
            var element = this._.element.getFirst();
            return { width: element.$.offsetWidth || 0, height: element.$.offsetHeight || 0 };
        },

        /**
         * Moves the dialog to an `(x, y)` coordinate relative to the window.
         *
         * dialogObj.move( 10, 40 );
         *
         * @method
         * @param {Number} x The target x-coordinate.
         * @param {Number} y The target y-coordinate.
         * @param {Boolean} save Flag indicate whether the dialog position should be remembered on next open up.
         */
        move: function( x, y, save ) {

            // The dialog may be fixed positioned or absolute positioned. Ask the
            // browser what is the current situation first.
            var element = this._.element.getFirst(), rtl = this._.editor.lang.dir == 'rtl';
            var isFixed = element.getComputedStyle( 'position' ) == 'fixed';

            // (#8888) In some cases of a very small viewport, dialog is incorrectly
            // positioned in IE7. It also happens that it remains sticky and user cannot
            // scroll down/up to reveal dialog's content below/above the viewport; this is
            // cumbersome.
            // The only way to fix this is to move mouse out of the browser and
            // go back to see that dialog position is automagically fixed. No events,
            // no style change - pure magic. This is a IE7 rendering issue, which can be
            // fixed with dummy style redraw on each move.
            if ( CKEDITOR.env.ie )
                element.setStyle( 'zoom', '100%' );

            if ( isFixed && this._.position && this._.position.x == x && this._.position.y == y )
                return;

            // Save the current position.
            this._.position = { x: x, y: y };

            // If not fixed positioned, add scroll position to the coordinates.
            if ( !isFixed ) {
                var scrollPosition = CKEDITOR.document.getWindow().getScrollPosition();
                x += scrollPosition.x;
                y += scrollPosition.y;
            }

            // Translate coordinate for RTL.
            if ( rtl ) {
                var dialogSize = this.getSize(), viewPaneSize = CKEDITOR.document.getWindow().getViewPaneSize();
                x = viewPaneSize.width - dialogSize.width - x;
            }

            var styles = { 'top': ( y > 0 ? y : 0 ) + 'px' };
            styles[ rtl ? 'right' : 'left' ] = ( x > 0 ? x : 0 ) + 'px';

            element.setStyles( styles );

            save && ( this._.moved = 1 );
        },

        /**
         * Gets the dialog's position in the window.
         *
         *        var dialogX = dialogObj.getPosition().x;
         *
         * @returns {Object}
         * @returns {Number} return.x
         * @returns {Number} return.y
         */
        getPosition: function() {
            return CKEDITOR.tools.extend( {}, this._.position );
        },

        /**
         * Shows the dialog box.
         *
         *        dialogObj.show();
         */
        show: function() {
            // Insert the dialog's element to the root document.
            var element = this._.element;
            var definition = this.definition;
            if ( !( element.getParent() && element.getParent().equals( CKEDITOR.document.getBody() ) ) )
                element.appendTo( CKEDITOR.document.getBody() );
            else
                element.setStyle( 'display', 'block' );

            // First, set the dialog to an appropriate size.
            this.resize(
                this._.contentSize && this._.contentSize.width || definition.width || definition.minWidth,
                this._.contentSize && this._.contentSize.height || definition.height || definition.minHeight
            );

            // Reset all inputs back to their default value.
            this.reset();

            // Select the first tab by default.
            this.selectPage( this.definition.contents[ 0 ].id );

            // Set z-index.
            if ( CKEDITOR.dialog._.currentZIndex === null )
                CKEDITOR.dialog._.currentZIndex = this._.editor.config.baseFloatZIndex;
            this._.element.getFirst().setStyle( 'z-index', CKEDITOR.dialog._.currentZIndex += 10 );

            // Maintain the dialog ordering and dialog cover.
            if ( CKEDITOR.dialog._.currentTop === null ) {
                CKEDITOR.dialog._.currentTop = this;
                this._.parentDialog = null;
                showCover( this._.editor );

            } else {
                this._.parentDialog = CKEDITOR.dialog._.currentTop;
                var parentElement = this._.parentDialog.getElement().getFirst();
                parentElement.$.style.zIndex -= Math.floor( this._.editor.config.baseFloatZIndex / 2 );
                CKEDITOR.dialog._.currentTop = this;
            }

            element.on( 'keydown', accessKeyDownHandler );
            element.on( 'keyup', accessKeyUpHandler );

            // Reset the hasFocus state.
            this._.hasFocus = false;

            for ( var i in definition.contents ) {
                if ( !definition.contents[ i ] )
                    continue;

                var content = definition.contents[ i ],
                    tab = this._.tabs[ content.id ],
                    requiredContent = content.requiredContent,
                    enableElements = 0;

                if ( !tab )
                    continue;

                for ( var j in this._.contents[ content.id ] ) {
                    var elem = this._.contents[ content.id ][ j ];

                    if ( elem.type == 'hbox' || elem.type == 'vbox' || !elem.getInputElement() )
                        continue;

                    if ( elem.requiredContent && !this._.editor.activeFilter.check( elem.requiredContent ) )
                        elem.disable();
                    else {
                        elem.enable();
                        enableElements++;
                    }
                }

                if ( !enableElements || ( requiredContent && !this._.editor.activeFilter.check( requiredContent ) ) )
                    tab[ 0 ].addClass( 'cke_dialog_tab_disabled' );
                else
                    tab[ 0 ].removeClass( 'cke_dialog_tab_disabled' );
            }

            CKEDITOR.tools.setTimeout( function() {
                this.layout();
                resizeWithWindow( this );

                this.parts.dialog.setStyle( 'visibility', '' );

                // Execute onLoad for the first show.
                this.fireOnce( 'load', {} );
                CKEDITOR.ui.fire( 'ready', this );

                this.fire( 'show', {} );
                this._.editor.fire( 'dialogShow', this );

                if ( !this._.parentDialog )
                    this._.editor.focusManager.lock();

                // Save the initial values of the dialog.
                this.foreach( function( contentObj ) {
                    contentObj.setInitValue && contentObj.setInitValue();
                } );

            }, 100, this );
        },

        /**
         * Rearrange the dialog to its previous position or the middle of the window.
         *
         * @since 3.5
         */
        layout: function() {
            var el = this.parts.dialog;
            var dialogSize = this.getSize();
            var win = CKEDITOR.document.getWindow(),
                    viewSize = win.getViewPaneSize();

            var posX = ( viewSize.width - dialogSize.width ) / 2,
                posY = ( viewSize.height - dialogSize.height ) / 2;

            // Switch to absolute position when viewport is smaller than dialog size.
            if ( !CKEDITOR.env.ie6Compat ) {
                if ( dialogSize.height + ( posY > 0 ? posY : 0 ) > viewSize.height || dialogSize.width + ( posX > 0 ? posX : 0 ) > viewSize.width ) {
                    el.setStyle( 'position', 'absolute' );
                } else {
                    el.setStyle( 'position', 'fixed' );
                }
            }

            this.move( this._.moved ? this._.position.x : posX, this._.moved ? this._.position.y : posY );
        },

        /**
         * Executes a function for each UI element.
         *
         * @param {Function} fn Function to execute for each UI element.
         * @returns {CKEDITOR.dialog} The current dialog object.
         */
        foreach: function( fn ) {
            for ( var i in this._.contents ) {
                for ( var j in this._.contents[ i ] ) {
                    fn.call( this, this._.contents[i][j] );
                }
            }

            return this;
        },

        /**
         * Resets all input values in the dialog.
         *
         *        dialogObj.reset();
         *
         * @method
         * @chainable
         */
        reset: ( function() {
            var fn = function( widget ) {
                    if ( widget.reset )
                        widget.reset( 1 );
                };
            return function() {
                this.foreach( fn );
                return this;
            };
        } )(),


        /**
         * Calls the {@link CKEDITOR.dialog.definition.uiElement#setup} method of each
         * of the UI elements, with the arguments passed through it.
         * It is usually being called when the dialog is opened, to put the initial value inside the field.
         *
         *        dialogObj.setupContent();
         *
         *        var timestamp = ( new Date() ).valueOf();
         *        dialogObj.setupContent( timestamp );
         */
        setupContent: function() {
            var args = arguments;
            this.foreach( function( widget ) {
                if ( widget.setup )
                    widget.setup.apply( widget, args );
            } );
        },

        /**
         * Calls the {@link CKEDITOR.dialog.definition.uiElement#commit} method of each
         * of the UI elements, with the arguments passed through it.
         * It is usually being called when the user confirms the dialog, to process the values.
         *
         *        dialogObj.commitContent();
         *
         *        var timestamp = ( new Date() ).valueOf();
         *        dialogObj.commitContent( timestamp );
         */
        commitContent: function() {
            var args = arguments;
            this.foreach( function( widget ) {
                // Make sure IE triggers "change" event on last focused input before closing the dialog. (#7915)
                if ( CKEDITOR.env.ie && this._.currentFocusIndex == widget.focusIndex )
                    widget.getInputElement().$.blur();

                if ( widget.commit )
                    widget.commit.apply( widget, args );
            } );
        },

        /**
         * Hides the dialog box.
         *
         *        dialogObj.hide();
         */
        hide: function() {
            if ( !this.parts.dialog.isVisible() )
                return;

            this.fire( 'hide', {} );
            this._.editor.fire( 'dialogHide', this );
            // Reset the tab page.
            this.selectPage( this._.tabIdList[ 0 ] );
            var element = this._.element;
            element.setStyle( 'display', 'none' );
            this.parts.dialog.setStyle( 'visibility', 'hidden' );
            // Unregister all access keys associated with this dialog.
            unregisterAccessKey( this );

            // Close any child(top) dialogs first.
            while ( CKEDITOR.dialog._.currentTop != this )
                CKEDITOR.dialog._.currentTop.hide();

            // Maintain dialog ordering and remove cover if needed.
            if ( !this._.parentDialog )
                hideCover( this._.editor );
            else {
                var parentElement = this._.parentDialog.getElement().getFirst();
                parentElement.setStyle( 'z-index', parseInt( parentElement.$.style.zIndex, 10 ) + Math.floor( this._.editor.config.baseFloatZIndex / 2 ) );
            }
            CKEDITOR.dialog._.currentTop = this._.parentDialog;

            // Deduct or clear the z-index.
            if ( !this._.parentDialog ) {
                CKEDITOR.dialog._.currentZIndex = null;

                // Remove access key handlers.
                element.removeListener( 'keydown', accessKeyDownHandler );
                element.removeListener( 'keyup', accessKeyUpHandler );

                var editor = this._.editor;
                editor.focus();

                // Give a while before unlock, waiting for focus to return to the editable. (#172)
                setTimeout( function() {
                    editor.focusManager.unlock();

                    // Fixed iOS focus issue (#12381).
                    // Keep in mind that editor.focus() does not work in this case.
                    if ( CKEDITOR.env.iOS ) {
                        editor.window.focus();
                    }
                }, 0 );

            } else {
                CKEDITOR.dialog._.currentZIndex -= 10;
            }

            delete this._.parentDialog;
            // Reset the initial values of the dialog.
            this.foreach( function( contentObj ) {
                contentObj.resetInitValue && contentObj.resetInitValue();
            } );

            // Reset dialog state back to IDLE, if busy (#13213).
            this.setState( CKEDITOR.DIALOG_STATE_IDLE );
        },

        /**
         * Adds a tabbed page into the dialog.
         *
         * @param {Object} contents Content definition.
         */
        addPage: function( contents ) {
            if ( contents.requiredContent && !this._.editor.filter.check( contents.requiredContent ) )
                return;

            var pageHtml = [],
                titleHtml = contents.label ? ' title="' + CKEDITOR.tools.htmlEncode( contents.label ) + '"' : '',
                vbox = CKEDITOR.dialog._.uiElementBuilders.vbox.build( this, {
                    type: 'vbox',
                    className: 'cke_dialog_page_contents',
                    children: contents.elements,
                    expand: !!contents.expand,
                    padding: contents.padding,
                    style: contents.style || 'width: 100%;'
                }, pageHtml );

            var contentMap = this._.contents[ contents.id ] = {},
                cursor,
                children = vbox.getChild(),
                enabledFields = 0;

            while ( ( cursor = children.shift() ) ) {
                // Count all allowed fields.
                if ( !cursor.notAllowed && cursor.type != 'hbox' && cursor.type != 'vbox' )
                    enabledFields++;

                contentMap[ cursor.id ] = cursor;
                if ( typeof cursor.getChild == 'function' )
                    children.push.apply( children, cursor.getChild() );
            }

            // If all fields are disabled (because they are not allowed) hide this tab.
            if ( !enabledFields )
                contents.hidden = true;

            // Create the HTML for the tab and the content block.
            var page = CKEDITOR.dom.element.createFromHtml( pageHtml.join( '' ) );
            page.setAttribute( 'role', 'tabpanel' );

            var env = CKEDITOR.env;
            var tabId = 'cke_' + contents.id + '_' + CKEDITOR.tools.getNextNumber(),
                tab = CKEDITOR.dom.element.createFromHtml( [
                    '<a class="cke_dialog_tab"',
                    ( this._.pageCount > 0 ? ' cke_last' : 'cke_first' ),
                    titleHtml,
                    ( !!contents.hidden ? ' style="display:none"' : '' ),
                    ' id="', tabId, '"',
                    env.gecko && !env.hc ? '' : ' href="javascript:void(0)"',
                    ' tabIndex="-1"',
                    ' hidefocus="true"',
                    ' role="tab">',
                    contents.label,
                    '</a>'
                ].join( '' ) );

            page.setAttribute( 'aria-labelledby', tabId );

            // Take records for the tabs and elements created.
            this._.tabs[ contents.id ] = [ tab, page ];
            this._.tabIdList.push( contents.id );
            !contents.hidden && this._.pageCount++;
            this._.lastTab = tab;
            this.updateStyle();

            // Attach the DOM nodes.

            page.setAttribute( 'name', contents.id );
            page.appendTo( this.parts.contents );

            tab.unselectable();
            this.parts.tabs.append( tab );

            // Add access key handlers if access key is defined.
            if ( contents.accessKey ) {
                registerAccessKey( this, this, 'CTRL+' + contents.accessKey, tabAccessKeyDown, tabAccessKeyUp );
                this._.accessKeyMap[ 'CTRL+' + contents.accessKey ] = contents.id;
            }
        },

        /**
         * Activates a tab page in the dialog by its id.
         *
         *        dialogObj.selectPage( 'tab_1' );
         *
         * @param {String} id The id of the dialog tab to be activated.
         */
        selectPage: function( id ) {
            if ( this._.currentTabId == id )
                return;

            if ( this._.tabs[ id ][ 0 ].hasClass( 'cke_dialog_tab_disabled' ) )
                return;

            // If event was canceled - do nothing.
            if ( this.fire( 'selectPage', { page: id, currentPage: this._.currentTabId } ) === false )
                return;

            // Hide the non-selected tabs and pages.
            for ( var i in this._.tabs ) {
                var tab = this._.tabs[ i ][ 0 ],
                    page = this._.tabs[ i ][ 1 ];
                if ( i != id ) {
                    tab.removeClass( 'cke_dialog_tab_selected' );
                    page.hide();
                }
                page.setAttribute( 'aria-hidden', i != id );
            }

            var selected = this._.tabs[ id ];
            selected[ 0 ].addClass( 'cke_dialog_tab_selected' );

            // [IE] an invisible input[type='text'] will enlarge it's width
            // if it's value is long when it shows, so we clear it's value
            // before it shows and then recover it (#5649)
            if ( CKEDITOR.env.ie6Compat || CKEDITOR.env.ie7Compat ) {
                clearOrRecoverTextInputValue( selected[ 1 ] );
                selected[ 1 ].show();
                setTimeout( function() {
                    clearOrRecoverTextInputValue( selected[ 1 ], 1 );
                }, 0 );
            } else {
                selected[ 1 ].show();
            }

            this._.currentTabId = id;
            this._.currentTabIndex = CKEDITOR.tools.indexOf( this._.tabIdList, id );
        },

        /**
         * Dialog state-specific style updates.
         */
        updateStyle: function() {
            // If only a single page shown, a different style is used in the central pane.
            this.parts.dialog[ ( this._.pageCount === 1 ? 'add' : 'remove' ) + 'Class' ]( 'cke_single_page' );
        },

        /**
         * Hides a page's tab away from the dialog.
         *
         *        dialog.hidePage( 'tab_3' );
         *
         * @param {String} id The page's Id.
         */
        hidePage: function( id ) {
            var tab = this._.tabs[ id ] && this._.tabs[ id ][ 0 ];
            if ( !tab || this._.pageCount == 1 || !tab.isVisible() )
                return;
            // Switch to other tab first when we're hiding the active tab.
            else if ( id == this._.currentTabId )
                this.selectPage( getPreviousVisibleTab.call( this ) );

            tab.hide();
            this._.pageCount--;
            this.updateStyle();
        },

        /**
         * Unhides a page's tab.
         *
         *        dialog.showPage( 'tab_2' );
         *
         * @param {String} id The page's Id.
         */
        showPage: function( id ) {
            var tab = this._.tabs[ id ] && this._.tabs[ id ][ 0 ];
            if ( !tab )
                return;
            tab.show();
            this._.pageCount++;
            this.updateStyle();
        },

        /**
         * Gets the root DOM element of the dialog.
         *
         *        var dialogElement = dialogObj.getElement().getFirst();
         *        dialogElement.setStyle( 'padding', '5px' );
         *
         * @returns {CKEDITOR.dom.element} The `<span>` element containing this dialog.
         */
        getElement: function() {
            return this._.element;
        },

        /**
         * Gets the name of the dialog.
         *
         *        var dialogName = dialogObj.getName();
         *
         * @returns {String} The name of this dialog.
         */
        getName: function() {
            return this._.name;
        },

        /**
         * Gets a dialog UI element object from a dialog page.
         *
         *        dialogObj.getContentElement( 'tabId', 'elementId' ).setValue( 'Example' );
         *
         * @param {String} pageId id of dialog page.
         * @param {String} elementId id of UI element.
         * @returns {CKEDITOR.ui.dialog.uiElement} The dialog UI element.
         */
        getContentElement: function( pageId, elementId ) {
            var page = this._.contents[ pageId ];
            return page && page[ elementId ];
        },

        /**
         * Gets the value of a dialog UI element.
         *
         *        alert( dialogObj.getValueOf( 'tabId', 'elementId' ) );
         *
         * @param {String} pageId id of dialog page.
         * @param {String} elementId id of UI element.
         * @returns {Object} The value of the UI element.
         */
        getValueOf: function( pageId, elementId ) {
            return this.getContentElement( pageId, elementId ).getValue();
        },

        /**
         * Sets the value of a dialog UI element.
         *
         *        dialogObj.setValueOf( 'tabId', 'elementId', 'Example' );
         *
         * @param {String} pageId id of the dialog page.
         * @param {String} elementId id of the UI element.
         * @param {Object} value The new value of the UI element.
         */
        setValueOf: function( pageId, elementId, value ) {
            return this.getContentElement( pageId, elementId ).setValue( value );
        },

        /**
         * Gets the UI element of a button in the dialog's button row.
         *
         *        @returns {CKEDITOR.ui.dialog.button} The button object.
         *
         * @param {String} id The id of the button.
         */
        getButton: function( id ) {
            return this._.buttons[ id ];
        },

        /**
         * Simulates a click to a dialog button in the dialog's button row.
         *
         * @returns The return value of the dialog's `click` event.
         *
         * @param {String} id The id of the button.
         */
        click: function( id ) {
            return this._.buttons[ id ].click();
        },

        /**
         * Disables a dialog button.
         *
         * @param {String} id The id of the button.
         */
        disableButton: function( id ) {
            return this._.buttons[ id ].disable();
        },

        /**
         * Enables a dialog button.
         *
         * @param {String} id The id of the button.
         */
        enableButton: function( id ) {
            return this._.buttons[ id ].enable();
        },

        /**
         * Gets the number of pages in the dialog.
         *
         * @returns {Number} Page count.
         */
        getPageCount: function() {
            return this._.pageCount;
        },

        /**
         * Gets the editor instance which opened this dialog.
         *
         * @returns {CKEDITOR.editor} Parent editor instances.
         */
        getParentEditor: function() {
            return this._.editor;
        },

        /**
         * Gets the element that was selected when opening the dialog, if any.
         *
         * @returns {CKEDITOR.dom.element} The element that was selected, or `null`.
         */
        getSelectedElement: function() {
            return this.getParentEditor().getSelection().getSelectedElement();
        },

        /**
         * Adds element to dialog's focusable list.
         *
         * @param {CKEDITOR.dom.element} element
         * @param {Number} [index]
         */
        addFocusable: function( element, index ) {
            if ( typeof index == 'undefined' ) {
                index = this._.focusList.length;
                this._.focusList.push( new Focusable( this, element, index ) );
            } else {
                this._.focusList.splice( index, 0, new Focusable( this, element, index ) );
                for ( var i = index + 1; i < this._.focusList.length; i++ )
                    this._.focusList[ i ].focusIndex++;
            }
        },

        /**
         * Sets the dialog {@link #property-state}.
         *
         * @since 4.5
         * @param {Number} state Either {@link CKEDITOR#DIALOG_STATE_IDLE} or {@link CKEDITOR#DIALOG_STATE_BUSY}.
         */
        setState: function( state ) {
            var oldState = this.state;

            if ( oldState == state ) {
                return;
            }

            this.state = state;

            if ( state == CKEDITOR.DIALOG_STATE_BUSY ) {
                // Insert the spinner on demand.
                if ( !this.parts.spinner ) {
                    var dir = this.getParentEditor().lang.dir,
                        spinnerDef = {
                            attributes: {
                                'class': 'cke_dialog_spinner'
                            },
                            styles: {
                                'float': dir == 'rtl' ? 'right' : 'left'
                            }
                        };

                    spinnerDef.styles[ 'margin-' + ( dir == 'rtl' ? 'left' : 'right' ) ] = '8px';

                    this.parts.spinner = CKEDITOR.document.createElement( 'div', spinnerDef );

                    this.parts.spinner.setHtml( '&#8987;' );
                    this.parts.spinner.appendTo( this.parts.title, 1 );
                }

                // Finally, show the spinner.
                this.parts.spinner.show();

                this.getButton( 'ok' ).disable();
            } else if ( state == CKEDITOR.DIALOG_STATE_IDLE ) {
                // Hide the spinner. But don't do anything if there is no spinner yet.
                this.parts.spinner && this.parts.spinner.hide();

                this.getButton( 'ok' ).enable();
            }

            this.fire( 'state', state );
        }
    };

    CKEDITOR.tools.extend( CKEDITOR.dialog, {
        /**
         * Registers a dialog.
         *
         *        // Full sample plugin, which does not only register a dialog window but also adds an item to the context menu.
         *        // To open the dialog window, choose "Open dialog" in the context menu.
         *        CKEDITOR.plugins.add( 'myplugin', {
         *            init: function( editor ) {
         *                editor.addCommand( 'mydialog',new CKEDITOR.dialogCommand( 'mydialog' ) );
         *
         *                if ( editor.contextMenu ) {
         *                    editor.addMenuGroup( 'mygroup', 10 );
         *                    editor.addMenuItem( 'My Dialog', {
         *                        label: 'Open dialog',
         *                        command: 'mydialog',
         *                        group: 'mygroup'
         *                    } );
         *                    editor.contextMenu.addListener( function( element ) {
         *                        return { 'My Dialog': CKEDITOR.TRISTATE_OFF };
         *                    } );
         *                }
         *
         *                CKEDITOR.dialog.add( 'mydialog', function( api ) {
         *                    // CKEDITOR.dialog.definition
         *                    var dialogDefinition = {
         *                        title: 'Sample dialog',
         *                        minWidth: 390,
         *                        minHeight: 130,
         *                        contents: [
         *                            {
         *                                id: 'tab1',
         *                                label: 'Label',
         *                                title: 'Title',
         *                                expand: true,
         *                                padding: 0,
         *                                elements: [
         *                                    {
         *                                        type: 'html',
         *                                        html: '<p>This is some sample HTML content.</p>'
         *                                    },
         *                                    {
         *                                        type: 'textarea',
         *                                        id: 'textareaId',
         *                                        rows: 4,
         *                                        cols: 40
         *                                    }
         *                                ]
         *                            }
         *                        ],
         *                        buttons: [ CKEDITOR.dialog.okButton, CKEDITOR.dialog.cancelButton ],
         *                        onOk: function() {
         *                            // "this" is now a CKEDITOR.dialog object.
         *                            // Accessing dialog elements:
         *                            var textareaObj = this.getContentElement( 'tab1', 'textareaId' );
         *                            alert( "You have entered: " + textareaObj.getValue() );
         *                        }
         *                    };
         *
         *                    return dialogDefinition;
         *                } );
         *            }
         *        } );
         *
         *        CKEDITOR.replace( 'editor1', { extraPlugins: 'myplugin' } );
         *
         * @static
         * @param {String} name The dialog's name.
         * @param {Function/String} dialogDefinition
         * A function returning the dialog's definition, or the URL to the `.js` file holding the function.
         * The function should accept an argument `editor` which is the current editor instance, and
         * return an object conforming to {@link CKEDITOR.dialog.definition}.
         * @see CKEDITOR.dialog.definition
         */
        add: function( name, dialogDefinition ) {
            // Avoid path registration from multiple instances override definition.
            if ( !this._.dialogDefinitions[ name ] || typeof dialogDefinition == 'function' )
                this._.dialogDefinitions[ name ] = dialogDefinition;
        },

        /**
         * @static
         * @todo
         */
        exists: function( name ) {
            return !!this._.dialogDefinitions[ name ];
        },

        /**
         * @static
         * @todo
         */
        getCurrent: function() {
            return CKEDITOR.dialog._.currentTop;
        },

        /**
         * Check whether tab wasn't removed by {@link CKEDITOR.config#removeDialogTabs}.
         *
         * @since 4.1
         * @static
         * @param {CKEDITOR.editor} editor
         * @param {String} dialogName
         * @param {String} tabName
         * @returns {Boolean}
         */
        isTabEnabled: function( editor, dialogName, tabName ) {
            var cfg = editor.config.removeDialogTabs;

            return !( cfg && cfg.match( new RegExp( '(?:^|;)' + dialogName + ':' + tabName + '(?:$|;)', 'i' ) ) );
        },

        /**
         * The default OK button for dialogs. Fires the `ok` event and closes the dialog if the event succeeds.
         *
         * @static
         * @method
         */
        okButton: ( function() {
            var retval = function( editor, override ) {
                    override = override || {};
                    return CKEDITOR.tools.extend( {
                        id: 'ok',
                        type: 'button',
                        label: editor.lang.common.ok,
                        'class': 'cke_dialog_ui_button_ok',
                        onClick: function( evt ) {
                            var dialog = evt.data.dialog;
                            if ( dialog.fire( 'ok', { hide: true } ).hide !== false )
                                dialog.hide();
                        }
                    }, override, true );
                };
            retval.type = 'button';
            retval.override = function( override ) {
                return CKEDITOR.tools.extend( function( editor ) {
                    return retval( editor, override );
                }, { type: 'button' }, true );
            };
            return retval;
        } )(),

        /**
         * The default cancel button for dialogs. Fires the `cancel` event and
         * closes the dialog if no UI element value changed.
         *
         * @static
         * @method
         */
        cancelButton: ( function() {
            var retval = function( editor, override ) {
                    override = override || {};
                    return CKEDITOR.tools.extend( {
                        id: 'cancel',
                        type: 'button',
                        label: editor.lang.common.cancel,
                        'class': 'cke_dialog_ui_button_cancel',
                        onClick: function( evt ) {
                            var dialog = evt.data.dialog;
                            if ( dialog.fire( 'cancel', { hide: true } ).hide !== false )
                                dialog.hide();
                        }
                    }, override, true );
                };
            retval.type = 'button';
            retval.override = function( override ) {
                return CKEDITOR.tools.extend( function( editor ) {
                    return retval( editor, override );
                }, { type: 'button' }, true );
            };
            return retval;
        } )(),

        /**
         * Registers a dialog UI element.
         *
         * @static
         * @param {String} typeName The name of the UI element.
         * @param {Function} builder The function to build the UI element.
         */
        addUIElement: function( typeName, builder ) {
            this._.uiElementBuilders[ typeName ] = builder;
        }
    } );

    CKEDITOR.dialog._ = {
        uiElementBuilders: {},

        dialogDefinitions: {},

        currentTop: null,

        currentZIndex: null
    };

    // "Inherit" (copy actually) from CKEDITOR.event.
    CKEDITOR.event.implementOn( CKEDITOR.dialog );
    CKEDITOR.event.implementOn( CKEDITOR.dialog.prototype );

    var defaultDialogDefinition = {
        resizable: CKEDITOR.DIALOG_RESIZE_BOTH,
        minWidth: 600,
        minHeight: 400,
        buttons: [ CKEDITOR.dialog.okButton, CKEDITOR.dialog.cancelButton ]
    };

    // Tool function used to return an item from an array based on its id
    // property.
    var getById = function( array, id, recurse ) {
            for ( var i = 0, item;
            ( item = array[ i ] ); i++ ) {
                if ( item.id == id )
                    return item;
                if ( recurse && item[ recurse ] ) {
                    var retval = getById( item[ recurse ], id, recurse );
                    if ( retval )
                        return retval;
                }
            }
            return null;
        };

    // Tool function used to add an item into an array.
    var addById = function( array, newItem, nextSiblingId, recurse, nullIfNotFound ) {
            if ( nextSiblingId ) {
                for ( var i = 0, item;
                ( item = array[ i ] ); i++ ) {
                    if ( item.id == nextSiblingId ) {
                        array.splice( i, 0, newItem );
                        return newItem;
                    }

                    if ( recurse && item[ recurse ] ) {
                        var retval = addById( item[ recurse ], newItem, nextSiblingId, recurse, true );
                        if ( retval )
                            return retval;
                    }
                }

                if ( nullIfNotFound )
                    return null;
            }

            array.push( newItem );
            return newItem;
        };

    // Tool function used to remove an item from an array based on its id.
    var removeById = function( array, id, recurse ) {
            for ( var i = 0, item;
            ( item = array[ i ] ); i++ ) {
                if ( item.id == id )
                    return array.splice( i, 1 );
                if ( recurse && item[ recurse ] ) {
                    var retval = removeById( item[ recurse ], id, recurse );
                    if ( retval )
                        return retval;
                }
            }
            return null;
        };

    /**
     * This class is not really part of the API. It is the `definition` property value
     * passed to `dialogDefinition` event handlers.
     *
     *        CKEDITOR.on( 'dialogDefinition', function( evt ) {
     *            var definition = evt.data.definition;
     *            var content = definition.getContents( 'page1' );
     *             // ...
     *        } );
     *
     * @private
     * @class CKEDITOR.dialog.definitionObject
     * @extends CKEDITOR.dialog.definition
     * @constructor Creates a definitionObject class instance.
     */
    var definitionObject = function( dialog, dialogDefinition ) {
            // TODO : Check if needed.
            this.dialog = dialog;

            // Transform the contents entries in contentObjects.
            var contents = dialogDefinition.contents;
            for ( var i = 0, content;
            ( content = contents[ i ] ); i++ )
                contents[ i ] = content && new contentObject( dialog, content );

            CKEDITOR.tools.extend( this, dialogDefinition );
        };

    definitionObject.prototype = {
        /**
         * Gets a content definition.
         *
         * @param {String} id The id of the content definition.
         * @returns {CKEDITOR.dialog.definition.content} The content definition matching id.
         */
        getContents: function( id ) {
            return getById( this.contents, id );
        },

        /**
         * Gets a button definition.
         *
         * @param {String} id The id of the button definition.
         * @returns {CKEDITOR.dialog.definition.button} The button definition matching id.
         */
        getButton: function( id ) {
            return getById( this.buttons, id );
        },

        /**
         * Adds a content definition object under this dialog definition.
         *
         * @param {CKEDITOR.dialog.definition.content} contentDefinition The
         * content definition.
         * @param {String} [nextSiblingId] The id of an existing content
         * definition which the new content definition will be inserted
         * before. Omit if the new content definition is to be inserted as
         * the last item.
         * @returns {CKEDITOR.dialog.definition.content} The inserted content definition.
         */
        addContents: function( contentDefinition, nextSiblingId ) {
            return addById( this.contents, contentDefinition, nextSiblingId );
        },

        /**
         * Adds a button definition object under this dialog definition.
         *
         * @param {CKEDITOR.dialog.definition.button} buttonDefinition The
         * button definition.
         * @param {String} [nextSiblingId] The id of an existing button
         * definition which the new button definition will be inserted
         * before. Omit if the new button definition is to be inserted as
         * the last item.
         * @returns {CKEDITOR.dialog.definition.button} The inserted button definition.
         */
        addButton: function( buttonDefinition, nextSiblingId ) {
            return addById( this.buttons, buttonDefinition, nextSiblingId );
        },

        /**
         * Removes a content definition from this dialog definition.
         *
         * @param {String} id The id of the content definition to be removed.
         * @returns {CKEDITOR.dialog.definition.content} The removed content definition.
         */
        removeContents: function( id ) {
            removeById( this.contents, id );
        },

        /**
         * Removes a button definition from the dialog definition.
         *
         * @param {String} id The id of the button definition to be removed.
         * @returns {CKEDITOR.dialog.definition.button} The removed button definition.
         */
        removeButton: function( id ) {
            removeById( this.buttons, id );
        }
    };

    /**
     * This class is not really part of the API. It is the template of the
     * objects representing content pages inside the
     * CKEDITOR.dialog.definitionObject.
     *
     *        CKEDITOR.on( 'dialogDefinition', function( evt ) {
     *            var definition = evt.data.definition;
     *            var content = definition.getContents( 'page1' );
     *            content.remove( 'textInput1' );
     *            // ...
     *        } );
     *
     * @private
     * @class CKEDITOR.dialog.definition.contentObject
     * @constructor Creates a contentObject class instance.
     */
    function contentObject( dialog, contentDefinition ) {
        this._ = {
            dialog: dialog
        };

        CKEDITOR.tools.extend( this, contentDefinition );
    }

    contentObject.prototype = {
        /**
         * Gets a UI element definition under the content definition.
         *
         * @param {String} id The id of the UI element definition.
         * @returns {CKEDITOR.dialog.definition.uiElement}
         */
        get: function( id ) {
            return getById( this.elements, id, 'children' );
        },

        /**
         * Adds a UI element definition to the content definition.
         *
         * @param {CKEDITOR.dialog.definition.uiElement} elementDefinition The
         * UI elemnet definition to be added.
         * @param {String} nextSiblingId The id of an existing UI element
         * definition which the new UI element definition will be inserted
         * before. Omit if the new button definition is to be inserted as
         * the last item.
         * @returns {CKEDITOR.dialog.definition.uiElement} The element definition inserted.
         */
        add: function( elementDefinition, nextSiblingId ) {
            return addById( this.elements, elementDefinition, nextSiblingId, 'children' );
        },

        /**
         * Removes a UI element definition from the content definition.
         *
         * @param {String} id The id of the UI element definition to be removed.
         * @returns {CKEDITOR.dialog.definition.uiElement} The element definition removed.
         */
        remove: function( id ) {
            removeById( this.elements, id, 'children' );
        }
    };

    function initDragAndDrop( dialog ) {
        var lastCoords = null,
            abstractDialogCoords = null,
            editor = dialog.getParentEditor(),
            magnetDistance = editor.config.dialog_magnetDistance,
            margins = CKEDITOR.skin.margins || [ 0, 0, 0, 0 ];

        if ( typeof magnetDistance == 'undefined' )
            magnetDistance = 20;

        function mouseMoveHandler( evt ) {
            var dialogSize = dialog.getSize(),
                viewPaneSize = CKEDITOR.document.getWindow().getViewPaneSize(),
                x = evt.originalEvent.screenX,
                y = evt.originalEvent.screenY,
                dx = x - lastCoords.x,
                dy = y - lastCoords.y,
                realX, realY;

            lastCoords = { x: x, y: y };
            abstractDialogCoords.x += dx;
            abstractDialogCoords.y += dy;

            if ( abstractDialogCoords.x + margins[ 3 ] < magnetDistance )
                realX = -margins[ 3 ];
            else if ( abstractDialogCoords.x - margins[ 1 ] > viewPaneSize.width - dialogSize.width - magnetDistance )
                realX = viewPaneSize.width - dialogSize.width + ( editor.lang.dir == 'rtl' ? 0 : margins[ 1 ] );
            else
                realX = abstractDialogCoords.x;

            if ( abstractDialogCoords.y + margins[ 0 ] < magnetDistance )
                realY = -margins[ 0 ];
            else if ( abstractDialogCoords.y - margins[ 2 ] > viewPaneSize.height - dialogSize.height - magnetDistance )
                realY = viewPaneSize.height - dialogSize.height + margins[ 2 ];
            else
                realY = abstractDialogCoords.y;

            dialog.move( realX, realY, 1 );

            evt.preventDefault();
        }

        function mouseUpHandler() {
            CMS.$(CKEDITOR.document.$).off( 'pointermove', mouseMoveHandler );
            CMS.$(CKEDITOR.document.$).off( 'pointerup', mouseUpHandler );

            if ( CKEDITOR.env.ie6Compat ) {
                var coverDoc = currentCover.getChild( 0 ).getFrameDocument();
                coverDoc.removeListener( 'mousemove', mouseMoveHandler );
                coverDoc.removeListener( 'mouseup', mouseUpHandler );
            }
        }

        CMS.$(dialog.parts.title.$).on( 'pointerdown', function( evt ) {
            lastCoords = { x: evt.originalEvent.screenX, y: evt.originalEvent.screenY };

            CMS.$(CKEDITOR.document.$).on( 'pointermove', mouseMoveHandler );
            CMS.$(CKEDITOR.document.$).on( 'pointerup', mouseUpHandler );
            abstractDialogCoords = dialog.getPosition();

            if ( CKEDITOR.env.ie6Compat ) {
                var coverDoc = currentCover.getChild( 0 ).getFrameDocument();
                coverDoc.on( 'mousemove', mouseMoveHandler );
                coverDoc.on( 'mouseup', mouseUpHandler );
            }

            evt.preventDefault();
        });
    }

    function initResizeHandles( dialog ) {
        var def = dialog.definition,
            resizable = def.resizable;

        if ( resizable == CKEDITOR.DIALOG_RESIZE_NONE )
            return;

        var editor = dialog.getParentEditor();
        var wrapperWidth, wrapperHeight, viewSize, origin, startSize, dialogCover;

        var mouseDownFn = CKEDITOR.tools.addFunction( function( $event ) {
            startSize = dialog.getSize();

            var content = dialog.parts.contents,
                iframeDialog = content.$.getElementsByTagName( 'iframe' ).length;

            // Shim to help capturing "mousemove" over iframe.
            if ( iframeDialog ) {
                CMS.$('.cke_dialog_resize_cover').remove();
                dialogCover = CKEDITOR.dom.element.createFromHtml( '<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>' );
                content.append( dialogCover );
            }

            // Calculate the offset between content and chrome size.
            wrapperHeight = startSize.height - dialog.parts.contents.getSize( 'height', !( CKEDITOR.env.gecko || CKEDITOR.env.ie && CKEDITOR.env.quirks ) );
            wrapperWidth = startSize.width - dialog.parts.contents.getSize( 'width', 1 );

            origin = { x: $event.screenX, y: $event.screenY };

            viewSize = CKEDITOR.document.getWindow().getViewPaneSize();

            CMS.$(CKEDITOR.document.$).on( 'pointermove', mouseMoveHandler );
            CMS.$(CKEDITOR.document.$).on( 'pointerup', mouseUpHandler );

            if ( CKEDITOR.env.ie6Compat ) {
                var coverDoc = currentCover.getChild( 0 ).getFrameDocument();
                coverDoc.on( 'mousemove', mouseMoveHandler );
                coverDoc.on( 'mouseup', mouseUpHandler );
            }

            $event.preventDefault && $event.preventDefault();
        } );

        // Prepend the grip to the dialog.
        dialog.on( 'load', function() {
            var direction = '';
            if ( resizable == CKEDITOR.DIALOG_RESIZE_WIDTH )
                direction = ' cke_resizer_horizontal';
            else if ( resizable == CKEDITOR.DIALOG_RESIZE_HEIGHT )
                direction = ' cke_resizer_vertical';
            var resizer = CKEDITOR.dom.element.createFromHtml(
                '<div' +
                ' class="cms-ckeditor-resizer cke_resizer' + direction + ' cke_resizer_' + editor.lang.dir + '"' +
                ' title="' + CKEDITOR.tools.htmlEncode( editor.lang.common.resize ) + '"' +
                ' onmousedown="CKEDITOR.tools.callFunction(' + mouseDownFn + ', event )">' +
                // BLACK LOWER RIGHT TRIANGLE (ltr)
                // BLACK LOWER LEFT TRIANGLE (rtl)
                ( editor.lang.dir == 'ltr' ? '\u25E2' : '\u25E3' ) +
                '</div>' );
            dialog.parts.footer.append( resizer, 1 );
        } );
        editor.on( 'destroy', function() {
            CKEDITOR.tools.removeFunction( mouseDownFn );
        } );

        function mouseMoveHandler( evt ) {
            var rtl = editor.lang.dir == 'rtl',
                dx = ( evt.originalEvent.screenX - origin.x ) * ( rtl ? -1 : 1 ),
                dy = evt.originalEvent.screenY - origin.y,
                width = startSize.width,
                height = startSize.height,
                internalWidth = width + dx * ( dialog._.moved ? 1 : 2 ),
                internalHeight = height + dy * ( dialog._.moved ? 1 : 2 ),
                element = dialog._.element.getFirst(),
                right = rtl && element.getComputedStyle( 'right' ),
                position = dialog.getPosition();

            if ( position.y + internalHeight > viewSize.height )
                internalHeight = viewSize.height - position.y;

            if ( ( rtl ? right : position.x ) + internalWidth > viewSize.width )
                internalWidth = viewSize.width - ( rtl ? right : position.x );

            // Make sure the dialog will not be resized to the wrong side when it's in the leftmost position for RTL.
            if ( ( resizable == CKEDITOR.DIALOG_RESIZE_WIDTH || resizable == CKEDITOR.DIALOG_RESIZE_BOTH ) )
                width = Math.max( def.minWidth || 0, internalWidth - wrapperWidth );

            if ( resizable == CKEDITOR.DIALOG_RESIZE_HEIGHT || resizable == CKEDITOR.DIALOG_RESIZE_BOTH )
                height = Math.max( def.minHeight || 0, internalHeight - wrapperHeight );

            dialog.resize( width, height );

            if ( !dialog._.moved )
                dialog.layout();

            evt.preventDefault();
        }

        function mouseUpHandler() {
            CMS.$(CKEDITOR.document.$).off( 'pointermove', mouseMoveHandler );
            CMS.$(CKEDITOR.document.$).off( 'pointerup', mouseUpHandler );

            if ( dialogCover ) {
                dialogCover.remove();
                dialogCover = null;
            }

            if ( CKEDITOR.env.ie6Compat ) {
                var coverDoc = currentCover.getChild( 0 ).getFrameDocument();
                coverDoc.removeListener( 'mouseup', mouseUpHandler );
                coverDoc.removeListener( 'mousemove', mouseMoveHandler );
            }
        }
    }

    var resizeCover;
    // Caching resuable covers and allowing only one cover
    // on screen.
    var covers = {},
        currentCover;

    function cancelEvent( ev ) {
        ev.data.preventDefault( 1 );
    }

    function showCover( editor ) {
        var win = CKEDITOR.document.getWindow();
        var config = editor.config,
            backgroundColorStyle = config.dialog_backgroundCoverColor || 'white',
            backgroundCoverOpacity = config.dialog_backgroundCoverOpacity,
            baseFloatZIndex = config.baseFloatZIndex,
            coverKey = CKEDITOR.tools.genKey( backgroundColorStyle, backgroundCoverOpacity, baseFloatZIndex ),
            coverElement = covers[ coverKey ];

        CMS.$('.cke_dialog_background_cover').remove();
        if ( !coverElement ) {
            covers = {};
            var html = [
                '<div tabIndex="-1" style="position: ', ( CKEDITOR.env.ie6Compat ? 'absolute' : 'fixed' ),
                '; z-index: ', baseFloatZIndex,
                '; top: 0px; left: 0px; ',
                ( !CKEDITOR.env.ie6Compat ? 'background-color: ' + backgroundColorStyle : '' ),
                '" class="cke_dialog_background_cover cms-ckeditor-dialog-background-cover">'
            ];

            if ( CKEDITOR.env.ie6Compat ) {
                // Support for custom document.domain in IE.
                var iframeHtml = '<html><body style=\\\'background-color:' + backgroundColorStyle + ';\\\'></body></html>';

                html.push( '<iframe' +
                    ' hidefocus="true"' +
                    ' frameborder="0"' +
                    ' id="cke_dialog_background_iframe"' +
                    ' src="javascript:' );

                html.push( 'void((function(){' + encodeURIComponent(
                    'document.open();' +
                    // Support for custom document.domain in IE.
                    '(' + CKEDITOR.tools.fixDomain + ')();' +
                    'document.write( \'' + iframeHtml + '\' );' +
                    'document.close();'
                ) + '})())' );

                html.push( '"' +
                    ' style="' +
                        'position:absolute;' +
                        'left:0;' +
                        'top:0;' +
                        'width:100%;' +
                        'height: 100%;' +
                        'filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)">' +
                    '</iframe>' );
            }

            html.push( '</div>' );

            coverElement = CKEDITOR.dom.element.createFromHtml( html.join( '' ) );
            coverElement.setOpacity( backgroundCoverOpacity !== undefined ? backgroundCoverOpacity : 0.5 );

            coverElement.on( 'keydown', cancelEvent );
            coverElement.on( 'keypress', cancelEvent );
            coverElement.on( 'keyup', cancelEvent );

            coverElement.appendTo( CKEDITOR.document.getBody() );
            covers[ coverKey ] = coverElement;
        } else {
            coverElement.show();
        }

        // Makes the dialog cover a focus holder as well.
        editor.focusManager.add( coverElement );

        currentCover = coverElement;
        var resizeFunc = function() {
                var size = win.getViewPaneSize();
                coverElement.setStyles( {
                    width: size.width + 'px',
                    height: size.height + 'px'
                } );
            };

        var scrollFunc = function() {
                var pos = win.getScrollPosition(),
                    cursor = CKEDITOR.dialog._.currentTop;
                coverElement.setStyles( {
                    left: pos.x + 'px',
                    top: pos.y + 'px'
                } );

                if ( cursor ) {
                    do {
                        var dialogPos = cursor.getPosition();
                        cursor.move( dialogPos.x, dialogPos.y );
                    } while ( ( cursor = cursor._.parentDialog ) );
                }
            };

        resizeCover = resizeFunc;
        win.on( 'resize', resizeFunc );
        resizeFunc();
        // Using Safari/Mac, focus must be kept where it is (#7027)
        if ( !( CKEDITOR.env.mac && CKEDITOR.env.webkit ) )
            coverElement.focus();

        if ( CKEDITOR.env.ie6Compat ) {
            // IE BUG: win.$.onscroll assignment doesn't work.. it must be window.onscroll.
            // So we need to invent a really funny way to make it work.
            var myScrollHandler = function() {
                    scrollFunc();
                    arguments.callee.prevScrollHandler.apply( this, arguments );
                };
            win.$.setTimeout( function() {
                myScrollHandler.prevScrollHandler = window.onscroll ||
                function() {};
                window.onscroll = myScrollHandler;
            }, 0 );
            scrollFunc();
        }
    }

    function hideCover( editor ) {
		CMS.$('.cke_dialog_background_cover').remove();
        if ( !currentCover )
            return;

        editor.focusManager.remove( currentCover );
        var win = CKEDITOR.document.getWindow();
        currentCover.hide();
        win.removeListener( 'resize', resizeCover );

        if ( CKEDITOR.env.ie6Compat ) {
            win.$.setTimeout( function() {
                var prevScrollHandler = window.onscroll && window.onscroll.prevScrollHandler;
                window.onscroll = prevScrollHandler || null;
            }, 0 );
        }
        resizeCover = null;
    }

    function removeCovers() {
        for ( var coverId in covers )
            covers[ coverId ].remove();
        covers = {};
    }

    var accessKeyProcessors = {};

    var accessKeyDownHandler = function( evt ) {
            var ctrl = evt.data.$.ctrlKey || evt.data.$.metaKey,
                alt = evt.data.$.altKey,
                shift = evt.data.$.shiftKey,
                key = String.fromCharCode( evt.data.$.keyCode ),
                keyProcessor = accessKeyProcessors[ ( ctrl ? 'CTRL+' : '' ) + ( alt ? 'ALT+' : '' ) + ( shift ? 'SHIFT+' : '' ) + key ];

            if ( !keyProcessor || !keyProcessor.length )
                return;

            keyProcessor = keyProcessor[ keyProcessor.length - 1 ];
            keyProcessor.keydown && keyProcessor.keydown.call( keyProcessor.uiElement, keyProcessor.dialog, keyProcessor.key );
            evt.data.preventDefault();
        };

    var accessKeyUpHandler = function( evt ) {
            var ctrl = evt.data.$.ctrlKey || evt.data.$.metaKey,
                alt = evt.data.$.altKey,
                shift = evt.data.$.shiftKey,
                key = String.fromCharCode( evt.data.$.keyCode ),
                keyProcessor = accessKeyProcessors[ ( ctrl ? 'CTRL+' : '' ) + ( alt ? 'ALT+' : '' ) + ( shift ? 'SHIFT+' : '' ) + key ];

            if ( !keyProcessor || !keyProcessor.length )
                return;

            keyProcessor = keyProcessor[ keyProcessor.length - 1 ];
            if ( keyProcessor.keyup ) {
                keyProcessor.keyup.call( keyProcessor.uiElement, keyProcessor.dialog, keyProcessor.key );
                evt.data.preventDefault();
            }
        };

    var registerAccessKey = function( uiElement, dialog, key, downFunc, upFunc ) {
            var procList = accessKeyProcessors[ key ] || ( accessKeyProcessors[ key ] = [] );
            procList.push( {
                uiElement: uiElement,
                dialog: dialog,
                key: key,
                keyup: upFunc || uiElement.accessKeyUp,
                keydown: downFunc || uiElement.accessKeyDown
            } );
        };

    var unregisterAccessKey = function( obj ) {
            for ( var i in accessKeyProcessors ) {
                var list = accessKeyProcessors[ i ];
                for ( var j = list.length - 1; j >= 0; j-- ) {
                    if ( list[ j ].dialog == obj || list[ j ].uiElement == obj )
                        list.splice( j, 1 );
                }
                if ( list.length === 0 )
                    delete accessKeyProcessors[ i ];
            }
        };

    var tabAccessKeyUp = function( dialog, key ) {
            if ( dialog._.accessKeyMap[ key ] )
                dialog.selectPage( dialog._.accessKeyMap[ key ] );
        };

    var tabAccessKeyDown = function() {};

    ( function() {
        CKEDITOR.ui.dialog = {
            /**
             * The base class of all dialog UI elements.
             *
             * @class CKEDITOR.ui.dialog.uiElement
             * @constructor Creates a uiElement class instance.
             * @param {CKEDITOR.dialog} dialog Parent dialog object.
             * @param {CKEDITOR.dialog.definition.uiElement} elementDefinition Element
             * definition.
             *
             * Accepted fields:
             *
             * * `id` (Required) The id of the UI element. See {@link CKEDITOR.dialog#getContentElement}.
             * * `type` (Required) The type of the UI element. The
             *     value to this field specifies which UI element class will be used to
             *     generate the final widget.
             * * `title` (Optional) The popup tooltip for the UI
             *     element.
             * * `hidden` (Optional) A flag that tells if the element
             *     should be initially visible.
             * * `className` (Optional) Additional CSS class names
             *     to add to the UI element. Separated by space.
             * * `style` (Optional) Additional CSS inline styles
             *     to add to the UI element. A semicolon (;) is required after the last
             *     style declaration.
             * * `accessKey` (Optional) The alphanumeric access key
             *     for this element. Access keys are automatically prefixed by CTRL.
             * * `on*` (Optional) Any UI element definition field that
             *     starts with `on` followed immediately by a capital letter and
             *     probably more letters is an event handler. Event handlers may be further
             *     divided into registered event handlers and DOM event handlers. Please
             *     refer to {@link CKEDITOR.ui.dialog.uiElement#registerEvents} and
             *     {@link CKEDITOR.ui.dialog.uiElement#eventProcessors} for more information.
             *
             * @param {Array} htmlList
             * List of HTML code to be added to the dialog's content area.
             * @param {Function/String} [nodeNameArg='div']
             * A function returning a string, or a simple string for the node name for
             * the root DOM node.
             * @param {Function/Object} [stylesArg={}]
             * A function returning an object, or a simple object for CSS styles applied
             * to the DOM node.
             * @param {Function/Object} [attributesArg={}]
             * A fucntion returning an object, or a simple object for attributes applied
             * to the DOM node.
             * @param {Function/String} [contentsArg='']
             * A function returning a string, or a simple string for the HTML code inside
             * the root DOM node. Default is empty string.
             */
            uiElement: function( dialog, elementDefinition, htmlList, nodeNameArg, stylesArg, attributesArg, contentsArg ) {
                if ( arguments.length < 4 )
                    return;

                var nodeName = ( nodeNameArg.call ? nodeNameArg( elementDefinition ) : nodeNameArg ) || 'div',
                    html = [ '<', nodeName, ' ' ],
                    styles = ( stylesArg && stylesArg.call ? stylesArg( elementDefinition ) : stylesArg ) || {},
                    attributes = ( attributesArg && attributesArg.call ? attributesArg( elementDefinition ) : attributesArg ) || {},
                    innerHTML = ( contentsArg && contentsArg.call ? contentsArg.call( this, dialog, elementDefinition ) : contentsArg ) || '',
                    domId = this.domId = attributes.id || CKEDITOR.tools.getNextId() + '_uiElement',
                    i;

                if ( elementDefinition.requiredContent && !dialog.getParentEditor().filter.check( elementDefinition.requiredContent ) ) {
                    styles.display = 'none';
                    this.notAllowed = true;
                }

                // Set the id, a unique id is required for getElement() to work.
                attributes.id = domId;

                // Set the type and definition CSS class names.
                var classes = {};
                if ( elementDefinition.type )
                    classes[ 'cke_dialog_ui_' + elementDefinition.type ] = 1;
                if ( elementDefinition.className )
                    classes[ elementDefinition.className ] = 1;
                if ( elementDefinition.disabled )
                    classes.cke_disabled = 1;

                var attributeClasses = ( attributes[ 'class' ] && attributes[ 'class' ].split ) ? attributes[ 'class' ].split( ' ' ) : [];
                for ( i = 0; i < attributeClasses.length; i++ ) {
                    if ( attributeClasses[ i ] )
                        classes[ attributeClasses[ i ] ] = 1;
                }
                var finalClasses = [];
                for ( i in classes )
                    finalClasses.push( i );
                attributes[ 'class' ] = finalClasses.join( ' ' );

                // Set the popup tooltop.
                if ( elementDefinition.title )
                    attributes.title = elementDefinition.title;

                // Write the inline CSS styles.
                var styleStr = ( elementDefinition.style || '' ).split( ';' );

                // Element alignment support.
                if ( elementDefinition.align ) {
                    var align = elementDefinition.align;
                    styles[ 'margin-left' ] = align == 'left' ? 0 : 'auto';
                    styles[ 'margin-right' ] = align == 'right' ? 0 : 'auto';
                }

                for ( i in styles )
                    styleStr.push( i + ':' + styles[ i ] );
                if ( elementDefinition.hidden )
                    styleStr.push( 'display:none' );
                for ( i = styleStr.length - 1; i >= 0; i-- ) {
                    if ( styleStr[ i ] === '' )
                        styleStr.splice( i, 1 );
                }
                if ( styleStr.length > 0 )
                    attributes.style = ( attributes.style ? ( attributes.style + '; ' ) : '' ) + styleStr.join( '; ' );

                // Write the attributes.
                for ( i in attributes )
                    html.push( i + '="' + CKEDITOR.tools.htmlEncode( attributes[ i ] ) + '" ' );

                // Write the content HTML.
                html.push( '>', innerHTML, '</', nodeName, '>' );

                // Add contents to the parent HTML array.
                htmlList.push( html.join( '' ) );

                ( this._ || ( this._ = {} ) ).dialog = dialog;

                // Override isChanged if it is defined in element definition.
                if ( typeof elementDefinition.isChanged == 'boolean' )
                    this.isChanged = function() {
                        return elementDefinition.isChanged;
                    };
                if ( typeof elementDefinition.isChanged == 'function' )
                    this.isChanged = elementDefinition.isChanged;

                // Overload 'get(set)Value' on definition.
                if ( typeof elementDefinition.setValue == 'function' ) {
                    this.setValue = CKEDITOR.tools.override( this.setValue, function( org ) {
                        return function( val ) {
                            org.call( this, elementDefinition.setValue.call( this, val ) );
                        };
                    } );
                }

                if ( typeof elementDefinition.getValue == 'function' ) {
                    this.getValue = CKEDITOR.tools.override( this.getValue, function( org ) {
                        return function() {
                            return elementDefinition.getValue.call( this, org.call( this ) );
                        };
                    } );
                }

                // Add events.
                CKEDITOR.event.implementOn( this );

                this.registerEvents( elementDefinition );
                if ( this.accessKeyUp && this.accessKeyDown && elementDefinition.accessKey )
                    registerAccessKey( this, dialog, 'CTRL+' + elementDefinition.accessKey );

                var me = this;
                dialog.on( 'load', function() {
                    var input = me.getInputElement();
                    if ( input ) {
                        var focusClass = me.type in { 'checkbox': 1, 'ratio': 1 } && CKEDITOR.env.ie && CKEDITOR.env.version < 8 ? 'cke_dialog_ui_focused' : '';
                        input.on( 'focus', function() {
                            dialog._.tabBarMode = false;
                            dialog._.hasFocus = true;
                            me.fire( 'focus' );
                            focusClass && this.addClass( focusClass );

                        } );

                        input.on( 'blur', function() {
                            me.fire( 'blur' );
                            focusClass && this.removeClass( focusClass );
                        } );
                    }
                } );

                // Completes this object with everything we have in the
                // definition.
                CKEDITOR.tools.extend( this, elementDefinition );

                // Register the object as a tab focus if it can be included.
                if ( this.keyboardFocusable ) {
                    this.tabIndex = elementDefinition.tabIndex || 0;

                    this.focusIndex = dialog._.focusList.push( this ) - 1;
                    this.on( 'focus', function() {
                        dialog._.currentFocusIndex = me.focusIndex;
                    } );
                }
            },

            /**
             * Horizontal layout box for dialog UI elements, auto-expends to available width of container.
             *
             * @class CKEDITOR.ui.dialog.hbox
             * @extends CKEDITOR.ui.dialog.uiElement
             * @constructor Creates a hbox class instance.
             * @param {CKEDITOR.dialog} dialog Parent dialog object.
             * @param {Array} childObjList
             * Array of {@link CKEDITOR.ui.dialog.uiElement} objects inside this container.
             * @param {Array} childHtmlList
             * Array of HTML code that correspond to the HTML output of all the
             * objects in childObjList.
             * @param {Array} htmlList
             * Array of HTML code that this element will output to.
             * @param {CKEDITOR.dialog.definition.uiElement} elementDefinition
             * The element definition. Accepted fields:
             *
             * * `widths` (Optional) The widths of child cells.
             * * `height` (Optional) The height of the layout.
             * * `padding` (Optional) The padding width inside child cells.
             * * `align` (Optional) The alignment of the whole layout.
             */
            hbox: function( dialog, childObjList, childHtmlList, htmlList, elementDefinition ) {
                if ( arguments.length < 4 )
                    return;

                this._ || ( this._ = {} );

                var children = this._.children = childObjList,
                    widths = elementDefinition && elementDefinition.widths || null,
                    height = elementDefinition && elementDefinition.height || null,
                    styles = {},
                    i;
                /** @ignore */
                var innerHTML = function() {
                        var html = [ '<tbody><tr class="cke_dialog_ui_hbox">' ];
                        for ( i = 0; i < childHtmlList.length; i++ ) {
                            var className = 'cke_dialog_ui_hbox_child',
                                styles = [];
                            if ( i === 0 ) {
                                className = 'cke_dialog_ui_hbox_first';
                            }
                            if ( i == childHtmlList.length - 1 ) {
                                className = 'cke_dialog_ui_hbox_last';
                            }

                            html.push( '<td class="', className, '" role="presentation" ' );
                            if ( widths ) {
                                if ( widths[ i ] ) {
                                    styles.push( 'width:' + cssLength( widths[i] ) );
                                }
                            } else {
                                styles.push( 'width:' + Math.floor( 100 / childHtmlList.length ) + '%' );
                            }
                            if ( height ) {
                                styles.push( 'height:' + cssLength( height ) );
                            }
                            if ( elementDefinition && elementDefinition.padding !== undefined ) {
                                styles.push( 'padding:' + cssLength( elementDefinition.padding ) );
                            }
                            // In IE Quirks alignment has to be done on table cells. (#7324)
                            if ( CKEDITOR.env.ie && CKEDITOR.env.quirks && children[ i ].align ) {
                                styles.push( 'text-align:' + children[ i ].align );
                            }
                            if ( styles.length > 0 ) {
                                html.push( 'style="' + styles.join( '; ' ) + '" ' );
                            }
                            html.push( '>', childHtmlList[ i ], '</td>' );
                        }
                        html.push( '</tr></tbody>' );
                        return html.join( '' );
                    };

                var attribs = { role: 'presentation' };
                elementDefinition && elementDefinition.align && ( attribs.align = elementDefinition.align );

                CKEDITOR.ui.dialog.uiElement.call( this, dialog, elementDefinition || { type: 'hbox' }, htmlList, 'table', styles, attribs, innerHTML );
            },

            /**
             * Vertical layout box for dialog UI elements.
             *
             * @class CKEDITOR.ui.dialog.vbox
             * @extends CKEDITOR.ui.dialog.hbox
             * @constructor Creates a vbox class instance.
             * @param {CKEDITOR.dialog} dialog Parent dialog object.
             * @param {Array} childObjList
             * Array of {@link CKEDITOR.ui.dialog.uiElement} objects inside this container.
             * @param {Array} childHtmlList
             * Array of HTML code that correspond to the HTML output of all the
             * objects in childObjList.
             * @param {Array} htmlList Array of HTML code that this element will output to.
             * @param {CKEDITOR.dialog.definition.uiElement} elementDefinition
             * The element definition. Accepted fields:
             *
             * * `width` (Optional) The width of the layout.
             * * `heights` (Optional) The heights of individual cells.
             * * `align` (Optional) The alignment of the layout.
             * * `padding` (Optional) The padding width inside child cells.
             * * `expand` (Optional) Whether the layout should expand
             *     vertically to fill its container.
             */
            vbox: function( dialog, childObjList, childHtmlList, htmlList, elementDefinition ) {
                if ( arguments.length < 3 )
                    return;

                this._ || ( this._ = {} );

                var children = this._.children = childObjList,
                    width = elementDefinition && elementDefinition.width || null,
                    heights = elementDefinition && elementDefinition.heights || null;
                /** @ignore */
                var innerHTML = function() {
                        var html = [ '<table role="presentation" cellspacing="0" border="0" ' ];
                        html.push( 'style="' );
                        if ( elementDefinition && elementDefinition.expand )
                            html.push( 'height:100%;' );
                        html.push( 'width:' + cssLength( width || '100%' ), ';' );

                        // (#10123) Temp fix for dialog broken layout in latest webkit.
                        if ( CKEDITOR.env.webkit )
                            html.push( 'float:none;' );

                        html.push( '"' );
                        html.push( 'align="', CKEDITOR.tools.htmlEncode(
                        ( elementDefinition && elementDefinition.align ) || ( dialog.getParentEditor().lang.dir == 'ltr' ? 'left' : 'right' ) ), '" ' );

                        html.push( '><tbody>' );
                        for ( var i = 0; i < childHtmlList.length; i++ ) {
                            var styles = [];
                            html.push( '<tr><td role="presentation" ' );
                            if ( width )
                                styles.push( 'width:' + cssLength( width || '100%' ) );
                            if ( heights )
                                styles.push( 'height:' + cssLength( heights[ i ] ) );
                            else if ( elementDefinition && elementDefinition.expand )
                                styles.push( 'height:' + Math.floor( 100 / childHtmlList.length ) + '%' );
                            if ( elementDefinition && elementDefinition.padding !== undefined )
                                styles.push( 'padding:' + cssLength( elementDefinition.padding ) );
                            // In IE Quirks alignment has to be done on table cells. (#7324)
                            if ( CKEDITOR.env.ie && CKEDITOR.env.quirks && children[ i ].align )
                                styles.push( 'text-align:' + children[ i ].align );
                            if ( styles.length > 0 )
                                html.push( 'style="', styles.join( '; ' ), '" ' );
                            html.push( ' class="cke_dialog_ui_vbox_child">', childHtmlList[ i ], '</td></tr>' );
                        }
                        html.push( '</tbody></table>' );
                        return html.join( '' );
                    };
                CKEDITOR.ui.dialog.uiElement.call( this, dialog, elementDefinition || { type: 'vbox' }, htmlList, 'div', null, { role: 'presentation' }, innerHTML );
            }
        };
    } )();

    /** @class CKEDITOR.ui.dialog.uiElement */
    CKEDITOR.ui.dialog.uiElement.prototype = {
        /**
         * Gets the root DOM element of this dialog UI object.
         *
         *        uiElement.getElement().hide();
         *
         * @returns {CKEDITOR.dom.element} Root DOM element of UI object.
         */
        getElement: function() {
            return CKEDITOR.document.getById( this.domId );
        },

        /**
         * Gets the DOM element that the user inputs values.
         *
         * This function is used by {@link #setValue}, {@link #getValue} and {@link #focus}. It should
         * be overrided in child classes where the input element isn't the root
         * element.
         *
         *        var rawValue = textInput.getInputElement().$.value;
         *
         * @returns {CKEDITOR.dom.element} The element where the user input values.
         */
        getInputElement: function() {
            return this.getElement();
        },

        /**
         * Gets the parent dialog object containing this UI element.
         *
         *        var dialog = uiElement.getDialog();
         *
         * @returns {CKEDITOR.dialog} Parent dialog object.
         */
        getDialog: function() {
            return this._.dialog;
        },

        /**
         * Sets the value of this dialog UI object.
         *
         *        uiElement.setValue( 'Dingo' );
         *
         * @chainable
         * @param {Object} value The new value.
         * @param {Boolean} noChangeEvent Internal commit, to supress `change` event on this element.
         */
        setValue: function( value, noChangeEvent ) {
            this.getInputElement().setValue( value );
            !noChangeEvent && this.fire( 'change', { value: value } );
            return this;
        },

        /**
         * Gets the current value of this dialog UI object.
         *
         *        var myValue = uiElement.getValue();
         *
         * @returns {Object} The current value.
         */
        getValue: function() {
            return this.getInputElement().getValue();
        },

        /**
         * Tells whether the UI object's value has changed.
         *
         *        if ( uiElement.isChanged() )
         *            confirm( 'Value changed! Continue?' );
         *
         * @returns {Boolean} `true` if changed, `false` if not changed.
         */
        isChanged: function() {
            // Override in input classes.
            return false;
        },

        /**
         * Selects the parent tab of this element. Usually called by focus() or overridden focus() methods.
         *
         *        focus : function() {
         *            this.selectParentTab();
         *            // do something else.
         *        }
         *
         * @chainable
         */
        selectParentTab: function() {
            var element = this.getInputElement(),
                cursor = element,
                tabId;
            while ( ( cursor = cursor.getParent() ) && cursor.$.className.search( 'cke_dialog_page_contents' ) == -1 ) {

            }

            // Some widgets don't have parent tabs (e.g. OK and Cancel buttons).
            if ( !cursor )
                return this;

            tabId = cursor.getAttribute( 'name' );
            // Avoid duplicate select.
            if ( this._.dialog._.currentTabId != tabId )
                this._.dialog.selectPage( tabId );
            return this;
        },

        /**
         * Puts the focus to the UI object. Switches tabs if the UI object isn't in the active tab page.
         *
         *        uiElement.focus();
         *
         * @chainable
         */
        focus: function() {
            this.selectParentTab().getInputElement().focus();
            return this;
        },

        /**
         * Registers the `on*` event handlers defined in the element definition.
         *
         * The default behavior of this function is:
         *
         * 1. If the on* event is defined in the class's eventProcesors list,
         *     then the registration is delegated to the corresponding function
         *     in the eventProcessors list.
         * 2. If the on* event is not defined in the eventProcessors list, then
         *     register the event handler under the corresponding DOM event of
         *     the UI element's input DOM element (as defined by the return value
         *     of {@link #getInputElement}).
         *
         * This function is only called at UI element instantiation, but can
         * be overridded in child classes if they require more flexibility.
         *
         * @chainable
         * @param {CKEDITOR.dialog.definition.uiElement} definition The UI element
         * definition.
         */
        registerEvents: function( definition ) {
            var regex = /^on([A-Z]\w+)/,
                match;

            var registerDomEvent = function( uiElement, dialog, eventName, func ) {
                    dialog.on( 'load', function() {
                        uiElement.getInputElement().on( eventName, func, uiElement );
                    } );
                };

            for ( var i in definition ) {
                if ( !( match = i.match( regex ) ) )
                    continue;
                if ( this.eventProcessors[ i ] )
                    this.eventProcessors[ i ].call( this, this._.dialog, definition[ i ] );
                else
                    registerDomEvent( this, this._.dialog, match[ 1 ].toLowerCase(), definition[ i ] );
            }

            return this;
        },

        /**
         * The event processor list used by
         * {@link CKEDITOR.ui.dialog.uiElement#getInputElement} at UI element
         * instantiation. The default list defines three `on*` events:
         *
         * 1. `onLoad` - Called when the element's parent dialog opens for the
         *     first time.
         * 2. `onShow` - Called whenever the element's parent dialog opens.
         * 3. `onHide` - Called whenever the element's parent dialog closes.
         *
         *        // This connects the 'click' event in CKEDITOR.ui.dialog.button to onClick
         *        // handlers in the UI element's definitions.
         *        CKEDITOR.ui.dialog.button.eventProcessors = CKEDITOR.tools.extend( {},
         *            CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,
         *            { onClick : function( dialog, func ) { this.on( 'click', func ); } },
         *            true
         *        );
         *
         * @property {Object}
         */
        eventProcessors: {
            onLoad: function( dialog, func ) {
                dialog.on( 'load', func, this );
            },

            onShow: function( dialog, func ) {
                dialog.on( 'show', func, this );
            },

            onHide: function( dialog, func ) {
                dialog.on( 'hide', func, this );
            }
        },

        /**
         * The default handler for a UI element's access key down event, which
         * tries to put focus to the UI element.
         *
         * Can be overridded in child classes for more sophisticaed behavior.
         *
         * @param {CKEDITOR.dialog} dialog The parent dialog object.
         * @param {String} key The key combination pressed. Since access keys
         * are defined to always include the `CTRL` key, its value should always
         * include a `'CTRL+'` prefix.
         */
        accessKeyDown: function() {
            this.focus();
        },

        /**
         * The default handler for a UI element's access key up event, which
         * does nothing.
         *
         * Can be overridded in child classes for more sophisticated behavior.
         *
         * @param {CKEDITOR.dialog} dialog The parent dialog object.
         * @param {String} key The key combination pressed. Since access keys
         * are defined to always include the `CTRL` key, its value should always
         * include a `'CTRL+'` prefix.
         */
        accessKeyUp: function() {},

        /**
         * Disables a UI element.
         */
        disable: function() {
            var element = this.getElement(),
                input = this.getInputElement();
            input.setAttribute( 'disabled', 'true' );
            element.addClass( 'cke_disabled' );
        },

        /**
         * Enables a UI element.
         */
        enable: function() {
            var element = this.getElement(),
                input = this.getInputElement();
            input.removeAttribute( 'disabled' );
            element.removeClass( 'cke_disabled' );
        },

        /**
         * Determines whether an UI element is enabled or not.
         *
         * @returns {Boolean} Whether the UI element is enabled.
         */
        isEnabled: function() {
            return !this.getElement().hasClass( 'cke_disabled' );
        },

        /**
         * Determines whether an UI element is visible or not.
         *
         * @returns {Boolean} Whether the UI element is visible.
         */
        isVisible: function() {
            return this.getInputElement().isVisible();
        },

        /**
         * Determines whether an UI element is focus-able or not.
         * Focus-able is defined as being both visible and enabled.
         *
         * @returns {Boolean} Whether the UI element can be focused.
         */
        isFocusable: function() {
            if ( !this.isEnabled() || !this.isVisible() )
                return false;
            return true;
        }
    };

    /** @class CKEDITOR.ui.dialog.hbox */
    CKEDITOR.ui.dialog.hbox.prototype = CKEDITOR.tools.extend( new CKEDITOR.ui.dialog.uiElement(), {
        /**
         * Gets a child UI element inside this container.
         *
         *        var checkbox = hbox.getChild( [0,1] );
         *        checkbox.setValue( true );
         *
         * @param {Array/Number} indices An array or a single number to indicate the child's
         * position in the container's descendant tree. Omit to get all the children in an array.
         * @returns {Array/CKEDITOR.ui.dialog.uiElement} Array of all UI elements in the container
         * if no argument given, or the specified UI element if indices is given.
         */
        getChild: function( indices ) {
            // If no arguments, return a clone of the children array.
            if ( arguments.length < 1 )
                return this._.children.concat();

            // If indices isn't array, make it one.
            if ( !indices.splice )
                indices = [ indices ];

            // Retrieve the child element according to tree position.
            if ( indices.length < 2 )
                return this._.children[ indices[ 0 ] ];
            else
                return ( this._.children[ indices[ 0 ] ] && this._.children[ indices[ 0 ] ].getChild ) ? this._.children[ indices[ 0 ] ].getChild( indices.slice( 1, indices.length ) ) : null;
        }
    }, true );

    CKEDITOR.ui.dialog.vbox.prototype = new CKEDITOR.ui.dialog.hbox();

    ( function() {
        var commonBuilder = {
            build: function( dialog, elementDefinition, output ) {
                var children = elementDefinition.children,
                    child,
                    childHtmlList = [],
                    childObjList = [];
                for ( var i = 0;
                ( i < children.length && ( child = children[ i ] ) ); i++ ) {
                    var childHtml = [];
                    childHtmlList.push( childHtml );
                    childObjList.push( CKEDITOR.dialog._.uiElementBuilders[ child.type ].build( dialog, child, childHtml ) );
                }
                return new CKEDITOR.ui.dialog[ elementDefinition.type ]( dialog, childObjList, childHtmlList, output, elementDefinition );
            }
        };

        CKEDITOR.dialog.addUIElement( 'hbox', commonBuilder );
        CKEDITOR.dialog.addUIElement( 'vbox', commonBuilder );
    } )();

    /**
     * Generic dialog command. It opens a specific dialog when executed.
     *
     *        // Register the "link" command, which opens the "link" dialog.
     *        editor.addCommand( 'link', new CKEDITOR.dialogCommand( 'link' ) );
     *
     * @class
     * @constructor Creates a dialogCommand class instance.
     * @extends CKEDITOR.commandDefinition
     * @param {String} dialogName The name of the dialog to open when executing
     * this command.
     * @param {Object} [ext] Additional command definition's properties.
     */
    CKEDITOR.dialogCommand = function( dialogName, ext ) {
        this.dialogName = dialogName;
        CKEDITOR.tools.extend( this, ext, true );
    };

    CKEDITOR.dialogCommand.prototype = {
        exec: function( editor ) {
            editor.openDialog( this.dialogName );
        },

        // Dialog commands just open a dialog ui, thus require no undo logic,
        // undo support should dedicate to specific dialog implementation.
        canUndo: false,

        editorFocus: 1
    };

    ( function() {
        var notEmptyRegex = /^([a]|[^a])+$/,
            integerRegex = /^\d*$/,
            numberRegex = /^\d*(?:\.\d+)?$/,
            htmlLengthRegex = /^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,
            cssLengthRegex = /^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,
            inlineStyleRegex = /^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;

        CKEDITOR.VALIDATE_OR = 1;
        CKEDITOR.VALIDATE_AND = 2;

        CKEDITOR.dialog.validate = {
            functions: function() {
                var args = arguments;
                return function() {
                    /**
                     * It's important for validate functions to be able to accept the value
                     * as argument in addition to this.getValue(), so that it is possible to
                     * combine validate functions together to make more sophisticated
                     * validators.
                     */
                    var value = this && this.getValue ? this.getValue() : args[ 0 ];

                    var msg,
                        relation = CKEDITOR.VALIDATE_AND,
                        functions = [],
                        i;

                    for ( i = 0; i < args.length; i++ ) {
                        if ( typeof args[ i ] == 'function' )
                            functions.push( args[ i ] );
                        else
                            break;
                    }

                    if ( i < args.length && typeof args[ i ] == 'string' ) {
                        msg = args[ i ];
                        i++;
                    }

                    if ( i < args.length && typeof args[ i ] == 'number' )
                        relation = args[ i ];

                    var passed = ( relation == CKEDITOR.VALIDATE_AND ? true : false );
                    for ( i = 0; i < functions.length; i++ ) {
                        if ( relation == CKEDITOR.VALIDATE_AND )
                            passed = passed && functions[ i ]( value );
                        else
                            passed = passed || functions[ i ]( value );
                    }

                    return !passed ? msg : true;
                };
            },

            regex: function( regex, msg ) {
                /*
                 * Can be greatly shortened by deriving from functions validator if code size
                 * turns out to be more important than performance.
                 */
                return function() {
                    var value = this && this.getValue ? this.getValue() : arguments[ 0 ];
                    return !regex.test( value ) ? msg : true;
                };
            },

            notEmpty: function( msg ) {
                return this.regex( notEmptyRegex, msg );
            },

            integer: function( msg ) {
                return this.regex( integerRegex, msg );
            },

            'number': function( msg ) {
                return this.regex( numberRegex, msg );
            },

            'cssLength': function( msg ) {
                return this.functions( function( val ) {
                    return cssLengthRegex.test( CKEDITOR.tools.trim( val ) );
                }, msg );
            },

            'htmlLength': function( msg ) {
                return this.functions( function( val ) {
                    return htmlLengthRegex.test( CKEDITOR.tools.trim( val ) );
                }, msg );
            },

            'inlineStyle': function( msg ) {
                return this.functions( function( val ) {
                    return inlineStyleRegex.test( CKEDITOR.tools.trim( val ) );
                }, msg );
            },

            equals: function( value, msg ) {
                return this.functions( function( val ) {
                    return val == value;
                }, msg );
            },

            notEqual: function( value, msg ) {
                return this.functions( function( val ) {
                    return val != value;
                }, msg );
            }
        };

        CKEDITOR.on( 'instanceDestroyed', function( evt ) {
            // Remove dialog cover on last instance destroy.
            if ( CKEDITOR.tools.isEmpty( CKEDITOR.instances ) ) {
                var currentTopDialog;
                while ( ( currentTopDialog = CKEDITOR.dialog._.currentTop ) )
                    currentTopDialog.hide();
                removeCovers();
            }

            var dialogs = evt.editor._.storedDialogs;
            for ( var name in dialogs )
                dialogs[ name ].destroy();

        } );

    } )();

    // Extend the CKEDITOR.editor class with dialog specific functions.
    CKEDITOR.tools.extend( CKEDITOR.editor.prototype, {
        /**
         * Loads and opens a registered dialog.
         *
         *        CKEDITOR.instances.editor1.openDialog( 'smiley' );
         *
         * @member CKEDITOR.editor
         * @param {String} dialogName The registered name of the dialog.
         * @param {Function} callback The function to be invoked after dialog instance created.
         * @returns {CKEDITOR.dialog} The dialog object corresponding to the dialog displayed.
         * `null` if the dialog name is not registered.
         * @see CKEDITOR.dialog#add
         */
        openDialog: function( dialogName, callback ) {
            var dialog = null, dialogDefinitions = CKEDITOR.dialog._.dialogDefinitions[ dialogName ];

            if ( CKEDITOR.dialog._.currentTop === null )
                showCover( this );

            // If the dialogDefinition is already loaded, open it immediately.
            if ( typeof dialogDefinitions == 'function' ) {
                var storedDialogs = this._.storedDialogs || ( this._.storedDialogs = {} );

                dialog = storedDialogs[ dialogName ] || ( storedDialogs[ dialogName ] = new CKEDITOR.dialog( this, dialogName ) );

                callback && callback.call( dialog, dialog );
                dialog.show();

            } else if ( dialogDefinitions == 'failed' ) {
                hideCover( this );
                throw new Error( '[CKEDITOR.dialog.openDialog] Dialog "' + dialogName + '" failed when loading definition.' );
            } else if ( typeof dialogDefinitions == 'string' ) {

                CKEDITOR.scriptLoader.load( CKEDITOR.getUrl( dialogDefinitions ),
                    function() {
                        var dialogDefinition = CKEDITOR.dialog._.dialogDefinitions[ dialogName ];
                        // In case of plugin error, mark it as loading failed.
                        if ( typeof dialogDefinition != 'function' )
                            CKEDITOR.dialog._.dialogDefinitions[ dialogName ] = 'failed';

                        this.openDialog( dialogName, callback );
                    }, this, 0, 1 );
            }

            CKEDITOR.skin.loadPart( 'dialog' );

            return dialog;
        }
    } );
} )();

CKEDITOR.plugins.add( 'cmsdialog', {
    requires: 'dialogui',
    init: function( editor ) {
        editor.on( 'doubleclick', function( evt ) {
            if ( evt.data.dialog )
                editor.openDialog( evt.data.dialog );
        }, null, null, 999 );
    }
} );

// Dialog related configurations.

/**
 * The color of the dialog background cover. It should be a valid CSS color string.
 *
 *        config.dialog_backgroundCoverColor = 'rgb(255, 254, 253)';
 *
 * @cfg {String} [dialog_backgroundCoverColor='white']
 * @member CKEDITOR.config
 */

/**
 * The opacity of the dialog background cover. It should be a number within the
 * range `[0.0, 1.0]`.
 *
 *        config.dialog_backgroundCoverOpacity = 0.7;
 *
 * @cfg {Number} [dialog_backgroundCoverOpacity=0.5]
 * @member CKEDITOR.config
 */

/**
 * If the dialog has more than one tab, put focus into the first tab as soon as dialog is opened.
 *
 *        config.dialog_startupFocusTab = true;
 *
 * @cfg {Boolean} [dialog_startupFocusTab=false]
 * @member CKEDITOR.config
 */

/**
 * The distance of magnetic borders used in moving and resizing dialogs,
 * measured in pixels.
 *
 *        config.dialog_magnetDistance = 30;
 *
 * @cfg {Number} [dialog_magnetDistance=20]
 * @member CKEDITOR.config
 */

/**
 * The guideline to follow when generating the dialog buttons. There are 3 possible options:
 *
 * * `'OS'` - the buttons will be displayed in the default order of the user's OS;
 * * `'ltr'` - for Left-To-Right order;
 * * `'rtl'` - for Right-To-Left order.
 *
 * Example:
 *
 *        config.dialog_buttonsOrder = 'rtl';
 *
 * @since 3.5
 * @cfg {String} [dialog_buttonsOrder='OS']
 * @member CKEDITOR.config
 */

/**
 * The dialog contents to removed. It's a string composed by dialog name and tab name with a colon between them.
 *
 * Separate each pair with semicolon (see example).
 *
 * **Note:** All names are case-sensitive.
 *
 * **Note:** Be cautious when specifying dialog tabs that are mandatory,
 * like `'info'`, dialog functionality might be broken because of this!
 *
 *        config.removeDialogTabs = 'flash:advanced;image:Link';
 *
 * @since 3.5
 * @cfg {String} [removeDialogTabs='']
 * @member CKEDITOR.config
 */

/**
 * Tells if user should not be asked to confirm close, if any dialog field was modified.
 * By default it is set to `false` meaning that the confirmation dialog will be shown.
 *
 *        config.dialog_noConfirmCancel = true;
 *
 * @since 4.3
 * @cfg {Boolean} [dialog_noConfirmCancel=false]
 * @member CKEDITOR.config
 */

/**
 * Event fired when a dialog definition is about to be used to create a dialog into
 * an editor instance. This event makes it possible to customize the definition
 * before creating it.
 *
 * Note that this event is called only the first time a specific dialog is
 * opened. Successive openings will use the cached dialog, and this event will
 * not get fired.
 *
 * @event dialogDefinition
 * @member CKEDITOR
 * @param {CKEDITOR.dialog.definition} data The dialog defination that
 * is being loaded.
 * @param {CKEDITOR.editor} editor The editor instance that will use the dialog.
 */

/**
 * Event fired when a tab is going to be selected in a dialog.
 *
 * @event selectPage
 * @member CKEDITOR.dialog
 * @param data
 * @param {String} data.page The id of the page that it's gonna be selected.
 * @param {String} data.currentPage The id of the current page.
 */

/**
 * Event fired when the user tries to dismiss a dialog.
 *
 * @event cancel
 * @member CKEDITOR.dialog
 * @param data
 * @param {Boolean} data.hide Whether the event should proceed or not.
 */

/**
 * Event fired when the user tries to confirm a dialog.
 *
 * @event ok
 * @member CKEDITOR.dialog
 * @param data
 * @param {Boolean} data.hide Whether the event should proceed or not.
 */

/**
 * Event fired when a dialog is shown.
 *
 * @event show
 * @member CKEDITOR.dialog
 */

/**
 * Event fired when a dialog is shown.
 *
 * @event dialogShow
 * @member CKEDITOR.editor
 * @param {CKEDITOR.editor} editor This editor instance.
 * @param {CKEDITOR.dialog} data The opened dialog instance.
 */

/**
 * Event fired when a dialog is hidden.
 *
 * @event hide
 * @member CKEDITOR.dialog
 */

/**
 * Event fired when a dialog is hidden.
 *
 * @event dialogHide
 * @member CKEDITOR.editor
 * @param {CKEDITOR.editor} editor This editor instance.
 * @param {CKEDITOR.dialog} data The hidden dialog instance.
 */

/**
 * Event fired when a dialog is being resized. The event is fired on
 * both the {@link CKEDITOR.dialog} object and the dialog instance
 * since 3.5.3, previously it was only available in the global object.
 *
 * @static
 * @event resize
 * @member CKEDITOR.dialog
 * @param data
 * @param {CKEDITOR.dialog} data.dialog The dialog being resized (if
 * it is fired on the dialog itself, this parameter is not sent).
 * @param {String} data.skin The skin name.
 * @param {Number} data.width The new width.
 * @param {Number} data.height The new height.
 */

/**
 * Event fired when a dialog is being resized. The event is fired on
 * both the {@link CKEDITOR.dialog} object and the dialog instance
 * since 3.5.3, previously it was only available in the global object.
 *
 * @since 3.5
 * @event resize
 * @member CKEDITOR.dialog
 * @param data
 * @param {Number} data.width The new width.
 * @param {Number} data.height The new height.
 */

/**
 * Event fired when the dialog state changes, usually by {@link CKEDITOR.dialog#setState}.
 *
 * @since 4.5
 * @event state
 * @member CKEDITOR.dialog
 * @param data
 * @param {Number} data The new state. Either {@link CKEDITOR#DIALOG_STATE_IDLE} or {@link CKEDITOR#DIALOG_STATE_BUSY}.
 */
})(CMS.$);

(function ($) {
if (CKEDITOR && CKEDITOR.plugins && CKEDITOR.plugins.registered && CKEDITOR.plugins.registered.cmsresize) {
    return;
}
/**
 * Modified version of the resize plugin to support touch events.
 *
 * @license Copyright (c) 2003-2015, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or http://ckeditor.com/license
 */

CKEDITOR.plugins.add( 'cmsresize', {
    init: function( editor ) {
        function dragHandler( evt ) {
            var dx = evt.originalEvent.screenX - origin.x,
            dy = evt.originalEvent.screenY - origin.y,
            width = startSize.width,
            height = startSize.height,
            internalWidth = width + dx * ( resizeDir == 'rtl' ? -1 : 1 ),
            internalHeight = height + dy;

            if ( resizeHorizontal )
                width = Math.max( config.resize_minWidth, Math.min( internalWidth, config.resize_maxWidth ) );

            if ( resizeVertical )
                height = Math.max( config.resize_minHeight, Math.min( internalHeight, config.resize_maxHeight ) );

            // DO NOT impose fixed size with single direction resize. (#6308)
            editor.resize( resizeHorizontal ? width : null, height );
        }

        function dragEndHandler() {
            CMS.$(CKEDITOR.document.$).off( 'pointermove', dragHandler );
            CMS.$(CKEDITOR.document.$).off( 'pointerup', dragEndHandler );

            if ( editor.document ) {
                CMS.$(editor.document.$).off( 'pointermove', dragHandler );
                CMS.$(editor.document.$).off( 'pointerup', dragEndHandler );
            }

			// CMS.$(CKEDITOR.document.$).find('html').removeAttr('data-touch-action');
        }

        var config = editor.config;
        var spaceId = editor.ui.spaceId( 'resizer' );

        // Resize in the same direction of chrome,
        // which is identical to dir of editor element. (#6614)
        var resizeDir = editor.element ? editor.element.getDirection( 1 ) : 'ltr';

        !config.resize_dir && ( config.resize_dir = 'vertical' );
        ( config.resize_maxWidth === undefined ) && ( config.resize_maxWidth = 3000 );
        ( config.resize_maxHeight === undefined ) && ( config.resize_maxHeight = 3000 );
        ( config.resize_minWidth === undefined ) && ( config.resize_minWidth = 750 );
        ( config.resize_minHeight === undefined ) && ( config.resize_minHeight = 250 );

        if ( config.resize_enabled !== false ) {
            var container = null,
                origin, startSize,
                resizeHorizontal = ( config.resize_dir == 'both' || config.resize_dir == 'horizontal' ) && ( config.resize_minWidth != config.resize_maxWidth ),
                resizeVertical = ( config.resize_dir == 'both' || config.resize_dir == 'vertical' ) && ( config.resize_minHeight != config.resize_maxHeight );

            var mouseDownFn = CKEDITOR.tools.addFunction( function( $event ) {
                if ( !container )
                    container = editor.getResizable();

                startSize = { width: container.$.offsetWidth || 0, height: container.$.offsetHeight || 0 };
                origin = { x: $event.screenX, y: $event.screenY };

                config.resize_minWidth > startSize.width && ( config.resize_minWidth = startSize.width );
                config.resize_minHeight > startSize.height && ( config.resize_minHeight = startSize.height );

                CMS.$(CKEDITOR.document.$).on( 'pointermove', dragHandler );
                CMS.$(CKEDITOR.document.$).on( 'pointerup', dragEndHandler );

                if ( editor.document ) {
                    CMS.$(editor.document.$).on( 'pointermove', dragHandler );
                    CMS.$(editor.document.$).on( 'pointerup', dragEndHandler );
                }

                $event.preventDefault && $event.preventDefault();
            } );

			CMS.$(CKEDITOR.document.$).find('html').attr('data-touch-action', 'none');

            editor.on( 'destroy', function() {
                CKEDITOR.tools.removeFunction( mouseDownFn );
            } );

            editor.on( 'uiSpace', function( event ) {
                if ( event.data.space == 'bottom' ) {
                    var direction = '';
                    if ( resizeHorizontal && !resizeVertical )
                        direction = ' cke_resizer_horizontal';
                    if ( !resizeHorizontal && resizeVertical )
                        direction = ' cke_resizer_vertical';

                    var resizerHtml =
                        '<span' +
                        ' id="' + spaceId + '"' +
                        ' class="cms-ckeditor-resizer cke_resizer' + direction + ' cke_resizer_' + resizeDir + '"' +
                        ' title="' + CKEDITOR.tools.htmlEncode( editor.lang.common.resize ) + '"' +
                        ' onmousedown="CKEDITOR.tools.callFunction(' + mouseDownFn + ', event)"' +
                        '>' +
                        // BLACK LOWER RIGHT TRIANGLE (ltr)
                        // BLACK LOWER LEFT TRIANGLE (rtl)
                        ( resizeDir == 'ltr' ? '\u25E2' : '\u25E3' ) +
                        '</span>';

                    // Always sticks the corner of bottom space.
                    resizeDir == 'ltr' && direction == 'ltr' ? event.data.html += resizerHtml : event.data.html = resizerHtml + event.data.html;
                }
            }, editor, null, 100 );

            // Toggle the visibility of the resizer when an editor is being maximized or minimized.
            editor.on( 'maximize', function( event ) {
                editor.ui.space( 'resizer' )[ event.data == CKEDITOR.TRISTATE_ON ? 'hide' : 'show' ]();
            } );
        }
    }
} );

/**
 * The minimum editor width, in pixels, when resizing the editor interface by using the resize handle.
 * Note: It falls back to editor's actual width if it is smaller than the default value.
 *
 *        config.resize_minWidth = 500;
 *
 * @cfg {Number} [resize_minWidth=750]
 * @member CKEDITOR.config
 */

/**
 * The minimum editor height, in pixels, when resizing the editor interface by using the resize handle.
 * Note: It falls back to editor's actual height if it is smaller than the default value.
 *
 *        config.resize_minHeight = 600;
 *
 * @cfg {Number} [resize_minHeight=250]
 * @member CKEDITOR.config
 */

/**
 * The maximum editor width, in pixels, when resizing the editor interface by using the resize handle.
 *
 *        config.resize_maxWidth = 750;
 *
 * @cfg {Number} [resize_maxWidth=3000]
 * @member CKEDITOR.config
 */

/**
 * The maximum editor height, in pixels, when resizing the editor interface by using the resize handle.
 *
 *        config.resize_maxHeight = 600;
 *
 * @cfg {Number} [resize_maxHeight=3000]
 * @member CKEDITOR.config
 */

/**
 * Whether to enable the resizing feature. If this feature is disabled, the resize handle will not be visible.
 *
 *        config.resize_enabled = false;
 *
 * @cfg {Boolean} [resize_enabled=true]
 * @member CKEDITOR.config
 */

/**
 * The dimensions for which the editor resizing is enabled. Possible values
 * are `both`, `vertical`, and `horizontal`.
 *
 *        config.resize_dir = 'both';
 *
 * @since 3.3
 * @cfg {String} [resize_dir='vertical']
 * @member CKEDITOR.config
 */
})(CMS.$);

(function ($) {
    if (CKEDITOR && CKEDITOR.plugins && CKEDITOR.plugins.registered && CKEDITOR.plugins.registered.cmsplugins) {
        return;
    }

    /**
     * Determine if we should return `div` or `span` based on the
     * plugin markup.
     *
     * @function getFakePluginElement
     * @private
     * @param {String} pluginMarkup valid html hopefully
     * @returns {String} div|span
     */
    function getFakePluginElement(pluginMarkup) {
        var innerTags = (pluginMarkup.match(/<([\S]*?)\s[\s\S]*?>/) || [0, false]).splice(1);

        var containsAnyBlockLikeElements = innerTags.some(function (tag) {
            return tag && CKEDITOR.dtd.$block[tag];
        });

        var fakeRealType = 'span';

        if (containsAnyBlockLikeElements) {
            fakeRealType = 'div';
        }

        return fakeRealType;
    }

    /**
     * @function replaceTagName
     * @private
     * @param {jQuery} elements
     * @param {String} tagName
     */
    function replaceTagName(elements, tagName) {
        elements.each(function (i, el) {
            var newElement;

            var element = $(el);

            newElement = $('<' + tagName + '>');

            // attributes
            $.each(el.attributes, function (index, attribute) {
                newElement.attr(attribute.nodeName, attribute.nodeValue);
            });

            // content
            newElement.html(element.html());

            element.replaceWith(newElement);
        });
    }

    CKEDITOR.plugins.add('cmsplugins', {

        // Register the icons. They must match command names.
        icons: 'cmsplugins',

        // The plugin initialization logic goes inside this method.
        init: function (editor) {
            var that = this;

            this.options = CMS.CKEditor.options.settings;
            this.editor = editor;

            /**
             * populated with _fresh_ child plugins
             */
            this.child_plugins = [];
            this.setupCancelCleanupCallback(this.options);

            // don't do anything if there are no plugins defined
            if (this.options === undefined || this.options.plugins === undefined) {
                return false;
            }

            this.setupDialog();

            // add the button
            this.editor.ui.add('cmsplugins', CKEDITOR.UI_PANELBUTTON, {
                toolbar: 'cms,0',
                label: this.options.lang.toolbar,
                title: this.options.lang.toolbar,
                className: 'cke_panelbutton__cmsplugins',
                modes: { wysiwyg: 1 },
                editorFocus: 0,

                panel: {
                    css: [CKEDITOR.skin.getPath('editor')].concat(that.editor.config.contentsCss),
                    attributes: { 'role': 'cmsplugins', 'aria-label': this.options.lang.aria }
                },

                // this is called when creating the dropdown list
                onBlock: function (panel, block) {
                    block.element.setHtml(that.editor.plugins.cmsplugins.setupDropdown());

                    var anchors = $(block.element.$).find('.cke_panel_listItem a');

                    anchors.bind('click', function (e) {
                        e.preventDefault();

                        that.addPlugin($(this), panel);
                    });
                }
            });

            // handle edit event via context menu
            if (this.editor.contextMenu) {
                this.setupContextMenu();
            }

            this.editor.addCommand('cmspluginsEdit', {
                exec: function () {
                    var element = that.getElementFromSelection();
                    var plugin = that.getPluginWidget(element);

                    if (plugin) {
                        that.editPlugin(plugin);
                    }
                }
            });

            // handle edit event on double click
            // if event is a jQuery event (touchend), than we mutate
            // event a bit so we make the payload similar to what ckeditor.event produces
            var handleEdit = function (event) {
                var element;

                if (event.type === 'touchend' || event.type === 'click') {
                    var cmsPluginNode = $(event.currentTarget).closest('cms-plugin')[0];

                    // pick cke_widget span
                    // eslint-disable-next-line new-cap
                    element = new CKEDITOR.dom.element(cmsPluginNode).getParent();

                    event.data = event.data || {};
                    // have to fake selection to be able to replace markup after editing
                    that.editor.getSelection().fake(element);
                }

                that.editor.execCommand('cmspluginsEdit');
            };

            this.editor.on('doubleclick', handleEdit);
            this.editor.on('instanceReady', function () {
                CMS.$('cms-plugin', CMS.$('iframe.cke_wysiwyg_frame')[0]
                    .contentWindow.document.documentElement).on('click touchend', handleEdit);
            });

            this.setupDataProcessor();
        },

        getElementFromSelection: function () {
            var selection = this.editor.getSelection();
            var element = selection.getSelectedElement() ||
                selection.getCommonAncestor().getAscendant('cms-plugin', true);

            return element;
        },

        getPluginWidget: function (element) {
            if (!element) {
                return null;
            }
            return element.getAscendant('cms-plugin', true) || element.findOne('cms-plugin');
        },

        setupDialog: function () {
            var that = this;
            var definition = function () {
                return {
                    title: '',
                    minWidth: 600,
                    minHeight: 300,
                    contents: [{
                        elements: [
                            {
                                type: 'html',
                                html: '<iframe style="position:static; width:100%; height:100%; border:none;" />'
                            }
                        ]
                    }],
                    onOk: function () {
                        var iframe = $(CKEDITOR.dialog.getCurrent().parts.contents.$).find('iframe').contents();

                        iframe.find('form').submit();

                        // catch the reload event and reattach
                        var reload = CMS.API.Helpers.reloadBrowser;

                        CMS.API.Helpers.reloadBrowser = function () {
                            CKEDITOR.dialog.getCurrent().hide();

                            that.insertPlugin(CMS.API.Helpers.dataBridge);

                            CMS.API.Helpers.reloadBrowser = reload;
                            return false;
                        };
                        return false;
                    }
                };
            };

            // set default definition and open dialog
            CKEDITOR.dialog.add('cmspluginsDialog', definition);
        },

        setupDropdown: function () {
            var tpl = '<div class="cke_panel_block">';

            // loop through the groups
            $.each(this.options.plugins, function (i, group) {
                // add template
                tpl += '<h1 class="cke_panel_grouptitle">' + group.group + '</h1>';
                tpl += '<ul role="presentation" class="cke_panel_list">';
                // loop through the plugins
                $.each(group.items, function (ii, item) {
                    tpl += '<li class="cke_panel_listItem"><a href="#" rel="' + item.type + '">' +
                        item.title + '</a></li>';
                });
                tpl += '</ul>';
            });

            tpl += '</div>';

            return tpl;
        },

        setupContextMenu: function () {
            var that = this;

            this.editor.addMenuGroup('cmspluginsGroup');
            this.editor.addMenuItem('cmspluginsItem', {
                label: this.options.lang.edit,
                icon: CMS.CKEditor.options.settings.static_url + '/ckeditor_plugins/cmsplugins/icons/cmsplugins.png',
                command: 'cmspluginsEdit',
                group: 'cmspluginsGroup'
            });

            this.editor.removeMenuItem('image');

            this.editor.contextMenu.addListener(function (element) {
                var plugin = that.getPluginWidget(element);

                if (plugin) {
                    return { cmspluginsItem: CKEDITOR.TRISTATE_OFF };
                }
            });
        },

        editPlugin: function (element) {
            var id = element.getAttribute('id');

            this.editor.openDialog('cmspluginsDialog');
            var body = CMS.$(document);

            // now tweak in dynamic stuff
            var dialog = CKEDITOR.dialog.getCurrent();

            dialog.resize(body.width() * 0.8, body.height() * 0.7); // eslint-disable-line no-magic-numbers
            $(dialog.getElement().$).addClass('cms-ckeditor-dialog');
            $(dialog.parts.title.$).text(this.options.lang.edit);

            var textPluginUrl = window.location.href;
            var childPluginUrl = textPluginUrl.replace(
                /(add-plugin|edit-plugin).*$/,
                'edit-plugin/' + id + '/?_popup=1&no_preview'
            );

            $(dialog.parts.contents.$).find('iframe').attr('src', childPluginUrl)
                .bind('load', function () {
                    var contents = $(this).contents();

                    contents.find('body').addClass('ckeditor-popup');
                    contents.find('.submit-row').hide();
                    contents.find('#container').css({
                        'min-width': 0,
                        'padding': 0
                    });
                });
        },

        addPlugin: function (item, panel) {
            var that = this;

            // hide the panel
            panel.hide();

            this.editor.focus();
            this.editor.fire('saveSnapshot');

            // gather data
            var data = {
                placeholder_id: this.options.placeholder_id,
                plugin_type: item.attr('rel'),
                plugin_parent: this.options.plugin_id,
                plugin_language: this.options.plugin_language
            };

            that.addPluginDialog(item, data);
        },

        addPluginDialog: function (item, data) {
            var body = $(document);
            // open the dialog
            var selected_text = this.editor.getSelection().getSelectedText();

            this.editor.openDialog('cmspluginsDialog');

            // now tweak in dynamic stuff
            var dialog = CKEDITOR.dialog.getCurrent();

            dialog.resize(body.width() * 0.8, body.height() * 0.7); // eslint-disable-line no-magic-numbers
            $(dialog.getElement().$).addClass('cms-ckeditor-dialog');
            $(dialog.parts.title.$).text(this.options.lang.add);
            $(dialog.parts.contents.$).find('iframe').attr('src', this.options.add_plugin_url + '?' + $.param(data))
                .bind('load', function () {
                    var contents = $(this).contents();

                    contents.find('.submit-row').hide().end()
                        .find('#container').css('min-width', 0).css('padding', 0);

                    var inputs = contents.find('.js-ckeditor-use-selected-text');

                    if (!inputs.length) {
                        inputs = contents.find('#id_name');
                    }

                    if (!(inputs.val() && inputs.val().trim())) {
                        inputs.val(selected_text);
                    }
                });
        },

        insertPlugin: function (data) {
            var that = this;

            $.ajax({
                method: 'GET',
                url: that.options.render_plugin_url,
                data: {
                    token: that.options.action_token,
                    plugin: data.plugin_id
                }
            }).done(function (res) {
                // in case it's a fresh text plugin children don't have to be
                // deleted separately
                if (!that.options.delete_on_cancel) {
                    that.child_plugins.push(data.plugin_id);
                }

                that.editor.insertHtml(res, 'unfiltered_html');
                that.editor.fire('updateSnapshot');
            });
        },

        /**
         * Sets up cleanup requests. If the plugin itself or child plugin was created and then
         * creation was cancelled - we need to clean up created plugins.
         *
         * @method setupCancelCleanupCallback
         * @public
         * @param {Object} data plugin data
         */
        setupCancelCleanupCallback: function setupCancelCleanupCallback() {
            if (!window.parent || !window.parent.CMS || !window.parent.CMS.API || !window.parent.CMS.API.Helpers) {
                return;
            }
            var that = this;
            var CMS = window.parent.CMS;
            var cancelModalCallback = function cancelModalCallback(e, opts) {
                if (!that.options.delete_on_cancel && !that.child_plugins.length) {
                    return;
                }
                e.preventDefault();
                CMS.API.Toolbar.showLoader();
                var data = {
                    token: that.options.action_token
                };

                if (!that.options.delete_on_cancel) {
                    data.child_plugins = that.child_plugins;
                }
                $.ajax({
                    method: 'POST',
                    url: that.options.cancel_plugin_url,
                    data: data,
                    // use 'child_plugins' instead of default 'child_plugins[]'
                    traditional: true
                }).done(function () {
                    CMS.API.Helpers.removeEventListener('modal-close.text-plugin-' + that.options.plugin_id);
                    opts.instance.close();
                }).fail(function (res) {
                    CMS.API.Messages.open({
                        message: res.responseText + ' | ' + res.status + ' ' + res.statusText,
                        delay: 0,
                        error: true
                    });
                });
            };

            CMS.API.Helpers.addEventListener(
                'modal-close.text-plugin-' + that.options.plugin_id,
                cancelModalCallback
            );
        },

        setupDataProcessor: function () {
            var that = this;

            // priorities of callback execution, see http://docs.ckeditor.com/#!/api/CKEDITOR.editor-event-toHtml
            var BEFORE_PROCESSING_STARTED = 1;
            var BEFORE_MARKUP_IS_PARSED = 4;

            /**
             * This override is required for the inline plugins that have preceding space, because otherwise CKEditor
             * would remove that space while parsing
             * html.
             *
             * Ref: https://github.com/ckeditor/ckeditor-dev/blob/master/core/htmlparser/fragment.js#L484
             */
            CKEDITOR.htmlParser.element = CKEDITOR.tools.override(CKEDITOR.htmlParser.element, function (original) {
                return function (name, attributes) {
                    original.call(this, name, attributes);

                    if (name === 'cms-plugin' && attributes['data-cke-real-element-type'] === 'span') {
                        this._.isBlockLike = false;
                    }
                };
            });

            /**
             * @function isBlockLikeChildren
             * @public
             * @param {CKEDITOR.htmlParser.element} element
             * @returns {Boolean}
             */
            function isBlockLikeChildren(element) {
                return element.attributes && element.attributes['data-cke-real-element-type'] === 'div';
            }

            this.editor.dataProcessor.dataFilter.addRules(
                {
                    elements: {
                        span: function (element) {
                            if (CKEDITOR.plugins.widget.isParserWidgetWrapper(element)) {
                                var cmsPluginNode = element.getFirst();

                                if (isBlockLikeChildren(cmsPluginNode)) {
                                    // eslint-disable-next-line new-cap
                                    var newWrapper = new CKEDITOR.htmlParser.element(
                                        'div',
                                        $.extend({}, element.attributes)
                                    );

                                    that.editor.widgets.registered.cmswidget.inline = false;
                                    newWrapper.children = element.children;
                                    newWrapper.removeClass('cke_widget_inline');
                                    newWrapper.removeClass('cke_widget_force_block');
                                    newWrapper.addClass('cke_widget_block');
                                    cmsPluginNode.attributes['data-cke-real-element-type'] = 'div';

                                    return newWrapper;
                                }

                                that.editor.widgets.registered.cmswidget.inline = true;
                                cmsPluginNode.attributes['data-cke-real-element-type'] = 'span';
                            }
                            return element;
                        }
                    }
                },
                {
                    priority: 1,
                    applyToAll: true
                }
            );

            // need to update cms-plugin-nodes with fake "real type" so
            // ckeditor treats them as flow / phrasing elements correctly
            // + we check if plugin markup should be rendered or not
            this.editor.on('toHtml', function (e) {
                // now i have two problems
                var newMarkup = e.data.dataValue.replace(
                    /<cms-plugin(.*?)>([\s\S]*?)<\/cms-plugin>/gi,
                    function (all, attributes, pluginMarkup) {
                        var fakeRealType = getFakePluginElement(pluginMarkup);

                        if (attributes.match(/render-plugin=["']?false/gi)) {
                            return '<cms-plugin data-cke-real-element-type="' + fakeRealType + '" ' + attributes + '>' +
                                    '<' + fakeRealType + ' class="cms-ckeditor-plugin-label">' +
                                        attributes.replace(/[\s\S]*alt=["']([\s\S]*?)['"][\s\S]*/, '$1') +
                                    '</' + fakeRealType + '>' +
                                '</cms-plugin>';
                        }

                        return '<cms-plugin data-cke-real-element-type="' + fakeRealType + '" ' + attributes + '>' +
                            pluginMarkup +
                            '</cms-plugin>';
                    }
                );

                // in case we have a stale markup with <p> tag wrapped around
                // we want to avoid a situation where browser would try to unwrap the tags in a way that would
                // break the markup. what we do is we replace <cms-plugin> tags with divs if that is necessary,
                // unwrap them with jQuery (which uses browser mechanism) and then replace the divs back
                if (newMarkup.match(/<cms-plugin[^>]*(?=data-cke-real-element-type=\"div)/)) {
                    // eslint-disable-next-line max-len
                    var blockLevelPluginRegex = /<cms-plugin([^>]*(?=data-cke-real-element-type=\"div).*?>.*?<\/)cms-plugin>/g;

                    var unwrappedMarkup = newMarkup.replace(blockLevelPluginRegex, '<div$1div>');
                    // have to create a wrapper, otherwise we won't be able to return markup back
                    var unwrappedElementsWrapper = $(unwrappedMarkup).wrapAll('<div>').parent();
                    var wrappers = unwrappedElementsWrapper.find('div[data-cke-real-element-type="div"]');

                    replaceTagName(wrappers, 'cms-plugin');

                    newMarkup = unwrappedElementsWrapper.html();
                }

                e.data.dataValue = newMarkup;
            }, null, null, BEFORE_MARKUP_IS_PARSED);

            this.editor.on('toHtml', function () {
                // reset widgets to inline again to avoid creating block-level inline widget
                if (that.editor.widgets && that.editor.widgets.registered && that.editor.widgets.registered.cmswidget) {
                    that.editor.widgets.registered.cmswidget.inline = true;
                }
            }, null, null, BEFORE_PROCESSING_STARTED);
        }
    });
})(CMS.$);

(function ($) {
    // CMS.$ will be passed for $
    $(function () {
        /**
         * CMS.CKEditor
         *
         * @description: Adds cms specific plugins to CKEditor
         */
        CMS.CKEditor = {

            options: {
                // ckeditor default settings, will be overwritten by CKEDITOR_SETTINGS
                language: 'en',
                skin: 'moono',
                toolbar_CMS: [
                    ['Undo', 'Redo'],
                    ['cmsplugins', 'cmswidget', '-', 'ShowBlocks'],
                    ['Format', 'Styles'],
                    ['TextColor', 'BGColor', '-', 'PasteText', 'PasteFromWord'],
                    ['Maximize', ''],
                    '/',
                    ['Bold', 'Italic', 'Underline', '-', 'Subscript', 'Superscript', '-', 'RemoveFormat'],
                    ['JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock'],
                    ['HorizontalRule'],
                    ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Table'],
                    ['Source']
                ],
                toolbar_HTMLField: [
                    ['Undo', 'Redo'],
                    ['ShowBlocks'],
                    ['Format', 'Styles'],
                    ['TextColor', 'BGColor', '-', 'PasteText', 'PasteFromWord'],
                    ['Maximize', ''],
                    '/',
                    ['Bold', 'Italic', 'Underline', '-', 'Subscript', 'Superscript', '-', 'RemoveFormat'],
                    ['JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock'],
                    ['HorizontalRule'],
                    ['Link', 'Unlink'],
                    ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Table'],
                    ['Source']
                ],

                allowedContent: true,
                toolbarCanCollapse: false,
                removePlugins: 'resize',
                extraPlugins: ''
            },

            init: function (container, options, settings) {
                if ($('#' + container).length > 0) {
                    this.container = $('#' + container);
                    // add additional settings to options
                    this.options.toolbar = settings.toolbar;
                    this.options = $.extend(false, {
                        settings: settings
                    }, this.options, options);

                    // add extra plugins that we absolutely must have
                    this.options.extraPlugins = this.options.extraPlugins +=
                        ',cmsplugins,cmswidget,cmsresize,widget';

                    document.createElement('cms-plugin');
                    CKEDITOR.dtd['cms-plugin'] = CKEDITOR.dtd.div;
                    CKEDITOR.dtd.$inline['cms-plugin'] = 1;
                    // has to be here, otherwise extra <p> tags appear
                    CKEDITOR.dtd.$nonEditable['cms-plugin'] = 1;
                    CKEDITOR.dtd.$transparent['cms-plugin'] = 1;
                    CKEDITOR.dtd.body['cms-plugin'] = 1;

                    // add additional plugins (autoloads plugins.js)
                    CKEDITOR.skin.addIcon('cmsplugins', settings.static_url +
                        '/ckeditor_plugins/cmsplugins/icons/cmsplugins.png');

                    // render ckeditor
                    this.editor = CKEDITOR.replace(container, this.options);

                    // add additional styling
                    CKEDITOR.on('instanceReady', $.proxy(CMS.CKEditor, 'setup'));
                }
            },

            // setup is called after ckeditor has been initialized
            setup: function () {
                // auto maximize modal if alone in a modal
                var that = this;
                var win = window.parent || window;
                // 70px is hardcoded to make it more performant. 20px + 20px - paddings, 30px label height
                var TOOLBAR_HEIGHT_WITH_PADDINGS = 70;

                if (this._isAloneInModal()) {
                    that.editor.resize('100%', win.CMS.$('.cms-modal-frame').height() - TOOLBAR_HEIGHT_WITH_PADDINGS);
                    this.editor.execCommand('maximize');
                    win.CMS.API.Helpers.addEventListener('modal-maximized modal-restored', function () {
                        try {
                            if (!$('.cke_maximized').length) {
                                that.editor.resize(
                                    '100%',
                                    win.CMS.$('.cms-modal-frame').height() - TOOLBAR_HEIGHT_WITH_PADDINGS
                                );
                            }
                        } catch (e) {
                            // sometimes throws errors if modal with text plugin is closed too fast
                        }
                    });
                }

                // add css tweks to the editor
                this.styles();
                this._resizing();
            },

            styles: function () {
                // add styling to source and fullscreen view
                $('.cke_button__maximize, .cke_button__source').parent()
                    .css('margin-right', 0).parent()
                    .css('float', 'right');
            },

            _resizing: function () {
                $(document).on('pointerdown', '.cms-ckeditor-resizer', function (e) {
                    e.preventDefault();
                    var event = new CMS.$.Event('mousedown');

                    $.extend(event, {
                        screenX: e.originalEvent.screenX,
                        screenY: e.originalEvent.screenY
                    });
                    $(this).trigger(event);
                });
            },

            _isAloneInModal: function () {
                var body = this.container.closest('body');

                // return true if the ckeditor is alone in a modal popup
                return body.is('.app-djangocms_text_ckeditor.model-text') || // Django >= 1.7
                    body.is('.djangocms_text_ckeditor-text'); // Django < 1.7
            }
        };
    });
})(CMS.$);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNrZWRpdG9yLmpzIiwicGx1Z2luLmpzIiwiY21zLmNrZWRpdG9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxb0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBOUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqMUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2aEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImJ1bmRsZS1kNjVmN2U0YzI3LmNtcy5ja2VkaXRvci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IChjKSAyMDAzLTIwMTYsIENLU291cmNlIC0gRnJlZGVyaWNvIEtuYWJiZW4uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5Gb3IgbGljZW5zaW5nLCBzZWUgTElDRU5TRS5tZCBvciBodHRwOi8vY2tlZGl0b3IuY29tL2xpY2Vuc2VcbiovXG4oZnVuY3Rpb24oKXtpZih3aW5kb3cuQ0tFRElUT1ImJndpbmRvdy5DS0VESVRPUi5kb20pcmV0dXJuO3dpbmRvdy5DS0VESVRPUnx8KHdpbmRvdy5DS0VESVRPUj1mdW5jdGlvbigpe3ZhciBhPS8oXnwuKltcXFxcXFwvXSlja2VkaXRvclxcLmpzKD86XFw/Lip8Oy4qKT8kL2ksZD17dGltZXN0YW1wOlwiRzg3RVwiLHZlcnNpb246XCI0LjUuMTFcIixyZXZpc2lvbjpcIjM4NzZlNzNcIixybmQ6TWF0aC5mbG9vcig5MDAqTWF0aC5yYW5kb20oKSkrMTAwLF86e3BlbmRpbmc6W10sYmFzZVBhdGhTcmNQYXR0ZXJuOmF9LHN0YXR1czpcInVubG9hZGVkXCIsYmFzZVBhdGg6ZnVuY3Rpb24oKXt2YXIgYj13aW5kb3cuQ0tFRElUT1JfQkFTRVBBVEh8fFwiXCI7aWYoIWIpZm9yKHZhciBjPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGw9Y1tkXS5zcmMubWF0Y2goYSk7aWYobCl7Yj1sWzFdO2JyZWFrfX0tMT09Yi5pbmRleE9mKFwiOi9cIikmJlwiLy9cIiE9Yi5zbGljZSgwLDIpJiYoYj0wPT09Yi5pbmRleE9mKFwiL1wiKT9sb2NhdGlvbi5ocmVmLm1hdGNoKC9eLio/OlxcL1xcL1teXFwvXSovKVswXStcbmI6bG9jYXRpb24uaHJlZi5tYXRjaCgvXlteXFw/XSpcXC8oPzopLylbMF0rYik7aWYoIWIpdGhyb3cnVGhlIENLRWRpdG9yIGluc3RhbGxhdGlvbiBwYXRoIGNvdWxkIG5vdCBiZSBhdXRvbWF0aWNhbGx5IGRldGVjdGVkLiBQbGVhc2Ugc2V0IHRoZSBnbG9iYWwgdmFyaWFibGUgXCJDS0VESVRPUl9CQVNFUEFUSFwiIGJlZm9yZSBjcmVhdGluZyBlZGl0b3IgaW5zdGFuY2VzLic7cmV0dXJuIGJ9KCksZ2V0VXJsOmZ1bmN0aW9uKGEpey0xPT1hLmluZGV4T2YoXCI6L1wiKSYmMCE9PWEuaW5kZXhPZihcIi9cIikmJihhPXRoaXMuYmFzZVBhdGgrYSk7dGhpcy50aW1lc3RhbXAmJlwiL1wiIT1hLmNoYXJBdChhLmxlbmd0aC0xKSYmIS9bJj9ddD0vLnRlc3QoYSkmJihhKz0oMDw9YS5pbmRleE9mKFwiP1wiKT9cIlxceDI2XCI6XCI/XCIpK1widFxceDNkXCIrdGhpcy50aW1lc3RhbXApO3JldHVybiBhfSxkb21SZWFkeTpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt0cnl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcj8oZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixcbmEsITEpLGIoKSk6ZG9jdW1lbnQuYXR0YWNoRXZlbnQmJlwiY29tcGxldGVcIj09PWRvY3VtZW50LnJlYWR5U3RhdGUmJihkb2N1bWVudC5kZXRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLGEpLGIoKSl9Y2F0Y2goYyl7fX1mdW5jdGlvbiBiKCl7Zm9yKHZhciBhO2E9Yy5zaGlmdCgpOylhKCl9dmFyIGM9W107cmV0dXJuIGZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGQoKXt0cnl7ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKFwibGVmdFwiKX1jYXRjaChlKXtzZXRUaW1lb3V0KGQsMSk7cmV0dXJufWEoKX1jLnB1c2goYik7XCJjb21wbGV0ZVwiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmc2V0VGltZW91dChhLDEpO2lmKDE9PWMubGVuZ3RoKWlmKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixhLCExKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixhLCExKTtlbHNlIGlmKGRvY3VtZW50LmF0dGFjaEV2ZW50KXtkb2N1bWVudC5hdHRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLFxuYSk7d2luZG93LmF0dGFjaEV2ZW50KFwib25sb2FkXCIsYSk7Yj0hMTt0cnl7Yj0hd2luZG93LmZyYW1lRWxlbWVudH1jYXRjaCh1KXt9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsJiZiJiZkKCl9fX0oKX0sYj13aW5kb3cuQ0tFRElUT1JfR0VUVVJMO2lmKGIpe3ZhciBjPWQuZ2V0VXJsO2QuZ2V0VXJsPWZ1bmN0aW9uKGEpe3JldHVybiBiLmNhbGwoZCxhKXx8Yy5jYWxsKGQsYSl9fXJldHVybiBkfSgpKTtcbkNLRURJVE9SLmV2ZW50fHwoQ0tFRElUT1IuZXZlbnQ9ZnVuY3Rpb24oKXt9LENLRURJVE9SLmV2ZW50LmltcGxlbWVudE9uPWZ1bmN0aW9uKGEpe3ZhciBkPUNLRURJVE9SLmV2ZW50LnByb3RvdHlwZSxiO2ZvcihiIGluIGQpbnVsbD09YVtiXSYmKGFbYl09ZFtiXSl9LENLRURJVE9SLmV2ZW50LnByb3RvdHlwZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGY9ZCh0aGlzKTtyZXR1cm4gZlthXXx8KGZbYV09bmV3IGIoYSkpfXZhciBkPWZ1bmN0aW9uKGEpe2E9YS5nZXRQcml2YXRlJiZhLmdldFByaXZhdGUoKXx8YS5ffHwoYS5fPXt9KTtyZXR1cm4gYS5ldmVudHN8fChhLmV2ZW50cz17fSl9LGI9ZnVuY3Rpb24oYSl7dGhpcy5uYW1lPWE7dGhpcy5saXN0ZW5lcnM9W119O2IucHJvdG90eXBlPXtnZXRMaXN0ZW5lckluZGV4OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGQ9dGhpcy5saXN0ZW5lcnM7YjxkLmxlbmd0aDtiKyspaWYoZFtiXS5mbj09YSlyZXR1cm4gYjtyZXR1cm4tMX19O1xucmV0dXJue2RlZmluZTpmdW5jdGlvbihiLGQpe3ZhciBnPWEuY2FsbCh0aGlzLGIpO0NLRURJVE9SLnRvb2xzLmV4dGVuZChnLGQsITApfSxvbjpmdW5jdGlvbihiLGQsZyxrLGwpe2Z1bmN0aW9uIG0oYSxlLEEsbCl7YT17bmFtZTpiLHNlbmRlcjp0aGlzLGVkaXRvcjphLGRhdGE6ZSxsaXN0ZW5lckRhdGE6ayxzdG9wOkEsY2FuY2VsOmwscmVtb3ZlTGlzdGVuZXI6dX07cmV0dXJuITE9PT1kLmNhbGwoZyxhKT8hMTphLmRhdGF9ZnVuY3Rpb24gdSgpe0EucmVtb3ZlTGlzdGVuZXIoYixkKX12YXIgZT1hLmNhbGwodGhpcyxiKTtpZigwPmUuZ2V0TGlzdGVuZXJJbmRleChkKSl7ZT1lLmxpc3RlbmVycztnfHwoZz10aGlzKTtpc05hTihsKSYmKGw9MTApO3ZhciBBPXRoaXM7bS5mbj1kO20ucHJpb3JpdHk9bDtmb3IodmFyIHI9ZS5sZW5ndGgtMTswPD1yO3ItLSlpZihlW3JdLnByaW9yaXR5PD1sKXJldHVybiBlLnNwbGljZShyKzEsMCxtKSx7cmVtb3ZlTGlzdGVuZXI6dX07ZS51bnNoaWZ0KG0pfXJldHVybntyZW1vdmVMaXN0ZW5lcjp1fX0sXG5vbmNlOmZ1bmN0aW9uKCl7dmFyIGE9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxiPWFbMV07YVsxXT1mdW5jdGlvbihhKXthLnJlbW92ZUxpc3RlbmVyKCk7cmV0dXJuIGIuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gdGhpcy5vbi5hcHBseSh0aGlzLGEpfSxjYXB0dXJlOmZ1bmN0aW9uKCl7Q0tFRElUT1IuZXZlbnQudXNlQ2FwdHVyZT0xO3ZhciBhPXRoaXMub24uYXBwbHkodGhpcyxhcmd1bWVudHMpO0NLRURJVE9SLmV2ZW50LnVzZUNhcHR1cmU9MDtyZXR1cm4gYX0sZmlyZTpmdW5jdGlvbigpe3ZhciBhPTAsYj1mdW5jdGlvbigpe2E9MX0sZz0wLGs9ZnVuY3Rpb24oKXtnPTF9O3JldHVybiBmdW5jdGlvbihsLG0sdSl7dmFyIGU9ZCh0aGlzKVtsXTtsPWE7dmFyIEE9ZzthPWc9MDtpZihlKXt2YXIgcj1lLmxpc3RlbmVycztpZihyLmxlbmd0aClmb3IodmFyIHI9ci5zbGljZSgwKSx4LEQ9MDtEPHIubGVuZ3RoO0QrKyl7aWYoZS5lcnJvclByb29mKXRyeXt4PVxucltEXS5jYWxsKHRoaXMsdSxtLGIsayl9Y2F0Y2gocSl7fWVsc2UgeD1yW0RdLmNhbGwodGhpcyx1LG0sYixrKTshMT09PXg/Zz0xOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB4JiYobT14KTtpZihhfHxnKWJyZWFrfX1tPWc/ITE6XCJ1bmRlZmluZWRcIj09dHlwZW9mIG0/ITA6bTthPWw7Zz1BO3JldHVybiBtfX0oKSxmaXJlT25jZTpmdW5jdGlvbihhLGIsZyl7Yj10aGlzLmZpcmUoYSxiLGcpO2RlbGV0ZSBkKHRoaXMpW2FdO3JldHVybiBifSxyZW1vdmVMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe3ZhciBnPWQodGhpcylbYV07aWYoZyl7dmFyIGs9Zy5nZXRMaXN0ZW5lckluZGV4KGIpOzA8PWsmJmcubGlzdGVuZXJzLnNwbGljZShrLDEpfX0scmVtb3ZlQWxsTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dmFyIGE9ZCh0aGlzKSxiO2ZvcihiIGluIGEpZGVsZXRlIGFbYl19LGhhc0xpc3RlbmVyczpmdW5jdGlvbihhKXtyZXR1cm4oYT1kKHRoaXMpW2FdKSYmMDxhLmxpc3RlbmVycy5sZW5ndGh9fX0oKSk7XG5DS0VESVRPUi5lZGl0b3J8fChDS0VESVRPUi5lZGl0b3I9ZnVuY3Rpb24oKXtDS0VESVRPUi5fLnBlbmRpbmcucHVzaChbdGhpcyxhcmd1bWVudHNdKTtDS0VESVRPUi5ldmVudC5jYWxsKHRoaXMpfSxDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmZpcmU9ZnVuY3Rpb24oYSxkKXthIGlue2luc3RhbmNlUmVhZHk6MSxsb2FkZWQ6MX0mJih0aGlzW2FdPSEwKTtyZXR1cm4gQ0tFRElUT1IuZXZlbnQucHJvdG90eXBlLmZpcmUuY2FsbCh0aGlzLGEsZCx0aGlzKX0sQ0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5maXJlT25jZT1mdW5jdGlvbihhLGQpe2EgaW57aW5zdGFuY2VSZWFkeToxLGxvYWRlZDoxfSYmKHRoaXNbYV09ITApO3JldHVybiBDS0VESVRPUi5ldmVudC5wcm90b3R5cGUuZmlyZU9uY2UuY2FsbCh0aGlzLGEsZCx0aGlzKX0sQ0tFRElUT1IuZXZlbnQuaW1wbGVtZW50T24oQ0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZSkpO1xuQ0tFRElUT1IuZW52fHwoQ0tFRElUT1IuZW52PWZ1bmN0aW9uKCl7dmFyIGE9bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLGQ9YS5tYXRjaCgvZWRnZVsgXFwvXShcXGQrLj9cXGQqKS8pLGI9LTE8YS5pbmRleE9mKFwidHJpZGVudC9cIiksYj0hKCFkJiYhYiksYj17aWU6YixlZGdlOiEhZCx3ZWJraXQ6IWImJi0xPGEuaW5kZXhPZihcIiBhcHBsZXdlYmtpdC9cIiksYWlyOi0xPGEuaW5kZXhPZihcIiBhZG9iZWFpci9cIiksbWFjOi0xPGEuaW5kZXhPZihcIm1hY2ludG9zaFwiKSxxdWlya3M6XCJCYWNrQ29tcGF0XCI9PWRvY3VtZW50LmNvbXBhdE1vZGUmJighZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHwxMD5kb2N1bWVudC5kb2N1bWVudE1vZGUpLG1vYmlsZTotMTxhLmluZGV4T2YoXCJtb2JpbGVcIiksaU9TOi8oaXBhZHxpcGhvbmV8aXBvZCkvLnRlc3QoYSksaXNDdXN0b21Eb21haW46ZnVuY3Rpb24oKXtpZighdGhpcy5pZSlyZXR1cm4hMTt2YXIgYT1kb2N1bWVudC5kb21haW4sYj13aW5kb3cubG9jYXRpb24uaG9zdG5hbWU7XG5yZXR1cm4gYSE9YiYmYSE9XCJbXCIrYitcIl1cIn0sc2VjdXJlOlwiaHR0cHM6XCI9PWxvY2F0aW9uLnByb3RvY29sfTtiLmdlY2tvPVwiR2Vja29cIj09bmF2aWdhdG9yLnByb2R1Y3QmJiFiLndlYmtpdCYmIWIuaWU7Yi53ZWJraXQmJigtMTxhLmluZGV4T2YoXCJjaHJvbWVcIik/Yi5jaHJvbWU9ITA6Yi5zYWZhcmk9ITApO3ZhciBjPTA7Yi5pZSYmKGM9ZD9wYXJzZUZsb2F0KGRbMV0pOmIucXVpcmtzfHwhZG9jdW1lbnQuZG9jdW1lbnRNb2RlP3BhcnNlRmxvYXQoYS5tYXRjaCgvbXNpZSAoXFxkKykvKVsxXSk6ZG9jdW1lbnQuZG9jdW1lbnRNb2RlLGIuaWU5Q29tcGF0PTk9PWMsYi5pZThDb21wYXQ9OD09YyxiLmllN0NvbXBhdD03PT1jLGIuaWU2Q29tcGF0PTc+Y3x8Yi5xdWlya3MpO2IuZ2Vja28mJihkPWEubWF0Y2goL3J2OihbXFxkXFwuXSspLykpJiYoZD1kWzFdLnNwbGl0KFwiLlwiKSxjPTFFNCpkWzBdKzEwMCooZFsxXXx8MCkrMSooZFsyXXx8MCkpO2IuYWlyJiYoYz1wYXJzZUZsb2F0KGEubWF0Y2goLyBhZG9iZWFpclxcLyhcXGQrKS8pWzFdKSk7XG5iLndlYmtpdCYmKGM9cGFyc2VGbG9hdChhLm1hdGNoKC8gYXBwbGV3ZWJraXRcXC8oXFxkKykvKVsxXSkpO2IudmVyc2lvbj1jO2IuaXNDb21wYXRpYmxlPSEoYi5pZSYmNz5jKSYmIShiLmdlY2tvJiY0RTQ+YykmJiEoYi53ZWJraXQmJjUzND5jKTtiLmhpZHBpPTI8PXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO2IubmVlZHNCckZpbGxlcj1iLmdlY2tvfHxiLndlYmtpdHx8Yi5pZSYmMTA8YztiLm5lZWRzTmJzcEZpbGxlcj1iLmllJiYxMT5jO2IuY3NzQ2xhc3M9XCJja2VfYnJvd3Nlcl9cIisoYi5pZT9cImllXCI6Yi5nZWNrbz9cImdlY2tvXCI6Yi53ZWJraXQ/XCJ3ZWJraXRcIjpcInVua25vd25cIik7Yi5xdWlya3MmJihiLmNzc0NsYXNzKz1cIiBja2VfYnJvd3Nlcl9xdWlya3NcIik7Yi5pZSYmKGIuY3NzQ2xhc3MrPVwiIGNrZV9icm93c2VyX2llXCIrKGIucXVpcmtzP1wiNiBja2VfYnJvd3Nlcl9pZXF1aXJrc1wiOmIudmVyc2lvbikpO2IuYWlyJiYoYi5jc3NDbGFzcys9XCIgY2tlX2Jyb3dzZXJfYWlyXCIpO1xuYi5pT1MmJihiLmNzc0NsYXNzKz1cIiBja2VfYnJvd3Nlcl9pb3NcIik7Yi5oaWRwaSYmKGIuY3NzQ2xhc3MrPVwiIGNrZV9oaWRwaVwiKTtyZXR1cm4gYn0oKSk7XG5cInVubG9hZGVkXCI9PUNLRURJVE9SLnN0YXR1cyYmZnVuY3Rpb24oKXtDS0VESVRPUi5ldmVudC5pbXBsZW1lbnRPbihDS0VESVRPUik7Q0tFRElUT1IubG9hZEZ1bGxDb3JlPWZ1bmN0aW9uKCl7aWYoXCJiYXNpY19yZWFkeVwiIT1DS0VESVRPUi5zdGF0dXMpQ0tFRElUT1IubG9hZEZ1bGxDb3JlLl9sb2FkPTE7ZWxzZXtkZWxldGUgQ0tFRElUT1IubG9hZEZ1bGxDb3JlO3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7YS50eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI7YS5zcmM9Q0tFRElUT1IuYmFzZVBhdGgrXCJja2VkaXRvci5qc1wiO2RvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChhKX19O0NLRURJVE9SLmxvYWRGdWxsQ29yZVRpbWVvdXQ9MDtDS0VESVRPUi5hZGQ9ZnVuY3Rpb24oYSl7KHRoaXMuXy5wZW5kaW5nfHwodGhpcy5fLnBlbmRpbmc9W10pKS5wdXNoKGEpfTsoZnVuY3Rpb24oKXtDS0VESVRPUi5kb21SZWFkeShmdW5jdGlvbigpe3ZhciBhPVxuQ0tFRElUT1IubG9hZEZ1bGxDb3JlLGQ9Q0tFRElUT1IubG9hZEZ1bGxDb3JlVGltZW91dDthJiYoQ0tFRElUT1Iuc3RhdHVzPVwiYmFzaWNfcmVhZHlcIixhJiZhLl9sb2FkP2EoKTpkJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Q0tFRElUT1IubG9hZEZ1bGxDb3JlJiZDS0VESVRPUi5sb2FkRnVsbENvcmUoKX0sMUUzKmQpKX0pfSkoKTtDS0VESVRPUi5zdGF0dXM9XCJiYXNpY19sb2FkZWRcIn0oKTtcInVzZSBzdHJpY3RcIjtDS0VESVRPUi5WRVJCT1NJVFlfV0FSTj0xO0NLRURJVE9SLlZFUkJPU0lUWV9FUlJPUj0yO0NLRURJVE9SLnZlcmJvc2l0eT1DS0VESVRPUi5WRVJCT1NJVFlfV0FSTnxDS0VESVRPUi5WRVJCT1NJVFlfRVJST1I7Q0tFRElUT1Iud2Fybj1mdW5jdGlvbihhLGQpe0NLRURJVE9SLnZlcmJvc2l0eSZDS0VESVRPUi5WRVJCT1NJVFlfV0FSTiYmQ0tFRElUT1IuZmlyZShcImxvZ1wiLHt0eXBlOlwid2FyblwiLGVycm9yQ29kZTphLGFkZGl0aW9uYWxEYXRhOmR9KX07XG5DS0VESVRPUi5lcnJvcj1mdW5jdGlvbihhLGQpe0NLRURJVE9SLnZlcmJvc2l0eSZDS0VESVRPUi5WRVJCT1NJVFlfRVJST1ImJkNLRURJVE9SLmZpcmUoXCJsb2dcIix7dHlwZTpcImVycm9yXCIsZXJyb3JDb2RlOmEsYWRkaXRpb25hbERhdGE6ZH0pfTtcbkNLRURJVE9SLm9uKFwibG9nXCIsZnVuY3Rpb24oYSl7aWYod2luZG93LmNvbnNvbGUmJndpbmRvdy5jb25zb2xlLmxvZyl7dmFyIGQ9Y29uc29sZVthLmRhdGEudHlwZV0/YS5kYXRhLnR5cGU6XCJsb2dcIixiPWEuZGF0YS5lcnJvckNvZGU7aWYoYT1hLmRhdGEuYWRkaXRpb25hbERhdGEpY29uc29sZVtkXShcIltDS0VESVRPUl0gRXJyb3IgY29kZTogXCIrYitcIi5cIixhKTtlbHNlIGNvbnNvbGVbZF0oXCJbQ0tFRElUT1JdIEVycm9yIGNvZGU6IFwiK2IrXCIuXCIpO2NvbnNvbGVbZF0oXCJbQ0tFRElUT1JdIEZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoaXMgZXJyb3IgZ28gdG8gaHR0cDovL2RvY3MuY2tlZGl0b3IuY29tLyMhL2d1aWRlL2Rldl9lcnJvcnMtc2VjdGlvbi1cIitiKX19LG51bGwsbnVsbCw5OTkpO0NLRURJVE9SLmRvbT17fTtcbihmdW5jdGlvbigpe3ZhciBhPVtdLGQ9Q0tFRElUT1IuZW52LmdlY2tvP1wiLW1vei1cIjpDS0VESVRPUi5lbnYud2Via2l0P1wiLXdlYmtpdC1cIjpDS0VESVRPUi5lbnYuaWU/XCItbXMtXCI6XCJcIixiPS8mL2csYz0vPi9nLGY9LzwvZyxnPS9cIi9nLGs9LyYobHR8Z3R8YW1wfHF1b3R8bmJzcHxzaHl8I1xcZHsxLDV9KTsvZyxsPXtsdDpcIlxceDNjXCIsZ3Q6XCJcXHgzZVwiLGFtcDpcIlxceDI2XCIscXVvdDonXCInLG5ic3A6XCLCoFwiLHNoeTpcIsKtXCJ9LG09ZnVuY3Rpb24oYSxlKXtyZXR1cm5cIiNcIj09ZVswXT9TdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGUuc2xpY2UoMSksMTApKTpsW2VdfTtDS0VESVRPUi5vbihcInJlc2V0XCIsZnVuY3Rpb24oKXthPVtdfSk7Q0tFRElUT1IudG9vbHM9e2FycmF5Q29tcGFyZTpmdW5jdGlvbihhLGUpe2lmKCFhJiYhZSlyZXR1cm4hMDtpZighYXx8IWV8fGEubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylpZihhW2JdIT1lW2JdKXJldHVybiExO1xucmV0dXJuITB9LGdldEluZGV4OmZ1bmN0aW9uKGEsZSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDsrK2IpaWYoZShhW2JdKSlyZXR1cm4gYjtyZXR1cm4tMX0sY2xvbmU6ZnVuY3Rpb24oYSl7dmFyIGU7aWYoYSYmYSBpbnN0YW5jZW9mIEFycmF5KXtlPVtdO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKWVbYl09Q0tFRElUT1IudG9vbHMuY2xvbmUoYVtiXSk7cmV0dXJuIGV9aWYobnVsbD09PWF8fFwib2JqZWN0XCIhPXR5cGVvZiBhfHxhIGluc3RhbmNlb2YgU3RyaW5nfHxhIGluc3RhbmNlb2YgTnVtYmVyfHxhIGluc3RhbmNlb2YgQm9vbGVhbnx8YSBpbnN0YW5jZW9mIERhdGV8fGEgaW5zdGFuY2VvZiBSZWdFeHB8fGEubm9kZVR5cGV8fGEud2luZG93PT09YSlyZXR1cm4gYTtlPW5ldyBhLmNvbnN0cnVjdG9yO2ZvcihiIGluIGEpZVtiXT1DS0VESVRPUi50b29scy5jbG9uZShhW2JdKTtyZXR1cm4gZX0sY2FwaXRhbGl6ZTpmdW5jdGlvbihhLGUpe3JldHVybiBhLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK1xuKGU/YS5zbGljZSgxKTphLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkpfSxleHRlbmQ6ZnVuY3Rpb24oYSl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aCxiLGM7XCJib29sZWFuXCI9PXR5cGVvZihiPWFyZ3VtZW50c1tlLTFdKT9lLS06XCJib29sZWFuXCI9PXR5cGVvZihiPWFyZ3VtZW50c1tlLTJdKSYmKGM9YXJndW1lbnRzW2UtMV0sZS09Mik7Zm9yKHZhciBsPTE7bDxlO2wrKyl7dmFyIGQ9YXJndW1lbnRzW2xdLHE7Zm9yKHEgaW4gZClpZighMD09PWJ8fG51bGw9PWFbcV0paWYoIWN8fHEgaW4gYylhW3FdPWRbcV19cmV0dXJuIGF9LHByb3RvdHlwZWRDb3B5OmZ1bmN0aW9uKGEpe3ZhciBlPWZ1bmN0aW9uKCl7fTtlLnByb3RvdHlwZT1hO3JldHVybiBuZXcgZX0sY29weTpmdW5jdGlvbihhKXt2YXIgZT17fSxiO2ZvcihiIGluIGEpZVtiXT1hW2JdO3JldHVybiBlfSxpc0FycmF5OmZ1bmN0aW9uKGEpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfSxcbmlzRW1wdHk6ZnVuY3Rpb24oYSl7Zm9yKHZhciBlIGluIGEpaWYoYS5oYXNPd25Qcm9wZXJ0eShlKSlyZXR1cm4hMTtyZXR1cm4hMH0sY3NzVmVuZG9yUHJlZml4OmZ1bmN0aW9uKGEsZSxiKXtpZihiKXJldHVybiBkK2ErXCI6XCIrZStcIjtcIithK1wiOlwiK2U7Yj17fTtiW2FdPWU7YltkK2FdPWU7cmV0dXJuIGJ9LGNzc1N0eWxlVG9Eb21TdHlsZTpmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikuc3R5bGUsZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgYS5jc3NGbG9hdD9cImNzc0Zsb2F0XCI6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuc3R5bGVGbG9hdD9cInN0eWxlRmxvYXRcIjpcImZsb2F0XCI7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVyblwiZmxvYXRcIj09YT9lOmEucmVwbGFjZSgvLS4vZyxmdW5jdGlvbihhKXtyZXR1cm4gYS5zdWJzdHIoMSkudG9VcHBlckNhc2UoKX0pfX0oKSxidWlsZFN0eWxlSHRtbDpmdW5jdGlvbihhKXthPVtdLmNvbmNhdChhKTtmb3IodmFyIGUsXG5iPVtdLGM9MDtjPGEubGVuZ3RoO2MrKylpZihlPWFbY10pL0BpbXBvcnR8W3t9XS8udGVzdChlKT9iLnB1c2goXCJcXHgzY3N0eWxlXFx4M2VcIitlK1wiXFx4M2Mvc3R5bGVcXHgzZVwiKTpiLnB1c2goJ1xceDNjbGluayB0eXBlXFx4M2RcInRleHQvY3NzXCIgcmVsXFx4M2RzdHlsZXNoZWV0IGhyZWZcXHgzZFwiJytlKydcIlxceDNlJyk7cmV0dXJuIGIuam9pbihcIlwiKX0saHRtbEVuY29kZTpmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YXx8bnVsbD09PWE/XCJcIjpTdHJpbmcoYSkucmVwbGFjZShiLFwiXFx4MjZhbXA7XCIpLnJlcGxhY2UoYyxcIlxceDI2Z3Q7XCIpLnJlcGxhY2UoZixcIlxceDI2bHQ7XCIpfSxodG1sRGVjb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoayxtKX0saHRtbEVuY29kZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIENLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoYSkucmVwbGFjZShnLFwiXFx4MjZxdW90O1wiKX0saHRtbERlY29kZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIENLRURJVE9SLnRvb2xzLmh0bWxEZWNvZGUoYSl9LFxudHJhbnNmb3JtUGxhaW5UZXh0VG9IdG1sOmZ1bmN0aW9uKGEsZSl7dmFyIGI9ZT09Q0tFRElUT1IuRU5URVJfQlIsYz10aGlzLmh0bWxFbmNvZGUoYS5yZXBsYWNlKC9cXHJcXG4vZyxcIlxcblwiKSksYz1jLnJlcGxhY2UoL1xcdC9nLFwiXFx4MjZuYnNwO1xceDI2bmJzcDsgXFx4MjZuYnNwO1wiKSxsPWU9PUNLRURJVE9SLkVOVEVSX1A/XCJwXCI6XCJkaXZcIjtpZighYil7dmFyIGQ9L1xcbnsyfS9nO2lmKGQudGVzdChjKSl2YXIgcT1cIlxceDNjXCIrbCtcIlxceDNlXCIsbT1cIlxceDNjL1wiK2wrXCJcXHgzZVwiLGM9cStjLnJlcGxhY2UoZCxmdW5jdGlvbigpe3JldHVybiBtK3F9KSttfWM9Yy5yZXBsYWNlKC9cXG4vZyxcIlxceDNjYnJcXHgzZVwiKTtifHwoYz1jLnJlcGxhY2UobmV3IFJlZ0V4cChcIlxceDNjYnJcXHgzZSg/XFx4M2RcXHgzYy9cIitsK1wiXFx4M2UpXCIpLGZ1bmN0aW9uKGEpe3JldHVybiBDS0VESVRPUi50b29scy5yZXBlYXQoYSwyKX0pKTtjPWMucmVwbGFjZSgvXiB8ICQvZyxcIlxceDI2bmJzcDtcIik7cmV0dXJuIGM9Yy5yZXBsYWNlKC8oPnxcXHMpIC9nLFxuZnVuY3Rpb24oYSxlKXtyZXR1cm4gZStcIlxceDI2bmJzcDtcIn0pLnJlcGxhY2UoLyAoPz08KS9nLFwiXFx4MjZuYnNwO1wiKX0sZ2V0TmV4dE51bWJlcjpmdW5jdGlvbigpe3ZhciBhPTA7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuKythfX0oKSxnZXROZXh0SWQ6ZnVuY3Rpb24oKXtyZXR1cm5cImNrZV9cIit0aGlzLmdldE5leHROdW1iZXIoKX0sZ2V0VW5pcXVlSWQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9XCJlXCIsZT0wOzg+ZTtlKyspYSs9TWF0aC5mbG9vcig2NTUzNiooMStNYXRoLnJhbmRvbSgpKSkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKTtyZXR1cm4gYX0sb3ZlcnJpZGU6ZnVuY3Rpb24oYSxlKXt2YXIgYj1lKGEpO2IucHJvdG90eXBlPWEucHJvdG90eXBlO3JldHVybiBifSxzZXRUaW1lb3V0OmZ1bmN0aW9uKGEsZSxiLGMsbCl7bHx8KGw9d2luZG93KTtifHwoYj1sKTtyZXR1cm4gbC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yz9hLmFwcGx5KGIsW10uY29uY2F0KGMpKTphLmFwcGx5KGIpfSxcbmV8fDApfSx0cmltOmZ1bmN0aW9uKCl7dmFyIGE9Lyg/Ol5bIFxcdFxcblxccl0rKXwoPzpbIFxcdFxcblxccl0rJCkvZztyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShhLFwiXCIpfX0oKSxsdHJpbTpmdW5jdGlvbigpe3ZhciBhPS9eWyBcXHRcXG5cXHJdKy9nO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKGEsXCJcIil9fSgpLHJ0cmltOmZ1bmN0aW9uKCl7dmFyIGE9L1sgXFx0XFxuXFxyXSskL2c7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoYSxcIlwiKX19KCksaW5kZXhPZjpmdW5jdGlvbihhLGUpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUpZm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKXtpZihlKGFbYl0pKXJldHVybiBifWVsc2V7aWYoYS5pbmRleE9mKXJldHVybiBhLmluZGV4T2YoZSk7Yj0wO2ZvcihjPWEubGVuZ3RoO2I8YztiKyspaWYoYVtiXT09PWUpcmV0dXJuIGJ9cmV0dXJuLTF9LHNlYXJjaDpmdW5jdGlvbihhLGUpe3ZhciBiPUNLRURJVE9SLnRvb2xzLmluZGV4T2YoYSxcbmUpO3JldHVybiAwPD1iP2FbYl06bnVsbH0sYmluZDpmdW5jdGlvbihhLGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGUsYXJndW1lbnRzKX19LGNyZWF0ZUNsYXNzOmZ1bmN0aW9uKGEpe3ZhciBlPWEuJCxiPWEuYmFzZSxjPWEucHJpdmF0ZXN8fGEuXyxsPWEucHJvdG87YT1hLnN0YXRpY3M7IWUmJihlPWZ1bmN0aW9uKCl7YiYmdGhpcy5iYXNlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO2lmKGMpdmFyIGQ9ZSxlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5ffHwodGhpcy5fPXt9KSxlO2ZvcihlIGluIGMpe3ZhciBiPWNbZV07YVtlXT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBiP0NLRURJVE9SLnRvb2xzLmJpbmQoYix0aGlzKTpifWQuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtiJiYoZS5wcm90b3R5cGU9dGhpcy5wcm90b3R5cGVkQ29weShiLnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLmJhc2U9YixlLmJhc2VQcm90bz1iLnByb3RvdHlwZSxlLnByb3RvdHlwZS5iYXNlPVxuZnVuY3Rpb24oKXt0aGlzLmJhc2U9Yi5wcm90b3R5cGUuYmFzZTtiLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmJhc2U9YXJndW1lbnRzLmNhbGxlZX0pO2wmJnRoaXMuZXh0ZW5kKGUucHJvdG90eXBlLGwsITApO2EmJnRoaXMuZXh0ZW5kKGUsYSwhMCk7cmV0dXJuIGV9LGFkZEZ1bmN0aW9uOmZ1bmN0aW9uKGIsZSl7cmV0dXJuIGEucHVzaChmdW5jdGlvbigpe3JldHVybiBiLmFwcGx5KGV8fHRoaXMsYXJndW1lbnRzKX0pLTF9LHJlbW92ZUZ1bmN0aW9uOmZ1bmN0aW9uKGIpe2FbYl09bnVsbH0sY2FsbEZ1bmN0aW9uOmZ1bmN0aW9uKGIpe3ZhciBlPWFbYl07cmV0dXJuIGUmJmUuYXBwbHkod2luZG93LEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSl9LGNzc0xlbmd0aDpmdW5jdGlvbigpe3ZhciBhPS9eLT9cXGQrXFwuP1xcZCpweCQvLGU7cmV0dXJuIGZ1bmN0aW9uKGIpe2U9Q0tFRElUT1IudG9vbHMudHJpbShiK1wiXCIpK1wicHhcIjtyZXR1cm4gYS50ZXN0KGUpP1xuZTpifHxcIlwifX0oKSxjb252ZXJ0VG9QeDpmdW5jdGlvbigpe3ZhciBhO3JldHVybiBmdW5jdGlvbihlKXthfHwoYT1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbCgnXFx4M2NkaXYgc3R5bGVcXHgzZFwicG9zaXRpb246YWJzb2x1dGU7bGVmdDotOTk5OXB4O3RvcDotOTk5OXB4O21hcmdpbjowcHg7cGFkZGluZzowcHg7Ym9yZGVyOjBweDtcIlxceDNlXFx4M2MvZGl2XFx4M2UnLENLRURJVE9SLmRvY3VtZW50KSxDS0VESVRPUi5kb2N1bWVudC5nZXRCb2R5KCkuYXBwZW5kKGEpKTtyZXR1cm4vJSQvLnRlc3QoZSk/ZTooYS5zZXRTdHlsZShcIndpZHRoXCIsZSksYS4kLmNsaWVudFdpZHRoKX19KCkscmVwZWF0OmZ1bmN0aW9uKGEsZSl7cmV0dXJuIEFycmF5KGUrMSkuam9pbihhKX0sdHJ5VGhlc2U6ZnVuY3Rpb24oKXtmb3IodmFyIGEsZT0wLGI9YXJndW1lbnRzLmxlbmd0aDtlPGI7ZSsrKXt2YXIgYz1hcmd1bWVudHNbZV07dHJ5e2E9YygpO2JyZWFrfWNhdGNoKGwpe319cmV0dXJuIGF9LFxuZ2VuS2V5OmZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuam9pbihcIi1cIil9LGRlZmVyOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cyxiPXRoaXM7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmFwcGx5KGIsZSl9LDApfX0sbm9ybWFsaXplQ3NzVGV4dDpmdW5jdGlvbihhLGUpe3ZhciBiPVtdLGMsbD1DS0VESVRPUi50b29scy5wYXJzZUNzc1RleHQoYSwhMCxlKTtmb3IoYyBpbiBsKWIucHVzaChjK1wiOlwiK2xbY10pO2Iuc29ydCgpO3JldHVybiBiLmxlbmd0aD9iLmpvaW4oXCI7XCIpK1wiO1wiOlwiXCJ9LGNvbnZlcnRSZ2JUb0hleDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC8oPzpyZ2JcXChcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKlxcKSkvZ2ksZnVuY3Rpb24oYSxiLGMsbCl7YT1bYixjLGxdO2ZvcihiPTA7Mz5iO2IrKylhW2JdPShcIjBcIitwYXJzZUludChhW2JdLDEwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbnJldHVyblwiI1wiK2Euam9pbihcIlwiKX0pfSxub3JtYWxpemVIZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvIygoWzAtOWEtZl17M30pezEsMn0pKCR8O3xcXHMrKS9naSxmdW5jdGlvbihhLGIsYyxsKXthPWIudG9Mb3dlckNhc2UoKTszPT1hLmxlbmd0aCYmKGE9YS5zcGxpdChcIlwiKSxhPVthWzBdLGFbMF0sYVsxXSxhWzFdLGFbMl0sYVsyXV0uam9pbihcIlwiKSk7cmV0dXJuXCIjXCIrYStsfSl9LHBhcnNlQ3NzVGV4dDpmdW5jdGlvbihhLGIsYyl7dmFyIGw9e307YyYmKGE9KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcInNwYW5cIikpLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsYSkuZ2V0QXR0cmlidXRlKFwic3R5bGVcIil8fFwiXCIpO2EmJihhPUNLRURJVE9SLnRvb2xzLm5vcm1hbGl6ZUhleChDS0VESVRPUi50b29scy5jb252ZXJ0UmdiVG9IZXgoYSkpKTtpZighYXx8XCI7XCI9PWEpcmV0dXJuIGw7YS5yZXBsYWNlKC8mcXVvdDsvZywnXCInKS5yZXBsYWNlKC9cXHMqKFteOjtcXHNdKylcXHMqOlxccyooW147XSspXFxzKig/PTt8JCkvZyxcbmZ1bmN0aW9uKGEsYyxkKXtiJiYoYz1jLnRvTG93ZXJDYXNlKCksXCJmb250LWZhbWlseVwiPT1jJiYoZD1kLnJlcGxhY2UoL1xccyosXFxzKi9nLFwiLFwiKSksZD1DS0VESVRPUi50b29scy50cmltKGQpKTtsW2NdPWR9KTtyZXR1cm4gbH0sd3JpdGVDc3NUZXh0OmZ1bmN0aW9uKGEsYil7dmFyIGMsbD1bXTtmb3IoYyBpbiBhKWwucHVzaChjK1wiOlwiK2FbY10pO2ImJmwuc29ydCgpO3JldHVybiBsLmpvaW4oXCI7IFwiKX0sb2JqZWN0Q29tcGFyZTpmdW5jdGlvbihhLGIsYyl7dmFyIGw7aWYoIWEmJiFiKXJldHVybiEwO2lmKCFhfHwhYilyZXR1cm4hMTtmb3IobCBpbiBhKWlmKGFbbF0hPWJbbF0pcmV0dXJuITE7aWYoIWMpZm9yKGwgaW4gYilpZihhW2xdIT1iW2xdKXJldHVybiExO3JldHVybiEwfSxvYmplY3RLZXlzOmZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM7Zm9yKGMgaW4gYSliLnB1c2goYyk7cmV0dXJuIGJ9LGNvbnZlcnRBcnJheVRvT2JqZWN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9e307MT09XG5hcmd1bWVudHMubGVuZ3RoJiYoYj0hMCk7Zm9yKHZhciBsPTAsZD1hLmxlbmd0aDtsPGQ7KytsKWNbYVtsXV09YjtyZXR1cm4gY30sZml4RG9tYWluOmZ1bmN0aW9uKCl7Zm9yKHZhciBhOzspdHJ5e2E9d2luZG93LnBhcmVudC5kb2N1bWVudC5kb21haW47YnJlYWt9Y2F0Y2goYil7YT1hP2EucmVwbGFjZSgvLis/KD86XFwufCQpLyxcIlwiKTpkb2N1bWVudC5kb21haW47aWYoIWEpYnJlYWs7ZG9jdW1lbnQuZG9tYWluPWF9cmV0dXJuISFhfSxldmVudHNCdWZmZXI6ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGwoKXttPShuZXcgRGF0ZSkuZ2V0VGltZSgpO2Q9ITE7Yz9iLmNhbGwoYyk6YigpfXZhciBkLG09MDtyZXR1cm57aW5wdXQ6ZnVuY3Rpb24oKXtpZighZCl7dmFyIGI9KG5ldyBEYXRlKS5nZXRUaW1lKCktbTtiPGE/ZD1zZXRUaW1lb3V0KGwsYS1iKTpsKCl9fSxyZXNldDpmdW5jdGlvbigpe2QmJmNsZWFyVGltZW91dChkKTtkPW09MH19fSxlbmFibGVIdG1sNUVsZW1lbnRzOmZ1bmN0aW9uKGEsXG5iKXtmb3IodmFyIGM9XCJhYmJyIGFydGljbGUgYXNpZGUgYXVkaW8gYmRpIGNhbnZhcyBkYXRhIGRhdGFsaXN0IGRldGFpbHMgZmlnY2FwdGlvbiBmaWd1cmUgZm9vdGVyIGhlYWRlciBoZ3JvdXAgbWFpbiBtYXJrIG1ldGVyIG5hdiBvdXRwdXQgcHJvZ3Jlc3Mgc2VjdGlvbiBzdW1tYXJ5IHRpbWUgdmlkZW9cIi5zcGxpdChcIiBcIiksbD1jLmxlbmd0aCxkO2wtLTspZD1hLmNyZWF0ZUVsZW1lbnQoY1tsXSksYiYmYS5hcHBlbmRDaGlsZChkKX0sY2hlY2tJZkFueUFycmF5SXRlbU1hdGNoZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxsPWEubGVuZ3RoO2M8bDsrK2MpaWYoYVtjXS5tYXRjaChiKSlyZXR1cm4hMDtyZXR1cm4hMX0sY2hlY2tJZkFueU9iamVjdFByb3BlcnR5TWF0Y2hlczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyBpbiBhKWlmKGMubWF0Y2goYikpcmV0dXJuITA7cmV0dXJuITF9LHRyYW5zcGFyZW50SW1hZ2VEYXRhOlwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFQQUJBUC8vL3dBQUFDSDVCQUVLQUFBQUxBQUFBQUFCQUFFQUFBSUNSQUVBT3dcXHgzZFxceDNkXCIsXG5nZXRDb29raWU6ZnVuY3Rpb24oYSl7YT1hLnRvTG93ZXJDYXNlKCk7Zm9yKHZhciBiPWRvY3VtZW50LmNvb2tpZS5zcGxpdChcIjtcIiksYyxsLGQ9MDtkPGIubGVuZ3RoO2QrKylpZihjPWJbZF0uc3BsaXQoXCJcXHgzZFwiKSxsPWRlY29kZVVSSUNvbXBvbmVudChDS0VESVRPUi50b29scy50cmltKGNbMF0pLnRvTG93ZXJDYXNlKCkpLGw9PT1hKXJldHVybiBkZWNvZGVVUklDb21wb25lbnQoMTxjLmxlbmd0aD9jWzFdOlwiXCIpO3JldHVybiBudWxsfSxzZXRDb29raWU6ZnVuY3Rpb24oYSxiKXtkb2N1bWVudC5jb29raWU9ZW5jb2RlVVJJQ29tcG9uZW50KGEpK1wiXFx4M2RcIitlbmNvZGVVUklDb21wb25lbnQoYikrXCI7cGF0aFxceDNkL1wifSxnZXRDc3JmVG9rZW46ZnVuY3Rpb24oKXt2YXIgYT1DS0VESVRPUi50b29scy5nZXRDb29raWUoXCJja0NzcmZUb2tlblwiKTtpZighYXx8NDAhPWEubGVuZ3RoKXt2YXIgYT1bXSxiPVwiXCI7aWYod2luZG93LmNyeXB0byYmd2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXMpYT1cbm5ldyBVaW50OEFycmF5KDQwKSx3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhhKTtlbHNlIGZvcih2YXIgYz0wOzQwPmM7YysrKWEucHVzaChNYXRoLmZsb29yKDI1NipNYXRoLnJhbmRvbSgpKSk7Zm9yKGM9MDtjPGEubGVuZ3RoO2MrKyl2YXIgbD1cImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiLmNoYXJBdChhW2NdJTM2KSxiPWIrKC41PE1hdGgucmFuZG9tKCk/bC50b1VwcGVyQ2FzZSgpOmwpO2E9YjtDS0VESVRPUi50b29scy5zZXRDb29raWUoXCJja0NzcmZUb2tlblwiLGEpfXJldHVybiBhfSxlc2NhcGVDc3M6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/d2luZG93LkNTUyYmQ1NTLmVzY2FwZT9DU1MuZXNjYXBlKGEpOmlzTmFOKHBhcnNlSW50KGEuY2hhckF0KDApLDEwKSk/YTpcIlxcXFwzXCIrYS5jaGFyQXQoMCkrXCIgXCIrYS5zdWJzdHJpbmcoMSxhLmxlbmd0aCk6XCJcIn19fSkoKTtcbkNLRURJVE9SLmR0ZD1mdW5jdGlvbigpe3ZhciBhPUNLRURJVE9SLnRvb2xzLmV4dGVuZCxkPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPUNLRURJVE9SLnRvb2xzLmNsb25lKGEpLGw9MTtsPGFyZ3VtZW50cy5sZW5ndGg7bCsrKXtiPWFyZ3VtZW50c1tsXTtmb3IodmFyIGQgaW4gYilkZWxldGUgY1tkXX1yZXR1cm4gY30sYj17fSxjPXt9LGY9e2FkZHJlc3M6MSxhcnRpY2xlOjEsYXNpZGU6MSxibG9ja3F1b3RlOjEsZGV0YWlsczoxLGRpdjoxLGRsOjEsZmllbGRzZXQ6MSxmaWd1cmU6MSxmb290ZXI6MSxmb3JtOjEsaDE6MSxoMjoxLGgzOjEsaDQ6MSxoNToxLGg2OjEsaGVhZGVyOjEsaGdyb3VwOjEsaHI6MSxtYWluOjEsbWVudToxLG5hdjoxLG9sOjEscDoxLHByZToxLHNlY3Rpb246MSx0YWJsZToxLHVsOjF9LGc9e2NvbW1hbmQ6MSxsaW5rOjEsbWV0YToxLG5vc2NyaXB0OjEsc2NyaXB0OjEsc3R5bGU6MX0saz17fSxsPXtcIiNcIjoxfSxtPXtjZW50ZXI6MSxkaXI6MSxub2ZyYW1lczoxfTtcbmEoYix7YToxLGFiYnI6MSxhcmVhOjEsYXVkaW86MSxiOjEsYmRpOjEsYmRvOjEsYnI6MSxidXR0b246MSxjYW52YXM6MSxjaXRlOjEsY29kZToxLGNvbW1hbmQ6MSxkYXRhbGlzdDoxLGRlbDoxLGRmbjoxLGVtOjEsZW1iZWQ6MSxpOjEsaWZyYW1lOjEsaW1nOjEsaW5wdXQ6MSxpbnM6MSxrYmQ6MSxrZXlnZW46MSxsYWJlbDoxLG1hcDoxLG1hcms6MSxtZXRlcjoxLG5vc2NyaXB0OjEsb2JqZWN0OjEsb3V0cHV0OjEscHJvZ3Jlc3M6MSxxOjEscnVieToxLHM6MSxzYW1wOjEsc2NyaXB0OjEsc2VsZWN0OjEsc21hbGw6MSxzcGFuOjEsc3Ryb25nOjEsc3ViOjEsc3VwOjEsdGV4dGFyZWE6MSx0aW1lOjEsdToxLFwidmFyXCI6MSx2aWRlbzoxLHdicjoxfSxsLHthY3JvbnltOjEsYXBwbGV0OjEsYmFzZWZvbnQ6MSxiaWc6MSxmb250OjEsaXNpbmRleDoxLHN0cmlrZToxLHN0eWxlOjEsdHQ6MX0pO2EoYyxmLGIsbSk7ZD17YTpkKGIse2E6MSxidXR0b246MX0pLGFiYnI6YixhZGRyZXNzOmMsXG5hcmVhOmssYXJ0aWNsZTpjLGFzaWRlOmMsYXVkaW86YSh7c291cmNlOjEsdHJhY2s6MX0sYyksYjpiLGJhc2U6ayxiZGk6YixiZG86YixibG9ja3F1b3RlOmMsYm9keTpjLGJyOmssYnV0dG9uOmQoYix7YToxLGJ1dHRvbjoxfSksY2FudmFzOmIsY2FwdGlvbjpjLGNpdGU6Yixjb2RlOmIsY29sOmssY29sZ3JvdXA6e2NvbDoxfSxjb21tYW5kOmssZGF0YWxpc3Q6YSh7b3B0aW9uOjF9LGIpLGRkOmMsZGVsOmIsZGV0YWlsczphKHtzdW1tYXJ5OjF9LGMpLGRmbjpiLGRpdjpjLGRsOntkdDoxLGRkOjF9LGR0OmMsZW06YixlbWJlZDprLGZpZWxkc2V0OmEoe2xlZ2VuZDoxfSxjKSxmaWdjYXB0aW9uOmMsZmlndXJlOmEoe2ZpZ2NhcHRpb246MX0sYyksZm9vdGVyOmMsZm9ybTpjLGgxOmIsaDI6YixoMzpiLGg0OmIsaDU6YixoNjpiLGhlYWQ6YSh7dGl0bGU6MSxiYXNlOjF9LGcpLGhlYWRlcjpjLGhncm91cDp7aDE6MSxoMjoxLGgzOjEsaDQ6MSxoNToxLGg2OjF9LGhyOmssaHRtbDphKHtoZWFkOjEsXG5ib2R5OjF9LGMsZyksaTpiLGlmcmFtZTpsLGltZzprLGlucHV0OmssaW5zOmIsa2JkOmIsa2V5Z2VuOmssbGFiZWw6YixsZWdlbmQ6YixsaTpjLGxpbms6ayxtYWluOmMsbWFwOmMsbWFyazpiLG1lbnU6YSh7bGk6MX0sYyksbWV0YTprLG1ldGVyOmQoYix7bWV0ZXI6MX0pLG5hdjpjLG5vc2NyaXB0OmEoe2xpbms6MSxtZXRhOjEsc3R5bGU6MX0sYiksb2JqZWN0OmEoe3BhcmFtOjF9LGIpLG9sOntsaToxfSxvcHRncm91cDp7b3B0aW9uOjF9LG9wdGlvbjpsLG91dHB1dDpiLHA6YixwYXJhbTprLHByZTpiLHByb2dyZXNzOmQoYix7cHJvZ3Jlc3M6MX0pLHE6YixycDpiLHJ0OmIscnVieTphKHtycDoxLHJ0OjF9LGIpLHM6YixzYW1wOmIsc2NyaXB0Omwsc2VjdGlvbjpjLHNlbGVjdDp7b3B0Z3JvdXA6MSxvcHRpb246MX0sc21hbGw6Yixzb3VyY2U6ayxzcGFuOmIsc3Ryb25nOmIsc3R5bGU6bCxzdWI6YixzdW1tYXJ5OmEoe2gxOjEsaDI6MSxoMzoxLGg0OjEsaDU6MSxoNjoxfSxiKSxcbnN1cDpiLHRhYmxlOntjYXB0aW9uOjEsY29sZ3JvdXA6MSx0aGVhZDoxLHRmb290OjEsdGJvZHk6MSx0cjoxfSx0Ym9keTp7dHI6MX0sdGQ6Yyx0ZXh0YXJlYTpsLHRmb290Ont0cjoxfSx0aDpjLHRoZWFkOnt0cjoxfSx0aW1lOmQoYix7dGltZToxfSksdGl0bGU6bCx0cjp7dGg6MSx0ZDoxfSx0cmFjazprLHU6Yix1bDp7bGk6MX0sXCJ2YXJcIjpiLHZpZGVvOmEoe3NvdXJjZToxLHRyYWNrOjF9LGMpLHdicjprLGFjcm9ueW06YixhcHBsZXQ6YSh7cGFyYW06MX0sYyksYmFzZWZvbnQ6ayxiaWc6YixjZW50ZXI6YyxkaWFsb2c6ayxkaXI6e2xpOjF9LGZvbnQ6Yixpc2luZGV4Omssbm9mcmFtZXM6YyxzdHJpa2U6Yix0dDpifTthKGQseyRibG9jazphKHthdWRpbzoxLGRkOjEsZHQ6MSxmaWdjYXB0aW9uOjEsbGk6MSx2aWRlbzoxfSxmLG0pLCRibG9ja0xpbWl0OnthcnRpY2xlOjEsYXNpZGU6MSxhdWRpbzoxLGJvZHk6MSxjYXB0aW9uOjEsZGV0YWlsczoxLGRpcjoxLGRpdjoxLGRsOjEsXG5maWVsZHNldDoxLGZpZ2NhcHRpb246MSxmaWd1cmU6MSxmb290ZXI6MSxmb3JtOjEsaGVhZGVyOjEsaGdyb3VwOjEsbWFpbjoxLG1lbnU6MSxuYXY6MSxvbDoxLHNlY3Rpb246MSx0YWJsZToxLHRkOjEsdGg6MSx0cjoxLHVsOjEsdmlkZW86MX0sJGNkYXRhOntzY3JpcHQ6MSxzdHlsZToxfSwkZWRpdGFibGU6e2FkZHJlc3M6MSxhcnRpY2xlOjEsYXNpZGU6MSxibG9ja3F1b3RlOjEsYm9keToxLGRldGFpbHM6MSxkaXY6MSxmaWVsZHNldDoxLGZpZ2NhcHRpb246MSxmb290ZXI6MSxmb3JtOjEsaDE6MSxoMjoxLGgzOjEsaDQ6MSxoNToxLGg2OjEsaGVhZGVyOjEsaGdyb3VwOjEsbWFpbjoxLG5hdjoxLHA6MSxwcmU6MSxzZWN0aW9uOjF9LCRlbXB0eTp7YXJlYToxLGJhc2U6MSxiYXNlZm9udDoxLGJyOjEsY29sOjEsY29tbWFuZDoxLGRpYWxvZzoxLGVtYmVkOjEsaHI6MSxpbWc6MSxpbnB1dDoxLGlzaW5kZXg6MSxrZXlnZW46MSxsaW5rOjEsbWV0YToxLHBhcmFtOjEsc291cmNlOjEsXG50cmFjazoxLHdicjoxfSwkaW5saW5lOmIsJGxpc3Q6e2RsOjEsb2w6MSx1bDoxfSwkbGlzdEl0ZW06e2RkOjEsZHQ6MSxsaToxfSwkbm9uQm9keUNvbnRlbnQ6YSh7Ym9keToxLGhlYWQ6MSxodG1sOjF9LGQuaGVhZCksJG5vbkVkaXRhYmxlOnthcHBsZXQ6MSxhdWRpbzoxLGJ1dHRvbjoxLGVtYmVkOjEsaWZyYW1lOjEsbWFwOjEsb2JqZWN0OjEsb3B0aW9uOjEscGFyYW06MSxzY3JpcHQ6MSx0ZXh0YXJlYToxLHZpZGVvOjF9LCRvYmplY3Q6e2FwcGxldDoxLGF1ZGlvOjEsYnV0dG9uOjEsaHI6MSxpZnJhbWU6MSxpbWc6MSxpbnB1dDoxLG9iamVjdDoxLHNlbGVjdDoxLHRhYmxlOjEsdGV4dGFyZWE6MSx2aWRlbzoxfSwkcmVtb3ZlRW1wdHk6e2FiYnI6MSxhY3JvbnltOjEsYjoxLGJkaToxLGJkbzoxLGJpZzoxLGNpdGU6MSxjb2RlOjEsZGVsOjEsZGZuOjEsZW06MSxmb250OjEsaToxLGluczoxLGxhYmVsOjEsa2JkOjEsbWFyazoxLG1ldGVyOjEsb3V0cHV0OjEscToxLHJ1Ynk6MSxcbnM6MSxzYW1wOjEsc21hbGw6MSxzcGFuOjEsc3RyaWtlOjEsc3Ryb25nOjEsc3ViOjEsc3VwOjEsdGltZToxLHR0OjEsdToxLFwidmFyXCI6MX0sJHRhYkluZGV4OnthOjEsYXJlYToxLGJ1dHRvbjoxLGlucHV0OjEsb2JqZWN0OjEsc2VsZWN0OjEsdGV4dGFyZWE6MX0sJHRhYmxlQ29udGVudDp7Y2FwdGlvbjoxLGNvbDoxLGNvbGdyb3VwOjEsdGJvZHk6MSx0ZDoxLHRmb290OjEsdGg6MSx0aGVhZDoxLHRyOjF9LCR0cmFuc3BhcmVudDp7YToxLGF1ZGlvOjEsY2FudmFzOjEsZGVsOjEsaW5zOjEsbWFwOjEsbm9zY3JpcHQ6MSxvYmplY3Q6MSx2aWRlbzoxfSwkaW50ZXJtZWRpYXRlOntjYXB0aW9uOjEsY29sZ3JvdXA6MSxkZDoxLGR0OjEsZmlnY2FwdGlvbjoxLGxlZ2VuZDoxLGxpOjEsb3B0Z3JvdXA6MSxvcHRpb246MSxycDoxLHJ0OjEsc3VtbWFyeToxLHRib2R5OjEsdGQ6MSx0Zm9vdDoxLHRoOjEsdGhlYWQ6MSx0cjoxfX0pO3JldHVybiBkfSgpO1xuQ0tFRElUT1IuZG9tLmV2ZW50PWZ1bmN0aW9uKGEpe3RoaXMuJD1hfTtcbkNLRURJVE9SLmRvbS5ldmVudC5wcm90b3R5cGU9e2dldEtleTpmdW5jdGlvbigpe3JldHVybiB0aGlzLiQua2V5Q29kZXx8dGhpcy4kLndoaWNofSxnZXRLZXlzdHJva2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEtleSgpO2lmKHRoaXMuJC5jdHJsS2V5fHx0aGlzLiQubWV0YUtleSlhKz1DS0VESVRPUi5DVFJMO3RoaXMuJC5zaGlmdEtleSYmKGErPUNLRURJVE9SLlNISUZUKTt0aGlzLiQuYWx0S2V5JiYoYSs9Q0tFRElUT1IuQUxUKTtyZXR1cm4gYX0scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy4kO2QucHJldmVudERlZmF1bHQ/ZC5wcmV2ZW50RGVmYXVsdCgpOmQucmV0dXJuVmFsdWU9ITE7YSYmdGhpcy5zdG9wUHJvcGFnYXRpb24oKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kO2Euc3RvcFByb3BhZ2F0aW9uP2Euc3RvcFByb3BhZ2F0aW9uKCk6YS5jYW5jZWxCdWJibGU9ITB9LGdldFRhcmdldDpmdW5jdGlvbigpe3ZhciBhPVxudGhpcy4kLnRhcmdldHx8dGhpcy4kLnNyY0VsZW1lbnQ7cmV0dXJuIGE/bmV3IENLRURJVE9SLmRvbS5ub2RlKGEpOm51bGx9LGdldFBoYXNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJC5ldmVudFBoYXNlfHwyfSxnZXRQYWdlT2Zmc2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRUYXJnZXQoKS5nZXREb2N1bWVudCgpLiQ7cmV0dXJue3g6dGhpcy4kLnBhZ2VYfHx0aGlzLiQuY2xpZW50WCsoYS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8YS5ib2R5LnNjcm9sbExlZnQpLHk6dGhpcy4kLnBhZ2VZfHx0aGlzLiQuY2xpZW50WSsoYS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxhLmJvZHkuc2Nyb2xsVG9wKX19fTtDS0VESVRPUi5DVFJMPTExMTQxMTI7Q0tFRElUT1IuU0hJRlQ9MjIyODIyNDtDS0VESVRPUi5BTFQ9NDQ1NjQ0ODtDS0VESVRPUi5FVkVOVF9QSEFTRV9DQVBUVVJJTkc9MTtDS0VESVRPUi5FVkVOVF9QSEFTRV9BVF9UQVJHRVQ9MjtcbkNLRURJVE9SLkVWRU5UX1BIQVNFX0JVQkJMSU5HPTM7Q0tFRElUT1IuZG9tLmRvbU9iamVjdD1mdW5jdGlvbihhKXthJiYodGhpcy4kPWEpfTtcbkNLRURJVE9SLmRvbS5kb21PYmplY3QucHJvdG90eXBlPWZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIENLRURJVE9SJiZhLmZpcmUoYixuZXcgQ0tFRElUT1IuZG9tLmV2ZW50KGMpKX19O3JldHVybntnZXRQcml2YXRlOmZ1bmN0aW9uKCl7dmFyIGE7KGE9dGhpcy5nZXRDdXN0b21EYXRhKFwiX1wiKSl8fHRoaXMuc2V0Q3VzdG9tRGF0YShcIl9cIixhPXt9KTtyZXR1cm4gYX0sb246ZnVuY3Rpb24oZCl7dmFyIGI9dGhpcy5nZXRDdXN0b21EYXRhKFwiX2NrZV9uYXRpdmVMaXN0ZW5lcnNcIik7Ynx8KGI9e30sdGhpcy5zZXRDdXN0b21EYXRhKFwiX2NrZV9uYXRpdmVMaXN0ZW5lcnNcIixiKSk7YltkXXx8KGI9YltkXT1hKHRoaXMsZCksdGhpcy4kLmFkZEV2ZW50TGlzdGVuZXI/dGhpcy4kLmFkZEV2ZW50TGlzdGVuZXIoZCxiLCEhQ0tFRElUT1IuZXZlbnQudXNlQ2FwdHVyZSk6dGhpcy4kLmF0dGFjaEV2ZW50JiZ0aGlzLiQuYXR0YWNoRXZlbnQoXCJvblwiK1xuZCxiKSk7cmV0dXJuIENLRURJVE9SLmV2ZW50LnByb3RvdHlwZS5vbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHJlbW92ZUxpc3RlbmVyOmZ1bmN0aW9uKGEpe0NLRURJVE9SLmV2ZW50LnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoIXRoaXMuaGFzTGlzdGVuZXJzKGEpKXt2YXIgYj10aGlzLmdldEN1c3RvbURhdGEoXCJfY2tlX25hdGl2ZUxpc3RlbmVyc1wiKSxjPWImJmJbYV07YyYmKHRoaXMuJC5yZW1vdmVFdmVudExpc3RlbmVyP3RoaXMuJC5yZW1vdmVFdmVudExpc3RlbmVyKGEsYywhMSk6dGhpcy4kLmRldGFjaEV2ZW50JiZ0aGlzLiQuZGV0YWNoRXZlbnQoXCJvblwiK2EsYyksZGVsZXRlIGJbYV0pfX0scmVtb3ZlQWxsTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRDdXN0b21EYXRhKFwiX2NrZV9uYXRpdmVMaXN0ZW5lcnNcIiksYjtmb3IoYiBpbiBhKXt2YXIgYz1hW2JdO3RoaXMuJC5kZXRhY2hFdmVudD90aGlzLiQuZGV0YWNoRXZlbnQoXCJvblwiK1xuYixjKTp0aGlzLiQucmVtb3ZlRXZlbnRMaXN0ZW5lciYmdGhpcy4kLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLCExKTtkZWxldGUgYVtiXX1DS0VESVRPUi5ldmVudC5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzLmNhbGwodGhpcyl9fX0oKTtcbihmdW5jdGlvbihhKXt2YXIgZD17fTtDS0VESVRPUi5vbihcInJlc2V0XCIsZnVuY3Rpb24oKXtkPXt9fSk7YS5lcXVhbHM9ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiBhJiZhLiQ9PT10aGlzLiR9Y2F0Y2goYyl7cmV0dXJuITF9fTthLnNldEN1c3RvbURhdGE9ZnVuY3Rpb24oYSxjKXt2YXIgZj10aGlzLmdldFVuaXF1ZUlkKCk7KGRbZl18fChkW2ZdPXt9KSlbYV09YztyZXR1cm4gdGhpc307YS5nZXRDdXN0b21EYXRhPWZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuJFtcImRhdGEtY2tlLWV4cGFuZG9cIl07cmV0dXJuKGM9YyYmZFtjXSkmJmEgaW4gYz9jW2FdOm51bGx9O2EucmVtb3ZlQ3VzdG9tRGF0YT1mdW5jdGlvbihhKXt2YXIgYz10aGlzLiRbXCJkYXRhLWNrZS1leHBhbmRvXCJdLGM9YyYmZFtjXSxmLGc7YyYmKGY9Y1thXSxnPWEgaW4gYyxkZWxldGUgY1thXSk7cmV0dXJuIGc/ZjpudWxsfTthLmNsZWFyQ3VzdG9tRGF0YT1mdW5jdGlvbigpe3RoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7dmFyIGE9XG50aGlzLiRbXCJkYXRhLWNrZS1leHBhbmRvXCJdO2EmJmRlbGV0ZSBkW2FdfTthLmdldFVuaXF1ZUlkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJFtcImRhdGEtY2tlLWV4cGFuZG9cIl18fCh0aGlzLiRbXCJkYXRhLWNrZS1leHBhbmRvXCJdPUNLRURJVE9SLnRvb2xzLmdldE5leHROdW1iZXIoKSl9O0NLRURJVE9SLmV2ZW50LmltcGxlbWVudE9uKGEpfSkoQ0tFRElUT1IuZG9tLmRvbU9iamVjdC5wcm90b3R5cGUpO1xuQ0tFRElUT1IuZG9tLm5vZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/bmV3IENLRURJVE9SLmRvbVthLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UP1wiZG9jdW1lbnRcIjphLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/XCJlbGVtZW50XCI6YS5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9URVhUP1widGV4dFwiOmEubm9kZVR5cGU9PUNLRURJVE9SLk5PREVfQ09NTUVOVD9cImNvbW1lbnRcIjphLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UP1wiZG9jdW1lbnRGcmFnbWVudFwiOlwiZG9tT2JqZWN0XCJdKGEpOnRoaXN9O0NLRURJVE9SLmRvbS5ub2RlLnByb3RvdHlwZT1uZXcgQ0tFRElUT1IuZG9tLmRvbU9iamVjdDtDS0VESVRPUi5OT0RFX0VMRU1FTlQ9MTtDS0VESVRPUi5OT0RFX0RPQ1VNRU5UPTk7Q0tFRElUT1IuTk9ERV9URVhUPTM7Q0tFRElUT1IuTk9ERV9DT01NRU5UPTg7Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVD0xMTtcbkNLRURJVE9SLlBPU0lUSU9OX0lERU5USUNBTD0wO0NLRURJVE9SLlBPU0lUSU9OX0RJU0NPTk5FQ1RFRD0xO0NLRURJVE9SLlBPU0lUSU9OX0ZPTExPV0lORz0yO0NLRURJVE9SLlBPU0lUSU9OX1BSRUNFRElORz00O0NLRURJVE9SLlBPU0lUSU9OX0lTX0NPTlRBSU5FRD04O0NLRURJVE9SLlBPU0lUSU9OX0NPTlRBSU5TPTE2O1xuQ0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmRvbS5ub2RlLnByb3RvdHlwZSx7YXBwZW5kVG86ZnVuY3Rpb24oYSxkKXthLmFwcGVuZCh0aGlzLGQpO3JldHVybiBhfSxjbG9uZTpmdW5jdGlvbihhLGQpe2Z1bmN0aW9uIGIoYyl7Y1tcImRhdGEtY2tlLWV4cGFuZG9cIl0mJihjW1wiZGF0YS1ja2UtZXhwYW5kb1wiXT0hMSk7aWYoYy5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHxjLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UKWlmKGR8fGMubm9kZVR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVHx8Yy5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiLCExKSxhKXtjPWMuY2hpbGROb2Rlcztmb3IodmFyIGY9MDtmPGMubGVuZ3RoO2YrKyliKGNbZl0pfX1mdW5jdGlvbiBjKGIpe2lmKGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHxiLnR5cGU9PUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQpe2lmKGIudHlwZSE9Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVCl7dmFyIGQ9XG5iLmdldE5hbWUoKTtcIjpcIj09ZFswXSYmYi5yZW5hbWVOb2RlKGQuc3Vic3RyaW5nKDEpKX1pZihhKWZvcihkPTA7ZDxiLmdldENoaWxkQ291bnQoKTtkKyspYyhiLmdldENoaWxkKGQpKX19dmFyIGY9dGhpcy4kLmNsb25lTm9kZShhKTtiKGYpO2Y9bmV3IENLRURJVE9SLmRvbS5ub2RlKGYpO0NLRURJVE9SLmVudi5pZSYmOT5DS0VESVRPUi5lbnYudmVyc2lvbiYmKHRoaXMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHx0aGlzLnR5cGU9PUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQpJiZjKGYpO3JldHVybiBmfSxoYXNQcmV2aW91czpmdW5jdGlvbigpe3JldHVybiEhdGhpcy4kLnByZXZpb3VzU2libGluZ30saGFzTmV4dDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy4kLm5leHRTaWJsaW5nfSxpbnNlcnRBZnRlcjpmdW5jdGlvbihhKXthLiQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy4kLGEuJC5uZXh0U2libGluZyk7cmV0dXJuIGF9LGluc2VydEJlZm9yZTpmdW5jdGlvbihhKXthLiQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy4kLFxuYS4kKTtyZXR1cm4gYX0saW5zZXJ0QmVmb3JlTWU6ZnVuY3Rpb24oYSl7dGhpcy4kLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEuJCx0aGlzLiQpO3JldHVybiBhfSxnZXRBZGRyZXNzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgZD1bXSxiPXRoaXMuZ2V0RG9jdW1lbnQoKS4kLmRvY3VtZW50RWxlbWVudCxjPXRoaXMuJDtjJiZjIT1iOyl7dmFyIGY9Yy5wYXJlbnROb2RlO2YmJmQudW5zaGlmdCh0aGlzLmdldEluZGV4LmNhbGwoeyQ6Y30sYSkpO2M9Zn1yZXR1cm4gZH0sZ2V0RG9jdW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IENLRURJVE9SLmRvbS5kb2N1bWVudCh0aGlzLiQub3duZXJEb2N1bWVudHx8dGhpcy4kLnBhcmVudE5vZGUub3duZXJEb2N1bWVudCl9LGdldEluZGV4OmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGQoYSxjKXt2YXIgbT1jP2EubmV4dFNpYmxpbmc6YS5wcmV2aW91c1NpYmxpbmc7cmV0dXJuIG0mJm0ubm9kZVR5cGU9PUNLRURJVE9SLk5PREVfVEVYVD9iKG0pP2QobSxcbmMpOm06bnVsbH1mdW5jdGlvbiBiKGEpe3JldHVybiFhLm5vZGVWYWx1ZXx8YS5ub2RlVmFsdWU9PUNLRURJVE9SLmRvbS5zZWxlY3Rpb24uRklMTElOR19DSEFSX1NFUVVFTkNFfXZhciBjPXRoaXMuJCxmPS0xLGc7aWYoIXRoaXMuJC5wYXJlbnROb2RlfHxhJiZjLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJmIoYykmJiFkKGMpJiYhZChjLCEwKSlyZXR1cm4tMTtkbyBhJiZjIT10aGlzLiQmJmMubm9kZVR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGd8fGIoYykpfHwoZisrLGc9Yy5ub2RlVHlwZT09Q0tFRElUT1IuTk9ERV9URVhUKTt3aGlsZShjPWMucHJldmlvdXNTaWJsaW5nKTtyZXR1cm4gZn0sZ2V0TmV4dFNvdXJjZU5vZGU6ZnVuY3Rpb24oYSxkLGIpe2lmKGImJiFiLmNhbGwpe3ZhciBjPWI7Yj1mdW5jdGlvbihhKXtyZXR1cm4hYS5lcXVhbHMoYyl9fWE9IWEmJnRoaXMuZ2V0Rmlyc3QmJnRoaXMuZ2V0Rmlyc3QoKTt2YXIgZjtpZighYSl7aWYodGhpcy50eXBlPT1cbkNLRURJVE9SLk5PREVfRUxFTUVOVCYmYiYmITE9PT1iKHRoaXMsITApKXJldHVybiBudWxsO2E9dGhpcy5nZXROZXh0KCl9Zm9yKDshYSYmKGY9KGZ8fHRoaXMpLmdldFBhcmVudCgpKTspe2lmKGImJiExPT09YihmLCEwKSlyZXR1cm4gbnVsbDthPWYuZ2V0TmV4dCgpfXJldHVybiFhfHxiJiYhMT09PWIoYSk/bnVsbDpkJiZkIT1hLnR5cGU/YS5nZXROZXh0U291cmNlTm9kZSghMSxkLGIpOmF9LGdldFByZXZpb3VzU291cmNlTm9kZTpmdW5jdGlvbihhLGQsYil7aWYoYiYmIWIuY2FsbCl7dmFyIGM9YjtiPWZ1bmN0aW9uKGEpe3JldHVybiFhLmVxdWFscyhjKX19YT0hYSYmdGhpcy5nZXRMYXN0JiZ0aGlzLmdldExhc3QoKTt2YXIgZjtpZighYSl7aWYodGhpcy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmImJiExPT09Yih0aGlzLCEwKSlyZXR1cm4gbnVsbDthPXRoaXMuZ2V0UHJldmlvdXMoKX1mb3IoOyFhJiYoZj0oZnx8dGhpcykuZ2V0UGFyZW50KCkpOyl7aWYoYiYmITE9PT1cbmIoZiwhMCkpcmV0dXJuIG51bGw7YT1mLmdldFByZXZpb3VzKCl9cmV0dXJuIWF8fGImJiExPT09YihhKT9udWxsOmQmJmEudHlwZSE9ZD9hLmdldFByZXZpb3VzU291cmNlTm9kZSghMSxkLGIpOmF9LGdldFByZXZpb3VzOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMuJCxiO2RvIGI9KGQ9ZC5wcmV2aW91c1NpYmxpbmcpJiYxMCE9ZC5ub2RlVHlwZSYmbmV3IENLRURJVE9SLmRvbS5ub2RlKGQpO3doaWxlKGImJmEmJiFhKGIpKTtyZXR1cm4gYn0sZ2V0TmV4dDpmdW5jdGlvbihhKXt2YXIgZD10aGlzLiQsYjtkbyBiPShkPWQubmV4dFNpYmxpbmcpJiZuZXcgQ0tFRElUT1IuZG9tLm5vZGUoZCk7d2hpbGUoYiYmYSYmIWEoYikpO3JldHVybiBifSxnZXRQYXJlbnQ6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy4kLnBhcmVudE5vZGU7cmV0dXJuIGQmJihkLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlR8fGEmJmQubm9kZVR5cGU9PUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlQpP1xubmV3IENLRURJVE9SLmRvbS5ub2RlKGQpOm51bGx9LGdldFBhcmVudHM6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcyxiPVtdO2RvIGJbYT9cInB1c2hcIjpcInVuc2hpZnRcIl0oZCk7d2hpbGUoZD1kLmdldFBhcmVudCgpKTtyZXR1cm4gYn0sZ2V0Q29tbW9uQW5jZXN0b3I6ZnVuY3Rpb24oYSl7aWYoYS5lcXVhbHModGhpcykpcmV0dXJuIHRoaXM7aWYoYS5jb250YWlucyYmYS5jb250YWlucyh0aGlzKSlyZXR1cm4gYTt2YXIgZD10aGlzLmNvbnRhaW5zP3RoaXM6dGhpcy5nZXRQYXJlbnQoKTtkbyBpZihkLmNvbnRhaW5zKGEpKXJldHVybiBkO3doaWxlKGQ9ZC5nZXRQYXJlbnQoKSk7cmV0dXJuIG51bGx9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMuJCxiPWEuJDtpZihkLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKXJldHVybiBkLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpO2lmKGQ9PWIpcmV0dXJuIENLRURJVE9SLlBPU0lUSU9OX0lERU5USUNBTDtpZih0aGlzLnR5cGU9PVxuQ0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCl7aWYoZC5jb250YWlucyl7aWYoZC5jb250YWlucyhiKSlyZXR1cm4gQ0tFRElUT1IuUE9TSVRJT05fQ09OVEFJTlMrQ0tFRElUT1IuUE9TSVRJT05fUFJFQ0VESU5HO2lmKGIuY29udGFpbnMoZCkpcmV0dXJuIENLRURJVE9SLlBPU0lUSU9OX0lTX0NPTlRBSU5FRCtDS0VESVRPUi5QT1NJVElPTl9GT0xMT1dJTkd9aWYoXCJzb3VyY2VJbmRleFwiaW4gZClyZXR1cm4gMD5kLnNvdXJjZUluZGV4fHwwPmIuc291cmNlSW5kZXg/Q0tFRElUT1IuUE9TSVRJT05fRElTQ09OTkVDVEVEOmQuc291cmNlSW5kZXg8Yi5zb3VyY2VJbmRleD9DS0VESVRPUi5QT1NJVElPTl9QUkVDRURJTkc6Q0tFRElUT1IuUE9TSVRJT05fRk9MTE9XSU5HfWQ9dGhpcy5nZXRBZGRyZXNzKCk7YT1hLmdldEFkZHJlc3MoKTtmb3IodmFyIGI9TWF0aC5taW4oZC5sZW5ndGgsYS5sZW5ndGgpLGM9MDtjPGI7YysrKWlmKGRbY10hPVxuYVtjXSlyZXR1cm4gZFtjXTxhW2NdP0NLRURJVE9SLlBPU0lUSU9OX1BSRUNFRElORzpDS0VESVRPUi5QT1NJVElPTl9GT0xMT1dJTkc7cmV0dXJuIGQubGVuZ3RoPGEubGVuZ3RoP0NLRURJVE9SLlBPU0lUSU9OX0NPTlRBSU5TK0NLRURJVE9SLlBPU0lUSU9OX1BSRUNFRElORzpDS0VESVRPUi5QT1NJVElPTl9JU19DT05UQUlORUQrQ0tFRElUT1IuUE9TSVRJT05fRk9MTE9XSU5HfSxnZXRBc2NlbmRhbnQ6ZnVuY3Rpb24oYSxkKXt2YXIgYj10aGlzLiQsYyxmO2R8fChiPWIucGFyZW50Tm9kZSk7XCJmdW5jdGlvblwiPT10eXBlb2YgYT8oZj0hMCxjPWEpOihmPSExLGM9ZnVuY3Rpb24oYil7Yj1cInN0cmluZ1wiPT10eXBlb2YgYi5ub2RlTmFtZT9iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk6XCJcIjtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYT9iPT1hOmIgaW4gYX0pO2Zvcig7Yjspe2lmKGMoZj9uZXcgQ0tFRElUT1IuZG9tLm5vZGUoYik6YikpcmV0dXJuIG5ldyBDS0VESVRPUi5kb20ubm9kZShiKTtcbnRyeXtiPWIucGFyZW50Tm9kZX1jYXRjaChnKXtiPW51bGx9fXJldHVybiBudWxsfSxoYXNBc2NlbmRhbnQ6ZnVuY3Rpb24oYSxkKXt2YXIgYj10aGlzLiQ7ZHx8KGI9Yi5wYXJlbnROb2RlKTtmb3IoO2I7KXtpZihiLm5vZGVOYW1lJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PWEpcmV0dXJuITA7Yj1iLnBhcmVudE5vZGV9cmV0dXJuITF9LG1vdmU6ZnVuY3Rpb24oYSxkKXthLmFwcGVuZCh0aGlzLnJlbW92ZSgpLGQpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy4kLGI9ZC5wYXJlbnROb2RlO2lmKGIpe2lmKGEpZm9yKDthPWQuZmlyc3RDaGlsZDspYi5pbnNlcnRCZWZvcmUoZC5yZW1vdmVDaGlsZChhKSxkKTtiLnJlbW92ZUNoaWxkKGQpfXJldHVybiB0aGlzfSxyZXBsYWNlOmZ1bmN0aW9uKGEpe3RoaXMuaW5zZXJ0QmVmb3JlKGEpO2EucmVtb3ZlKCl9LHRyaW06ZnVuY3Rpb24oKXt0aGlzLmx0cmltKCk7dGhpcy5ydHJpbSgpfSxsdHJpbTpmdW5jdGlvbigpe2Zvcih2YXIgYTt0aGlzLmdldEZpcnN0JiZcbihhPXRoaXMuZ2V0Rmlyc3QoKSk7KXtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCl7dmFyIGQ9Q0tFRElUT1IudG9vbHMubHRyaW0oYS5nZXRUZXh0KCkpLGI9YS5nZXRMZW5ndGgoKTtpZihkKWQubGVuZ3RoPGImJihhLnNwbGl0KGItZC5sZW5ndGgpLHRoaXMuJC5yZW1vdmVDaGlsZCh0aGlzLiQuZmlyc3RDaGlsZCkpO2Vsc2V7YS5yZW1vdmUoKTtjb250aW51ZX19YnJlYWt9fSxydHJpbTpmdW5jdGlvbigpe2Zvcih2YXIgYTt0aGlzLmdldExhc3QmJihhPXRoaXMuZ2V0TGFzdCgpKTspe2lmKGEudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUKXt2YXIgZD1DS0VESVRPUi50b29scy5ydHJpbShhLmdldFRleHQoKSksYj1hLmdldExlbmd0aCgpO2lmKGQpZC5sZW5ndGg8YiYmKGEuc3BsaXQoZC5sZW5ndGgpLHRoaXMuJC5sYXN0Q2hpbGQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLiQubGFzdENoaWxkKSk7ZWxzZXthLnJlbW92ZSgpO2NvbnRpbnVlfX1icmVha31DS0VESVRPUi5lbnYubmVlZHNCckZpbGxlciYmXG4oYT10aGlzLiQubGFzdENoaWxkKSYmMT09YS50eXBlJiZcImJyXCI9PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpfSxpc1JlYWRPbmx5OmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXM7dGhpcy50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihkPXRoaXMuZ2V0UGFyZW50KCkpO0NLRURJVE9SLmVudi5lZGdlJiZkJiZkLmlzKFwidGV4dGFyZWFcIixcImlucHV0XCIpJiYoYT0hMCk7aWYoIWEmJmQmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBkLiQuaXNDb250ZW50RWRpdGFibGUpcmV0dXJuIShkLiQuaXNDb250ZW50RWRpdGFibGV8fGQuZGF0YShcImNrZS1lZGl0YWJsZVwiKSk7Zm9yKDtkOyl7aWYoZC5kYXRhKFwiY2tlLWVkaXRhYmxlXCIpKXJldHVybiExO2lmKGQuaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKXJldHVyblwiZmFsc2VcIj09ZC5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIik7ZD1kLmdldFBhcmVudCgpfXJldHVybiEwfX0pO1xuQ0tFRElUT1IuZG9tLndpbmRvdz1mdW5jdGlvbihhKXtDS0VESVRPUi5kb20uZG9tT2JqZWN0LmNhbGwodGhpcyxhKX07Q0tFRElUT1IuZG9tLndpbmRvdy5wcm90b3R5cGU9bmV3IENLRURJVE9SLmRvbS5kb21PYmplY3Q7XG5DS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZG9tLndpbmRvdy5wcm90b3R5cGUse2ZvY3VzOmZ1bmN0aW9uKCl7dGhpcy4kLmZvY3VzKCl9LGdldFZpZXdQYW5lU2l6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuJC5kb2N1bWVudCxkPVwiQ1NTMUNvbXBhdFwiPT1hLmNvbXBhdE1vZGU7cmV0dXJue3dpZHRoOihkP2EuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoOmEuYm9keS5jbGllbnRXaWR0aCl8fDAsaGVpZ2h0OihkP2EuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDphLmJvZHkuY2xpZW50SGVpZ2h0KXx8MH19LGdldFNjcm9sbFBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kO2lmKFwicGFnZVhPZmZzZXRcImluIGEpcmV0dXJue3g6YS5wYWdlWE9mZnNldHx8MCx5OmEucGFnZVlPZmZzZXR8fDB9O2E9YS5kb2N1bWVudDtyZXR1cm57eDphLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHxhLmJvZHkuc2Nyb2xsTGVmdHx8MCx5OmEuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8XG5hLmJvZHkuc2Nyb2xsVG9wfHwwfX0sZ2V0RnJhbWU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiQuZnJhbWVFbGVtZW50O3JldHVybiBhP25ldyBDS0VESVRPUi5kb20uZWxlbWVudC5nZXQoYSk6bnVsbH19KTtDS0VESVRPUi5kb20uZG9jdW1lbnQ9ZnVuY3Rpb24oYSl7Q0tFRElUT1IuZG9tLmRvbU9iamVjdC5jYWxsKHRoaXMsYSl9O0NLRURJVE9SLmRvbS5kb2N1bWVudC5wcm90b3R5cGU9bmV3IENLRURJVE9SLmRvbS5kb21PYmplY3Q7XG5DS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZG9tLmRvY3VtZW50LnByb3RvdHlwZSx7dHlwZTpDS0VESVRPUi5OT0RFX0RPQ1VNRU5ULGFwcGVuZFN0eWxlU2hlZXQ6ZnVuY3Rpb24oYSl7aWYodGhpcy4kLmNyZWF0ZVN0eWxlU2hlZXQpdGhpcy4kLmNyZWF0ZVN0eWxlU2hlZXQoYSk7ZWxzZXt2YXIgZD1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJsaW5rXCIpO2Quc2V0QXR0cmlidXRlcyh7cmVsOlwic3R5bGVzaGVldFwiLHR5cGU6XCJ0ZXh0L2Nzc1wiLGhyZWY6YX0pO3RoaXMuZ2V0SGVhZCgpLmFwcGVuZChkKX19LGFwcGVuZFN0eWxlVGV4dDpmdW5jdGlvbihhKXtpZih0aGlzLiQuY3JlYXRlU3R5bGVTaGVldCl7dmFyIGQ9dGhpcy4kLmNyZWF0ZVN0eWxlU2hlZXQoXCJcIik7ZC5jc3NUZXh0PWF9ZWxzZXt2YXIgYj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJzdHlsZVwiLHRoaXMpO2IuYXBwZW5kKG5ldyBDS0VESVRPUi5kb20udGV4dChhLHRoaXMpKTt0aGlzLmdldEhlYWQoKS5hcHBlbmQoYil9cmV0dXJuIGR8fFxuYi4kLnNoZWV0fSxjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKGEsZCl7dmFyIGI9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGEsdGhpcyk7ZCYmKGQuYXR0cmlidXRlcyYmYi5zZXRBdHRyaWJ1dGVzKGQuYXR0cmlidXRlcyksZC5zdHlsZXMmJmIuc2V0U3R5bGVzKGQuc3R5bGVzKSk7cmV0dXJuIGJ9LGNyZWF0ZVRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20udGV4dChhLHRoaXMpfSxmb2N1czpmdW5jdGlvbigpe3RoaXMuZ2V0V2luZG93KCkuZm9jdXMoKX0sZ2V0QWN0aXZlOmZ1bmN0aW9uKCl7dmFyIGE7dHJ5e2E9dGhpcy4kLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goZCl7cmV0dXJuIG51bGx9cmV0dXJuIG5ldyBDS0VESVRPUi5kb20uZWxlbWVudChhKX0sZ2V0QnlJZDpmdW5jdGlvbihhKXtyZXR1cm4oYT10aGlzLiQuZ2V0RWxlbWVudEJ5SWQoYSkpP25ldyBDS0VESVRPUi5kb20uZWxlbWVudChhKTpudWxsfSxnZXRCeUFkZHJlc3M6ZnVuY3Rpb24oYSxkKXtmb3IodmFyIGI9XG50aGlzLiQuZG9jdW1lbnRFbGVtZW50LGM9MDtiJiZjPGEubGVuZ3RoO2MrKyl7dmFyIGY9YVtjXTtpZihkKWZvcih2YXIgZz0tMSxrPTA7azxiLmNoaWxkTm9kZXMubGVuZ3RoO2srKyl7dmFyIGw9Yi5jaGlsZE5vZGVzW2tdO2lmKCEwIT09ZHx8MyE9bC5ub2RlVHlwZXx8IWwucHJldmlvdXNTaWJsaW5nfHwzIT1sLnByZXZpb3VzU2libGluZy5ub2RlVHlwZSlpZihnKyssZz09Zil7Yj1sO2JyZWFrfX1lbHNlIGI9Yi5jaGlsZE5vZGVzW2ZdfXJldHVybiBiP25ldyBDS0VESVRPUi5kb20ubm9kZShiKTpudWxsfSxnZXRFbGVtZW50c0J5VGFnOmZ1bmN0aW9uKGEsZCl7Q0tFRElUT1IuZW52LmllJiY4Pj1kb2N1bWVudC5kb2N1bWVudE1vZGV8fCFkfHwoYT1kK1wiOlwiK2EpO3JldHVybiBuZXcgQ0tFRElUT1IuZG9tLm5vZGVMaXN0KHRoaXMuJC5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSl9LGdldEhlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xucmV0dXJuIGE9YT9uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYSk6dGhpcy5nZXREb2N1bWVudEVsZW1lbnQoKS5hcHBlbmQobmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwiaGVhZFwiKSwhMCl9LGdldEJvZHk6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IENLRURJVE9SLmRvbS5lbGVtZW50KHRoaXMuJC5ib2R5KX0sZ2V0RG9jdW1lbnRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20uZWxlbWVudCh0aGlzLiQuZG9jdW1lbnRFbGVtZW50KX0sZ2V0V2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20ud2luZG93KHRoaXMuJC5wYXJlbnRXaW5kb3d8fHRoaXMuJC5kZWZhdWx0Vmlldyl9LHdyaXRlOmZ1bmN0aW9uKGEpe3RoaXMuJC5vcGVuKFwidGV4dC9odG1sXCIsXCJyZXBsYWNlXCIpO0NLRURJVE9SLmVudi5pZSYmKGE9YS5yZXBsYWNlKC8oPzpeXFxzKjwhRE9DVFlQRVtePl0qPz4pfF4vaSwnJFxceDI2XFxuXFx4M2NzY3JpcHQgZGF0YS1ja2UtdGVtcFxceDNkXCIxXCJcXHgzZSgnK1xuQ0tFRElUT1IudG9vbHMuZml4RG9tYWluK1wiKSgpO1xceDNjL3NjcmlwdFxceDNlXCIpKTt0aGlzLiQud3JpdGUoYSk7dGhpcy4kLmNsb3NlKCl9LGZpbmQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20ubm9kZUxpc3QodGhpcy4kLnF1ZXJ5U2VsZWN0b3JBbGwoYSkpfSxmaW5kT25lOmZ1bmN0aW9uKGEpe3JldHVybihhPXRoaXMuJC5xdWVyeVNlbGVjdG9yKGEpKT9uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYSk6bnVsbH0sX2dldEh0bWw1U2hpdkZyYWc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEN1c3RvbURhdGEoXCJodG1sNVNoaXZGcmFnXCIpO2F8fChhPXRoaXMuJC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksQ0tFRElUT1IudG9vbHMuZW5hYmxlSHRtbDVFbGVtZW50cyhhLCEwKSx0aGlzLnNldEN1c3RvbURhdGEoXCJodG1sNVNoaXZGcmFnXCIsYSkpO3JldHVybiBhfX0pO0NLRURJVE9SLmRvbS5ub2RlTGlzdD1mdW5jdGlvbihhKXt0aGlzLiQ9YX07XG5DS0VESVRPUi5kb20ubm9kZUxpc3QucHJvdG90eXBlPXtjb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiQubGVuZ3RofSxnZXRJdGVtOmZ1bmN0aW9uKGEpe3JldHVybiAwPmF8fGE+PXRoaXMuJC5sZW5ndGg/bnVsbDooYT10aGlzLiRbYV0pP25ldyBDS0VESVRPUi5kb20ubm9kZShhKTpudWxsfX07Q0tFRElUT1IuZG9tLmVsZW1lbnQ9ZnVuY3Rpb24oYSxkKXtcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9KGQ/ZC4kOmRvY3VtZW50KS5jcmVhdGVFbGVtZW50KGEpKTtDS0VESVRPUi5kb20uZG9tT2JqZWN0LmNhbGwodGhpcyxhKX07Q0tFRElUT1IuZG9tLmVsZW1lbnQuZ2V0PWZ1bmN0aW9uKGEpe3JldHVybihhPVwic3RyaW5nXCI9PXR5cGVvZiBhP2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpfHxkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShhKVswXTphKSYmKGEuJD9hOm5ldyBDS0VESVRPUi5kb20uZWxlbWVudChhKSl9O0NLRURJVE9SLmRvbS5lbGVtZW50LnByb3RvdHlwZT1uZXcgQ0tFRElUT1IuZG9tLm5vZGU7XG5DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbD1mdW5jdGlvbihhLGQpe3ZhciBiPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcImRpdlwiLGQpO2Iuc2V0SHRtbChhKTtyZXR1cm4gYi5nZXRGaXJzdCgpLnJlbW92ZSgpfTtDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXI9ZnVuY3Rpb24oYSxkLGIsYyl7dmFyIGY9ZC5nZXRDdXN0b21EYXRhKFwibGlzdF9tYXJrZXJfaWRcIil8fGQuc2V0Q3VzdG9tRGF0YShcImxpc3RfbWFya2VyX2lkXCIsQ0tFRElUT1IudG9vbHMuZ2V0TmV4dE51bWJlcigpKS5nZXRDdXN0b21EYXRhKFwibGlzdF9tYXJrZXJfaWRcIiksZz1kLmdldEN1c3RvbURhdGEoXCJsaXN0X21hcmtlcl9uYW1lc1wiKXx8ZC5zZXRDdXN0b21EYXRhKFwibGlzdF9tYXJrZXJfbmFtZXNcIix7fSkuZ2V0Q3VzdG9tRGF0YShcImxpc3RfbWFya2VyX25hbWVzXCIpO2FbZl09ZDtnW2JdPTE7cmV0dXJuIGQuc2V0Q3VzdG9tRGF0YShiLGMpfTtcbkNLRURJVE9SLmRvbS5lbGVtZW50LmNsZWFyQWxsTWFya2Vycz1mdW5jdGlvbihhKXtmb3IodmFyIGQgaW4gYSlDS0VESVRPUi5kb20uZWxlbWVudC5jbGVhck1hcmtlcnMoYSxhW2RdLDEpfTtDS0VESVRPUi5kb20uZWxlbWVudC5jbGVhck1hcmtlcnM9ZnVuY3Rpb24oYSxkLGIpe3ZhciBjPWQuZ2V0Q3VzdG9tRGF0YShcImxpc3RfbWFya2VyX25hbWVzXCIpLGY9ZC5nZXRDdXN0b21EYXRhKFwibGlzdF9tYXJrZXJfaWRcIiksZztmb3IoZyBpbiBjKWQucmVtb3ZlQ3VzdG9tRGF0YShnKTtkLnJlbW92ZUN1c3RvbURhdGEoXCJsaXN0X21hcmtlcl9uYW1lc1wiKTtiJiYoZC5yZW1vdmVDdXN0b21EYXRhKFwibGlzdF9tYXJrZXJfaWRcIiksZGVsZXRlIGFbZl0pfTtcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiKXtyZXR1cm4tMTwoXCIgXCIrYStcIiBcIikucmVwbGFjZShnLFwiIFwiKS5pbmRleE9mKFwiIFwiK2IrXCIgXCIpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9ITA7YS4kLmlkfHwoYS4kLmlkPVwiY2tlX3RtcF9cIitDS0VESVRPUi50b29scy5nZXROZXh0TnVtYmVyKCksYj0hMSk7cmV0dXJuIGZ1bmN0aW9uKCl7Ynx8YS5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKX19ZnVuY3Rpb24gYihhLGIpe3ZhciBjPUNLRURJVE9SLnRvb2xzLmVzY2FwZUNzcyhhLiQuaWQpO3JldHVyblwiI1wiK2MrXCIgXCIrYi5zcGxpdCgvLFxccyovKS5qb2luKFwiLCAjXCIrYytcIiBcIil9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9MCxjPTAsZT1rW2FdLmxlbmd0aDtjPGU7YysrKWIrPXBhcnNlSW50KHRoaXMuZ2V0Q29tcHV0ZWRTdHlsZShrW2FdW2NdKXx8MCwxMCl8fDA7cmV0dXJuIGJ9dmFyIGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIl9cIikuY2xhc3NMaXN0LGY9XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBmJiZcbm51bGwhPT1TdHJpbmcoZi5hZGQpLm1hdGNoKC9cXFtOYXRpdmUgY29kZVxcXS9naSksZz0vW1xcblxcdFxccl0vZztDS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZG9tLmVsZW1lbnQucHJvdG90eXBlLHt0eXBlOkNLRURJVE9SLk5PREVfRUxFTUVOVCxhZGRDbGFzczpmP2Z1bmN0aW9uKGEpe3RoaXMuJC5jbGFzc0xpc3QuYWRkKGEpO3JldHVybiB0aGlzfTpmdW5jdGlvbihiKXt2YXIgYz10aGlzLiQuY2xhc3NOYW1lO2MmJihhKGMsYil8fChjKz1cIiBcIitiKSk7dGhpcy4kLmNsYXNzTmFtZT1jfHxiO3JldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmP2Z1bmN0aW9uKGEpe3ZhciBiPXRoaXMuJDtiLmNsYXNzTGlzdC5yZW1vdmUoYSk7Yi5jbGFzc05hbWV8fGIucmVtb3ZlQXR0cmlidXRlKFwiY2xhc3NcIik7cmV0dXJuIHRoaXN9OmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7YyYmYShjLGIpJiYoKGM9Yy5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoPzpefFxcXFxzKylcIitcbmIrXCIoP1xceDNkXFxcXHN8JClcIiksXCJcIikucmVwbGFjZSgvXlxccysvLFwiXCIpKT90aGlzLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsYyk6dGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJjbGFzc1wiKSk7cmV0dXJuIHRoaXN9LGhhc0NsYXNzOmZ1bmN0aW9uKGIpe3JldHVybiBhKHRoaXMuJC5jbGFzc05hbWUsYil9LGFwcGVuZDpmdW5jdGlvbihhLGIpe1wic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT10aGlzLmdldERvY3VtZW50KCkuY3JlYXRlRWxlbWVudChhKSk7Yj90aGlzLiQuaW5zZXJ0QmVmb3JlKGEuJCx0aGlzLiQuZmlyc3RDaGlsZCk6dGhpcy4kLmFwcGVuZENoaWxkKGEuJCk7cmV0dXJuIGF9LGFwcGVuZEh0bWw6ZnVuY3Rpb24oYSl7aWYodGhpcy4kLmNoaWxkTm9kZXMubGVuZ3RoKXt2YXIgYj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJkaXZcIix0aGlzLmdldERvY3VtZW50KCkpO2Iuc2V0SHRtbChhKTtiLm1vdmVDaGlsZHJlbih0aGlzKX1lbHNlIHRoaXMuc2V0SHRtbChhKX0sYXBwZW5kVGV4dDpmdW5jdGlvbihhKXtudWxsIT1cbnRoaXMuJC50ZXh0JiZDS0VESVRPUi5lbnYuaWUmJjk+Q0tFRElUT1IuZW52LnZlcnNpb24/dGhpcy4kLnRleHQrPWE6dGhpcy5hcHBlbmQobmV3IENLRURJVE9SLmRvbS50ZXh0KGEpKX0sYXBwZW5kQm9ndXM6ZnVuY3Rpb24oYSl7aWYoYXx8Q0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXIpe2ZvcihhPXRoaXMuZ2V0TGFzdCgpO2EmJmEudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYhQ0tFRElUT1IudG9vbHMucnRyaW0oYS5nZXRUZXh0KCkpOylhPWEuZ2V0UHJldmlvdXMoKTthJiZhLmlzJiZhLmlzKFwiYnJcIil8fChhPXRoaXMuZ2V0RG9jdW1lbnQoKS5jcmVhdGVFbGVtZW50KFwiYnJcIiksQ0tFRElUT1IuZW52LmdlY2tvJiZhLnNldEF0dHJpYnV0ZShcInR5cGVcIixcIl9tb3pcIiksdGhpcy5hcHBlbmQoYSkpfX0sYnJlYWtQYXJlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKHRoaXMuZ2V0RG9jdW1lbnQoKSk7Yy5zZXRTdGFydEFmdGVyKHRoaXMpO2Muc2V0RW5kQWZ0ZXIoYSk7XG52YXIgZT1jLmV4dHJhY3RDb250ZW50cyghMSxifHwhMSksZDtjLmluc2VydE5vZGUodGhpcy5yZW1vdmUoKSk7aWYoQ0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LmVkZ2Upe2ZvcihjPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcImRpdlwiKTtkPWUuZ2V0Rmlyc3QoKTspZC4kLnN0eWxlLmJhY2tncm91bmRDb2xvciYmKGQuJC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9ZC4kLnN0eWxlLmJhY2tncm91bmRDb2xvciksYy5hcHBlbmQoZCk7Yy5pbnNlcnRBZnRlcih0aGlzKTtjLnJlbW92ZSghMCl9ZWxzZSBlLmluc2VydEFmdGVyTm9kZSh0aGlzKX0sY29udGFpbnM6ZG9jdW1lbnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZnVuY3Rpb24oYSl7cmV0dXJuISEodGhpcy4kLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEuJCkmMTYpfTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLiQ7cmV0dXJuIGEudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UP2IuY29udGFpbnMoYS5nZXRQYXJlbnQoKS4kKTpcbmIhPWEuJCYmYi5jb250YWlucyhhLiQpfSxmb2N1czpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt0cnl7dGhpcy4kLmZvY3VzKCl9Y2F0Y2goYil7fX1yZXR1cm4gZnVuY3Rpb24oYil7Yj9DS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGEsMTAwLHRoaXMpOmEuY2FsbCh0aGlzKX19KCksZ2V0SHRtbDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuJC5pbm5lckhUTUw7cmV0dXJuIENLRURJVE9SLmVudi5pZT9hLnJlcGxhY2UoLzxcXD9bXj5dKj4vZyxcIlwiKTphfSxnZXRPdXRlckh0bWw6ZnVuY3Rpb24oKXtpZih0aGlzLiQub3V0ZXJIVE1MKXJldHVybiB0aGlzLiQub3V0ZXJIVE1MLnJlcGxhY2UoLzxcXD9bXj5dKj4vLFwiXCIpO3ZhciBhPXRoaXMuJC5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7YS5hcHBlbmRDaGlsZCh0aGlzLiQuY2xvbmVOb2RlKCEwKSk7cmV0dXJuIGEuaW5uZXJIVE1MfSxnZXRDbGllbnRSZWN0OmZ1bmN0aW9uKCl7dmFyIGE9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LFxudGhpcy4kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTshYS53aWR0aCYmKGEud2lkdGg9YS5yaWdodC1hLmxlZnQpOyFhLmhlaWdodCYmKGEuaGVpZ2h0PWEuYm90dG9tLWEudG9wKTtyZXR1cm4gYX0sc2V0SHRtbDpDS0VESVRPUi5lbnYuaWUmJjk+Q0tFRElUT1IuZW52LnZlcnNpb24/ZnVuY3Rpb24oYSl7dHJ5e3ZhciBiPXRoaXMuJDtpZih0aGlzLmdldFBhcmVudCgpKXJldHVybiBiLmlubmVySFRNTD1hO3ZhciBjPXRoaXMuZ2V0RG9jdW1lbnQoKS5fZ2V0SHRtbDVTaGl2RnJhZygpO2MuYXBwZW5kQ2hpbGQoYik7Yi5pbm5lckhUTUw9YTtjLnJlbW92ZUNoaWxkKGIpO3JldHVybiBhfWNhdGNoKGUpe3RoaXMuJC5pbm5lckhUTUw9XCJcIjtiPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcImJvZHlcIix0aGlzLmdldERvY3VtZW50KCkpO2IuJC5pbm5lckhUTUw9YTtmb3IoYj1iLmdldENoaWxkcmVuKCk7Yi5jb3VudCgpOyl0aGlzLmFwcGVuZChiLmdldEl0ZW0oMCkpO3JldHVybiBhfX06XG5mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy4kLmlubmVySFRNTD1hfSxzZXRUZXh0OmZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7YS5pbm5lckhUTUw9XCJ4XCI7YT1hLnRleHRDb250ZW50O3JldHVybiBmdW5jdGlvbihiKXt0aGlzLiRbYT9cInRleHRDb250ZW50XCI6XCJpbm5lclRleHRcIl09Yn19KCksZ2V0QXR0cmlidXRlOmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuJC5nZXRBdHRyaWJ1dGUoYSwyKX07cmV0dXJuIENLRURJVE9SLmVudi5pZSYmKENLRURJVE9SLmVudi5pZTdDb21wYXR8fENLRURJVE9SLmVudi5xdWlya3MpP2Z1bmN0aW9uKGEpe3N3aXRjaChhKXtjYXNlIFwiY2xhc3NcIjphPVwiY2xhc3NOYW1lXCI7YnJlYWs7Y2FzZSBcImh0dHAtZXF1aXZcIjphPVwiaHR0cEVxdWl2XCI7YnJlYWs7Y2FzZSBcIm5hbWVcIjpyZXR1cm4gdGhpcy4kLm5hbWU7Y2FzZSBcInRhYmluZGV4XCI6cmV0dXJuIGE9dGhpcy4kLmdldEF0dHJpYnV0ZShhLFxuMiksMCE9PWEmJjA9PT10aGlzLiQudGFiSW5kZXgmJihhPW51bGwpLGE7Y2FzZSBcImNoZWNrZWRcIjpyZXR1cm4gYT10aGlzLiQuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oYSksKGEuc3BlY2lmaWVkP2Eubm9kZVZhbHVlOnRoaXMuJC5jaGVja2VkKT9cImNoZWNrZWRcIjpudWxsO2Nhc2UgXCJoc3BhY2VcIjpjYXNlIFwidmFsdWVcIjpyZXR1cm4gdGhpcy4kW2FdO2Nhc2UgXCJzdHlsZVwiOnJldHVybiB0aGlzLiQuc3R5bGUuY3NzVGV4dDtjYXNlIFwiY29udGVudGVkaXRhYmxlXCI6Y2FzZSBcImNvbnRlbnRFZGl0YWJsZVwiOnJldHVybiB0aGlzLiQuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJjb250ZW50RWRpdGFibGVcIikuc3BlY2lmaWVkP3RoaXMuJC5nZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIik6bnVsbH1yZXR1cm4gdGhpcy4kLmdldEF0dHJpYnV0ZShhLDIpfTphfSgpLGdldEF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSl7dmFyIGI9e30sYz10aGlzLiQuYXR0cmlidXRlcyxlO2E9Q0tFRElUT1IudG9vbHMuaXNBcnJheShhKT9cbmE6W107Zm9yKGU9MDtlPGMubGVuZ3RoO2UrKyktMT09PUNLRURJVE9SLnRvb2xzLmluZGV4T2YoYSxjW2VdLm5hbWUpJiYoYltjW2VdLm5hbWVdPWNbZV0udmFsdWUpO3JldHVybiBifSxnZXRDaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybiBuZXcgQ0tFRElUT1IuZG9tLm5vZGVMaXN0KHRoaXMuJC5jaGlsZE5vZGVzKX0sZ2V0Q29tcHV0ZWRTdHlsZTpkb2N1bWVudC5kZWZhdWx0VmlldyYmZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZT9mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFdpbmRvdygpLiQuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLiQsbnVsbCk7cmV0dXJuIGI/Yi5nZXRQcm9wZXJ0eVZhbHVlKGEpOlwiXCJ9OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLiQuY3VycmVudFN0eWxlW0NLRURJVE9SLnRvb2xzLmNzc1N0eWxlVG9Eb21TdHlsZShhKV19LGdldER0ZDpmdW5jdGlvbigpe3ZhciBhPUNLRURJVE9SLmR0ZFt0aGlzLmdldE5hbWUoKV07dGhpcy5nZXREdGQ9XG5mdW5jdGlvbigpe3JldHVybiBhfTtyZXR1cm4gYX0sZ2V0RWxlbWVudHNCeVRhZzpDS0VESVRPUi5kb20uZG9jdW1lbnQucHJvdG90eXBlLmdldEVsZW1lbnRzQnlUYWcsZ2V0VGFiSW5kZXg6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiQudGFiSW5kZXg7cmV0dXJuIDAhPT1hfHxDS0VESVRPUi5kdGQuJHRhYkluZGV4W3RoaXMuZ2V0TmFtZSgpXXx8MD09PXBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiksMTApP2E6LTF9LGdldFRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kLnRleHRDb250ZW50fHx0aGlzLiQuaW5uZXJUZXh0fHxcIlwifSxnZXRXaW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXREb2N1bWVudCgpLmdldFdpbmRvdygpfSxnZXRJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLiQuaWR8fG51bGx9LGdldE5hbWVBdHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kLm5hbWV8fG51bGx9LGdldE5hbWU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbmlmKENLRURJVE9SLmVudi5pZSYmOD49ZG9jdW1lbnQuZG9jdW1lbnRNb2RlKXt2YXIgYj10aGlzLiQuc2NvcGVOYW1lO1wiSFRNTFwiIT1iJiYoYT1iLnRvTG93ZXJDYXNlKCkrXCI6XCIrYSl9dGhpcy5nZXROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIGF9O3JldHVybiB0aGlzLmdldE5hbWUoKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kLnZhbHVlfSxnZXRGaXJzdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLiQuZmlyc3RDaGlsZDsoYj1iJiZuZXcgQ0tFRElUT1IuZG9tLm5vZGUoYikpJiZhJiYhYShiKSYmKGI9Yi5nZXROZXh0KGEpKTtyZXR1cm4gYn0sZ2V0TGFzdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLiQubGFzdENoaWxkOyhiPWImJm5ldyBDS0VESVRPUi5kb20ubm9kZShiKSkmJmEmJiFhKGIpJiYoYj1iLmdldFByZXZpb3VzKGEpKTtyZXR1cm4gYn0sZ2V0U3R5bGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuJC5zdHlsZVtDS0VESVRPUi50b29scy5jc3NTdHlsZVRvRG9tU3R5bGUoYSldfSxcbmlzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXROYW1lKCk7aWYoXCJvYmplY3RcIj09dHlwZW9mIGFyZ3VtZW50c1swXSlyZXR1cm4hIWFyZ3VtZW50c1swXVthXTtmb3IodmFyIGI9MDtiPGFyZ3VtZW50cy5sZW5ndGg7YisrKWlmKGFyZ3VtZW50c1tiXT09YSlyZXR1cm4hMDtyZXR1cm4hMX0saXNFZGl0YWJsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldE5hbWUoKTtyZXR1cm4gdGhpcy5pc1JlYWRPbmx5KCl8fFwibm9uZVwiPT10aGlzLmdldENvbXB1dGVkU3R5bGUoXCJkaXNwbGF5XCIpfHxcImhpZGRlblwiPT10aGlzLmdldENvbXB1dGVkU3R5bGUoXCJ2aXNpYmlsaXR5XCIpfHxDS0VESVRPUi5kdGQuJG5vbkVkaXRhYmxlW2JdfHxDS0VESVRPUi5kdGQuJGVtcHR5W2JdfHx0aGlzLmlzKFwiYVwiKSYmKHRoaXMuZGF0YShcImNrZS1zYXZlZC1uYW1lXCIpfHx0aGlzLmhhc0F0dHJpYnV0ZShcIm5hbWVcIikpJiYhdGhpcy5nZXRDaGlsZENvdW50KCk/ITE6ITEhPT1hPyhhPUNLRURJVE9SLmR0ZFtiXXx8XG5DS0VESVRPUi5kdGQuc3BhbiwhKCFhfHwhYVtcIiNcIl0pKTohMH0saXNJZGVudGljYWw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jbG9uZSgwLDEpO2E9YS5jbG9uZSgwLDEpO2IucmVtb3ZlQXR0cmlidXRlcyhbXCJfbW96X2RpcnR5XCIsXCJkYXRhLWNrZS1leHBhbmRvXCIsXCJkYXRhLWNrZS1zYXZlZC1ocmVmXCIsXCJkYXRhLWNrZS1zYXZlZC1uYW1lXCJdKTthLnJlbW92ZUF0dHJpYnV0ZXMoW1wiX21vel9kaXJ0eVwiLFwiZGF0YS1ja2UtZXhwYW5kb1wiLFwiZGF0YS1ja2Utc2F2ZWQtaHJlZlwiLFwiZGF0YS1ja2Utc2F2ZWQtbmFtZVwiXSk7aWYoYi4kLmlzRXF1YWxOb2RlKXJldHVybiBiLiQuc3R5bGUuY3NzVGV4dD1DS0VESVRPUi50b29scy5ub3JtYWxpemVDc3NUZXh0KGIuJC5zdHlsZS5jc3NUZXh0KSxhLiQuc3R5bGUuY3NzVGV4dD1DS0VESVRPUi50b29scy5ub3JtYWxpemVDc3NUZXh0KGEuJC5zdHlsZS5jc3NUZXh0KSxiLiQuaXNFcXVhbE5vZGUoYS4kKTtiPWIuZ2V0T3V0ZXJIdG1sKCk7YT1cbmEuZ2V0T3V0ZXJIdG1sKCk7aWYoQ0tFRElUT1IuZW52LmllJiY5PkNLRURJVE9SLmVudi52ZXJzaW9uJiZ0aGlzLmlzKFwiYVwiKSl7dmFyIGM9dGhpcy5nZXRQYXJlbnQoKTtjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGM9Yy5jbG9uZSgpLGMuc2V0SHRtbChiKSxiPWMuZ2V0SHRtbCgpLGMuc2V0SHRtbChhKSxhPWMuZ2V0SHRtbCgpKX1yZXR1cm4gYj09YX0saXNWaXNpYmxlOmZ1bmN0aW9uKCl7dmFyIGE9KHRoaXMuJC5vZmZzZXRIZWlnaHR8fHRoaXMuJC5vZmZzZXRXaWR0aCkmJlwiaGlkZGVuXCIhPXRoaXMuZ2V0Q29tcHV0ZWRTdHlsZShcInZpc2liaWxpdHlcIiksYixjO2EmJkNLRURJVE9SLmVudi53ZWJraXQmJihiPXRoaXMuZ2V0V2luZG93KCksIWIuZXF1YWxzKENLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpKSYmKGM9Yi4kLmZyYW1lRWxlbWVudCkmJihhPShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYykpLmlzVmlzaWJsZSgpKSk7cmV0dXJuISFhfSxpc0VtcHR5SW5saW5lUmVtb3ZlYWJsZTpmdW5jdGlvbigpe2lmKCFDS0VESVRPUi5kdGQuJHJlbW92ZUVtcHR5W3RoaXMuZ2V0TmFtZSgpXSlyZXR1cm4hMTtcbmZvcih2YXIgYT10aGlzLmdldENoaWxkcmVuKCksYj0wLGM9YS5jb3VudCgpO2I8YztiKyspe3ZhciBlPWEuZ2V0SXRlbShiKTtpZihlLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVHx8IWUuZGF0YShcImNrZS1ib29rbWFya1wiKSlpZihlLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmIWUuaXNFbXB0eUlubGluZVJlbW92ZWFibGUoKXx8ZS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJkNLRURJVE9SLnRvb2xzLnRyaW0oZS5nZXRUZXh0KCkpKXJldHVybiExfXJldHVybiEwfSxoYXNBdHRyaWJ1dGVzOkNLRURJVE9SLmVudi5pZSYmKENLRURJVE9SLmVudi5pZTdDb21wYXR8fENLRURJVE9SLmVudi5xdWlya3MpP2Z1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuJC5hdHRyaWJ1dGVzLGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTtzd2l0Y2goYy5ub2RlTmFtZSl7Y2FzZSBcImNsYXNzXCI6aWYodGhpcy5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSlyZXR1cm4hMDtjYXNlIFwiZGF0YS1ja2UtZXhwYW5kb1wiOmNvbnRpbnVlO1xuZGVmYXVsdDppZihjLnNwZWNpZmllZClyZXR1cm4hMH19cmV0dXJuITF9OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kLmF0dHJpYnV0ZXMsYj1hLmxlbmd0aCxjPXtcImRhdGEtY2tlLWV4cGFuZG9cIjoxLF9tb3pfZGlydHk6MX07cmV0dXJuIDA8YiYmKDI8Ynx8IWNbYVswXS5ub2RlTmFtZV18fDI9PWImJiFjW2FbMV0ubm9kZU5hbWVdKX0saGFzQXR0cmlidXRlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiKXt2YXIgYz10aGlzLiQuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oYik7aWYoXCJpbnB1dFwiPT10aGlzLmdldE5hbWUoKSlzd2l0Y2goYil7Y2FzZSBcImNsYXNzXCI6cmV0dXJuIDA8dGhpcy4kLmNsYXNzTmFtZS5sZW5ndGg7Y2FzZSBcImNoZWNrZWRcIjpyZXR1cm4hIXRoaXMuJC5jaGVja2VkO2Nhc2UgXCJ2YWx1ZVwiOnJldHVybiBiPXRoaXMuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSxcImNoZWNrYm94XCI9PWJ8fFwicmFkaW9cIj09Yj9cIm9uXCIhPXRoaXMuJC52YWx1ZTohIXRoaXMuJC52YWx1ZX1yZXR1cm4gYz9cbmMuc3BlY2lmaWVkOiExfXJldHVybiBDS0VESVRPUi5lbnYuaWU/OD5DS0VESVRPUi5lbnYudmVyc2lvbj9mdW5jdGlvbihiKXtyZXR1cm5cIm5hbWVcIj09Yj8hIXRoaXMuJC5uYW1lOmEuY2FsbCh0aGlzLGIpfTphOmZ1bmN0aW9uKGEpe3JldHVybiEhdGhpcy4kLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKGEpfX0oKSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5zZXRTdHlsZShcImRpc3BsYXlcIixcIm5vbmVcIil9LG1vdmVDaGlsZHJlbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuJDthPWEuJDtpZihjIT1hKXt2YXIgZTtpZihiKWZvcig7ZT1jLmxhc3RDaGlsZDspYS5pbnNlcnRCZWZvcmUoYy5yZW1vdmVDaGlsZChlKSxhLmZpcnN0Q2hpbGQpO2Vsc2UgZm9yKDtlPWMuZmlyc3RDaGlsZDspYS5hcHBlbmRDaGlsZChjLnJlbW92ZUNoaWxkKGUpKX19LG1lcmdlU2libGluZ3M6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIsYyxlKXtpZihjJiZjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCl7Zm9yKHZhciBkPVxuW107Yy5kYXRhKFwiY2tlLWJvb2ttYXJrXCIpfHxjLmlzRW1wdHlJbmxpbmVSZW1vdmVhYmxlKCk7KWlmKGQucHVzaChjKSxjPWU/Yy5nZXROZXh0KCk6Yy5nZXRQcmV2aW91cygpLCFjfHxjLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVClyZXR1cm47aWYoYi5pc0lkZW50aWNhbChjKSl7Zm9yKHZhciBsPWU/Yi5nZXRMYXN0KCk6Yi5nZXRGaXJzdCgpO2QubGVuZ3RoOylkLnNoaWZ0KCkubW92ZShiLCFlKTtjLm1vdmVDaGlsZHJlbihiLCFlKTtjLnJlbW92ZSgpO2wmJmwudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZsLm1lcmdlU2libGluZ3MoKX19fXJldHVybiBmdW5jdGlvbihiKXtpZighMT09PWJ8fENLRURJVE9SLmR0ZC4kcmVtb3ZlRW1wdHlbdGhpcy5nZXROYW1lKCldfHx0aGlzLmlzKFwiYVwiKSlhKHRoaXMsdGhpcy5nZXROZXh0KCksITApLGEodGhpcyx0aGlzLmdldFByZXZpb3VzKCkpfX0oKSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5zZXRTdHlsZXMoe2Rpc3BsYXk6XCJcIixcbnZpc2liaWxpdHk6XCJcIn0pfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhLGIpe3RoaXMuJC5zZXRBdHRyaWJ1dGUoYSxiKTtyZXR1cm4gdGhpc307cmV0dXJuIENLRURJVE9SLmVudi5pZSYmKENLRURJVE9SLmVudi5pZTdDb21wYXR8fENLRURJVE9SLmVudi5xdWlya3MpP2Z1bmN0aW9uKGIsYyl7XCJjbGFzc1wiPT1iP3RoaXMuJC5jbGFzc05hbWU9YzpcInN0eWxlXCI9PWI/dGhpcy4kLnN0eWxlLmNzc1RleHQ9YzpcInRhYmluZGV4XCI9PWI/dGhpcy4kLnRhYkluZGV4PWM6XCJjaGVja2VkXCI9PWI/dGhpcy4kLmNoZWNrZWQ9YzpcImNvbnRlbnRlZGl0YWJsZVwiPT1iP2EuY2FsbCh0aGlzLFwiY29udGVudEVkaXRhYmxlXCIsYyk6YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXN9OkNLRURJVE9SLmVudi5pZThDb21wYXQmJkNLRURJVE9SLmVudi5zZWN1cmU/ZnVuY3Rpb24oYixjKXtpZihcInNyY1wiPT1iJiZjLm1hdGNoKC9eaHR0cDpcXC9cXC8vKSl0cnl7YS5hcHBseSh0aGlzLFxuYXJndW1lbnRzKX1jYXRjaChlKXt9ZWxzZSBhLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpc306YX0oKSxzZXRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKXRoaXMuc2V0QXR0cmlidXRlKGIsYVtiXSk7cmV0dXJuIHRoaXN9LHNldFZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMuJC52YWx1ZT1hO3JldHVybiB0aGlzfSxyZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihhKXt0aGlzLiQucmVtb3ZlQXR0cmlidXRlKGEpfTtyZXR1cm4gQ0tFRElUT1IuZW52LmllJiYoQ0tFRElUT1IuZW52LmllN0NvbXBhdHx8Q0tFRElUT1IuZW52LnF1aXJrcyk/ZnVuY3Rpb24oYSl7XCJjbGFzc1wiPT1hP2E9XCJjbGFzc05hbWVcIjpcInRhYmluZGV4XCI9PWE/YT1cInRhYkluZGV4XCI6XCJjb250ZW50ZWRpdGFibGVcIj09YSYmKGE9XCJjb250ZW50RWRpdGFibGVcIik7dGhpcy4kLnJlbW92ZUF0dHJpYnV0ZShhKX06YX0oKSxyZW1vdmVBdHRyaWJ1dGVzOmZ1bmN0aW9uKGEpe2lmKENLRURJVE9SLnRvb2xzLmlzQXJyYXkoYSkpZm9yKHZhciBiPVxuMDtiPGEubGVuZ3RoO2IrKyl0aGlzLnJlbW92ZUF0dHJpYnV0ZShhW2JdKTtlbHNlIGZvcihiIGluIGE9YXx8dGhpcy5nZXRBdHRyaWJ1dGVzKCksYSlhLmhhc093blByb3BlcnR5KGIpJiZ0aGlzLnJlbW92ZUF0dHJpYnV0ZShiKX0scmVtb3ZlU3R5bGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy4kLnN0eWxlO2lmKGIucmVtb3ZlUHJvcGVydHl8fFwiYm9yZGVyXCIhPWEmJlwibWFyZ2luXCIhPWEmJlwicGFkZGluZ1wiIT1hKWIucmVtb3ZlUHJvcGVydHk/Yi5yZW1vdmVQcm9wZXJ0eShhKTpiLnJlbW92ZUF0dHJpYnV0ZShDS0VESVRPUi50b29scy5jc3NTdHlsZVRvRG9tU3R5bGUoYSkpLHRoaXMuJC5zdHlsZS5jc3NUZXh0fHx0aGlzLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpO2Vsc2V7dmFyIGM9W1widG9wXCIsXCJsZWZ0XCIsXCJyaWdodFwiLFwiYm90dG9tXCJdLGU7XCJib3JkZXJcIj09YSYmKGU9W1wiY29sb3JcIixcInN0eWxlXCIsXCJ3aWR0aFwiXSk7Zm9yKHZhciBiPVtdLGQ9MDtkPGMubGVuZ3RoO2QrKylpZihlKWZvcih2YXIgcj1cbjA7cjxlLmxlbmd0aDtyKyspYi5wdXNoKFthLGNbZF0sZVtyXV0uam9pbihcIi1cIikpO2Vsc2UgYi5wdXNoKFthLGNbZF1dLmpvaW4oXCItXCIpKTtmb3IoYT0wO2E8Yi5sZW5ndGg7YSsrKXRoaXMucmVtb3ZlU3R5bGUoYlthXSl9fSxzZXRTdHlsZTpmdW5jdGlvbihhLGIpe3RoaXMuJC5zdHlsZVtDS0VESVRPUi50b29scy5jc3NTdHlsZVRvRG9tU3R5bGUoYSldPWI7cmV0dXJuIHRoaXN9LHNldFN0eWxlczpmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSl0aGlzLnNldFN0eWxlKGIsYVtiXSk7cmV0dXJuIHRoaXN9LHNldE9wYWNpdHk6ZnVuY3Rpb24oYSl7Q0tFRElUT1IuZW52LmllJiY5PkNLRURJVE9SLmVudi52ZXJzaW9uPyhhPU1hdGgucm91bmQoMTAwKmEpLHRoaXMuc2V0U3R5bGUoXCJmaWx0ZXJcIiwxMDA8PWE/XCJcIjpcInByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5BbHBoYShvcGFjaXR5XFx4M2RcIithK1wiKVwiKSk6dGhpcy5zZXRTdHlsZShcIm9wYWNpdHlcIixhKX0sdW5zZWxlY3RhYmxlOmZ1bmN0aW9uKCl7dGhpcy5zZXRTdHlsZXMoQ0tFRElUT1IudG9vbHMuY3NzVmVuZG9yUHJlZml4KFwidXNlci1zZWxlY3RcIixcblwibm9uZVwiKSk7aWYoQ0tFRElUT1IuZW52LmllKXt0aGlzLnNldEF0dHJpYnV0ZShcInVuc2VsZWN0YWJsZVwiLFwib25cIik7Zm9yKHZhciBhLGI9dGhpcy5nZXRFbGVtZW50c0J5VGFnKFwiKlwiKSxjPTAsZT1iLmNvdW50KCk7YzxlO2MrKylhPWIuZ2V0SXRlbShjKSxhLnNldEF0dHJpYnV0ZShcInVuc2VsZWN0YWJsZVwiLFwib25cIil9fSxnZXRQb3NpdGlvbmVkQW5jZXN0b3I6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcztcImh0bWxcIiE9YS5nZXROYW1lKCk7KXtpZihcInN0YXRpY1wiIT1hLmdldENvbXB1dGVkU3R5bGUoXCJwb3NpdGlvblwiKSlyZXR1cm4gYTthPWEuZ2V0UGFyZW50KCl9cmV0dXJuIG51bGx9LGdldERvY3VtZW50UG9zaXRpb246ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPTAsZT10aGlzLmdldERvY3VtZW50KCksZD1lLmdldEJvZHkoKSxyPVwiQmFja0NvbXBhdFwiPT1lLiQuY29tcGF0TW9kZTtpZihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0JiYoQ0tFRElUT1IuZW52LmllP1xuOCE9PUNLRURJVE9SLmVudi52ZXJzaW9uOjEpKXt2YXIgZj10aGlzLiQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZz1lLiQuZG9jdW1lbnRFbGVtZW50LHE9Zy5jbGllbnRUb3B8fGQuJC5jbGllbnRUb3B8fDAsdz1nLmNsaWVudExlZnR8fGQuJC5jbGllbnRMZWZ0fHwwLGs9ITA7Q0tFRElUT1IuZW52LmllJiYoaz1lLmdldERvY3VtZW50RWxlbWVudCgpLmNvbnRhaW5zKHRoaXMpLGU9ZS5nZXRCb2R5KCkuY29udGFpbnModGhpcyksaz1yJiZlfHwhciYmayk7ayYmKENLRURJVE9SLmVudi53ZWJraXR8fENLRURJVE9SLmVudi5pZSYmMTI8PUNLRURJVE9SLmVudi52ZXJzaW9uPyhiPWQuJC5zY3JvbGxMZWZ0fHxnLnNjcm9sbExlZnQsYz1kLiQuc2Nyb2xsVG9wfHxnLnNjcm9sbFRvcCk6KGM9cj9kLiQ6ZyxiPWMuc2Nyb2xsTGVmdCxjPWMuc2Nyb2xsVG9wKSxiPWYubGVmdCtiLXcsYz1mLnRvcCtjLXEpfWVsc2UgZm9yKHE9dGhpcyx3PW51bGw7cSYmXCJib2R5XCIhPXEuZ2V0TmFtZSgpJiZcblwiaHRtbFwiIT1xLmdldE5hbWUoKTspe2IrPXEuJC5vZmZzZXRMZWZ0LXEuJC5zY3JvbGxMZWZ0O2MrPXEuJC5vZmZzZXRUb3AtcS4kLnNjcm9sbFRvcDtxLmVxdWFscyh0aGlzKXx8KGIrPXEuJC5jbGllbnRMZWZ0fHwwLGMrPXEuJC5jbGllbnRUb3B8fDApO2Zvcig7dyYmIXcuZXF1YWxzKHEpOyliLT13LiQuc2Nyb2xsTGVmdCxjLT13LiQuc2Nyb2xsVG9wLHc9dy5nZXRQYXJlbnQoKTt3PXE7cT0oZj1xLiQub2Zmc2V0UGFyZW50KT9uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoZik6bnVsbH1hJiYoZj10aGlzLmdldFdpbmRvdygpLHE9YS5nZXRXaW5kb3coKSwhZi5lcXVhbHMocSkmJmYuJC5mcmFtZUVsZW1lbnQmJihhPShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoZi4kLmZyYW1lRWxlbWVudCkpLmdldERvY3VtZW50UG9zaXRpb24oYSksYis9YS54LGMrPWEueSkpO2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3R8fCFDS0VESVRPUi5lbnYuZ2Vja298fFxucnx8KGIrPXRoaXMuJC5jbGllbnRMZWZ0PzE6MCxjKz10aGlzLiQuY2xpZW50VG9wPzE6MCk7cmV0dXJue3g6Yix5OmN9fSxzY3JvbGxJbnRvVmlldzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFBhcmVudCgpO2lmKGIpe2RvIGlmKChiLiQuY2xpZW50V2lkdGgmJmIuJC5jbGllbnRXaWR0aDxiLiQuc2Nyb2xsV2lkdGh8fGIuJC5jbGllbnRIZWlnaHQmJmIuJC5jbGllbnRIZWlnaHQ8Yi4kLnNjcm9sbEhlaWdodCkmJiFiLmlzKFwiYm9keVwiKSYmdGhpcy5zY3JvbGxJbnRvUGFyZW50KGIsYSwxKSxiLmlzKFwiaHRtbFwiKSl7dmFyIGM9Yi5nZXRXaW5kb3coKTt0cnl7dmFyIGU9Yy4kLmZyYW1lRWxlbWVudDtlJiYoYj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoZSkpfWNhdGNoKGQpe319d2hpbGUoYj1iLmdldFBhcmVudCgpKX19LHNjcm9sbEludG9QYXJlbnQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGQscixmO2Z1bmN0aW9uIGcoYixjKXsvYm9keXxodG1sLy50ZXN0KGEuZ2V0TmFtZSgpKT9cbmEuZ2V0V2luZG93KCkuJC5zY3JvbGxCeShiLGMpOihhLiQuc2Nyb2xsTGVmdCs9YixhLiQuc2Nyb2xsVG9wKz1jKX1mdW5jdGlvbiBxKGEsYil7dmFyIGM9e3g6MCx5OjB9O2lmKCFhLmlzKGs/XCJib2R5XCI6XCJodG1sXCIpKXt2YXIgZT1hLiQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7Yy54PWUubGVmdDtjLnk9ZS50b3B9ZT1hLmdldFdpbmRvdygpO2UuZXF1YWxzKGIpfHwoZT1xKENLRURJVE9SLmRvbS5lbGVtZW50LmdldChlLiQuZnJhbWVFbGVtZW50KSxiKSxjLngrPWUueCxjLnkrPWUueSk7cmV0dXJuIGN9ZnVuY3Rpb24gdyhhLGIpe3JldHVybiBwYXJzZUludChhLmdldENvbXB1dGVkU3R5bGUoXCJtYXJnaW4tXCIrYil8fDAsMTApfHwwfSFhJiYoYT10aGlzLmdldFdpbmRvdygpKTtyPWEuZ2V0RG9jdW1lbnQoKTt2YXIgaz1cIkJhY2tDb21wYXRcIj09ci4kLmNvbXBhdE1vZGU7YSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS53aW5kb3cmJihhPWs/ci5nZXRCb2R5KCk6ci5nZXREb2N1bWVudEVsZW1lbnQoKSk7XG5DS0VESVRPUi5lbnYud2Via2l0JiYocj10aGlzLmdldEVkaXRvcighMSkpJiYoci5fLnByZXZpb3VzU2Nyb2xsVG9wPW51bGwpO3I9YS5nZXRXaW5kb3coKTtkPXEodGhpcyxyKTt2YXIgdD1xKGEsciksdj10aGlzLiQub2Zmc2V0SGVpZ2h0O2U9dGhpcy4kLm9mZnNldFdpZHRoO3ZhciBoPWEuJC5jbGllbnRIZWlnaHQscD1hLiQuY2xpZW50V2lkdGg7cj1kLngtdyh0aGlzLFwibGVmdFwiKS10Lnh8fDA7Zj1kLnktdyh0aGlzLFwidG9wXCIpLXQueXx8MDtlPWQueCtlK3codGhpcyxcInJpZ2h0XCIpLSh0LngrcCl8fDA7ZD1kLnkrdit3KHRoaXMsXCJib3R0b21cIiktKHQueStoKXx8MDsoMD5mfHwwPGQpJiZnKDAsITA9PT1iP2Y6ITE9PT1iP2Q6MD5mP2Y6ZCk7YyYmKDA+cnx8MDxlKSYmZygwPnI/cjplLDApfSxzZXRTdGF0ZTpmdW5jdGlvbihhLGIsYyl7Yj1ifHxcImNrZVwiO3N3aXRjaChhKXtjYXNlIENLRURJVE9SLlRSSVNUQVRFX09OOnRoaXMuYWRkQ2xhc3MoYitcIl9vblwiKTt0aGlzLnJlbW92ZUNsYXNzKGIrXG5cIl9vZmZcIik7dGhpcy5yZW1vdmVDbGFzcyhiK1wiX2Rpc2FibGVkXCIpO2MmJnRoaXMuc2V0QXR0cmlidXRlKFwiYXJpYS1wcmVzc2VkXCIsITApO2MmJnRoaXMucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiKTticmVhaztjYXNlIENLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEOnRoaXMuYWRkQ2xhc3MoYitcIl9kaXNhYmxlZFwiKTt0aGlzLnJlbW92ZUNsYXNzKGIrXCJfb2ZmXCIpO3RoaXMucmVtb3ZlQ2xhc3MoYitcIl9vblwiKTtjJiZ0aGlzLnNldEF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIiwhMCk7YyYmdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLXByZXNzZWRcIik7YnJlYWs7ZGVmYXVsdDp0aGlzLmFkZENsYXNzKGIrXCJfb2ZmXCIpLHRoaXMucmVtb3ZlQ2xhc3MoYitcIl9vblwiKSx0aGlzLnJlbW92ZUNsYXNzKGIrXCJfZGlzYWJsZWRcIiksYyYmdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLXByZXNzZWRcIiksYyYmdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIpfX0sXG5nZXRGcmFtZURvY3VtZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kO3RyeXthLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnR9Y2F0Y2goYil7YS5zcmM9YS5zcmN9cmV0dXJuIGEmJm5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnQoYS5jb250ZW50V2luZG93LmRvY3VtZW50KX0sY29weUF0dHJpYnV0ZXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLiQuYXR0cmlidXRlcztiPWJ8fHt9O2Zvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKXt2YXIgZD1jW2VdLGY9ZC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLGc7aWYoIShmIGluIGIpKWlmKFwiY2hlY2tlZFwiPT1mJiYoZz10aGlzLmdldEF0dHJpYnV0ZShmKSkpYS5zZXRBdHRyaWJ1dGUoZixnKTtlbHNlIGlmKCFDS0VESVRPUi5lbnYuaWV8fHRoaXMuaGFzQXR0cmlidXRlKGYpKWc9dGhpcy5nZXRBdHRyaWJ1dGUoZiksbnVsbD09PWcmJihnPWQubm9kZVZhbHVlKSxhLnNldEF0dHJpYnV0ZShmLGcpfVwiXCIhPT10aGlzLiQuc3R5bGUuY3NzVGV4dCYmXG4oYS4kLnN0eWxlLmNzc1RleHQ9dGhpcy4kLnN0eWxlLmNzc1RleHQpfSxyZW5hbWVOb2RlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZ2V0TmFtZSgpIT1hKXt2YXIgYj10aGlzLmdldERvY3VtZW50KCk7YT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYSxiKTt0aGlzLmNvcHlBdHRyaWJ1dGVzKGEpO3RoaXMubW92ZUNoaWxkcmVuKGEpO3RoaXMuZ2V0UGFyZW50KCEwKSYmdGhpcy4kLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGEuJCx0aGlzLiQpO2EuJFtcImRhdGEtY2tlLWV4cGFuZG9cIl09dGhpcy4kW1wiZGF0YS1ja2UtZXhwYW5kb1wiXTt0aGlzLiQ9YS4kO2RlbGV0ZSB0aGlzLmdldE5hbWV9fSxnZXRDaGlsZDpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYixjKXt2YXIgZT1iLmNoaWxkTm9kZXM7aWYoMDw9YyYmYzxlLmxlbmd0aClyZXR1cm4gZVtjXX1yZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9dGhpcy4kO2lmKGIuc2xpY2UpZm9yKGI9Yi5zbGljZSgpOzA8Yi5sZW5ndGgmJmM7KWM9YShjLFxuYi5zaGlmdCgpKTtlbHNlIGM9YShjLGIpO3JldHVybiBjP25ldyBDS0VESVRPUi5kb20ubm9kZShjKTpudWxsfX0oKSxnZXRDaGlsZENvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJC5jaGlsZE5vZGVzLmxlbmd0aH0sZGlzYWJsZUNvbnRleHRNZW51OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiKXtyZXR1cm4gYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmIuaGFzQ2xhc3MoXCJja2VfZW5hYmxlX2NvbnRleHRfbWVudVwiKX10aGlzLm9uKFwiY29udGV4dG1lbnVcIixmdW5jdGlvbihiKXtiLmRhdGEuZ2V0VGFyZ2V0KCkuZ2V0QXNjZW5kYW50KGEsITApfHxiLmRhdGEucHJldmVudERlZmF1bHQoKX0pfSxnZXREaXJlY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dGhpcy5nZXRDb21wdXRlZFN0eWxlKFwiZGlyZWN0aW9uXCIpfHx0aGlzLmdldERpcmVjdGlvbigpfHx0aGlzLmdldFBhcmVudCgpJiZ0aGlzLmdldFBhcmVudCgpLmdldERpcmVjdGlvbigxKXx8dGhpcy5nZXREb2N1bWVudCgpLiQuZGlyfHxcblwibHRyXCI6dGhpcy5nZXRTdHlsZShcImRpcmVjdGlvblwiKXx8dGhpcy5nZXRBdHRyaWJ1dGUoXCJkaXJcIil9LGRhdGE6ZnVuY3Rpb24oYSxiKXthPVwiZGF0YS1cIithO2lmKHZvaWQgMD09PWIpcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKGEpOyExPT09Yj90aGlzLnJlbW92ZUF0dHJpYnV0ZShhKTp0aGlzLnNldEF0dHJpYnV0ZShhLGIpO3JldHVybiBudWxsfSxnZXRFZGl0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9Q0tFRElUT1IuaW5zdGFuY2VzLGMsZSxkO2E9YXx8dm9pZCAwPT09YTtmb3IoYyBpbiBiKWlmKGU9YltjXSxlLmVsZW1lbnQuZXF1YWxzKHRoaXMpJiZlLmVsZW1lbnRNb2RlIT1DS0VESVRPUi5FTEVNRU5UX01PREVfQVBQRU5EVE98fCFhJiYoZD1lLmVkaXRhYmxlKCksZC5lcXVhbHModGhpcyl8fGQuY29udGFpbnModGhpcykpKXJldHVybiBlO3JldHVybiBudWxsfSxmaW5kOmZ1bmN0aW9uKGEpe3ZhciBjPWQodGhpcyk7YT1uZXcgQ0tFRElUT1IuZG9tLm5vZGVMaXN0KHRoaXMuJC5xdWVyeVNlbGVjdG9yQWxsKGIodGhpcyxcbmEpKSk7YygpO3JldHVybiBhfSxmaW5kT25lOmZ1bmN0aW9uKGEpe3ZhciBjPWQodGhpcyk7YT10aGlzLiQucXVlcnlTZWxlY3RvcihiKHRoaXMsYSkpO2MoKTtyZXR1cm4gYT9uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYSk6bnVsbH0sZm9yRWFjaDpmdW5jdGlvbihhLGIsYyl7aWYoIShjfHxiJiZ0aGlzLnR5cGUhPWIpKXZhciBlPWEodGhpcyk7aWYoITEhPT1lKXtjPXRoaXMuZ2V0Q2hpbGRyZW4oKTtmb3IodmFyIGQ9MDtkPGMuY291bnQoKTtkKyspZT1jLmdldEl0ZW0oZCksZS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/ZS5mb3JFYWNoKGEsYik6YiYmZS50eXBlIT1ifHxhKGUpfX19KTt2YXIgaz17d2lkdGg6W1wiYm9yZGVyLWxlZnQtd2lkdGhcIixcImJvcmRlci1yaWdodC13aWR0aFwiLFwicGFkZGluZy1sZWZ0XCIsXCJwYWRkaW5nLXJpZ2h0XCJdLGhlaWdodDpbXCJib3JkZXItdG9wLXdpZHRoXCIsXCJib3JkZXItYm90dG9tLXdpZHRoXCIsXCJwYWRkaW5nLXRvcFwiLFwicGFkZGluZy1ib3R0b21cIl19O1xuQ0tFRElUT1IuZG9tLmVsZW1lbnQucHJvdG90eXBlLnNldFNpemU9ZnVuY3Rpb24oYSxiLGQpe1wibnVtYmVyXCI9PXR5cGVvZiBiJiYoIWR8fENLRURJVE9SLmVudi5pZSYmQ0tFRElUT1IuZW52LnF1aXJrc3x8KGItPWMuY2FsbCh0aGlzLGEpKSx0aGlzLnNldFN0eWxlKGEsYitcInB4XCIpKX07Q0tFRElUT1IuZG9tLmVsZW1lbnQucHJvdG90eXBlLmdldFNpemU9ZnVuY3Rpb24oYSxiKXt2YXIgZD1NYXRoLm1heCh0aGlzLiRbXCJvZmZzZXRcIitDS0VESVRPUi50b29scy5jYXBpdGFsaXplKGEpXSx0aGlzLiRbXCJjbGllbnRcIitDS0VESVRPUi50b29scy5jYXBpdGFsaXplKGEpXSl8fDA7YiYmKGQtPWMuY2FsbCh0aGlzLGEpKTtyZXR1cm4gZH19KSgpO0NLRURJVE9SLmRvbS5kb2N1bWVudEZyYWdtZW50PWZ1bmN0aW9uKGEpe2E9YXx8Q0tFRElUT1IuZG9jdW1lbnQ7dGhpcy4kPWEudHlwZT09Q0tFRElUT1IuTk9ERV9ET0NVTUVOVD9hLiQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOmF9O1xuQ0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmRvbS5kb2N1bWVudEZyYWdtZW50LnByb3RvdHlwZSxDS0VESVRPUi5kb20uZWxlbWVudC5wcm90b3R5cGUse3R5cGU6Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVCxpbnNlcnRBZnRlck5vZGU6ZnVuY3Rpb24oYSl7YT1hLiQ7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLiQsYS5uZXh0U2libGluZyl9LGdldEh0bWw6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJkaXZcIik7dGhpcy5jbG9uZSgxLDEpLmFwcGVuZFRvKGEpO3JldHVybiBhLmdldEh0bWwoKS5yZXBsYWNlKC9cXHMqZGF0YS1ja2UtZXhwYW5kbz1cIi4qP1wiL2csXCJcIil9fSwhMCx7YXBwZW5kOjEsYXBwZW5kQm9ndXM6MSxjbG9uZToxLGdldEZpcnN0OjEsZ2V0SHRtbDoxLGdldExhc3Q6MSxnZXRQYXJlbnQ6MSxnZXROZXh0OjEsZ2V0UHJldmlvdXM6MSxhcHBlbmRUbzoxLG1vdmVDaGlsZHJlbjoxLGluc2VydEJlZm9yZToxLFxuaW5zZXJ0QWZ0ZXJOb2RlOjEscmVwbGFjZToxLHRyaW06MSx0eXBlOjEsbHRyaW06MSxydHJpbToxLGdldERvY3VtZW50OjEsZ2V0Q2hpbGRDb3VudDoxLGdldENoaWxkOjEsZ2V0Q2hpbGRyZW46MX0pO1xuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIpe3ZhciBjPXRoaXMucmFuZ2U7aWYodGhpcy5fLmVuZClyZXR1cm4gbnVsbDtpZighdGhpcy5fLnN0YXJ0KXt0aGlzLl8uc3RhcnQ9MTtpZihjLmNvbGxhcHNlZClyZXR1cm4gdGhpcy5lbmQoKSxudWxsO2Mub3B0aW1pemUoKX12YXIgZSxkPWMuc3RhcnRDb250YWluZXI7ZT1jLmVuZENvbnRhaW5lcjt2YXIgZj1jLnN0YXJ0T2Zmc2V0LEE9Yy5lbmRPZmZzZXQsdixoPXRoaXMuZ3VhcmQscD10aGlzLnR5cGUsbj1hP1wiZ2V0UHJldmlvdXNTb3VyY2VOb2RlXCI6XCJnZXROZXh0U291cmNlTm9kZVwiO2lmKCFhJiYhdGhpcy5fLmd1YXJkTFRSKXt2YXIgeT1lLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVD9lOmUuZ2V0UGFyZW50KCksej1lLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVD9lLmdldENoaWxkKEEpOmUuZ2V0TmV4dCgpO3RoaXMuXy5ndWFyZExUUj1mdW5jdGlvbihhLGIpe3JldHVybighYnx8IXkuZXF1YWxzKGEpKSYmKCF6fHxcbiFhLmVxdWFscyh6KSkmJihhLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVHx8IWJ8fCFhLmVxdWFscyhjLnJvb3QpKX19aWYoYSYmIXRoaXMuXy5ndWFyZFJUTCl7dmFyIGc9ZC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/ZDpkLmdldFBhcmVudCgpLEU9ZC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/Zj9kLmdldENoaWxkKGYtMSk6bnVsbDpkLmdldFByZXZpb3VzKCk7dGhpcy5fLmd1YXJkUlRMPWZ1bmN0aW9uKGEsYil7cmV0dXJuKCFifHwhZy5lcXVhbHMoYSkpJiYoIUV8fCFhLmVxdWFscyhFKSkmJihhLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVHx8IWJ8fCFhLmVxdWFscyhjLnJvb3QpKX19dmFyIGs9YT90aGlzLl8uZ3VhcmRSVEw6dGhpcy5fLmd1YXJkTFRSO3Y9aD9mdW5jdGlvbihhLGIpe3JldHVybiExPT09ayhhLGIpPyExOmgoYSxiKX06azt0aGlzLmN1cnJlbnQ/ZT10aGlzLmN1cnJlbnRbbl0oITEscCx2KTooYT9lLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmXG4oZT0wPEE/ZS5nZXRDaGlsZChBLTEpOiExPT09dihlLCEwKT9udWxsOmUuZ2V0UHJldmlvdXNTb3VyY2VOb2RlKCEwLHAsdikpOihlPWQsZS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJigoZT1lLmdldENoaWxkKGYpKXx8KGU9ITE9PT12KGQsITApP251bGw6ZC5nZXROZXh0U291cmNlTm9kZSghMCxwLHYpKSkpLGUmJiExPT09dihlKSYmKGU9bnVsbCkpO2Zvcig7ZSYmIXRoaXMuXy5lbmQ7KXt0aGlzLmN1cnJlbnQ9ZTtpZighdGhpcy5ldmFsdWF0b3J8fCExIT09dGhpcy5ldmFsdWF0b3IoZSkpe2lmKCFiKXJldHVybiBlfWVsc2UgaWYoYiYmdGhpcy5ldmFsdWF0b3IpcmV0dXJuITE7ZT1lW25dKCExLHAsdil9dGhpcy5lbmQoKTtyZXR1cm4gdGhpcy5jdXJyZW50PW51bGx9ZnVuY3Rpb24gZChiKXtmb3IodmFyIGMsZT1udWxsO2M9YS5jYWxsKHRoaXMsYik7KWU9YztyZXR1cm4gZX1DS0VESVRPUi5kb20ud2Fsa2VyPUNLRURJVE9SLnRvb2xzLmNyZWF0ZUNsYXNzKHskOmZ1bmN0aW9uKGEpe3RoaXMucmFuZ2U9XG5hO3RoaXMuXz17fX0scHJvdG86e2VuZDpmdW5jdGlvbigpe3RoaXMuXy5lbmQ9MX0sbmV4dDpmdW5jdGlvbigpe3JldHVybiBhLmNhbGwodGhpcyl9LHByZXZpb3VzOmZ1bmN0aW9uKCl7cmV0dXJuIGEuY2FsbCh0aGlzLDEpfSxjaGVja0ZvcndhcmQ6ZnVuY3Rpb24oKXtyZXR1cm4hMSE9PWEuY2FsbCh0aGlzLDAsMSl9LGNoZWNrQmFja3dhcmQ6ZnVuY3Rpb24oKXtyZXR1cm4hMSE9PWEuY2FsbCh0aGlzLDEsMSl9LGxhc3RGb3J3YXJkOmZ1bmN0aW9uKCl7cmV0dXJuIGQuY2FsbCh0aGlzKX0sbGFzdEJhY2t3YXJkOmZ1bmN0aW9uKCl7cmV0dXJuIGQuY2FsbCh0aGlzLDEpfSxyZXNldDpmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmN1cnJlbnQ7dGhpcy5fPXt9fX19KTt2YXIgYj17YmxvY2s6MSxcImxpc3QtaXRlbVwiOjEsdGFibGU6MSxcInRhYmxlLXJvdy1ncm91cFwiOjEsXCJ0YWJsZS1oZWFkZXItZ3JvdXBcIjoxLFwidGFibGUtZm9vdGVyLWdyb3VwXCI6MSxcInRhYmxlLXJvd1wiOjEsXCJ0YWJsZS1jb2x1bW4tZ3JvdXBcIjoxLFxuXCJ0YWJsZS1jb2x1bW5cIjoxLFwidGFibGUtY2VsbFwiOjEsXCJ0YWJsZS1jYXB0aW9uXCI6MX0sYz17YWJzb2x1dGU6MSxmaXhlZDoxfTtDS0VESVRPUi5kb20uZWxlbWVudC5wcm90b3R5cGUuaXNCbG9ja0JvdW5kYXJ5PWZ1bmN0aW9uKGEpe3JldHVyblwibm9uZVwiIT10aGlzLmdldENvbXB1dGVkU3R5bGUoXCJmbG9hdFwiKXx8dGhpcy5nZXRDb21wdXRlZFN0eWxlKFwicG9zaXRpb25cIilpbiBjfHwhYlt0aGlzLmdldENvbXB1dGVkU3R5bGUoXCJkaXNwbGF5XCIpXT8hISh0aGlzLmlzKENLRURJVE9SLmR0ZC4kYmxvY2spfHxhJiZ0aGlzLmlzKGEpKTohMH07Q0tFRElUT1IuZG9tLndhbGtlci5ibG9ja0JvdW5kYXJ5PWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4hKGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZiLmlzQmxvY2tCb3VuZGFyeShhKSl9fTtDS0VESVRPUi5kb20ud2Fsa2VyLmxpc3RJdGVtQm91bmRhcnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ibG9ja0JvdW5kYXJ5KHticjoxfSl9O1xuQ0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyaz1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIGEmJmEuZ2V0TmFtZSYmXCJzcGFuXCI9PWEuZ2V0TmFtZSgpJiZhLmRhdGEoXCJja2UtYm9va21hcmtcIil9cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBkLGY7ZD1lJiZlLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGY9ZS5nZXRQYXJlbnQoKSkmJmMoZik7ZD1hP2Q6ZHx8YyhlKTtyZXR1cm4hIShiXmQpfX07Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcz1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM7YiYmYi50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihjPSFDS0VESVRPUi50b29scy50cmltKGIuZ2V0VGV4dCgpKXx8Q0tFRElUT1IuZW52LndlYmtpdCYmYi5nZXRUZXh0KCk9PUNLRURJVE9SLmRvbS5zZWxlY3Rpb24uRklMTElOR19DSEFSX1NFUVVFTkNFKTtyZXR1cm4hIShhXmMpfX07Q0tFRElUT1IuZG9tLndhbGtlci5pbnZpc2libGU9XG5mdW5jdGlvbihhKXt2YXIgYj1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCksYz1DS0VESVRPUi5lbnYud2Via2l0PzE6MDtyZXR1cm4gZnVuY3Rpb24oZSl7YihlKT9lPTE6KGUudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYoZT1lLmdldFBhcmVudCgpKSxlPWUuJC5vZmZzZXRXaWR0aDw9Yyk7cmV0dXJuISEoYV5lKX19O0NLRURJVE9SLmRvbS53YWxrZXIubm9kZVR5cGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7cmV0dXJuISEoYl5jLnR5cGU9PWEpfX07Q0tFRElUT1IuZG9tLndhbGtlci5ib2d1cz1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiFnKGEpJiYhayhhKX1yZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGU9Q0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXI/Yy5pcyYmYy5pcyhcImJyXCIpOmMuZ2V0VGV4dCYmZi50ZXN0KGMuZ2V0VGV4dCgpKTtlJiYoZT1jLmdldFBhcmVudCgpLGM9Yy5nZXROZXh0KGIpLGU9ZS5pc0Jsb2NrQm91bmRhcnkoKSYmXG4oIWN8fGMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZjLmlzQmxvY2tCb3VuZGFyeSgpKSk7cmV0dXJuISEoYV5lKX19O0NLRURJVE9SLmRvbS53YWxrZXIudGVtcD1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7Yi50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihiPWIuZ2V0UGFyZW50KCkpO2I9YiYmYi5oYXNBdHRyaWJ1dGUoXCJkYXRhLWNrZS10ZW1wXCIpO3JldHVybiEhKGFeYil9fTt2YXIgZj0vXltcXHRcXHJcXG4gXSooPzombmJzcDt8XFx4YTApJC8sZz1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCksaz1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKCksbD1DS0VESVRPUi5kb20ud2Fsa2VyLnRlbXAoKSxtPWZ1bmN0aW9uKGEpe3JldHVybiBrKGEpfHxnKGEpfHxhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYS5pcyhDS0VESVRPUi5kdGQuJGlubGluZSkmJiFhLmlzKENLRURJVE9SLmR0ZC4kZW1wdHkpfTtDS0VESVRPUi5kb20ud2Fsa2VyLmlnbm9yZWQ9XG5mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7Yj1nKGIpfHxrKGIpfHxsKGIpO3JldHVybiEhKGFeYil9fTt2YXIgdT1DS0VESVRPUi5kb20ud2Fsa2VyLmlnbm9yZWQoKTtDS0VESVRPUi5kb20ud2Fsa2VyLmVtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtmb3IodmFyIGM9MCxlPWIuZ2V0Q2hpbGRDb3VudCgpO2M8ZTsrK2MpaWYoIXUoYi5nZXRDaGlsZChjKSkpcmV0dXJuISFhO3JldHVybiFhfX07dmFyIGU9Q0tFRElUT1IuZG9tLndhbGtlci5lbXB0eSgpLEE9Q0tFRElUT1IuZG9tLndhbGtlci52YWxpZEVtcHR5QmxvY2tDb250YWluZXJzPUNLRURJVE9SLnRvb2xzLmV4dGVuZChmdW5jdGlvbihhKXt2YXIgYj17fSxjO2ZvcihjIGluIGEpQ0tFRElUT1IuZHRkW2NdW1wiI1wiXSYmKGJbY109MSk7cmV0dXJuIGJ9KENLRURJVE9SLmR0ZC4kYmxvY2spLHtjYXB0aW9uOjEsdGQ6MSx0aDoxfSk7Q0tFRElUT1IuZG9tLndhbGtlci5lZGl0YWJsZT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7Yj1cbnUoYik/ITE6Yi50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFR8fGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoYi5pcyhDS0VESVRPUi5kdGQuJGlubGluZSl8fGIuaXMoXCJoclwiKXx8XCJmYWxzZVwiPT1iLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKXx8IUNLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyJiZiLmlzKEEpJiZlKGIpKT8hMDohMTtyZXR1cm4hIShhXmIpfX07Q0tFRElUT1IuZG9tLmVsZW1lbnQucHJvdG90eXBlLmdldEJvZ3VzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztkbyBhPWEuZ2V0UHJldmlvdXNTb3VyY2VOb2RlKCk7d2hpbGUobShhKSk7cmV0dXJuIGEmJihDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlcj9hLmlzJiZhLmlzKFwiYnJcIik6YS5nZXRUZXh0JiZmLnRlc3QoYS5nZXRUZXh0KCkpKT9hOiExfX0pKCk7XG5DS0VESVRPUi5kb20ucmFuZ2U9ZnVuY3Rpb24oYSl7dGhpcy5lbmRPZmZzZXQ9dGhpcy5lbmRDb250YWluZXI9dGhpcy5zdGFydE9mZnNldD10aGlzLnN0YXJ0Q29udGFpbmVyPW51bGw7dGhpcy5jb2xsYXBzZWQ9ITA7dmFyIGQ9YSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5kb2N1bWVudDt0aGlzLmRvY3VtZW50PWQ/YTphLmdldERvY3VtZW50KCk7dGhpcy5yb290PWQ/YS5nZXRCb2R5KCk6YX07XG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe2EuY29sbGFwc2VkPWEuc3RhcnRDb250YWluZXImJmEuZW5kQ29udGFpbmVyJiZhLnN0YXJ0Q29udGFpbmVyLmVxdWFscyhhLmVuZENvbnRhaW5lcikmJmEuc3RhcnRPZmZzZXQ9PWEuZW5kT2Zmc2V0fWZ1bmN0aW9uIGQoYSxiLGMsZCxmKXtmdW5jdGlvbiBxKGEsYixjLGUpe3ZhciBkPWM/YS5nZXRQcmV2aW91cygpOmEuZ2V0TmV4dCgpO2lmKGUmJmwpcmV0dXJuIGQ7aHx8ZT9iLmFwcGVuZChhLmNsb25lKCEwLGYpLGMpOihhLnJlbW92ZSgpLHYmJmIuYXBwZW5kKGEpKTtyZXR1cm4gZH1mdW5jdGlvbiBnKCl7dmFyIGEsYixjLGU9TWF0aC5taW4oTi5sZW5ndGgsQi5sZW5ndGgpO2ZvcihhPTA7YTxlO2ErKylpZihiPU5bYV0sYz1CW2FdLCFiLmVxdWFscyhjKSlyZXR1cm4gYTtyZXR1cm4gYS0xfWZ1bmN0aW9uIGsoKXt2YXIgYj1JLTEsYz1DJiZ1JiYhcC5lcXVhbHMobik7YjxGLTF8fGI8Sy0xfHxjPyhjP2EubW92ZVRvUG9zaXRpb24obixcbkNLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCk6Sz09YisxJiZFP2EubW92ZVRvUG9zaXRpb24oQltiXSxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTphLm1vdmVUb1Bvc2l0aW9uKEJbYisxXSxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLGQmJihiPU5bYisxXSkmJmIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoYz1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbCgnXFx4M2NzcGFuIGRhdGEtY2tlLWJvb2ttYXJrXFx4M2RcIjFcIiBzdHlsZVxceDNkXCJkaXNwbGF5Om5vbmVcIlxceDNlXFx4MjZuYnNwO1xceDNjL3NwYW5cXHgzZScsYS5kb2N1bWVudCksYy5pbnNlcnRBZnRlcihiKSxiLm1lcmdlU2libGluZ3MoITEpLGEubW92ZVRvQm9va21hcmsoe3N0YXJ0Tm9kZTpjfSkpKTphLmNvbGxhcHNlKCEwKX1hLm9wdGltaXplQm9va21hcmsoKTt2YXIgbD0wPT09Yix2PTE9PWIsaD0yPT1iO2I9aHx8djt2YXIgcD1hLnN0YXJ0Q29udGFpbmVyLG49YS5lbmRDb250YWluZXIsXG55PWEuc3RhcnRPZmZzZXQsej1hLmVuZE9mZnNldCxKLEUsQyx1LG0sTztpZihoJiZuLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmcC5lcXVhbHMobikpcD1hLmRvY3VtZW50LmNyZWF0ZVRleHQocC5zdWJzdHJpbmcoeSx6KSksYy5hcHBlbmQocCk7ZWxzZXtuLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVD9oP089ITA6bj1uLnNwbGl0KHopOjA8bi5nZXRDaGlsZENvdW50KCk/ej49bi5nZXRDaGlsZENvdW50KCk/KG49bi5nZXRDaGlsZCh6LTEpLEU9ITApOm49bi5nZXRDaGlsZCh6KTp1PUU9ITA7cC50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQ/aD9tPSEwOnAuc3BsaXQoeSk6MDxwLmdldENoaWxkQ291bnQoKT8wPT09eT8ocD1wLmdldENoaWxkKHkpLEo9ITApOnA9cC5nZXRDaGlsZCh5LTEpOkM9Sj0hMDtmb3IodmFyIE49cC5nZXRQYXJlbnRzKCksQj1uLmdldFBhcmVudHMoKSxJPWcoKSxGPU4ubGVuZ3RoLTEsSz1CLmxlbmd0aC0xLEc9YyxMLFosVSxmYT0tMSxRPUk7UTw9RjtRKyspe1o9XG5OW1FdO1U9Wi5nZXROZXh0KCk7Zm9yKFEhPUZ8fFouZXF1YWxzKEJbUV0pJiZGPEs/YiYmKEw9Ry5hcHBlbmQoWi5jbG9uZSgwLGYpKSk6Sj9xKFosRywhMSxDKTptJiZHLmFwcGVuZChhLmRvY3VtZW50LmNyZWF0ZVRleHQoWi5zdWJzdHJpbmcoeSkpKTtVOyl7aWYoVS5lcXVhbHMoQltRXSkpe2ZhPVE7YnJlYWt9VT1xKFUsRyl9Rz1MfUc9Yztmb3IoUT1JO1E8PUs7USsrKWlmKGM9QltRXSxVPWMuZ2V0UHJldmlvdXMoKSxjLmVxdWFscyhOW1FdKSliJiYoRz1HLmdldENoaWxkKDApKTtlbHNle1EhPUt8fGMuZXF1YWxzKE5bUV0pJiZLPEY/YiYmKEw9Ry5hcHBlbmQoYy5jbG9uZSgwLGYpKSk6RT9xKGMsRywhMSx1KTpPJiZHLmFwcGVuZChhLmRvY3VtZW50LmNyZWF0ZVRleHQoYy5zdWJzdHJpbmcoMCx6KSkpO2lmKFE+ZmEpZm9yKDtVOylVPXEoVSxHLCEwKTtHPUx9aHx8aygpfX1mdW5jdGlvbiBiKCl7dmFyIGE9ITEsYj1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCksXG5jPUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoITApLGQ9Q0tFRElUT1IuZG9tLndhbGtlci5ib2d1cygpO3JldHVybiBmdW5jdGlvbihmKXtyZXR1cm4gYyhmKXx8YihmKT8hMDpkKGYpJiYhYT9hPSEwOmYudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYoZi5oYXNBc2NlbmRhbnQoXCJwcmVcIil8fENLRURJVE9SLnRvb2xzLnRyaW0oZi5nZXRUZXh0KCkpLmxlbmd0aCl8fGYudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYhZi5pcyhnKT8hMTohMH19ZnVuY3Rpb24gYyhhKXt2YXIgYj1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCksYz1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKDEpO3JldHVybiBmdW5jdGlvbihkKXtyZXR1cm4gYyhkKXx8YihkKT8hMDohYSYmayhkKXx8ZC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmQuaXMoQ0tFRElUT1IuZHRkLiRyZW1vdmVFbXB0eSl9fWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI7cmV0dXJuIHRoaXNbYT9cblwiZ2V0UHJldmlvdXNOb2RlXCI6XCJnZXROZXh0Tm9kZVwiXShmdW5jdGlvbihhKXshYiYmdShhKSYmKGI9YSk7cmV0dXJuIG0oYSkmJiEoayhhKSYmYS5lcXVhbHMoYikpfSl9fXZhciBnPXthYmJyOjEsYWNyb255bToxLGI6MSxiZG86MSxiaWc6MSxjaXRlOjEsY29kZToxLGRlbDoxLGRmbjoxLGVtOjEsZm9udDoxLGk6MSxpbnM6MSxsYWJlbDoxLGtiZDoxLHE6MSxzYW1wOjEsc21hbGw6MSxzcGFuOjEsc3RyaWtlOjEsc3Ryb25nOjEsc3ViOjEsc3VwOjEsdHQ6MSx1OjEsXCJ2YXJcIjoxfSxrPUNLRURJVE9SLmRvbS53YWxrZXIuYm9ndXMoKSxsPS9eW1xcdFxcclxcbiBdKig/OiZuYnNwO3xcXHhhMCkkLyxtPUNLRURJVE9SLmRvbS53YWxrZXIuZWRpdGFibGUoKSx1PUNLRURJVE9SLmRvbS53YWxrZXIuaWdub3JlZCghMCk7Q0tFRElUT1IuZG9tLnJhbmdlLnByb3RvdHlwZT17Y2xvbmU6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKHRoaXMucm9vdCk7YS5fc2V0U3RhcnRDb250YWluZXIodGhpcy5zdGFydENvbnRhaW5lcik7XG5hLnN0YXJ0T2Zmc2V0PXRoaXMuc3RhcnRPZmZzZXQ7YS5fc2V0RW5kQ29udGFpbmVyKHRoaXMuZW5kQ29udGFpbmVyKTthLmVuZE9mZnNldD10aGlzLmVuZE9mZnNldDthLmNvbGxhcHNlZD10aGlzLmNvbGxhcHNlZDtyZXR1cm4gYX0sY29sbGFwc2U6ZnVuY3Rpb24oYSl7YT8odGhpcy5fc2V0RW5kQ29udGFpbmVyKHRoaXMuc3RhcnRDb250YWluZXIpLHRoaXMuZW5kT2Zmc2V0PXRoaXMuc3RhcnRPZmZzZXQpOih0aGlzLl9zZXRTdGFydENvbnRhaW5lcih0aGlzLmVuZENvbnRhaW5lciksdGhpcy5zdGFydE9mZnNldD10aGlzLmVuZE9mZnNldCk7dGhpcy5jb2xsYXBzZWQ9ITB9LGNsb25lQ29udGVudHM6ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IENLRURJVE9SLmRvbS5kb2N1bWVudEZyYWdtZW50KHRoaXMuZG9jdW1lbnQpO3RoaXMuY29sbGFwc2VkfHxkKHRoaXMsMixiLCExLFwidW5kZWZpbmVkXCI9PXR5cGVvZiBhPyEwOmEpO3JldHVybiBifSxkZWxldGVDb250ZW50czpmdW5jdGlvbihhKXt0aGlzLmNvbGxhcHNlZHx8XG5kKHRoaXMsMCxudWxsLGEpfSxleHRyYWN0Q29udGVudHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgQ0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQodGhpcy5kb2N1bWVudCk7dGhpcy5jb2xsYXBzZWR8fGQodGhpcywxLGMsYSxcInVuZGVmaW5lZFwiPT10eXBlb2YgYj8hMDpiKTtyZXR1cm4gY30sY3JlYXRlQm9va21hcms6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGYscT10aGlzLmNvbGxhcHNlZDtiPXRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7Yi5kYXRhKFwiY2tlLWJvb2ttYXJrXCIsMSk7Yi5zZXRTdHlsZShcImRpc3BsYXlcIixcIm5vbmVcIik7Yi5zZXRIdG1sKFwiXFx4MjZuYnNwO1wiKTthJiYoZD1cImNrZV9ibV9cIitDS0VESVRPUi50b29scy5nZXROZXh0TnVtYmVyKCksYi5zZXRBdHRyaWJ1dGUoXCJpZFwiLGQrKHE/XCJDXCI6XCJTXCIpKSk7cXx8KGM9Yi5jbG9uZSgpLGMuc2V0SHRtbChcIlxceDI2bmJzcDtcIiksYSYmYy5zZXRBdHRyaWJ1dGUoXCJpZFwiLGQrXCJFXCIpLGY9dGhpcy5jbG9uZSgpLFxuZi5jb2xsYXBzZSgpLGYuaW5zZXJ0Tm9kZShjKSk7Zj10aGlzLmNsb25lKCk7Zi5jb2xsYXBzZSghMCk7Zi5pbnNlcnROb2RlKGIpO2M/KHRoaXMuc2V0U3RhcnRBZnRlcihiKSx0aGlzLnNldEVuZEJlZm9yZShjKSk6dGhpcy5tb3ZlVG9Qb3NpdGlvbihiLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCk7cmV0dXJue3N0YXJ0Tm9kZTphP2QrKHE/XCJDXCI6XCJTXCIpOmIsZW5kTm9kZTphP2QrXCJFXCI6YyxzZXJpYWxpemFibGU6YSxjb2xsYXBzZWQ6cX19LGNyZWF0ZUJvb2ttYXJrMjpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7dmFyIGU9Yi5jb250YWluZXIsZD1iLm9mZnNldCxmO2Y9ZTt2YXIgZz1kO2Y9Zi50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlR8fDA9PT1nfHxnPT1mLmdldENoaWxkQ291bnQoKT8wOmYuZ2V0Q2hpbGQoZy0xKS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJmYuZ2V0Q2hpbGQoZykudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUO2YmJihlPWUuZ2V0Q2hpbGQoZC1cbjEpLGQ9ZS5nZXRMZW5ndGgoKSk7aWYoZS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJjA8ZCl7YTp7Zm9yKGY9ZTtkLS07KWlmKGc9Zi5nZXRDaGlsZChkKS5nZXRJbmRleCghMCksMDw9Zyl7ZD1nO2JyZWFrIGF9ZD0tMX1kKz0xfWlmKGUudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUKXtmPWU7Zm9yKGc9MDsoZj1mLmdldFByZXZpb3VzKCkpJiZmLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVDspZys9Zi5nZXRUZXh0KCkucmVwbGFjZShDS0VESVRPUi5kb20uc2VsZWN0aW9uLkZJTExJTkdfQ0hBUl9TRVFVRU5DRSxcIlwiKS5sZW5ndGg7Zj1nO2UuZ2V0VGV4dCgpP2QrPWY6KGc9ZS5nZXRQcmV2aW91cyhjKSxmPyhkPWYsZT1nP2cuZ2V0TmV4dCgpOmUuZ2V0UGFyZW50KCkuZ2V0Rmlyc3QoKSk6KGU9ZS5nZXRQYXJlbnQoKSxkPWc/Zy5nZXRJbmRleCghMCkrMTowKSl9Yi5jb250YWluZXI9ZTtiLm9mZnNldD1kfWZ1bmN0aW9uIGIoYSxjKXt2YXIgZT1jLmdldEN1c3RvbURhdGEoXCJja2UtZmlsbGluZ0NoYXJcIik7XG5pZihlKXt2YXIgZD1hLmNvbnRhaW5lcjtlLmVxdWFscyhkKSYmKGEub2Zmc2V0LT1DS0VESVRPUi5kb20uc2VsZWN0aW9uLkZJTExJTkdfQ0hBUl9TRVFVRU5DRS5sZW5ndGgsMD49YS5vZmZzZXQmJihhLm9mZnNldD1kLmdldEluZGV4KCksYS5jb250YWluZXI9ZC5nZXRQYXJlbnQoKSkpfX12YXIgYz1DS0VESVRPUi5kb20ud2Fsa2VyLm5vZGVUeXBlKENLRURJVE9SLk5PREVfVEVYVCwhMCk7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuY29sbGFwc2VkLGY9e2NvbnRhaW5lcjp0aGlzLnN0YXJ0Q29udGFpbmVyLG9mZnNldDp0aGlzLnN0YXJ0T2Zmc2V0fSxnPXtjb250YWluZXI6dGhpcy5lbmRDb250YWluZXIsb2Zmc2V0OnRoaXMuZW5kT2Zmc2V0fTtjJiYoYShmKSxiKGYsdGhpcy5yb290KSxkfHwoYShnKSxiKGcsdGhpcy5yb290KSkpO3JldHVybntzdGFydDpmLmNvbnRhaW5lci5nZXRBZGRyZXNzKGMpLGVuZDpkP251bGw6Zy5jb250YWluZXIuZ2V0QWRkcmVzcyhjKSxcbnN0YXJ0T2Zmc2V0OmYub2Zmc2V0LGVuZE9mZnNldDpnLm9mZnNldCxub3JtYWxpemVkOmMsY29sbGFwc2VkOmQsaXMyOiEwfX19KCksbW92ZVRvQm9va21hcms6ZnVuY3Rpb24oYSl7aWYoYS5pczIpe3ZhciBiPXRoaXMuZG9jdW1lbnQuZ2V0QnlBZGRyZXNzKGEuc3RhcnQsYS5ub3JtYWxpemVkKSxjPWEuc3RhcnRPZmZzZXQsZD1hLmVuZCYmdGhpcy5kb2N1bWVudC5nZXRCeUFkZHJlc3MoYS5lbmQsYS5ub3JtYWxpemVkKTthPWEuZW5kT2Zmc2V0O3RoaXMuc2V0U3RhcnQoYixjKTtkP3RoaXMuc2V0RW5kKGQsYSk6dGhpcy5jb2xsYXBzZSghMCl9ZWxzZSBiPShjPWEuc2VyaWFsaXphYmxlKT90aGlzLmRvY3VtZW50LmdldEJ5SWQoYS5zdGFydE5vZGUpOmEuc3RhcnROb2RlLGE9Yz90aGlzLmRvY3VtZW50LmdldEJ5SWQoYS5lbmROb2RlKTphLmVuZE5vZGUsdGhpcy5zZXRTdGFydEJlZm9yZShiKSxiLnJlbW92ZSgpLGE/KHRoaXMuc2V0RW5kQmVmb3JlKGEpLGEucmVtb3ZlKCkpOlxudGhpcy5jb2xsYXBzZSghMCl9LGdldEJvdW5kYXJ5Tm9kZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnN0YXJ0Q29udGFpbmVyLGI9dGhpcy5lbmRDb250YWluZXIsYz10aGlzLnN0YXJ0T2Zmc2V0LGQ9dGhpcy5lbmRPZmZzZXQsZjtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVClpZihmPWEuZ2V0Q2hpbGRDb3VudCgpLGY+YylhPWEuZ2V0Q2hpbGQoYyk7ZWxzZSBpZigxPmYpYT1hLmdldFByZXZpb3VzU291cmNlTm9kZSgpO2Vsc2V7Zm9yKGE9YS4kO2EubGFzdENoaWxkOylhPWEubGFzdENoaWxkO2E9bmV3IENLRURJVE9SLmRvbS5ub2RlKGEpO2E9YS5nZXROZXh0U291cmNlTm9kZSgpfHxhfWlmKGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UKWlmKGY9Yi5nZXRDaGlsZENvdW50KCksZj5kKWI9Yi5nZXRDaGlsZChkKS5nZXRQcmV2aW91c1NvdXJjZU5vZGUoITApO2Vsc2UgaWYoMT5mKWI9Yi5nZXRQcmV2aW91c1NvdXJjZU5vZGUoKTtlbHNle2ZvcihiPWIuJDtiLmxhc3RDaGlsZDspYj1cbmIubGFzdENoaWxkO2I9bmV3IENLRURJVE9SLmRvbS5ub2RlKGIpfWEuZ2V0UG9zaXRpb24oYikmQ0tFRElUT1IuUE9TSVRJT05fRk9MTE9XSU5HJiYoYT1iKTtyZXR1cm57c3RhcnROb2RlOmEsZW5kTm9kZTpifX0sZ2V0Q29tbW9uQW5jZXN0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnN0YXJ0Q29udGFpbmVyLGQ9dGhpcy5lbmRDb250YWluZXIsYz1jLmVxdWFscyhkKT9hJiZjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmdGhpcy5zdGFydE9mZnNldD09dGhpcy5lbmRPZmZzZXQtMT9jLmdldENoaWxkKHRoaXMuc3RhcnRPZmZzZXQpOmM6Yy5nZXRDb21tb25BbmNlc3RvcihkKTtyZXR1cm4gYiYmIWMuaXM/Yy5nZXRQYXJlbnQoKTpjfSxvcHRpbWl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc3RhcnRDb250YWluZXIsYj10aGlzLnN0YXJ0T2Zmc2V0O2EudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoYj9iPj1hLmdldExlbmd0aCgpJiZ0aGlzLnNldFN0YXJ0QWZ0ZXIoYSk6XG50aGlzLnNldFN0YXJ0QmVmb3JlKGEpKTthPXRoaXMuZW5kQ29udGFpbmVyO2I9dGhpcy5lbmRPZmZzZXQ7YS50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihiP2I+PWEuZ2V0TGVuZ3RoKCkmJnRoaXMuc2V0RW5kQWZ0ZXIoYSk6dGhpcy5zZXRFbmRCZWZvcmUoYSkpfSxvcHRpbWl6ZUJvb2ttYXJrOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zdGFydENvbnRhaW5lcixiPXRoaXMuZW5kQ29udGFpbmVyO2EuaXMmJmEuaXMoXCJzcGFuXCIpJiZhLmRhdGEoXCJja2UtYm9va21hcmtcIikmJnRoaXMuc2V0U3RhcnRBdChhLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCk7YiYmYi5pcyYmYi5pcyhcInNwYW5cIikmJmIuZGF0YShcImNrZS1ib29rbWFya1wiKSYmdGhpcy5zZXRFbmRBdChiLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCl9LHRyaW06ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnN0YXJ0Q29udGFpbmVyLGQ9dGhpcy5zdGFydE9mZnNldCxmPXRoaXMuY29sbGFwc2VkO2lmKCghYXx8XG5mKSYmYyYmYy50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQpe2lmKGQpaWYoZD49Yy5nZXRMZW5ndGgoKSlkPWMuZ2V0SW5kZXgoKSsxLGM9Yy5nZXRQYXJlbnQoKTtlbHNle3ZhciBxPWMuc3BsaXQoZCksZD1jLmdldEluZGV4KCkrMSxjPWMuZ2V0UGFyZW50KCk7dGhpcy5zdGFydENvbnRhaW5lci5lcXVhbHModGhpcy5lbmRDb250YWluZXIpP3RoaXMuc2V0RW5kKHEsdGhpcy5lbmRPZmZzZXQtdGhpcy5zdGFydE9mZnNldCk6Yy5lcXVhbHModGhpcy5lbmRDb250YWluZXIpJiYodGhpcy5lbmRPZmZzZXQrPTEpfWVsc2UgZD1jLmdldEluZGV4KCksYz1jLmdldFBhcmVudCgpO3RoaXMuc2V0U3RhcnQoYyxkKTtpZihmKXt0aGlzLmNvbGxhcHNlKCEwKTtyZXR1cm59fWM9dGhpcy5lbmRDb250YWluZXI7ZD10aGlzLmVuZE9mZnNldDtifHxmfHwhY3x8Yy50eXBlIT1DS0VESVRPUi5OT0RFX1RFWFR8fChkPyhkPj1jLmdldExlbmd0aCgpfHxjLnNwbGl0KGQpLGQ9Yy5nZXRJbmRleCgpKzEpOlxuZD1jLmdldEluZGV4KCksYz1jLmdldFBhcmVudCgpLHRoaXMuc2V0RW5kKGMsZCkpfSxlbmxhcmdlOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYSYmYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpP251bGw6YX12YXIgZD1uZXcgUmVnRXhwKC9bXlxcc1xcdWZlZmZdLyk7c3dpdGNoKGEpe2Nhc2UgQ0tFRElUT1IuRU5MQVJHRV9JTkxJTkU6dmFyIGY9MTtjYXNlIENLRURJVE9SLkVOTEFSR0VfRUxFTUVOVDp2YXIgcT1mdW5jdGlvbihhLGIpe3ZhciBjPW5ldyBDS0VESVRPUi5kb20ucmFuZ2Uoayk7Yy5zZXRTdGFydChhLGIpO2Muc2V0RW5kQXQoayxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTt2YXIgYz1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihjKSxlO2ZvcihjLmd1YXJkPWZ1bmN0aW9uKGEpe3JldHVybiEoYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuaXNCbG9ja0JvdW5kYXJ5KCkpfTtlPVxuYy5uZXh0KCk7KXtpZihlLnR5cGUhPUNLRURJVE9SLk5PREVfVEVYVClyZXR1cm4hMTtKPWUhPWE/ZS5nZXRUZXh0KCk6ZS5zdWJzdHJpbmcoYik7aWYoZC50ZXN0KEopKXJldHVybiExfXJldHVybiEwfTtpZih0aGlzLmNvbGxhcHNlZClicmVhazt2YXIgZz10aGlzLmdldENvbW1vbkFuY2VzdG9yKCksaz10aGlzLnJvb3QsbCx2LGgscCxuLHk9ITEseixKO3o9dGhpcy5zdGFydENvbnRhaW5lcjt2YXIgRT10aGlzLnN0YXJ0T2Zmc2V0O3oudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUPyhFJiYoej0hQ0tFRElUT1IudG9vbHMudHJpbSh6LnN1YnN0cmluZygwLEUpKS5sZW5ndGgmJnoseT0hIXopLHomJigocD16LmdldFByZXZpb3VzKCkpfHwoaD16LmdldFBhcmVudCgpKSkpOihFJiYocD16LmdldENoaWxkKEUtMSl8fHouZ2V0TGFzdCgpKSxwfHwoaD16KSk7Zm9yKGg9YyhoKTtofHxwOyl7aWYoaCYmIXApeyFuJiZoLmVxdWFscyhnKSYmKG49ITApO2lmKGY/aC5pc0Jsb2NrQm91bmRhcnkoKTpcbiFrLmNvbnRhaW5zKGgpKWJyZWFrO3kmJlwiaW5saW5lXCI9PWguZ2V0Q29tcHV0ZWRTdHlsZShcImRpc3BsYXlcIil8fCh5PSExLG4/bD1oOnRoaXMuc2V0U3RhcnRCZWZvcmUoaCkpO3A9aC5nZXRQcmV2aW91cygpfWZvcig7cDspaWYoej0hMSxwLnR5cGU9PUNLRURJVE9SLk5PREVfQ09NTUVOVClwPXAuZ2V0UHJldmlvdXMoKTtlbHNle2lmKHAudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUKUo9cC5nZXRUZXh0KCksZC50ZXN0KEopJiYocD1udWxsKSx6PS9bXFxzXFx1ZmVmZl0kLy50ZXN0KEopO2Vsc2UgaWYoKHAuJC5vZmZzZXRXaWR0aD4oQ0tFRElUT1IuZW52LndlYmtpdD8xOjApfHxiJiZwLmlzKFwiYnJcIikpJiYhcC5kYXRhKFwiY2tlLWJvb2ttYXJrXCIpKWlmKHkmJkNLRURJVE9SLmR0ZC4kcmVtb3ZlRW1wdHlbcC5nZXROYW1lKCldKXtKPXAuZ2V0VGV4dCgpO2lmKGQudGVzdChKKSlwPW51bGw7ZWxzZSBmb3IodmFyIEU9cC4kLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSxDPTAsdTt1PVxuRVtDKytdOylpZighQ0tFRElUT1IuZHRkLiRyZW1vdmVFbXB0eVt1Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKXtwPW51bGw7YnJlYWt9cCYmKHo9ISFKLmxlbmd0aCl9ZWxzZSBwPW51bGw7eiYmKHk/bj9sPWg6aCYmdGhpcy5zZXRTdGFydEJlZm9yZShoKTp5PSEwKTtpZihwKXt6PXAuZ2V0UHJldmlvdXMoKTtpZighaCYmIXope2g9cDtwPW51bGw7YnJlYWt9cD16fWVsc2UgaD1udWxsfWgmJihoPWMoaC5nZXRQYXJlbnQoKSkpfXo9dGhpcy5lbmRDb250YWluZXI7RT10aGlzLmVuZE9mZnNldDtoPXA9bnVsbDtuPXk9ITE7ei50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQ/Q0tFRElUT1IudG9vbHMudHJpbSh6LnN1YnN0cmluZyhFKSkubGVuZ3RoP3k9ITA6KHk9IXouZ2V0TGVuZ3RoKCksRT09ei5nZXRMZW5ndGgoKT8ocD16LmdldE5leHQoKSl8fChoPXouZ2V0UGFyZW50KCkpOnEoeixFKSYmKGg9ei5nZXRQYXJlbnQoKSkpOihwPXouZ2V0Q2hpbGQoRSkpfHwoaD16KTtmb3IoO2h8fFxucDspe2lmKGgmJiFwKXshbiYmaC5lcXVhbHMoZykmJihuPSEwKTtpZihmP2guaXNCbG9ja0JvdW5kYXJ5KCk6IWsuY29udGFpbnMoaCkpYnJlYWs7eSYmXCJpbmxpbmVcIj09aC5nZXRDb21wdXRlZFN0eWxlKFwiZGlzcGxheVwiKXx8KHk9ITEsbj92PWg6aCYmdGhpcy5zZXRFbmRBZnRlcihoKSk7cD1oLmdldE5leHQoKX1mb3IoO3A7KXt6PSExO2lmKHAudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUKUo9cC5nZXRUZXh0KCkscShwLDApfHwocD1udWxsKSx6PS9eW1xcc1xcdWZlZmZdLy50ZXN0KEopO2Vsc2UgaWYocC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpe2lmKCgwPHAuJC5vZmZzZXRXaWR0aHx8YiYmcC5pcyhcImJyXCIpKSYmIXAuZGF0YShcImNrZS1ib29rbWFya1wiKSlpZih5JiZDS0VESVRPUi5kdGQuJHJlbW92ZUVtcHR5W3AuZ2V0TmFtZSgpXSl7Sj1wLmdldFRleHQoKTtpZihkLnRlc3QoSikpcD1udWxsO2Vsc2UgZm9yKEU9cC4kLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSxDPVxuMDt1PUVbQysrXTspaWYoIUNLRURJVE9SLmR0ZC4kcmVtb3ZlRW1wdHlbdS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSl7cD1udWxsO2JyZWFrfXAmJih6PSEhSi5sZW5ndGgpfWVsc2UgcD1udWxsfWVsc2Ugej0xO3omJnkmJihuP3Y9aDp0aGlzLnNldEVuZEFmdGVyKGgpKTtpZihwKXt6PXAuZ2V0TmV4dCgpO2lmKCFoJiYheil7aD1wO3A9bnVsbDticmVha31wPXp9ZWxzZSBoPW51bGx9aCYmKGg9YyhoLmdldFBhcmVudCgpKSl9bCYmdiYmKGc9bC5jb250YWlucyh2KT92OmwsdGhpcy5zZXRTdGFydEJlZm9yZShnKSx0aGlzLnNldEVuZEFmdGVyKGcpKTticmVhaztjYXNlIENLRURJVE9SLkVOTEFSR0VfQkxPQ0tfQ09OVEVOVFM6Y2FzZSBDS0VESVRPUi5FTkxBUkdFX0xJU1RfSVRFTV9DT05URU5UUzpoPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UodGhpcy5yb290KTtrPXRoaXMucm9vdDtoLnNldFN0YXJ0QXQoayxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCk7aC5zZXRFbmQodGhpcy5zdGFydENvbnRhaW5lcixcbnRoaXMuc3RhcnRPZmZzZXQpO2g9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoaCk7dmFyIG0sTyxOPUNLRURJVE9SLmRvbS53YWxrZXIuYmxvY2tCb3VuZGFyeShhPT1DS0VESVRPUi5FTkxBUkdFX0xJU1RfSVRFTV9DT05URU5UUz97YnI6MX06bnVsbCksQj1udWxsLEk9ZnVuY3Rpb24oYSl7aWYoYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJlwiZmFsc2VcIj09YS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikpaWYoQil7aWYoQi5lcXVhbHMoYSkpe0I9bnVsbDtyZXR1cm59fWVsc2UgQj1hO2Vsc2UgaWYoQilyZXR1cm47dmFyIGI9TihhKTtifHwobT1hKTtyZXR1cm4gYn0sZj1mdW5jdGlvbihhKXt2YXIgYj1JKGEpOyFiJiZhLmlzJiZhLmlzKFwiYnJcIikmJihPPWEpO3JldHVybiBifTtoLmd1YXJkPUk7aD1oLmxhc3RCYWNrd2FyZCgpO209bXx8azt0aGlzLnNldFN0YXJ0QXQobSwhbS5pcyhcImJyXCIpJiYoIWgmJnRoaXMuY2hlY2tTdGFydE9mQmxvY2soKXx8aCYmbS5jb250YWlucyhoKSk/XG5DS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVDpDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpO2lmKGE9PUNLRURJVE9SLkVOTEFSR0VfTElTVF9JVEVNX0NPTlRFTlRTKXtoPXRoaXMuY2xvbmUoKTtoPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGgpO3ZhciBGPUNLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoKSxLPUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoKTtoLmV2YWx1YXRvcj1mdW5jdGlvbihhKXtyZXR1cm4hRihhKSYmIUsoYSl9O2lmKChoPWgucHJldmlvdXMoKSkmJmgudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZoLmlzKFwiYnJcIikpYnJlYWt9aD10aGlzLmNsb25lKCk7aC5jb2xsYXBzZSgpO2guc2V0RW5kQXQoayxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtoPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGgpO2guZ3VhcmQ9YT09Q0tFRElUT1IuRU5MQVJHRV9MSVNUX0lURU1fQ09OVEVOVFM/ZjpJO209Qj1PPW51bGw7aD1oLmxhc3RGb3J3YXJkKCk7XG5tPW18fGs7dGhpcy5zZXRFbmRBdChtLCFoJiZ0aGlzLmNoZWNrRW5kT2ZCbG9jaygpfHxoJiZtLmNvbnRhaW5zKGgpP0NLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQ6Q0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTtPJiZ0aGlzLnNldEVuZEFmdGVyKE8pfX0sc2hyaW5rOmZ1bmN0aW9uKGEsYixjKXtpZighdGhpcy5jb2xsYXBzZWQpe2E9YXx8Q0tFRElUT1IuU0hSSU5LX1RFWFQ7dmFyIGQ9dGhpcy5jbG9uZSgpLGY9dGhpcy5zdGFydENvbnRhaW5lcixxPXRoaXMuZW5kQ29udGFpbmVyLGc9dGhpcy5zdGFydE9mZnNldCxrPXRoaXMuZW5kT2Zmc2V0LGw9MSx2PTE7ZiYmZi50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihnP2c+PWYuZ2V0TGVuZ3RoKCk/ZC5zZXRTdGFydEFmdGVyKGYpOihkLnNldFN0YXJ0QmVmb3JlKGYpLGw9MCk6ZC5zZXRTdGFydEJlZm9yZShmKSk7cSYmcS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihrP2s+PXEuZ2V0TGVuZ3RoKCk/ZC5zZXRFbmRBZnRlcihxKTpcbihkLnNldEVuZEFmdGVyKHEpLHY9MCk6ZC5zZXRFbmRCZWZvcmUocSkpO3ZhciBkPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGQpLGg9Q0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyaygpO2QuZXZhbHVhdG9yPWZ1bmN0aW9uKGIpe3JldHVybiBiLnR5cGU9PShhPT1DS0VESVRPUi5TSFJJTktfRUxFTUVOVD9DS0VESVRPUi5OT0RFX0VMRU1FTlQ6Q0tFRElUT1IuTk9ERV9URVhUKX07dmFyIHA7ZC5ndWFyZD1mdW5jdGlvbihiLGQpe2lmKGgoYikpcmV0dXJuITA7aWYoYT09Q0tFRElUT1IuU0hSSU5LX0VMRU1FTlQmJmIudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUfHxkJiZiLmVxdWFscyhwKXx8ITE9PT1jJiZiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYi5pc0Jsb2NrQm91bmRhcnkoKXx8Yi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmIuaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKXJldHVybiExO2R8fGIudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHxcbihwPWIpO3JldHVybiEwfTtsJiYoZj1kW2E9PUNLRURJVE9SLlNIUklOS19FTEVNRU5UP1wibGFzdEZvcndhcmRcIjpcIm5leHRcIl0oKSkmJnRoaXMuc2V0U3RhcnRBdChmLGI/Q0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQ6Q0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTt2JiYoZC5yZXNldCgpLChkPWRbYT09Q0tFRElUT1IuU0hSSU5LX0VMRU1FTlQ/XCJsYXN0QmFja3dhcmRcIjpcInByZXZpb3VzXCJdKCkpJiZ0aGlzLnNldEVuZEF0KGQsYj9DS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EOkNLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCkpO3JldHVybiEoIWwmJiF2KX19LGluc2VydE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5vcHRpbWl6ZUJvb2ttYXJrKCk7dGhpcy50cmltKCExLCEwKTt2YXIgYj10aGlzLnN0YXJ0Q29udGFpbmVyLGM9Yi5nZXRDaGlsZCh0aGlzLnN0YXJ0T2Zmc2V0KTtjP2EuaW5zZXJ0QmVmb3JlKGMpOmIuYXBwZW5kKGEpO2EuZ2V0UGFyZW50KCkmJmEuZ2V0UGFyZW50KCkuZXF1YWxzKHRoaXMuZW5kQ29udGFpbmVyKSYmXG50aGlzLmVuZE9mZnNldCsrO3RoaXMuc2V0U3RhcnRCZWZvcmUoYSl9LG1vdmVUb1Bvc2l0aW9uOmZ1bmN0aW9uKGEsYil7dGhpcy5zZXRTdGFydEF0KGEsYik7dGhpcy5jb2xsYXBzZSghMCl9LG1vdmVUb1JhbmdlOmZ1bmN0aW9uKGEpe3RoaXMuc2V0U3RhcnQoYS5zdGFydENvbnRhaW5lcixhLnN0YXJ0T2Zmc2V0KTt0aGlzLnNldEVuZChhLmVuZENvbnRhaW5lcixhLmVuZE9mZnNldCl9LHNlbGVjdE5vZGVDb250ZW50czpmdW5jdGlvbihhKXt0aGlzLnNldFN0YXJ0KGEsMCk7dGhpcy5zZXRFbmQoYSxhLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVD9hLmdldExlbmd0aCgpOmEuZ2V0Q2hpbGRDb3VudCgpKX0sc2V0U3RhcnQ6ZnVuY3Rpb24oYixjKXtiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmQ0tFRElUT1IuZHRkLiRlbXB0eVtiLmdldE5hbWUoKV0mJihjPWIuZ2V0SW5kZXgoKSxiPWIuZ2V0UGFyZW50KCkpO3RoaXMuX3NldFN0YXJ0Q29udGFpbmVyKGIpO3RoaXMuc3RhcnRPZmZzZXQ9XG5jO3RoaXMuZW5kQ29udGFpbmVyfHwodGhpcy5fc2V0RW5kQ29udGFpbmVyKGIpLHRoaXMuZW5kT2Zmc2V0PWMpO2EodGhpcyl9LHNldEVuZDpmdW5jdGlvbihiLGMpe2IudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZDS0VESVRPUi5kdGQuJGVtcHR5W2IuZ2V0TmFtZSgpXSYmKGM9Yi5nZXRJbmRleCgpKzEsYj1iLmdldFBhcmVudCgpKTt0aGlzLl9zZXRFbmRDb250YWluZXIoYik7dGhpcy5lbmRPZmZzZXQ9Yzt0aGlzLnN0YXJ0Q29udGFpbmVyfHwodGhpcy5fc2V0U3RhcnRDb250YWluZXIoYiksdGhpcy5zdGFydE9mZnNldD1jKTthKHRoaXMpfSxzZXRTdGFydEFmdGVyOmZ1bmN0aW9uKGEpe3RoaXMuc2V0U3RhcnQoYS5nZXRQYXJlbnQoKSxhLmdldEluZGV4KCkrMSl9LHNldFN0YXJ0QmVmb3JlOmZ1bmN0aW9uKGEpe3RoaXMuc2V0U3RhcnQoYS5nZXRQYXJlbnQoKSxhLmdldEluZGV4KCkpfSxzZXRFbmRBZnRlcjpmdW5jdGlvbihhKXt0aGlzLnNldEVuZChhLmdldFBhcmVudCgpLFxuYS5nZXRJbmRleCgpKzEpfSxzZXRFbmRCZWZvcmU6ZnVuY3Rpb24oYSl7dGhpcy5zZXRFbmQoYS5nZXRQYXJlbnQoKSxhLmdldEluZGV4KCkpfSxzZXRTdGFydEF0OmZ1bmN0aW9uKGIsYyl7c3dpdGNoKGMpe2Nhc2UgQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQ6dGhpcy5zZXRTdGFydChiLDApO2JyZWFrO2Nhc2UgQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORDpiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVD90aGlzLnNldFN0YXJ0KGIsYi5nZXRMZW5ndGgoKSk6dGhpcy5zZXRTdGFydChiLGIuZ2V0Q2hpbGRDb3VudCgpKTticmVhaztjYXNlIENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVDp0aGlzLnNldFN0YXJ0QmVmb3JlKGIpO2JyZWFrO2Nhc2UgQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EOnRoaXMuc2V0U3RhcnRBZnRlcihiKX1hKHRoaXMpfSxzZXRFbmRBdDpmdW5jdGlvbihiLGMpe3N3aXRjaChjKXtjYXNlIENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUOnRoaXMuc2V0RW5kKGIsXG4wKTticmVhaztjYXNlIENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQ6Yi50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQ/dGhpcy5zZXRFbmQoYixiLmdldExlbmd0aCgpKTp0aGlzLnNldEVuZChiLGIuZ2V0Q2hpbGRDb3VudCgpKTticmVhaztjYXNlIENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVDp0aGlzLnNldEVuZEJlZm9yZShiKTticmVhaztjYXNlIENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORDp0aGlzLnNldEVuZEFmdGVyKGIpfWEodGhpcyl9LGZpeEJsb2NrOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVCb29rbWFyaygpLGQ9dGhpcy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KGIpO3RoaXMuY29sbGFwc2UoYSk7dGhpcy5lbmxhcmdlKENLRURJVE9SLkVOTEFSR0VfQkxPQ0tfQ09OVEVOVFMpO3RoaXMuZXh0cmFjdENvbnRlbnRzKCkuYXBwZW5kVG8oZCk7ZC50cmltKCk7dGhpcy5pbnNlcnROb2RlKGQpO3ZhciBmPWQuZ2V0Qm9ndXMoKTtmJiZmLnJlbW92ZSgpO1xuZC5hcHBlbmRCb2d1cygpO3RoaXMubW92ZVRvQm9va21hcmsoYyk7cmV0dXJuIGR9LHNwbGl0QmxvY2s6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKHRoaXMuc3RhcnRDb250YWluZXIsdGhpcy5yb290KSxkPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgodGhpcy5lbmRDb250YWluZXIsdGhpcy5yb290KSxmPWMuYmxvY2sscT1kLmJsb2NrLGc9bnVsbDtpZighYy5ibG9ja0xpbWl0LmVxdWFscyhkLmJsb2NrTGltaXQpKXJldHVybiBudWxsO1wiYnJcIiE9YSYmKGZ8fChmPXRoaXMuZml4QmxvY2soITAsYSkscT0obmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aCh0aGlzLmVuZENvbnRhaW5lcix0aGlzLnJvb3QpKS5ibG9jaykscXx8KHE9dGhpcy5maXhCbG9jayghMSxhKSkpO2M9ZiYmdGhpcy5jaGVja1N0YXJ0T2ZCbG9jaygpO2Q9cSYmdGhpcy5jaGVja0VuZE9mQmxvY2soKTt0aGlzLmRlbGV0ZUNvbnRlbnRzKCk7ZiYmZi5lcXVhbHMocSkmJlxuKGQ/KGc9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aCh0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMucm9vdCksdGhpcy5tb3ZlVG9Qb3NpdGlvbihxLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCkscT1udWxsKTpjPyhnPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgodGhpcy5zdGFydENvbnRhaW5lcix0aGlzLnJvb3QpLHRoaXMubW92ZVRvUG9zaXRpb24oZixDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLGY9bnVsbCk6KHE9dGhpcy5zcGxpdEVsZW1lbnQoZixifHwhMSksZi5pcyhcInVsXCIsXCJvbFwiKXx8Zi5hcHBlbmRCb2d1cygpKSk7cmV0dXJue3ByZXZpb3VzQmxvY2s6ZixuZXh0QmxvY2s6cSx3YXNTdGFydE9mQmxvY2s6Yyx3YXNFbmRPZkJsb2NrOmQsZWxlbWVudFBhdGg6Z319LHNwbGl0RWxlbWVudDpmdW5jdGlvbihhLGIpe2lmKCF0aGlzLmNvbGxhcHNlZClyZXR1cm4gbnVsbDt0aGlzLnNldEVuZEF0KGEsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCk7XG52YXIgYz10aGlzLmV4dHJhY3RDb250ZW50cyghMSxifHwhMSksZD1hLmNsb25lKCExLGJ8fCExKTtjLmFwcGVuZFRvKGQpO2QuaW5zZXJ0QWZ0ZXIoYSk7dGhpcy5tb3ZlVG9Qb3NpdGlvbihhLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCk7cmV0dXJuIGR9LHJlbW92ZUVtcHR5QmxvY2tzQXRFbmQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGQpe3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYihhKXx8YyhhKXx8YS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuaXNFbXB0eUlubGluZVJlbW92ZWFibGUoKXx8ZC5pcyhcInRhYmxlXCIpJiZhLmlzKFwiY2FwdGlvblwiKT8hMTohMH19dmFyIGI9Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcygpLGM9Q0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyayghMSk7cmV0dXJuIGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz10aGlzLmNyZWF0ZUJvb2ttYXJrKCksZD10aGlzW2I/XCJlbmRQYXRoXCI6XCJzdGFydFBhdGhcIl0oKSxmPWQuYmxvY2t8fFxuZC5ibG9ja0xpbWl0LGc7ZiYmIWYuZXF1YWxzKGQucm9vdCkmJiFmLmdldEZpcnN0KGEoZikpOylnPWYuZ2V0UGFyZW50KCksdGhpc1tiP1wic2V0RW5kQXRcIjpcInNldFN0YXJ0QXRcIl0oZixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpLGYucmVtb3ZlKDEpLGY9Zzt0aGlzLm1vdmVUb0Jvb2ttYXJrKGMpfX0oKSxzdGFydFBhdGg6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aCh0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMucm9vdCl9LGVuZFBhdGg6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aCh0aGlzLmVuZENvbnRhaW5lcix0aGlzLnJvb3QpfSxjaGVja0JvdW5kYXJ5T2ZFbGVtZW50OmZ1bmN0aW9uKGEsYil7dmFyIGQ9Yj09Q0tFRElUT1IuU1RBUlQsZj10aGlzLmNsb25lKCk7Zi5jb2xsYXBzZShkKTtmW2Q/XCJzZXRTdGFydEF0XCI6XCJzZXRFbmRBdFwiXShhLGQ/Q0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQ6XG5DS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtmPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGYpO2YuZXZhbHVhdG9yPWMoZCk7cmV0dXJuIGZbZD9cImNoZWNrQmFja3dhcmRcIjpcImNoZWNrRm9yd2FyZFwiXSgpfSxjaGVja1N0YXJ0T2ZCbG9jazpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc3RhcnRDb250YWluZXIsYz10aGlzLnN0YXJ0T2Zmc2V0O0NLRURJVE9SLmVudi5pZSYmYyYmYS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihhPUNLRURJVE9SLnRvb2xzLmx0cmltKGEuc3Vic3RyaW5nKDAsYykpLGwudGVzdChhKSYmdGhpcy50cmltKDAsMSkpO3RoaXMudHJpbSgpO2E9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aCh0aGlzLnN0YXJ0Q29udGFpbmVyLHRoaXMucm9vdCk7Yz10aGlzLmNsb25lKCk7Yy5jb2xsYXBzZSghMCk7Yy5zZXRTdGFydEF0KGEuYmxvY2t8fGEuYmxvY2tMaW1pdCxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCk7YT1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihjKTtcbmEuZXZhbHVhdG9yPWIoKTtyZXR1cm4gYS5jaGVja0JhY2t3YXJkKCl9LGNoZWNrRW5kT2ZCbG9jazpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZW5kQ29udGFpbmVyLGM9dGhpcy5lbmRPZmZzZXQ7Q0tFRElUT1IuZW52LmllJiZhLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGE9Q0tFRElUT1IudG9vbHMucnRyaW0oYS5zdWJzdHJpbmcoYykpLGwudGVzdChhKSYmdGhpcy50cmltKDEsMCkpO3RoaXMudHJpbSgpO2E9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aCh0aGlzLmVuZENvbnRhaW5lcix0aGlzLnJvb3QpO2M9dGhpcy5jbG9uZSgpO2MuY29sbGFwc2UoITEpO2Muc2V0RW5kQXQoYS5ibG9ja3x8YS5ibG9ja0xpbWl0LENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpO2E9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoYyk7YS5ldmFsdWF0b3I9YigpO3JldHVybiBhLmNoZWNrRm9yd2FyZCgpfSxnZXRQcmV2aW91c05vZGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuY2xvbmUoKTtcbmQuY29sbGFwc2UoMSk7ZC5zZXRTdGFydEF0KGN8fHRoaXMucm9vdCxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCk7Yz1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihkKTtjLmV2YWx1YXRvcj1hO2MuZ3VhcmQ9YjtyZXR1cm4gYy5wcmV2aW91cygpfSxnZXROZXh0Tm9kZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5jbG9uZSgpO2QuY29sbGFwc2UoKTtkLnNldEVuZEF0KGN8fHRoaXMucm9vdCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTtjPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGQpO2MuZXZhbHVhdG9yPWE7Yy5ndWFyZD1iO3JldHVybiBjLm5leHQoKX0sY2hlY2tSZWFkT25seTpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYixjKXtmb3IoO2I7KXtpZihiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCl7aWYoXCJmYWxzZVwiPT1iLmdldEF0dHJpYnV0ZShcImNvbnRlbnRFZGl0YWJsZVwiKSYmIWIuZGF0YShcImNrZS1lZGl0YWJsZVwiKSlyZXR1cm4gMDtpZihiLmlzKFwiaHRtbFwiKXx8XG5cInRydWVcIj09Yi5nZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIikmJihiLmNvbnRhaW5zKGMpfHxiLmVxdWFscyhjKSkpYnJlYWt9Yj1iLmdldFBhcmVudCgpfXJldHVybiAxfXJldHVybiBmdW5jdGlvbigpe3ZhciBiPXRoaXMuc3RhcnRDb250YWluZXIsYz10aGlzLmVuZENvbnRhaW5lcjtyZXR1cm4hKGEoYixjKSYmYShjLGIpKX19KCksbW92ZVRvRWxlbWVudEVkaXRhYmxlUG9zaXRpb246ZnVuY3Rpb24oYSxiKXtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmIWEuaXNFZGl0YWJsZSghMSkpcmV0dXJuIHRoaXMubW92ZVRvUG9zaXRpb24oYSxiP0NLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORDpDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLCEwO2Zvcih2YXIgYz0wO2E7KXtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCl7YiYmdGhpcy5lbmRDb250YWluZXImJnRoaXMuY2hlY2tFbmRPZkJsb2NrKCkmJmwudGVzdChhLmdldFRleHQoKSk/dGhpcy5tb3ZlVG9Qb3NpdGlvbihhLFxuQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTp0aGlzLm1vdmVUb1Bvc2l0aW9uKGEsYj9DS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQ6Q0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTtjPTE7YnJlYWt9aWYoYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpaWYoYS5pc0VkaXRhYmxlKCkpdGhpcy5tb3ZlVG9Qb3NpdGlvbihhLGI/Q0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORDpDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCksYz0xO2Vsc2UgaWYoYiYmYS5pcyhcImJyXCIpJiZ0aGlzLmVuZENvbnRhaW5lciYmdGhpcy5jaGVja0VuZE9mQmxvY2soKSl0aGlzLm1vdmVUb1Bvc2l0aW9uKGEsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTtlbHNlIGlmKFwiZmFsc2VcIj09YS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikmJmEuaXMoQ0tFRElUT1IuZHRkLiRibG9jaykpcmV0dXJuIHRoaXMuc2V0U3RhcnRCZWZvcmUoYSksdGhpcy5zZXRFbmRBZnRlcihhKSxcbiEwO3ZhciBkPWEsZj1jLHE9dm9pZCAwO2QudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZkLmlzRWRpdGFibGUoITEpJiYocT1kW2I/XCJnZXRMYXN0XCI6XCJnZXRGaXJzdFwiXSh1KSk7Znx8cXx8KHE9ZFtiP1wiZ2V0UHJldmlvdXNcIjpcImdldE5leHRcIl0odSkpO2E9cX1yZXR1cm4hIWN9LG1vdmVUb0Nsb3Nlc3RFZGl0YWJsZVBvc2l0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0wLGYscSxnPVtDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUXTthPyhjPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UodGhpcy5yb290KSxjLm1vdmVUb1Bvc2l0aW9uKGEsZ1tiPzA6MV0pKTpjPXRoaXMuY2xvbmUoKTtpZihhJiYhYS5pcyhDS0VESVRPUi5kdGQuJGJsb2NrKSlkPTE7ZWxzZSBpZihmPWNbYj9cImdldE5leHRFZGl0YWJsZU5vZGVcIjpcImdldFByZXZpb3VzRWRpdGFibGVOb2RlXCJdKCkpZD0xLChxPWYudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UKSYmXG5mLmlzKENLRURJVE9SLmR0ZC4kYmxvY2spJiZcImZhbHNlXCI9PWYuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpPyhjLnNldFN0YXJ0QXQoZixDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLGMuc2V0RW5kQXQoZixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpKTohQ0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXImJnEmJmYuaXMoQ0tFRElUT1IuZG9tLndhbGtlci52YWxpZEVtcHR5QmxvY2tDb250YWluZXJzKT8oYy5zZXRFbmQoZiwwKSxjLmNvbGxhcHNlKCkpOmMubW92ZVRvUG9zaXRpb24oZixnW2I/MTowXSk7ZCYmdGhpcy5tb3ZlVG9SYW5nZShjKTtyZXR1cm4hIWR9LG1vdmVUb0VsZW1lbnRFZGl0U3RhcnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubW92ZVRvRWxlbWVudEVkaXRhYmxlUG9zaXRpb24oYSl9LG1vdmVUb0VsZW1lbnRFZGl0RW5kOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1vdmVUb0VsZW1lbnRFZGl0YWJsZVBvc2l0aW9uKGEsITApfSxnZXRFbmNsb3NlZE5vZGU6ZnVuY3Rpb24oKXt2YXIgYT1cbnRoaXMuY2xvbmUoKTthLm9wdGltaXplKCk7aWYoYS5zdGFydENvbnRhaW5lci50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlR8fGEuZW5kQ29udGFpbmVyLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVClyZXR1cm4gbnVsbDt2YXIgYT1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihhKSxiPUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoITEsITApLGM9Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcyghMCk7YS5ldmFsdWF0b3I9ZnVuY3Rpb24oYSl7cmV0dXJuIGMoYSkmJmIoYSl9O3ZhciBkPWEubmV4dCgpO2EucmVzZXQoKTtyZXR1cm4gZCYmZC5lcXVhbHMoYS5wcmV2aW91cygpKT9kOm51bGx9LGdldFRvdWNoZWRTdGFydE5vZGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnN0YXJ0Q29udGFpbmVyO3JldHVybiB0aGlzLmNvbGxhcHNlZHx8YS50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/YTphLmdldENoaWxkKHRoaXMuc3RhcnRPZmZzZXQpfHxhfSxnZXRUb3VjaGVkRW5kTm9kZTpmdW5jdGlvbigpe3ZhciBhPVxudGhpcy5lbmRDb250YWluZXI7cmV0dXJuIHRoaXMuY29sbGFwc2VkfHxhLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVD9hOmEuZ2V0Q2hpbGQodGhpcy5lbmRPZmZzZXQtMSl8fGF9LGdldE5leHRFZGl0YWJsZU5vZGU6ZigpLGdldFByZXZpb3VzRWRpdGFibGVOb2RlOmYoMSksc2Nyb2xsSW50b1ZpZXc6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoXCJcXHgzY3NwYW5cXHgzZVxceDI2bmJzcDtcXHgzYy9zcGFuXFx4M2VcIix0aGlzLmRvY3VtZW50KSxiLGMsZCxmPXRoaXMuY2xvbmUoKTtmLm9wdGltaXplKCk7KGQ9Zi5zdGFydENvbnRhaW5lci50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQpPyhjPWYuc3RhcnRDb250YWluZXIuZ2V0VGV4dCgpLGI9Zi5zdGFydENvbnRhaW5lci5zcGxpdChmLnN0YXJ0T2Zmc2V0KSxhLmluc2VydEFmdGVyKGYuc3RhcnRDb250YWluZXIpKTpmLmluc2VydE5vZGUoYSk7YS5zY3JvbGxJbnRvVmlldygpO1xuZCYmKGYuc3RhcnRDb250YWluZXIuc2V0VGV4dChjKSxiLnJlbW92ZSgpKTthLnJlbW92ZSgpfSxfc2V0U3RhcnRDb250YWluZXI6ZnVuY3Rpb24oYSl7dGhpcy5zdGFydENvbnRhaW5lcj1hfSxfc2V0RW5kQ29udGFpbmVyOmZ1bmN0aW9uKGEpe3RoaXMuZW5kQ29udGFpbmVyPWF9LF9maW5kOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDb21tb25BbmNlc3RvcigpLGQ9dGhpcy5nZXRCb3VuZGFyeU5vZGVzKCksZj1bXSxxLGcsayxsO2lmKGMmJmMuZmluZClmb3IoZz1jLmZpbmQoYSkscT0wO3E8Zy5jb3VudCgpO3ErKylpZihjPWcuZ2V0SXRlbShxKSxifHwhYy5pc1JlYWRPbmx5KCkpaz1jLmdldFBvc2l0aW9uKGQuc3RhcnROb2RlKSZDS0VESVRPUi5QT1NJVElPTl9GT0xMT1dJTkd8fGQuc3RhcnROb2RlLmVxdWFscyhjKSxsPWMuZ2V0UG9zaXRpb24oZC5lbmROb2RlKSZDS0VESVRPUi5QT1NJVElPTl9QUkVDRURJTkcrQ0tFRElUT1IuUE9TSVRJT05fSVNfQ09OVEFJTkVELFxuayYmbCYmZi5wdXNoKGMpO3JldHVybiBmfX19KSgpO0NLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUPTE7Q0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORD0yO0NLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVD0zO0NLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORD00O0NLRURJVE9SLkVOTEFSR0VfRUxFTUVOVD0xO0NLRURJVE9SLkVOTEFSR0VfQkxPQ0tfQ09OVEVOVFM9MjtDS0VESVRPUi5FTkxBUkdFX0xJU1RfSVRFTV9DT05URU5UUz0zO0NLRURJVE9SLkVOTEFSR0VfSU5MSU5FPTQ7Q0tFRElUT1IuU1RBUlQ9MTtDS0VESVRPUi5FTkQ9MjtDS0VESVRPUi5TSFJJTktfRUxFTUVOVD0xO0NLRURJVE9SLlNIUklOS19URVhUPTI7XCJ1c2Ugc3RyaWN0XCI7XG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpezE+YXJndW1lbnRzLmxlbmd0aHx8KHRoaXMucmFuZ2U9YSx0aGlzLmZvcmNlQnJCcmVhaz0wLHRoaXMuZW5sYXJnZUJyPTEsdGhpcy5lbmZvcmNlUmVhbEJsb2Nrcz0wLHRoaXMuX3x8KHRoaXMuXz17fSkpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9W107YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKFwidHJ1ZVwiPT1hLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSlyZXR1cm4gYi5wdXNoKGEpLCExfSxDS0VESVRPUi5OT0RFX0VMRU1FTlQsITApO3JldHVybiBifWZ1bmN0aW9uIGIoYSxjLGYsZyl7YTp7bnVsbD09ZyYmKGc9ZChmKSk7Zm9yKHZhciBrO2s9Zy5zaGlmdCgpOylpZihrLmdldER0ZCgpLnApe2c9e2VsZW1lbnQ6ayxyZW1haW5pbmc6Z307YnJlYWsgYX1nPW51bGx9aWYoIWcpcmV0dXJuIDA7aWYoKGs9Q0tFRElUT1IuZmlsdGVyLmluc3RhbmNlc1tnLmVsZW1lbnQuZGF0YShcImNrZS1maWx0ZXJcIildKSYmIWsuY2hlY2soYykpcmV0dXJuIGIoYSxcbmMsZixnLnJlbWFpbmluZyk7Yz1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGcuZWxlbWVudCk7Yy5zZWxlY3ROb2RlQ29udGVudHMoZy5lbGVtZW50KTtjPWMuY3JlYXRlSXRlcmF0b3IoKTtjLmVubGFyZ2VCcj1hLmVubGFyZ2VCcjtjLmVuZm9yY2VSZWFsQmxvY2tzPWEuZW5mb3JjZVJlYWxCbG9ja3M7Yy5hY3RpdmVGaWx0ZXI9Yy5maWx0ZXI9azthLl8ubmVzdGVkRWRpdGFibGU9e2VsZW1lbnQ6Zy5lbGVtZW50LGNvbnRhaW5lcjpmLHJlbWFpbmluZzpnLnJlbWFpbmluZyxpdGVyYXRvcjpjfTtyZXR1cm4gMX1mdW5jdGlvbiBjKGEsYixjKXtpZighYilyZXR1cm4hMTthPWEuY2xvbmUoKTthLmNvbGxhcHNlKCFjKTtyZXR1cm4gYS5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGIsYz9DS0VESVRPUi5TVEFSVDpDS0VESVRPUi5FTkQpfXZhciBmPS9eW1xcclxcblxcdCBdKyQvLGc9Q0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyayghMSwhMCksaz1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCEwKSxcbmw9ZnVuY3Rpb24oYSl7cmV0dXJuIGcoYSkmJmsoYSl9LG09e2RkOjEsZHQ6MSxsaToxfTthLnByb3RvdHlwZT17Z2V0TmV4dFBhcmFncmFwaDpmdW5jdGlvbihhKXt2YXIgZCxrLHIseCxEO2E9YXx8XCJwXCI7aWYodGhpcy5fLm5lc3RlZEVkaXRhYmxlKXtpZihkPXRoaXMuXy5uZXN0ZWRFZGl0YWJsZS5pdGVyYXRvci5nZXROZXh0UGFyYWdyYXBoKGEpKXJldHVybiB0aGlzLmFjdGl2ZUZpbHRlcj10aGlzLl8ubmVzdGVkRWRpdGFibGUuaXRlcmF0b3IuYWN0aXZlRmlsdGVyLGQ7dGhpcy5hY3RpdmVGaWx0ZXI9dGhpcy5maWx0ZXI7aWYoYih0aGlzLGEsdGhpcy5fLm5lc3RlZEVkaXRhYmxlLmNvbnRhaW5lcix0aGlzLl8ubmVzdGVkRWRpdGFibGUucmVtYWluaW5nKSlyZXR1cm4gdGhpcy5hY3RpdmVGaWx0ZXI9dGhpcy5fLm5lc3RlZEVkaXRhYmxlLml0ZXJhdG9yLmFjdGl2ZUZpbHRlcix0aGlzLl8ubmVzdGVkRWRpdGFibGUuaXRlcmF0b3IuZ2V0TmV4dFBhcmFncmFwaChhKTt0aGlzLl8ubmVzdGVkRWRpdGFibGU9XG5udWxsfWlmKCF0aGlzLnJhbmdlLnJvb3QuZ2V0RHRkKClbYV0pcmV0dXJuIG51bGw7aWYoIXRoaXMuXy5zdGFydGVkKXt2YXIgcT10aGlzLnJhbmdlLmNsb25lKCk7az1xLnN0YXJ0UGF0aCgpO3ZhciB3PXEuZW5kUGF0aCgpLEg9IXEuY29sbGFwc2VkJiZjKHEsay5ibG9jayksdD0hcS5jb2xsYXBzZWQmJmMocSx3LmJsb2NrLDEpO3Euc2hyaW5rKENLRURJVE9SLlNIUklOS19FTEVNRU5ULCEwKTtIJiZxLnNldFN0YXJ0QXQoay5ibG9jayxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTt0JiZxLnNldEVuZEF0KHcuYmxvY2ssQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpO2s9cS5lbmRDb250YWluZXIuaGFzQXNjZW5kYW50KFwicHJlXCIsITApfHxxLnN0YXJ0Q29udGFpbmVyLmhhc0FzY2VuZGFudChcInByZVwiLCEwKTtxLmVubGFyZ2UodGhpcy5mb3JjZUJyQnJlYWsmJiFrfHwhdGhpcy5lbmxhcmdlQnI/Q0tFRElUT1IuRU5MQVJHRV9MSVNUX0lURU1fQ09OVEVOVFM6Q0tFRElUT1IuRU5MQVJHRV9CTE9DS19DT05URU5UUyk7XG5xLmNvbGxhcHNlZHx8KGs9bmV3IENLRURJVE9SLmRvbS53YWxrZXIocS5jbG9uZSgpKSx3PUNLRURJVE9SLmRvbS53YWxrZXIuYm9va21hcmsoITAsITApLGsuZXZhbHVhdG9yPXcsdGhpcy5fLm5leHROb2RlPWsubmV4dCgpLGs9bmV3IENLRURJVE9SLmRvbS53YWxrZXIocS5jbG9uZSgpKSxrLmV2YWx1YXRvcj13LGs9ay5wcmV2aW91cygpLHRoaXMuXy5sYXN0Tm9kZT1rLmdldE5leHRTb3VyY2VOb2RlKCEwLG51bGwscS5yb290KSx0aGlzLl8ubGFzdE5vZGUmJnRoaXMuXy5sYXN0Tm9kZS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJiFDS0VESVRPUi50b29scy50cmltKHRoaXMuXy5sYXN0Tm9kZS5nZXRUZXh0KCkpJiZ0aGlzLl8ubGFzdE5vZGUuZ2V0UGFyZW50KCkuaXNCbG9ja0JvdW5kYXJ5KCkmJih3PXRoaXMucmFuZ2UuY2xvbmUoKSx3Lm1vdmVUb1Bvc2l0aW9uKHRoaXMuXy5sYXN0Tm9kZSxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpLHcuY2hlY2tFbmRPZkJsb2NrKCkmJlxuKHc9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aCh3LmVuZENvbnRhaW5lcix3LnJvb3QpLHRoaXMuXy5sYXN0Tm9kZT0ody5ibG9ja3x8dy5ibG9ja0xpbWl0KS5nZXROZXh0U291cmNlTm9kZSghMCkpKSx0aGlzLl8ubGFzdE5vZGUmJnEucm9vdC5jb250YWlucyh0aGlzLl8ubGFzdE5vZGUpfHwodGhpcy5fLmxhc3ROb2RlPXRoaXMuXy5kb2NFbmRNYXJrZXI9cS5kb2N1bWVudC5jcmVhdGVUZXh0KFwiXCIpLHRoaXMuXy5sYXN0Tm9kZS5pbnNlcnRBZnRlcihrKSkscT1udWxsKTt0aGlzLl8uc3RhcnRlZD0xO2s9cX13PXRoaXMuXy5uZXh0Tm9kZTtxPXRoaXMuXy5sYXN0Tm9kZTtmb3IodGhpcy5fLm5leHROb2RlPW51bGw7dzspe3ZhciBIPTAsdD13Lmhhc0FzY2VuZGFudChcInByZVwiKSx2PXcudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5ULGg9MDtpZih2KXcudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiZmLnRlc3Qody5nZXRUZXh0KCkpJiYodj0wKTtlbHNle3ZhciBwPXcuZ2V0TmFtZSgpO1xuaWYoQ0tFRElUT1IuZHRkLiRibG9ja1twXSYmXCJmYWxzZVwiPT13LmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSl7ZD13O2IodGhpcyxhLGQpO2JyZWFrfWVsc2UgaWYody5pc0Jsb2NrQm91bmRhcnkodGhpcy5mb3JjZUJyQnJlYWsmJiF0JiZ7YnI6MX0pKXtpZihcImJyXCI9PXApdj0xO2Vsc2UgaWYoIWsmJiF3LmdldENoaWxkQ291bnQoKSYmXCJoclwiIT1wKXtkPXc7cj13LmVxdWFscyhxKTticmVha31rJiYoay5zZXRFbmRBdCh3LENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCksXCJiclwiIT1wJiYodGhpcy5fLm5leHROb2RlPXcpKTtIPTF9ZWxzZXtpZih3LmdldEZpcnN0KCkpe2t8fChrPXRoaXMucmFuZ2UuY2xvbmUoKSxrLnNldFN0YXJ0QXQodyxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpKTt3PXcuZ2V0Rmlyc3QoKTtjb250aW51ZX12PTF9fXYmJiFrJiYoaz10aGlzLnJhbmdlLmNsb25lKCksay5zZXRTdGFydEF0KHcsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSk7XG5yPSghSHx8dikmJncuZXF1YWxzKHEpO2lmKGsmJiFIKWZvcig7IXcuZ2V0TmV4dChsKSYmIXI7KXtwPXcuZ2V0UGFyZW50KCk7aWYocC5pc0Jsb2NrQm91bmRhcnkodGhpcy5mb3JjZUJyQnJlYWsmJiF0JiZ7YnI6MX0pKXtIPTE7dj0wO3J8fHAuZXF1YWxzKHEpO2suc2V0RW5kQXQocCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTticmVha313PXA7dj0xO3I9dy5lcXVhbHMocSk7aD0xfXYmJmsuc2V0RW5kQXQodyxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpO3c9dGhpcy5fZ2V0TmV4dFNvdXJjZU5vZGUodyxoLHEpO2lmKChyPSF3KXx8SCYmaylicmVha31pZighZCl7aWYoIWspcmV0dXJuIHRoaXMuXy5kb2NFbmRNYXJrZXImJnRoaXMuXy5kb2NFbmRNYXJrZXIucmVtb3ZlKCksdGhpcy5fLm5leHROb2RlPW51bGw7ZD1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGsuc3RhcnRDb250YWluZXIsay5yb290KTt3PWQuYmxvY2tMaW1pdDtIPXtkaXY6MSx0aDoxLHRkOjF9O1xuZD1kLmJsb2NrOyFkJiZ3JiYhdGhpcy5lbmZvcmNlUmVhbEJsb2NrcyYmSFt3LmdldE5hbWUoKV0mJmsuY2hlY2tTdGFydE9mQmxvY2soKSYmay5jaGVja0VuZE9mQmxvY2soKSYmIXcuZXF1YWxzKGsucm9vdCk/ZD13OiFkfHx0aGlzLmVuZm9yY2VSZWFsQmxvY2tzJiZkLmlzKG0pPyhkPXRoaXMucmFuZ2UuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhKSxrLmV4dHJhY3RDb250ZW50cygpLmFwcGVuZFRvKGQpLGQudHJpbSgpLGsuaW5zZXJ0Tm9kZShkKSx4PUQ9ITApOlwibGlcIiE9ZC5nZXROYW1lKCk/ay5jaGVja1N0YXJ0T2ZCbG9jaygpJiZrLmNoZWNrRW5kT2ZCbG9jaygpfHwoZD1kLmNsb25lKCExKSxrLmV4dHJhY3RDb250ZW50cygpLmFwcGVuZFRvKGQpLGQudHJpbSgpLEQ9ay5zcGxpdEJsb2NrKCkseD0hRC53YXNTdGFydE9mQmxvY2ssRD0hRC53YXNFbmRPZkJsb2NrLGsuaW5zZXJ0Tm9kZShkKSk6cnx8KHRoaXMuXy5uZXh0Tm9kZT1kLmVxdWFscyhxKT9udWxsOnRoaXMuX2dldE5leHRTb3VyY2VOb2RlKGsuZ2V0Qm91bmRhcnlOb2RlcygpLmVuZE5vZGUsXG4xLHEpKX14JiYoeD1kLmdldFByZXZpb3VzKCkpJiZ4LnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKFwiYnJcIj09eC5nZXROYW1lKCk/eC5yZW1vdmUoKTp4LmdldExhc3QoKSYmXCJiclwiPT14LmdldExhc3QoKS4kLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJnguZ2V0TGFzdCgpLnJlbW92ZSgpKTtEJiYoeD1kLmdldExhc3QoKSkmJngudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcImJyXCI9PXguZ2V0TmFtZSgpJiYoIUNLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyfHx4LmdldFByZXZpb3VzKGcpfHx4LmdldE5leHQoZykpJiZ4LnJlbW92ZSgpO3RoaXMuXy5uZXh0Tm9kZXx8KHRoaXMuXy5uZXh0Tm9kZT1yfHxkLmVxdWFscyhxKXx8IXE/bnVsbDp0aGlzLl9nZXROZXh0U291cmNlTm9kZShkLDEscSkpO3JldHVybiBkfSxfZ2V0TmV4dFNvdXJjZU5vZGU6ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIShhLmVxdWFscyhjKXx8YS5lcXVhbHMoZikpfXZhciBmPVxudGhpcy5yYW5nZS5yb290O2ZvcihhPWEuZ2V0TmV4dFNvdXJjZU5vZGUoYixudWxsLGQpOyFnKGEpOylhPWEuZ2V0TmV4dFNvdXJjZU5vZGUoYixudWxsLGQpO3JldHVybiBhfX07Q0tFRElUT1IuZG9tLnJhbmdlLnByb3RvdHlwZS5jcmVhdGVJdGVyYXRvcj1mdW5jdGlvbigpe3JldHVybiBuZXcgYSh0aGlzKX19KSgpO1xuQ0tFRElUT1IuY29tbWFuZD1mdW5jdGlvbihhLGQpe3RoaXMudWlJdGVtcz1bXTt0aGlzLmV4ZWM9ZnVuY3Rpb24oYil7aWYodGhpcy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUR8fCF0aGlzLmNoZWNrQWxsb3dlZCgpKXJldHVybiExO3RoaXMuZWRpdG9yRm9jdXMmJmEuZm9jdXMoKTtyZXR1cm4hMT09PXRoaXMuZmlyZShcImV4ZWNcIik/ITA6ITEhPT1kLmV4ZWMuY2FsbCh0aGlzLGEsYil9O3RoaXMucmVmcmVzaD1mdW5jdGlvbihhLGIpe2lmKCF0aGlzLnJlYWRPbmx5JiZhLnJlYWRPbmx5KXJldHVybiEwO2lmKHRoaXMuY29udGV4dCYmIWIuaXNDb250ZXh0Rm9yKHRoaXMuY29udGV4dCl8fCF0aGlzLmNoZWNrQWxsb3dlZCghMCkpcmV0dXJuIHRoaXMuZGlzYWJsZSgpLCEwO3RoaXMuc3RhcnREaXNhYmxlZHx8dGhpcy5lbmFibGUoKTt0aGlzLm1vZGVzJiYhdGhpcy5tb2Rlc1thLm1vZGVdJiZ0aGlzLmRpc2FibGUoKTtyZXR1cm4hMT09PXRoaXMuZmlyZShcInJlZnJlc2hcIixcbntlZGl0b3I6YSxwYXRoOmJ9KT8hMDpkLnJlZnJlc2gmJiExIT09ZC5yZWZyZXNoLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07dmFyIGI7dGhpcy5jaGVja0FsbG93ZWQ9ZnVuY3Rpb24oYyl7cmV0dXJuIGN8fFwiYm9vbGVhblwiIT10eXBlb2YgYj9iPWEuYWN0aXZlRmlsdGVyLmNoZWNrRmVhdHVyZSh0aGlzKTpifTtDS0VESVRPUi50b29scy5leHRlbmQodGhpcyxkLHttb2Rlczp7d3lzaXd5ZzoxfSxlZGl0b3JGb2N1czoxLGNvbnRleHRTZW5zaXRpdmU6ISFkLmNvbnRleHQsc3RhdGU6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUR9KTtDS0VESVRPUi5ldmVudC5jYWxsKHRoaXMpfTtcbkNLRURJVE9SLmNvbW1hbmQucHJvdG90eXBlPXtlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmdGhpcy5jaGVja0FsbG93ZWQoKSYmdGhpcy5zZXRTdGF0ZSh0aGlzLnByZXNlcnZlU3RhdGUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0aGlzLnByZXZpb3VzU3RhdGU/dGhpcy5wcmV2aW91c1N0YXRlOkNLRURJVE9SLlRSSVNUQVRFX09GRil9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKX0sc2V0U3RhdGU6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdGF0ZT09YXx8YSE9Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQmJiF0aGlzLmNoZWNrQWxsb3dlZCgpKXJldHVybiExO3RoaXMucHJldmlvdXNTdGF0ZT10aGlzLnN0YXRlO3RoaXMuc3RhdGU9YTt0aGlzLmZpcmUoXCJzdGF0ZVwiKTtyZXR1cm4hMH0sdG9nZ2xlU3RhdGU6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PRkY/XG50aGlzLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX09OKTp0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PTiYmdGhpcy5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9PRkYpfX07Q0tFRElUT1IuZXZlbnQuaW1wbGVtZW50T24oQ0tFRElUT1IuY29tbWFuZC5wcm90b3R5cGUpO0NLRURJVE9SLkVOVEVSX1A9MTtDS0VESVRPUi5FTlRFUl9CUj0yO0NLRURJVE9SLkVOVEVSX0RJVj0zO1xuQ0tFRElUT1IuY29uZmlnPXtjdXN0b21Db25maWc6XCJjb25maWcuanNcIixhdXRvVXBkYXRlRWxlbWVudDohMCxsYW5ndWFnZTpcIlwiLGRlZmF1bHRMYW5ndWFnZTpcImVuXCIsY29udGVudHNMYW5nRGlyZWN0aW9uOlwiXCIsZW50ZXJNb2RlOkNLRURJVE9SLkVOVEVSX1AsZm9yY2VFbnRlck1vZGU6ITEsc2hpZnRFbnRlck1vZGU6Q0tFRElUT1IuRU5URVJfQlIsZG9jVHlwZTpcIlxceDNjIURPQ1RZUEUgaHRtbFxceDNlXCIsYm9keUlkOlwiXCIsYm9keUNsYXNzOlwiXCIsZnVsbFBhZ2U6ITEsaGVpZ2h0OjIwMCxjb250ZW50c0NzczpDS0VESVRPUi5nZXRVcmwoXCJjb250ZW50cy5jc3NcIiksZXh0cmFQbHVnaW5zOlwiXCIscmVtb3ZlUGx1Z2luczpcIlwiLHByb3RlY3RlZFNvdXJjZTpbXSx0YWJJbmRleDowLHdpZHRoOlwiXCIsYmFzZUZsb2F0WkluZGV4OjFFNCxibG9ja2VkS2V5c3Ryb2tlczpbQ0tFRElUT1IuQ1RSTCs2NixDS0VESVRPUi5DVFJMKzczLENLRURJVE9SLkNUUkwrODVdfTtcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiLGMsZCxmKXt2YXIgaCxwO2E9W107Zm9yKGggaW4gYil7cD1iW2hdO3A9XCJib29sZWFuXCI9PXR5cGVvZiBwP3t9OlwiZnVuY3Rpb25cIj09dHlwZW9mIHA/e21hdGNoOnB9OkMocCk7XCIkXCIhPWguY2hhckF0KDApJiYocC5lbGVtZW50cz1oKTtjJiYocC5mZWF0dXJlTmFtZT1jLnRvTG93ZXJDYXNlKCkpO3ZhciBuPXA7bi5lbGVtZW50cz1rKG4uZWxlbWVudHMsL1xccysvKXx8bnVsbDtuLnByb3BlcnRpZXNPbmx5PW4ucHJvcGVydGllc09ubHl8fCEwPT09bi5lbGVtZW50czt2YXIgZT0vXFxzKixcXHMqLyxGPXZvaWQgMDtmb3IoRiBpbiBPKXtuW0ZdPWsobltGXSxlKXx8bnVsbDt2YXIgcT1uLGc9TltGXSx2PWsobltOW0ZdXSxlKSx5PW5bRl0sQj1bXSx6PSEwLEs9dm9pZCAwO3Y/ej0hMTp2PXt9O2ZvcihLIGluIHkpXCIhXCI9PUsuY2hhckF0KDApJiYoSz1LLnNsaWNlKDEpLEIucHVzaChLKSx2W0tdPSEwLHo9ITEpO2Zvcig7Sz1CLnBvcCgpOyl5W0tdPVxueVtcIiFcIitLXSxkZWxldGUgeVtcIiFcIitLXTtxW2ddPSh6PyExOnYpfHxudWxsfW4ubWF0Y2g9bi5tYXRjaHx8bnVsbDtkLnB1c2gocCk7YS5wdXNoKHApfWI9Zi5lbGVtZW50cztmPWYuZ2VuZXJpYzt2YXIgRTtjPTA7Zm9yKGQ9YS5sZW5ndGg7YzxkOysrYyl7aD1DKGFbY10pO3A9ITA9PT1oLmNsYXNzZXN8fCEwPT09aC5zdHlsZXN8fCEwPT09aC5hdHRyaWJ1dGVzO249aDtGPWc9ZT12b2lkIDA7Zm9yKGUgaW4gTyluW2VdPUgobltlXSk7cT0hMDtmb3IoRiBpbiBOKXtlPU5bRl07Zz1uW2VdO3Y9W107eT12b2lkIDA7Zm9yKHkgaW4gZyktMTx5LmluZGV4T2YoXCIqXCIpP3YucHVzaChuZXcgUmVnRXhwKFwiXlwiK3kucmVwbGFjZSgvXFwqL2csXCIuKlwiKStcIiRcIikpOnYucHVzaCh5KTtnPXY7Zy5sZW5ndGgmJihuW2VdPWcscT0hMSl9bi5ub3RoaW5nUmVxdWlyZWQ9cTtuLm5vUHJvcGVydGllcz0hKG4uYXR0cmlidXRlc3x8bi5jbGFzc2VzfHxuLnN0eWxlcyk7aWYoITA9PT1oLmVsZW1lbnRzfHxcbm51bGw9PT1oLmVsZW1lbnRzKWZbcD9cInVuc2hpZnRcIjpcInB1c2hcIl0oaCk7ZWxzZSBmb3IoRSBpbiBuPWguZWxlbWVudHMsZGVsZXRlIGguZWxlbWVudHMsbilpZihiW0VdKWJbRV1bcD9cInVuc2hpZnRcIjpcInB1c2hcIl0oaCk7ZWxzZSBiW0VdPVtoXX19ZnVuY3Rpb24gZChhLGMsZCxoKXtpZighYS5tYXRjaHx8YS5tYXRjaChjKSlpZihofHxsKGEsYykpaWYoYS5wcm9wZXJ0aWVzT25seXx8KGQudmFsaWQ9ITApLGQuYWxsQXR0cmlidXRlc3x8KGQuYWxsQXR0cmlidXRlcz1iKGEuYXR0cmlidXRlcyxjLmF0dHJpYnV0ZXMsZC52YWxpZEF0dHJpYnV0ZXMpKSxkLmFsbFN0eWxlc3x8KGQuYWxsU3R5bGVzPWIoYS5zdHlsZXMsYy5zdHlsZXMsZC52YWxpZFN0eWxlcykpLCFkLmFsbENsYXNzZXMpe2E9YS5jbGFzc2VzO2M9Yy5jbGFzc2VzO2g9ZC52YWxpZENsYXNzZXM7aWYoYSlpZighMD09PWEpYT0hMDtlbHNle2Zvcih2YXIgcD0wLGY9Yy5sZW5ndGgsbjtwPGY7KytwKW49Y1twXSxoW25dfHxcbihoW25dPWEobikpO2E9ITF9ZWxzZSBhPSExO2QuYWxsQ2xhc3Nlcz1hfX1mdW5jdGlvbiBiKGEsYixjKXtpZighYSlyZXR1cm4hMTtpZighMD09PWEpcmV0dXJuITA7Zm9yKHZhciBkIGluIGIpY1tkXXx8KGNbZF09YShkKSk7cmV0dXJuITF9ZnVuY3Rpb24gYyhhLGIsYyl7aWYoIWEubWF0Y2h8fGEubWF0Y2goYikpe2lmKGEubm9Qcm9wZXJ0aWVzKXJldHVybiExO2MuaGFkSW52YWxpZEF0dHJpYnV0ZT1mKGEuYXR0cmlidXRlcyxiLmF0dHJpYnV0ZXMpfHxjLmhhZEludmFsaWRBdHRyaWJ1dGU7Yy5oYWRJbnZhbGlkU3R5bGU9ZihhLnN0eWxlcyxiLnN0eWxlcyl8fGMuaGFkSW52YWxpZFN0eWxlO2E9YS5jbGFzc2VzO2I9Yi5jbGFzc2VzO2lmKGEpe2Zvcih2YXIgZD0hMSxoPSEwPT09YSxwPWIubGVuZ3RoO3AtLTspaWYoaHx8YShiW3BdKSliLnNwbGljZShwLDEpLGQ9ITA7YT1kfWVsc2UgYT0hMTtjLmhhZEludmFsaWRDbGFzcz1hfHxjLmhhZEludmFsaWRDbGFzc319ZnVuY3Rpb24gZihhLFxuYil7aWYoIWEpcmV0dXJuITE7dmFyIGM9ITEsZD0hMD09PWEsaDtmb3IoaCBpbiBiKWlmKGR8fGEoaCkpZGVsZXRlIGJbaF0sYz0hMDtyZXR1cm4gY31mdW5jdGlvbiBnKGEsYixjKXtpZihhLmRpc2FibGVkfHxhLmN1c3RvbUNvbmZpZyYmIWN8fCFiKXJldHVybiExO2EuXy5jYWNoZWRDaGVja3M9e307cmV0dXJuITB9ZnVuY3Rpb24gayhhLGIpe2lmKCFhKXJldHVybiExO2lmKCEwPT09YSlyZXR1cm4gYTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSlyZXR1cm4gYT1ZKGEpLFwiKlwiPT1hPyEwOkNLRURJVE9SLnRvb2xzLmNvbnZlcnRBcnJheVRvT2JqZWN0KGEuc3BsaXQoYikpO2lmKENLRURJVE9SLnRvb2xzLmlzQXJyYXkoYSkpcmV0dXJuIGEubGVuZ3RoP0NLRURJVE9SLnRvb2xzLmNvbnZlcnRBcnJheVRvT2JqZWN0KGEpOiExO3ZhciBjPXt9LGQ9MCxoO2ZvcihoIGluIGEpY1toXT1hW2hdLGQrKztyZXR1cm4gZD9jOiExfWZ1bmN0aW9uIGwoYSxiKXtpZihhLm5vdGhpbmdSZXF1aXJlZClyZXR1cm4hMDtcbnZhciBjLGQsaCxwO2lmKGg9YS5yZXF1aXJlZENsYXNzZXMpZm9yKHA9Yi5jbGFzc2VzLGM9MDtjPGgubGVuZ3RoOysrYylpZihkPWhbY10sXCJzdHJpbmdcIj09dHlwZW9mIGQpe2lmKC0xPT1DS0VESVRPUi50b29scy5pbmRleE9mKHAsZCkpcmV0dXJuITF9ZWxzZSBpZighQ0tFRElUT1IudG9vbHMuY2hlY2tJZkFueUFycmF5SXRlbU1hdGNoZXMocCxkKSlyZXR1cm4hMTtyZXR1cm4gbShiLnN0eWxlcyxhLnJlcXVpcmVkU3R5bGVzKSYmbShiLmF0dHJpYnV0ZXMsYS5yZXF1aXJlZEF0dHJpYnV0ZXMpfWZ1bmN0aW9uIG0oYSxiKXtpZighYilyZXR1cm4hMDtmb3IodmFyIGM9MCxkO2M8Yi5sZW5ndGg7KytjKWlmKGQ9YltjXSxcInN0cmluZ1wiPT10eXBlb2YgZCl7aWYoIShkIGluIGEpKXJldHVybiExfWVsc2UgaWYoIUNLRURJVE9SLnRvb2xzLmNoZWNrSWZBbnlPYmplY3RQcm9wZXJ0eU1hdGNoZXMoYSxkKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiB1KGEpe2lmKCFhKXJldHVybnt9O1xuYT1hLnNwbGl0KC9cXHMqLFxccyovKS5zb3J0KCk7Zm9yKHZhciBiPXt9O2EubGVuZ3RoOyliW2Euc2hpZnQoKV09XCJja2UtdGVzdFwiO3JldHVybiBifWZ1bmN0aW9uIGUoYSl7dmFyIGIsYyxkLGgscD17fSxmPTE7Zm9yKGE9WShhKTtiPWEubWF0Y2goQik7KShjPWJbMl0pPyhkPUEoYyxcInN0eWxlc1wiKSxoPUEoYyxcImF0dHJzXCIpLGM9QShjLFwiY2xhc3Nlc1wiKSk6ZD1oPWM9bnVsbCxwW1wiJFwiK2YrK109e2VsZW1lbnRzOmJbMV0sY2xhc3NlczpjLHN0eWxlczpkLGF0dHJpYnV0ZXM6aH0sYT1hLnNsaWNlKGJbMF0ubGVuZ3RoKTtyZXR1cm4gcH1mdW5jdGlvbiBBKGEsYil7dmFyIGM9YS5tYXRjaChJW2JdKTtyZXR1cm4gYz9ZKGNbMV0pOm51bGx9ZnVuY3Rpb24gcihhKXt2YXIgYj1hLnN0eWxlQmFja3VwPWEuYXR0cmlidXRlcy5zdHlsZSxjPWEuY2xhc3NCYWNrdXA9YS5hdHRyaWJ1dGVzW1wiY2xhc3NcIl07YS5zdHlsZXN8fChhLnN0eWxlcz1DS0VESVRPUi50b29scy5wYXJzZUNzc1RleHQoYnx8XG5cIlwiLDEpKTthLmNsYXNzZXN8fChhLmNsYXNzZXM9Yz9jLnNwbGl0KC9cXHMrLyk6W10pfWZ1bmN0aW9uIHgoYSxiLGgsZil7dmFyIG49MCxlO2YudG9IdG1sJiYoYi5uYW1lPWIubmFtZS5yZXBsYWNlKEYsXCIkMVwiKSk7aWYoZi5kb0NhbGxiYWNrcyYmYS5lbGVtZW50Q2FsbGJhY2tzKXthOntlPWEuZWxlbWVudENhbGxiYWNrcztmb3IodmFyIGc9MCx2PWUubGVuZ3RoLHk7Zzx2OysrZylpZih5PWVbZ10oYikpe2U9eTticmVhayBhfWU9dm9pZCAwfWlmKGUpcmV0dXJuIGV9aWYoZi5kb1RyYW5zZm9ybSYmKGU9YS5fLnRyYW5zZm9ybWF0aW9uc1tiLm5hbWVdKSl7cihiKTtmb3IoZz0wO2c8ZS5sZW5ndGg7KytnKXAoYSxiLGVbZ10pO3EoYil9aWYoZi5kb0ZpbHRlcil7YTp7Zz1iLm5hbWU7dj1hLl87YT12LmFsbG93ZWRSdWxlcy5lbGVtZW50c1tnXTtlPXYuYWxsb3dlZFJ1bGVzLmdlbmVyaWM7Zz12LmRpc2FsbG93ZWRSdWxlcy5lbGVtZW50c1tnXTt2PXYuZGlzYWxsb3dlZFJ1bGVzLmdlbmVyaWM7XG55PWYuc2tpcFJlcXVpcmVkO3ZhciBrPXt2YWxpZDohMSx2YWxpZEF0dHJpYnV0ZXM6e30sdmFsaWRDbGFzc2VzOnt9LHZhbGlkU3R5bGVzOnt9LGFsbEF0dHJpYnV0ZXM6ITEsYWxsQ2xhc3NlczohMSxhbGxTdHlsZXM6ITEsaGFkSW52YWxpZEF0dHJpYnV0ZTohMSxoYWRJbnZhbGlkQ2xhc3M6ITEsaGFkSW52YWxpZFN0eWxlOiExfSxCLHo7aWYoYXx8ZSl7cihiKTtpZihnKWZvcihCPTAsej1nLmxlbmd0aDtCPHo7KytCKWlmKCExPT09YyhnW0JdLGIsaykpe2E9bnVsbDticmVhayBhfWlmKHYpZm9yKEI9MCx6PXYubGVuZ3RoO0I8ejsrK0IpYyh2W0JdLGIsayk7aWYoYSlmb3IoQj0wLHo9YS5sZW5ndGg7Qjx6OysrQilkKGFbQl0sYixrLHkpO2lmKGUpZm9yKEI9MCx6PWUubGVuZ3RoO0I8ejsrK0IpZChlW0JdLGIsayx5KTthPWt9ZWxzZSBhPW51bGx9aWYoIWF8fCFhLnZhbGlkKXJldHVybiBoLnB1c2goYiksMTt6PWEudmFsaWRBdHRyaWJ1dGVzO3ZhciBFPWEudmFsaWRTdHlsZXM7XG5lPWEudmFsaWRDbGFzc2VzO3ZhciBnPWIuYXR0cmlidXRlcyxKPWIuc3R5bGVzLHY9Yi5jbGFzc2VzO3k9Yi5jbGFzc0JhY2t1cDt2YXIgbD1iLnN0eWxlQmFja3VwLEcsSSxDPVtdLGs9W10sbT0vXmRhdGEtY2tlLS87Qj0hMTtkZWxldGUgZy5zdHlsZTtkZWxldGUgZ1tcImNsYXNzXCJdO2RlbGV0ZSBiLmNsYXNzQmFja3VwO2RlbGV0ZSBiLnN0eWxlQmFja3VwO2lmKCFhLmFsbEF0dHJpYnV0ZXMpZm9yKEcgaW4gZyl6W0ddfHwobS50ZXN0KEcpP0c9PShJPUcucmVwbGFjZSgvXmRhdGEtY2tlLXNhdmVkLS8sXCJcIikpfHx6W0ldfHwoZGVsZXRlIGdbR10sQj0hMCk6KGRlbGV0ZSBnW0ddLEI9ITApKTtpZighYS5hbGxTdHlsZXN8fGEuaGFkSW52YWxpZFN0eWxlKXtmb3IoRyBpbiBKKWEuYWxsU3R5bGVzfHxFW0ddP0MucHVzaChHK1wiOlwiK0pbR10pOkI9ITA7Qy5sZW5ndGgmJihnLnN0eWxlPUMuc29ydCgpLmpvaW4oXCI7IFwiKSl9ZWxzZSBsJiYoZy5zdHlsZT1sKTtpZighYS5hbGxDbGFzc2VzfHxcbmEuaGFkSW52YWxpZENsYXNzKXtmb3IoRz0wO0c8di5sZW5ndGg7KytHKShhLmFsbENsYXNzZXN8fGVbdltHXV0pJiZrLnB1c2godltHXSk7ay5sZW5ndGgmJihnW1wiY2xhc3NcIl09ay5zb3J0KCkuam9pbihcIiBcIikpO3kmJmsubGVuZ3RoPHkuc3BsaXQoL1xccysvKS5sZW5ndGgmJihCPSEwKX1lbHNlIHkmJihnW1wiY2xhc3NcIl09eSk7QiYmKG49MSk7aWYoIWYuc2tpcEZpbmFsVmFsaWRhdGlvbiYmIXcoYikpcmV0dXJuIGgucHVzaChiKSwxfWYudG9IdG1sJiYoYi5uYW1lPWIubmFtZS5yZXBsYWNlKEssXCJja2U6JDFcIikpO3JldHVybiBufWZ1bmN0aW9uIEQoYSl7dmFyIGI9W10sYztmb3IoYyBpbiBhKS0xPGMuaW5kZXhPZihcIipcIikmJmIucHVzaChjLnJlcGxhY2UoL1xcKi9nLFwiLipcIikpO3JldHVybiBiLmxlbmd0aD9uZXcgUmVnRXhwKFwiXig/OlwiK2Iuam9pbihcInxcIikrXCIpJFwiKTpudWxsfWZ1bmN0aW9uIHEoYSl7dmFyIGI9YS5hdHRyaWJ1dGVzLGM7ZGVsZXRlIGIuc3R5bGU7ZGVsZXRlIGJbXCJjbGFzc1wiXTtcbmlmKGM9Q0tFRElUT1IudG9vbHMud3JpdGVDc3NUZXh0KGEuc3R5bGVzLCEwKSliLnN0eWxlPWM7YS5jbGFzc2VzLmxlbmd0aCYmKGJbXCJjbGFzc1wiXT1hLmNsYXNzZXMuc29ydCgpLmpvaW4oXCIgXCIpKX1mdW5jdGlvbiB3KGEpe3N3aXRjaChhLm5hbWUpe2Nhc2UgXCJhXCI6aWYoIShhLmNoaWxkcmVuLmxlbmd0aHx8YS5hdHRyaWJ1dGVzLm5hbWV8fGEuYXR0cmlidXRlcy5pZCkpcmV0dXJuITE7YnJlYWs7Y2FzZSBcImltZ1wiOmlmKCFhLmF0dHJpYnV0ZXMuc3JjKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIEgoYSl7aWYoIWEpcmV0dXJuITE7aWYoITA9PT1hKXJldHVybiEwO3ZhciBiPUQoYSk7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBjIGluIGF8fGImJmMubWF0Y2goYil9fWZ1bmN0aW9uIHQoKXtyZXR1cm4gbmV3IENLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudChcImJyXCIpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoXCJiclwiPT1cbmEubmFtZXx8RS4kYmxvY2tbYS5uYW1lXSl9ZnVuY3Rpb24gaChhLGIsYyl7dmFyIGQ9YS5uYW1lO2lmKEUuJGVtcHR5W2RdfHwhYS5jaGlsZHJlbi5sZW5ndGgpXCJoclwiPT1kJiZcImJyXCI9PWI/YS5yZXBsYWNlV2l0aCh0KCkpOihhLnBhcmVudCYmYy5wdXNoKHtjaGVjazpcIml0XCIsZWw6YS5wYXJlbnR9KSxhLnJlbW92ZSgpKTtlbHNlIGlmKEUuJGJsb2NrW2RdfHxcInRyXCI9PWQpaWYoXCJiclwiPT1iKWEucHJldmlvdXMmJiF2KGEucHJldmlvdXMpJiYoYj10KCksYi5pbnNlcnRCZWZvcmUoYSkpLGEubmV4dCYmIXYoYS5uZXh0KSYmKGI9dCgpLGIuaW5zZXJ0QWZ0ZXIoYSkpLGEucmVwbGFjZVdpdGhDaGlsZHJlbigpO2Vsc2V7dmFyIGQ9YS5jaGlsZHJlbixoO2I6e2g9RVtiXTtmb3IodmFyIHA9MCxmPWQubGVuZ3RoLG47cDxmOysrcClpZihuPWRbcF0sbi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJiFoW24ubmFtZV0pe2g9ITE7YnJlYWsgYn1oPSEwfWlmKGgpYS5uYW1lPWIsYS5hdHRyaWJ1dGVzPVxue30sYy5wdXNoKHtjaGVjazpcInBhcmVudC1kb3duXCIsZWw6YX0pO2Vsc2V7aD1hLnBhcmVudDtmb3IodmFyIHA9aC50eXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UfHxcImJvZHlcIj09aC5uYW1lLGUsZyxmPWQubGVuZ3RoOzA8Zjspbj1kWy0tZl0scCYmKG4udHlwZT09Q0tFRElUT1IuTk9ERV9URVhUfHxuLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmRS4kaW5saW5lW24ubmFtZV0pPyhlfHwoZT1uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50KGIpLGUuaW5zZXJ0QWZ0ZXIoYSksYy5wdXNoKHtjaGVjazpcInBhcmVudC1kb3duXCIsZWw6ZX0pKSxlLmFkZChuLDApKTooZT1udWxsLGc9RVtoLm5hbWVdfHxFLnNwYW4sbi5pbnNlcnRBZnRlcihhKSxoLnR5cGU9PUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlR8fG4udHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHxnW24ubmFtZV18fGMucHVzaCh7Y2hlY2s6XCJlbC11cFwiLGVsOm59KSk7YS5yZW1vdmUoKX19ZWxzZSBkIGluXG57c3R5bGU6MSxzY3JpcHQ6MX0/YS5yZW1vdmUoKTooYS5wYXJlbnQmJmMucHVzaCh7Y2hlY2s6XCJpdFwiLGVsOmEucGFyZW50fSksYS5yZXBsYWNlV2l0aENoaWxkcmVuKCkpfWZ1bmN0aW9uIHAoYSxiLGMpe3ZhciBkLGg7Zm9yKGQ9MDtkPGMubGVuZ3RoOysrZClpZihoPWNbZF0sIShoLmNoZWNrJiYhYS5jaGVjayhoLmNoZWNrLCExKXx8aC5sZWZ0JiYhaC5sZWZ0KGIpKSl7aC5yaWdodChiLEcpO2JyZWFrfX1mdW5jdGlvbiBuKGEsYil7dmFyIGM9Yi5nZXREZWZpbml0aW9uKCksZD1jLmF0dHJpYnV0ZXMsaD1jLnN0eWxlcyxwLGYsbixlO2lmKGEubmFtZSE9Yy5lbGVtZW50KXJldHVybiExO2ZvcihwIGluIGQpaWYoXCJjbGFzc1wiPT1wKWZvcihjPWRbcF0uc3BsaXQoL1xccysvKSxuPWEuY2xhc3Nlcy5qb2luKFwifFwiKTtlPWMucG9wKCk7KXtpZigtMT09bi5pbmRleE9mKGUpKXJldHVybiExfWVsc2UgaWYoYS5hdHRyaWJ1dGVzW3BdIT1kW3BdKXJldHVybiExO2ZvcihmIGluIGgpaWYoYS5zdHlsZXNbZl0hPVxuaFtmXSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiB5KGEsYil7dmFyIGMsZDtcInN0cmluZ1wiPT10eXBlb2YgYT9jPWE6YSBpbnN0YW5jZW9mIENLRURJVE9SLnN0eWxlP2Q9YTooYz1hWzBdLGQ9YVsxXSk7cmV0dXJuW3tlbGVtZW50OmMsbGVmdDpkLHJpZ2h0OmZ1bmN0aW9uKGEsYyl7Yy50cmFuc2Zvcm0oYSxiKX19XX1mdW5jdGlvbiB6KGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gbihiLGEpfX1mdW5jdGlvbiBKKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2NbYV0oYil9fXZhciBFPUNLRURJVE9SLmR0ZCxDPUNLRURJVE9SLnRvb2xzLmNvcHksWT1DS0VESVRPUi50b29scy50cmltLFA9W1wiXCIsXCJwXCIsXCJiclwiLFwiZGl2XCJdO0NLRURJVE9SLkZJTFRFUl9TS0lQX1RSRUU9MjtDS0VESVRPUi5maWx0ZXI9ZnVuY3Rpb24oYSl7dGhpcy5hbGxvd2VkQ29udGVudD1bXTt0aGlzLmRpc2FsbG93ZWRDb250ZW50PVtdO3RoaXMuZWxlbWVudENhbGxiYWNrcz1udWxsO3RoaXMuZGlzYWJsZWQ9XG4hMTt0aGlzLmVkaXRvcj1udWxsO3RoaXMuaWQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dE51bWJlcigpO3RoaXMuXz17YWxsb3dlZFJ1bGVzOntlbGVtZW50czp7fSxnZW5lcmljOltdfSxkaXNhbGxvd2VkUnVsZXM6e2VsZW1lbnRzOnt9LGdlbmVyaWM6W119LHRyYW5zZm9ybWF0aW9uczp7fSxjYWNoZWRUZXN0czp7fX07Q0tFRElUT1IuZmlsdGVyLmluc3RhbmNlc1t0aGlzLmlkXT10aGlzO2lmKGEgaW5zdGFuY2VvZiBDS0VESVRPUi5lZGl0b3Ipe2E9dGhpcy5lZGl0b3I9YTt0aGlzLmN1c3RvbUNvbmZpZz0hMDt2YXIgYj1hLmNvbmZpZy5hbGxvd2VkQ29udGVudDshMD09PWI/dGhpcy5kaXNhYmxlZD0hMDooYnx8KHRoaXMuY3VzdG9tQ29uZmlnPSExKSx0aGlzLmFsbG93KGIsXCJjb25maWdcIiwxKSx0aGlzLmFsbG93KGEuY29uZmlnLmV4dHJhQWxsb3dlZENvbnRlbnQsXCJleHRyYVwiLDEpLHRoaXMuYWxsb3coUFthLmVudGVyTW9kZV0rXCIgXCIrUFthLnNoaWZ0RW50ZXJNb2RlXSxcImRlZmF1bHRcIixcbjEpLHRoaXMuZGlzYWxsb3coYS5jb25maWcuZGlzYWxsb3dlZENvbnRlbnQpKX1lbHNlIHRoaXMuY3VzdG9tQ29uZmlnPSExLHRoaXMuYWxsb3coYSxcImRlZmF1bHRcIiwxKX07Q0tFRElUT1IuZmlsdGVyLmluc3RhbmNlcz17fTtDS0VESVRPUi5maWx0ZXIucHJvdG90eXBlPXthbGxvdzpmdW5jdGlvbihiLGMsZCl7aWYoIWcodGhpcyxiLGQpKXJldHVybiExO3ZhciBoLHA7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpYj1lKGIpO2Vsc2UgaWYoYiBpbnN0YW5jZW9mIENLRURJVE9SLnN0eWxlKXtpZihiLnRvQWxsb3dlZENvbnRlbnRSdWxlcylyZXR1cm4gdGhpcy5hbGxvdyhiLnRvQWxsb3dlZENvbnRlbnRSdWxlcyh0aGlzLmVkaXRvciksYyxkKTtoPWIuZ2V0RGVmaW5pdGlvbigpO2I9e307ZD1oLmF0dHJpYnV0ZXM7YltoLmVsZW1lbnRdPWg9e3N0eWxlczpoLnN0eWxlcyxyZXF1aXJlZFN0eWxlczpoLnN0eWxlcyYmQ0tFRElUT1IudG9vbHMub2JqZWN0S2V5cyhoLnN0eWxlcyl9O2QmJihkPVxuQyhkKSxoLmNsYXNzZXM9ZFtcImNsYXNzXCJdP2RbXCJjbGFzc1wiXS5zcGxpdCgvXFxzKy8pOm51bGwsaC5yZXF1aXJlZENsYXNzZXM9aC5jbGFzc2VzLGRlbGV0ZSBkW1wiY2xhc3NcIl0saC5hdHRyaWJ1dGVzPWQsaC5yZXF1aXJlZEF0dHJpYnV0ZXM9ZCYmQ0tFRElUT1IudG9vbHMub2JqZWN0S2V5cyhkKSl9ZWxzZSBpZihDS0VESVRPUi50b29scy5pc0FycmF5KGIpKXtmb3IoaD0wO2g8Yi5sZW5ndGg7KytoKXA9dGhpcy5hbGxvdyhiW2hdLGMsZCk7cmV0dXJuIHB9YSh0aGlzLGIsYyx0aGlzLmFsbG93ZWRDb250ZW50LHRoaXMuXy5hbGxvd2VkUnVsZXMpO3JldHVybiEwfSxhcHBseVRvOmZ1bmN0aW9uKGEsYixjLGQpe2lmKHRoaXMuZGlzYWJsZWQpcmV0dXJuITE7dmFyIHA9dGhpcyxmPVtdLG49dGhpcy5lZGl0b3ImJnRoaXMuZWRpdG9yLmNvbmZpZy5wcm90ZWN0ZWRTb3VyY2UsZSxnPSExLEY9e2RvRmlsdGVyOiFjLGRvVHJhbnNmb3JtOiEwLGRvQ2FsbGJhY2tzOiEwLHRvSHRtbDpifTtcbmEuZm9yRWFjaChmdW5jdGlvbihhKXtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCl7aWYoXCJvZmZcIj09YS5hdHRyaWJ1dGVzW1wiZGF0YS1ja2UtZmlsdGVyXCJdKXJldHVybiExO2lmKCFifHxcInNwYW5cIiE9YS5uYW1lfHwhfkNLRURJVE9SLnRvb2xzLm9iamVjdEtleXMoYS5hdHRyaWJ1dGVzKS5qb2luKFwifFwiKS5pbmRleE9mKFwiZGF0YS1ja2UtXCIpKWlmKGU9eChwLGEsZixGKSxlJjEpZz0hMDtlbHNlIGlmKGUmMilyZXR1cm4hMX1lbHNlIGlmKGEudHlwZT09Q0tFRElUT1IuTk9ERV9DT01NRU5UJiZhLnZhbHVlLm1hdGNoKC9eXFx7Y2tlX3Byb3RlY3RlZFxcfSg/IVxce0NcXH0pLykpe3ZhciBjO2E6e3ZhciBkPWRlY29kZVVSSUNvbXBvbmVudChhLnZhbHVlLnJlcGxhY2UoL15cXHtja2VfcHJvdGVjdGVkXFx9LyxcIlwiKSk7Yz1bXTt2YXIgaCx2LHk7aWYobilmb3Iodj0wO3Y8bi5sZW5ndGg7Kyt2KWlmKCh5PWQubWF0Y2goblt2XSkpJiZ5WzBdLmxlbmd0aD09ZC5sZW5ndGgpe2M9ITA7XG5icmVhayBhfWQ9Q0tFRElUT1IuaHRtbFBhcnNlci5mcmFnbWVudC5mcm9tSHRtbChkKTsxPT1kLmNoaWxkcmVuLmxlbmd0aCYmKGg9ZC5jaGlsZHJlblswXSkudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZ4KHAsaCxjLEYpO2M9IWMubGVuZ3RofWN8fGYucHVzaChhKX19LG51bGwsITApO2YubGVuZ3RoJiYoZz0hMCk7dmFyIHY7YT1bXTtkPVBbZHx8KHRoaXMuZWRpdG9yP3RoaXMuZWRpdG9yLmVudGVyTW9kZTpDS0VESVRPUi5FTlRFUl9QKV07Zm9yKHZhciB5O2M9Zi5wb3AoKTspYy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/aChjLGQsYSk6Yy5yZW1vdmUoKTtmb3IoO3Y9YS5wb3AoKTspaWYoYz12LmVsLGMucGFyZW50KXN3aXRjaCh5PUVbYy5wYXJlbnQubmFtZV18fEUuc3Bhbix2LmNoZWNrKXtjYXNlIFwiaXRcIjpFLiRyZW1vdmVFbXB0eVtjLm5hbWVdJiYhYy5jaGlsZHJlbi5sZW5ndGg/aChjLGQsYSk6dyhjKXx8aChjLGQsYSk7YnJlYWs7Y2FzZSBcImVsLXVwXCI6Yy5wYXJlbnQudHlwZT09XG5DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UfHx5W2MubmFtZV18fGgoYyxkLGEpO2JyZWFrO2Nhc2UgXCJwYXJlbnQtZG93blwiOmMucGFyZW50LnR5cGU9PUNLRURJVE9SLk5PREVfRE9DVU1FTlRfRlJBR01FTlR8fHlbYy5uYW1lXXx8aChjLnBhcmVudCxkLGEpfXJldHVybiBnfSxjaGVja0ZlYXR1cmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5kaXNhYmxlZHx8IWEpcmV0dXJuITA7YS50b0ZlYXR1cmUmJihhPWEudG9GZWF0dXJlKHRoaXMuZWRpdG9yKSk7cmV0dXJuIWEucmVxdWlyZWRDb250ZW50fHx0aGlzLmNoZWNrKGEucmVxdWlyZWRDb250ZW50KX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9ITB9LGRpc2FsbG93OmZ1bmN0aW9uKGIpe2lmKCFnKHRoaXMsYiwhMCkpcmV0dXJuITE7XCJzdHJpbmdcIj09dHlwZW9mIGImJihiPWUoYikpO2EodGhpcyxiLG51bGwsdGhpcy5kaXNhbGxvd2VkQ29udGVudCx0aGlzLl8uZGlzYWxsb3dlZFJ1bGVzKTtyZXR1cm4hMH0sXG5hZGRDb250ZW50Rm9ybXM6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuZGlzYWJsZWQmJmEpe3ZhciBiLGMsZD1bXSxoO2ZvcihiPTA7YjxhLmxlbmd0aCYmIWg7KytiKWM9YVtiXSwoXCJzdHJpbmdcIj09dHlwZW9mIGN8fGMgaW5zdGFuY2VvZiBDS0VESVRPUi5zdHlsZSkmJnRoaXMuY2hlY2soYykmJihoPWMpO2lmKGgpe2ZvcihiPTA7YjxhLmxlbmd0aDsrK2IpZC5wdXNoKHkoYVtiXSxoKSk7dGhpcy5hZGRUcmFuc2Zvcm1hdGlvbnMoZCl9fX0sYWRkRWxlbWVudENhbGxiYWNrOmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudENhbGxiYWNrc3x8KHRoaXMuZWxlbWVudENhbGxiYWNrcz1bXSk7dGhpcy5lbGVtZW50Q2FsbGJhY2tzLnB1c2goYSl9LGFkZEZlYXR1cmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5kaXNhYmxlZHx8IWEpcmV0dXJuITA7YS50b0ZlYXR1cmUmJihhPWEudG9GZWF0dXJlKHRoaXMuZWRpdG9yKSk7dGhpcy5hbGxvdyhhLmFsbG93ZWRDb250ZW50LGEubmFtZSk7dGhpcy5hZGRUcmFuc2Zvcm1hdGlvbnMoYS5jb250ZW50VHJhbnNmb3JtYXRpb25zKTtcbnRoaXMuYWRkQ29udGVudEZvcm1zKGEuY29udGVudEZvcm1zKTtyZXR1cm4gYS5yZXF1aXJlZENvbnRlbnQmJih0aGlzLmN1c3RvbUNvbmZpZ3x8dGhpcy5kaXNhbGxvd2VkQ29udGVudC5sZW5ndGgpP3RoaXMuY2hlY2soYS5yZXF1aXJlZENvbnRlbnQpOiEwfSxhZGRUcmFuc2Zvcm1hdGlvbnM6ZnVuY3Rpb24oYSl7dmFyIGIsYztpZighdGhpcy5kaXNhYmxlZCYmYSl7dmFyIGQ9dGhpcy5fLnRyYW5zZm9ybWF0aW9ucyxoO2ZvcihoPTA7aDxhLmxlbmd0aDsrK2gpe2I9YVtoXTt2YXIgcD12b2lkIDAsZj12b2lkIDAsbj12b2lkIDAsZT12b2lkIDAsZz12b2lkIDAsdj12b2lkIDA7Yz1bXTtmb3IoZj0wO2Y8Yi5sZW5ndGg7KytmKW49YltmXSxcInN0cmluZ1wiPT10eXBlb2Ygbj8obj1uLnNwbGl0KC9cXHMqOlxccyovKSxlPW5bMF0sZz1udWxsLHY9blsxXSk6KGU9bi5jaGVjayxnPW4ubGVmdCx2PW4ucmlnaHQpLHB8fChwPW4scD1wLmVsZW1lbnQ/cC5lbGVtZW50OmU/ZS5tYXRjaCgvXihbYS16MC05XSspL2kpWzBdOlxucC5sZWZ0LmdldERlZmluaXRpb24oKS5lbGVtZW50KSxnIGluc3RhbmNlb2YgQ0tFRElUT1Iuc3R5bGUmJihnPXooZykpLGMucHVzaCh7Y2hlY2s6ZT09cD9udWxsOmUsbGVmdDpnLHJpZ2h0Olwic3RyaW5nXCI9PXR5cGVvZiB2P0oodik6dn0pO2I9cDtkW2JdfHwoZFtiXT1bXSk7ZFtiXS5wdXNoKGMpfX19LGNoZWNrOmZ1bmN0aW9uKGEsYixjKXtpZih0aGlzLmRpc2FibGVkKXJldHVybiEwO2lmKENLRURJVE9SLnRvb2xzLmlzQXJyYXkoYSkpe2Zvcih2YXIgZD1hLmxlbmd0aDtkLS07KWlmKHRoaXMuY2hlY2soYVtkXSxiLGMpKXJldHVybiEwO3JldHVybiExfXZhciBoLGY7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe2Y9YStcIlxceDNjXCIrKCExPT09Yj9cIjBcIjpcIjFcIikrKGM/XCIxXCI6XCIwXCIpK1wiXFx4M2VcIjtpZihmIGluIHRoaXMuXy5jYWNoZWRDaGVja3MpcmV0dXJuIHRoaXMuXy5jYWNoZWRDaGVja3NbZl07ZD1lKGEpLiQxO2g9ZC5zdHlsZXM7dmFyIG49ZC5jbGFzc2VzO2QubmFtZT1kLmVsZW1lbnRzO1xuZC5jbGFzc2VzPW49bj9uLnNwbGl0KC9cXHMqLFxccyovKTpbXTtkLnN0eWxlcz11KGgpO2QuYXR0cmlidXRlcz11KGQuYXR0cmlidXRlcyk7ZC5jaGlsZHJlbj1bXTtuLmxlbmd0aCYmKGQuYXR0cmlidXRlc1tcImNsYXNzXCJdPW4uam9pbihcIiBcIikpO2gmJihkLmF0dHJpYnV0ZXMuc3R5bGU9Q0tFRElUT1IudG9vbHMud3JpdGVDc3NUZXh0KGQuc3R5bGVzKSk7aD1kfWVsc2UgZD1hLmdldERlZmluaXRpb24oKSxoPWQuc3R5bGVzLG49ZC5hdHRyaWJ1dGVzfHx7fSxoJiYhQ0tFRElUT1IudG9vbHMuaXNFbXB0eShoKT8oaD1DKGgpLG4uc3R5bGU9Q0tFRElUT1IudG9vbHMud3JpdGVDc3NUZXh0KGgsITApKTpoPXt9LGg9e25hbWU6ZC5lbGVtZW50LGF0dHJpYnV0ZXM6bixjbGFzc2VzOm5bXCJjbGFzc1wiXT9uW1wiY2xhc3NcIl0uc3BsaXQoL1xccysvKTpbXSxzdHlsZXM6aCxjaGlsZHJlbjpbXX07dmFyIG49Q0tFRElUT1IudG9vbHMuY2xvbmUoaCksZz1bXSx2O2lmKCExIT09YiYmKHY9dGhpcy5fLnRyYW5zZm9ybWF0aW9uc1toLm5hbWVdKSl7Zm9yKGQ9XG4wO2Q8di5sZW5ndGg7KytkKXAodGhpcyxoLHZbZF0pO3EoaCl9eCh0aGlzLG4sZyx7ZG9GaWx0ZXI6ITAsZG9UcmFuc2Zvcm06ITEhPT1iLHNraXBSZXF1aXJlZDohYyxza2lwRmluYWxWYWxpZGF0aW9uOiFjfSk7Yj0wPGcubGVuZ3RoPyExOkNLRURJVE9SLnRvb2xzLm9iamVjdENvbXBhcmUoaC5hdHRyaWJ1dGVzLG4uYXR0cmlidXRlcywhMCk/ITA6ITE7XCJzdHJpbmdcIj09dHlwZW9mIGEmJih0aGlzLl8uY2FjaGVkQ2hlY2tzW2ZdPWIpO3JldHVybiBifSxnZXRBbGxvd2VkRW50ZXJNb2RlOmZ1bmN0aW9uKCl7dmFyIGE9W1wicFwiLFwiZGl2XCIsXCJiclwiXSxiPXtwOkNLRURJVE9SLkVOVEVSX1AsZGl2OkNLRURJVE9SLkVOVEVSX0RJVixicjpDS0VESVRPUi5FTlRFUl9CUn07cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGg9YS5zbGljZSgpLHA7aWYodGhpcy5jaGVjayhQW2NdKSlyZXR1cm4gYztmb3IoZHx8KGg9aC5yZXZlcnNlKCkpO3A9aC5wb3AoKTspaWYodGhpcy5jaGVjayhwKSlyZXR1cm4gYltwXTtcbnJldHVybiBDS0VESVRPUi5FTlRFUl9CUn19KCksZGVzdHJveTpmdW5jdGlvbigpe2RlbGV0ZSBDS0VESVRPUi5maWx0ZXIuaW5zdGFuY2VzW3RoaXMuaWRdO2RlbGV0ZSB0aGlzLl87ZGVsZXRlIHRoaXMuYWxsb3dlZENvbnRlbnQ7ZGVsZXRlIHRoaXMuZGlzYWxsb3dlZENvbnRlbnR9fTt2YXIgTz17c3R5bGVzOjEsYXR0cmlidXRlczoxLGNsYXNzZXM6MX0sTj17c3R5bGVzOlwicmVxdWlyZWRTdHlsZXNcIixhdHRyaWJ1dGVzOlwicmVxdWlyZWRBdHRyaWJ1dGVzXCIsY2xhc3NlczpcInJlcXVpcmVkQ2xhc3Nlc1wifSxCPS9eKFthLXowLTlcXC0qXFxzXSspKCg/OlxccypcXHtbIVxcd1xcLSxcXHNcXCpdK1xcfVxccyp8XFxzKlxcW1shXFx3XFwtLFxcc1xcKl0rXFxdXFxzKnxcXHMqXFwoWyFcXHdcXC0sXFxzXFwqXStcXClcXHMqKXswLDN9KSg/OjtcXHMqfCQpL2ksST17c3R5bGVzOi97KFtefV0rKX0vLGF0dHJzOi9cXFsoW15cXF1dKylcXF0vLGNsYXNzZXM6L1xcKChbXlxcKV0rKVxcKS99LEY9L15ja2U6KG9iamVjdHxlbWJlZHxwYXJhbSkkLyxcbks9L14ob2JqZWN0fGVtYmVkfHBhcmFtKSQvLEc7Rz1DS0VESVRPUi5maWx0ZXIudHJhbnNmb3JtYXRpb25zVG9vbHM9e3NpemVUb1N0eWxlOmZ1bmN0aW9uKGEpe3RoaXMubGVuZ3RoVG9TdHlsZShhLFwid2lkdGhcIik7dGhpcy5sZW5ndGhUb1N0eWxlKGEsXCJoZWlnaHRcIil9LHNpemVUb0F0dHJpYnV0ZTpmdW5jdGlvbihhKXt0aGlzLmxlbmd0aFRvQXR0cmlidXRlKGEsXCJ3aWR0aFwiKTt0aGlzLmxlbmd0aFRvQXR0cmlidXRlKGEsXCJoZWlnaHRcIil9LGxlbmd0aFRvU3R5bGU6ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8YjtpZighKGMgaW4gYS5zdHlsZXMpKXt2YXIgZD1hLmF0dHJpYnV0ZXNbYl07ZCYmKC9eXFxkKyQvLnRlc3QoZCkmJihkKz1cInB4XCIpLGEuc3R5bGVzW2NdPWQpfWRlbGV0ZSBhLmF0dHJpYnV0ZXNbYl19LGxlbmd0aFRvQXR0cmlidXRlOmZ1bmN0aW9uKGEsYixjKXtjPWN8fGI7aWYoIShjIGluIGEuYXR0cmlidXRlcykpe3ZhciBkPWEuc3R5bGVzW2JdLGg9ZCYmZC5tYXRjaCgvXihcXGQrKSg/OlxcLlxcZCopP3B4JC8pO1xuaD9hLmF0dHJpYnV0ZXNbY109aFsxXTpcImNrZS10ZXN0XCI9PWQmJihhLmF0dHJpYnV0ZXNbY109XCJja2UtdGVzdFwiKX1kZWxldGUgYS5zdHlsZXNbYl19LGFsaWdubWVudFRvU3R5bGU6ZnVuY3Rpb24oYSl7aWYoIShcImZsb2F0XCJpbiBhLnN0eWxlcykpe3ZhciBiPWEuYXR0cmlidXRlcy5hbGlnbjtpZihcImxlZnRcIj09Ynx8XCJyaWdodFwiPT1iKWEuc3R5bGVzW1wiZmxvYXRcIl09Yn1kZWxldGUgYS5hdHRyaWJ1dGVzLmFsaWdufSxhbGlnbm1lbnRUb0F0dHJpYnV0ZTpmdW5jdGlvbihhKXtpZighKFwiYWxpZ25cImluIGEuYXR0cmlidXRlcykpe3ZhciBiPWEuc3R5bGVzW1wiZmxvYXRcIl07aWYoXCJsZWZ0XCI9PWJ8fFwicmlnaHRcIj09YilhLmF0dHJpYnV0ZXMuYWxpZ249Yn1kZWxldGUgYS5zdHlsZXNbXCJmbG9hdFwiXX0sbWF0Y2hlc1N0eWxlOm4sdHJhbnNmb3JtOmZ1bmN0aW9uKGEsYil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpYS5uYW1lPWI7ZWxzZXt2YXIgYz1iLmdldERlZmluaXRpb24oKSxkPWMuc3R5bGVzLFxuaD1jLmF0dHJpYnV0ZXMscCxuLGYsZTthLm5hbWU9Yy5lbGVtZW50O2ZvcihwIGluIGgpaWYoXCJjbGFzc1wiPT1wKWZvcihjPWEuY2xhc3Nlcy5qb2luKFwifFwiKSxmPWhbcF0uc3BsaXQoL1xccysvKTtlPWYucG9wKCk7KS0xPT1jLmluZGV4T2YoZSkmJmEuY2xhc3Nlcy5wdXNoKGUpO2Vsc2UgYS5hdHRyaWJ1dGVzW3BdPWhbcF07Zm9yKG4gaW4gZClhLnN0eWxlc1tuXT1kW25dfX19fSkoKTtcbihmdW5jdGlvbigpe0NLRURJVE9SLmZvY3VzTWFuYWdlcj1mdW5jdGlvbihhKXtpZihhLmZvY3VzTWFuYWdlcilyZXR1cm4gYS5mb2N1c01hbmFnZXI7dGhpcy5oYXNGb2N1cz0hMTt0aGlzLmN1cnJlbnRBY3RpdmU9bnVsbDt0aGlzLl89e2VkaXRvcjphfTtyZXR1cm4gdGhpc307Q0tFRElUT1IuZm9jdXNNYW5hZ2VyLl89e2JsdXJEZWxheToyMDB9O0NLRURJVE9SLmZvY3VzTWFuYWdlci5wcm90b3R5cGU9e2ZvY3VzOmZ1bmN0aW9uKGEpe3RoaXMuXy50aW1lciYmY2xlYXJUaW1lb3V0KHRoaXMuXy50aW1lcik7YSYmKHRoaXMuY3VycmVudEFjdGl2ZT1hKTt0aGlzLmhhc0ZvY3VzfHx0aGlzLl8ubG9ja2VkfHwoKGE9Q0tFRElUT1IuY3VycmVudEluc3RhbmNlKSYmYS5mb2N1c01hbmFnZXIuYmx1cigxKSx0aGlzLmhhc0ZvY3VzPSEwLChhPXRoaXMuXy5lZGl0b3IuY29udGFpbmVyKSYmYS5hZGRDbGFzcyhcImNrZV9mb2N1c1wiKSx0aGlzLl8uZWRpdG9yLmZpcmUoXCJmb2N1c1wiKSl9LGxvY2s6ZnVuY3Rpb24oKXt0aGlzLl8ubG9ja2VkPVxuMX0sdW5sb2NrOmZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuXy5sb2NrZWR9LGJsdXI6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZCgpe2lmKHRoaXMuaGFzRm9jdXMpe3RoaXMuaGFzRm9jdXM9ITE7dmFyIGE9dGhpcy5fLmVkaXRvci5jb250YWluZXI7YSYmYS5yZW1vdmVDbGFzcyhcImNrZV9mb2N1c1wiKTt0aGlzLl8uZWRpdG9yLmZpcmUoXCJibHVyXCIpfX1pZighdGhpcy5fLmxvY2tlZCl7dGhpcy5fLnRpbWVyJiZjbGVhclRpbWVvdXQodGhpcy5fLnRpbWVyKTt2YXIgYj1DS0VESVRPUi5mb2N1c01hbmFnZXIuXy5ibHVyRGVsYXk7YXx8IWI/ZC5jYWxsKHRoaXMpOnRoaXMuXy50aW1lcj1DS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuXy50aW1lcjtkLmNhbGwodGhpcyl9LGIsdGhpcyl9fSxhZGQ6ZnVuY3Rpb24oYSxkKXt2YXIgYj1hLmdldEN1c3RvbURhdGEoXCJmb2N1c21hbmFnZXJcIik7aWYoIWJ8fGIhPXRoaXMpe2ImJmIucmVtb3ZlKGEpO3ZhciBiPVxuXCJmb2N1c1wiLGM9XCJibHVyXCI7ZCYmKENLRURJVE9SLmVudi5pZT8oYj1cImZvY3VzaW5cIixjPVwiZm9jdXNvdXRcIik6Q0tFRElUT1IuZXZlbnQudXNlQ2FwdHVyZT0xKTt2YXIgZj17Ymx1cjpmdW5jdGlvbigpe2EuZXF1YWxzKHRoaXMuY3VycmVudEFjdGl2ZSkmJnRoaXMuYmx1cigpfSxmb2N1czpmdW5jdGlvbigpe3RoaXMuZm9jdXMoYSl9fTthLm9uKGIsZi5mb2N1cyx0aGlzKTthLm9uKGMsZi5ibHVyLHRoaXMpO2QmJihDS0VESVRPUi5ldmVudC51c2VDYXB0dXJlPTApO2Euc2V0Q3VzdG9tRGF0YShcImZvY3VzbWFuYWdlclwiLHRoaXMpO2Euc2V0Q3VzdG9tRGF0YShcImZvY3VzbWFuYWdlcl9oYW5kbGVyc1wiLGYpfX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2EucmVtb3ZlQ3VzdG9tRGF0YShcImZvY3VzbWFuYWdlclwiKTt2YXIgZD1hLnJlbW92ZUN1c3RvbURhdGEoXCJmb2N1c21hbmFnZXJfaGFuZGxlcnNcIik7YS5yZW1vdmVMaXN0ZW5lcihcImJsdXJcIixkLmJsdXIpO2EucmVtb3ZlTGlzdGVuZXIoXCJmb2N1c1wiLFxuZC5mb2N1cyl9fX0pKCk7Q0tFRElUT1Iua2V5c3Ryb2tlSGFuZGxlcj1mdW5jdGlvbihhKXtpZihhLmtleXN0cm9rZUhhbmRsZXIpcmV0dXJuIGEua2V5c3Ryb2tlSGFuZGxlcjt0aGlzLmtleXN0cm9rZXM9e307dGhpcy5ibG9ja2VkS2V5c3Ryb2tlcz17fTt0aGlzLl89e2VkaXRvcjphfTtyZXR1cm4gdGhpc307XG4oZnVuY3Rpb24oKXt2YXIgYSxkPWZ1bmN0aW9uKGIpe2I9Yi5kYXRhO3ZhciBkPWIuZ2V0S2V5c3Ryb2tlKCksZz10aGlzLmtleXN0cm9rZXNbZF0saz10aGlzLl8uZWRpdG9yO2E9ITE9PT1rLmZpcmUoXCJrZXlcIix7a2V5Q29kZTpkLGRvbUV2ZW50OmJ9KTthfHwoZyYmKGE9ITEhPT1rLmV4ZWNDb21tYW5kKGcse2Zyb206XCJrZXlzdHJva2VIYW5kbGVyXCJ9KSksYXx8KGE9ISF0aGlzLmJsb2NrZWRLZXlzdHJva2VzW2RdKSk7YSYmYi5wcmV2ZW50RGVmYXVsdCghMCk7cmV0dXJuIWF9LGI9ZnVuY3Rpb24oYil7YSYmKGE9ITEsYi5kYXRhLnByZXZlbnREZWZhdWx0KCEwKSl9O0NLRURJVE9SLmtleXN0cm9rZUhhbmRsZXIucHJvdG90eXBlPXthdHRhY2g6ZnVuY3Rpb24oYSl7YS5vbihcImtleWRvd25cIixkLHRoaXMpO2lmKENLRURJVE9SLmVudi5nZWNrbyYmQ0tFRElUT1IuZW52Lm1hYylhLm9uKFwia2V5cHJlc3NcIixiLHRoaXMpfX19KSgpO1xuKGZ1bmN0aW9uKCl7Q0tFRElUT1IubGFuZz17bGFuZ3VhZ2VzOnthZjoxLGFyOjEsYmc6MSxibjoxLGJzOjEsY2E6MSxjczoxLGN5OjEsZGE6MSxkZToxLFwiZGUtY2hcIjoxLGVsOjEsXCJlbi1hdVwiOjEsXCJlbi1jYVwiOjEsXCJlbi1nYlwiOjEsZW46MSxlbzoxLGVzOjEsZXQ6MSxldToxLGZhOjEsZmk6MSxmbzoxLFwiZnItY2FcIjoxLGZyOjEsZ2w6MSxndToxLGhlOjEsaGk6MSxocjoxLGh1OjEsaWQ6MSxpczoxLGl0OjEsamE6MSxrYToxLGttOjEsa286MSxrdToxLGx0OjEsbHY6MSxtazoxLG1uOjEsbXM6MSxuYjoxLG5sOjEsbm86MSxwbDoxLFwicHQtYnJcIjoxLHB0OjEscm86MSxydToxLHNpOjEsc2s6MSxzbDoxLHNxOjEsXCJzci1sYXRuXCI6MSxzcjoxLHN2OjEsdGg6MSx0cjoxLHR0OjEsdWc6MSx1azoxLHZpOjEsXCJ6aC1jblwiOjEsemg6MX0scnRsOnthcjoxLGZhOjEsaGU6MSxrdToxLHVnOjF9LGxvYWQ6ZnVuY3Rpb24oYSxkLGIpe2EmJkNLRURJVE9SLmxhbmcubGFuZ3VhZ2VzW2FdfHwoYT1cbnRoaXMuZGV0ZWN0KGQsYSkpO3ZhciBjPXRoaXM7ZD1mdW5jdGlvbigpe2NbYV0uZGlyPWMucnRsW2FdP1wicnRsXCI6XCJsdHJcIjtiKGEsY1thXSl9O3RoaXNbYV0/ZCgpOkNLRURJVE9SLnNjcmlwdExvYWRlci5sb2FkKENLRURJVE9SLmdldFVybChcImxhbmcvXCIrYStcIi5qc1wiKSxkLHRoaXMpfSxkZXRlY3Q6ZnVuY3Rpb24oYSxkKXt2YXIgYj10aGlzLmxhbmd1YWdlcztkPWR8fG5hdmlnYXRvci51c2VyTGFuZ3VhZ2V8fG5hdmlnYXRvci5sYW5ndWFnZXx8YTt2YXIgYz1kLnRvTG93ZXJDYXNlKCkubWF0Y2goLyhbYS16XSspKD86LShbYS16XSspKT8vKSxmPWNbMV0sYz1jWzJdO2JbZitcIi1cIitjXT9mPWYrXCItXCIrYzpiW2ZdfHwoZj1udWxsKTtDS0VESVRPUi5sYW5nLmRldGVjdD1mP2Z1bmN0aW9uKCl7cmV0dXJuIGZ9OmZ1bmN0aW9uKGEpe3JldHVybiBhfTtyZXR1cm4gZnx8YX19fSkoKTtcbkNLRURJVE9SLnNjcmlwdExvYWRlcj1mdW5jdGlvbigpe3ZhciBhPXt9LGQ9e307cmV0dXJue2xvYWQ6ZnVuY3Rpb24oYixjLGYsZyl7dmFyIGs9XCJzdHJpbmdcIj09dHlwZW9mIGI7ayYmKGI9W2JdKTtmfHwoZj1DS0VESVRPUik7dmFyIGw9Yi5sZW5ndGgsbT1bXSx1PVtdLGU9ZnVuY3Rpb24oYSl7YyYmKGs/Yy5jYWxsKGYsYSk6Yy5jYWxsKGYsbSx1KSl9O2lmKDA9PT1sKWUoITApO2Vsc2V7dmFyIEE9ZnVuY3Rpb24oYSxiKXsoYj9tOnUpLnB1c2goYSk7MD49LS1sJiYoZyYmQ0tFRElUT1IuZG9jdW1lbnQuZ2V0RG9jdW1lbnRFbGVtZW50KCkucmVtb3ZlU3R5bGUoXCJjdXJzb3JcIiksZShiKSl9LHI9ZnVuY3Rpb24oYixjKXthW2JdPTE7dmFyIGY9ZFtiXTtkZWxldGUgZFtiXTtmb3IodmFyIGU9MDtlPGYubGVuZ3RoO2UrKylmW2VdKGIsYyl9LHg9ZnVuY3Rpb24oYil7aWYoYVtiXSlBKGIsITApO2Vsc2V7dmFyIGY9ZFtiXXx8KGRbYl09W10pO2YucHVzaChBKTtpZighKDE8Zi5sZW5ndGgpKXt2YXIgZT1cbm5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcInNjcmlwdFwiKTtlLnNldEF0dHJpYnV0ZXMoe3R5cGU6XCJ0ZXh0L2phdmFzY3JpcHRcIixzcmM6Yn0pO2MmJihDS0VESVRPUi5lbnYuaWUmJig4Pj1DS0VESVRPUi5lbnYudmVyc2lvbnx8Q0tFRElUT1IuZW52LmllOUNvbXBhdCk/ZS4kLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKFwibG9hZGVkXCI9PWUuJC5yZWFkeVN0YXRlfHxcImNvbXBsZXRlXCI9PWUuJC5yZWFkeVN0YXRlKWUuJC5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxyKGIsITApfTooZS4kLm9ubG9hZD1mdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtyKGIsITApfSwwKX0sZS4kLm9uZXJyb3I9ZnVuY3Rpb24oKXtyKGIsITEpfSkpO2UuYXBwZW5kVG8oQ0tFRElUT1IuZG9jdW1lbnQuZ2V0SGVhZCgpKX19fTtnJiZDS0VESVRPUi5kb2N1bWVudC5nZXREb2N1bWVudEVsZW1lbnQoKS5zZXRTdHlsZShcImN1cnNvclwiLFwid2FpdFwiKTtmb3IodmFyIEQ9MDtEPGw7RCsrKXgoYltEXSl9fSxcbnF1ZXVlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3ZhciBiOyhiPWNbMF0pJiZ0aGlzLmxvYWQoYi5zY3JpcHRVcmwsYi5jYWxsYmFjayxDS0VESVRPUiwwKX12YXIgYz1bXTtyZXR1cm4gZnVuY3Rpb24oZCxnKXt2YXIgaz10aGlzO2MucHVzaCh7c2NyaXB0VXJsOmQsY2FsbGJhY2s6ZnVuY3Rpb24oKXtnJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtjLnNoaWZ0KCk7YS5jYWxsKGspfX0pOzE9PWMubGVuZ3RoJiZhLmNhbGwodGhpcyl9fSgpfX0oKTtDS0VESVRPUi5yZXNvdXJjZU1hbmFnZXI9ZnVuY3Rpb24oYSxkKXt0aGlzLmJhc2VQYXRoPWE7dGhpcy5maWxlTmFtZT1kO3RoaXMucmVnaXN0ZXJlZD17fTt0aGlzLmxvYWRlZD17fTt0aGlzLmV4dGVybmFscz17fTt0aGlzLl89e3dhaXRpbmdMaXN0Ont9fX07XG5DS0VESVRPUi5yZXNvdXJjZU1hbmFnZXIucHJvdG90eXBlPXthZGQ6ZnVuY3Rpb24oYSxkKXtpZih0aGlzLnJlZ2lzdGVyZWRbYV0pdGhyb3cgRXJyb3IoJ1tDS0VESVRPUi5yZXNvdXJjZU1hbmFnZXIuYWRkXSBUaGUgcmVzb3VyY2UgbmFtZSBcIicrYSsnXCIgaXMgYWxyZWFkeSByZWdpc3RlcmVkLicpO3ZhciBiPXRoaXMucmVnaXN0ZXJlZFthXT1kfHx7fTtiLm5hbWU9YTtiLnBhdGg9dGhpcy5nZXRQYXRoKGEpO0NLRURJVE9SLmZpcmUoYStDS0VESVRPUi50b29scy5jYXBpdGFsaXplKHRoaXMuZmlsZU5hbWUpK1wiUmVhZHlcIixiKTtyZXR1cm4gdGhpcy5nZXQoYSl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZWdpc3RlcmVkW2FdfHxudWxsfSxnZXRQYXRoOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMuZXh0ZXJuYWxzW2FdO3JldHVybiBDS0VESVRPUi5nZXRVcmwoZCYmZC5kaXJ8fHRoaXMuYmFzZVBhdGgrYStcIi9cIil9LGdldEZpbGVQYXRoOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMuZXh0ZXJuYWxzW2FdO1xucmV0dXJuIENLRURJVE9SLmdldFVybCh0aGlzLmdldFBhdGgoYSkrKGQ/ZC5maWxlOnRoaXMuZmlsZU5hbWUrXCIuanNcIikpfSxhZGRFeHRlcm5hbDpmdW5jdGlvbihhLGQsYil7YT1hLnNwbGl0KFwiLFwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGY9YVtjXTtifHwoZD1kLnJlcGxhY2UoL1teXFwvXSskLyxmdW5jdGlvbihhKXtiPWE7cmV0dXJuXCJcIn0pKTt0aGlzLmV4dGVybmFsc1tmXT17ZGlyOmQsZmlsZTpifHx0aGlzLmZpbGVOYW1lK1wiLmpzXCJ9fX0sbG9hZDpmdW5jdGlvbihhLGQsYil7Q0tFRElUT1IudG9vbHMuaXNBcnJheShhKXx8KGE9YT9bYV06W10pO2Zvcih2YXIgYz10aGlzLmxvYWRlZCxmPXRoaXMucmVnaXN0ZXJlZCxnPVtdLGs9e30sbD17fSxtPTA7bTxhLmxlbmd0aDttKyspe3ZhciB1PWFbbV07aWYodSlpZihjW3VdfHxmW3VdKWxbdV09dGhpcy5nZXQodSk7ZWxzZXt2YXIgZT10aGlzLmdldEZpbGVQYXRoKHUpO2cucHVzaChlKTtlIGluIGt8fChrW2VdPVxuW10pO2tbZV0ucHVzaCh1KX19Q0tFRElUT1Iuc2NyaXB0TG9hZGVyLmxvYWQoZyxmdW5jdGlvbihhLGYpe2lmKGYubGVuZ3RoKXRocm93IEVycm9yKCdbQ0tFRElUT1IucmVzb3VyY2VNYW5hZ2VyLmxvYWRdIFJlc291cmNlIG5hbWUgXCInK2tbZlswXV0uam9pbihcIixcIikrJ1wiIHdhcyBub3QgZm91bmQgYXQgXCInK2ZbMF0rJ1wiLicpO2Zvcih2YXIgZT0wO2U8YS5sZW5ndGg7ZSsrKWZvcih2YXIgZz1rW2FbZV1dLHE9MDtxPGcubGVuZ3RoO3ErKyl7dmFyIHc9Z1txXTtsW3ddPXRoaXMuZ2V0KHcpO2Nbd109MX1kLmNhbGwoYixsKX0sdGhpcyl9fTtDS0VESVRPUi5wbHVnaW5zPW5ldyBDS0VESVRPUi5yZXNvdXJjZU1hbmFnZXIoXCJwbHVnaW5zL1wiLFwicGx1Z2luXCIpO1xuQ0tFRElUT1IucGx1Z2lucy5sb2FkPUNLRURJVE9SLnRvb2xzLm92ZXJyaWRlKENLRURJVE9SLnBsdWdpbnMubG9hZCxmdW5jdGlvbihhKXt2YXIgZD17fTtyZXR1cm4gZnVuY3Rpb24oYixjLGYpe3ZhciBnPXt9LGs9ZnVuY3Rpb24oYil7YS5jYWxsKHRoaXMsYixmdW5jdGlvbihhKXtDS0VESVRPUi50b29scy5leHRlbmQoZyxhKTt2YXIgYj1bXSxlO2ZvcihlIGluIGEpe3ZhciBsPWFbZV0scj1sJiZsLnJlcXVpcmVzO2lmKCFkW2VdKXtpZihsLmljb25zKWZvcih2YXIgeD1sLmljb25zLnNwbGl0KFwiLFwiKSxEPXgubGVuZ3RoO0QtLTspQ0tFRElUT1Iuc2tpbi5hZGRJY29uKHhbRF0sbC5wYXRoK1wiaWNvbnMvXCIrKENLRURJVE9SLmVudi5oaWRwaSYmbC5oaWRwaT9cImhpZHBpL1wiOlwiXCIpK3hbRF0rXCIucG5nXCIpO2RbZV09MX1pZihyKWZvcihyLnNwbGl0JiYocj1yLnNwbGl0KFwiLFwiKSksbD0wO2w8ci5sZW5ndGg7bCsrKWdbcltsXV18fGIucHVzaChyW2xdKX1pZihiLmxlbmd0aClrLmNhbGwodGhpcyxcbmIpO2Vsc2V7Zm9yKGUgaW4gZylsPWdbZV0sbC5vbkxvYWQmJiFsLm9uTG9hZC5fY2FsbGVkJiYoITE9PT1sLm9uTG9hZCgpJiZkZWxldGUgZ1tlXSxsLm9uTG9hZC5fY2FsbGVkPTEpO2MmJmMuY2FsbChmfHx3aW5kb3csZyl9fSx0aGlzKX07ay5jYWxsKHRoaXMsYil9fSk7Q0tFRElUT1IucGx1Z2lucy5zZXRMYW5nPWZ1bmN0aW9uKGEsZCxiKXt2YXIgYz10aGlzLmdldChhKTthPWMubGFuZ0VudHJpZXN8fChjLmxhbmdFbnRyaWVzPXt9KTtjPWMubGFuZ3x8KGMubGFuZz1bXSk7Yy5zcGxpdCYmKGM9Yy5zcGxpdChcIixcIikpOy0xPT1DS0VESVRPUi50b29scy5pbmRleE9mKGMsZCkmJmMucHVzaChkKTthW2RdPWJ9O0NLRURJVE9SLnVpPWZ1bmN0aW9uKGEpe2lmKGEudWkpcmV0dXJuIGEudWk7dGhpcy5pdGVtcz17fTt0aGlzLmluc3RhbmNlcz17fTt0aGlzLmVkaXRvcj1hO3RoaXMuXz17aGFuZGxlcnM6e319O3JldHVybiB0aGlzfTtcbkNLRURJVE9SLnVpLnByb3RvdHlwZT17YWRkOmZ1bmN0aW9uKGEsZCxiKXtiLm5hbWU9YS50b0xvd2VyQ2FzZSgpO3ZhciBjPXRoaXMuaXRlbXNbYV09e3R5cGU6ZCxjb21tYW5kOmIuY29tbWFuZHx8bnVsbCxhcmdzOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKX07Q0tFRElUT1IudG9vbHMuZXh0ZW5kKGMsYil9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbnN0YW5jZXNbYV19LGNyZWF0ZTpmdW5jdGlvbihhKXt2YXIgZD10aGlzLml0ZW1zW2FdLGI9ZCYmdGhpcy5fLmhhbmRsZXJzW2QudHlwZV0sYz1kJiZkLmNvbW1hbmQmJnRoaXMuZWRpdG9yLmdldENvbW1hbmQoZC5jb21tYW5kKSxiPWImJmIuY3JlYXRlLmFwcGx5KHRoaXMsZC5hcmdzKTt0aGlzLmluc3RhbmNlc1thXT1iO2MmJmMudWlJdGVtcy5wdXNoKGIpO2ImJiFiLnR5cGUmJihiLnR5cGU9ZC50eXBlKTtyZXR1cm4gYn0sYWRkSGFuZGxlcjpmdW5jdGlvbihhLGQpe3RoaXMuXy5oYW5kbGVyc1thXT1cbmR9LHNwYWNlOmZ1bmN0aW9uKGEpe3JldHVybiBDS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKHRoaXMuc3BhY2VJZChhKSl9LHNwYWNlSWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWRpdG9yLmlkK1wiX1wiK2F9fTtDS0VESVRPUi5ldmVudC5pbXBsZW1lbnRPbihDS0VESVRPUi51aSk7XG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsZixlKXtDS0VESVRPUi5ldmVudC5jYWxsKHRoaXMpO2E9YSYmQ0tFRElUT1IudG9vbHMuY2xvbmUoYSk7aWYodm9pZCAwIT09Zil7aWYoIShmIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLmVsZW1lbnQpKXRocm93IEVycm9yKFwiRXhwZWN0IGVsZW1lbnQgb2YgdHlwZSBDS0VESVRPUi5kb20uZWxlbWVudC5cIik7aWYoIWUpdGhyb3cgRXJyb3IoXCJPbmUgb2YgdGhlIGVsZW1lbnQgbW9kZXMgbXVzdCBiZSBzcGVjaWZpZWQuXCIpO2lmKENLRURJVE9SLmVudi5pZSYmQ0tFRElUT1IuZW52LnF1aXJrcyYmZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORSl0aHJvdyBFcnJvcihcIklubGluZSBlbGVtZW50IG1vZGUgaXMgbm90IHN1cHBvcnRlZCBvbiBJRSBxdWlya3MuXCIpO2lmKCFiKGYsZSkpdGhyb3cgRXJyb3IoJ1RoZSBzcGVjaWZpZWQgZWxlbWVudCBtb2RlIGlzIG5vdCBzdXBwb3J0ZWQgb24gZWxlbWVudDogXCInK2YuZ2V0TmFtZSgpKydcIi4nKTtcbnRoaXMuZWxlbWVudD1mO3RoaXMuZWxlbWVudE1vZGU9ZTt0aGlzLm5hbWU9dGhpcy5lbGVtZW50TW9kZSE9Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0FQUEVORFRPJiYoZi5nZXRJZCgpfHxmLmdldE5hbWVBdHQoKSl9ZWxzZSB0aGlzLmVsZW1lbnRNb2RlPUNLRURJVE9SLkVMRU1FTlRfTU9ERV9OT05FO3RoaXMuXz17fTt0aGlzLmNvbW1hbmRzPXt9O3RoaXMudGVtcGxhdGVzPXt9O3RoaXMubmFtZT10aGlzLm5hbWV8fGQoKTt0aGlzLmlkPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpO3RoaXMuc3RhdHVzPVwidW5sb2FkZWRcIjt0aGlzLmNvbmZpZz1DS0VESVRPUi50b29scy5wcm90b3R5cGVkQ29weShDS0VESVRPUi5jb25maWcpO3RoaXMudWk9bmV3IENLRURJVE9SLnVpKHRoaXMpO3RoaXMuZm9jdXNNYW5hZ2VyPW5ldyBDS0VESVRPUi5mb2N1c01hbmFnZXIodGhpcyk7dGhpcy5rZXlzdHJva2VIYW5kbGVyPW5ldyBDS0VESVRPUi5rZXlzdHJva2VIYW5kbGVyKHRoaXMpO3RoaXMub24oXCJyZWFkT25seVwiLFxuYyk7dGhpcy5vbihcInNlbGVjdGlvbkNoYW5nZVwiLGZ1bmN0aW9uKGEpe2codGhpcyxhLmRhdGEucGF0aCl9KTt0aGlzLm9uKFwiYWN0aXZlRmlsdGVyQ2hhbmdlXCIsZnVuY3Rpb24oKXtnKHRoaXMsdGhpcy5lbGVtZW50UGF0aCgpLCEwKX0pO3RoaXMub24oXCJtb2RlXCIsYyk7dGhpcy5vbihcImluc3RhbmNlUmVhZHlcIixmdW5jdGlvbigpe3RoaXMuY29uZmlnLnN0YXJ0dXBGb2N1cyYmdGhpcy5mb2N1cygpfSk7Q0tFRElUT1IuZmlyZShcImluc3RhbmNlQ3JlYXRlZFwiLG51bGwsdGhpcyk7Q0tFRElUT1IuYWRkKHRoaXMpO0NLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtcImRlc3Ryb3llZFwiIT09dGhpcy5zdGF0dXM/bCh0aGlzLGEpOkNLRURJVE9SLndhcm4oXCJlZGl0b3ItaW5jb3JyZWN0LWRlc3Ryb3lcIil9LDAsdGhpcyl9ZnVuY3Rpb24gZCgpe2RvIHZhciBhPVwiZWRpdG9yXCIrICsreDt3aGlsZShDS0VESVRPUi5pbnN0YW5jZXNbYV0pO3JldHVybiBhfWZ1bmN0aW9uIGIoYSxcbmIpe3JldHVybiBiPT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FP2EuaXMoQ0tFRElUT1IuZHRkLiRlZGl0YWJsZSl8fGEuaXMoXCJ0ZXh0YXJlYVwiKTpiPT1DS0VESVRPUi5FTEVNRU5UX01PREVfUkVQTEFDRT8hYS5pcyhDS0VESVRPUi5kdGQuJG5vbkJvZHlDb250ZW50KToxfWZ1bmN0aW9uIGMoKXt2YXIgYT10aGlzLmNvbW1hbmRzLGI7Zm9yKGIgaW4gYSlmKHRoaXMsYVtiXSl9ZnVuY3Rpb24gZihhLGIpe2JbYi5zdGFydERpc2FibGVkP1wiZGlzYWJsZVwiOmEucmVhZE9ubHkmJiFiLnJlYWRPbmx5P1wiZGlzYWJsZVwiOmIubW9kZXNbYS5tb2RlXT9cImVuYWJsZVwiOlwiZGlzYWJsZVwiXSgpfWZ1bmN0aW9uIGcoYSxiLGMpe2lmKGIpe3ZhciBkLGYsaD1hLmNvbW1hbmRzO2ZvcihmIGluIGgpZD1oW2ZdLChjfHxkLmNvbnRleHRTZW5zaXRpdmUpJiZkLnJlZnJlc2goYSxiKX19ZnVuY3Rpb24gayhhKXt2YXIgYj1hLmNvbmZpZy5jdXN0b21Db25maWc7aWYoIWIpcmV0dXJuITE7dmFyIGI9XG5DS0VESVRPUi5nZXRVcmwoYiksYz1EW2JdfHwoRFtiXT17fSk7Yy5mbj8oYy5mbi5jYWxsKGEsYS5jb25maWcpLENLRURJVE9SLmdldFVybChhLmNvbmZpZy5jdXN0b21Db25maWcpIT1iJiZrKGEpfHxhLmZpcmVPbmNlKFwiY3VzdG9tQ29uZmlnTG9hZGVkXCIpKTpDS0VESVRPUi5zY3JpcHRMb2FkZXIucXVldWUoYixmdW5jdGlvbigpe2MuZm49Q0tFRElUT1IuZWRpdG9yQ29uZmlnP0NLRURJVE9SLmVkaXRvckNvbmZpZzpmdW5jdGlvbigpe307ayhhKX0pO3JldHVybiEwfWZ1bmN0aW9uIGwoYSxiKXthLm9uKFwiY3VzdG9tQ29uZmlnTG9hZGVkXCIsZnVuY3Rpb24oKXtpZihiKXtpZihiLm9uKWZvcih2YXIgYyBpbiBiLm9uKWEub24oYyxiLm9uW2NdKTtDS0VESVRPUi50b29scy5leHRlbmQoYS5jb25maWcsYiwhMCk7ZGVsZXRlIGEuY29uZmlnLm9ufWM9YS5jb25maWc7YS5yZWFkT25seT1jLnJlYWRPbmx5PyEwOmEuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkU/XG5hLmVsZW1lbnQuaXMoXCJ0ZXh0YXJlYVwiKT9hLmVsZW1lbnQuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil8fGEuZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTphLmVsZW1lbnQuaXNSZWFkT25seSgpOmEuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9SRVBMQUNFP2EuZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKXx8YS5lbGVtZW50Lmhhc0F0dHJpYnV0ZShcInJlYWRvbmx5XCIpOiExO2EuYmxvY2tsZXNzPWEuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkU/IShhLmVsZW1lbnQuaXMoXCJ0ZXh0YXJlYVwiKXx8Q0tFRElUT1IuZHRkW2EuZWxlbWVudC5nZXROYW1lKCldLnApOiExO2EudGFiSW5kZXg9Yy50YWJJbmRleHx8YS5lbGVtZW50JiZhLmVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIil8fDA7YS5hY3RpdmVFbnRlck1vZGU9YS5lbnRlck1vZGU9YS5ibG9ja2xlc3M/Q0tFRElUT1IuRU5URVJfQlI6Yy5lbnRlck1vZGU7XG5hLmFjdGl2ZVNoaWZ0RW50ZXJNb2RlPWEuc2hpZnRFbnRlck1vZGU9YS5ibG9ja2xlc3M/Q0tFRElUT1IuRU5URVJfQlI6Yy5zaGlmdEVudGVyTW9kZTtjLnNraW4mJihDS0VESVRPUi5za2luTmFtZT1jLnNraW4pO2EuZmlyZU9uY2UoXCJjb25maWdMb2FkZWRcIik7YS5kYXRhUHJvY2Vzc29yPW5ldyBDS0VESVRPUi5odG1sRGF0YVByb2Nlc3NvcihhKTthLmZpbHRlcj1hLmFjdGl2ZUZpbHRlcj1uZXcgQ0tFRElUT1IuZmlsdGVyKGEpO20oYSl9KTtiJiZudWxsIT1iLmN1c3RvbUNvbmZpZyYmKGEuY29uZmlnLmN1c3RvbUNvbmZpZz1iLmN1c3RvbUNvbmZpZyk7ayhhKXx8YS5maXJlT25jZShcImN1c3RvbUNvbmZpZ0xvYWRlZFwiKX1mdW5jdGlvbiBtKGEpe0NLRURJVE9SLnNraW4ubG9hZFBhcnQoXCJlZGl0b3JcIixmdW5jdGlvbigpe3UoYSl9KX1mdW5jdGlvbiB1KGEpe0NLRURJVE9SLmxhbmcubG9hZChhLmNvbmZpZy5sYW5ndWFnZSxhLmNvbmZpZy5kZWZhdWx0TGFuZ3VhZ2UsZnVuY3Rpb24oYixcbmMpe3ZhciBkPWEuY29uZmlnLnRpdGxlO2EubGFuZ0NvZGU9YjthLmxhbmc9Q0tFRElUT1IudG9vbHMucHJvdG90eXBlZENvcHkoYyk7YS50aXRsZT1cInN0cmluZ1wiPT10eXBlb2YgZHx8ITE9PT1kP2Q6W2EubGFuZy5lZGl0b3IsYS5uYW1lXS5qb2luKFwiLCBcIik7YS5jb25maWcuY29udGVudHNMYW5nRGlyZWN0aW9ufHwoYS5jb25maWcuY29udGVudHNMYW5nRGlyZWN0aW9uPWEuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkU/YS5lbGVtZW50LmdldERpcmVjdGlvbigxKTphLmxhbmcuZGlyKTthLmZpcmUoXCJsYW5nTG9hZGVkXCIpO2UoYSl9KX1mdW5jdGlvbiBlKGEpe2EuZ2V0U3R5bGVzU2V0KGZ1bmN0aW9uKGIpe2Eub25jZShcImxvYWRlZFwiLGZ1bmN0aW9uKCl7YS5maXJlKFwic3R5bGVzU2V0XCIse3N0eWxlczpifSl9LG51bGwsbnVsbCwxKTtBKGEpfSl9ZnVuY3Rpb24gQShhKXt2YXIgYj1hLmNvbmZpZyxjPWIucGx1Z2lucyxkPWIuZXh0cmFQbHVnaW5zLGY9XG5iLnJlbW92ZVBsdWdpbnM7aWYoZCl2YXIgaD1uZXcgUmVnRXhwKFwiKD86XnwsKSg/OlwiK2QucmVwbGFjZSgvXFxzKixcXHMqL2csXCJ8XCIpK1wiKSg/XFx4M2QsfCQpXCIsXCJnXCIpLGM9Yy5yZXBsYWNlKGgsXCJcIiksYz1jKyhcIixcIitkKTtpZihmKXZhciBwPW5ldyBSZWdFeHAoXCIoPzpefCwpKD86XCIrZi5yZXBsYWNlKC9cXHMqLFxccyovZyxcInxcIikrXCIpKD9cXHgzZCx8JClcIixcImdcIiksYz1jLnJlcGxhY2UocCxcIlwiKTtDS0VESVRPUi5lbnYuYWlyJiYoYys9XCIsYWRvYmVhaXJcIik7Q0tFRElUT1IucGx1Z2lucy5sb2FkKGMuc3BsaXQoXCIsXCIpLGZ1bmN0aW9uKGMpe3ZhciBkPVtdLGg9W10sZj1bXTthLnBsdWdpbnM9Yztmb3IodmFyIGUgaW4gYyl7dmFyIGc9Y1tlXSx2PWcubGFuZyxrPW51bGwsbD1nLnJlcXVpcmVzLG07Q0tFRElUT1IudG9vbHMuaXNBcnJheShsKSYmKGw9bC5qb2luKFwiLFwiKSk7aWYobCYmKG09bC5tYXRjaChwKSkpZm9yKDtsPW0ucG9wKCk7KUNLRURJVE9SLmVycm9yKFwiZWRpdG9yLXBsdWdpbi1yZXF1aXJlZFwiLFxue3BsdWdpbjpsLnJlcGxhY2UoXCIsXCIsXCJcIikscmVxdWlyZWRCeTplfSk7diYmIWEubGFuZ1tlXSYmKHYuc3BsaXQmJih2PXYuc3BsaXQoXCIsXCIpKSwwPD1DS0VESVRPUi50b29scy5pbmRleE9mKHYsYS5sYW5nQ29kZSk/az1hLmxhbmdDb2RlOihrPWEubGFuZ0NvZGUucmVwbGFjZSgvLS4qLyxcIlwiKSxrPWshPWEubGFuZ0NvZGUmJjA8PUNLRURJVE9SLnRvb2xzLmluZGV4T2YodixrKT9rOjA8PUNLRURJVE9SLnRvb2xzLmluZGV4T2YodixcImVuXCIpP1wiZW5cIjp2WzBdKSxnLmxhbmdFbnRyaWVzJiZnLmxhbmdFbnRyaWVzW2tdPyhhLmxhbmdbZV09Zy5sYW5nRW50cmllc1trXSxrPW51bGwpOmYucHVzaChDS0VESVRPUi5nZXRVcmwoZy5wYXRoK1wibGFuZy9cIitrK1wiLmpzXCIpKSk7aC5wdXNoKGspO2QucHVzaChnKX1DS0VESVRPUi5zY3JpcHRMb2FkZXIubG9hZChmLGZ1bmN0aW9uKCl7Zm9yKHZhciBjPVtcImJlZm9yZUluaXRcIixcImluaXRcIixcImFmdGVySW5pdFwiXSxmPTA7ZjxjLmxlbmd0aDtmKyspZm9yKHZhciBwPVxuMDtwPGQubGVuZ3RoO3ArKyl7dmFyIG49ZFtwXTswPT09ZiYmaFtwXSYmbi5sYW5nJiZuLmxhbmdFbnRyaWVzJiYoYS5sYW5nW24ubmFtZV09bi5sYW5nRW50cmllc1toW3BdXSk7aWYobltjW2ZdXSluW2NbZl1dKGEpfWEuZmlyZU9uY2UoXCJwbHVnaW5zTG9hZGVkXCIpO2Iua2V5c3Ryb2tlcyYmYS5zZXRLZXlzdHJva2UoYS5jb25maWcua2V5c3Ryb2tlcyk7Zm9yKHA9MDtwPGEuY29uZmlnLmJsb2NrZWRLZXlzdHJva2VzLmxlbmd0aDtwKyspYS5rZXlzdHJva2VIYW5kbGVyLmJsb2NrZWRLZXlzdHJva2VzW2EuY29uZmlnLmJsb2NrZWRLZXlzdHJva2VzW3BdXT0xO2Euc3RhdHVzPVwibG9hZGVkXCI7YS5maXJlT25jZShcImxvYWRlZFwiKTtDS0VESVRPUi5maXJlKFwiaW5zdGFuY2VMb2FkZWRcIixudWxsLGEpfSl9KX1mdW5jdGlvbiByKCl7dmFyIGE9dGhpcy5lbGVtZW50O2lmKGEmJnRoaXMuZWxlbWVudE1vZGUhPUNLRURJVE9SLkVMRU1FTlRfTU9ERV9BUFBFTkRUTyl7dmFyIGI9dGhpcy5nZXREYXRhKCk7XG50aGlzLmNvbmZpZy5odG1sRW5jb2RlT3V0cHV0JiYoYj1DS0VESVRPUi50b29scy5odG1sRW5jb2RlKGIpKTthLmlzKFwidGV4dGFyZWFcIik/YS5zZXRWYWx1ZShiKTphLnNldEh0bWwoYik7cmV0dXJuITB9cmV0dXJuITF9YS5wcm90b3R5cGU9Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZTtDS0VESVRPUi5lZGl0b3I9YTt2YXIgeD0wLEQ9e307Q0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmVkaXRvci5wcm90b3R5cGUse2FkZENvbW1hbmQ6ZnVuY3Rpb24oYSxiKXtiLm5hbWU9YS50b0xvd2VyQ2FzZSgpO3ZhciBjPW5ldyBDS0VESVRPUi5jb21tYW5kKHRoaXMsYik7dGhpcy5tb2RlJiZmKHRoaXMsYyk7cmV0dXJuIHRoaXMuY29tbWFuZHNbYV09Y30sX2F0dGFjaFRvRm9ybTpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7Yy51cGRhdGVFbGVtZW50KCk7Yy5fLnJlcXVpcmVkJiYhZC5nZXRWYWx1ZSgpJiYhMT09PWMuZmlyZShcInJlcXVpcmVkXCIpJiZiLmRhdGEucHJldmVudERlZmF1bHQoKX1cbmZ1bmN0aW9uIGIoYSl7cmV0dXJuISEoYSYmYS5jYWxsJiZhLmFwcGx5KX12YXIgYz10aGlzLGQ9Yy5lbGVtZW50LGY9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGQuJC5mb3JtKTtkLmlzKFwidGV4dGFyZWFcIikmJmYmJihmLm9uKFwic3VibWl0XCIsYSksYihmLiQuc3VibWl0KSYmKGYuJC5zdWJtaXQ9Q0tFRElUT1IudG9vbHMub3ZlcnJpZGUoZi4kLnN1Ym1pdCxmdW5jdGlvbihiKXtyZXR1cm4gZnVuY3Rpb24oKXthKCk7Yi5hcHBseT9iLmFwcGx5KHRoaXMpOmIoKX19KSksYy5vbihcImRlc3Ryb3lcIixmdW5jdGlvbigpe2YucmVtb3ZlTGlzdGVuZXIoXCJzdWJtaXRcIixhKX0pKX0sZGVzdHJveTpmdW5jdGlvbihhKXt0aGlzLmZpcmUoXCJiZWZvcmVEZXN0cm95XCIpOyFhJiZyLmNhbGwodGhpcyk7dGhpcy5lZGl0YWJsZShudWxsKTt0aGlzLmZpbHRlciYmKHRoaXMuZmlsdGVyLmRlc3Ryb3koKSxkZWxldGUgdGhpcy5maWx0ZXIpO2RlbGV0ZSB0aGlzLmFjdGl2ZUZpbHRlcjt0aGlzLnN0YXR1cz1cblwiZGVzdHJveWVkXCI7dGhpcy5maXJlKFwiZGVzdHJveVwiKTt0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO0NLRURJVE9SLnJlbW92ZSh0aGlzKTtDS0VESVRPUi5maXJlKFwiaW5zdGFuY2VEZXN0cm95ZWRcIixudWxsLHRoaXMpfSxlbGVtZW50UGF0aDpmdW5jdGlvbihhKXtpZighYSl7YT10aGlzLmdldFNlbGVjdGlvbigpO2lmKCFhKXJldHVybiBudWxsO2E9YS5nZXRTdGFydEVsZW1lbnQoKX1yZXR1cm4gYT9uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGEsdGhpcy5lZGl0YWJsZSgpKTpudWxsfSxjcmVhdGVSYW5nZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWRpdGFibGUoKTtyZXR1cm4gYT9uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGEpOm51bGx9LGV4ZWNDb21tYW5kOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDb21tYW5kKGEpLGQ9e25hbWU6YSxjb21tYW5kRGF0YTpiLGNvbW1hbmQ6Y307cmV0dXJuIGMmJmMuc3RhdGUhPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEJiZcbiExIT09dGhpcy5maXJlKFwiYmVmb3JlQ29tbWFuZEV4ZWNcIixkKSYmKGQucmV0dXJuVmFsdWU9Yy5leGVjKGQuY29tbWFuZERhdGEpLCFjLmFzeW5jJiYhMSE9PXRoaXMuZmlyZShcImFmdGVyQ29tbWFuZEV4ZWNcIixkKSk/ZC5yZXR1cm5WYWx1ZTohMX0sZ2V0Q29tbWFuZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb21tYW5kc1thXX0sZ2V0RGF0YTpmdW5jdGlvbihhKXshYSYmdGhpcy5maXJlKFwiYmVmb3JlR2V0RGF0YVwiKTt2YXIgYj10aGlzLl8uZGF0YTtcInN0cmluZ1wiIT10eXBlb2YgYiYmKGI9KGI9dGhpcy5lbGVtZW50KSYmdGhpcy5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX1JFUExBQ0U/Yi5pcyhcInRleHRhcmVhXCIpP2IuZ2V0VmFsdWUoKTpiLmdldEh0bWwoKTpcIlwiKTtiPXtkYXRhVmFsdWU6Yn07IWEmJnRoaXMuZmlyZShcImdldERhdGFcIixiKTtyZXR1cm4gYi5kYXRhVmFsdWV9LGdldFNuYXBzaG90OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5maXJlKFwiZ2V0U25hcHNob3RcIik7XG5cInN0cmluZ1wiIT10eXBlb2YgYSYmKGE9KGE9dGhpcy5lbGVtZW50KSYmdGhpcy5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX1JFUExBQ0U/YS5pcyhcInRleHRhcmVhXCIpP2EuZ2V0VmFsdWUoKTphLmdldEh0bWwoKTpcIlwiKTtyZXR1cm4gYX0sbG9hZFNuYXBzaG90OmZ1bmN0aW9uKGEpe3RoaXMuZmlyZShcImxvYWRTbmFwc2hvdFwiLGEpfSxzZXREYXRhOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0hMCxmPWI7YiYmXCJvYmplY3RcIj09dHlwZW9mIGImJihjPWIuaW50ZXJuYWwsZj1iLmNhbGxiYWNrLGQ9IWIubm9TbmFwc2hvdCk7IWMmJmQmJnRoaXMuZmlyZShcInNhdmVTbmFwc2hvdFwiKTtpZihmfHwhYyl0aGlzLm9uY2UoXCJkYXRhUmVhZHlcIixmdW5jdGlvbihhKXshYyYmZCYmdGhpcy5maXJlKFwic2F2ZVNuYXBzaG90XCIpO2YmJmYuY2FsbChhLmVkaXRvcil9KTthPXtkYXRhVmFsdWU6YX07IWMmJnRoaXMuZmlyZShcInNldERhdGFcIixhKTt0aGlzLl8uZGF0YT1hLmRhdGFWYWx1ZTtcbiFjJiZ0aGlzLmZpcmUoXCJhZnRlclNldERhdGFcIixhKX0sc2V0UmVhZE9ubHk6ZnVuY3Rpb24oYSl7YT1udWxsPT1hfHxhO3RoaXMucmVhZE9ubHkhPWEmJih0aGlzLnJlYWRPbmx5PWEsdGhpcy5rZXlzdHJva2VIYW5kbGVyLmJsb2NrZWRLZXlzdHJva2VzWzhdPSthLHRoaXMuZWRpdGFibGUoKS5zZXRSZWFkT25seShhKSx0aGlzLmZpcmUoXCJyZWFkT25seVwiKSl9LGluc2VydEh0bWw6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuZmlyZShcImluc2VydEh0bWxcIix7ZGF0YVZhbHVlOmEsbW9kZTpiLHJhbmdlOmN9KX0saW5zZXJ0VGV4dDpmdW5jdGlvbihhKXt0aGlzLmZpcmUoXCJpbnNlcnRUZXh0XCIsYSl9LGluc2VydEVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5maXJlKFwiaW5zZXJ0RWxlbWVudFwiLGEpfSxnZXRTZWxlY3RlZEh0bWw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lZGl0YWJsZSgpLGM9dGhpcy5nZXRTZWxlY3Rpb24oKSxjPWMmJmMuZ2V0UmFuZ2VzKCk7aWYoIWJ8fCFjfHwwPT09Yy5sZW5ndGgpcmV0dXJuIG51bGw7XG5mb3IodmFyIGQ9bmV3IENLRURJVE9SLmRvbS5kb2N1bWVudEZyYWdtZW50LGYsaCxwLG49MDtuPGMubGVuZ3RoO24rKyl7dmFyIGU9Y1tuXSxnPWUuc3RhcnRDb250YWluZXI7Zy5nZXROYW1lJiZcInRyXCI9PWcuZ2V0TmFtZSgpPyhmfHwoZj1nLmdldEFzY2VuZGFudChcInRhYmxlXCIpLmNsb25lKCksZi5hcHBlbmQoZy5nZXRBc2NlbmRhbnQoXCJ0Ym9keVwiKS5jbG9uZSgpKSxkLmFwcGVuZChmKSxmPWYuZmluZE9uZShcInRib2R5XCIpKSxoJiZoLmVxdWFscyhnKXx8KGg9ZyxwPWcuY2xvbmUoKSxmLmFwcGVuZChwKSkscC5hcHBlbmQoZS5jbG9uZUNvbnRlbnRzKCkpKTpkLmFwcGVuZChlLmNsb25lQ29udGVudHMoKSl9Yj1mP2Q6Yi5nZXRIdG1sRnJvbVJhbmdlKGNbMF0pO3JldHVybiBhP2IuZ2V0SHRtbCgpOmJ9LGV4dHJhY3RTZWxlY3RlZEh0bWw6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmVkaXRhYmxlKCksZD10aGlzLmdldFNlbGVjdGlvbigpLmdldFJhbmdlcygpO2lmKCFjfHwwPT09XG5kLmxlbmd0aClyZXR1cm4gbnVsbDtkPWRbMF07Yz1jLmV4dHJhY3RIdG1sRnJvbVJhbmdlKGQsYik7Ynx8dGhpcy5nZXRTZWxlY3Rpb24oKS5zZWxlY3RSYW5nZXMoW2RdKTtyZXR1cm4gYT9jLmdldEh0bWwoKTpjfSxmb2N1czpmdW5jdGlvbigpe3RoaXMuZmlyZShcImJlZm9yZUZvY3VzXCIpfSxjaGVja0RpcnR5OmZ1bmN0aW9uKCl7cmV0dXJuXCJyZWFkeVwiPT10aGlzLnN0YXR1cyYmdGhpcy5fLnByZXZpb3VzVmFsdWUhPT10aGlzLmdldFNuYXBzaG90KCl9LHJlc2V0RGlydHk6ZnVuY3Rpb24oKXt0aGlzLl8ucHJldmlvdXNWYWx1ZT10aGlzLmdldFNuYXBzaG90KCl9LHVwZGF0ZUVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gci5jYWxsKHRoaXMpfSxzZXRLZXlzdHJva2U6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5rZXlzdHJva2VIYW5kbGVyLmtleXN0cm9rZXMsYj1DS0VESVRPUi50b29scy5pc0FycmF5KGFyZ3VtZW50c1swXSk/YXJndW1lbnRzWzBdOltbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyxcbjApXSxjLGQsZj1iLmxlbmd0aDtmLS07KWM9YltmXSxkPTAsQ0tFRElUT1IudG9vbHMuaXNBcnJheShjKSYmKGQ9Y1sxXSxjPWNbMF0pLGQ/YVtjXT1kOmRlbGV0ZSBhW2NdfSxhZGRGZWF0dXJlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZpbHRlci5hZGRGZWF0dXJlKGEpfSxzZXRBY3RpdmVGaWx0ZXI6ZnVuY3Rpb24oYSl7YXx8KGE9dGhpcy5maWx0ZXIpO3RoaXMuYWN0aXZlRmlsdGVyIT09YSYmKHRoaXMuYWN0aXZlRmlsdGVyPWEsdGhpcy5maXJlKFwiYWN0aXZlRmlsdGVyQ2hhbmdlXCIpLGE9PT10aGlzLmZpbHRlcj90aGlzLnNldEFjdGl2ZUVudGVyTW9kZShudWxsLG51bGwpOnRoaXMuc2V0QWN0aXZlRW50ZXJNb2RlKGEuZ2V0QWxsb3dlZEVudGVyTW9kZSh0aGlzLmVudGVyTW9kZSksYS5nZXRBbGxvd2VkRW50ZXJNb2RlKHRoaXMuc2hpZnRFbnRlck1vZGUsITApKSl9LHNldEFjdGl2ZUVudGVyTW9kZTpmdW5jdGlvbihhLGIpe2E9YT90aGlzLmJsb2NrbGVzcz9DS0VESVRPUi5FTlRFUl9CUjpcbmE6dGhpcy5lbnRlck1vZGU7Yj1iP3RoaXMuYmxvY2tsZXNzP0NLRURJVE9SLkVOVEVSX0JSOmI6dGhpcy5zaGlmdEVudGVyTW9kZTtpZih0aGlzLmFjdGl2ZUVudGVyTW9kZSE9YXx8dGhpcy5hY3RpdmVTaGlmdEVudGVyTW9kZSE9Yil0aGlzLmFjdGl2ZUVudGVyTW9kZT1hLHRoaXMuYWN0aXZlU2hpZnRFbnRlck1vZGU9Yix0aGlzLmZpcmUoXCJhY3RpdmVFbnRlck1vZGVDaGFuZ2VcIil9LHNob3dOb3RpZmljYXRpb246ZnVuY3Rpb24oYSl7YWxlcnQoYSl9fSl9KSgpO0NLRURJVE9SLkVMRU1FTlRfTU9ERV9OT05FPTA7Q0tFRElUT1IuRUxFTUVOVF9NT0RFX1JFUExBQ0U9MTtDS0VESVRPUi5FTEVNRU5UX01PREVfQVBQRU5EVE89MjtDS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FPTM7Q0tFRElUT1IuaHRtbFBhcnNlcj1mdW5jdGlvbigpe3RoaXMuXz17aHRtbFBhcnRzUmVnZXg6LzwoPzooPzpcXC8oW14+XSspPil8KD86IS0tKFtcXFN8XFxzXSo/KS0tXFx4M2UpfCg/OihbXlxcL1xccz5dKykoKD86XFxzK1tcXHdcXC06Ll0rKD86XFxzKj1cXHMqPyg/Oig/OlwiW15cIl0qXCIpfCg/OidbXiddKicpfFteXFxzXCInXFwvPl0rKSk/KSopW1xcU1xcc10qPyhcXC8/KT4pKS9nfX07XG4oZnVuY3Rpb24oKXt2YXIgYT0vKFtcXHdcXC06Ll0rKSg/Oig/Olxccyo9XFxzKig/Oig/OlwiKFteXCJdKilcIil8KD86JyhbXiddKiknKXwoW15cXHM+XSspKSl8KD89XFxzfCQpKS9nLGQ9e2NoZWNrZWQ6MSxjb21wYWN0OjEsZGVjbGFyZToxLGRlZmVyOjEsZGlzYWJsZWQ6MSxpc21hcDoxLG11bHRpcGxlOjEsbm9ocmVmOjEsbm9yZXNpemU6MSxub3NoYWRlOjEsbm93cmFwOjEscmVhZG9ubHk6MSxzZWxlY3RlZDoxfTtDS0VESVRPUi5odG1sUGFyc2VyLnByb3RvdHlwZT17b25UYWdPcGVuOmZ1bmN0aW9uKCl7fSxvblRhZ0Nsb3NlOmZ1bmN0aW9uKCl7fSxvblRleHQ6ZnVuY3Rpb24oKXt9LG9uQ0RBVEE6ZnVuY3Rpb24oKXt9LG9uQ29tbWVudDpmdW5jdGlvbigpe30scGFyc2U6ZnVuY3Rpb24oYil7Zm9yKHZhciBjLGYsZz0wLGs7Yz10aGlzLl8uaHRtbFBhcnRzUmVnZXguZXhlYyhiKTspe2Y9Yy5pbmRleDtpZihmPmcpaWYoZz1iLnN1YnN0cmluZyhnLGYpLGspay5wdXNoKGcpO2Vsc2UgdGhpcy5vblRleHQoZyk7XG5nPXRoaXMuXy5odG1sUGFydHNSZWdleC5sYXN0SW5kZXg7aWYoZj1jWzFdKWlmKGY9Zi50b0xvd2VyQ2FzZSgpLGsmJkNLRURJVE9SLmR0ZC4kY2RhdGFbZl0mJih0aGlzLm9uQ0RBVEEoay5qb2luKFwiXCIpKSxrPW51bGwpLCFrKXt0aGlzLm9uVGFnQ2xvc2UoZik7Y29udGludWV9aWYoaylrLnB1c2goY1swXSk7ZWxzZSBpZihmPWNbM10pe2lmKGY9Zi50b0xvd2VyQ2FzZSgpLCEvPVwiLy50ZXN0KGYpKXt2YXIgbD17fSxtLHU9Y1s0XTtjPSEhY1s1XTtpZih1KWZvcig7bT1hLmV4ZWModSk7KXt2YXIgZT1tWzFdLnRvTG93ZXJDYXNlKCk7bT1tWzJdfHxtWzNdfHxtWzRdfHxcIlwiO2xbZV09IW0mJmRbZV0/ZTpDS0VESVRPUi50b29scy5odG1sRGVjb2RlQXR0cihtKX10aGlzLm9uVGFnT3BlbihmLGwsYyk7IWsmJkNLRURJVE9SLmR0ZC4kY2RhdGFbZl0mJihrPVtdKX19ZWxzZSBpZihmPWNbMl0pdGhpcy5vbkNvbW1lbnQoZil9aWYoYi5sZW5ndGg+Zyl0aGlzLm9uVGV4dChiLnN1YnN0cmluZyhnLFxuYi5sZW5ndGgpKX19fSkoKTtcbkNLRURJVE9SLmh0bWxQYXJzZXIuYmFzaWNXcml0ZXI9Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3MoeyQ6ZnVuY3Rpb24oKXt0aGlzLl89e291dHB1dDpbXX19LHByb3RvOntvcGVuVGFnOmZ1bmN0aW9uKGEpe3RoaXMuXy5vdXRwdXQucHVzaChcIlxceDNjXCIsYSl9LG9wZW5UYWdDbG9zZTpmdW5jdGlvbihhLGQpe2Q/dGhpcy5fLm91dHB1dC5wdXNoKFwiIC9cXHgzZVwiKTp0aGlzLl8ub3V0cHV0LnB1c2goXCJcXHgzZVwiKX0sYXR0cmlidXRlOmZ1bmN0aW9uKGEsZCl7XCJzdHJpbmdcIj09dHlwZW9mIGQmJihkPUNLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGVBdHRyKGQpKTt0aGlzLl8ub3V0cHV0LnB1c2goXCIgXCIsYSwnXFx4M2RcIicsZCwnXCInKX0sY2xvc2VUYWc6ZnVuY3Rpb24oYSl7dGhpcy5fLm91dHB1dC5wdXNoKFwiXFx4M2MvXCIsYSxcIlxceDNlXCIpfSx0ZXh0OmZ1bmN0aW9uKGEpe3RoaXMuXy5vdXRwdXQucHVzaChhKX0sY29tbWVudDpmdW5jdGlvbihhKXt0aGlzLl8ub3V0cHV0LnB1c2goXCJcXHgzYyEtLVwiLGEsXG5cIi0tXFx4M2VcIil9LHdyaXRlOmZ1bmN0aW9uKGEpe3RoaXMuXy5vdXRwdXQucHVzaChhKX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl8ub3V0cHV0PVtdO3RoaXMuXy5pbmRlbnQ9ITF9LGdldEh0bWw6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy5fLm91dHB1dC5qb2luKFwiXCIpO2EmJnRoaXMucmVzZXQoKTtyZXR1cm4gZH19fSk7XCJ1c2Ugc3RyaWN0XCI7XG4oZnVuY3Rpb24oKXtDS0VESVRPUi5odG1sUGFyc2VyLm5vZGU9ZnVuY3Rpb24oKXt9O0NLRURJVE9SLmh0bWxQYXJzZXIubm9kZS5wcm90b3R5cGU9e3JlbW92ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFyZW50LmNoaWxkcmVuLGQ9Q0tFRElUT1IudG9vbHMuaW5kZXhPZihhLHRoaXMpLGI9dGhpcy5wcmV2aW91cyxjPXRoaXMubmV4dDtiJiYoYi5uZXh0PWMpO2MmJihjLnByZXZpb3VzPWIpO2Euc3BsaWNlKGQsMSk7dGhpcy5wYXJlbnQ9bnVsbH0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcy5wYXJlbnQuY2hpbGRyZW4sYj1DS0VESVRPUi50b29scy5pbmRleE9mKGQsdGhpcyksYz1hLnByZXZpb3VzPXRoaXMucHJldmlvdXMsZj1hLm5leHQ9dGhpcy5uZXh0O2MmJihjLm5leHQ9YSk7ZiYmKGYucHJldmlvdXM9YSk7ZFtiXT1hO2EucGFyZW50PXRoaXMucGFyZW50O3RoaXMucGFyZW50PW51bGx9LGluc2VydEFmdGVyOmZ1bmN0aW9uKGEpe3ZhciBkPWEucGFyZW50LmNoaWxkcmVuLFxuYj1DS0VESVRPUi50b29scy5pbmRleE9mKGQsYSksYz1hLm5leHQ7ZC5zcGxpY2UoYisxLDAsdGhpcyk7dGhpcy5uZXh0PWEubmV4dDt0aGlzLnByZXZpb3VzPWE7YS5uZXh0PXRoaXM7YyYmKGMucHJldmlvdXM9dGhpcyk7dGhpcy5wYXJlbnQ9YS5wYXJlbnR9LGluc2VydEJlZm9yZTpmdW5jdGlvbihhKXt2YXIgZD1hLnBhcmVudC5jaGlsZHJlbixiPUNLRURJVE9SLnRvb2xzLmluZGV4T2YoZCxhKTtkLnNwbGljZShiLDAsdGhpcyk7dGhpcy5uZXh0PWE7KHRoaXMucHJldmlvdXM9YS5wcmV2aW91cykmJihhLnByZXZpb3VzLm5leHQ9dGhpcyk7YS5wcmV2aW91cz10aGlzO3RoaXMucGFyZW50PWEucGFyZW50fSxnZXRBc2NlbmRhbnQ6ZnVuY3Rpb24oYSl7dmFyIGQ9XCJmdW5jdGlvblwiPT10eXBlb2YgYT9hOlwic3RyaW5nXCI9PXR5cGVvZiBhP2Z1bmN0aW9uKGIpe3JldHVybiBiLm5hbWU9PWF9OmZ1bmN0aW9uKGIpe3JldHVybiBiLm5hbWUgaW4gYX0sYj10aGlzLnBhcmVudDtmb3IoO2ImJlxuYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ7KXtpZihkKGIpKXJldHVybiBiO2I9Yi5wYXJlbnR9cmV0dXJuIG51bGx9LHdyYXBXaXRoOmZ1bmN0aW9uKGEpe3RoaXMucmVwbGFjZVdpdGgoYSk7YS5hZGQodGhpcyk7cmV0dXJuIGF9LGdldEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIENLRURJVE9SLnRvb2xzLmluZGV4T2YodGhpcy5wYXJlbnQuY2hpbGRyZW4sdGhpcyl9LGdldEZpbHRlckNvbnRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGF8fHt9fX19KSgpO1widXNlIHN0cmljdFwiO0NLRURJVE9SLmh0bWxQYXJzZXIuY29tbWVudD1mdW5jdGlvbihhKXt0aGlzLnZhbHVlPWE7dGhpcy5fPXtpc0Jsb2NrTGlrZTohMX19O1xuQ0tFRElUT1IuaHRtbFBhcnNlci5jb21tZW50LnByb3RvdHlwZT1DS0VESVRPUi50b29scy5leHRlbmQobmV3IENLRURJVE9SLmh0bWxQYXJzZXIubm9kZSx7dHlwZTpDS0VESVRPUi5OT0RFX0NPTU1FTlQsZmlsdGVyOmZ1bmN0aW9uKGEsZCl7dmFyIGI9dGhpcy52YWx1ZTtpZighKGI9YS5vbkNvbW1lbnQoZCxiLHRoaXMpKSlyZXR1cm4gdGhpcy5yZW1vdmUoKSwhMTtpZihcInN0cmluZ1wiIT10eXBlb2YgYilyZXR1cm4gdGhpcy5yZXBsYWNlV2l0aChiKSwhMTt0aGlzLnZhbHVlPWI7cmV0dXJuITB9LHdyaXRlSHRtbDpmdW5jdGlvbihhLGQpe2QmJnRoaXMuZmlsdGVyKGQpO2EuY29tbWVudCh0aGlzLnZhbHVlKX19KTtcInVzZSBzdHJpY3RcIjtcbihmdW5jdGlvbigpe0NLRURJVE9SLmh0bWxQYXJzZXIudGV4dD1mdW5jdGlvbihhKXt0aGlzLnZhbHVlPWE7dGhpcy5fPXtpc0Jsb2NrTGlrZTohMX19O0NLRURJVE9SLmh0bWxQYXJzZXIudGV4dC5wcm90b3R5cGU9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKG5ldyBDS0VESVRPUi5odG1sUGFyc2VyLm5vZGUse3R5cGU6Q0tFRElUT1IuTk9ERV9URVhULGZpbHRlcjpmdW5jdGlvbihhLGQpe2lmKCEodGhpcy52YWx1ZT1hLm9uVGV4dChkLHRoaXMudmFsdWUsdGhpcykpKXJldHVybiB0aGlzLnJlbW92ZSgpLCExfSx3cml0ZUh0bWw6ZnVuY3Rpb24oYSxkKXtkJiZ0aGlzLmZpbHRlcihkKTthLnRleHQodGhpcy52YWx1ZSl9fSl9KSgpO1widXNlIHN0cmljdFwiO1xuKGZ1bmN0aW9uKCl7Q0tFRElUT1IuaHRtbFBhcnNlci5jZGF0YT1mdW5jdGlvbihhKXt0aGlzLnZhbHVlPWF9O0NLRURJVE9SLmh0bWxQYXJzZXIuY2RhdGEucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5ub2RlLHt0eXBlOkNLRURJVE9SLk5PREVfVEVYVCxmaWx0ZXI6ZnVuY3Rpb24oKXt9LHdyaXRlSHRtbDpmdW5jdGlvbihhKXthLndyaXRlKHRoaXMudmFsdWUpfX0pfSkoKTtcInVzZSBzdHJpY3RcIjtDS0VESVRPUi5odG1sUGFyc2VyLmZyYWdtZW50PWZ1bmN0aW9uKCl7dGhpcy5jaGlsZHJlbj1bXTt0aGlzLnBhcmVudD1udWxsO3RoaXMuXz17aXNCbG9ja0xpa2U6ITAsaGFzSW5saW5lU3RhcnRlZDohMX19O1xuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gYS5hdHRyaWJ1dGVzW1wiZGF0YS1ja2Utc3Vydml2ZVwiXT8hMTpcImFcIj09YS5uYW1lJiZhLmF0dHJpYnV0ZXMuaHJlZnx8Q0tFRElUT1IuZHRkLiRyZW1vdmVFbXB0eVthLm5hbWVdfXZhciBkPUNLRURJVE9SLnRvb2xzLmV4dGVuZCh7dGFibGU6MSx1bDoxLG9sOjEsZGw6MX0sQ0tFRElUT1IuZHRkLnRhYmxlLENLRURJVE9SLmR0ZC51bCxDS0VESVRPUi5kdGQub2wsQ0tFRElUT1IuZHRkLmRsKSxiPXtvbDoxLHVsOjF9LGM9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LHtodG1sOjF9LENLRURJVE9SLmR0ZC5odG1sLENLRURJVE9SLmR0ZC5ib2R5LENLRURJVE9SLmR0ZC5oZWFkLHtzdHlsZToxLHNjcmlwdDoxfSksZj17dWw6XCJsaVwiLG9sOlwibGlcIixkbDpcImRkXCIsdGFibGU6XCJ0Ym9keVwiLHRib2R5OlwidHJcIix0aGVhZDpcInRyXCIsdGZvb3Q6XCJ0clwiLHRyOlwidGRcIn07Q0tFRElUT1IuaHRtbFBhcnNlci5mcmFnbWVudC5mcm9tSHRtbD1cbmZ1bmN0aW9uKGcsayxsKXtmdW5jdGlvbiBtKGEpe3ZhciBiO2lmKDA8dy5sZW5ndGgpZm9yKHZhciBjPTA7Yzx3Lmxlbmd0aDtjKyspe3ZhciBkPXdbY10saD1kLm5hbWUsZj1DS0VESVRPUi5kdGRbaF0sZT10Lm5hbWUmJkNLRURJVE9SLmR0ZFt0Lm5hbWVdO2UmJiFlW2hdfHxhJiZmJiYhZlthXSYmQ0tFRElUT1IuZHRkW2FdP2g9PXQubmFtZSYmKEEodCx0LnBhcmVudCwxKSxjLS0pOihifHwodSgpLGI9MSksZD1kLmNsb25lKCksZC5wYXJlbnQ9dCx0PWQsdy5zcGxpY2UoYywxKSxjLS0pfX1mdW5jdGlvbiB1KCl7Zm9yKDtILmxlbmd0aDspQShILnNoaWZ0KCksdCl9ZnVuY3Rpb24gZShhKXtpZihhLl8uaXNCbG9ja0xpa2UmJlwicHJlXCIhPWEubmFtZSYmXCJ0ZXh0YXJlYVwiIT1hLm5hbWUpe3ZhciBiPWEuY2hpbGRyZW4ubGVuZ3RoLGM9YS5jaGlsZHJlbltiLTFdLGQ7YyYmYy50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJigoZD1DS0VESVRPUi50b29scy5ydHJpbShjLnZhbHVlKSk/XG5jLnZhbHVlPWQ6YS5jaGlsZHJlbi5sZW5ndGg9Yi0xKX19ZnVuY3Rpb24gQShiLGMsZCl7Yz1jfHx0fHxxO3ZhciBmPXQ7dm9pZCAwPT09Yi5wcmV2aW91cyYmKHIoYyxiKSYmKHQ9YyxELm9uVGFnT3BlbihsLHt9KSxiLnJldHVyblBvaW50PWM9dCksZShiKSxhKGIpJiYhYi5jaGlsZHJlbi5sZW5ndGh8fGMuYWRkKGIpLFwicHJlXCI9PWIubmFtZSYmKGg9ITEpLFwidGV4dGFyZWFcIj09Yi5uYW1lJiYodj0hMSkpO2IucmV0dXJuUG9pbnQ/KHQ9Yi5yZXR1cm5Qb2ludCxkZWxldGUgYi5yZXR1cm5Qb2ludCk6dD1kP2M6Zn1mdW5jdGlvbiByKGEsYil7aWYoKGE9PXF8fFwiYm9keVwiPT1hLm5hbWUpJiZsJiYoIWEubmFtZXx8Q0tFRElUT1IuZHRkW2EubmFtZV1bbF0pKXt2YXIgYyxkO3JldHVybihjPWIuYXR0cmlidXRlcyYmKGQ9Yi5hdHRyaWJ1dGVzW1wiZGF0YS1ja2UtcmVhbC1lbGVtZW50LXR5cGVcIl0pP2Q6Yi5uYW1lKSYmYyBpbiBDS0VESVRPUi5kdGQuJGlubGluZSYmIShjIGluIENLRURJVE9SLmR0ZC5oZWFkKSYmXG4hYi5pc09ycGhhbnx8Yi50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFR9fWZ1bmN0aW9uIHgoYSxiKXtyZXR1cm4gYSBpbiBDS0VESVRPUi5kdGQuJGxpc3RJdGVtfHxhIGluIENLRURJVE9SLmR0ZC4kdGFibGVDb250ZW50P2E9PWJ8fFwiZHRcIj09YSYmXCJkZFwiPT1ifHxcImRkXCI9PWEmJlwiZHRcIj09YjohMX12YXIgRD1uZXcgQ0tFRElUT1IuaHRtbFBhcnNlcixxPWsgaW5zdGFuY2VvZiBDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQ/azpcInN0cmluZ1wiPT10eXBlb2Ygaz9uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50KGspOm5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmZyYWdtZW50LHc9W10sSD1bXSx0PXEsdj1cInRleHRhcmVhXCI9PXEubmFtZSxoPVwicHJlXCI9PXEubmFtZTtELm9uVGFnT3Blbj1mdW5jdGlvbihmLG4sZSxnKXtuPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQoZixuKTtuLmlzVW5rbm93biYmZSYmKG4uaXNFbXB0eT0hMCk7bi5pc09wdGlvbmFsQ2xvc2U9ZztcbmlmKGEobikpdy5wdXNoKG4pO2Vsc2V7aWYoXCJwcmVcIj09ZiloPSEwO2Vsc2V7aWYoXCJiclwiPT1mJiZoKXt0LmFkZChuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci50ZXh0KFwiXFxuXCIpKTtyZXR1cm59XCJ0ZXh0YXJlYVwiPT1mJiYodj0hMCl9aWYoXCJiclwiPT1mKUgucHVzaChuKTtlbHNle2Zvcig7IShnPShlPXQubmFtZSk/Q0tFRElUT1IuZHRkW2VdfHwodC5fLmlzQmxvY2tMaWtlP0NLRURJVE9SLmR0ZC5kaXY6Q0tFRElUT1IuZHRkLnNwYW4pOmMsbi5pc1Vua25vd258fHQuaXNVbmtub3dufHxnW2ZdKTspaWYodC5pc09wdGlvbmFsQ2xvc2UpRC5vblRhZ0Nsb3NlKGUpO2Vsc2UgaWYoZiBpbiBiJiZlIGluIGIpZT10LmNoaWxkcmVuLChlPWVbZS5sZW5ndGgtMV0pJiZcImxpXCI9PWUubmFtZXx8QShlPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQoXCJsaVwiKSx0KSwhbi5yZXR1cm5Qb2ludCYmKG4ucmV0dXJuUG9pbnQ9dCksdD1lO2Vsc2UgaWYoZiBpbiBDS0VESVRPUi5kdGQuJGxpc3RJdGVtJiZcbiF4KGYsZSkpRC5vblRhZ09wZW4oXCJsaVwiPT1mP1widWxcIjpcImRsXCIse30sMCwxKTtlbHNlIGlmKGUgaW4gZCYmIXgoZixlKSkhbi5yZXR1cm5Qb2ludCYmKG4ucmV0dXJuUG9pbnQ9dCksdD10LnBhcmVudDtlbHNlIGlmKGUgaW4gQ0tFRElUT1IuZHRkLiRpbmxpbmUmJncudW5zaGlmdCh0KSx0LnBhcmVudClBKHQsdC5wYXJlbnQsMSk7ZWxzZXtuLmlzT3JwaGFuPTE7YnJlYWt9bShmKTt1KCk7bi5wYXJlbnQ9dDtuLmlzRW1wdHk/QShuKTp0PW59fX07RC5vblRhZ0Nsb3NlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj13Lmxlbmd0aC0xOzA8PWI7Yi0tKWlmKGE9PXdbYl0ubmFtZSl7dy5zcGxpY2UoYiwxKTtyZXR1cm59Zm9yKHZhciBjPVtdLGQ9W10saD10O2ghPXEmJmgubmFtZSE9YTspaC5fLmlzQmxvY2tMaWtlfHxkLnVuc2hpZnQoaCksYy5wdXNoKGgpLGg9aC5yZXR1cm5Qb2ludHx8aC5wYXJlbnQ7aWYoaCE9cSl7Zm9yKGI9MDtiPGMubGVuZ3RoO2IrKyl7dmFyIGY9Y1tiXTtBKGYsZi5wYXJlbnQpfXQ9XG5oO2guXy5pc0Jsb2NrTGlrZSYmdSgpO0EoaCxoLnBhcmVudCk7aD09dCYmKHQ9dC5wYXJlbnQpO3c9dy5jb25jYXQoZCl9XCJib2R5XCI9PWEmJihsPSExKX07RC5vblRleHQ9ZnVuY3Rpb24oYSl7aWYoISh0Ll8uaGFzSW5saW5lU3RhcnRlZCYmIUgubGVuZ3RofHxofHx2KSYmKGE9Q0tFRElUT1IudG9vbHMubHRyaW0oYSksMD09PWEubGVuZ3RoKSlyZXR1cm47dmFyIGI9dC5uYW1lLGU9Yj9DS0VESVRPUi5kdGRbYl18fCh0Ll8uaXNCbG9ja0xpa2U/Q0tFRElUT1IuZHRkLmRpdjpDS0VESVRPUi5kdGQuc3Bhbik6YztpZighdiYmIWVbXCIjXCJdJiZiIGluIGQpRC5vblRhZ09wZW4oZltiXXx8XCJcIiksRC5vblRleHQoYSk7ZWxzZXt1KCk7bSgpO2h8fHZ8fChhPWEucmVwbGFjZSgvW1xcdFxcclxcbiBdezIsfXxbXFx0XFxyXFxuXS9nLFwiIFwiKSk7YT1uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci50ZXh0KGEpO2lmKHIodCxhKSl0aGlzLm9uVGFnT3BlbihsLHt9LDAsMSk7dC5hZGQoYSl9fTtELm9uQ0RBVEE9XG5mdW5jdGlvbihhKXt0LmFkZChuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5jZGF0YShhKSl9O0Qub25Db21tZW50PWZ1bmN0aW9uKGEpe3UoKTttKCk7dC5hZGQobmV3IENLRURJVE9SLmh0bWxQYXJzZXIuY29tbWVudChhKSl9O0QucGFyc2UoZyk7Zm9yKHUoKTt0IT1xOylBKHQsdC5wYXJlbnQsMSk7ZShxKTtyZXR1cm4gcX07Q0tFRElUT1IuaHRtbFBhcnNlci5mcmFnbWVudC5wcm90b3R5cGU9e3R5cGU6Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVCxhZGQ6ZnVuY3Rpb24oYSxiKXtpc05hTihiKSYmKGI9dGhpcy5jaGlsZHJlbi5sZW5ndGgpO3ZhciBjPTA8Yj90aGlzLmNoaWxkcmVuW2ItMV06bnVsbDtpZihjKXtpZihhLl8uaXNCbG9ja0xpa2UmJmMudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYoYy52YWx1ZT1DS0VESVRPUi50b29scy5ydHJpbShjLnZhbHVlKSwwPT09Yy52YWx1ZS5sZW5ndGgpKXt0aGlzLmNoaWxkcmVuLnBvcCgpO3RoaXMuYWRkKGEpO3JldHVybn1jLm5leHQ9XG5hfWEucHJldmlvdXM9YzthLnBhcmVudD10aGlzO3RoaXMuY2hpbGRyZW4uc3BsaWNlKGIsMCxhKTt0aGlzLl8uaGFzSW5saW5lU3RhcnRlZHx8KHRoaXMuXy5oYXNJbmxpbmVTdGFydGVkPWEudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUfHxhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmIWEuXy5pc0Jsb2NrTGlrZSl9LGZpbHRlcjpmdW5jdGlvbihhLGIpe2I9dGhpcy5nZXRGaWx0ZXJDb250ZXh0KGIpO2Eub25Sb290KGIsdGhpcyk7dGhpcy5maWx0ZXJDaGlsZHJlbihhLCExLGIpfSxmaWx0ZXJDaGlsZHJlbjpmdW5jdGlvbihhLGIsYyl7aWYodGhpcy5jaGlsZHJlbkZpbHRlcmVkQnkhPWEuaWQpe2M9dGhpcy5nZXRGaWx0ZXJDb250ZXh0KGMpO2lmKGImJiF0aGlzLnBhcmVudClhLm9uUm9vdChjLHRoaXMpO3RoaXMuY2hpbGRyZW5GaWx0ZXJlZEJ5PWEuaWQ7Zm9yKGI9MDtiPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2IrKykhMT09PXRoaXMuY2hpbGRyZW5bYl0uZmlsdGVyKGEsXG5jKSYmYi0tfX0sd3JpdGVIdG1sOmZ1bmN0aW9uKGEsYil7YiYmdGhpcy5maWx0ZXIoYik7dGhpcy53cml0ZUNoaWxkcmVuSHRtbChhKX0sd3JpdGVDaGlsZHJlbkh0bWw6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZ2V0RmlsdGVyQ29udGV4dCgpO2lmKGMmJiF0aGlzLnBhcmVudCYmYiliLm9uUm9vdChkLHRoaXMpO2ImJnRoaXMuZmlsdGVyQ2hpbGRyZW4oYiwhMSxkKTtiPTA7Yz10aGlzLmNoaWxkcmVuO2ZvcihkPWMubGVuZ3RoO2I8ZDtiKyspY1tiXS53cml0ZUh0bWwoYSl9LGZvckVhY2g6ZnVuY3Rpb24oYSxiLGMpe2lmKCEoY3x8YiYmdGhpcy50eXBlIT1iKSl2YXIgZD1hKHRoaXMpO2lmKCExIT09ZCl7Yz10aGlzLmNoaWxkcmVuO2Zvcih2YXIgZj0wO2Y8Yy5sZW5ndGg7ZisrKWQ9Y1tmXSxkLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVD9kLmZvckVhY2goYSxiKTpiJiZkLnR5cGUhPWJ8fGEoZCl9fSxnZXRGaWx0ZXJDb250ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhfHxcbnt9fX19KSgpO1widXNlIHN0cmljdFwiO1xuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3RoaXMucnVsZXM9W119ZnVuY3Rpb24gZChiLGMsZCxnKXt2YXIgayxsO2ZvcihrIGluIGMpKGw9YltrXSl8fChsPWJba109bmV3IGEpLGwuYWRkKGNba10sZCxnKX1DS0VESVRPUi5odG1sUGFyc2VyLmZpbHRlcj1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7JDpmdW5jdGlvbihiKXt0aGlzLmlkPUNLRURJVE9SLnRvb2xzLmdldE5leHROdW1iZXIoKTt0aGlzLmVsZW1lbnROYW1lUnVsZXM9bmV3IGE7dGhpcy5hdHRyaWJ1dGVOYW1lUnVsZXM9bmV3IGE7dGhpcy5lbGVtZW50c1J1bGVzPXt9O3RoaXMuYXR0cmlidXRlc1J1bGVzPXt9O3RoaXMudGV4dFJ1bGVzPW5ldyBhO3RoaXMuY29tbWVudFJ1bGVzPW5ldyBhO3RoaXMucm9vdFJ1bGVzPW5ldyBhO2ImJnRoaXMuYWRkUnVsZXMoYiwxMCl9LHByb3RvOnthZGRSdWxlczpmdW5jdGlvbihhLGMpe3ZhciBmO1wibnVtYmVyXCI9PXR5cGVvZiBjP2Y9YzpjJiZcInByaW9yaXR5XCJpbiBjJiYoZj1cbmMucHJpb3JpdHkpO1wibnVtYmVyXCIhPXR5cGVvZiBmJiYoZj0xMCk7XCJvYmplY3RcIiE9dHlwZW9mIGMmJihjPXt9KTthLmVsZW1lbnROYW1lcyYmdGhpcy5lbGVtZW50TmFtZVJ1bGVzLmFkZE1hbnkoYS5lbGVtZW50TmFtZXMsZixjKTthLmF0dHJpYnV0ZU5hbWVzJiZ0aGlzLmF0dHJpYnV0ZU5hbWVSdWxlcy5hZGRNYW55KGEuYXR0cmlidXRlTmFtZXMsZixjKTthLmVsZW1lbnRzJiZkKHRoaXMuZWxlbWVudHNSdWxlcyxhLmVsZW1lbnRzLGYsYyk7YS5hdHRyaWJ1dGVzJiZkKHRoaXMuYXR0cmlidXRlc1J1bGVzLGEuYXR0cmlidXRlcyxmLGMpO2EudGV4dCYmdGhpcy50ZXh0UnVsZXMuYWRkKGEudGV4dCxmLGMpO2EuY29tbWVudCYmdGhpcy5jb21tZW50UnVsZXMuYWRkKGEuY29tbWVudCxmLGMpO2Eucm9vdCYmdGhpcy5yb290UnVsZXMuYWRkKGEucm9vdCxmLGMpfSxhcHBseVRvOmZ1bmN0aW9uKGEpe2EuZmlsdGVyKHRoaXMpfSxvbkVsZW1lbnROYW1lOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIHRoaXMuZWxlbWVudE5hbWVSdWxlcy5leGVjT25OYW1lKGEsXG5jKX0sb25BdHRyaWJ1dGVOYW1lOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIHRoaXMuYXR0cmlidXRlTmFtZVJ1bGVzLmV4ZWNPbk5hbWUoYSxjKX0sb25UZXh0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy50ZXh0UnVsZXMuZXhlYyhhLGMsZCl9LG9uQ29tbWVudDpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuY29tbWVudFJ1bGVzLmV4ZWMoYSxjLGQpfSxvblJvb3Q6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gdGhpcy5yb290UnVsZXMuZXhlYyhhLGMpfSxvbkVsZW1lbnQ6ZnVuY3Rpb24oYSxjKXtmb3IodmFyIGQ9W3RoaXMuZWxlbWVudHNSdWxlc1tcIl5cIl0sdGhpcy5lbGVtZW50c1J1bGVzW2MubmFtZV0sdGhpcy5lbGVtZW50c1J1bGVzLiRdLGcsaz0wOzM+aztrKyspaWYoZz1kW2tdKXtnPWcuZXhlYyhhLGMsdGhpcyk7aWYoITE9PT1nKXJldHVybiBudWxsO2lmKGcmJmchPWMpcmV0dXJuIHRoaXMub25Ob2RlKGEsZyk7aWYoYy5wYXJlbnQmJiFjLm5hbWUpYnJlYWt9cmV0dXJuIGN9LFxub25Ob2RlOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9Yy50eXBlO3JldHVybiBkPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/dGhpcy5vbkVsZW1lbnQoYSxjKTpkPT1DS0VESVRPUi5OT0RFX1RFWFQ/bmV3IENLRURJVE9SLmh0bWxQYXJzZXIudGV4dCh0aGlzLm9uVGV4dChhLGMudmFsdWUpKTpkPT1DS0VESVRPUi5OT0RFX0NPTU1FTlQ/bmV3IENLRURJVE9SLmh0bWxQYXJzZXIuY29tbWVudCh0aGlzLm9uQ29tbWVudChhLGMudmFsdWUpKTpudWxsfSxvbkF0dHJpYnV0ZTpmdW5jdGlvbihhLGMsZCxnKXtyZXR1cm4oZD10aGlzLmF0dHJpYnV0ZXNSdWxlc1tkXSk/ZC5leGVjKGEsZyxjLHRoaXMpOmd9fX0pO0NLRURJVE9SLmh0bWxQYXJzZXIuZmlsdGVyUnVsZXNHcm91cD1hO2EucHJvdG90eXBlPXthZGQ6ZnVuY3Rpb24oYSxjLGQpe3RoaXMucnVsZXMuc3BsaWNlKHRoaXMuZmluZEluZGV4KGMpLDAse3ZhbHVlOmEscHJpb3JpdHk6YyxvcHRpb25zOmR9KX0sYWRkTWFueTpmdW5jdGlvbihhLFxuYyxkKXtmb3IodmFyIGc9W3RoaXMuZmluZEluZGV4KGMpLDBdLGs9MCxsPWEubGVuZ3RoO2s8bDtrKyspZy5wdXNoKHt2YWx1ZTphW2tdLHByaW9yaXR5OmMsb3B0aW9uczpkfSk7dGhpcy5ydWxlcy5zcGxpY2UuYXBwbHkodGhpcy5ydWxlcyxnKX0sZmluZEluZGV4OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz10aGlzLnJ1bGVzLGQ9Yy5sZW5ndGgtMTswPD1kJiZhPGNbZF0ucHJpb3JpdHk7KWQtLTtyZXR1cm4gZCsxfSxleGVjOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9YyBpbnN0YW5jZW9mIENLRURJVE9SLmh0bWxQYXJzZXIubm9kZXx8YyBpbnN0YW5jZW9mIENLRURJVE9SLmh0bWxQYXJzZXIuZnJhZ21lbnQsZz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSksaz10aGlzLnJ1bGVzLGw9ay5sZW5ndGgsbSx1LGUsQTtmb3IoQT0wO0E8bDtBKyspaWYoZCYmKG09Yy50eXBlLHU9Yy5uYW1lKSxlPWtbQV0sIShhLm5vbkVkaXRhYmxlJiYhZS5vcHRpb25zLmFwcGx5VG9BbGx8fFxuYS5uZXN0ZWRFZGl0YWJsZSYmZS5vcHRpb25zLmV4Y2x1ZGVOZXN0ZWRFZGl0YWJsZSkpe2U9ZS52YWx1ZS5hcHBseShudWxsLGcpO2lmKCExPT09ZXx8ZCYmZSYmKGUubmFtZSE9dXx8ZS50eXBlIT1tKSlyZXR1cm4gZTtudWxsIT1lJiYoZ1swXT1jPWUpfXJldHVybiBjfSxleGVjT25OYW1lOmZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBkPTAsZz10aGlzLnJ1bGVzLGs9Zy5sZW5ndGgsbDtjJiZkPGs7ZCsrKWw9Z1tkXSxhLm5vbkVkaXRhYmxlJiYhbC5vcHRpb25zLmFwcGx5VG9BbGx8fGEubmVzdGVkRWRpdGFibGUmJmwub3B0aW9ucy5leGNsdWRlTmVzdGVkRWRpdGFibGV8fChjPWMucmVwbGFjZShsLnZhbHVlWzBdLGwudmFsdWVbMV0pKTtyZXR1cm4gY319fSkoKTtcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxkKXtmdW5jdGlvbiBlKGEpe3JldHVybiBhfHxDS0VESVRPUi5lbnYubmVlZHNOYnNwRmlsbGVyP25ldyBDS0VESVRPUi5odG1sUGFyc2VyLnRleHQoXCLCoFwiKTpuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50KFwiYnJcIix7XCJkYXRhLWNrZS1ib2d1c1wiOjF9KX1mdW5jdGlvbiBuKGEsZCl7cmV0dXJuIGZ1bmN0aW9uKGgpe2lmKGgudHlwZSE9Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVCl7dmFyIGY9W10sbj1iKGgpLHYsRjtpZihuKWZvcihwKG4sMSkmJmYucHVzaChuKTtuOylnKG4pJiYodj1jKG4pKSYmcCh2KSYmKChGPWModikpJiYhZyhGKT9mLnB1c2godik6KGUoeSkuaW5zZXJ0QWZ0ZXIodiksdi5yZW1vdmUoKSkpLG49bi5wcmV2aW91cztmb3Iobj0wO248Zi5sZW5ndGg7bisrKWZbbl0ucmVtb3ZlKCk7aWYoZj0hYXx8ITEhPT0oXCJmdW5jdGlvblwiPT10eXBlb2YgZD9kKGgpOmQpKXl8fENLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyfHxcbmgudHlwZSE9Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVD95fHxDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlcnx8ISg3PGRvY3VtZW50LmRvY3VtZW50TW9kZXx8aC5uYW1lIGluIENLRURJVE9SLmR0ZC50cnx8aC5uYW1lIGluIENLRURJVE9SLmR0ZC4kbGlzdEl0ZW0pPyhmPWIoaCksZj0hZnx8XCJmb3JtXCI9PWgubmFtZSYmXCJpbnB1dFwiPT1mLm5hbWUpOmY9ITE6Zj0hMTtmJiZoLmFkZChlKGEpKX19fWZ1bmN0aW9uIHAoYSxiKXtpZigoIXl8fENLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyKSYmYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJlwiYnJcIj09YS5uYW1lJiYhYS5hdHRyaWJ1dGVzW1wiZGF0YS1ja2UtZW9sXCJdKXJldHVybiEwO3ZhciBjO3JldHVybiBhLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGM9YS52YWx1ZS5tYXRjaCh3KSkmJihjLmluZGV4JiYoKG5ldyBDS0VESVRPUi5odG1sUGFyc2VyLnRleHQoYS52YWx1ZS5zdWJzdHJpbmcoMCxjLmluZGV4KSkpLmluc2VydEJlZm9yZShhKSxcbmEudmFsdWU9Y1swXSksIUNLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyJiZ5JiYoIWJ8fGEucGFyZW50Lm5hbWUgaW4gQil8fCF5JiYoKGM9YS5wcmV2aW91cykmJlwiYnJcIj09Yy5uYW1lfHwhY3x8ZyhjKSkpPyEwOiExfXZhciB2PXtlbGVtZW50czp7fX0seT1cImh0bWxcIj09ZCxCPUNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSxoKSx6O2Zvcih6IGluIEIpXCIjXCJpbiB0W3pdfHxkZWxldGUgQlt6XTtmb3IoeiBpbiBCKXYuZWxlbWVudHNbel09bih5LGEuY29uZmlnLmZpbGxFbXB0eUJsb2Nrcyk7di5yb290PW4oeSwhMSk7di5lbGVtZW50cy5icj1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7aWYoYi5wYXJlbnQudHlwZSE9Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVCl7dmFyIGQ9Yi5hdHRyaWJ1dGVzO2lmKFwiZGF0YS1ja2UtYm9ndXNcImluIGR8fFwiZGF0YS1ja2UtZW9sXCJpbiBkKWRlbGV0ZSBkW1wiZGF0YS1ja2UtYm9ndXNcIl07ZWxzZXtmb3IoZD1iLm5leHQ7ZCYmZihkKTspZD1cbmQubmV4dDt2YXIgaD1jKGIpOyFkJiZnKGIucGFyZW50KT9rKGIucGFyZW50LGUoYSkpOmcoZCkmJmgmJiFnKGgpJiZlKGEpLmluc2VydEJlZm9yZShkKX19fX0oeSk7cmV0dXJuIHZ9ZnVuY3Rpb24gZChhLGIpe3JldHVybiBhIT1DS0VESVRPUi5FTlRFUl9CUiYmITEhPT1iP2E9PUNLRURJVE9SLkVOVEVSX0RJVj9cImRpdlwiOlwicFwiOiExfWZ1bmN0aW9uIGIoYSl7Zm9yKGE9YS5jaGlsZHJlblthLmNoaWxkcmVuLmxlbmd0aC0xXTthJiZmKGEpOylhPWEucHJldmlvdXM7cmV0dXJuIGF9ZnVuY3Rpb24gYyhhKXtmb3IoYT1hLnByZXZpb3VzO2EmJmYoYSk7KWE9YS5wcmV2aW91cztyZXR1cm4gYX1mdW5jdGlvbiBmKGEpe3JldHVybiBhLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmIUNLRURJVE9SLnRvb2xzLnRyaW0oYS52YWx1ZSl8fGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmF0dHJpYnV0ZXNbXCJkYXRhLWNrZS1ib29rbWFya1wiXX1mdW5jdGlvbiBnKGEpe3JldHVybiBhJiZcbihhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYS5uYW1lIGluIGh8fGEudHlwZT09Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVCl9ZnVuY3Rpb24gayhhLGIpe3ZhciBjPWEuY2hpbGRyZW5bYS5jaGlsZHJlbi5sZW5ndGgtMV07YS5jaGlsZHJlbi5wdXNoKGIpO2IucGFyZW50PWE7YyYmKGMubmV4dD1iLGIucHJldmlvdXM9Yyl9ZnVuY3Rpb24gbChhKXthPWEuYXR0cmlidXRlcztcImZhbHNlXCIhPWEuY29udGVudGVkaXRhYmxlJiYoYVtcImRhdGEtY2tlLWVkaXRhYmxlXCJdPWEuY29udGVudGVkaXRhYmxlP1widHJ1ZVwiOjEpO2EuY29udGVudGVkaXRhYmxlPVwiZmFsc2VcIn1mdW5jdGlvbiBtKGEpe2E9YS5hdHRyaWJ1dGVzO3N3aXRjaChhW1wiZGF0YS1ja2UtZWRpdGFibGVcIl0pe2Nhc2UgXCJ0cnVlXCI6YS5jb250ZW50ZWRpdGFibGU9XCJ0cnVlXCI7YnJlYWs7Y2FzZSBcIjFcIjpkZWxldGUgYS5jb250ZW50ZWRpdGFibGV9fWZ1bmN0aW9uIHUoYSl7cmV0dXJuIGEucmVwbGFjZShKLFxuZnVuY3Rpb24oYSxiLGMpe3JldHVyblwiXFx4M2NcIitiK2MucmVwbGFjZShFLGZ1bmN0aW9uKGEsYil7cmV0dXJuIEMudGVzdChiKSYmLTE9PWMuaW5kZXhPZihcImRhdGEtY2tlLXNhdmVkLVwiK2IpP1wiIGRhdGEtY2tlLXNhdmVkLVwiK2ErXCIgZGF0YS1ja2UtXCIrQ0tFRElUT1Iucm5kK1wiLVwiK2E6YX0pK1wiXFx4M2VcIn0pfWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gYS5yZXBsYWNlKGIsZnVuY3Rpb24oYSxiLGMpezA9PT1hLmluZGV4T2YoXCJcXHgzY3RleHRhcmVhXCIpJiYoYT1iK3goYykucmVwbGFjZSgvPC9nLFwiXFx4MjZsdDtcIikucmVwbGFjZSgvPi9nLFwiXFx4MjZndDtcIikrXCJcXHgzYy90ZXh0YXJlYVxceDNlXCIpO3JldHVyblwiXFx4M2Nja2U6ZW5jb2RlZFxceDNlXCIrZW5jb2RlVVJJQ29tcG9uZW50KGEpK1wiXFx4M2MvY2tlOmVuY29kZWRcXHgzZVwifSl9ZnVuY3Rpb24gQShhKXtyZXR1cm4gYS5yZXBsYWNlKE8sZnVuY3Rpb24oYSxiKXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGIpfSl9ZnVuY3Rpb24gcihhKXtyZXR1cm4gYS5yZXBsYWNlKC9cXHgzYyEtLSg/IXtja2VfcHJvdGVjdGVkfSlbXFxzXFxTXSs/LS1cXHgzZS9nLFxuZnVuY3Rpb24oYSl7cmV0dXJuXCJcXHgzYyEtLVwiK0grXCJ7Q31cIitlbmNvZGVVUklDb21wb25lbnQoYSkucmVwbGFjZSgvLS0vZyxcIiUyRCUyRFwiKStcIi0tXFx4M2VcIn0pfWZ1bmN0aW9uIHgoYSl7cmV0dXJuIGEucmVwbGFjZSgvXFx4M2MhLS1cXHtja2VfcHJvdGVjdGVkXFx9XFx7Q1xcfShbXFxzXFxTXSs/KS0tXFx4M2UvZyxmdW5jdGlvbihhLGIpe3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoYil9KX1mdW5jdGlvbiBEKGEsYil7dmFyIGM9Yi5fLmRhdGFTdG9yZTtyZXR1cm4gYS5yZXBsYWNlKC9cXHgzYyEtLVxce2NrZV9wcm90ZWN0ZWRcXH0oW1xcc1xcU10rPyktLVxceDNlL2csZnVuY3Rpb24oYSxiKXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGIpfSkucmVwbGFjZSgvXFx7Y2tlX3Byb3RlY3RlZF8oXFxkKylcXH0vZyxmdW5jdGlvbihhLGIpe3JldHVybiBjJiZjW2JdfHxcIlwifSl9ZnVuY3Rpb24gcShhLGIpe3ZhciBjPVtdLGQ9Yi5jb25maWcucHJvdGVjdGVkU291cmNlLGg9Yi5fLmRhdGFTdG9yZXx8KGIuXy5kYXRhU3RvcmU9XG57aWQ6MX0pLGY9LzxcXCEtLVxce2NrZV90ZW1wKGNvbW1lbnQpP1xcfShcXGQqPyktLVxceDNlL2csZD1bLzxzY3JpcHRbXFxzXFxTXSo/KDxcXC9zY3JpcHQ+fCQpL2dpLC88bm9zY3JpcHRbXFxzXFxTXSo/PFxcL25vc2NyaXB0Pi9naSwvPG1ldGFbXFxzXFxTXSo/XFwvPz4vZ2ldLmNvbmNhdChkKTthPWEucmVwbGFjZSgvXFx4M2MhLS1bXFxzXFxTXSo/LS1cXHgzZS9nLGZ1bmN0aW9uKGEpe3JldHVyblwiXFx4M2MhLS17Y2tlX3RlbXBjb21tZW50fVwiKyhjLnB1c2goYSktMSkrXCItLVxceDNlXCJ9KTtmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKylhPWEucmVwbGFjZShkW2VdLGZ1bmN0aW9uKGEpe2E9YS5yZXBsYWNlKGYsZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjW2RdfSk7cmV0dXJuL2NrZV90ZW1wKGNvbW1lbnQpPy8udGVzdChhKT9hOlwiXFx4M2MhLS17Y2tlX3RlbXB9XCIrKGMucHVzaChhKS0xKStcIi0tXFx4M2VcIn0pO2E9YS5yZXBsYWNlKGYsZnVuY3Rpb24oYSxiLGQpe3JldHVyblwiXFx4M2MhLS1cIitIKyhiP1wie0N9XCI6XG5cIlwiKStlbmNvZGVVUklDb21wb25lbnQoY1tkXSkucmVwbGFjZSgvLS0vZyxcIiUyRCUyRFwiKStcIi0tXFx4M2VcIn0pO2E9YS5yZXBsYWNlKC88XFx3Kyg/OlxccysoPzooPzpbXlxccz0+XStcXHMqPVxccyooPzpbXidcIlxccz5dK3wnW14nXSonfFwiW15cIl0qXCIpKXxbXlxccz1cXC8+XSspKStcXHMqXFwvPz4vZyxmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC9cXHgzYyEtLVxce2NrZV9wcm90ZWN0ZWRcXH0oW14+XSopLS1cXHgzZS9nLGZ1bmN0aW9uKGEsYil7aFtoLmlkXT1kZWNvZGVVUklDb21wb25lbnQoYik7cmV0dXJuXCJ7Y2tlX3Byb3RlY3RlZF9cIitoLmlkKysgK1wifVwifSl9KTtyZXR1cm4gYT1hLnJlcGxhY2UoLzwodGl0bGV8aWZyYW1lfHRleHRhcmVhKShbXj5dKik+KFtcXHNcXFNdKj8pPFxcL1xcMT4vZyxmdW5jdGlvbihhLGMsZCxoKXtyZXR1cm5cIlxceDNjXCIrYytkK1wiXFx4M2VcIitEKHgoaCksYikrXCJcXHgzYy9cIitjK1wiXFx4M2VcIn0pfUNLRURJVE9SLmh0bWxEYXRhUHJvY2Vzc29yPWZ1bmN0aW9uKGIpe3ZhciBjLFxuaCxmPXRoaXM7dGhpcy5lZGl0b3I9Yjt0aGlzLmRhdGFGaWx0ZXI9Yz1uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5maWx0ZXI7dGhpcy5odG1sRmlsdGVyPWg9bmV3IENLRURJVE9SLmh0bWxQYXJzZXIuZmlsdGVyO3RoaXMud3JpdGVyPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmJhc2ljV3JpdGVyO2MuYWRkUnVsZXMocCk7Yy5hZGRSdWxlcyhuLHthcHBseVRvQWxsOiEwfSk7Yy5hZGRSdWxlcyhhKGIsXCJkYXRhXCIpLHthcHBseVRvQWxsOiEwfSk7aC5hZGRSdWxlcyh5KTtoLmFkZFJ1bGVzKHose2FwcGx5VG9BbGw6ITB9KTtoLmFkZFJ1bGVzKGEoYixcImh0bWxcIikse2FwcGx5VG9BbGw6ITB9KTtiLm9uKFwidG9IdG1sXCIsZnVuY3Rpb24oYSl7YT1hLmRhdGE7dmFyIGM9YS5kYXRhVmFsdWUsaCxjPXEoYyxiKSxjPWUoYyxQKSxjPXUoYyksYz1lKGMsWSksYz1jLnJlcGxhY2UoTixcIiQxY2tlOiQyXCIpLGM9Yy5yZXBsYWNlKEksXCJcXHgzY2NrZTokMSQyXFx4M2VcXHgzYy9ja2U6JDFcXHgzZVwiKSxcbmM9Yy5yZXBsYWNlKC8oPHByZVxcYltePl0qPikoXFxyXFxufFxcbikvZyxcIiQxJDIkMlwiKSxjPWMucmVwbGFjZSgvKFteYS16MC05PFxcLV0pKG9uXFx3ezMsfSkoPyE+KS9naSxcIiQxZGF0YS1ja2UtXCIrQ0tFRElUT1Iucm5kK1wiLSQyXCIpO2g9YS5jb250ZXh0fHxiLmVkaXRhYmxlKCkuZ2V0TmFtZSgpO3ZhciBmO0NLRURJVE9SLmVudi5pZSYmOT5DS0VESVRPUi5lbnYudmVyc2lvbiYmXCJwcmVcIj09aCYmKGg9XCJkaXZcIixjPVwiXFx4M2NwcmVcXHgzZVwiK2MrXCJcXHgzYy9wcmVcXHgzZVwiLGY9MSk7aD1iLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaCk7aC5zZXRIdG1sKFwiYVwiK2MpO2M9aC5nZXRIdG1sKCkuc3Vic3RyKDEpO2M9Yy5yZXBsYWNlKG5ldyBSZWdFeHAoXCJkYXRhLWNrZS1cIitDS0VESVRPUi5ybmQrXCItXCIsXCJpZ1wiKSxcIlwiKTtmJiYoYz1jLnJlcGxhY2UoL148cHJlPnw8XFwvcHJlPiQvZ2ksXCJcIikpO2M9Yy5yZXBsYWNlKEIsXCIkMSQyXCIpO2M9QShjKTtjPXgoYyk7aD0hMT09PWEuZml4Rm9yQm9keT8hMTpcbmQoYS5lbnRlck1vZGUsYi5jb25maWcuYXV0b1BhcmFncmFwaCk7Yz1DS0VESVRPUi5odG1sUGFyc2VyLmZyYWdtZW50LmZyb21IdG1sKGMsYS5jb250ZXh0LGgpO2gmJihmPWMsIWYuY2hpbGRyZW4ubGVuZ3RoJiZDS0VESVRPUi5kdGRbZi5uYW1lXVtoXSYmKGg9bmV3IENLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudChoKSxmLmFkZChoKSkpO2EuZGF0YVZhbHVlPWN9LG51bGwsbnVsbCw1KTtiLm9uKFwidG9IdG1sXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmZpbHRlci5hcHBseVRvKGEuZGF0YS5kYXRhVmFsdWUsITAsYS5kYXRhLmRvbnRGaWx0ZXIsYS5kYXRhLmVudGVyTW9kZSkmJmIuZmlyZShcImRhdGFGaWx0ZXJlZFwiKX0sbnVsbCxudWxsLDYpO2Iub24oXCJ0b0h0bWxcIixmdW5jdGlvbihhKXthLmRhdGEuZGF0YVZhbHVlLmZpbHRlckNoaWxkcmVuKGYuZGF0YUZpbHRlciwhMCl9LG51bGwsbnVsbCwxMCk7Yi5vbihcInRvSHRtbFwiLGZ1bmN0aW9uKGEpe2E9YS5kYXRhO3ZhciBiPWEuZGF0YVZhbHVlLFxuYz1uZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5iYXNpY1dyaXRlcjtiLndyaXRlQ2hpbGRyZW5IdG1sKGMpO2I9Yy5nZXRIdG1sKCEwKTthLmRhdGFWYWx1ZT1yKGIpfSxudWxsLG51bGwsMTUpO2Iub24oXCJ0b0RhdGFGb3JtYXRcIixmdW5jdGlvbihhKXt2YXIgYz1hLmRhdGEuZGF0YVZhbHVlO2EuZGF0YS5lbnRlck1vZGUhPUNLRURJVE9SLkVOVEVSX0JSJiYoYz1jLnJlcGxhY2UoL148YnIgKlxcLz8+L2ksXCJcIikpO2EuZGF0YS5kYXRhVmFsdWU9Q0tFRElUT1IuaHRtbFBhcnNlci5mcmFnbWVudC5mcm9tSHRtbChjLGEuZGF0YS5jb250ZXh0LGQoYS5kYXRhLmVudGVyTW9kZSxiLmNvbmZpZy5hdXRvUGFyYWdyYXBoKSl9LG51bGwsbnVsbCw1KTtiLm9uKFwidG9EYXRhRm9ybWF0XCIsZnVuY3Rpb24oYSl7YS5kYXRhLmRhdGFWYWx1ZS5maWx0ZXJDaGlsZHJlbihmLmh0bWxGaWx0ZXIsITApfSxudWxsLG51bGwsMTApO2Iub24oXCJ0b0RhdGFGb3JtYXRcIixmdW5jdGlvbihhKXthLmRhdGEuZmlsdGVyLmFwcGx5VG8oYS5kYXRhLmRhdGFWYWx1ZSxcbiExLCEwKX0sbnVsbCxudWxsLDExKTtiLm9uKFwidG9EYXRhRm9ybWF0XCIsZnVuY3Rpb24oYSl7dmFyIGM9YS5kYXRhLmRhdGFWYWx1ZSxkPWYud3JpdGVyO2QucmVzZXQoKTtjLndyaXRlQ2hpbGRyZW5IdG1sKGQpO2M9ZC5nZXRIdG1sKCEwKTtjPXgoYyk7Yz1EKGMsYik7YS5kYXRhLmRhdGFWYWx1ZT1jfSxudWxsLG51bGwsMTUpfTtDS0VESVRPUi5odG1sRGF0YVByb2Nlc3Nvci5wcm90b3R5cGU9e3RvSHRtbDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgaD10aGlzLmVkaXRvcixmLGUsbixwO2ImJlwib2JqZWN0XCI9PXR5cGVvZiBiPyhmPWIuY29udGV4dCxjPWIuZml4Rm9yQm9keSxkPWIuZG9udEZpbHRlcixlPWIuZmlsdGVyLG49Yi5lbnRlck1vZGUscD1iLnByb3RlY3RlZFdoaXRlc3BhY2VzKTpmPWI7Znx8bnVsbD09PWZ8fChmPWguZWRpdGFibGUoKS5nZXROYW1lKCkpO3JldHVybiBoLmZpcmUoXCJ0b0h0bWxcIix7ZGF0YVZhbHVlOmEsY29udGV4dDpmLGZpeEZvckJvZHk6Yyxkb250RmlsdGVyOmQsXG5maWx0ZXI6ZXx8aC5maWx0ZXIsZW50ZXJNb2RlOm58fGguZW50ZXJNb2RlLHByb3RlY3RlZFdoaXRlc3BhY2VzOnB9KS5kYXRhVmFsdWV9LHRvRGF0YUZvcm1hdDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsaDtiJiYoYz1iLmNvbnRleHQsZD1iLmZpbHRlcixoPWIuZW50ZXJNb2RlKTtjfHxudWxsPT09Y3x8KGM9dGhpcy5lZGl0b3IuZWRpdGFibGUoKS5nZXROYW1lKCkpO3JldHVybiB0aGlzLmVkaXRvci5maXJlKFwidG9EYXRhRm9ybWF0XCIse2RhdGFWYWx1ZTphLGZpbHRlcjpkfHx0aGlzLmVkaXRvci5maWx0ZXIsY29udGV4dDpjLGVudGVyTW9kZTpofHx0aGlzLmVkaXRvci5lbnRlck1vZGV9KS5kYXRhVmFsdWV9fTt2YXIgdz0vKD86Jm5ic3A7fFxceGEwKSQvLEg9XCJ7Y2tlX3Byb3RlY3RlZH1cIix0PUNLRURJVE9SLmR0ZCx2PVwiY2FwdGlvbiBjb2xncm91cCBjb2wgdGhlYWQgdGZvb3QgdGJvZHlcIi5zcGxpdChcIiBcIiksaD1DS0VESVRPUi50b29scy5leHRlbmQoe30sdC4kYmxvY2tMaW1pdCxcbnQuJGJsb2NrKSxwPXtlbGVtZW50czp7aW5wdXQ6bCx0ZXh0YXJlYTpsfX0sbj17YXR0cmlidXRlTmFtZXM6W1svXm9uLyxcImRhdGEtY2tlLXBhLW9uXCJdLFsvXmRhdGEtY2tlLWV4cGFuZG8kLyxcIlwiXV19LHk9e2VsZW1lbnRzOntlbWJlZDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudDtpZihiJiZcIm9iamVjdFwiPT1iLm5hbWUpe3ZhciBjPWIuYXR0cmlidXRlcy53aWR0aCxiPWIuYXR0cmlidXRlcy5oZWlnaHQ7YyYmKGEuYXR0cmlidXRlcy53aWR0aD1jKTtiJiYoYS5hdHRyaWJ1dGVzLmhlaWdodD1iKX19LGE6ZnVuY3Rpb24oYSl7dmFyIGI9YS5hdHRyaWJ1dGVzO2lmKCEoYS5jaGlsZHJlbi5sZW5ndGh8fGIubmFtZXx8Yi5pZHx8YS5hdHRyaWJ1dGVzW1wiZGF0YS1ja2Utc2F2ZWQtbmFtZVwiXSkpcmV0dXJuITF9fX0sej17ZWxlbWVudE5hbWVzOltbL15ja2U6LyxcIlwiXSxbL15cXD94bWw6bmFtZXNwYWNlJC8sXCJcIl1dLGF0dHJpYnV0ZU5hbWVzOltbL15kYXRhLWNrZS0oc2F2ZWR8cGEpLS8sXG5cIlwiXSxbL15kYXRhLWNrZS0uKi8sXCJcIl0sW1wiaGlkZWZvY3VzXCIsXCJcIl1dLGVsZW1lbnRzOnskOmZ1bmN0aW9uKGEpe3ZhciBiPWEuYXR0cmlidXRlcztpZihiKXtpZihiW1wiZGF0YS1ja2UtdGVtcFwiXSlyZXR1cm4hMTtmb3IodmFyIGM9W1wibmFtZVwiLFwiaHJlZlwiLFwic3JjXCJdLGQsaD0wO2g8Yy5sZW5ndGg7aCsrKWQ9XCJkYXRhLWNrZS1zYXZlZC1cIitjW2hdLGQgaW4gYiYmZGVsZXRlIGJbY1toXV19cmV0dXJuIGF9LHRhYmxlOmZ1bmN0aW9uKGEpe2EuY2hpbGRyZW4uc2xpY2UoMCkuc29ydChmdW5jdGlvbihhLGIpe3ZhciBjLGQ7YS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmIudHlwZT09YS50eXBlJiYoYz1DS0VESVRPUi50b29scy5pbmRleE9mKHYsYS5uYW1lKSxkPUNLRURJVE9SLnRvb2xzLmluZGV4T2YodixiLm5hbWUpKTstMTxjJiYtMTxkJiZjIT1kfHwoYz1hLnBhcmVudD9hLmdldEluZGV4KCk6LTEsZD1iLnBhcmVudD9iLmdldEluZGV4KCk6LTEpO3JldHVybiBjPmQ/XG4xOi0xfSl9LHBhcmFtOmZ1bmN0aW9uKGEpe2EuY2hpbGRyZW49W107YS5pc0VtcHR5PSEwO3JldHVybiBhfSxzcGFuOmZ1bmN0aW9uKGEpe1wiQXBwbGUtc3R5bGUtc3BhblwiPT1hLmF0dHJpYnV0ZXNbXCJjbGFzc1wiXSYmZGVsZXRlIGEubmFtZX0saHRtbDpmdW5jdGlvbihhKXtkZWxldGUgYS5hdHRyaWJ1dGVzLmNvbnRlbnRlZGl0YWJsZTtkZWxldGUgYS5hdHRyaWJ1dGVzW1wiY2xhc3NcIl19LGJvZHk6ZnVuY3Rpb24oYSl7ZGVsZXRlIGEuYXR0cmlidXRlcy5zcGVsbGNoZWNrO2RlbGV0ZSBhLmF0dHJpYnV0ZXMuY29udGVudGVkaXRhYmxlfSxzdHlsZTpmdW5jdGlvbihhKXt2YXIgYj1hLmNoaWxkcmVuWzBdO2ImJmIudmFsdWUmJihiLnZhbHVlPUNLRURJVE9SLnRvb2xzLnRyaW0oYi52YWx1ZSkpO2EuYXR0cmlidXRlcy50eXBlfHwoYS5hdHRyaWJ1dGVzLnR5cGU9XCJ0ZXh0L2Nzc1wiKX0sdGl0bGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5jaGlsZHJlblswXTshYiYmayhhLGI9bmV3IENLRURJVE9SLmh0bWxQYXJzZXIudGV4dCk7XG5iLnZhbHVlPWEuYXR0cmlidXRlc1tcImRhdGEtY2tlLXRpdGxlXCJdfHxcIlwifSxpbnB1dDptLHRleHRhcmVhOm19LGF0dHJpYnV0ZXM6e1wiY2xhc3NcIjpmdW5jdGlvbihhKXtyZXR1cm4gQ0tFRElUT1IudG9vbHMubHRyaW0oYS5yZXBsYWNlKC8oPzpefFxccyspY2tlX1teXFxzXSovZyxcIlwiKSl8fCExfX19O0NLRURJVE9SLmVudi5pZSYmKHouYXR0cmlidXRlcy5zdHlsZT1mdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC8oXnw7KShbXlxcOl0rKS9nLGZ1bmN0aW9uKGEpe3JldHVybiBhLnRvTG93ZXJDYXNlKCl9KX0pO3ZhciBKPS88KGF8YXJlYXxpbWd8aW5wdXR8c291cmNlKVxcYihbXj5dKik+L2dpLEU9LyhbXFx3LTpdKylcXHMqPVxccyooPzooPzpcIlteXCJdKlwiKXwoPzonW14nXSonKXwoPzpbXiBcIic+XSspKS9naSxDPS9eKGhyZWZ8c3JjfG5hbWUpJC9pLFk9Lyg/OjxzdHlsZSg/PVsgPl0pW14+XSo+W1xcc1xcU10qPzxcXC9zdHlsZT4pfCg/OjwoOj9saW5rfG1ldGF8YmFzZSlbXj5dKj4pL2dpLFxuUD0vKDx0ZXh0YXJlYSg/PVsgPl0pW14+XSo+KShbXFxzXFxTXSo/KSg/OjxcXC90ZXh0YXJlYT4pL2dpLE89Lzxja2U6ZW5jb2RlZD4oW148XSopPFxcL2NrZTplbmNvZGVkPi9naSxOPS8oPFxcLz8pKCg/Om9iamVjdHxlbWJlZHxwYXJhbXxodG1sfGJvZHl8aGVhZHx0aXRsZSlbXj5dKj4pL2dpLEI9Lyg8XFwvPylja2U6KCg/Omh0bWx8Ym9keXxoZWFkfHRpdGxlKVtePl0qPikvZ2ksST0vPGNrZToocGFyYW18ZW1iZWQpKFtePl0qPylcXC8/Pig/IVxccyo8XFwvY2tlOlxcMSkvZ2l9KSgpO1widXNlIHN0cmljdFwiO1xuQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50PWZ1bmN0aW9uKGEsZCl7dGhpcy5uYW1lPWE7dGhpcy5hdHRyaWJ1dGVzPWR8fHt9O3RoaXMuY2hpbGRyZW49W107dmFyIGI9YXx8XCJcIixjPWIubWF0Y2goL15ja2U6KC4qKS8pO2MmJihiPWNbMV0pO2I9ISEoQ0tFRElUT1IuZHRkLiRub25Cb2R5Q29udGVudFtiXXx8Q0tFRElUT1IuZHRkLiRibG9ja1tiXXx8Q0tFRElUT1IuZHRkLiRsaXN0SXRlbVtiXXx8Q0tFRElUT1IuZHRkLiR0YWJsZUNvbnRlbnRbYl18fENLRURJVE9SLmR0ZC4kbm9uRWRpdGFibGVbYl18fFwiYnJcIj09Yik7dGhpcy5pc0VtcHR5PSEhQ0tFRElUT1IuZHRkLiRlbXB0eVthXTt0aGlzLmlzVW5rbm93bj0hQ0tFRElUT1IuZHRkW2FdO3RoaXMuXz17aXNCbG9ja0xpa2U6YixoYXNJbmxpbmVTdGFydGVkOnRoaXMuaXNFbXB0eXx8IWJ9fTtcbkNLRURJVE9SLmh0bWxQYXJzZXIuY3NzU3R5bGU9ZnVuY3Rpb24oYSl7dmFyIGQ9e307KChhIGluc3RhbmNlb2YgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50P2EuYXR0cmlidXRlcy5zdHlsZTphKXx8XCJcIikucmVwbGFjZSgvJnF1b3Q7L2csJ1wiJykucmVwbGFjZSgvXFxzKihbXiA6O10rKVxccyo6XFxzKihbXjtdKylcXHMqKD89O3wkKS9nLGZ1bmN0aW9uKGEsYyxmKXtcImZvbnQtZmFtaWx5XCI9PWMmJihmPWYucmVwbGFjZSgvW1wiJ10vZyxcIlwiKSk7ZFtjLnRvTG93ZXJDYXNlKCldPWZ9KTtyZXR1cm57cnVsZXM6ZCxwb3B1bGF0ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLnRvU3RyaW5nKCk7YyYmKGEgaW5zdGFuY2VvZiBDS0VESVRPUi5kb20uZWxlbWVudD9hLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsYyk6YSBpbnN0YW5jZW9mIENLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudD9hLmF0dHJpYnV0ZXMuc3R5bGU9YzphLnN0eWxlPWMpfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBhPVtdLGM7XG5mb3IoYyBpbiBkKWRbY10mJmEucHVzaChjLFwiOlwiLGRbY10sXCI7XCIpO3JldHVybiBhLmpvaW4oXCJcIil9fX07XG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYi50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihcInN0cmluZ1wiPT10eXBlb2YgYT9iLm5hbWU9PWE6Yi5uYW1lIGluIGEpfX12YXIgZD1mdW5jdGlvbihhLGIpe2E9YVswXTtiPWJbMF07cmV0dXJuIGE8Yj8tMTphPmI/MTowfSxiPUNLRURJVE9SLmh0bWxQYXJzZXIuZnJhZ21lbnQucHJvdG90eXBlO0NLRURJVE9SLmh0bWxQYXJzZXIuZWxlbWVudC5wcm90b3R5cGU9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKG5ldyBDS0VESVRPUi5odG1sUGFyc2VyLm5vZGUse3R5cGU6Q0tFRElUT1IuTk9ERV9FTEVNRU5ULGFkZDpiLmFkZCxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50KHRoaXMubmFtZSx0aGlzLmF0dHJpYnV0ZXMpfSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLGssbDtiPWQuZ2V0RmlsdGVyQ29udGV4dChiKTtpZihiLm9mZilyZXR1cm4hMDtcbmlmKCFkLnBhcmVudClhLm9uUm9vdChiLGQpO2Zvcig7Oyl7az1kLm5hbWU7aWYoIShsPWEub25FbGVtZW50TmFtZShiLGspKSlyZXR1cm4gdGhpcy5yZW1vdmUoKSwhMTtkLm5hbWU9bDtpZighKGQ9YS5vbkVsZW1lbnQoYixkKSkpcmV0dXJuIHRoaXMucmVtb3ZlKCksITE7aWYoZCE9PXRoaXMpcmV0dXJuIHRoaXMucmVwbGFjZVdpdGgoZCksITE7aWYoZC5uYW1lPT1rKWJyZWFrO2lmKGQudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UKXJldHVybiB0aGlzLnJlcGxhY2VXaXRoKGQpLCExO2lmKCFkLm5hbWUpcmV0dXJuIHRoaXMucmVwbGFjZVdpdGhDaGlsZHJlbigpLCExfWs9ZC5hdHRyaWJ1dGVzO3ZhciBtLHU7Zm9yKG0gaW4gayl7Zm9yKGw9a1ttXTs7KWlmKHU9YS5vbkF0dHJpYnV0ZU5hbWUoYixtKSlpZih1IT1tKWRlbGV0ZSBrW21dLG09dTtlbHNlIGJyZWFrO2Vsc2V7ZGVsZXRlIGtbbV07YnJlYWt9dSYmKCExPT09KGw9YS5vbkF0dHJpYnV0ZShiLGQsdSxsKSk/ZGVsZXRlIGtbdV06XG5rW3VdPWwpfWQuaXNFbXB0eXx8dGhpcy5maWx0ZXJDaGlsZHJlbihhLCExLGIpO3JldHVybiEwfSxmaWx0ZXJDaGlsZHJlbjpiLmZpbHRlckNoaWxkcmVuLHdyaXRlSHRtbDpmdW5jdGlvbihhLGIpe2ImJnRoaXMuZmlsdGVyKGIpO3ZhciBnPXRoaXMubmFtZSxrPVtdLGw9dGhpcy5hdHRyaWJ1dGVzLG0sdTthLm9wZW5UYWcoZyxsKTtmb3IobSBpbiBsKWsucHVzaChbbSxsW21dXSk7YS5zb3J0QXR0cmlidXRlcyYmay5zb3J0KGQpO209MDtmb3IodT1rLmxlbmd0aDttPHU7bSsrKWw9a1ttXSxhLmF0dHJpYnV0ZShsWzBdLGxbMV0pO2Eub3BlblRhZ0Nsb3NlKGcsdGhpcy5pc0VtcHR5KTt0aGlzLndyaXRlQ2hpbGRyZW5IdG1sKGEpO3RoaXMuaXNFbXB0eXx8YS5jbG9zZVRhZyhnKX0sd3JpdGVDaGlsZHJlbkh0bWw6Yi53cml0ZUNoaWxkcmVuSHRtbCxyZXBsYWNlV2l0aENoaWxkcmVuOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuY2hpbGRyZW4sYj1hLmxlbmd0aDtiOylhWy0tYl0uaW5zZXJ0QWZ0ZXIodGhpcyk7XG50aGlzLnJlbW92ZSgpfSxmb3JFYWNoOmIuZm9yRWFjaCxnZXRGaXJzdDpmdW5jdGlvbihiKXtpZighYilyZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGg/dGhpcy5jaGlsZHJlblswXTpudWxsO1wiZnVuY3Rpb25cIiE9dHlwZW9mIGImJihiPWEoYikpO2Zvcih2YXIgZD0wLGc9dGhpcy5jaGlsZHJlbi5sZW5ndGg7ZDxnOysrZClpZihiKHRoaXMuY2hpbGRyZW5bZF0pKXJldHVybiB0aGlzLmNoaWxkcmVuW2RdO3JldHVybiBudWxsfSxnZXRIdG1sOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IENLRURJVE9SLmh0bWxQYXJzZXIuYmFzaWNXcml0ZXI7dGhpcy53cml0ZUNoaWxkcmVuSHRtbChhKTtyZXR1cm4gYS5nZXRIdG1sKCl9LHNldEh0bWw6ZnVuY3Rpb24oYSl7YT10aGlzLmNoaWxkcmVuPUNLRURJVE9SLmh0bWxQYXJzZXIuZnJhZ21lbnQuZnJvbUh0bWwoYSkuY2hpbGRyZW47Zm9yKHZhciBiPTAsZD1hLmxlbmd0aDtiPGQ7KytiKWFbYl0ucGFyZW50PXRoaXN9LGdldE91dGVySHRtbDpmdW5jdGlvbigpe3ZhciBhPVxubmV3IENLRURJVE9SLmh0bWxQYXJzZXIuYmFzaWNXcml0ZXI7dGhpcy53cml0ZUh0bWwoYSk7cmV0dXJuIGEuZ2V0SHRtbCgpfSxzcGxpdDpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5jaGlsZHJlbi5zcGxpY2UoYSx0aGlzLmNoaWxkcmVuLmxlbmd0aC1hKSxkPXRoaXMuY2xvbmUoKSxrPTA7azxiLmxlbmd0aDsrK2spYltrXS5wYXJlbnQ9ZDtkLmNoaWxkcmVuPWI7YlswXSYmKGJbMF0ucHJldmlvdXM9bnVsbCk7MDxhJiYodGhpcy5jaGlsZHJlblthLTFdLm5leHQ9bnVsbCk7dGhpcy5wYXJlbnQuYWRkKGQsdGhpcy5nZXRJbmRleCgpKzEpO3JldHVybiBkfSxhZGRDbGFzczpmdW5jdGlvbihhKXtpZighdGhpcy5oYXNDbGFzcyhhKSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzW1wiY2xhc3NcIl18fFwiXCI7dGhpcy5hdHRyaWJ1dGVzW1wiY2xhc3NcIl09YisoYj9cIiBcIjpcIlwiKSthfX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hdHRyaWJ1dGVzW1wiY2xhc3NcIl07YiYmKChiPVxuQ0tFRElUT1IudG9vbHMudHJpbShiLnJlcGxhY2UobmV3IFJlZ0V4cChcIig/OlxcXFxzK3xeKVwiK2ErXCIoPzpcXFxccyt8JClcIiksXCIgXCIpKSk/dGhpcy5hdHRyaWJ1dGVzW1wiY2xhc3NcIl09YjpkZWxldGUgdGhpcy5hdHRyaWJ1dGVzW1wiY2xhc3NcIl0pfSxoYXNDbGFzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmF0dHJpYnV0ZXNbXCJjbGFzc1wiXTtyZXR1cm4gYj8obmV3IFJlZ0V4cChcIig/Ol58XFxcXHMpXCIrYStcIig/XFx4M2RcXFxcc3wkKVwiKSkudGVzdChiKTohMX0sZ2V0RmlsdGVyQ29udGV4dDpmdW5jdGlvbihhKXt2YXIgYj1bXTthfHwoYT17b2ZmOiExLG5vbkVkaXRhYmxlOiExLG5lc3RlZEVkaXRhYmxlOiExfSk7YS5vZmZ8fFwib2ZmXCIhPXRoaXMuYXR0cmlidXRlc1tcImRhdGEtY2tlLXByb2Nlc3NvclwiXXx8Yi5wdXNoKFwib2ZmXCIsITApO2Eubm9uRWRpdGFibGV8fFwiZmFsc2VcIiE9dGhpcy5hdHRyaWJ1dGVzLmNvbnRlbnRlZGl0YWJsZT9hLm5vbkVkaXRhYmxlJiYhYS5uZXN0ZWRFZGl0YWJsZSYmXG5cInRydWVcIj09dGhpcy5hdHRyaWJ1dGVzLmNvbnRlbnRlZGl0YWJsZSYmYi5wdXNoKFwibmVzdGVkRWRpdGFibGVcIiwhMCk6Yi5wdXNoKFwibm9uRWRpdGFibGVcIiwhMCk7aWYoYi5sZW5ndGgpe2E9Q0tFRElUT1IudG9vbHMuY29weShhKTtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrPTIpYVtiW2RdXT1iW2QrMV19cmV0dXJuIGF9fSwhMCl9KSgpO1xuKGZ1bmN0aW9uKCl7dmFyIGE9e30sZD0veyhbXn1dKyl9L2csYj0vKFtcXFxcJ10pL2csYz0vXFxuL2csZj0vXFxyL2c7Q0tFRElUT1IudGVtcGxhdGU9ZnVuY3Rpb24oZyl7aWYoYVtnXSl0aGlzLm91dHB1dD1hW2ddO2Vsc2V7dmFyIGs9Zy5yZXBsYWNlKGIsXCJcXFxcJDFcIikucmVwbGFjZShjLFwiXFxcXG5cIikucmVwbGFjZShmLFwiXFxcXHJcIikucmVwbGFjZShkLGZ1bmN0aW9uKGEsYil7cmV0dXJuXCInLGRhdGFbJ1wiK2IrXCInXVxceDNkXFx4M2R1bmRlZmluZWQ/J3tcIitiK1wifSc6ZGF0YVsnXCIrYitcIiddLCdcIn0pO3RoaXMub3V0cHV0PWFbZ109RnVuY3Rpb24oXCJkYXRhXCIsXCJidWZmZXJcIixcInJldHVybiBidWZmZXI/YnVmZmVyLnB1c2goJ1wiK2srXCInKTpbJ1wiK2srXCInXS5qb2luKCcnKTtcIil9fX0pKCk7ZGVsZXRlIENLRURJVE9SLmxvYWRGdWxsQ29yZTtDS0VESVRPUi5pbnN0YW5jZXM9e307Q0tFRElUT1IuZG9jdW1lbnQ9bmV3IENLRURJVE9SLmRvbS5kb2N1bWVudChkb2N1bWVudCk7XG5DS0VESVRPUi5hZGQ9ZnVuY3Rpb24oYSl7Q0tFRElUT1IuaW5zdGFuY2VzW2EubmFtZV09YTthLm9uKFwiZm9jdXNcIixmdW5jdGlvbigpe0NLRURJVE9SLmN1cnJlbnRJbnN0YW5jZSE9YSYmKENLRURJVE9SLmN1cnJlbnRJbnN0YW5jZT1hLENLRURJVE9SLmZpcmUoXCJjdXJyZW50SW5zdGFuY2VcIikpfSk7YS5vbihcImJsdXJcIixmdW5jdGlvbigpe0NLRURJVE9SLmN1cnJlbnRJbnN0YW5jZT09YSYmKENLRURJVE9SLmN1cnJlbnRJbnN0YW5jZT1udWxsLENLRURJVE9SLmZpcmUoXCJjdXJyZW50SW5zdGFuY2VcIikpfSk7Q0tFRElUT1IuZmlyZShcImluc3RhbmNlXCIsbnVsbCxhKX07Q0tFRElUT1IucmVtb3ZlPWZ1bmN0aW9uKGEpe2RlbGV0ZSBDS0VESVRPUi5pbnN0YW5jZXNbYS5uYW1lXX07XG4oZnVuY3Rpb24oKXt2YXIgYT17fTtDS0VESVRPUi5hZGRUZW1wbGF0ZT1mdW5jdGlvbihkLGIpe3ZhciBjPWFbZF07aWYoYylyZXR1cm4gYztjPXtuYW1lOmQsc291cmNlOmJ9O0NLRURJVE9SLmZpcmUoXCJ0ZW1wbGF0ZVwiLGMpO3JldHVybiBhW2RdPW5ldyBDS0VESVRPUi50ZW1wbGF0ZShjLnNvdXJjZSl9O0NLRURJVE9SLmdldFRlbXBsYXRlPWZ1bmN0aW9uKGQpe3JldHVybiBhW2RdfX0pKCk7KGZ1bmN0aW9uKCl7dmFyIGE9W107Q0tFRElUT1IuYWRkQ3NzPWZ1bmN0aW9uKGQpe2EucHVzaChkKX07Q0tFRElUT1IuZ2V0Q3NzPWZ1bmN0aW9uKCl7cmV0dXJuIGEuam9pbihcIlxcblwiKX19KSgpO0NLRURJVE9SLm9uKFwiaW5zdGFuY2VEZXN0cm95ZWRcIixmdW5jdGlvbigpe0NLRURJVE9SLnRvb2xzLmlzRW1wdHkodGhpcy5pbnN0YW5jZXMpJiZDS0VESVRPUi5maXJlKFwicmVzZXRcIil9KTtDS0VESVRPUi5UUklTVEFURV9PTj0xO0NLRURJVE9SLlRSSVNUQVRFX09GRj0yO1xuQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ9MDtcbihmdW5jdGlvbigpe0NLRURJVE9SLmlubGluZT1mdW5jdGlvbihhLGQpe2lmKCFDS0VESVRPUi5lbnYuaXNDb21wYXRpYmxlKXJldHVybiBudWxsO2E9Q0tFRElUT1IuZG9tLmVsZW1lbnQuZ2V0KGEpO2lmKGEuZ2V0RWRpdG9yKCkpdGhyb3cnVGhlIGVkaXRvciBpbnN0YW5jZSBcIicrYS5nZXRFZGl0b3IoKS5uYW1lKydcIiBpcyBhbHJlYWR5IGF0dGFjaGVkIHRvIHRoZSBwcm92aWRlZCBlbGVtZW50Lic7dmFyIGI9bmV3IENLRURJVE9SLmVkaXRvcihkLGEsQ0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORSksYz1hLmlzKFwidGV4dGFyZWFcIik/YTpudWxsO2M/KGIuc2V0RGF0YShjLmdldFZhbHVlKCksbnVsbCwhMCksYT1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbCgnXFx4M2NkaXYgY29udGVudGVkaXRhYmxlXFx4M2RcIicrISFiLnJlYWRPbmx5KydcIiBjbGFzc1xceDNkXCJja2VfdGV4dGFyZWFfaW5saW5lXCJcXHgzZScrYy5nZXRWYWx1ZSgpK1wiXFx4M2MvZGl2XFx4M2VcIixDS0VESVRPUi5kb2N1bWVudCksXG5hLmluc2VydEFmdGVyKGMpLGMuaGlkZSgpLGMuJC5mb3JtJiZiLl9hdHRhY2hUb0Zvcm0oKSk6Yi5zZXREYXRhKGEuZ2V0SHRtbCgpLG51bGwsITApO2Iub24oXCJsb2FkZWRcIixmdW5jdGlvbigpe2IuZmlyZShcInVpUmVhZHlcIik7Yi5lZGl0YWJsZShhKTtiLmNvbnRhaW5lcj1hO2IudWkuY29udGVudHNFbGVtZW50PWE7Yi5zZXREYXRhKGIuZ2V0RGF0YSgxKSk7Yi5yZXNldERpcnR5KCk7Yi5maXJlKFwiY29udGVudERvbVwiKTtiLm1vZGU9XCJ3eXNpd3lnXCI7Yi5maXJlKFwibW9kZVwiKTtiLnN0YXR1cz1cInJlYWR5XCI7Yi5maXJlT25jZShcImluc3RhbmNlUmVhZHlcIik7Q0tFRElUT1IuZmlyZShcImluc3RhbmNlUmVhZHlcIixudWxsLGIpfSxudWxsLG51bGwsMUU0KTtiLm9uKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7YyYmKGIuY29udGFpbmVyLmNsZWFyQ3VzdG9tRGF0YSgpLGIuY29udGFpbmVyLnJlbW92ZSgpLGMuc2hvdygpKTtiLmVsZW1lbnQuY2xlYXJDdXN0b21EYXRhKCk7ZGVsZXRlIGIuZWxlbWVudH0pO1xucmV0dXJuIGJ9O0NLRURJVE9SLmlubGluZUFsbD1mdW5jdGlvbigpe3ZhciBhLGQsYjtmb3IoYiBpbiBDS0VESVRPUi5kdGQuJGVkaXRhYmxlKWZvcih2YXIgYz1DS0VESVRPUi5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnKGIpLGY9MCxnPWMuY291bnQoKTtmPGc7ZisrKWE9Yy5nZXRJdGVtKGYpLFwidHJ1ZVwiPT1hLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSYmKGQ9e2VsZW1lbnQ6YSxjb25maWc6e319LCExIT09Q0tFRElUT1IuZmlyZShcImlubGluZVwiLGQpJiZDS0VESVRPUi5pbmxpbmUoYSxkLmNvbmZpZykpfTtDS0VESVRPUi5kb21SZWFkeShmdW5jdGlvbigpeyFDS0VESVRPUi5kaXNhYmxlQXV0b0lubGluZSYmQ0tFRElUT1IuaW5saW5lQWxsKCl9KX0pKCk7Q0tFRElUT1IucmVwbGFjZUNsYXNzPVwiY2tlZGl0b3JcIjtcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxmLGcsayl7aWYoIUNLRURJVE9SLmVudi5pc0NvbXBhdGlibGUpcmV0dXJuIG51bGw7YT1DS0VESVRPUi5kb20uZWxlbWVudC5nZXQoYSk7aWYoYS5nZXRFZGl0b3IoKSl0aHJvdydUaGUgZWRpdG9yIGluc3RhbmNlIFwiJythLmdldEVkaXRvcigpLm5hbWUrJ1wiIGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gdGhlIHByb3ZpZGVkIGVsZW1lbnQuJzt2YXIgbD1uZXcgQ0tFRElUT1IuZWRpdG9yKGYsYSxrKTtrPT1DS0VESVRPUi5FTEVNRU5UX01PREVfUkVQTEFDRSYmKGEuc2V0U3R5bGUoXCJ2aXNpYmlsaXR5XCIsXCJoaWRkZW5cIiksbC5fLnJlcXVpcmVkPWEuaGFzQXR0cmlidXRlKFwicmVxdWlyZWRcIiksYS5yZW1vdmVBdHRyaWJ1dGUoXCJyZXF1aXJlZFwiKSk7ZyYmbC5zZXREYXRhKGcsbnVsbCwhMCk7bC5vbihcImxvYWRlZFwiLGZ1bmN0aW9uKCl7YihsKTtrPT1DS0VESVRPUi5FTEVNRU5UX01PREVfUkVQTEFDRSYmbC5jb25maWcuYXV0b1VwZGF0ZUVsZW1lbnQmJlxuYS4kLmZvcm0mJmwuX2F0dGFjaFRvRm9ybSgpO2wuc2V0TW9kZShsLmNvbmZpZy5zdGFydHVwTW9kZSxmdW5jdGlvbigpe2wucmVzZXREaXJ0eSgpO2wuc3RhdHVzPVwicmVhZHlcIjtsLmZpcmVPbmNlKFwiaW5zdGFuY2VSZWFkeVwiKTtDS0VESVRPUi5maXJlKFwiaW5zdGFuY2VSZWFkeVwiLG51bGwsbCl9KX0pO2wub24oXCJkZXN0cm95XCIsZCk7cmV0dXJuIGx9ZnVuY3Rpb24gZCgpe3ZhciBhPXRoaXMuY29udGFpbmVyLGI9dGhpcy5lbGVtZW50O2EmJihhLmNsZWFyQ3VzdG9tRGF0YSgpLGEucmVtb3ZlKCkpO2ImJihiLmNsZWFyQ3VzdG9tRGF0YSgpLHRoaXMuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9SRVBMQUNFJiYoYi5zaG93KCksdGhpcy5fLnJlcXVpcmVkJiZiLnNldEF0dHJpYnV0ZShcInJlcXVpcmVkXCIsXCJyZXF1aXJlZFwiKSksZGVsZXRlIHRoaXMuZWxlbWVudCl9ZnVuY3Rpb24gYihhKXt2YXIgYj1hLm5hbWUsZD1hLmVsZW1lbnQsaz1hLmVsZW1lbnRNb2RlLGw9XG5hLmZpcmUoXCJ1aVNwYWNlXCIse3NwYWNlOlwidG9wXCIsaHRtbDpcIlwifSkuaHRtbCxtPWEuZmlyZShcInVpU3BhY2VcIix7c3BhY2U6XCJib3R0b21cIixodG1sOlwiXCJ9KS5odG1sLHU9bmV3IENLRURJVE9SLnRlbXBsYXRlKCdcXHgzY3tvdXRlckVsfSBpZFxceDNkXCJja2Vfe25hbWV9XCIgY2xhc3NcXHgzZFwie2lkfSBja2UgY2tlX3Jlc2V0IGNrZV9jaHJvbWUgY2tlX2VkaXRvcl97bmFtZX0gY2tlX3tsYW5nRGlyfSAnK0NLRURJVE9SLmVudi5jc3NDbGFzcysnXCIgIGRpclxceDNkXCJ7bGFuZ0Rpcn1cIiBsYW5nXFx4M2RcIntsYW5nQ29kZX1cIiByb2xlXFx4M2RcImFwcGxpY2F0aW9uXCInKyhhLnRpdGxlPycgYXJpYS1sYWJlbGxlZGJ5XFx4M2RcImNrZV97bmFtZX1fYXJpYWxibFwiJzpcIlwiKStcIlxceDNlXCIrKGEudGl0bGU/J1xceDNjc3BhbiBpZFxceDNkXCJja2Vfe25hbWV9X2FyaWFsYmxcIiBjbGFzc1xceDNkXCJja2Vfdm9pY2VfbGFiZWxcIlxceDNle3ZvaWNlTGFiZWx9XFx4M2Mvc3BhblxceDNlJzpcIlwiKSsnXFx4M2N7b3V0ZXJFbH0gY2xhc3NcXHgzZFwiY2tlX2lubmVyIGNrZV9yZXNldFwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZXt0b3BIdG1sfVxceDNje291dGVyRWx9IGlkXFx4M2RcIntjb250ZW50SWR9XCIgY2xhc3NcXHgzZFwiY2tlX2NvbnRlbnRzIGNrZV9yZXNldFwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZVxceDNjL3tvdXRlckVsfVxceDNle2JvdHRvbUh0bWx9XFx4M2Mve291dGVyRWx9XFx4M2VcXHgzYy97b3V0ZXJFbH1cXHgzZScpLFxuYj1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbCh1Lm91dHB1dCh7aWQ6YS5pZCxuYW1lOmIsbGFuZ0RpcjphLmxhbmcuZGlyLGxhbmdDb2RlOmEubGFuZ0NvZGUsdm9pY2VMYWJlbDphLnRpdGxlLHRvcEh0bWw6bD8nXFx4M2NzcGFuIGlkXFx4M2RcIicrYS51aS5zcGFjZUlkKFwidG9wXCIpKydcIiBjbGFzc1xceDNkXCJja2VfdG9wIGNrZV9yZXNldF9hbGxcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiIHN0eWxlXFx4M2RcImhlaWdodDphdXRvXCJcXHgzZScrbCtcIlxceDNjL3NwYW5cXHgzZVwiOlwiXCIsY29udGVudElkOmEudWkuc3BhY2VJZChcImNvbnRlbnRzXCIpLGJvdHRvbUh0bWw6bT8nXFx4M2NzcGFuIGlkXFx4M2RcIicrYS51aS5zcGFjZUlkKFwiYm90dG9tXCIpKydcIiBjbGFzc1xceDNkXCJja2VfYm90dG9tIGNrZV9yZXNldF9hbGxcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2UnK20rXCJcXHgzYy9zcGFuXFx4M2VcIjpcIlwiLG91dGVyRWw6Q0tFRElUT1IuZW52LmllP1wic3BhblwiOlwiZGl2XCJ9KSk7az09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX1JFUExBQ0U/XG4oZC5oaWRlKCksYi5pbnNlcnRBZnRlcihkKSk6ZC5hcHBlbmQoYik7YS5jb250YWluZXI9YjthLnVpLmNvbnRlbnRzRWxlbWVudD1hLnVpLnNwYWNlKFwiY29udGVudHNcIik7bCYmYS51aS5zcGFjZShcInRvcFwiKS51bnNlbGVjdGFibGUoKTttJiZhLnVpLnNwYWNlKFwiYm90dG9tXCIpLnVuc2VsZWN0YWJsZSgpO2Q9YS5jb25maWcud2lkdGg7az1hLmNvbmZpZy5oZWlnaHQ7ZCYmYi5zZXRTdHlsZShcIndpZHRoXCIsQ0tFRElUT1IudG9vbHMuY3NzTGVuZ3RoKGQpKTtrJiZhLnVpLnNwYWNlKFwiY29udGVudHNcIikuc2V0U3R5bGUoXCJoZWlnaHRcIixDS0VESVRPUi50b29scy5jc3NMZW5ndGgoaykpO2IuZGlzYWJsZUNvbnRleHRNZW51KCk7Q0tFRElUT1IuZW52LndlYmtpdCYmYi5vbihcImZvY3VzXCIsZnVuY3Rpb24oKXthLmZvY3VzKCl9KTthLmZpcmVPbmNlKFwidWlSZWFkeVwiKX1DS0VESVRPUi5yZXBsYWNlPWZ1bmN0aW9uKGIsZCl7cmV0dXJuIGEoYixkLG51bGwsQ0tFRElUT1IuRUxFTUVOVF9NT0RFX1JFUExBQ0UpfTtcbkNLRURJVE9SLmFwcGVuZFRvPWZ1bmN0aW9uKGIsZCxnKXtyZXR1cm4gYShiLGQsZyxDS0VESVRPUi5FTEVNRU5UX01PREVfQVBQRU5EVE8pfTtDS0VESVRPUi5yZXBsYWNlQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGV4dGFyZWFcIiksYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgZD1udWxsLGs9YVtiXTtpZihrLm5hbWV8fGsuaWQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe2lmKCEobmV3IFJlZ0V4cChcIig/Ol58XFxcXHMpXCIrYXJndW1lbnRzWzBdK1wiKD86JHxcXFxccylcIikpLnRlc3Qoay5jbGFzc05hbWUpKWNvbnRpbnVlfWVsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYXJndW1lbnRzWzBdJiYoZD17fSwhMT09PWFyZ3VtZW50c1swXShrLGQpKSljb250aW51ZTt0aGlzLnJlcGxhY2UoayxkKX19fTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmFkZE1vZGU9ZnVuY3Rpb24oYSxiKXsodGhpcy5fLm1vZGVzfHwodGhpcy5fLm1vZGVzPVxue30pKVthXT1ifTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLnNldE1vZGU9ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLGs9dGhpcy5fLm1vZGVzO2lmKGEhPWQubW9kZSYmayYma1thXSl7ZC5maXJlKFwiYmVmb3JlU2V0TW9kZVwiLGEpO2lmKGQubW9kZSl7dmFyIGw9ZC5jaGVja0RpcnR5KCksaz1kLl8ucHJldmlvdXNNb2RlRGF0YSxtLHU9MDtkLmZpcmUoXCJiZWZvcmVNb2RlVW5sb2FkXCIpO2QuZWRpdGFibGUoMCk7ZC5fLnByZXZpb3VzTW9kZT1kLm1vZGU7ZC5fLnByZXZpb3VzTW9kZURhdGE9bT1kLmdldERhdGEoMSk7XCJzb3VyY2VcIj09ZC5tb2RlJiZrPT1tJiYoZC5maXJlKFwibG9ja1NuYXBzaG90XCIse2ZvcmNlVXBkYXRlOiEwfSksdT0xKTtkLnVpLnNwYWNlKFwiY29udGVudHNcIikuc2V0SHRtbChcIlwiKTtkLm1vZGU9XCJcIn1lbHNlIGQuXy5wcmV2aW91c01vZGVEYXRhPWQuZ2V0RGF0YSgxKTt0aGlzLl8ubW9kZXNbYV0oZnVuY3Rpb24oKXtkLm1vZGU9YTt2b2lkIDAhPT1sJiYhbCYmXG5kLnJlc2V0RGlydHkoKTt1P2QuZmlyZShcInVubG9ja1NuYXBzaG90XCIpOlwid3lzaXd5Z1wiPT1hJiZkLmZpcmUoXCJzYXZlU25hcHNob3RcIik7c2V0VGltZW91dChmdW5jdGlvbigpe2QuZmlyZShcIm1vZGVcIik7YiYmYi5jYWxsKGQpfSwwKX0pfX07Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oYSxiLGQsayl7dmFyIGw9dGhpcy5jb250YWluZXIsbT10aGlzLnVpLnNwYWNlKFwiY29udGVudHNcIiksdT1DS0VESVRPUi5lbnYud2Via2l0JiZ0aGlzLmRvY3VtZW50JiZ0aGlzLmRvY3VtZW50LmdldFdpbmRvdygpLiQuZnJhbWVFbGVtZW50O2s9az90aGlzLmNvbnRhaW5lci5nZXRGaXJzdChmdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuaGFzQ2xhc3MoXCJja2VfaW5uZXJcIil9KTpsO2suc2V0U2l6ZShcIndpZHRoXCIsYSwhMCk7dSYmKHUuc3R5bGUud2lkdGg9XCIxJVwiKTt2YXIgZT0oay4kLm9mZnNldEhlaWdodHx8MCktKG0uJC5jbGllbnRIZWlnaHR8fFxuMCksbD1NYXRoLm1heChiLShkPzA6ZSksMCk7Yj1kP2IrZTpiO20uc2V0U3R5bGUoXCJoZWlnaHRcIixsK1wicHhcIik7dSYmKHUuc3R5bGUud2lkdGg9XCIxMDAlXCIpO3RoaXMuZmlyZShcInJlc2l6ZVwiLHtvdXRlckhlaWdodDpiLGNvbnRlbnRzSGVpZ2h0Omwsb3V0ZXJXaWR0aDphfHxrLmdldFNpemUoXCJ3aWR0aFwiKX0pfTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmdldFJlc2l6YWJsZT1mdW5jdGlvbihhKXtyZXR1cm4gYT90aGlzLnVpLnNwYWNlKFwiY29udGVudHNcIik6dGhpcy5jb250YWluZXJ9O0NLRURJVE9SLmRvbVJlYWR5KGZ1bmN0aW9uKCl7Q0tFRElUT1IucmVwbGFjZUNsYXNzJiZDS0VESVRPUi5yZXBsYWNlQWxsKENLRURJVE9SLnJlcGxhY2VDbGFzcyl9KX0pKCk7Q0tFRElUT1IuY29uZmlnLnN0YXJ0dXBNb2RlPVwid3lzaXd5Z1wiO1xuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt2YXIgYj1hLmVkaXRvcixlPWEuZGF0YS5wYXRoLG49ZS5ibG9ja0xpbWl0LGY9YS5kYXRhLnNlbGVjdGlvbixnPWYuZ2V0UmFuZ2VzKClbMF0sbDtpZihDS0VESVRPUi5lbnYuZ2Vja298fENLRURJVE9SLmVudi5pZSYmQ0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXIpaWYoZj1kKGYsZSkpZi5hcHBlbmRCb2d1cygpLGw9Q0tFRElUT1IuZW52LmllO2soYixlLmJsb2NrLG4pJiZnLmNvbGxhcHNlZCYmIWcuZ2V0Q29tbW9uQW5jZXN0b3IoKS5pc1JlYWRPbmx5KCkmJihlPWcuY2xvbmUoKSxlLmVubGFyZ2UoQ0tFRElUT1IuRU5MQVJHRV9CTE9DS19DT05URU5UUyksbj1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihlKSxuLmd1YXJkPWZ1bmN0aW9uKGEpe3JldHVybiFjKGEpfHxhLnR5cGU9PUNLRURJVE9SLk5PREVfQ09NTUVOVHx8YS5pc1JlYWRPbmx5KCl9LCFuLmNoZWNrRm9yd2FyZCgpfHxlLmNoZWNrU3RhcnRPZkJsb2NrKCkmJmUuY2hlY2tFbmRPZkJsb2NrKCkpJiZcbihiPWcuZml4QmxvY2soITAsYi5hY3RpdmVFbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX0RJVj9cImRpdlwiOlwicFwiKSxDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlcnx8KGI9Yi5nZXRGaXJzdChjKSkmJmIudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiZDS0VESVRPUi50b29scy50cmltKGIuZ2V0VGV4dCgpKS5tYXRjaCgvXig/OiZuYnNwO3xcXHhhMCkkLykmJmIucmVtb3ZlKCksbD0xLGEuY2FuY2VsKCkpO2wmJmcuc2VsZWN0KCl9ZnVuY3Rpb24gZChhLGIpe2lmKGEuaXNGYWtlKXJldHVybiAwO3ZhciBkPWIuYmxvY2t8fGIuYmxvY2tMaW1pdCxlPWQmJmQuZ2V0TGFzdChjKTtpZighKCFkfHwhZC5pc0Jsb2NrQm91bmRhcnkoKXx8ZSYmZS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmUuaXNCbG9ja0JvdW5kYXJ5KCl8fGQuaXMoXCJwcmVcIil8fGQuZ2V0Qm9ndXMoKSkpcmV0dXJuIGR9ZnVuY3Rpb24gYihhKXt2YXIgYj1hLmRhdGEuZ2V0VGFyZ2V0KCk7Yi5pcyhcImlucHV0XCIpJiZcbihiPWIuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSxcInN1Ym1pdFwiIT1iJiZcInJlc2V0XCIhPWJ8fGEuZGF0YS5wcmV2ZW50RGVmYXVsdCgpKX1mdW5jdGlvbiBjKGEpe3JldHVybiBlKGEpJiZBKGEpfWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9Yy5kYXRhLiQudG9FbGVtZW50fHxjLmRhdGEuJC5mcm9tRWxlbWVudHx8Yy5kYXRhLiQucmVsYXRlZFRhcmdldDsoZD1kJiZkLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQ/bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGQpOm51bGwpJiYoYi5lcXVhbHMoZCl8fGIuY29udGFpbnMoZCkpfHxhLmNhbGwodGhpcyxjKX19ZnVuY3Rpb24gZyhhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBmdW5jdGlvbihiLGgpe2gmJmIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZiLmlzKGYpJiYoZD1iKTtpZighKGh8fCFjKGIpfHxhJiZ4KGIpKSlyZXR1cm4hMX19dmFyIGQsZT1hLmdldFJhbmdlcygpWzBdO2E9YS5yb290O1xudmFyIGY9e3RhYmxlOjEsdWw6MSxvbDoxLGRsOjF9O2lmKGUuc3RhcnRQYXRoKCkuY29udGFpbnMoZikpe3ZhciBnPWUuY2xvbmUoKTtnLmNvbGxhcHNlKDEpO2cuc2V0U3RhcnRBdChhLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKTthPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGcpO2EuZ3VhcmQ9YigpO2EuY2hlY2tCYWNrd2FyZCgpO2lmKGQpcmV0dXJuIGc9ZS5jbG9uZSgpLGcuY29sbGFwc2UoKSxnLnNldEVuZEF0KGQsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EKSxhPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGcpLGEuZ3VhcmQ9YighMCksZD0hMSxhLmNoZWNrRm9yd2FyZCgpLGR9cmV0dXJuIG51bGx9ZnVuY3Rpb24gayhhLGIsYyl7cmV0dXJuITEhPT1hLmNvbmZpZy5hdXRvUGFyYWdyYXBoJiZhLmFjdGl2ZUVudGVyTW9kZSE9Q0tFRElUT1IuRU5URVJfQlImJihhLmVkaXRhYmxlKCkuZXF1YWxzKGMpJiYhYnx8YiYmXCJ0cnVlXCI9PWIuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKX1cbmZ1bmN0aW9uIGwoYSl7cmV0dXJuIGEuYWN0aXZlRW50ZXJNb2RlIT1DS0VESVRPUi5FTlRFUl9CUiYmITEhPT1hLmNvbmZpZy5hdXRvUGFyYWdyYXBoP2EuYWN0aXZlRW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9ESVY/XCJkaXZcIjpcInBcIjohMX1mdW5jdGlvbiBtKGEpe3ZhciBiPWEuZWRpdG9yO2IuZ2V0U2VsZWN0aW9uKCkuc2Nyb2xsSW50b1ZpZXcoKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5maXJlKFwic2F2ZVNuYXBzaG90XCIpfSwwKX1mdW5jdGlvbiB1KGEsYixjKXt2YXIgZD1hLmdldENvbW1vbkFuY2VzdG9yKGIpO2ZvcihiPWE9Yz9iOmE7KGE9YS5nZXRQYXJlbnQoKSkmJiFkLmVxdWFscyhhKSYmMT09YS5nZXRDaGlsZENvdW50KCk7KWI9YTtiLnJlbW92ZSgpfXZhciBlLEEscix4LEQscSx3LEgsdDtDS0VESVRPUi5lZGl0YWJsZT1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7YmFzZTpDS0VESVRPUi5kb20uZWxlbWVudCwkOmZ1bmN0aW9uKGEsYil7dGhpcy5iYXNlKGIuJHx8XG5iKTt0aGlzLmVkaXRvcj1hO3RoaXMuc3RhdHVzPVwidW5sb2FkZWRcIjt0aGlzLmhhc0ZvY3VzPSExO3RoaXMuc2V0dXAoKX0scHJvdG86e2ZvY3VzOmZ1bmN0aW9uKCl7dmFyIGE7aWYoQ0tFRElUT1IuZW52LndlYmtpdCYmIXRoaXMuaGFzRm9jdXMmJihhPXRoaXMuZWRpdG9yLl8ucHJldmlvdXNBY3RpdmV8fHRoaXMuZ2V0RG9jdW1lbnQoKS5nZXRBY3RpdmUoKSx0aGlzLmNvbnRhaW5zKGEpKSl7YS5mb2N1cygpO3JldHVybn1DS0VESVRPUi5lbnYuZWRnZSYmMTQ8Q0tFRElUT1IuZW52LnZlcnNpb24mJiF0aGlzLmhhc0ZvY3VzJiZ0aGlzLmdldERvY3VtZW50KCkuZXF1YWxzKENLRURJVE9SLmRvY3VtZW50KSYmKHRoaXMuZWRpdG9yLl8ucHJldmlvdXNTY3JvbGxUb3A9dGhpcy4kLnNjcm9sbFRvcCk7dHJ5eyFDS0VESVRPUi5lbnYuaWV8fENLRURJVE9SLmVudi5lZGdlJiYxNDxDS0VESVRPUi5lbnYudmVyc2lvbnx8IXRoaXMuZ2V0RG9jdW1lbnQoKS5lcXVhbHMoQ0tFRElUT1IuZG9jdW1lbnQpP1xudGhpcy4kLmZvY3VzKCk6dGhpcy4kLnNldEFjdGl2ZSgpfWNhdGNoKGIpe2lmKCFDS0VESVRPUi5lbnYuaWUpdGhyb3cgYjt9Q0tFRElUT1IuZW52LnNhZmFyaSYmIXRoaXMuaXNJbmxpbmUoKSYmKGE9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QWN0aXZlKCksYS5lcXVhbHModGhpcy5nZXRXaW5kb3coKS5nZXRGcmFtZSgpKXx8dGhpcy5nZXRXaW5kb3coKS5mb2N1cygpKX0sb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCk7Q0tFRElUT1IuZW52LmllJiYvXmZvY3VzfGJsdXIkLy5leGVjKGEpJiYoYT1cImZvY3VzXCI9PWE/XCJmb2N1c2luXCI6XCJmb2N1c291dFwiLGI9ZihiLHRoaXMpLGNbMF09YSxjWzFdPWIpO3JldHVybiBDS0VESVRPUi5kb20uZWxlbWVudC5wcm90b3R5cGUub24uYXBwbHkodGhpcyxjKX0sYXR0YWNoTGlzdGVuZXI6ZnVuY3Rpb24oYSl7IXRoaXMuXy5saXN0ZW5lcnMmJih0aGlzLl8ubGlzdGVuZXJzPVtdKTt2YXIgYj1cbkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxiPWEub24uYXBwbHkoYSxiKTt0aGlzLl8ubGlzdGVuZXJzLnB1c2goYik7cmV0dXJuIGJ9LGNsZWFyTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fLmxpc3RlbmVyczt0cnl7Zm9yKDthLmxlbmd0aDspYS5wb3AoKS5yZW1vdmVMaXN0ZW5lcigpfWNhdGNoKGIpe319LHJlc3RvcmVBdHRyczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuXy5hdHRyQ2hhbmdlcyxiLGM7Zm9yKGMgaW4gYSlhLmhhc093blByb3BlcnR5KGMpJiYoYj1hW2NdLG51bGwhPT1iP3RoaXMuc2V0QXR0cmlidXRlKGMsYik6dGhpcy5yZW1vdmVBdHRyaWJ1dGUoYykpfSxhdHRhY2hDbGFzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEN1c3RvbURhdGEoXCJjbGFzc2VzXCIpO3RoaXMuaGFzQ2xhc3MoYSl8fCghYiYmKGI9W10pLGIucHVzaChhKSx0aGlzLnNldEN1c3RvbURhdGEoXCJjbGFzc2VzXCIsYiksdGhpcy5hZGRDbGFzcyhhKSl9LGNoYW5nZUF0dHI6ZnVuY3Rpb24oYSxcbmIpe3ZhciBjPXRoaXMuZ2V0QXR0cmlidXRlKGEpO2IhPT1jJiYoIXRoaXMuXy5hdHRyQ2hhbmdlcyYmKHRoaXMuXy5hdHRyQ2hhbmdlcz17fSksYSBpbiB0aGlzLl8uYXR0ckNoYW5nZXN8fCh0aGlzLl8uYXR0ckNoYW5nZXNbYV09YyksdGhpcy5zZXRBdHRyaWJ1dGUoYSxiKSl9LGluc2VydFRleHQ6ZnVuY3Rpb24oYSl7dGhpcy5lZGl0b3IuZm9jdXMoKTt0aGlzLmluc2VydEh0bWwodGhpcy50cmFuc2Zvcm1QbGFpblRleHRUb0h0bWwoYSksXCJ0ZXh0XCIpfSx0cmFuc2Zvcm1QbGFpblRleHRUb0h0bWw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lZGl0b3IuZ2V0U2VsZWN0aW9uKCkuZ2V0U3RhcnRFbGVtZW50KCkuaGFzQXNjZW5kYW50KFwicHJlXCIsITApP0NLRURJVE9SLkVOVEVSX0JSOnRoaXMuZWRpdG9yLmFjdGl2ZUVudGVyTW9kZTtyZXR1cm4gQ0tFRElUT1IudG9vbHMudHJhbnNmb3JtUGxhaW5UZXh0VG9IdG1sKGEsYil9LGluc2VydEh0bWw6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVxudGhpcy5lZGl0b3I7ZC5mb2N1cygpO2QuZmlyZShcInNhdmVTbmFwc2hvdFwiKTtjfHwoYz1kLmdldFNlbGVjdGlvbigpLmdldFJhbmdlcygpWzBdKTtxKHRoaXMsYnx8XCJodG1sXCIsYSxjKTtjLnNlbGVjdCgpO20odGhpcyk7dGhpcy5lZGl0b3IuZmlyZShcImFmdGVySW5zZXJ0SHRtbFwiLHt9KX0saW5zZXJ0SHRtbEludG9SYW5nZTpmdW5jdGlvbihhLGIsYyl7cSh0aGlzLGN8fFwiaHRtbFwiLGEsYik7dGhpcy5lZGl0b3IuZmlyZShcImFmdGVySW5zZXJ0SHRtbFwiLHtpbnRvUmFuZ2U6Yn0pfSxpbnNlcnRFbGVtZW50OmZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcy5lZGl0b3I7ZC5mb2N1cygpO2QuZmlyZShcInNhdmVTbmFwc2hvdFwiKTt2YXIgZT1kLmFjdGl2ZUVudGVyTW9kZSxkPWQuZ2V0U2VsZWN0aW9uKCksZj1hLmdldE5hbWUoKSxmPUNLRURJVE9SLmR0ZC4kYmxvY2tbZl07Ynx8KGI9ZC5nZXRSYW5nZXMoKVswXSk7dGhpcy5pbnNlcnRFbGVtZW50SW50b1JhbmdlKGEsYikmJihiLm1vdmVUb1Bvc2l0aW9uKGEsXG5DS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpLGYmJigoZj1hLmdldE5leHQoZnVuY3Rpb24oYSl7cmV0dXJuIGMoYSkmJiF4KGEpfSkpJiZmLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZi5pcyhDS0VESVRPUi5kdGQuJGJsb2NrKT9mLmdldER0ZCgpW1wiI1wiXT9iLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoZik6Yi5tb3ZlVG9FbGVtZW50RWRpdEVuZChhKTpmfHxlPT1DS0VESVRPUi5FTlRFUl9CUnx8KGY9Yi5maXhCbG9jayghMCxlPT1DS0VESVRPUi5FTlRFUl9ESVY/XCJkaXZcIjpcInBcIiksYi5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KGYpKSkpO2Quc2VsZWN0UmFuZ2VzKFtiXSk7bSh0aGlzKX0saW5zZXJ0RWxlbWVudEludG9TZWxlY3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5pbnNlcnRFbGVtZW50KGEpfSxpbnNlcnRFbGVtZW50SW50b1JhbmdlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5lZGl0b3IsZD1jLmNvbmZpZy5lbnRlck1vZGUsZT1hLmdldE5hbWUoKSxmPUNLRURJVE9SLmR0ZC4kYmxvY2tbZV07XG5pZihiLmNoZWNrUmVhZE9ubHkoKSlyZXR1cm4hMTtiLmRlbGV0ZUNvbnRlbnRzKDEpO2Iuc3RhcnRDb250YWluZXIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZiLnN0YXJ0Q29udGFpbmVyLmlzKHt0cjoxLHRhYmxlOjEsdGJvZHk6MSx0aGVhZDoxLHRmb290OjF9KSYmdyhiKTt2YXIgZyxrO2lmKGYpZm9yKDsoZz1iLmdldENvbW1vbkFuY2VzdG9yKDAsMSkpJiYoaz1DS0VESVRPUi5kdGRbZy5nZXROYW1lKCldKSYmKCFrfHwha1tlXSk7KWcuZ2V0TmFtZSgpaW4gQ0tFRElUT1IuZHRkLnNwYW4/Yi5zcGxpdEVsZW1lbnQoZyk6Yi5jaGVja1N0YXJ0T2ZCbG9jaygpJiZiLmNoZWNrRW5kT2ZCbG9jaygpPyhiLnNldFN0YXJ0QmVmb3JlKGcpLGIuY29sbGFwc2UoITApLGcucmVtb3ZlKCkpOmIuc3BsaXRCbG9jayhkPT1DS0VESVRPUi5FTlRFUl9ESVY/XCJkaXZcIjpcInBcIixjLmVkaXRhYmxlKCkpO2IuaW5zZXJ0Tm9kZShhKTtyZXR1cm4hMH0sc2V0RGF0YTpmdW5jdGlvbihhLGIpe2J8fFxuKGE9dGhpcy5lZGl0b3IuZGF0YVByb2Nlc3Nvci50b0h0bWwoYSkpO3RoaXMuc2V0SHRtbChhKTt0aGlzLmZpeEluaXRpYWxTZWxlY3Rpb24oKTtcInVubG9hZGVkXCI9PXRoaXMuc3RhdHVzJiYodGhpcy5zdGF0dXM9XCJyZWFkeVwiKTt0aGlzLmVkaXRvci5maXJlKFwiZGF0YVJlYWR5XCIpfSxnZXREYXRhOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0SHRtbCgpO2F8fChiPXRoaXMuZWRpdG9yLmRhdGFQcm9jZXNzb3IudG9EYXRhRm9ybWF0KGIpKTtyZXR1cm4gYn0sc2V0UmVhZE9ubHk6ZnVuY3Rpb24oYSl7dGhpcy5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwhYSl9LGRldGFjaDpmdW5jdGlvbigpe3RoaXMucmVtb3ZlQ2xhc3MoXCJja2VfZWRpdGFibGVcIik7dGhpcy5zdGF0dXM9XCJkZXRhY2hlZFwiO3ZhciBhPXRoaXMuZWRpdG9yO3RoaXMuXy5kZXRhY2goKTtkZWxldGUgYS5kb2N1bWVudDtkZWxldGUgYS53aW5kb3d9LGlzSW5saW5lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RG9jdW1lbnQoKS5lcXVhbHMoQ0tFRElUT1IuZG9jdW1lbnQpfSxcbmZpeEluaXRpYWxTZWxlY3Rpb246ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dmFyIGI9Yy5nZXREb2N1bWVudCgpLiQsZD1iLmdldFNlbGVjdGlvbigpLGg7YTppZihkLmFuY2hvck5vZGUmJmQuYW5jaG9yTm9kZT09Yy4kKWg9ITA7ZWxzZXtpZihDS0VESVRPUi5lbnYud2Via2l0JiYoaD1jLmdldERvY3VtZW50KCkuZ2V0QWN0aXZlKCkpJiZoLmVxdWFscyhjKSYmIWQuYW5jaG9yTm9kZSl7aD0hMDticmVhayBhfWg9dm9pZCAwfWgmJihoPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UoYyksaC5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KGMpLGI9Yi5jcmVhdGVSYW5nZSgpLGIuc2V0U3RhcnQoaC5zdGFydENvbnRhaW5lci4kLGguc3RhcnRPZmZzZXQpLGIuY29sbGFwc2UoITApLGQucmVtb3ZlQWxsUmFuZ2VzKCksZC5hZGRSYW5nZShiKSl9ZnVuY3Rpb24gYigpe3ZhciBhPWMuZ2V0RG9jdW1lbnQoKS4kLGQ9YS5zZWxlY3Rpb24saD1jLmdldERvY3VtZW50KCkuZ2V0QWN0aXZlKCk7XCJOb25lXCI9PVxuZC50eXBlJiZoLmVxdWFscyhjKSYmKGQ9bmV3IENLRURJVE9SLmRvbS5yYW5nZShjKSxhPWEuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKSxkLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoYyksZD1kLnN0YXJ0Q29udGFpbmVyLGQudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoZD1kLmdldFBhcmVudCgpKSxhLm1vdmVUb0VsZW1lbnRUZXh0KGQuJCksYS5jb2xsYXBzZSghMCksYS5zZWxlY3QoKSl9dmFyIGM9dGhpcztpZihDS0VESVRPUi5lbnYuaWUmJig5PkNLRURJVE9SLmVudi52ZXJzaW9ufHxDS0VESVRPUi5lbnYucXVpcmtzKSl0aGlzLmhhc0ZvY3VzJiYodGhpcy5mb2N1cygpLGIoKSk7ZWxzZSBpZih0aGlzLmhhc0ZvY3VzKXRoaXMuZm9jdXMoKSxhKCk7ZWxzZSB0aGlzLm9uY2UoXCJmb2N1c1wiLGZ1bmN0aW9uKCl7YSgpfSxudWxsLG51bGwsLTk5OSl9LGdldEh0bWxGcm9tUmFuZ2U6ZnVuY3Rpb24oYSl7aWYoYS5jb2xsYXBzZWQpcmV0dXJuIG5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnRGcmFnbWVudChhLmRvY3VtZW50KTtcbmE9e2RvYzp0aGlzLmdldERvY3VtZW50KCkscmFuZ2U6YS5jbG9uZSgpfTtILmVvbC5kZXRlY3QoYSx0aGlzKTtILmJvZ3VzLmV4Y2x1ZGUoYSk7SC5jZWxsLnNocmluayhhKTthLmZyYWdtZW50PWEucmFuZ2UuY2xvbmVDb250ZW50cygpO0gudHJlZS5yZWJ1aWxkKGEsdGhpcyk7SC5lb2wuZml4KGEsdGhpcyk7cmV0dXJuIG5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnRGcmFnbWVudChhLmZyYWdtZW50LiQpfSxleHRyYWN0SHRtbEZyb21SYW5nZTpmdW5jdGlvbihhLGIpe3ZhciBjPXQsZD17cmFuZ2U6YSxkb2M6YS5kb2N1bWVudH0sZT10aGlzLmdldEh0bWxGcm9tUmFuZ2UoYSk7aWYoYS5jb2xsYXBzZWQpcmV0dXJuIGEub3B0aW1pemUoKSxlO2EuZW5sYXJnZShDS0VESVRPUi5FTkxBUkdFX0lOTElORSwxKTtjLnRhYmxlLmRldGVjdFB1cmdlKGQpO2QuYm9va21hcms9YS5jcmVhdGVCb29rbWFyaygpO2RlbGV0ZSBkLnJhbmdlO3ZhciBmPXRoaXMuZWRpdG9yLmNyZWF0ZVJhbmdlKCk7XG5mLm1vdmVUb1Bvc2l0aW9uKGQuYm9va21hcmsuc3RhcnROb2RlLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCk7ZC50YXJnZXRCb29rbWFyaz1mLmNyZWF0ZUJvb2ttYXJrKCk7Yy5saXN0LmRldGVjdE1lcmdlKGQsdGhpcyk7Yy50YWJsZS5kZXRlY3RSYW5nZXMoZCx0aGlzKTtjLmJsb2NrLmRldGVjdE1lcmdlKGQsdGhpcyk7ZC50YWJsZUNvbnRlbnRzUmFuZ2VzPyhjLnRhYmxlLmRlbGV0ZVJhbmdlcyhkKSxhLm1vdmVUb0Jvb2ttYXJrKGQuYm9va21hcmspLGQucmFuZ2U9YSk6KGEubW92ZVRvQm9va21hcmsoZC5ib29rbWFyayksZC5yYW5nZT1hLGEuZXh0cmFjdENvbnRlbnRzKGMuZGV0ZWN0RXh0cmFjdE1lcmdlKGQpKSk7YS5tb3ZlVG9Cb29rbWFyayhkLnRhcmdldEJvb2ttYXJrKTthLm9wdGltaXplKCk7Yy5maXhVbmVkaXRhYmxlUmFuZ2VQb3NpdGlvbihhKTtjLmxpc3QubWVyZ2UoZCx0aGlzKTtjLnRhYmxlLnB1cmdlKGQsdGhpcyk7Yy5ibG9jay5tZXJnZShkLHRoaXMpO1xuaWYoYil7Yz1hLnN0YXJ0UGF0aCgpO2lmKGQ9YS5jaGVja1N0YXJ0T2ZCbG9jaygpJiZhLmNoZWNrRW5kT2ZCbG9jaygpJiZjLmJsb2NrJiYhYS5yb290LmVxdWFscyhjLmJsb2NrKSl7YTp7dmFyIGQ9Yy5ibG9jay5nZXRFbGVtZW50c0J5VGFnKFwic3BhblwiKSxmPTAsZztpZihkKWZvcig7Zz1kLmdldEl0ZW0oZisrKTspaWYoIUEoZykpe2Q9ITA7YnJlYWsgYX1kPSExfWQ9IWR9ZCYmKGEubW92ZVRvUG9zaXRpb24oYy5ibG9jayxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLGMuYmxvY2sucmVtb3ZlKCkpfWVsc2UgYy5hdXRvUGFyYWdyYXBoKHRoaXMuZWRpdG9yLGEpLHIoYS5zdGFydENvbnRhaW5lcikmJmEuc3RhcnRDb250YWluZXIuYXBwZW5kQm9ndXMoKTthLnN0YXJ0Q29udGFpbmVyLm1lcmdlU2libGluZ3MoKTtyZXR1cm4gZX0sc2V0dXA6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVkaXRvcjt0aGlzLmF0dGFjaExpc3RlbmVyKGEsXCJiZWZvcmVHZXREYXRhXCIsZnVuY3Rpb24oKXt2YXIgYj1cbnRoaXMuZ2V0RGF0YSgpO3RoaXMuaXMoXCJ0ZXh0YXJlYVwiKXx8ITEhPT1hLmNvbmZpZy5pZ25vcmVFbXB0eVBhcmFncmFwaCYmKGI9Yi5yZXBsYWNlKEQsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYn0pKTthLnNldERhdGEoYixudWxsLDEpfSx0aGlzKTt0aGlzLmF0dGFjaExpc3RlbmVyKGEsXCJnZXRTbmFwc2hvdFwiLGZ1bmN0aW9uKGEpe2EuZGF0YT10aGlzLmdldERhdGEoMSl9LHRoaXMpO3RoaXMuYXR0YWNoTGlzdGVuZXIoYSxcImFmdGVyU2V0RGF0YVwiLGZ1bmN0aW9uKCl7dGhpcy5zZXREYXRhKGEuZ2V0RGF0YSgxKSl9LHRoaXMpO3RoaXMuYXR0YWNoTGlzdGVuZXIoYSxcImxvYWRTbmFwc2hvdFwiLGZ1bmN0aW9uKGEpe3RoaXMuc2V0RGF0YShhLmRhdGEsMSl9LHRoaXMpO3RoaXMuYXR0YWNoTGlzdGVuZXIoYSxcImJlZm9yZUZvY3VzXCIsZnVuY3Rpb24oKXt2YXIgYj1hLmdldFNlbGVjdGlvbigpOyhiPWImJmIuZ2V0TmF0aXZlKCkpJiZcIkNvbnRyb2xcIj09Yi50eXBlfHx0aGlzLmZvY3VzKCl9LFxudGhpcyk7dGhpcy5hdHRhY2hMaXN0ZW5lcihhLFwiaW5zZXJ0SHRtbFwiLGZ1bmN0aW9uKGEpe3RoaXMuaW5zZXJ0SHRtbChhLmRhdGEuZGF0YVZhbHVlLGEuZGF0YS5tb2RlLGEuZGF0YS5yYW5nZSl9LHRoaXMpO3RoaXMuYXR0YWNoTGlzdGVuZXIoYSxcImluc2VydEVsZW1lbnRcIixmdW5jdGlvbihhKXt0aGlzLmluc2VydEVsZW1lbnQoYS5kYXRhKX0sdGhpcyk7dGhpcy5hdHRhY2hMaXN0ZW5lcihhLFwiaW5zZXJ0VGV4dFwiLGZ1bmN0aW9uKGEpe3RoaXMuaW5zZXJ0VGV4dChhLmRhdGEpfSx0aGlzKTt0aGlzLnNldFJlYWRPbmx5KGEucmVhZE9ubHkpO3RoaXMuYXR0YWNoQ2xhc3MoXCJja2VfZWRpdGFibGVcIik7YS5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORT90aGlzLmF0dGFjaENsYXNzKFwiY2tlX2VkaXRhYmxlX2lubGluZVwiKTphLmVsZW1lbnRNb2RlIT1DS0VESVRPUi5FTEVNRU5UX01PREVfUkVQTEFDRSYmYS5lbGVtZW50TW9kZSE9Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0FQUEVORFRPfHxcbnRoaXMuYXR0YWNoQ2xhc3MoXCJja2VfZWRpdGFibGVfdGhlbWVkXCIpO3RoaXMuYXR0YWNoQ2xhc3MoXCJja2VfY29udGVudHNfXCIrYS5jb25maWcuY29udGVudHNMYW5nRGlyZWN0aW9uKTthLmtleXN0cm9rZUhhbmRsZXIuYmxvY2tlZEtleXN0cm9rZXNbOF09K2EucmVhZE9ubHk7YS5rZXlzdHJva2VIYW5kbGVyLmF0dGFjaCh0aGlzKTt0aGlzLm9uKFwiYmx1clwiLGZ1bmN0aW9uKCl7dGhpcy5oYXNGb2N1cz0hMX0sbnVsbCxudWxsLC0xKTt0aGlzLm9uKFwiZm9jdXNcIixmdW5jdGlvbigpe3RoaXMuaGFzRm9jdXM9ITB9LG51bGwsbnVsbCwtMSk7aWYoQ0tFRElUT1IuZW52LndlYmtpdCl0aGlzLm9uKFwic2Nyb2xsXCIsZnVuY3Rpb24oKXthLl8ucHJldmlvdXNTY3JvbGxUb3A9YS5lZGl0YWJsZSgpLiQuc2Nyb2xsVG9wfSxudWxsLG51bGwsLTEpO2lmKENLRURJVE9SLmVudi5lZGdlJiYxNDxDS0VESVRPUi5lbnYudmVyc2lvbil7dmFyIGQ9ZnVuY3Rpb24oKXt2YXIgYj1hLmVkaXRhYmxlKCk7XG5udWxsIT1hLl8ucHJldmlvdXNTY3JvbGxUb3AmJmIuZ2V0RG9jdW1lbnQoKS5lcXVhbHMoQ0tFRElUT1IuZG9jdW1lbnQpJiYoYi4kLnNjcm9sbFRvcD1hLl8ucHJldmlvdXNTY3JvbGxUb3AsYS5fLnByZXZpb3VzU2Nyb2xsVG9wPW51bGwsdGhpcy5yZW1vdmVMaXN0ZW5lcihcInNjcm9sbFwiLGQpKX07dGhpcy5vbihcInNjcm9sbFwiLGQpfWEuZm9jdXNNYW5hZ2VyLmFkZCh0aGlzKTt0aGlzLmVxdWFscyhDS0VESVRPUi5kb2N1bWVudC5nZXRBY3RpdmUoKSkmJih0aGlzLmhhc0ZvY3VzPSEwLGEub25jZShcImNvbnRlbnREb21cIixmdW5jdGlvbigpe2EuZm9jdXNNYW5hZ2VyLmZvY3VzKHRoaXMpfSx0aGlzKSk7dGhpcy5pc0lubGluZSgpJiZ0aGlzLmNoYW5nZUF0dHIoXCJ0YWJpbmRleFwiLGEudGFiSW5kZXgpO2lmKCF0aGlzLmlzKFwidGV4dGFyZWFcIikpe2EuZG9jdW1lbnQ9dGhpcy5nZXREb2N1bWVudCgpO2Eud2luZG93PXRoaXMuZ2V0V2luZG93KCk7dmFyIGY9YS5kb2N1bWVudDt0aGlzLmNoYW5nZUF0dHIoXCJzcGVsbGNoZWNrXCIsXG4hYS5jb25maWcuZGlzYWJsZU5hdGl2ZVNwZWxsQ2hlY2tlcik7dmFyIG49YS5jb25maWcuY29udGVudHNMYW5nRGlyZWN0aW9uO3RoaXMuZ2V0RGlyZWN0aW9uKDEpIT1uJiZ0aGlzLmNoYW5nZUF0dHIoXCJkaXJcIixuKTt2YXIgaz1DS0VESVRPUi5nZXRDc3MoKTtpZihrKXt2YXIgbj1mLmdldEhlYWQoKSx6PW4uZ2V0Q3VzdG9tRGF0YShcInN0eWxlc2hlZXRcIik7ej9rIT16LmdldFRleHQoKSYmKENLRURJVE9SLmVudi5pZSYmOT5DS0VESVRPUi5lbnYudmVyc2lvbj96LiQuc3R5bGVTaGVldC5jc3NUZXh0PWs6ei5zZXRUZXh0KGspKTooaz1mLmFwcGVuZFN0eWxlVGV4dChrKSxrPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChrLm93bmVyTm9kZXx8ay5vd25pbmdFbGVtZW50KSxuLnNldEN1c3RvbURhdGEoXCJzdHlsZXNoZWV0XCIsayksay5kYXRhKFwiY2tlLXRlbXBcIiwxKSl9bj1mLmdldEN1c3RvbURhdGEoXCJzdHlsZXNoZWV0X3JlZlwiKXx8MDtmLnNldEN1c3RvbURhdGEoXCJzdHlsZXNoZWV0X3JlZlwiLFxubisxKTt0aGlzLnNldEN1c3RvbURhdGEoXCJja2VfaW5jbHVkZVJlYWRvbmx5XCIsIWEuY29uZmlnLmRpc2FibGVSZWFkb25seVN0eWxpbmcpO3RoaXMuYXR0YWNoTGlzdGVuZXIodGhpcyxcImNsaWNrXCIsZnVuY3Rpb24oYSl7YT1hLmRhdGE7dmFyIGI9KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoYS5nZXRUYXJnZXQoKSx0aGlzKSkuY29udGFpbnMoXCJhXCIpO2ImJjIhPWEuJC5idXR0b24mJmIuaXNSZWFkT25seSgpJiZhLnByZXZlbnREZWZhdWx0KCl9KTt2YXIgbD17ODoxLDQ2OjF9O3RoaXMuYXR0YWNoTGlzdGVuZXIoYSxcImtleVwiLGZ1bmN0aW9uKGIpe2lmKGEucmVhZE9ubHkpcmV0dXJuITA7dmFyIGM9Yi5kYXRhLmRvbUV2ZW50LmdldEtleSgpLGQ7aWYoYyBpbiBsKXtiPWEuZ2V0U2VsZWN0aW9uKCk7dmFyIGgsZj1iLmdldFJhbmdlcygpWzBdLG49Zi5zdGFydFBhdGgoKSxwLGsseSxjPTg9PWM7Q0tFRElUT1IuZW52LmllJiYxMT5DS0VESVRPUi5lbnYudmVyc2lvbiYmKGg9XG5iLmdldFNlbGVjdGVkRWxlbWVudCgpKXx8KGg9ZyhiKSk/KGEuZmlyZShcInNhdmVTbmFwc2hvdFwiKSxmLm1vdmVUb1Bvc2l0aW9uKGgsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSxoLnJlbW92ZSgpLGYuc2VsZWN0KCksYS5maXJlKFwic2F2ZVNuYXBzaG90XCIpLGQ9MSk6Zi5jb2xsYXBzZWQmJigocD1uLmJsb2NrKSYmKHk9cFtjP1wiZ2V0UHJldmlvdXNcIjpcImdldE5leHRcIl0oZSkpJiZ5LnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmeS5pcyhcInRhYmxlXCIpJiZmW2M/XCJjaGVja1N0YXJ0T2ZCbG9ja1wiOlwiY2hlY2tFbmRPZkJsb2NrXCJdKCk/KGEuZmlyZShcInNhdmVTbmFwc2hvdFwiKSxmW2M/XCJjaGVja0VuZE9mQmxvY2tcIjpcImNoZWNrU3RhcnRPZkJsb2NrXCJdKCkmJnAucmVtb3ZlKCksZltcIm1vdmVUb0VsZW1lbnRFZGl0XCIrKGM/XCJFbmRcIjpcIlN0YXJ0XCIpXSh5KSxmLnNlbGVjdCgpLGEuZmlyZShcInNhdmVTbmFwc2hvdFwiKSxkPTEpOm4uYmxvY2tMaW1pdCYmbi5ibG9ja0xpbWl0LmlzKFwidGRcIikmJlxuKGs9bi5ibG9ja0xpbWl0LmdldEFzY2VuZGFudChcInRhYmxlXCIpKSYmZi5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGssYz9DS0VESVRPUi5TVEFSVDpDS0VESVRPUi5FTkQpJiYoeT1rW2M/XCJnZXRQcmV2aW91c1wiOlwiZ2V0TmV4dFwiXShlKSk/KGEuZmlyZShcInNhdmVTbmFwc2hvdFwiKSxmW1wibW92ZVRvRWxlbWVudEVkaXRcIisoYz9cIkVuZFwiOlwiU3RhcnRcIildKHkpLGYuY2hlY2tTdGFydE9mQmxvY2soKSYmZi5jaGVja0VuZE9mQmxvY2soKT95LnJlbW92ZSgpOmYuc2VsZWN0KCksYS5maXJlKFwic2F2ZVNuYXBzaG90XCIpLGQ9MSk6KGs9bi5jb250YWlucyhbXCJ0ZFwiLFwidGhcIixcImNhcHRpb25cIl0pKSYmZi5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGssYz9DS0VESVRPUi5TVEFSVDpDS0VESVRPUi5FTkQpJiYoZD0xKSl9cmV0dXJuIWR9KTthLmJsb2NrbGVzcyYmQ0tFRElUT1IuZW52LmllJiZDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlciYmdGhpcy5hdHRhY2hMaXN0ZW5lcih0aGlzLFwia2V5dXBcIixcbmZ1bmN0aW9uKGIpe2IuZGF0YS5nZXRLZXlzdHJva2UoKWluIGwmJiF0aGlzLmdldEZpcnN0KGMpJiYodGhpcy5hcHBlbmRCb2d1cygpLGI9YS5jcmVhdGVSYW5nZSgpLGIubW92ZVRvUG9zaXRpb24odGhpcyxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCksYi5zZWxlY3QoKSl9KTt0aGlzLmF0dGFjaExpc3RlbmVyKHRoaXMsXCJkYmxjbGlja1wiLGZ1bmN0aW9uKGIpe2lmKGEucmVhZE9ubHkpcmV0dXJuITE7Yj17ZWxlbWVudDpiLmRhdGEuZ2V0VGFyZ2V0KCl9O2EuZmlyZShcImRvdWJsZWNsaWNrXCIsYil9KTtDS0VESVRPUi5lbnYuaWUmJnRoaXMuYXR0YWNoTGlzdGVuZXIodGhpcyxcImNsaWNrXCIsYik7Q0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LmVkZ2V8fHRoaXMuYXR0YWNoTGlzdGVuZXIodGhpcyxcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGIpe3ZhciBjPWIuZGF0YS5nZXRUYXJnZXQoKTtjLmlzKFwiaW1nXCIsXCJoclwiLFwiaW5wdXRcIixcInRleHRhcmVhXCIsXCJzZWxlY3RcIikmJlxuIWMuaXNSZWFkT25seSgpJiYoYS5nZXRTZWxlY3Rpb24oKS5zZWxlY3RFbGVtZW50KGMpLGMuaXMoXCJpbnB1dFwiLFwidGV4dGFyZWFcIixcInNlbGVjdFwiKSYmYi5kYXRhLnByZXZlbnREZWZhdWx0KCkpfSk7Q0tFRElUT1IuZW52LmVkZ2UmJnRoaXMuYXR0YWNoTGlzdGVuZXIodGhpcyxcIm1vdXNldXBcIixmdW5jdGlvbihiKXsoYj1iLmRhdGEuZ2V0VGFyZ2V0KCkpJiZiLmlzKFwiaW1nXCIpJiZhLmdldFNlbGVjdGlvbigpLnNlbGVjdEVsZW1lbnQoYil9KTtDS0VESVRPUi5lbnYuZ2Vja28mJnRoaXMuYXR0YWNoTGlzdGVuZXIodGhpcyxcIm1vdXNldXBcIixmdW5jdGlvbihiKXtpZigyPT1iLmRhdGEuJC5idXR0b24mJihiPWIuZGF0YS5nZXRUYXJnZXQoKSwhYi5nZXRPdXRlckh0bWwoKS5yZXBsYWNlKEQsXCJcIikpKXt2YXIgYz1hLmNyZWF0ZVJhbmdlKCk7Yy5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KGIpO2Muc2VsZWN0KCEwKX19KTtDS0VESVRPUi5lbnYud2Via2l0JiYodGhpcy5hdHRhY2hMaXN0ZW5lcih0aGlzLFxuXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2EuZGF0YS5nZXRUYXJnZXQoKS5pcyhcImlucHV0XCIsXCJzZWxlY3RcIikmJmEuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfSksdGhpcy5hdHRhY2hMaXN0ZW5lcih0aGlzLFwibW91c2V1cFwiLGZ1bmN0aW9uKGEpe2EuZGF0YS5nZXRUYXJnZXQoKS5pcyhcImlucHV0XCIsXCJ0ZXh0YXJlYVwiKSYmYS5kYXRhLnByZXZlbnREZWZhdWx0KCl9KSk7Q0tFRElUT1IuZW52LndlYmtpdCYmdGhpcy5hdHRhY2hMaXN0ZW5lcihhLFwia2V5XCIsZnVuY3Rpb24oYil7aWYoYS5yZWFkT25seSlyZXR1cm4hMDtiPWIuZGF0YS5kb21FdmVudC5nZXRLZXkoKTtpZihiIGluIGwpe3ZhciBjPTg9PWIsZD1hLmdldFNlbGVjdGlvbigpLmdldFJhbmdlcygpWzBdO2I9ZC5zdGFydFBhdGgoKTtpZihkLmNvbGxhcHNlZClhOnt2YXIgaD1iLmJsb2NrO2lmKGgmJmRbYz9cImNoZWNrU3RhcnRPZkJsb2NrXCI6XCJjaGVja0VuZE9mQmxvY2tcIl0oKSYmZC5tb3ZlVG9DbG9zZXN0RWRpdGFibGVQb3NpdGlvbihoLFxuIWMpJiZkLmNvbGxhcHNlZCl7aWYoZC5zdGFydENvbnRhaW5lci50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpe3ZhciBmPWQuc3RhcnRDb250YWluZXIuZ2V0Q2hpbGQoZC5zdGFydE9mZnNldC0oYz8xOjApKTtpZihmJiZmLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZi5pcyhcImhyXCIpKXthLmZpcmUoXCJzYXZlU25hcHNob3RcIik7Zi5yZW1vdmUoKTtiPSEwO2JyZWFrIGF9fWQ9ZC5zdGFydFBhdGgoKS5ibG9jaztpZighZHx8ZCYmZC5jb250YWlucyhoKSliPXZvaWQgMDtlbHNle2EuZmlyZShcInNhdmVTbmFwc2hvdFwiKTt2YXIgZTsoZT0oYz9kOmgpLmdldEJvZ3VzKCkpJiZlLnJlbW92ZSgpO2U9YS5nZXRTZWxlY3Rpb24oKTtmPWUuY3JlYXRlQm9va21hcmtzKCk7KGM/aDpkKS5tb3ZlQ2hpbGRyZW4oYz9kOmgsITEpO2IubGFzdEVsZW1lbnQubWVyZ2VTaWJsaW5ncygpO3UoaCxkLCFjKTtlLnNlbGVjdEJvb2ttYXJrcyhmKTtiPSEwfX1lbHNlIGI9ITF9ZWxzZSBjPWQsXG5lPWIuYmxvY2ssZD1jLmVuZFBhdGgoKS5ibG9jayxlJiZkJiYhZS5lcXVhbHMoZCk/KGEuZmlyZShcInNhdmVTbmFwc2hvdFwiKSwoaD1lLmdldEJvZ3VzKCkpJiZoLnJlbW92ZSgpLGMuZW5sYXJnZShDS0VESVRPUi5FTkxBUkdFX0lOTElORSksYy5kZWxldGVDb250ZW50cygpLGQuZ2V0UGFyZW50KCkmJihkLm1vdmVDaGlsZHJlbihlLCExKSxiLmxhc3RFbGVtZW50Lm1lcmdlU2libGluZ3MoKSx1KGUsZCwhMCkpLGM9YS5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZXMoKVswXSxjLmNvbGxhcHNlKDEpLGMub3B0aW1pemUoKSxcIlwiPT09Yy5zdGFydENvbnRhaW5lci5nZXRIdG1sKCkmJmMuc3RhcnRDb250YWluZXIuYXBwZW5kQm9ndXMoKSxjLnNlbGVjdCgpLGI9ITApOmI9ITE7aWYoIWIpcmV0dXJuO2EuZ2V0U2VsZWN0aW9uKCkuc2Nyb2xsSW50b1ZpZXcoKTthLmZpcmUoXCJzYXZlU25hcHNob3RcIik7cmV0dXJuITF9fSx0aGlzLG51bGwsMTAwKX19fSxfOntkZXRhY2g6ZnVuY3Rpb24oKXt0aGlzLmVkaXRvci5zZXREYXRhKHRoaXMuZWRpdG9yLmdldERhdGEoKSxcbjAsMSk7dGhpcy5jbGVhckxpc3RlbmVycygpO3RoaXMucmVzdG9yZUF0dHJzKCk7dmFyIGE7aWYoYT10aGlzLnJlbW92ZUN1c3RvbURhdGEoXCJjbGFzc2VzXCIpKWZvcig7YS5sZW5ndGg7KXRoaXMucmVtb3ZlQ2xhc3MoYS5wb3AoKSk7aWYoIXRoaXMuaXMoXCJ0ZXh0YXJlYVwiKSl7YT10aGlzLmdldERvY3VtZW50KCk7dmFyIGI9YS5nZXRIZWFkKCk7aWYoYi5nZXRDdXN0b21EYXRhKFwic3R5bGVzaGVldFwiKSl7dmFyIGM9YS5nZXRDdXN0b21EYXRhKFwic3R5bGVzaGVldF9yZWZcIik7LS1jP2Euc2V0Q3VzdG9tRGF0YShcInN0eWxlc2hlZXRfcmVmXCIsYyk6KGEucmVtb3ZlQ3VzdG9tRGF0YShcInN0eWxlc2hlZXRfcmVmXCIpLGIucmVtb3ZlQ3VzdG9tRGF0YShcInN0eWxlc2hlZXRcIikucmVtb3ZlKCkpfX10aGlzLmVkaXRvci5maXJlKFwiY29udGVudERvbVVubG9hZFwiKTtkZWxldGUgdGhpcy5lZGl0b3J9fX0pO0NLRURJVE9SLmVkaXRvci5wcm90b3R5cGUuZWRpdGFibGU9ZnVuY3Rpb24oYSl7dmFyIGI9XG50aGlzLl8uZWRpdGFibGU7aWYoYiYmYSlyZXR1cm4gMDthcmd1bWVudHMubGVuZ3RoJiYoYj10aGlzLl8uZWRpdGFibGU9YT9hIGluc3RhbmNlb2YgQ0tFRElUT1IuZWRpdGFibGU/YTpuZXcgQ0tFRElUT1IuZWRpdGFibGUodGhpcyxhKTooYiYmYi5kZXRhY2goKSxudWxsKSk7cmV0dXJuIGJ9O0NLRURJVE9SLm9uKFwiaW5zdGFuY2VMb2FkZWRcIixmdW5jdGlvbihiKXt2YXIgYz1iLmVkaXRvcjtjLm9uKFwiaW5zZXJ0RWxlbWVudFwiLGZ1bmN0aW9uKGEpe2E9YS5kYXRhO2EudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoYS5pcyhcImlucHV0XCIpfHxhLmlzKFwidGV4dGFyZWFcIikpJiYoXCJmYWxzZVwiIT1hLmdldEF0dHJpYnV0ZShcImNvbnRlbnRFZGl0YWJsZVwiKSYmYS5kYXRhKFwiY2tlLWVkaXRhYmxlXCIsYS5oYXNBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIik/XCJ0cnVlXCI6XCIxXCIpLGEuc2V0QXR0cmlidXRlKFwiY29udGVudEVkaXRhYmxlXCIsITEpKX0pO2Mub24oXCJzZWxlY3Rpb25DaGFuZ2VcIixcbmZ1bmN0aW9uKGIpe2lmKCFjLnJlYWRPbmx5KXt2YXIgZD1jLmdldFNlbGVjdGlvbigpO2QmJiFkLmlzTG9ja2VkJiYoZD1jLmNoZWNrRGlydHkoKSxjLmZpcmUoXCJsb2NrU25hcHNob3RcIiksYShiKSxjLmZpcmUoXCJ1bmxvY2tTbmFwc2hvdFwiKSwhZCYmYy5yZXNldERpcnR5KCkpfX0pfSk7Q0tFRElUT1Iub24oXCJpbnN0YW5jZUNyZWF0ZWRcIixmdW5jdGlvbihhKXt2YXIgYj1hLmVkaXRvcjtiLm9uKFwibW9kZVwiLGZ1bmN0aW9uKCl7dmFyIGE9Yi5lZGl0YWJsZSgpO2lmKGEmJmEuaXNJbmxpbmUoKSl7dmFyIGM9Yi50aXRsZTthLmNoYW5nZUF0dHIoXCJyb2xlXCIsXCJ0ZXh0Ym94XCIpO2EuY2hhbmdlQXR0cihcImFyaWEtbGFiZWxcIixjKTtjJiZhLmNoYW5nZUF0dHIoXCJ0aXRsZVwiLGMpO3ZhciBkPWIuZmlyZShcImFyaWFFZGl0b3JIZWxwTGFiZWxcIix7fSkubGFiZWw7aWYoZCYmKGM9dGhpcy51aS5zcGFjZSh0aGlzLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FP1widG9wXCI6XG5cImNvbnRlbnRzXCIpKSl7dmFyIGY9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCksZD1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbCgnXFx4M2NzcGFuIGlkXFx4M2RcIicrZisnXCIgY2xhc3NcXHgzZFwiY2tlX3ZvaWNlX2xhYmVsXCJcXHgzZScrZCtcIlxceDNjL3NwYW5cXHgzZVwiKTtjLmFwcGVuZChkKTthLmNoYW5nZUF0dHIoXCJhcmlhLWRlc2NyaWJlZGJ5XCIsZil9fX0pfSk7Q0tFRElUT1IuYWRkQ3NzKFwiLmNrZV9lZGl0YWJsZXtjdXJzb3I6dGV4dH0uY2tlX2VkaXRhYmxlIGltZywuY2tlX2VkaXRhYmxlIGlucHV0LC5ja2VfZWRpdGFibGUgdGV4dGFyZWF7Y3Vyc29yOmRlZmF1bHR9XCIpO2U9Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcyghMCk7QT1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKCExLCEwKTtyPUNLRURJVE9SLmRvbS53YWxrZXIuZW1wdHkoKTt4PUNLRURJVE9SLmRvbS53YWxrZXIuYm9ndXMoKTtEPS8oXnw8Ym9keVxcYltePl0qPilcXHMqPChwfGRpdnxhZGRyZXNzfGhcXGR8Y2VudGVyfHByZSlbXj5dKj5cXHMqKD86PGJyW14+XSo+fCZuYnNwO3xcXHUwMEEwfCYjMTYwOyk/XFxzKig6PzxcXC9cXDI+KT9cXHMqKD89JHw8XFwvYm9keT4pL2dpO1xucT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7cmV0dXJuIGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UfWZ1bmN0aW9uIGIoYyxkKXt2YXIgZixlLG4scCxnPVtdLGs9ZC5yYW5nZS5zdGFydENvbnRhaW5lcjtmPWQucmFuZ2Uuc3RhcnRQYXRoKCk7Zm9yKHZhciBrPUVbay5nZXROYW1lKCldLHk9MCxsPWMuZ2V0Q2hpbGRyZW4oKSx6PWwuY291bnQoKSxKPS0xLG09LTEscT0wLHU9Zi5jb250YWlucyhFLiRsaXN0KTt5PHo7Kyt5KWY9bC5nZXRJdGVtKHkpLGEoZik/KG49Zi5nZXROYW1lKCksdSYmbiBpbiBDS0VESVRPUi5kdGQuJGxpc3Q/Zz1nLmNvbmNhdChiKGYsZCkpOihwPSEha1tuXSxcImJyXCIhPW58fCFmLmRhdGEoXCJja2UtZW9sXCIpfHx5JiZ5IT16LTF8fChxPShlPXk/Z1t5LTFdLm5vZGU6bC5nZXRJdGVtKHkrMSkpJiYoIWEoZSl8fCFlLmlzKFwiYnJcIikpLGU9ZSYmYShlKSYmRS4kYmxvY2tbZS5nZXROYW1lKCldKSwtMSE9Snx8cHx8KEo9eSkscHx8KG09eSksZy5wdXNoKHtpc0VsZW1lbnQ6MSxcbmlzTGluZUJyZWFrOnEsaXNCbG9jazpmLmlzQmxvY2tCb3VuZGFyeSgpLGhhc0Jsb2NrU2libGluZzplLG5vZGU6ZixuYW1lOm4sYWxsb3dlZDpwfSksZT1xPTApKTpnLnB1c2goe2lzRWxlbWVudDowLG5vZGU6ZixhbGxvd2VkOjF9KTstMTxKJiYoZ1tKXS5maXJzdE5vdEFsbG93ZWQ9MSk7LTE8bSYmKGdbbV0ubGFzdE5vdEFsbG93ZWQ9MSk7cmV0dXJuIGd9ZnVuY3Rpb24gZChiLGMpe3ZhciBmPVtdLGU9Yi5nZXRDaGlsZHJlbigpLGg9ZS5jb3VudCgpLG4sZz0wLGs9RVtjXSx5PSFiLmlzKEUuJGlubGluZSl8fGIuaXMoXCJiclwiKTtmb3IoeSYmZi5wdXNoKFwiIFwiKTtnPGg7ZysrKW49ZS5nZXRJdGVtKGcpLGEobikmJiFuLmlzKGspP2Y9Zi5jb25jYXQoZChuLGMpKTpmLnB1c2gobik7eSYmZi5wdXNoKFwiIFwiKTtyZXR1cm4gZn1mdW5jdGlvbiBmKGIpe3JldHVybiBhKGIuc3RhcnRDb250YWluZXIpJiZiLnN0YXJ0Q29udGFpbmVyLmdldENoaWxkKGIuc3RhcnRPZmZzZXQtMSl9ZnVuY3Rpb24gZShiKXtyZXR1cm4gYiYmXG5hKGIpJiYoYi5pcyhFLiRyZW1vdmVFbXB0eSl8fGIuaXMoXCJhXCIpJiYhYi5pc0Jsb2NrQm91bmRhcnkoKSl9ZnVuY3Rpb24gZyhiLGMsZCxmKXt2YXIgZT1iLmNsb25lKCksaCxuO2Uuc2V0RW5kQXQoYyxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKTsoaD0obmV3IENLRURJVE9SLmRvbS53YWxrZXIoZSkpLm5leHQoKSkmJmEoaCkmJm1baC5nZXROYW1lKCldJiYobj1oLmdldFByZXZpb3VzKCkpJiZhKG4pJiYhbi5nZXRQYXJlbnQoKS5lcXVhbHMoYi5zdGFydENvbnRhaW5lcikmJmQuY29udGFpbnMobikmJmYuY29udGFpbnMoaCkmJmguaXNJZGVudGljYWwobikmJihoLm1vdmVDaGlsZHJlbihuKSxoLnJlbW92ZSgpLGcoYixjLGQsZikpfWZ1bmN0aW9uIEooYixjKXtmdW5jdGlvbiBkKGIsYyl7aWYoYy5pc0Jsb2NrJiZjLmlzRWxlbWVudCYmIWMubm9kZS5pcyhcImJyXCIpJiZhKGIpJiZiLmlzKFwiYnJcIikpcmV0dXJuIGIucmVtb3ZlKCksMX12YXIgZj1jLmVuZENvbnRhaW5lci5nZXRDaGlsZChjLmVuZE9mZnNldCksXG5lPWMuZW5kQ29udGFpbmVyLmdldENoaWxkKGMuZW5kT2Zmc2V0LTEpO2YmJmQoZixiW2IubGVuZ3RoLTFdKTtlJiZkKGUsYlswXSkmJihjLnNldEVuZChjLmVuZENvbnRhaW5lcixjLmVuZE9mZnNldC0xKSxjLmNvbGxhcHNlKCkpfXZhciBFPUNLRURJVE9SLmR0ZCxtPXtwOjEsZGl2OjEsaDE6MSxoMjoxLGgzOjEsaDQ6MSxoNToxLGg2OjEsdWw6MSxvbDoxLGxpOjEscHJlOjEsZGw6MSxibG9ja3F1b3RlOjF9LHE9e3A6MSxkaXY6MSxoMToxLGgyOjEsaDM6MSxoNDoxLGg1OjEsaDY6MX0sdT1DS0VESVRPUi50b29scy5leHRlbmQoe30sRS4kaW5saW5lKTtkZWxldGUgdS5icjtyZXR1cm4gZnVuY3Rpb24obSxDLEIsSSl7dmFyIEY9bS5lZGl0b3IsSz0hMTtcInVuZmlsdGVyZWRfaHRtbFwiPT1DJiYoQz1cImh0bWxcIixLPSEwKTtpZighSS5jaGVja1JlYWRPbmx5KCkpe3ZhciBHPShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKEkuc3RhcnRDb250YWluZXIsSS5yb290KSkuYmxvY2tMaW1pdHx8XG5JLnJvb3Q7bT17dHlwZTpDLGRvbnRGaWx0ZXI6SyxlZGl0YWJsZTptLGVkaXRvcjpGLHJhbmdlOkksYmxvY2tMaW1pdDpHLG1lcmdlQ2FuZGlkYXRlczpbXSx6b21iaWVzOltdfTtDPW0ucmFuZ2U7ST1tLm1lcmdlQ2FuZGlkYXRlczt2YXIgTCxyO1widGV4dFwiPT1tLnR5cGUmJkMuc2hyaW5rKENLRURJVE9SLlNIUklOS19FTEVNRU5ULCEwLCExKSYmKEw9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoXCJcXHgzY3NwYW5cXHgzZVxceDI2bmJzcDtcXHgzYy9zcGFuXFx4M2VcIixDLmRvY3VtZW50KSxDLmluc2VydE5vZGUoTCksQy5zZXRTdGFydEFmdGVyKEwpKTtLPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoQy5zdGFydENvbnRhaW5lcik7bS5lbmRQYXRoPUc9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChDLmVuZENvbnRhaW5lcik7aWYoIUMuY29sbGFwc2VkKXt2YXIgRj1HLmJsb2NrfHxHLmJsb2NrTGltaXQsdz1DLmdldENvbW1vbkFuY2VzdG9yKCk7RiYmIUYuZXF1YWxzKHcpJiZcbiFGLmNvbnRhaW5zKHcpJiZDLmNoZWNrRW5kT2ZCbG9jaygpJiZtLnpvbWJpZXMucHVzaChGKTtDLmRlbGV0ZUNvbnRlbnRzKCl9Zm9yKDsocj1mKEMpKSYmYShyKSYmci5pc0Jsb2NrQm91bmRhcnkoKSYmSy5jb250YWlucyhyKTspQy5tb3ZlVG9Qb3NpdGlvbihyLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpO2coQyxtLmJsb2NrTGltaXQsSyxHKTtMJiYoQy5zZXRFbmRCZWZvcmUoTCksQy5jb2xsYXBzZSgpLEwucmVtb3ZlKCkpO0w9Qy5zdGFydFBhdGgoKTtpZihGPUwuY29udGFpbnMoZSwhMSwxKSlDLnNwbGl0RWxlbWVudChGKSxtLmlubGluZVN0eWxlc1Jvb3Q9RixtLmlubGluZVN0eWxlc1BlYWs9TC5sYXN0RWxlbWVudDtMPUMuY3JlYXRlQm9va21hcmsoKTsoRj1MLnN0YXJ0Tm9kZS5nZXRQcmV2aW91cyhjKSkmJmEoRikmJmUoRikmJkkucHVzaChGKTsoRj1MLnN0YXJ0Tm9kZS5nZXROZXh0KGMpKSYmYShGKSYmZShGKSYmSS5wdXNoKEYpO2ZvcihGPUwuc3RhcnROb2RlOyhGPVxuRi5nZXRQYXJlbnQoKSkmJmUoRik7KUkucHVzaChGKTtDLm1vdmVUb0Jvb2ttYXJrKEwpO2lmKEw9Qil7TD1tLnJhbmdlO2lmKFwidGV4dFwiPT1tLnR5cGUmJm0uaW5saW5lU3R5bGVzUm9vdCl7cj1tLmlubGluZVN0eWxlc1BlYWs7Qz1yLmdldERvY3VtZW50KCkuY3JlYXRlVGV4dChcIntja2UtcGVha31cIik7Zm9yKEk9bS5pbmxpbmVTdHlsZXNSb290LmdldFBhcmVudCgpOyFyLmVxdWFscyhJKTspQz1DLmFwcGVuZFRvKHIuY2xvbmUoKSkscj1yLmdldFBhcmVudCgpO0I9Qy5nZXRPdXRlckh0bWwoKS5zcGxpdChcIntja2UtcGVha31cIikuam9pbihCKX1yPW0uYmxvY2tMaW1pdC5nZXROYW1lKCk7aWYoL15cXHMrfFxccyskLy50ZXN0KEIpJiZcInNwYW5cImluIENLRURJVE9SLmR0ZFtyXSl7dmFyIEE9J1xceDNjc3BhbiBkYXRhLWNrZS1tYXJrZXJcXHgzZFwiMVwiXFx4M2VcXHgyNm5ic3A7XFx4M2Mvc3BhblxceDNlJztCPUErQitBfUI9bS5lZGl0b3IuZGF0YVByb2Nlc3Nvci50b0h0bWwoQix7Y29udGV4dDpudWxsLFxuZml4Rm9yQm9keTohMSxwcm90ZWN0ZWRXaGl0ZXNwYWNlczohIUEsZG9udEZpbHRlcjptLmRvbnRGaWx0ZXIsZmlsdGVyOm0uZWRpdG9yLmFjdGl2ZUZpbHRlcixlbnRlck1vZGU6bS5lZGl0b3IuYWN0aXZlRW50ZXJNb2RlfSk7cj1MLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJib2R5XCIpO3Iuc2V0SHRtbChCKTtBJiYoci5nZXRGaXJzdCgpLnJlbW92ZSgpLHIuZ2V0TGFzdCgpLnJlbW92ZSgpKTtpZigoQT1MLnN0YXJ0UGF0aCgpLmJsb2NrKSYmKDEhPUEuZ2V0Q2hpbGRDb3VudCgpfHwhQS5nZXRCb2d1cygpKSlhOnt2YXIgeDtpZigxPT1yLmdldENoaWxkQ291bnQoKSYmYSh4PXIuZ2V0Rmlyc3QoKSkmJnguaXMocSkmJiF4Lmhhc0F0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSl7QT14LmdldEVsZW1lbnRzQnlUYWcoXCIqXCIpO0w9MDtmb3IoST1BLmNvdW50KCk7TDxJO0wrKylpZihDPUEuZ2V0SXRlbShMKSwhQy5pcyh1KSlicmVhayBhO3gubW92ZUNoaWxkcmVuKHguZ2V0UGFyZW50KDEpKTtcbngucmVtb3ZlKCl9fW0uZGF0YVdyYXBwZXI9cjtMPUJ9aWYoTCl7eD1tLnJhbmdlO0w9eC5kb2N1bWVudDt2YXIgdDtyPW0uYmxvY2tMaW1pdDtJPTA7dmFyIEQsQT1bXSxNLEg7Qj1GPTA7dmFyIFIsVztDPXguc3RhcnRDb250YWluZXI7dmFyIEs9bS5lbmRQYXRoLmVsZW1lbnRzWzBdLFgsRz1LLmdldFBvc2l0aW9uKEMpLHc9ISFLLmdldENvbW1vbkFuY2VzdG9yKEMpJiZHIT1DS0VESVRPUi5QT1NJVElPTl9JREVOVElDQUwmJiEoRyZDS0VESVRPUi5QT1NJVElPTl9DT05UQUlOUytDS0VESVRPUi5QT1NJVElPTl9JU19DT05UQUlORUQpO0M9YihtLmRhdGFXcmFwcGVyLG0pO2ZvcihKKEMseCk7STxDLmxlbmd0aDtJKyspe0c9Q1tJXTtpZih0PUcuaXNMaW5lQnJlYWspe3Q9eDtSPXI7dmFyIFQ9dm9pZCAwLGFhPXZvaWQgMDtHLmhhc0Jsb2NrU2libGluZz90PTE6KFQ9dC5zdGFydENvbnRhaW5lci5nZXRBc2NlbmRhbnQoRS4kYmxvY2ssMSkpJiZULmlzKHtkaXY6MSxwOjF9KT8oYWE9XG5ULmdldFBvc2l0aW9uKFIpLGFhPT1DS0VESVRPUi5QT1NJVElPTl9JREVOVElDQUx8fGFhPT1DS0VESVRPUi5QT1NJVElPTl9DT05UQUlOUz90PTA6KFI9dC5zcGxpdEVsZW1lbnQoVCksdC5tb3ZlVG9Qb3NpdGlvbihSLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKSx0PTEpKTp0PTB9aWYodClCPTA8STtlbHNle3Q9eC5zdGFydFBhdGgoKTshRy5pc0Jsb2NrJiZrKG0uZWRpdG9yLHQuYmxvY2ssdC5ibG9ja0xpbWl0KSYmKEg9bChtLmVkaXRvcikpJiYoSD1MLmNyZWF0ZUVsZW1lbnQoSCksSC5hcHBlbmRCb2d1cygpLHguaW5zZXJ0Tm9kZShIKSxDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlciYmKEQ9SC5nZXRCb2d1cygpKSYmRC5yZW1vdmUoKSx4Lm1vdmVUb1Bvc2l0aW9uKEgsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCkpO2lmKCh0PXguc3RhcnRQYXRoKCkuYmxvY2spJiYhdC5lcXVhbHMoTSkpe2lmKEQ9dC5nZXRCb2d1cygpKUQucmVtb3ZlKCksQS5wdXNoKHQpO1xuTT10fUcuZmlyc3ROb3RBbGxvd2VkJiYoRj0xKTtpZihGJiZHLmlzRWxlbWVudCl7dD14LnN0YXJ0Q29udGFpbmVyO2ZvcihSPW51bGw7dCYmIUVbdC5nZXROYW1lKCldW0cubmFtZV07KXtpZih0LmVxdWFscyhyKSl7dD1udWxsO2JyZWFrfVI9dDt0PXQuZ2V0UGFyZW50KCl9aWYodClSJiYoVz14LnNwbGl0RWxlbWVudChSKSxtLnpvbWJpZXMucHVzaChXKSxtLnpvbWJpZXMucHVzaChSKSk7ZWxzZXtSPXIuZ2V0TmFtZSgpO1g9IUk7dD1JPT1DLmxlbmd0aC0xO1I9ZChHLm5vZGUsUik7Zm9yKHZhciBUPVtdLGFhPVIubGVuZ3RoLGJhPTAsZGE9dm9pZCAwLGVhPTAsZ2E9LTE7YmE8YWE7YmErKylkYT1SW2JhXSxcIiBcIj09ZGE/KGVhfHxYJiYhYmF8fChULnB1c2gobmV3IENLRURJVE9SLmRvbS50ZXh0KFwiIFwiKSksZ2E9VC5sZW5ndGgpLGVhPTEpOihULnB1c2goZGEpLGVhPTApO3QmJmdhPT1ULmxlbmd0aCYmVC5wb3AoKTtYPVR9fWlmKFgpe2Zvcig7dD1YLnBvcCgpOyl4Lmluc2VydE5vZGUodCk7XG5YPTB9ZWxzZSB4Lmluc2VydE5vZGUoRy5ub2RlKTtHLmxhc3ROb3RBbGxvd2VkJiZJPEMubGVuZ3RoLTEmJigoVz13P0s6VykmJnguc2V0RW5kQXQoVyxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCksRj0wKTt4LmNvbGxhcHNlKCl9fTEhPUMubGVuZ3RoP0Q9ITE6KEQ9Q1swXSxEPUQuaXNFbGVtZW50JiZcImZhbHNlXCI9PUQubm9kZS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikpO0QmJihCPSEwLHQ9Q1swXS5ub2RlLHguc2V0U3RhcnRBdCh0LENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCkseC5zZXRFbmRBdCh0LENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCkpO20uZG9udE1vdmVDYXJldD1CO20uYm9ndXNOZWVkZWRCbG9ja3M9QX1EPW0ucmFuZ2U7dmFyIFM7Vz1tLmJvZ3VzTmVlZGVkQmxvY2tzO2ZvcihYPUQuY3JlYXRlQm9va21hcmsoKTtNPW0uem9tYmllcy5wb3AoKTspTS5nZXRQYXJlbnQoKSYmKEg9RC5jbG9uZSgpLEgubW92ZVRvRWxlbWVudEVkaXRTdGFydChNKSxcbkgucmVtb3ZlRW1wdHlCbG9ja3NBdEVuZCgpKTtpZihXKWZvcig7TT1XLnBvcCgpOylDS0VESVRPUi5lbnYubmVlZHNCckZpbGxlcj9NLmFwcGVuZEJvZ3VzKCk6TS5hcHBlbmQoRC5kb2N1bWVudC5jcmVhdGVUZXh0KFwiwqBcIikpO2Zvcig7TT1tLm1lcmdlQ2FuZGlkYXRlcy5wb3AoKTspTS5tZXJnZVNpYmxpbmdzKCk7RC5tb3ZlVG9Cb29rbWFyayhYKTtpZighbS5kb250TW92ZUNhcmV0KXtmb3IoTT1mKEQpO00mJmEoTSkmJiFNLmlzKEUuJGVtcHR5KTspe2lmKE0uaXNCbG9ja0JvdW5kYXJ5KCkpRC5tb3ZlVG9Qb3NpdGlvbihNLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpO2Vsc2V7aWYoZShNKSYmTS5nZXRIdG1sKCkubWF0Y2goLyhcXHN8Jm5ic3A7KSQvZykpe1M9bnVsbDticmVha31TPUQuY2xvbmUoKTtTLm1vdmVUb1Bvc2l0aW9uKE0sQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCl9TT1NLmdldExhc3QoYyl9UyYmRC5tb3ZlVG9SYW5nZShTKX19fX0oKTt3PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiKXtiPVxubmV3IENLRURJVE9SLmRvbS53YWxrZXIoYik7Yi5ndWFyZD1mdW5jdGlvbihhLGIpe2lmKGIpcmV0dXJuITE7aWYoYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpcmV0dXJuIGEuaXMoQ0tFRElUT1IuZHRkLiR0YWJsZUNvbnRlbnQpfTtiLmV2YWx1YXRvcj1mdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlR9O3JldHVybiBifWZ1bmN0aW9uIGIoYSxjLGQpe2M9YS5nZXREb2N1bWVudCgpLmNyZWF0ZUVsZW1lbnQoYyk7YS5hcHBlbmQoYyxkKTtyZXR1cm4gY31mdW5jdGlvbiBjKGEpe3ZhciBiPWEuY291bnQoKSxkO2ZvcihiOzA8Yi0tOylkPWEuZ2V0SXRlbShiKSxDS0VESVRPUi50b29scy50cmltKGQuZ2V0SHRtbCgpKXx8KGQuYXBwZW5kQm9ndXMoKSxDS0VESVRPUi5lbnYuaWUmJjk+Q0tFRElUT1IuZW52LnZlcnNpb24mJmQuZ2V0Q2hpbGRDb3VudCgpJiZkLmdldEZpcnN0KCkucmVtb3ZlKCkpfXJldHVybiBmdW5jdGlvbihkKXt2YXIgZj1cbmQuc3RhcnRDb250YWluZXIsZT1mLmdldEFzY2VuZGFudChcInRhYmxlXCIsMSksZz0hMTtjKGUuZ2V0RWxlbWVudHNCeVRhZyhcInRkXCIpKTtjKGUuZ2V0RWxlbWVudHNCeVRhZyhcInRoXCIpKTtlPWQuY2xvbmUoKTtlLnNldFN0YXJ0KGYsMCk7ZT1hKGUpLmxhc3RCYWNrd2FyZCgpO2V8fChlPWQuY2xvbmUoKSxlLnNldEVuZEF0KGYsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCksZT1hKGUpLmxhc3RGb3J3YXJkKCksZz0hMCk7ZXx8KGU9Zik7ZS5pcyhcInRhYmxlXCIpPyhkLnNldFN0YXJ0QXQoZSxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpLGQuY29sbGFwc2UoITApLGUucmVtb3ZlKCkpOihlLmlzKHt0Ym9keToxLHRoZWFkOjEsdGZvb3Q6MX0pJiYoZT1iKGUsXCJ0clwiLGcpKSxlLmlzKFwidHJcIikmJihlPWIoZSxlLmdldFBhcmVudCgpLmlzKFwidGhlYWRcIik/XCJ0aFwiOlwidGRcIixnKSksKGY9ZS5nZXRCb2d1cygpKSYmZi5yZW1vdmUoKSxkLm1vdmVUb1Bvc2l0aW9uKGUsZz9DS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVDpcbkNLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpKX19KCk7SD17ZW9sOntkZXRlY3Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnJhbmdlLGQ9Yy5jbG9uZSgpLGU9Yy5jbG9uZSgpLGY9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChjLnN0YXJ0Q29udGFpbmVyLGIpLGc9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChjLmVuZENvbnRhaW5lcixiKTtkLmNvbGxhcHNlKDEpO2UuY29sbGFwc2UoKTtmLmJsb2NrJiZkLmNoZWNrQm91bmRhcnlPZkVsZW1lbnQoZi5ibG9jayxDS0VESVRPUi5FTkQpJiYoYy5zZXRTdGFydEFmdGVyKGYuYmxvY2spLGEucHJlcGVuZEVvbEJyPTEpO2cuYmxvY2smJmUuY2hlY2tCb3VuZGFyeU9mRWxlbWVudChnLmJsb2NrLENLRURJVE9SLlNUQVJUKSYmKGMuc2V0RW5kQmVmb3JlKGcuYmxvY2spLGEuYXBwZW5kRW9sQnI9MSl9LGZpeDpmdW5jdGlvbihhLGIpe3ZhciBjPWIuZ2V0RG9jdW1lbnQoKSxkO2EuYXBwZW5kRW9sQnImJihkPXRoaXMuY3JlYXRlRW9sQnIoYyksXG5hLmZyYWdtZW50LmFwcGVuZChkKSk7IWEucHJlcGVuZEVvbEJyfHxkJiYhZC5nZXRQcmV2aW91cygpfHxhLmZyYWdtZW50LmFwcGVuZCh0aGlzLmNyZWF0ZUVvbEJyKGMpLDEpfSxjcmVhdGVFb2xCcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5jcmVhdGVFbGVtZW50KFwiYnJcIix7YXR0cmlidXRlczp7XCJkYXRhLWNrZS1lb2xcIjoxfX0pfX0sYm9ndXM6e2V4Y2x1ZGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yYW5nZS5nZXRCb3VuZGFyeU5vZGVzKCksYz1iLnN0YXJ0Tm9kZSxiPWIuZW5kTm9kZTshYnx8IXgoYil8fGMmJmMuZXF1YWxzKGIpfHxhLnJhbmdlLnNldEVuZEJlZm9yZShiKX19LHRyZWU6e3JlYnVpbGQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnJhbmdlLGQ9Yy5nZXRDb21tb25BbmNlc3RvcigpLGU9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChkLGIpLGY9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChjLnN0YXJ0Q29udGFpbmVyLGIpLGM9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChjLmVuZENvbnRhaW5lcixcbmIpLGc7ZC50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihkPWQuZ2V0UGFyZW50KCkpO2lmKGUuYmxvY2tMaW1pdC5pcyh7dHI6MSx0YWJsZToxfSkpe3ZhciBrPWUuY29udGFpbnMoXCJ0YWJsZVwiKS5nZXRQYXJlbnQoKTtnPWZ1bmN0aW9uKGEpe3JldHVybiFhLmVxdWFscyhrKX19ZWxzZSBpZihlLmJsb2NrJiZlLmJsb2NrLmlzKENLRURJVE9SLmR0ZC4kbGlzdEl0ZW0pJiYoZj1mLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdCksYz1jLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdCksIWYuZXF1YWxzKGMpKSl7dmFyIGw9ZS5jb250YWlucyhDS0VESVRPUi5kdGQuJGxpc3QpLmdldFBhcmVudCgpO2c9ZnVuY3Rpb24oYSl7cmV0dXJuIWEuZXF1YWxzKGwpfX1nfHwoZz1mdW5jdGlvbihhKXtyZXR1cm4hYS5lcXVhbHMoZS5ibG9jaykmJiFhLmVxdWFscyhlLmJsb2NrTGltaXQpfSk7dGhpcy5yZWJ1aWxkRnJhZ21lbnQoYSxiLGQsZyl9LHJlYnVpbGRGcmFnbWVudDpmdW5jdGlvbihhLFxuYixjLGQpe2Zvcih2YXIgZTtjJiYhYy5lcXVhbHMoYikmJmQoYyk7KWU9Yy5jbG9uZSgwLDEpLGEuZnJhZ21lbnQuYXBwZW5kVG8oZSksYS5mcmFnbWVudD1lLGM9Yy5nZXRQYXJlbnQoKX19LGNlbGw6e3NocmluazpmdW5jdGlvbihhKXthPWEucmFuZ2U7dmFyIGI9YS5zdGFydENvbnRhaW5lcixjPWEuZW5kQ29udGFpbmVyLGQ9YS5zdGFydE9mZnNldCxlPWEuZW5kT2Zmc2V0O2IudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZiLmVxdWFscyhjKSYmYi5pcyhcInRyXCIpJiYrK2Q9PWUmJmEuc2hyaW5rKENLRURJVE9SLlNIUklOS19URVhUKX19fTt0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiLGMpe3ZhciBkPWIuZ2V0UGFyZW50KCk7aWYoZC5pcyhDS0VESVRPUi5kdGQuJGlubGluZSkpYltjP1wiaW5zZXJ0QmVmb3JlXCI6XCJpbnNlcnRBZnRlclwiXShkKX1mdW5jdGlvbiBiKGMsZCxlKXthKGQpO2EoZSwxKTtmb3IodmFyIGY7Zj1lLmdldE5leHQoKTspZi5pbnNlcnRBZnRlcihkKSxkPVxuZjtyKGMpJiZjLnJlbW92ZSgpfWZ1bmN0aW9uIGMoYSxiKXt2YXIgZD1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGEpO2Quc2V0U3RhcnRBZnRlcihiLnN0YXJ0Tm9kZSk7ZC5zZXRFbmRCZWZvcmUoYi5lbmROb2RlKTtyZXR1cm4gZH1yZXR1cm57bGlzdDp7ZGV0ZWN0TWVyZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgZD1jKGIsYS5ib29rbWFyayksZT1kLnN0YXJ0UGF0aCgpLGY9ZC5lbmRQYXRoKCksaD1lLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdCksZz1mLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdCk7YS5tZXJnZUxpc3Q9aCYmZyYmaC5nZXRQYXJlbnQoKS5lcXVhbHMoZy5nZXRQYXJlbnQoKSkmJiFoLmVxdWFscyhnKTthLm1lcmdlTGlzdEl0ZW1zPWUuYmxvY2smJmYuYmxvY2smJmUuYmxvY2suaXMoQ0tFRElUT1IuZHRkLiRsaXN0SXRlbSkmJmYuYmxvY2suaXMoQ0tFRElUT1IuZHRkLiRsaXN0SXRlbSk7aWYoYS5tZXJnZUxpc3R8fGEubWVyZ2VMaXN0SXRlbXMpZD1kLmNsb25lKCksXG5kLnNldFN0YXJ0QmVmb3JlKGEuYm9va21hcmsuc3RhcnROb2RlKSxkLnNldEVuZEFmdGVyKGEuYm9va21hcmsuZW5kTm9kZSksYS5tZXJnZUxpc3RCb29rbWFyaz1kLmNyZWF0ZUJvb2ttYXJrKCl9LG1lcmdlOmZ1bmN0aW9uKGEsYyl7aWYoYS5tZXJnZUxpc3RCb29rbWFyayl7dmFyIGQ9YS5tZXJnZUxpc3RCb29rbWFyay5zdGFydE5vZGUsZT1hLm1lcmdlTGlzdEJvb2ttYXJrLmVuZE5vZGUsZj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGQsYyksZz1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGUsYyk7aWYoYS5tZXJnZUxpc3Qpe3ZhciBwPWYuY29udGFpbnMoQ0tFRElUT1IuZHRkLiRsaXN0KSxrPWcuY29udGFpbnMoQ0tFRElUT1IuZHRkLiRsaXN0KTtwLmVxdWFscyhrKXx8KGsubW92ZUNoaWxkcmVuKHApLGsucmVtb3ZlKCkpfWEubWVyZ2VMaXN0SXRlbXMmJihmPWYuY29udGFpbnMoQ0tFRElUT1IuZHRkLiRsaXN0SXRlbSksZz1nLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdEl0ZW0pLFxuZi5lcXVhbHMoZyl8fGIoZyxkLGUpKTtkLnJlbW92ZSgpO2UucmVtb3ZlKCl9fX0sYmxvY2s6e2RldGVjdE1lcmdlOmZ1bmN0aW9uKGEsYil7aWYoIWEudGFibGVDb250ZW50c1JhbmdlcyYmIWEubWVyZ2VMaXN0Qm9va21hcmspe3ZhciBjPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UoYik7Yy5zZXRTdGFydEJlZm9yZShhLmJvb2ttYXJrLnN0YXJ0Tm9kZSk7Yy5zZXRFbmRBZnRlcihhLmJvb2ttYXJrLmVuZE5vZGUpO2EubWVyZ2VCbG9ja0Jvb2ttYXJrPWMuY3JlYXRlQm9va21hcmsoKX19LG1lcmdlOmZ1bmN0aW9uKGEsYyl7aWYoYS5tZXJnZUJsb2NrQm9va21hcmsmJiFhLnB1cmdlVGFibGVCb29rbWFyayl7dmFyIGQ9YS5tZXJnZUJsb2NrQm9va21hcmsuc3RhcnROb2RlLGU9YS5tZXJnZUJsb2NrQm9va21hcmsuZW5kTm9kZSxmPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoZCxjKSxnPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoZSxjKSxmPWYuYmxvY2ssZz1nLmJsb2NrO1xuZiYmZyYmIWYuZXF1YWxzKGcpJiZiKGcsZCxlKTtkLnJlbW92ZSgpO2UucmVtb3ZlKCl9fX0sdGFibGU6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGMpe3ZhciBlPVtdLGYsaD1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihjKSxnPWMuc3RhcnRQYXRoKCkuY29udGFpbnMoZCksbj1jLmVuZFBhdGgoKS5jb250YWlucyhkKSxwPXt9O2guZ3VhcmQ9ZnVuY3Rpb24oYSxoKXtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCl7dmFyIGs9XCJ2aXNpdGVkX1wiKyhoP1wib3V0XCI6XCJpblwiKTtpZihhLmdldEN1c3RvbURhdGEoaykpcmV0dXJuO0NLRURJVE9SLmRvbS5lbGVtZW50LnNldE1hcmtlcihwLGEsaywxKX1pZihoJiZnJiZhLmVxdWFscyhnKSlmPWMuY2xvbmUoKSxmLnNldEVuZEF0KGcsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCksZS5wdXNoKGYpO2Vsc2UgaWYoIWgmJm4mJmEuZXF1YWxzKG4pKWY9Yy5jbG9uZSgpLGYuc2V0U3RhcnRBdChuLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKSxcbmUucHVzaChmKTtlbHNle2lmKGs9IWgpaz1hLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYS5pcyhkKSYmKCFnfHxiKGEsZykpJiYoIW58fGIoYSxuKSk7ayYmKGY9Yy5jbG9uZSgpLGYuc2VsZWN0Tm9kZUNvbnRlbnRzKGEpLGUucHVzaChmKSl9fTtoLmxhc3RGb3J3YXJkKCk7Q0tFRElUT1IuZG9tLmVsZW1lbnQuY2xlYXJBbGxNYXJrZXJzKHApO3JldHVybiBlfWZ1bmN0aW9uIGIoYSxjKXt2YXIgZD1DS0VESVRPUi5QT1NJVElPTl9DT05UQUlOUytDS0VESVRPUi5QT1NJVElPTl9JU19DT05UQUlORUQsZT1hLmdldFBvc2l0aW9uKGMpO3JldHVybiBlPT09Q0tFRElUT1IuUE9TSVRJT05fSURFTlRJQ0FMPyExOjA9PT0oZSZkKX12YXIgZD17dGQ6MSx0aDoxLGNhcHRpb246MX07cmV0dXJue2RldGVjdFB1cmdlOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmFuZ2UsYz1iLmNsb25lKCk7Yy5lbmxhcmdlKENLRURJVE9SLkVOTEFSR0VfRUxFTUVOVCk7dmFyIGM9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoYyksXG5lPTA7Yy5ldmFsdWF0b3I9ZnVuY3Rpb24oYSl7YS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuaXMoZCkmJisrZX07Yy5jaGVja0ZvcndhcmQoKTtpZigxPGUpe3ZhciBjPWIuc3RhcnRQYXRoKCkuY29udGFpbnMoXCJ0YWJsZVwiKSxmPWIuZW5kUGF0aCgpLmNvbnRhaW5zKFwidGFibGVcIik7YyYmZiYmYi5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGMsQ0tFRElUT1IuU1RBUlQpJiZiLmNoZWNrQm91bmRhcnlPZkVsZW1lbnQoZixDS0VESVRPUi5FTkQpJiYoYj1hLnJhbmdlLmNsb25lKCksYi5zZXRTdGFydEJlZm9yZShjKSxiLnNldEVuZEFmdGVyKGYpLGEucHVyZ2VUYWJsZUJvb2ttYXJrPWIuY3JlYXRlQm9va21hcmsoKSl9fSxkZXRlY3RSYW5nZXM6ZnVuY3Rpb24oZSxmKXt2YXIgaD1jKGYsZS5ib29rbWFyayksZz1oLmNsb25lKCksayxsLG09aC5nZXRDb21tb25BbmNlc3RvcigpO20uaXMoQ0tFRElUT1IuZHRkLiR0YWJsZUNvbnRlbnQpJiYhbS5pcyhkKSYmKG09bS5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiLFxuITApKTtsPW07bT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGguc3RhcnRDb250YWluZXIsbCk7bD1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGguZW5kQ29udGFpbmVyLGwpO209bS5jb250YWlucyhcInRhYmxlXCIpO2w9bC5jb250YWlucyhcInRhYmxlXCIpO2lmKG18fGwpbSYmbCYmYihtLGwpPyhlLnRhYmxlU3Vycm91bmRpbmdSYW5nZT1nLGcuc2V0U3RhcnRBdChtLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCksZy5zZXRFbmRBdChsLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCksZz1oLmNsb25lKCksZy5zZXRFbmRBdChtLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCksaz1oLmNsb25lKCksay5zZXRTdGFydEF0KGwsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSxrPWEoZykuY29uY2F0KGEoaykpKTptP2x8fChlLnRhYmxlU3Vycm91bmRpbmdSYW5nZT1nLGcuc2V0U3RhcnRBdChtLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX0VORCksaC5zZXRFbmRBdChtLFxuQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EKSk6KGUudGFibGVTdXJyb3VuZGluZ1JhbmdlPWcsZy5zZXRFbmRBdChsLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCksaC5zZXRTdGFydEF0KGwsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpKSxlLnRhYmxlQ29udGVudHNSYW5nZXM9az9rOmEoaCl9LGRlbGV0ZVJhbmdlczpmdW5jdGlvbihhKXtmb3IodmFyIGI7Yj1hLnRhYmxlQ29udGVudHNSYW5nZXMucG9wKCk7KWIuZXh0cmFjdENvbnRlbnRzKCkscihiLnN0YXJ0Q29udGFpbmVyKSYmYi5zdGFydENvbnRhaW5lci5hcHBlbmRCb2d1cygpO2EudGFibGVTdXJyb3VuZGluZ1JhbmdlJiZhLnRhYmxlU3Vycm91bmRpbmdSYW5nZS5leHRyYWN0Q29udGVudHMoKX0scHVyZ2U6ZnVuY3Rpb24oYSl7aWYoYS5wdXJnZVRhYmxlQm9va21hcmspe3ZhciBiPWEuZG9jLGM9YS5yYW5nZS5jbG9uZSgpLGI9Yi5jcmVhdGVFbGVtZW50KFwicFwiKTtiLmluc2VydEJlZm9yZShhLnB1cmdlVGFibGVCb29rbWFyay5zdGFydE5vZGUpO1xuYy5tb3ZlVG9Cb29rbWFyayhhLnB1cmdlVGFibGVCb29rbWFyayk7Yy5kZWxldGVDb250ZW50cygpO2EucmFuZ2UubW92ZVRvUG9zaXRpb24oYixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCl9fX19KCksZGV0ZWN0RXh0cmFjdE1lcmdlOmZ1bmN0aW9uKGEpe3JldHVybiEoYS5yYW5nZS5zdGFydFBhdGgoKS5jb250YWlucyhDS0VESVRPUi5kdGQuJGxpc3RJdGVtKSYmYS5yYW5nZS5lbmRQYXRoKCkuY29udGFpbnMoQ0tFRElUT1IuZHRkLiRsaXN0SXRlbSkpfSxmaXhVbmVkaXRhYmxlUmFuZ2VQb3NpdGlvbjpmdW5jdGlvbihhKXthLnN0YXJ0Q29udGFpbmVyLmdldER0ZCgpW1wiI1wiXXx8YS5tb3ZlVG9DbG9zZXN0RWRpdGFibGVQb3NpdGlvbihudWxsLCEwKX0sYXV0b1BhcmFncmFwaDpmdW5jdGlvbihhLGIpe3ZhciBjPWIuc3RhcnRQYXRoKCksZDtrKGEsYy5ibG9jayxjLmJsb2NrTGltaXQpJiYoZD1sKGEpKSYmKGQ9Yi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KGQpLGQuYXBwZW5kQm9ndXMoKSxcbmIuaW5zZXJ0Tm9kZShkKSxiLm1vdmVUb1Bvc2l0aW9uKGQsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpKX19fSgpfSkoKTtcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt2YXIgYT10aGlzLl8uZmFrZVNlbGVjdGlvbixiO2EmJihiPXRoaXMuZ2V0U2VsZWN0aW9uKDEpLGImJmIuaXNIaWRkZW4oKXx8KGEucmVzZXQoKSxhPTApKTtpZighYSYmKGE9Ynx8dGhpcy5nZXRTZWxlY3Rpb24oMSksIWF8fGEuZ2V0VHlwZSgpPT1DS0VESVRPUi5TRUxFQ1RJT05fTk9ORSkpcmV0dXJuO3RoaXMuZmlyZShcInNlbGVjdGlvbkNoZWNrXCIsYSk7Yj10aGlzLmVsZW1lbnRQYXRoKCk7aWYoIWIuY29tcGFyZSh0aGlzLl8uc2VsZWN0aW9uUHJldmlvdXNQYXRoKSl7dmFyIGM9dGhpcy5fLnNlbGVjdGlvblByZXZpb3VzUGF0aCYmdGhpcy5fLnNlbGVjdGlvblByZXZpb3VzUGF0aC5ibG9ja0xpbWl0LmVxdWFscyhiLmJsb2NrTGltaXQpO0NLRURJVE9SLmVudi53ZWJraXQmJiFjJiYodGhpcy5fLnByZXZpb3VzQWN0aXZlPXRoaXMuZG9jdW1lbnQuZ2V0QWN0aXZlKCkpO3RoaXMuXy5zZWxlY3Rpb25QcmV2aW91c1BhdGg9Yjt0aGlzLmZpcmUoXCJzZWxlY3Rpb25DaGFuZ2VcIixcbntzZWxlY3Rpb246YSxwYXRoOmJ9KX19ZnVuY3Rpb24gZCgpe3c9ITA7cXx8KGIuY2FsbCh0aGlzKSxxPUNLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQoYiwyMDAsdGhpcykpfWZ1bmN0aW9uIGIoKXtxPW51bGw7dyYmKENLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQoYSwwLHRoaXMpLHc9ITEpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIEgoYSl8fGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYhYS5pcyhDS0VESVRPUi5kdGQuJGVtcHR5KT8hMDohMX1mdW5jdGlvbiBmKGEpe2Z1bmN0aW9uIGIoYyxkKXtyZXR1cm4gYyYmYy50eXBlIT1DS0VESVRPUi5OT0RFX1RFWFQ/YS5jbG9uZSgpW1wibW92ZVRvRWxlbWVudEVkaXRcIisoZD9cIkVuZFwiOlwiU3RhcnRcIildKGMpOiExfWlmKCEoYS5yb290IGluc3RhbmNlb2YgQ0tFRElUT1IuZWRpdGFibGUpKXJldHVybiExO3ZhciBkPWEuc3RhcnRDb250YWluZXIsZT1hLmdldFByZXZpb3VzTm9kZShjLG51bGwsZCksZj1hLmdldE5leHROb2RlKGMsbnVsbCxcbmQpO3JldHVybiBiKGUpfHxiKGYsMSl8fCEoZXx8Znx8ZC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmQuaXNCbG9ja0JvdW5kYXJ5KCkmJmQuZ2V0Qm9ndXMoKSk/ITA6ITF9ZnVuY3Rpb24gZyhhKXtrKGEsITEpO3ZhciBiPWEuZ2V0RG9jdW1lbnQoKS5jcmVhdGVUZXh0KHgpO2Euc2V0Q3VzdG9tRGF0YShcImNrZS1maWxsaW5nQ2hhclwiLGIpO3JldHVybiBifWZ1bmN0aW9uIGsoYSxiKXt2YXIgYz1hJiZhLnJlbW92ZUN1c3RvbURhdGEoXCJja2UtZmlsbGluZ0NoYXJcIik7aWYoYyl7aWYoITEhPT1iKXt2YXIgZD1hLmdldERvY3VtZW50KCkuZ2V0U2VsZWN0aW9uKCkuZ2V0TmF0aXZlKCksZT1kJiZcIk5vbmVcIiE9ZC50eXBlJiZkLmdldFJhbmdlQXQoMCksZj14Lmxlbmd0aDtpZihjLmdldExlbmd0aCgpPmYmJmUmJmUuaW50ZXJzZWN0c05vZGUoYy4kKSl7dmFyIGc9W3tub2RlOmQuYW5jaG9yTm9kZSxvZmZzZXQ6ZC5hbmNob3JPZmZzZXR9LHtub2RlOmQuZm9jdXNOb2RlLG9mZnNldDpkLmZvY3VzT2Zmc2V0fV07XG5kLmFuY2hvck5vZGU9PWMuJCYmZC5hbmNob3JPZmZzZXQ+ZiYmKGdbMF0ub2Zmc2V0LT1mKTtkLmZvY3VzTm9kZT09Yy4kJiZkLmZvY3VzT2Zmc2V0PmYmJihnWzFdLm9mZnNldC09Zil9fWMuc2V0VGV4dChsKGMuZ2V0VGV4dCgpLDEpKTtnJiYoYz1hLmdldERvY3VtZW50KCkuJCxkPWMuZ2V0U2VsZWN0aW9uKCksYz1jLmNyZWF0ZVJhbmdlKCksYy5zZXRTdGFydChnWzBdLm5vZGUsZ1swXS5vZmZzZXQpLGMuY29sbGFwc2UoITApLGQucmVtb3ZlQWxsUmFuZ2VzKCksZC5hZGRSYW5nZShjKSxkLmV4dGVuZChnWzFdLm5vZGUsZ1sxXS5vZmZzZXQpKX19ZnVuY3Rpb24gbChhLGIpe3JldHVybiBiP2EucmVwbGFjZShELGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/XCLCoFwiOlwiXCJ9KTphLnJlcGxhY2UoeCxcIlwiKX1mdW5jdGlvbiBtKGEsYil7dmFyIGM9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoJ1xceDNjZGl2IGRhdGEtY2tlLWhpZGRlbi1zZWxcXHgzZFwiMVwiIGRhdGEtY2tlLXRlbXBcXHgzZFwiMVwiIHN0eWxlXFx4M2RcIicrXG4oQ0tFRElUT1IuZW52LmllJiYxND5DS0VESVRPUi5lbnYudmVyc2lvbj9cImRpc3BsYXk6bm9uZVwiOlwicG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDotMTAwMHB4XCIpKydcIlxceDNlJysoYnx8XCJcXHgyNm5ic3A7XCIpK1wiXFx4M2MvZGl2XFx4M2VcIixhLmRvY3VtZW50KTthLmZpcmUoXCJsb2NrU25hcHNob3RcIik7YS5lZGl0YWJsZSgpLmFwcGVuZChjKTt2YXIgZD1hLmdldFNlbGVjdGlvbigxKSxlPWEuY3JlYXRlUmFuZ2UoKSxmPWQucm9vdC5vbihcInNlbGVjdGlvbmNoYW5nZVwiLGZ1bmN0aW9uKGEpe2EuY2FuY2VsKCl9LG51bGwsbnVsbCwwKTtlLnNldFN0YXJ0QXQoYyxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCk7ZS5zZXRFbmRBdChjLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpO2Quc2VsZWN0UmFuZ2VzKFtlXSk7Zi5yZW1vdmVMaXN0ZW5lcigpO2EuZmlyZShcInVubG9ja1NuYXBzaG90XCIpO2EuXy5oaWRkZW5TZWxlY3Rpb25Db250YWluZXI9Y31mdW5jdGlvbiB1KGEpe3ZhciBiPVxuezM3OjEsMzk6MSw4OjEsNDY6MX07cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPWMuZGF0YS5nZXRLZXlzdHJva2UoKTtpZihiW2RdKXt2YXIgZT1hLmdldFNlbGVjdGlvbigpLmdldFJhbmdlcygpLGY9ZVswXTsxPT1lLmxlbmd0aCYmZi5jb2xsYXBzZWQmJihkPWZbMzg+ZD9cImdldFByZXZpb3VzRWRpdGFibGVOb2RlXCI6XCJnZXROZXh0RWRpdGFibGVOb2RlXCJdKCkpJiZkLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmXCJmYWxzZVwiPT1kLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSYmKGEuZ2V0U2VsZWN0aW9uKCkuZmFrZShkKSxjLmRhdGEucHJldmVudERlZmF1bHQoKSxjLmNhbmNlbCgpKX19fWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPWFbYl07Yy5nZXRDb21tb25BbmNlc3RvcigpLmlzUmVhZE9ubHkoKSYmYS5zcGxpY2UoYiwxKTtpZighYy5jb2xsYXBzZWQpe2lmKGMuc3RhcnRDb250YWluZXIuaXNSZWFkT25seSgpKWZvcih2YXIgZD1cbmMuc3RhcnRDb250YWluZXIsZTtkJiYhKChlPWQudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UKSYmZC5pcyhcImJvZHlcIil8fCFkLmlzUmVhZE9ubHkoKSk7KWUmJlwiZmFsc2VcIj09ZC5nZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIikmJmMuc2V0U3RhcnRBZnRlcihkKSxkPWQuZ2V0UGFyZW50KCk7ZD1jLnN0YXJ0Q29udGFpbmVyO2U9Yy5lbmRDb250YWluZXI7dmFyIGY9Yy5zdGFydE9mZnNldCxnPWMuZW5kT2Zmc2V0LGs9Yy5jbG9uZSgpO2QmJmQudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYoZj49ZC5nZXRMZW5ndGgoKT9rLnNldFN0YXJ0QWZ0ZXIoZCk6ay5zZXRTdGFydEJlZm9yZShkKSk7ZSYmZS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihnP2suc2V0RW5kQWZ0ZXIoZSk6ay5zZXRFbmRCZWZvcmUoZSkpO2Q9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoayk7ZC5ldmFsdWF0b3I9ZnVuY3Rpb24oZCl7aWYoZC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJlxuZC5pc1JlYWRPbmx5KCkpe3ZhciBlPWMuY2xvbmUoKTtjLnNldEVuZEJlZm9yZShkKTtjLmNvbGxhcHNlZCYmYS5zcGxpY2UoYi0tLDEpO2QuZ2V0UG9zaXRpb24oay5lbmRDb250YWluZXIpJkNLRURJVE9SLlBPU0lUSU9OX0NPTlRBSU5TfHwoZS5zZXRTdGFydEFmdGVyKGQpLGUuY29sbGFwc2VkfHxhLnNwbGljZShiKzEsMCxlKSk7cmV0dXJuITB9cmV0dXJuITF9O2QubmV4dCgpfX1yZXR1cm4gYX12YXIgQT1cImZ1bmN0aW9uXCIhPXR5cGVvZiB3aW5kb3cuZ2V0U2VsZWN0aW9uLHI9MSx4PUNLRURJVE9SLnRvb2xzLnJlcGVhdChcIuKAi1wiLDcpLEQ9bmV3IFJlZ0V4cCh4K1wiKCApP1wiLFwiZ1wiKSxxLHcsSD1DS0VESVRPUi5kb20ud2Fsa2VyLmludmlzaWJsZSgxKSx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiKXtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9YS5lZGl0b3IuY3JlYXRlUmFuZ2UoKTtjLm1vdmVUb0Nsb3Nlc3RFZGl0YWJsZVBvc2l0aW9uKGEuc2VsZWN0ZWQsYikmJmEuZWRpdG9yLmdldFNlbGVjdGlvbigpLnNlbGVjdFJhbmdlcyhbY10pO1xucmV0dXJuITF9fWZ1bmN0aW9uIGIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIuZWRpdG9yLGQ9Yy5jcmVhdGVSYW5nZSgpLGU7KGU9ZC5tb3ZlVG9DbG9zZXN0RWRpdGFibGVQb3NpdGlvbihiLnNlbGVjdGVkLGEpKXx8KGU9ZC5tb3ZlVG9DbG9zZXN0RWRpdGFibGVQb3NpdGlvbihiLnNlbGVjdGVkLCFhKSk7ZSYmYy5nZXRTZWxlY3Rpb24oKS5zZWxlY3RSYW5nZXMoW2RdKTtjLmZpcmUoXCJzYXZlU25hcHNob3RcIik7Yi5zZWxlY3RlZC5yZW1vdmUoKTtlfHwoZC5tb3ZlVG9FbGVtZW50RWRpdGFibGVQb3NpdGlvbihjLmVkaXRhYmxlKCkpLGMuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0UmFuZ2VzKFtkXSkpO2MuZmlyZShcInNhdmVTbmFwc2hvdFwiKTtyZXR1cm4hMX19dmFyIGM9YSgpLGQ9YSgxKTtyZXR1cm57Mzc6YywzODpjLDM5OmQsNDA6ZCw4OmIoKSw0NjpiKDEpfX0oKTtDS0VESVRPUi5vbihcImluc3RhbmNlQ3JlYXRlZFwiLGZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGMoKXt2YXIgYT1cbmUuZ2V0U2VsZWN0aW9uKCk7YSYmYS5yZW1vdmVBbGxSYW5nZXMoKX12YXIgZT1iLmVkaXRvcjtlLm9uKFwiY29udGVudERvbVwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYigpe0I9bmV3IENLRURJVE9SLmRvbS5zZWxlY3Rpb24oZS5nZXRTZWxlY3Rpb24oKSk7Qi5sb2NrKCl9ZnVuY3Rpb24gYygpe2gucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZXVwXCIsYyk7bC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixjKTt2YXIgYT1DS0VESVRPUi5kb2N1bWVudC4kLnNlbGVjdGlvbixiPWEuY3JlYXRlUmFuZ2UoKTtcIk5vbmVcIiE9YS50eXBlJiZiLnBhcmVudEVsZW1lbnQoKS5vd25lckRvY3VtZW50PT1mLiQmJmIuc2VsZWN0KCl9dmFyIGY9ZS5kb2N1bWVudCxoPUNLRURJVE9SLmRvY3VtZW50LGc9ZS5lZGl0YWJsZSgpLHA9Zi5nZXRCb2R5KCksbD1mLmdldERvY3VtZW50RWxlbWVudCgpLG09Zy5pc0lubGluZSgpLHEsQjtDS0VESVRPUi5lbnYuZ2Vja28mJmcuYXR0YWNoTGlzdGVuZXIoZyxcImZvY3VzXCIsXG5mdW5jdGlvbihhKXthLnJlbW92ZUxpc3RlbmVyKCk7MCE9PXEmJihhPWUuZ2V0U2VsZWN0aW9uKCkuZ2V0TmF0aXZlKCkpJiZhLmlzQ29sbGFwc2VkJiZhLmFuY2hvck5vZGU9PWcuJCYmKGE9ZS5jcmVhdGVSYW5nZSgpLGEubW92ZVRvRWxlbWVudEVkaXRTdGFydChnKSxhLnNlbGVjdCgpKX0sbnVsbCxudWxsLC0yKTtnLmF0dGFjaExpc3RlbmVyKGcsQ0tFRElUT1IuZW52LndlYmtpdD9cIkRPTUZvY3VzSW5cIjpcImZvY3VzXCIsZnVuY3Rpb24oKXtxJiZDS0VESVRPUi5lbnYud2Via2l0JiYocT1lLl8ucHJldmlvdXNBY3RpdmUmJmUuXy5wcmV2aW91c0FjdGl2ZS5lcXVhbHMoZi5nZXRBY3RpdmUoKSkpJiZudWxsIT1lLl8ucHJldmlvdXNTY3JvbGxUb3AmJmUuXy5wcmV2aW91c1Njcm9sbFRvcCE9Zy4kLnNjcm9sbFRvcCYmKGcuJC5zY3JvbGxUb3A9ZS5fLnByZXZpb3VzU2Nyb2xsVG9wKTtlLnVubG9ja1NlbGVjdGlvbihxKTtxPTB9LG51bGwsbnVsbCwtMSk7Zy5hdHRhY2hMaXN0ZW5lcihnLFxuXCJtb3VzZWRvd25cIixmdW5jdGlvbigpe3E9MH0pO2lmKENLRURJVE9SLmVudi5pZXx8bSlBP2cuYXR0YWNoTGlzdGVuZXIoZyxcImJlZm9yZWRlYWN0aXZhdGVcIixiLG51bGwsbnVsbCwtMSk6Zy5hdHRhY2hMaXN0ZW5lcihlLFwic2VsZWN0aW9uQ2hlY2tcIixiLG51bGwsbnVsbCwtMSksZy5hdHRhY2hMaXN0ZW5lcihnLENLRURJVE9SLmVudi53ZWJraXQ/XCJET01Gb2N1c091dFwiOlwiYmx1clwiLGZ1bmN0aW9uKCl7ZS5sb2NrU2VsZWN0aW9uKEIpO3E9MX0sbnVsbCxudWxsLC0xKSxnLmF0dGFjaExpc3RlbmVyKGcsXCJtb3VzZWRvd25cIixmdW5jdGlvbigpe3E9MH0pO2lmKENLRURJVE9SLmVudi5pZSYmIW0pe3ZhciBJO2cuYXR0YWNoTGlzdGVuZXIoZyxcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGEpezI9PWEuZGF0YS4kLmJ1dHRvbiYmKChhPWUuZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCkpJiZhLmdldFR5cGUoKSE9Q0tFRElUT1IuU0VMRUNUSU9OX05PTkV8fChJPWUud2luZG93LmdldFNjcm9sbFBvc2l0aW9uKCkpKX0pO1xuZy5hdHRhY2hMaXN0ZW5lcihnLFwibW91c2V1cFwiLGZ1bmN0aW9uKGEpezI9PWEuZGF0YS4kLmJ1dHRvbiYmSSYmKGUuZG9jdW1lbnQuJC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdD1JLngsZS5kb2N1bWVudC4kLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A9SS55KTtJPW51bGx9KTtpZihcIkJhY2tDb21wYXRcIiE9Zi4kLmNvbXBhdE1vZGUpe2lmKENLRURJVE9SLmVudi5pZTdDb21wYXR8fENLRURJVE9SLmVudi5pZTZDb21wYXQpe3ZhciBGLEs7bC5vbihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7YT1hLmRhdGEuJDtpZihGKXt2YXIgYz1wLiQuY3JlYXRlVGV4dFJhbmdlKCk7dHJ5e2MubW92ZVRvUG9pbnQoYS5jbGllbnRYLGEuY2xpZW50WSl9Y2F0Y2goZCl7fUYuc2V0RW5kUG9pbnQoMD5LLmNvbXBhcmVFbmRQb2ludHMoXCJTdGFydFRvU3RhcnRcIixjKT9cIkVuZFRvRW5kXCI6XCJTdGFydFRvU3RhcnRcIixjKTtGLnNlbGVjdCgpfX1mdW5jdGlvbiBjKCl7bC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLFxuYik7aC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixjKTtsLnJlbW92ZUxpc3RlbmVyKFwibW91c2V1cFwiLGMpO0Yuc2VsZWN0KCl9YT1hLmRhdGE7aWYoYS5nZXRUYXJnZXQoKS5pcyhcImh0bWxcIikmJmEuJC55PGwuJC5jbGllbnRIZWlnaHQmJmEuJC54PGwuJC5jbGllbnRXaWR0aCl7Rj1wLiQuY3JlYXRlVGV4dFJhbmdlKCk7dHJ5e0YubW92ZVRvUG9pbnQoYS4kLmNsaWVudFgsYS4kLmNsaWVudFkpfWNhdGNoKGQpe31LPUYuZHVwbGljYXRlKCk7bC5vbihcIm1vdXNlbW92ZVwiLGIpO2gub24oXCJtb3VzZXVwXCIsYyk7bC5vbihcIm1vdXNldXBcIixjKX19KX1pZig3PENLRURJVE9SLmVudi52ZXJzaW9uJiYxMT5DS0VESVRPUi5lbnYudmVyc2lvbilsLm9uKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmdldFRhcmdldCgpLmlzKFwiaHRtbFwiKSYmKGgub24oXCJtb3VzZXVwXCIsYyksbC5vbihcIm1vdXNldXBcIixjKSl9KX19Zy5hdHRhY2hMaXN0ZW5lcihnLFwic2VsZWN0aW9uY2hhbmdlXCIsYSxcbmUpO2cuYXR0YWNoTGlzdGVuZXIoZyxcImtleXVwXCIsZCxlKTtnLmF0dGFjaExpc3RlbmVyKGcsQ0tFRElUT1IuZW52LndlYmtpdD9cIkRPTUZvY3VzSW5cIjpcImZvY3VzXCIsZnVuY3Rpb24oKXtlLmZvcmNlTmV4dFNlbGVjdGlvbkNoZWNrKCk7ZS5zZWxlY3Rpb25DaGFuZ2UoMSl9KTtpZihtJiYoQ0tFRElUT1IuZW52LndlYmtpdHx8Q0tFRElUT1IuZW52LmdlY2tvKSl7dmFyIEc7Zy5hdHRhY2hMaXN0ZW5lcihnLFwibW91c2Vkb3duXCIsZnVuY3Rpb24oKXtHPTF9KTtnLmF0dGFjaExpc3RlbmVyKGYuZ2V0RG9jdW1lbnRFbGVtZW50KCksXCJtb3VzZXVwXCIsZnVuY3Rpb24oKXtHJiZkLmNhbGwoZSk7Rz0wfSl9ZWxzZSBnLmF0dGFjaExpc3RlbmVyKENLRURJVE9SLmVudi5pZT9nOmYuZ2V0RG9jdW1lbnRFbGVtZW50KCksXCJtb3VzZXVwXCIsZCxlKTtDS0VESVRPUi5lbnYud2Via2l0JiZnLmF0dGFjaExpc3RlbmVyKGYsXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7c3dpdGNoKGEuZGF0YS5nZXRLZXkoKSl7Y2FzZSAxMzpjYXNlIDMzOmNhc2UgMzQ6Y2FzZSAzNTpjYXNlIDM2OmNhc2UgMzc6Y2FzZSAzOTpjYXNlIDg6Y2FzZSA0NTpjYXNlIDQ2OmsoZyl9fSxcbm51bGwsbnVsbCwtMSk7Zy5hdHRhY2hMaXN0ZW5lcihnLFwia2V5ZG93blwiLHUoZSksbnVsbCxudWxsLC0xKX0pO2Uub24oXCJzZXREYXRhXCIsZnVuY3Rpb24oKXtlLnVubG9ja1NlbGVjdGlvbigpO0NLRURJVE9SLmVudi53ZWJraXQmJmMoKX0pO2Uub24oXCJjb250ZW50RG9tVW5sb2FkXCIsZnVuY3Rpb24oKXtlLnVubG9ja1NlbGVjdGlvbigpfSk7aWYoQ0tFRElUT1IuZW52LmllOUNvbXBhdCllLm9uKFwiYmVmb3JlRGVzdHJveVwiLGMsbnVsbCxudWxsLDkpO2Uub24oXCJkYXRhUmVhZHlcIixmdW5jdGlvbigpe2RlbGV0ZSBlLl8uZmFrZVNlbGVjdGlvbjtkZWxldGUgZS5fLmhpZGRlblNlbGVjdGlvbkNvbnRhaW5lcjtlLnNlbGVjdGlvbkNoYW5nZSgxKX0pO2Uub24oXCJsb2FkU25hcHNob3RcIixmdW5jdGlvbigpe3ZhciBhPUNLRURJVE9SLmRvbS53YWxrZXIubm9kZVR5cGUoQ0tFRElUT1IuTk9ERV9FTEVNRU5UKSxiPWUuZWRpdGFibGUoKS5nZXRMYXN0KGEpO2ImJmIuaGFzQXR0cmlidXRlKFwiZGF0YS1ja2UtaGlkZGVuLXNlbFwiKSYmXG4oYi5yZW1vdmUoKSxDS0VESVRPUi5lbnYuZ2Vja28mJihhPWUuZWRpdGFibGUoKS5nZXRGaXJzdChhKSkmJmEuaXMoXCJiclwiKSYmYS5nZXRBdHRyaWJ1dGUoXCJfbW96X2VkaXRvcl9ib2d1c19ub2RlXCIpJiZhLnJlbW92ZSgpKX0sbnVsbCxudWxsLDEwMCk7ZS5vbihcImtleVwiLGZ1bmN0aW9uKGEpe2lmKFwid3lzaXd5Z1wiPT1lLm1vZGUpe3ZhciBiPWUuZ2V0U2VsZWN0aW9uKCk7aWYoYi5pc0Zha2Upe3ZhciBjPXRbYS5kYXRhLmtleUNvZGVdO2lmKGMpcmV0dXJuIGMoe2VkaXRvcjplLHNlbGVjdGVkOmIuZ2V0U2VsZWN0ZWRFbGVtZW50KCksc2VsZWN0aW9uOmIsa2V5RXZlbnQ6YX0pfX19KX0pO2lmKENLRURJVE9SLmVudi53ZWJraXQpQ0tFRElUT1Iub24oXCJpbnN0YW5jZVJlYWR5XCIsZnVuY3Rpb24oYSl7dmFyIGI9YS5lZGl0b3I7Yi5vbihcInNlbGVjdGlvbkNoYW5nZVwiLGZ1bmN0aW9uKCl7dmFyIGE9Yi5lZGl0YWJsZSgpLGM9YS5nZXRDdXN0b21EYXRhKFwiY2tlLWZpbGxpbmdDaGFyXCIpO1xuYyYmKGMuZ2V0Q3VzdG9tRGF0YShcInJlYWR5XCIpP2soYSk6Yy5zZXRDdXN0b21EYXRhKFwicmVhZHlcIiwxKSl9LG51bGwsbnVsbCwtMSk7Yi5vbihcImJlZm9yZVNldE1vZGVcIixmdW5jdGlvbigpe2soYi5lZGl0YWJsZSgpKX0sbnVsbCxudWxsLC0xKTtiLm9uKFwiZ2V0U25hcHNob3RcIixmdW5jdGlvbihhKXthLmRhdGEmJihhLmRhdGE9bChhLmRhdGEpKX0sYixudWxsLDIwKTtiLm9uKFwidG9EYXRhRm9ybWF0XCIsZnVuY3Rpb24oYSl7YS5kYXRhLmRhdGFWYWx1ZT1sKGEuZGF0YS5kYXRhVmFsdWUpfSxudWxsLG51bGwsMCl9KTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLnNlbGVjdGlvbkNoYW5nZT1mdW5jdGlvbihiKXsoYj9hOmQpLmNhbGwodGhpcyl9O0NLRURJVE9SLmVkaXRvci5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiF0aGlzLl8uc2F2ZWRTZWxlY3Rpb24mJiF0aGlzLl8uZmFrZVNlbGVjdGlvbnx8YT8oYT10aGlzLmVkaXRhYmxlKCkpJiZcInd5c2l3eWdcIj09XG50aGlzLm1vZGU/bmV3IENLRURJVE9SLmRvbS5zZWxlY3Rpb24oYSk6bnVsbDp0aGlzLl8uc2F2ZWRTZWxlY3Rpb258fHRoaXMuXy5mYWtlU2VsZWN0aW9ufTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmxvY2tTZWxlY3Rpb249ZnVuY3Rpb24oYSl7YT1hfHx0aGlzLmdldFNlbGVjdGlvbigxKTtyZXR1cm4gYS5nZXRUeXBlKCkhPUNLRURJVE9SLlNFTEVDVElPTl9OT05FPyghYS5pc0xvY2tlZCYmYS5sb2NrKCksdGhpcy5fLnNhdmVkU2VsZWN0aW9uPWEsITApOiExfTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLnVubG9ja1NlbGVjdGlvbj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLl8uc2F2ZWRTZWxlY3Rpb247cmV0dXJuIGI/KGIudW5sb2NrKGEpLGRlbGV0ZSB0aGlzLl8uc2F2ZWRTZWxlY3Rpb24sITApOiExfTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmZvcmNlTmV4dFNlbGVjdGlvbkNoZWNrPWZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuXy5zZWxlY3Rpb25QcmV2aW91c1BhdGh9O1xuQ0tFRElUT1IuZG9tLmRvY3VtZW50LnByb3RvdHlwZS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IENLRURJVE9SLmRvbS5zZWxlY3Rpb24odGhpcyl9O0NLRURJVE9SLmRvbS5yYW5nZS5wcm90b3R5cGUuc2VsZWN0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yb290IGluc3RhbmNlb2YgQ0tFRElUT1IuZWRpdGFibGU/dGhpcy5yb290LmVkaXRvci5nZXRTZWxlY3Rpb24oKTpuZXcgQ0tFRElUT1IuZG9tLnNlbGVjdGlvbih0aGlzLnJvb3QpO2Euc2VsZWN0UmFuZ2VzKFt0aGlzXSk7cmV0dXJuIGF9O0NLRURJVE9SLlNFTEVDVElPTl9OT05FPTE7Q0tFRElUT1IuU0VMRUNUSU9OX1RFWFQ9MjtDS0VESVRPUi5TRUxFQ1RJT05fRUxFTUVOVD0zO0NLRURJVE9SLmRvbS5zZWxlY3Rpb249ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5zZWxlY3Rpb24pe3ZhciBiPWE7YT1hLnJvb3R9dmFyIGM9YSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5lbGVtZW50O1xudGhpcy5yZXY9Yj9iLnJldjpyKys7dGhpcy5kb2N1bWVudD1hIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLmRvY3VtZW50P2E6YS5nZXREb2N1bWVudCgpO3RoaXMucm9vdD1jP2E6dGhpcy5kb2N1bWVudC5nZXRCb2R5KCk7dGhpcy5pc0xvY2tlZD0wO3RoaXMuXz17Y2FjaGU6e319O2lmKGIpcmV0dXJuIENLRURJVE9SLnRvb2xzLmV4dGVuZCh0aGlzLl8uY2FjaGUsYi5fLmNhY2hlKSx0aGlzLmlzRmFrZT1iLmlzRmFrZSx0aGlzLmlzTG9ja2VkPWIuaXNMb2NrZWQsdGhpczthPXRoaXMuZ2V0TmF0aXZlKCk7dmFyIGQsZTtpZihhKWlmKGEuZ2V0UmFuZ2VBdClkPShlPWEucmFuZ2VDb3VudCYmYS5nZXRSYW5nZUF0KDApKSYmbmV3IENLRURJVE9SLmRvbS5ub2RlKGUuY29tbW9uQW5jZXN0b3JDb250YWluZXIpO2Vsc2V7dHJ5e2U9YS5jcmVhdGVSYW5nZSgpfWNhdGNoKGYpe31kPWUmJkNLRURJVE9SLmRvbS5lbGVtZW50LmdldChlLml0ZW0mJmUuaXRlbSgwKXx8ZS5wYXJlbnRFbGVtZW50KCkpfWlmKCFkfHxcbmQudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZkLnR5cGUhPUNLRURJVE9SLk5PREVfVEVYVHx8IXRoaXMucm9vdC5lcXVhbHMoZCkmJiF0aGlzLnJvb3QuY29udGFpbnMoZCkpdGhpcy5fLmNhY2hlLnR5cGU9Q0tFRElUT1IuU0VMRUNUSU9OX05PTkUsdGhpcy5fLmNhY2hlLnN0YXJ0RWxlbWVudD1udWxsLHRoaXMuXy5jYWNoZS5zZWxlY3RlZEVsZW1lbnQ9bnVsbCx0aGlzLl8uY2FjaGUuc2VsZWN0ZWRUZXh0PVwiXCIsdGhpcy5fLmNhY2hlLnJhbmdlcz1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlTGlzdDtyZXR1cm4gdGhpc307dmFyIHY9e2ltZzoxLGhyOjEsbGk6MSx0YWJsZToxLHRyOjEsdGQ6MSx0aDoxLGVtYmVkOjEsb2JqZWN0OjEsb2w6MSx1bDoxLGE6MSxpbnB1dDoxLGZvcm06MSxzZWxlY3Q6MSx0ZXh0YXJlYToxLGJ1dHRvbjoxLGZpZWxkc2V0OjEsdGhlYWQ6MSx0Zm9vdDoxfTtDS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZG9tLnNlbGVjdGlvbix7X3JlbW92ZUZpbGxpbmdDaGFyU2VxdWVuY2VTdHJpbmc6bCxcbl9jcmVhdGVGaWxsaW5nQ2hhclNlcXVlbmNlTm9kZTpnLEZJTExJTkdfQ0hBUl9TRVFVRU5DRTp4fSk7Q0tFRElUT1IuZG9tLnNlbGVjdGlvbi5wcm90b3R5cGU9e2dldE5hdGl2ZTpmdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT10aGlzLl8uY2FjaGUubmF0aXZlU2VsP3RoaXMuXy5jYWNoZS5uYXRpdmVTZWw6dGhpcy5fLmNhY2hlLm5hdGl2ZVNlbD1BP3RoaXMuZG9jdW1lbnQuJC5zZWxlY3Rpb246dGhpcy5kb2N1bWVudC5nZXRXaW5kb3coKS4kLmdldFNlbGVjdGlvbigpfSxnZXRUeXBlOkE/ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uY2FjaGU7aWYoYS50eXBlKXJldHVybiBhLnR5cGU7dmFyIGI9Q0tFRElUT1IuU0VMRUNUSU9OX05PTkU7dHJ5e3ZhciBjPXRoaXMuZ2V0TmF0aXZlKCksZD1jLnR5cGU7XCJUZXh0XCI9PWQmJihiPUNLRURJVE9SLlNFTEVDVElPTl9URVhUKTtcIkNvbnRyb2xcIj09ZCYmKGI9Q0tFRElUT1IuU0VMRUNUSU9OX0VMRU1FTlQpO2MuY3JlYXRlUmFuZ2UoKS5wYXJlbnRFbGVtZW50KCkmJlxuKGI9Q0tFRElUT1IuU0VMRUNUSU9OX1RFWFQpfWNhdGNoKGUpe31yZXR1cm4gYS50eXBlPWJ9OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fLmNhY2hlO2lmKGEudHlwZSlyZXR1cm4gYS50eXBlO3ZhciBiPUNLRURJVE9SLlNFTEVDVElPTl9URVhULGM9dGhpcy5nZXROYXRpdmUoKTtpZighY3x8IWMucmFuZ2VDb3VudCliPUNLRURJVE9SLlNFTEVDVElPTl9OT05FO2Vsc2UgaWYoMT09Yy5yYW5nZUNvdW50KXt2YXIgYz1jLmdldFJhbmdlQXQoMCksZD1jLnN0YXJ0Q29udGFpbmVyO2Q9PWMuZW5kQ29udGFpbmVyJiYxPT1kLm5vZGVUeXBlJiYxPT1jLmVuZE9mZnNldC1jLnN0YXJ0T2Zmc2V0JiZ2W2QuY2hpbGROb2Rlc1tjLnN0YXJ0T2Zmc2V0XS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSYmKGI9Q0tFRElUT1IuU0VMRUNUSU9OX0VMRU1FTlQpfXJldHVybiBhLnR5cGU9Yn0sZ2V0UmFuZ2VzOmZ1bmN0aW9uKCl7dmFyIGE9QT9mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7cmV0dXJuKG5ldyBDS0VESVRPUi5kb20ubm9kZShiKSkuZ2V0SW5kZXgoKX1cbnZhciBiPWZ1bmN0aW9uKGIsYyl7Yj1iLmR1cGxpY2F0ZSgpO2IuY29sbGFwc2UoYyk7dmFyIGQ9Yi5wYXJlbnRFbGVtZW50KCk7aWYoIWQuaGFzQ2hpbGROb2RlcygpKXJldHVybntjb250YWluZXI6ZCxvZmZzZXQ6MH07Zm9yKHZhciBlPWQuY2hpbGRyZW4sZixoLGc9Yi5kdXBsaWNhdGUoKSxrPTAsbD1lLmxlbmd0aC0xLEI9LTEsbixtO2s8PWw7KWlmKEI9TWF0aC5mbG9vcigoaytsKS8yKSxmPWVbQl0sZy5tb3ZlVG9FbGVtZW50VGV4dChmKSxuPWcuY29tcGFyZUVuZFBvaW50cyhcIlN0YXJ0VG9TdGFydFwiLGIpLDA8bilsPUItMTtlbHNlIGlmKDA+bilrPUIrMTtlbHNlIHJldHVybntjb250YWluZXI6ZCxvZmZzZXQ6YShmKX07aWYoLTE9PUJ8fEI9PWUubGVuZ3RoLTEmJjA+bil7Zy5tb3ZlVG9FbGVtZW50VGV4dChkKTtnLnNldEVuZFBvaW50KFwiU3RhcnRUb1N0YXJ0XCIsYik7Zz1nLnRleHQucmVwbGFjZSgvKFxcclxcbnxcXHIpL2csXCJcXG5cIikubGVuZ3RoO2U9ZC5jaGlsZE5vZGVzO2lmKCFnKXJldHVybiBmPVxuZVtlLmxlbmd0aC0xXSxmLm5vZGVUeXBlIT1DS0VESVRPUi5OT0RFX1RFWFQ/e2NvbnRhaW5lcjpkLG9mZnNldDplLmxlbmd0aH06e2NvbnRhaW5lcjpmLG9mZnNldDpmLm5vZGVWYWx1ZS5sZW5ndGh9O2ZvcihkPWUubGVuZ3RoOzA8ZyYmMDxkOyloPWVbLS1kXSxoLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihtPWgsZy09aC5ub2RlVmFsdWUubGVuZ3RoKTtyZXR1cm57Y29udGFpbmVyOm0sb2Zmc2V0Oi1nfX1nLmNvbGxhcHNlKDA8bj8hMDohMSk7Zy5zZXRFbmRQb2ludCgwPG4/XCJTdGFydFRvU3RhcnRcIjpcIkVuZFRvU3RhcnRcIixiKTtnPWcudGV4dC5yZXBsYWNlKC8oXFxyXFxufFxccikvZyxcIlxcblwiKS5sZW5ndGg7aWYoIWcpcmV0dXJue2NvbnRhaW5lcjpkLG9mZnNldDphKGYpKygwPG4/MDoxKX07Zm9yKDswPGc7KXRyeXtoPWZbMDxuP1wicHJldmlvdXNTaWJsaW5nXCI6XCJuZXh0U2libGluZ1wiXSxoLm5vZGVUeXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihnLT1oLm5vZGVWYWx1ZS5sZW5ndGgsXG5tPWgpLGY9aH1jYXRjaChLKXtyZXR1cm57Y29udGFpbmVyOmQsb2Zmc2V0OmEoZil9fXJldHVybntjb250YWluZXI6bSxvZmZzZXQ6MDxuPy1nOm0ubm9kZVZhbHVlLmxlbmd0aCtnfX07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXROYXRpdmUoKSxjPWEmJmEuY3JlYXRlUmFuZ2UoKSxkPXRoaXMuZ2V0VHlwZSgpO2lmKCFhKXJldHVybltdO2lmKGQ9PUNLRURJVE9SLlNFTEVDVElPTl9URVhUKXJldHVybiBhPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UodGhpcy5yb290KSxkPWIoYywhMCksYS5zZXRTdGFydChuZXcgQ0tFRElUT1IuZG9tLm5vZGUoZC5jb250YWluZXIpLGQub2Zmc2V0KSxkPWIoYyksYS5zZXRFbmQobmV3IENLRURJVE9SLmRvbS5ub2RlKGQuY29udGFpbmVyKSxkLm9mZnNldCksYS5lbmRDb250YWluZXIuZ2V0UG9zaXRpb24oYS5zdGFydENvbnRhaW5lcikmQ0tFRElUT1IuUE9TSVRJT05fUFJFQ0VESU5HJiZhLmVuZE9mZnNldDw9YS5zdGFydENvbnRhaW5lci5nZXRJbmRleCgpJiZcbmEuY29sbGFwc2UoKSxbYV07aWYoZD09Q0tFRElUT1IuU0VMRUNUSU9OX0VMRU1FTlQpe2Zvcih2YXIgZD1bXSxlPTA7ZTxjLmxlbmd0aDtlKyspe2Zvcih2YXIgZj1jLml0ZW0oZSksZz1mLnBhcmVudE5vZGUsaD0wLGE9bmV3IENLRURJVE9SLmRvbS5yYW5nZSh0aGlzLnJvb3QpO2g8Zy5jaGlsZE5vZGVzLmxlbmd0aCYmZy5jaGlsZE5vZGVzW2hdIT1mO2grKyk7YS5zZXRTdGFydChuZXcgQ0tFRElUT1IuZG9tLm5vZGUoZyksaCk7YS5zZXRFbmQobmV3IENLRURJVE9SLmRvbS5ub2RlKGcpLGgrMSk7ZC5wdXNoKGEpfXJldHVybiBkfXJldHVybltdfX0oKTpmdW5jdGlvbigpe3ZhciBhPVtdLGIsYz10aGlzLmdldE5hdGl2ZSgpO2lmKCFjKXJldHVybiBhO2Zvcih2YXIgZD0wO2Q8Yy5yYW5nZUNvdW50O2QrKyl7dmFyIGU9Yy5nZXRSYW5nZUF0KGQpO2I9bmV3IENLRURJVE9SLmRvbS5yYW5nZSh0aGlzLnJvb3QpO2Iuc2V0U3RhcnQobmV3IENLRURJVE9SLmRvbS5ub2RlKGUuc3RhcnRDb250YWluZXIpLFxuZS5zdGFydE9mZnNldCk7Yi5zZXRFbmQobmV3IENLRURJVE9SLmRvbS5ub2RlKGUuZW5kQ29udGFpbmVyKSxlLmVuZE9mZnNldCk7YS5wdXNoKGIpfXJldHVybiBhfTtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5fLmNhY2hlLGQ9Yy5yYW5nZXM7ZHx8KGMucmFuZ2VzPWQ9bmV3IENLRURJVE9SLmRvbS5yYW5nZUxpc3QoYS5jYWxsKHRoaXMpKSk7cmV0dXJuIGI/ZShuZXcgQ0tFRElUT1IuZG9tLnJhbmdlTGlzdChkLnNsaWNlKCkpKTpkfX0oKSxnZXRTdGFydEVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uY2FjaGU7aWYodm9pZCAwIT09YS5zdGFydEVsZW1lbnQpcmV0dXJuIGEuc3RhcnRFbGVtZW50O3ZhciBiO3N3aXRjaCh0aGlzLmdldFR5cGUoKSl7Y2FzZSBDS0VESVRPUi5TRUxFQ1RJT05fRUxFTUVOVDpyZXR1cm4gdGhpcy5nZXRTZWxlY3RlZEVsZW1lbnQoKTtjYXNlIENLRURJVE9SLlNFTEVDVElPTl9URVhUOnZhciBjPXRoaXMuZ2V0UmFuZ2VzKClbMF07XG5pZihjKXtpZihjLmNvbGxhcHNlZCliPWMuc3RhcnRDb250YWluZXIsYi50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihiPWIuZ2V0UGFyZW50KCkpO2Vsc2V7Zm9yKGMub3B0aW1pemUoKTtiPWMuc3RhcnRDb250YWluZXIsYy5zdGFydE9mZnNldD09KGIuZ2V0Q2hpbGRDb3VudD9iLmdldENoaWxkQ291bnQoKTpiLmdldExlbmd0aCgpKSYmIWIuaXNCbG9ja0JvdW5kYXJ5KCk7KWMuc2V0U3RhcnRBZnRlcihiKTtiPWMuc3RhcnRDb250YWluZXI7aWYoYi50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpcmV0dXJuIGIuZ2V0UGFyZW50KCk7aWYoKGI9Yi5nZXRDaGlsZChjLnN0YXJ0T2Zmc2V0KSkmJmIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UKWZvcihjPWIuZ2V0Rmlyc3QoKTtjJiZjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVDspYj1jLGM9Yy5nZXRGaXJzdCgpO2Vsc2UgYj1jLnN0YXJ0Q29udGFpbmVyfWI9Yi4kfX1yZXR1cm4gYS5zdGFydEVsZW1lbnQ9Yj9cbm5ldyBDS0VESVRPUi5kb20uZWxlbWVudChiKTpudWxsfSxnZXRTZWxlY3RlZEVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uY2FjaGU7aWYodm9pZCAwIT09YS5zZWxlY3RlZEVsZW1lbnQpcmV0dXJuIGEuc2VsZWN0ZWRFbGVtZW50O3ZhciBiPXRoaXMsYz1DS0VESVRPUi50b29scy50cnlUaGVzZShmdW5jdGlvbigpe3JldHVybiBiLmdldE5hdGl2ZSgpLmNyZWF0ZVJhbmdlKCkuaXRlbSgwKX0sZnVuY3Rpb24oKXtmb3IodmFyIGE9Yi5nZXRSYW5nZXMoKVswXS5jbG9uZSgpLGMsZCxlPTI7ZSYmISgoYz1hLmdldEVuY2xvc2VkTm9kZSgpKSYmYy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJnZbYy5nZXROYW1lKCldJiYoZD1jKSk7ZS0tKWEuc2hyaW5rKENLRURJVE9SLlNIUklOS19FTEVNRU5UKTtyZXR1cm4gZCYmZC4kfSk7cmV0dXJuIGEuc2VsZWN0ZWRFbGVtZW50PWM/bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGMpOm51bGx9LGdldFNlbGVjdGVkVGV4dDpmdW5jdGlvbigpe3ZhciBhPVxudGhpcy5fLmNhY2hlO2lmKHZvaWQgMCE9PWEuc2VsZWN0ZWRUZXh0KXJldHVybiBhLnNlbGVjdGVkVGV4dDt2YXIgYj10aGlzLmdldE5hdGl2ZSgpLGI9QT9cIkNvbnRyb2xcIj09Yi50eXBlP1wiXCI6Yi5jcmVhdGVSYW5nZSgpLnRleHQ6Yi50b1N0cmluZygpO3JldHVybiBhLnNlbGVjdGVkVGV4dD1ifSxsb2NrOmZ1bmN0aW9uKCl7dGhpcy5nZXRSYW5nZXMoKTt0aGlzLmdldFN0YXJ0RWxlbWVudCgpO3RoaXMuZ2V0U2VsZWN0ZWRFbGVtZW50KCk7dGhpcy5nZXRTZWxlY3RlZFRleHQoKTt0aGlzLl8uY2FjaGUubmF0aXZlU2VsPW51bGw7dGhpcy5pc0xvY2tlZD0xfSx1bmxvY2s6ZnVuY3Rpb24oYSl7aWYodGhpcy5pc0xvY2tlZCl7aWYoYSl2YXIgYj10aGlzLmdldFNlbGVjdGVkRWxlbWVudCgpLGM9IWImJnRoaXMuZ2V0UmFuZ2VzKCksZD10aGlzLmlzRmFrZTt0aGlzLmlzTG9ja2VkPTA7dGhpcy5yZXNldCgpO2EmJihhPWJ8fGNbMF0mJmNbMF0uZ2V0Q29tbW9uQW5jZXN0b3IoKSkmJlxuYS5nZXRBc2NlbmRhbnQoXCJib2R5XCIsMSkmJihkP3RoaXMuZmFrZShiKTpiP3RoaXMuc2VsZWN0RWxlbWVudChiKTp0aGlzLnNlbGVjdFJhbmdlcyhjKSl9fSxyZXNldDpmdW5jdGlvbigpe3RoaXMuXy5jYWNoZT17fTt0aGlzLmlzRmFrZT0wO3ZhciBhPXRoaXMucm9vdC5lZGl0b3I7aWYoYSYmYS5fLmZha2VTZWxlY3Rpb24paWYodGhpcy5yZXY9PWEuXy5mYWtlU2VsZWN0aW9uLnJldil7ZGVsZXRlIGEuXy5mYWtlU2VsZWN0aW9uO3ZhciBiPWEuXy5oaWRkZW5TZWxlY3Rpb25Db250YWluZXI7aWYoYil7dmFyIGM9YS5jaGVja0RpcnR5KCk7YS5maXJlKFwibG9ja1NuYXBzaG90XCIpO2IucmVtb3ZlKCk7YS5maXJlKFwidW5sb2NrU25hcHNob3RcIik7IWMmJmEucmVzZXREaXJ0eSgpfWRlbGV0ZSBhLl8uaGlkZGVuU2VsZWN0aW9uQ29udGFpbmVyfWVsc2UgQ0tFRElUT1Iud2FybihcInNlbGVjdGlvbi1mYWtlLXJlc2V0XCIpO3RoaXMucmV2PXIrK30sc2VsZWN0RWxlbWVudDpmdW5jdGlvbihhKXt2YXIgYj1cbm5ldyBDS0VESVRPUi5kb20ucmFuZ2UodGhpcy5yb290KTtiLnNldFN0YXJ0QmVmb3JlKGEpO2Iuc2V0RW5kQWZ0ZXIoYSk7dGhpcy5zZWxlY3RSYW5nZXMoW2JdKX0sc2VsZWN0UmFuZ2VzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucm9vdC5lZGl0b3IsYj1iJiZiLl8uaGlkZGVuU2VsZWN0aW9uQ29udGFpbmVyO3RoaXMucmVzZXQoKTtpZihiKWZvcih2YXIgYj10aGlzLnJvb3QsYyxkPTA7ZDxhLmxlbmd0aDsrK2QpYz1hW2RdLGMuZW5kQ29udGFpbmVyLmVxdWFscyhiKSYmKGMuZW5kT2Zmc2V0PU1hdGgubWluKGMuZW5kT2Zmc2V0LGIuZ2V0Q2hpbGRDb3VudCgpKSk7aWYoYS5sZW5ndGgpaWYodGhpcy5pc0xvY2tlZCl7dmFyIGU9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QWN0aXZlKCk7dGhpcy51bmxvY2soKTt0aGlzLnNlbGVjdFJhbmdlcyhhKTt0aGlzLmxvY2soKTtlJiYhZS5lcXVhbHModGhpcy5yb290KSYmZS5mb2N1cygpfWVsc2V7dmFyIGw7YTp7dmFyIG0scTtpZigxPT1hLmxlbmd0aCYmXG4hKHE9YVswXSkuY29sbGFwc2VkJiYobD1xLmdldEVuY2xvc2VkTm9kZSgpKSYmbC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihxPXEuY2xvbmUoKSxxLnNocmluayhDS0VESVRPUi5TSFJJTktfRUxFTUVOVCwhMCksKG09cS5nZXRFbmNsb3NlZE5vZGUoKSkmJm0udHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYobD1tKSxcImZhbHNlXCI9PWwuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKSlicmVhayBhO2w9dm9pZCAwfWlmKGwpdGhpcy5mYWtlKGwpO2Vsc2V7aWYoQSl7cT1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCEwKTttPS9cXHVmZWZmfFxcdTAwYTAvO2I9e3RhYmxlOjEsdGJvZHk6MSx0cjoxfTsxPGEubGVuZ3RoJiYobD1hW2EubGVuZ3RoLTFdLGFbMF0uc2V0RW5kKGwuZW5kQ29udGFpbmVyLGwuZW5kT2Zmc2V0KSk7bD1hWzBdO2E9bC5jb2xsYXBzZWQ7dmFyIHUscix0O2lmKChjPWwuZ2V0RW5jbG9zZWROb2RlKCkpJiZjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmXG5jLmdldE5hbWUoKWluIHYmJighYy5pcyhcImFcIil8fCFjLmdldFRleHQoKSkpdHJ5e3Q9Yy4kLmNyZWF0ZUNvbnRyb2xSYW5nZSgpO3QuYWRkRWxlbWVudChjLiQpO3Quc2VsZWN0KCk7cmV0dXJufWNhdGNoKHgpe31pZihsLnN0YXJ0Q29udGFpbmVyLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmbC5zdGFydENvbnRhaW5lci5nZXROYW1lKClpbiBifHxsLmVuZENvbnRhaW5lci50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmwuZW5kQ29udGFpbmVyLmdldE5hbWUoKWluIGIpbC5zaHJpbmsoQ0tFRElUT1IuTk9ERV9FTEVNRU5ULCEwKSxhPWwuY29sbGFwc2VkO3Q9bC5jcmVhdGVCb29rbWFyaygpO2I9dC5zdGFydE5vZGU7YXx8KGU9dC5lbmROb2RlKTt0PWwuZG9jdW1lbnQuJC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO3QubW92ZVRvRWxlbWVudFRleHQoYi4kKTt0Lm1vdmVTdGFydChcImNoYXJhY3RlclwiLDEpO2U/KG09bC5kb2N1bWVudC4kLmJvZHkuY3JlYXRlVGV4dFJhbmdlKCksXG5tLm1vdmVUb0VsZW1lbnRUZXh0KGUuJCksdC5zZXRFbmRQb2ludChcIkVuZFRvRW5kXCIsbSksdC5tb3ZlRW5kKFwiY2hhcmFjdGVyXCIsLTEpKToodT1iLmdldE5leHQocSkscj1iLmhhc0FzY2VuZGFudChcInByZVwiKSx1PSEodSYmdS5nZXRUZXh0JiZ1LmdldFRleHQoKS5tYXRjaChtKSkmJihyfHwhYi5oYXNQcmV2aW91cygpfHxiLmdldFByZXZpb3VzKCkuaXMmJmIuZ2V0UHJldmlvdXMoKS5pcyhcImJyXCIpKSxyPWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksci5zZXRIdG1sKFwiXFx4MjYjNjUyNzk7XCIpLHIuaW5zZXJ0QmVmb3JlKGIpLHUmJmwuZG9jdW1lbnQuY3JlYXRlVGV4dChcIu+7v1wiKS5pbnNlcnRCZWZvcmUoYikpO2wuc2V0U3RhcnRCZWZvcmUoYik7Yi5yZW1vdmUoKTthPyh1Pyh0Lm1vdmVTdGFydChcImNoYXJhY3RlclwiLC0xKSx0LnNlbGVjdCgpLGwuZG9jdW1lbnQuJC5zZWxlY3Rpb24uY2xlYXIoKSk6dC5zZWxlY3QoKSxsLm1vdmVUb1Bvc2l0aW9uKHIsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKSxcbnIucmVtb3ZlKCkpOihsLnNldEVuZEJlZm9yZShlKSxlLnJlbW92ZSgpLHQuc2VsZWN0KCkpfWVsc2V7ZT10aGlzLmdldE5hdGl2ZSgpO2lmKCFlKXJldHVybjt0aGlzLnJlbW92ZUFsbFJhbmdlcygpO2Zvcih0PTA7dDxhLmxlbmd0aDt0Kyspe2lmKHQ8YS5sZW5ndGgtMSYmKHU9YVt0XSxyPWFbdCsxXSxtPXUuY2xvbmUoKSxtLnNldFN0YXJ0KHUuZW5kQ29udGFpbmVyLHUuZW5kT2Zmc2V0KSxtLnNldEVuZChyLnN0YXJ0Q29udGFpbmVyLHIuc3RhcnRPZmZzZXQpLCFtLmNvbGxhcHNlZCYmKG0uc2hyaW5rKENLRURJVE9SLk5PREVfRUxFTUVOVCwhMCksbD1tLmdldENvbW1vbkFuY2VzdG9yKCksbT1tLmdldEVuY2xvc2VkTm9kZSgpLGwuaXNSZWFkT25seSgpfHxtJiZtLmlzUmVhZE9ubHkoKSkpKXtyLnNldFN0YXJ0KHUuc3RhcnRDb250YWluZXIsdS5zdGFydE9mZnNldCk7YS5zcGxpY2UodC0tLDEpO2NvbnRpbnVlfWw9YVt0XTtyPXRoaXMuZG9jdW1lbnQuJC5jcmVhdGVSYW5nZSgpO1xubC5jb2xsYXBzZWQmJkNLRURJVE9SLmVudi53ZWJraXQmJmYobCkmJihtPWcodGhpcy5yb290KSxsLmluc2VydE5vZGUobSksKHU9bS5nZXROZXh0KCkpJiYhbS5nZXRQcmV2aW91cygpJiZ1LnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmXCJiclwiPT11LmdldE5hbWUoKT8oayh0aGlzLnJvb3QpLGwubW92ZVRvUG9zaXRpb24odSxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQpKTpsLm1vdmVUb1Bvc2l0aW9uKG0sQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EKSk7ci5zZXRTdGFydChsLnN0YXJ0Q29udGFpbmVyLiQsbC5zdGFydE9mZnNldCk7dHJ5e3Iuc2V0RW5kKGwuZW5kQ29udGFpbmVyLiQsbC5lbmRPZmZzZXQpfWNhdGNoKEIpe2lmKDA8PUIudG9TdHJpbmcoKS5pbmRleE9mKFwiTlNfRVJST1JfSUxMRUdBTF9WQUxVRVwiKSlsLmNvbGxhcHNlKDEpLHIuc2V0RW5kKGwuZW5kQ29udGFpbmVyLiQsbC5lbmRPZmZzZXQpO2Vsc2UgdGhyb3cgQjt9ZS5hZGRSYW5nZShyKX19dGhpcy5yZXNldCgpO1xudGhpcy5yb290LmZpcmUoXCJzZWxlY3Rpb25jaGFuZ2VcIil9fX0sZmFrZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucm9vdC5lZGl0b3I7dm9pZCAwPT09YiYmYS5oYXNBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIpJiYoYj1hLmdldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIikpO3RoaXMucmVzZXQoKTttKGMsYik7dmFyIGQ9dGhpcy5fLmNhY2hlLGU9bmV3IENLRURJVE9SLmRvbS5yYW5nZSh0aGlzLnJvb3QpO2Uuc2V0U3RhcnRCZWZvcmUoYSk7ZS5zZXRFbmRBZnRlcihhKTtkLnJhbmdlcz1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlTGlzdChlKTtkLnNlbGVjdGVkRWxlbWVudD1kLnN0YXJ0RWxlbWVudD1hO2QudHlwZT1DS0VESVRPUi5TRUxFQ1RJT05fRUxFTUVOVDtkLnNlbGVjdGVkVGV4dD1kLm5hdGl2ZVNlbD1udWxsO3RoaXMuaXNGYWtlPTE7dGhpcy5yZXY9cisrO2MuXy5mYWtlU2VsZWN0aW9uPXRoaXM7dGhpcy5yb290LmZpcmUoXCJzZWxlY3Rpb25jaGFuZ2VcIil9LGlzSGlkZGVuOmZ1bmN0aW9uKCl7dmFyIGE9XG50aGlzLmdldENvbW1vbkFuY2VzdG9yKCk7YSYmYS50eXBlPT1DS0VESVRPUi5OT0RFX1RFWFQmJihhPWEuZ2V0UGFyZW50KCkpO3JldHVybiEoIWF8fCFhLmRhdGEoXCJja2UtaGlkZGVuLXNlbFwiKSl9LGNyZWF0ZUJvb2ttYXJrczpmdW5jdGlvbihhKXthPXRoaXMuZ2V0UmFuZ2VzKCkuY3JlYXRlQm9va21hcmtzKGEpO3RoaXMuaXNGYWtlJiYoYS5pc0Zha2U9MSk7cmV0dXJuIGF9LGNyZWF0ZUJvb2ttYXJrczI6ZnVuY3Rpb24oYSl7YT10aGlzLmdldFJhbmdlcygpLmNyZWF0ZUJvb2ttYXJrczIoYSk7dGhpcy5pc0Zha2UmJihhLmlzRmFrZT0xKTtyZXR1cm4gYX0sc2VsZWN0Qm9va21hcmtzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjLGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGU9bmV3IENLRURJVE9SLmRvbS5yYW5nZSh0aGlzLnJvb3QpO2UubW92ZVRvQm9va21hcmsoYVtkXSk7Yi5wdXNoKGUpfWEuaXNGYWtlJiYoYz1iWzBdLmdldEVuY2xvc2VkTm9kZSgpLGMmJmMudHlwZT09XG5DS0VESVRPUi5OT0RFX0VMRU1FTlR8fChDS0VESVRPUi53YXJuKFwic2VsZWN0aW9uLW5vdC1mYWtlXCIpLGEuaXNGYWtlPTApKTthLmlzRmFrZT90aGlzLmZha2UoYyk6dGhpcy5zZWxlY3RSYW5nZXMoYik7cmV0dXJuIHRoaXN9LGdldENvbW1vbkFuY2VzdG9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRSYW5nZXMoKTtyZXR1cm4gYS5sZW5ndGg/YVswXS5zdGFydENvbnRhaW5lci5nZXRDb21tb25BbmNlc3RvcihhW2EubGVuZ3RoLTFdLmVuZENvbnRhaW5lcik6bnVsbH0sc2Nyb2xsSW50b1ZpZXc6ZnVuY3Rpb24oKXt0aGlzLnR5cGUhPUNLRURJVE9SLlNFTEVDVElPTl9OT05FJiZ0aGlzLmdldFJhbmdlcygpWzBdLnNjcm9sbEludG9WaWV3KCl9LHJlbW92ZUFsbFJhbmdlczpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0VHlwZSgpIT1DS0VESVRPUi5TRUxFQ1RJT05fTk9ORSl7dmFyIGE9dGhpcy5nZXROYXRpdmUoKTt0cnl7YSYmYVtBP1wiZW1wdHlcIjpcInJlbW92ZUFsbFJhbmdlc1wiXSgpfWNhdGNoKGIpe310aGlzLnJlc2V0KCl9fX19KSgpO1xuXCJ1c2Ugc3RyaWN0XCI7Q0tFRElUT1IuU1RZTEVfQkxPQ0s9MTtDS0VESVRPUi5TVFlMRV9JTkxJTkU9MjtDS0VESVRPUi5TVFlMRV9PQkpFQ1Q9MztcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxiKXtmb3IodmFyIGMsZDsoYT1hLmdldFBhcmVudCgpKSYmIWEuZXF1YWxzKGIpOylpZihhLmdldEF0dHJpYnV0ZShcImRhdGEtbm9zdHlsZVwiKSljPWE7ZWxzZSBpZighZCl7dmFyIGU9YS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIik7XCJmYWxzZVwiPT1lP2M9YTpcInRydWVcIj09ZSYmKGQ9MSl9cmV0dXJuIGN9ZnVuY3Rpb24gZChhLGIsYyxkKXtyZXR1cm4oYS5nZXRQb3NpdGlvbihiKXxkKT09ZCYmKCFjLmNoaWxkUnVsZXx8Yy5jaGlsZFJ1bGUoYSkpfWZ1bmN0aW9uIGIoYyl7dmFyIGU9Yy5kb2N1bWVudDtpZihjLmNvbGxhcHNlZCllPUgodGhpcyxlKSxjLmluc2VydE5vZGUoZSksYy5tb3ZlVG9Qb3NpdGlvbihlLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpO2Vsc2V7dmFyIGc9dGhpcy5lbGVtZW50LGg9dGhpcy5fLmRlZmluaXRpb24sayxsPWguaWdub3JlUmVhZG9ubHksbT1sfHxoLmluY2x1ZGVSZWFkb25seTtudWxsPT1cbm0mJihtPWMucm9vdC5nZXRDdXN0b21EYXRhKFwiY2tlX2luY2x1ZGVSZWFkb25seVwiKSk7dmFyIG49Q0tFRElUT1IuZHRkW2ddO258fChrPSEwLG49Q0tFRElUT1IuZHRkLnNwYW4pO2MuZW5sYXJnZShDS0VESVRPUi5FTkxBUkdFX0lOTElORSwxKTtjLnRyaW0oKTt2YXIgcD1jLmNyZWF0ZUJvb2ttYXJrKCkscT1wLnN0YXJ0Tm9kZSx1PXAuZW5kTm9kZSxyPXEsdDtpZighbCl7dmFyIHY9Yy5nZXRDb21tb25BbmNlc3RvcigpLGw9YShxLHYpLHY9YSh1LHYpO2wmJihyPWwuZ2V0TmV4dFNvdXJjZU5vZGUoITApKTt2JiYodT12KX1mb3Ioci5nZXRQb3NpdGlvbih1KT09Q0tFRElUT1IuUE9TSVRJT05fRk9MTE9XSU5HJiYocj0wKTtyOyl7bD0hMTtpZihyLmVxdWFscyh1KSlyPW51bGwsbD0hMDtlbHNle3ZhciB4PXIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UP3IuZ2V0TmFtZSgpOm51bGwsdj14JiZcImZhbHNlXCI9PXIuZ2V0QXR0cmlidXRlKFwiY29udGVudEVkaXRhYmxlXCIpLEE9eCYmXG5yLmdldEF0dHJpYnV0ZShcImRhdGEtbm9zdHlsZVwiKTtpZih4JiZyLmRhdGEoXCJja2UtYm9va21hcmtcIikpe3I9ci5nZXROZXh0U291cmNlTm9kZSghMCk7Y29udGludWV9aWYodiYmbSYmQ0tFRElUT1IuZHRkLiRibG9ja1t4XSlmb3IodmFyIHc9cix5PWYodyksej12b2lkIDAsQz15Lmxlbmd0aCxFPTAsdz1DJiZuZXcgQ0tFRElUT1IuZG9tLnJhbmdlKHcuZ2V0RG9jdW1lbnQoKSk7RTxDOysrRSl7dmFyIHo9eVtFXSxKPUNLRURJVE9SLmZpbHRlci5pbnN0YW5jZXNbei5kYXRhKFwiY2tlLWZpbHRlclwiKV07aWYoSj9KLmNoZWNrKHRoaXMpOjEpdy5zZWxlY3ROb2RlQ29udGVudHMoeiksYi5jYWxsKHRoaXMsdyl9eT14PyFuW3hdfHxBPzA6diYmIW0/MDpkKHIsdSxoLE8pOjE7aWYoeSlpZih6PXIuZ2V0UGFyZW50KCkseT1oLEM9ZyxFPWssIXp8fCEoei5nZXREdGQoKXx8Q0tFRElUT1IuZHRkLnNwYW4pW0NdJiYhRXx8eS5wYXJlbnRSdWxlJiYheS5wYXJlbnRSdWxlKHopKWw9ITA7ZWxzZXtpZih0fHxcbngmJkNLRURJVE9SLmR0ZC4kcmVtb3ZlRW1wdHlbeF0mJihyLmdldFBvc2l0aW9uKHUpfE8pIT1PfHwodD1jLmNsb25lKCksdC5zZXRTdGFydEJlZm9yZShyKSkseD1yLnR5cGUseD09Q0tFRElUT1IuTk9ERV9URVhUfHx2fHx4PT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJiFyLmdldENoaWxkQ291bnQoKSl7Zm9yKHZhciB4PXIsUDsobD0heC5nZXROZXh0KFkpKSYmKFA9eC5nZXRQYXJlbnQoKSxuW1AuZ2V0TmFtZSgpXSkmJmQoUCxxLGgsTik7KXg9UDt0LnNldEVuZEFmdGVyKHgpfX1lbHNlIGw9ITA7cj1yLmdldE5leHRTb3VyY2VOb2RlKEF8fHYpfWlmKGwmJnQmJiF0LmNvbGxhcHNlZCl7Zm9yKHZhciBsPUgodGhpcyxlKSx2PWwuaGFzQXR0cmlidXRlcygpLEE9dC5nZXRDb21tb25BbmNlc3RvcigpLHg9e30seT17fSx6PXt9LEM9e30sUyxWLGNhO2wmJkE7KXtpZihBLmdldE5hbWUoKT09Zyl7Zm9yKFMgaW4gaC5hdHRyaWJ1dGVzKSFDW1NdJiYoY2E9QS5nZXRBdHRyaWJ1dGUoVikpJiZcbihsLmdldEF0dHJpYnV0ZShTKT09Y2E/eVtTXT0xOkNbU109MSk7Zm9yKFYgaW4gaC5zdHlsZXMpIXpbVl0mJihjYT1BLmdldFN0eWxlKFYpKSYmKGwuZ2V0U3R5bGUoVik9PWNhP3hbVl09MTp6W1ZdPTEpfUE9QS5nZXRQYXJlbnQoKX1mb3IoUyBpbiB5KWwucmVtb3ZlQXR0cmlidXRlKFMpO2ZvcihWIGluIHgpbC5yZW1vdmVTdHlsZShWKTt2JiYhbC5oYXNBdHRyaWJ1dGVzKCkmJihsPW51bGwpO2w/KHQuZXh0cmFjdENvbnRlbnRzKCkuYXBwZW5kVG8obCksdC5pbnNlcnROb2RlKGwpLEQuY2FsbCh0aGlzLGwpLGwubWVyZ2VTaWJsaW5ncygpLENLRURJVE9SLmVudi5pZXx8bC4kLm5vcm1hbGl6ZSgpKToobD1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJzcGFuXCIpLHQuZXh0cmFjdENvbnRlbnRzKCkuYXBwZW5kVG8obCksdC5pbnNlcnROb2RlKGwpLEQuY2FsbCh0aGlzLGwpLGwucmVtb3ZlKCEwKSk7dD1udWxsfX1jLm1vdmVUb0Jvb2ttYXJrKHApO2Muc2hyaW5rKENLRURJVE9SLlNIUklOS19URVhUKTtcbmMuc2hyaW5rKENLRURJVE9SLk5PREVfRUxFTUVOVCwhMCl9fWZ1bmN0aW9uIGMoYSl7ZnVuY3Rpb24gYigpe2Zvcih2YXIgYT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGQuZ2V0UGFyZW50KCkpLGM9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChtLmdldFBhcmVudCgpKSxlPW51bGwsZj1udWxsLGc9MDtnPGEuZWxlbWVudHMubGVuZ3RoO2crKyl7dmFyIGg9YS5lbGVtZW50c1tnXTtpZihoPT1hLmJsb2NrfHxoPT1hLmJsb2NrTGltaXQpYnJlYWs7bi5jaGVja0VsZW1lbnRSZW1vdmFibGUoaCwhMCkmJihlPWgpfWZvcihnPTA7ZzxjLmVsZW1lbnRzLmxlbmd0aDtnKyspe2g9Yy5lbGVtZW50c1tnXTtpZihoPT1jLmJsb2NrfHxoPT1jLmJsb2NrTGltaXQpYnJlYWs7bi5jaGVja0VsZW1lbnRSZW1vdmFibGUoaCwhMCkmJihmPWgpfWYmJm0uYnJlYWtQYXJlbnQoZik7ZSYmZC5icmVha1BhcmVudChlKX1hLmVubGFyZ2UoQ0tFRElUT1IuRU5MQVJHRV9JTkxJTkUsMSk7dmFyIGM9XG5hLmNyZWF0ZUJvb2ttYXJrKCksZD1jLnN0YXJ0Tm9kZTtpZihhLmNvbGxhcHNlZCl7Zm9yKHZhciBlPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoZC5nZXRQYXJlbnQoKSxhLnJvb3QpLGYsZz0wLGs7ZzxlLmVsZW1lbnRzLmxlbmd0aCYmKGs9ZS5lbGVtZW50c1tnXSkmJmshPWUuYmxvY2smJmshPWUuYmxvY2tMaW1pdDtnKyspaWYodGhpcy5jaGVja0VsZW1lbnRSZW1vdmFibGUoaykpe3ZhciBsO2EuY29sbGFwc2VkJiYoYS5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGssQ0tFRElUT1IuRU5EKXx8KGw9YS5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGssQ0tFRElUT1IuU1RBUlQpKSk/KGY9ayxmLm1hdGNoPWw/XCJzdGFydFwiOlwiZW5kXCIpOihrLm1lcmdlU2libGluZ3MoKSxrLmlzKHRoaXMuZWxlbWVudCk/eC5jYWxsKHRoaXMsayk6cShrLGgodGhpcylbay5nZXROYW1lKCldKSl9aWYoZil7az1kO2ZvcihnPTA7O2crKyl7bD1lLmVsZW1lbnRzW2ddO2lmKGwuZXF1YWxzKGYpKWJyZWFrO1xuZWxzZSBpZihsLm1hdGNoKWNvbnRpbnVlO2Vsc2UgbD1sLmNsb25lKCk7bC5hcHBlbmQoayk7az1sfWtbXCJzdGFydFwiPT1mLm1hdGNoP1wiaW5zZXJ0QmVmb3JlXCI6XCJpbnNlcnRBZnRlclwiXShmKX19ZWxzZXt2YXIgbT1jLmVuZE5vZGUsbj10aGlzO2IoKTtmb3IoZT1kOyFlLmVxdWFscyhtKTspZj1lLmdldE5leHRTb3VyY2VOb2RlKCksZS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJnRoaXMuY2hlY2tFbGVtZW50UmVtb3ZhYmxlKGUpJiYoZS5nZXROYW1lKCk9PXRoaXMuZWxlbWVudD94LmNhbGwodGhpcyxlKTpxKGUsaCh0aGlzKVtlLmdldE5hbWUoKV0pLGYudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZmLmNvbnRhaW5zKGQpJiYoYigpLGY9ZC5nZXROZXh0KCkpKSxlPWZ9YS5tb3ZlVG9Cb29rbWFyayhjKTthLnNocmluayhDS0VESVRPUi5OT0RFX0VMRU1FTlQsITApfWZ1bmN0aW9uIGYoYSl7dmFyIGI9W107YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKFwidHJ1ZVwiPT1cbmEuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKXJldHVybiBiLnB1c2goYSksITF9LENLRURJVE9SLk5PREVfRUxFTUVOVCwhMCk7cmV0dXJuIGJ9ZnVuY3Rpb24gZyhhKXt2YXIgYj1hLmdldEVuY2xvc2VkTm9kZSgpfHxhLmdldENvbW1vbkFuY2VzdG9yKCExLCEwKTsoYT0obmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChiLGEucm9vdCkpLmNvbnRhaW5zKHRoaXMuZWxlbWVudCwxKSkmJiFhLmlzUmVhZE9ubHkoKSYmdChhLHRoaXMpfWZ1bmN0aW9uIGsoYSl7dmFyIGI9YS5nZXRDb21tb25BbmNlc3RvcighMCwhMCk7aWYoYT0obmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChiLGEucm9vdCkpLmNvbnRhaW5zKHRoaXMuZWxlbWVudCwxKSl7dmFyIGI9dGhpcy5fLmRlZmluaXRpb24sYz1iLmF0dHJpYnV0ZXM7aWYoYylmb3IodmFyIGQgaW4gYylhLnJlbW92ZUF0dHJpYnV0ZShkLGNbZF0pO2lmKGIuc3R5bGVzKWZvcih2YXIgZSBpbiBiLnN0eWxlcyliLnN0eWxlcy5oYXNPd25Qcm9wZXJ0eShlKSYmXG5hLnJlbW92ZVN0eWxlKGUpfX1mdW5jdGlvbiBsKGEpe3ZhciBiPWEuY3JlYXRlQm9va21hcmsoITApLGM9YS5jcmVhdGVJdGVyYXRvcigpO2MuZW5mb3JjZVJlYWxCbG9ja3M9ITA7dGhpcy5fLmVudGVyTW9kZSYmKGMuZW5sYXJnZUJyPXRoaXMuXy5lbnRlck1vZGUhPUNLRURJVE9SLkVOVEVSX0JSKTtmb3IodmFyIGQsZT1hLmRvY3VtZW50LGY7ZD1jLmdldE5leHRQYXJhZ3JhcGgoKTspIWQuaXNSZWFkT25seSgpJiYoYy5hY3RpdmVGaWx0ZXI/Yy5hY3RpdmVGaWx0ZXIuY2hlY2sodGhpcyk6MSkmJihmPUgodGhpcyxlLGQpLHUoZCxmKSk7YS5tb3ZlVG9Cb29rbWFyayhiKX1mdW5jdGlvbiBtKGEpe3ZhciBiPWEuY3JlYXRlQm9va21hcmsoMSksYz1hLmNyZWF0ZUl0ZXJhdG9yKCk7Yy5lbmZvcmNlUmVhbEJsb2Nrcz0hMDtjLmVubGFyZ2VCcj10aGlzLl8uZW50ZXJNb2RlIT1DS0VESVRPUi5FTlRFUl9CUjtmb3IodmFyIGQsZTtkPWMuZ2V0TmV4dFBhcmFncmFwaCgpOyl0aGlzLmNoZWNrRWxlbWVudFJlbW92YWJsZShkKSYmXG4oZC5pcyhcInByZVwiKT8oKGU9dGhpcy5fLmVudGVyTW9kZT09Q0tFRElUT1IuRU5URVJfQlI/bnVsbDphLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy5fLmVudGVyTW9kZT09Q0tFRElUT1IuRU5URVJfUD9cInBcIjpcImRpdlwiKSkmJmQuY29weUF0dHJpYnV0ZXMoZSksdShkLGUpKTp4LmNhbGwodGhpcyxkKSk7YS5tb3ZlVG9Cb29rbWFyayhiKX1mdW5jdGlvbiB1KGEsYil7dmFyIGM9IWI7YyYmKGI9YS5nZXREb2N1bWVudCgpLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksYS5jb3B5QXR0cmlidXRlcyhiKSk7dmFyIGQ9YiYmYi5pcyhcInByZVwiKSxmPWEuaXMoXCJwcmVcIiksZz0hZCYmZjtpZihkJiYhZil7Zj1iOyhnPWEuZ2V0Qm9ndXMoKSkmJmcucmVtb3ZlKCk7Zz1hLmdldEh0bWwoKTtnPUEoZywvKD86XlsgXFx0XFxuXFxyXSspfCg/OlsgXFx0XFxuXFxyXSskKS9nLFwiXCIpO2c9Zy5yZXBsYWNlKC9bIFxcdFxcclxcbl0qKDxicltePl0qPilbIFxcdFxcclxcbl0qL2dpLFwiJDFcIik7Zz1nLnJlcGxhY2UoLyhbIFxcdFxcblxccl0rfCZuYnNwOykvZyxcblwiIFwiKTtnPWcucmVwbGFjZSgvPGJyXFxiW14+XSo+L2dpLFwiXFxuXCIpO2lmKENLRURJVE9SLmVudi5pZSl7dmFyIGg9YS5nZXREb2N1bWVudCgpLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aC5hcHBlbmQoZik7Zi4kLm91dGVySFRNTD1cIlxceDNjcHJlXFx4M2VcIitnK1wiXFx4M2MvcHJlXFx4M2VcIjtmLmNvcHlBdHRyaWJ1dGVzKGguZ2V0Rmlyc3QoKSk7Zj1oLmdldEZpcnN0KCkucmVtb3ZlKCl9ZWxzZSBmLnNldEh0bWwoZyk7Yj1mfWVsc2UgZz9iPXIoYz9bYS5nZXRIdG1sKCldOmUoYSksYik6YS5tb3ZlQ2hpbGRyZW4oYik7Yi5yZXBsYWNlKGEpO2lmKGQpe3ZhciBjPWIsazsoaz1jLmdldFByZXZpb3VzKFApKSYmay50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmsuaXMoXCJwcmVcIikmJihkPUEoay5nZXRIdG1sKCksL1xcbiQvLFwiXCIpK1wiXFxuXFxuXCIrQShjLmdldEh0bWwoKSwvXlxcbi8sXCJcIiksQ0tFRElUT1IuZW52LmllP2MuJC5vdXRlckhUTUw9XCJcXHgzY3ByZVxceDNlXCIrZCtcIlxceDNjL3ByZVxceDNlXCI6XG5jLnNldEh0bWwoZCksay5yZW1vdmUoKSl9ZWxzZSBjJiZ3KGIpfWZ1bmN0aW9uIGUoYSl7dmFyIGI9W107QShhLmdldE91dGVySHRtbCgpLC8oXFxTXFxzKilcXG4oPzpcXHN8KDxzcGFuW14+XStkYXRhLWNrZS1ib29rbWFyay4qP1xcL3NwYW4+KSkqXFxuKD8hJCkvZ2ksZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiK1wiXFx4M2MvcHJlXFx4M2VcIitjK1wiXFx4M2NwcmVcXHgzZVwifSkucmVwbGFjZSgvPHByZVxcYi4qPz4oW1xcc1xcU10qPyk8XFwvcHJlPi9naSxmdW5jdGlvbihhLGMpe2IucHVzaChjKX0pO3JldHVybiBifWZ1bmN0aW9uIEEoYSxiLGMpe3ZhciBkPVwiXCIsZT1cIlwiO2E9YS5yZXBsYWNlKC8oXjxzcGFuW14+XStkYXRhLWNrZS1ib29rbWFyay4qP1xcL3NwYW4+KXwoPHNwYW5bXj5dK2RhdGEtY2tlLWJvb2ttYXJrLio/XFwvc3Bhbj4kKS9naSxmdW5jdGlvbihhLGIsYyl7YiYmKGQ9Yik7YyYmKGU9Yyk7cmV0dXJuXCJcIn0pO3JldHVybiBkK2EucmVwbGFjZShiLGMpK2V9ZnVuY3Rpb24gcihhLGIpe3ZhciBjO1xuMTxhLmxlbmd0aCYmKGM9bmV3IENLRURJVE9SLmRvbS5kb2N1bWVudEZyYWdtZW50KGIuZ2V0RG9jdW1lbnQoKSkpO2Zvcih2YXIgZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hW2RdLGU9ZS5yZXBsYWNlKC8oXFxyXFxufFxccikvZyxcIlxcblwiKSxlPUEoZSwvXlsgXFx0XSpcXG4vLFwiXCIpLGU9QShlLC9cXG4kLyxcIlwiKSxlPUEoZSwvXlsgXFx0XSt8WyBcXHRdKyQvZyxmdW5jdGlvbihhLGIpe3JldHVybiAxPT1hLmxlbmd0aD9cIlxceDI2bmJzcDtcIjpiP1wiIFwiK0NLRURJVE9SLnRvb2xzLnJlcGVhdChcIlxceDI2bmJzcDtcIixhLmxlbmd0aC0xKTpDS0VESVRPUi50b29scy5yZXBlYXQoXCJcXHgyNm5ic3A7XCIsYS5sZW5ndGgtMSkrXCIgXCJ9KSxlPWUucmVwbGFjZSgvXFxuL2csXCJcXHgzY2JyXFx4M2VcIiksZT1lLnJlcGxhY2UoL1sgXFx0XXsyLH0vZyxmdW5jdGlvbihhKXtyZXR1cm4gQ0tFRElUT1IudG9vbHMucmVwZWF0KFwiXFx4MjZuYnNwO1wiLGEubGVuZ3RoLTEpK1wiIFwifSk7aWYoYyl7dmFyIGY9Yi5jbG9uZSgpO2Yuc2V0SHRtbChlKTtcbmMuYXBwZW5kKGYpfWVsc2UgYi5zZXRIdG1sKGUpfXJldHVybiBjfHxifWZ1bmN0aW9uIHgoYSxiKXt2YXIgYz10aGlzLl8uZGVmaW5pdGlvbixkPWMuYXR0cmlidXRlcyxjPWMuc3R5bGVzLGU9aCh0aGlzKVthLmdldE5hbWUoKV0sZj1DS0VESVRPUi50b29scy5pc0VtcHR5KGQpJiZDS0VESVRPUi50b29scy5pc0VtcHR5KGMpLGc7Zm9yKGcgaW4gZClpZihcImNsYXNzXCIhPWcmJiF0aGlzLl8uZGVmaW5pdGlvbi5mdWxsTWF0Y2h8fGEuZ2V0QXR0cmlidXRlKGcpPT1wKGcsZFtnXSkpYiYmXCJkYXRhLVwiPT1nLnNsaWNlKDAsNSl8fChmPWEuaGFzQXR0cmlidXRlKGcpLGEucmVtb3ZlQXR0cmlidXRlKGcpKTtmb3IodmFyIGsgaW4gYyl0aGlzLl8uZGVmaW5pdGlvbi5mdWxsTWF0Y2gmJmEuZ2V0U3R5bGUoaykhPXAoayxjW2tdLCEwKXx8KGY9Znx8ISFhLmdldFN0eWxlKGspLGEucmVtb3ZlU3R5bGUoaykpO3EoYSxlLHpbYS5nZXROYW1lKCldKTtmJiYodGhpcy5fLmRlZmluaXRpb24uYWx3YXlzUmVtb3ZlRWxlbWVudD9cbncoYSwxKTohQ0tFRElUT1IuZHRkLiRibG9ja1thLmdldE5hbWUoKV18fHRoaXMuXy5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX0JSJiYhYS5oYXNBdHRyaWJ1dGVzKCk/dyhhKTphLnJlbmFtZU5vZGUodGhpcy5fLmVudGVyTW9kZT09Q0tFRElUT1IuRU5URVJfUD9cInBcIjpcImRpdlwiKSl9ZnVuY3Rpb24gRChhKXtmb3IodmFyIGI9aCh0aGlzKSxjPWEuZ2V0RWxlbWVudHNCeVRhZyh0aGlzLmVsZW1lbnQpLGQsZT1jLmNvdW50KCk7MDw9LS1lOylkPWMuZ2V0SXRlbShlKSxkLmlzUmVhZE9ubHkoKXx8eC5jYWxsKHRoaXMsZCwhMCk7Zm9yKHZhciBmIGluIGIpaWYoZiE9dGhpcy5lbGVtZW50KWZvcihjPWEuZ2V0RWxlbWVudHNCeVRhZyhmKSxlPWMuY291bnQoKS0xOzA8PWU7ZS0tKWQ9Yy5nZXRJdGVtKGUpLGQuaXNSZWFkT25seSgpfHxxKGQsYltmXSl9ZnVuY3Rpb24gcShhLGIsYyl7aWYoYj1iJiZiLmF0dHJpYnV0ZXMpZm9yKHZhciBkPTA7ZDxiLmxlbmd0aDtkKyspe3ZhciBlPWJbZF1bMF0sXG5mO2lmKGY9YS5nZXRBdHRyaWJ1dGUoZSkpe3ZhciBnPWJbZF1bMV07KG51bGw9PT1nfHxnLnRlc3QmJmcudGVzdChmKXx8XCJzdHJpbmdcIj09dHlwZW9mIGcmJmY9PWcpJiZhLnJlbW92ZUF0dHJpYnV0ZShlKX19Y3x8dyhhKX1mdW5jdGlvbiB3KGEsYil7aWYoIWEuaGFzQXR0cmlidXRlcygpfHxiKWlmKENLRURJVE9SLmR0ZC4kYmxvY2tbYS5nZXROYW1lKCldKXt2YXIgYz1hLmdldFByZXZpb3VzKFApLGQ9YS5nZXROZXh0KFApOyFjfHxjLnR5cGUhPUNLRURJVE9SLk5PREVfVEVYVCYmYy5pc0Jsb2NrQm91bmRhcnkoe2JyOjF9KXx8YS5hcHBlbmQoXCJiclwiLDEpOyFkfHxkLnR5cGUhPUNLRURJVE9SLk5PREVfVEVYVCYmZC5pc0Jsb2NrQm91bmRhcnkoe2JyOjF9KXx8YS5hcHBlbmQoXCJiclwiKTthLnJlbW92ZSghMCl9ZWxzZSBjPWEuZ2V0Rmlyc3QoKSxkPWEuZ2V0TGFzdCgpLGEucmVtb3ZlKCEwKSxjJiYoYy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmMubWVyZ2VTaWJsaW5ncygpLFxuZCYmIWMuZXF1YWxzKGQpJiZkLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZC5tZXJnZVNpYmxpbmdzKCkpfWZ1bmN0aW9uIEgoYSxiLGMpe3ZhciBkO2Q9YS5lbGVtZW50O1wiKlwiPT1kJiYoZD1cInNwYW5cIik7ZD1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoZCxiKTtjJiZjLmNvcHlBdHRyaWJ1dGVzKGQpO2Q9dChkLGEpO2IuZ2V0Q3VzdG9tRGF0YShcImRvY19wcm9jZXNzaW5nX3N0eWxlXCIpJiZkLmhhc0F0dHJpYnV0ZShcImlkXCIpP2QucmVtb3ZlQXR0cmlidXRlKFwiaWRcIik6Yi5zZXRDdXN0b21EYXRhKFwiZG9jX3Byb2Nlc3Npbmdfc3R5bGVcIiwxKTtyZXR1cm4gZH1mdW5jdGlvbiB0KGEsYil7dmFyIGM9Yi5fLmRlZmluaXRpb24sZD1jLmF0dHJpYnV0ZXMsYz1DS0VESVRPUi5zdHlsZS5nZXRTdHlsZVRleHQoYyk7aWYoZClmb3IodmFyIGUgaW4gZClhLnNldEF0dHJpYnV0ZShlLGRbZV0pO2MmJmEuc2V0QXR0cmlidXRlKFwic3R5bGVcIixjKTtyZXR1cm4gYX1mdW5jdGlvbiB2KGEsXG5iKXtmb3IodmFyIGMgaW4gYSlhW2NdPWFbY10ucmVwbGFjZShDLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGJbY119KX1mdW5jdGlvbiBoKGEpe2lmKGEuXy5vdmVycmlkZXMpcmV0dXJuIGEuXy5vdmVycmlkZXM7dmFyIGI9YS5fLm92ZXJyaWRlcz17fSxjPWEuXy5kZWZpbml0aW9uLm92ZXJyaWRlcztpZihjKXtDS0VESVRPUi50b29scy5pc0FycmF5KGMpfHwoYz1bY10pO2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdLGYsZztcInN0cmluZ1wiPT10eXBlb2YgZT9mPWUudG9Mb3dlckNhc2UoKTooZj1lLmVsZW1lbnQ/ZS5lbGVtZW50LnRvTG93ZXJDYXNlKCk6YS5lbGVtZW50LGc9ZS5hdHRyaWJ1dGVzKTtlPWJbZl18fChiW2ZdPXt9KTtpZihnKXt2YXIgZT1lLmF0dHJpYnV0ZXM9ZS5hdHRyaWJ1dGVzfHxbXSxoO2ZvcihoIGluIGcpZS5wdXNoKFtoLnRvTG93ZXJDYXNlKCksZ1toXV0pfX19cmV0dXJuIGJ9ZnVuY3Rpb24gcChhLGIsYyl7dmFyIGQ9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwic3BhblwiKTtcbmRbYz9cInNldFN0eWxlXCI6XCJzZXRBdHRyaWJ1dGVcIl0oYSxiKTtyZXR1cm4gZFtjP1wiZ2V0U3R5bGVcIjpcImdldEF0dHJpYnV0ZVwiXShhKX1mdW5jdGlvbiBuKGEsYil7ZnVuY3Rpb24gYyhhLGIpe3JldHVyblwiZm9udC1mYW1pbHlcIj09Yi50b0xvd2VyQ2FzZSgpP2EucmVwbGFjZSgvW1wiJ10vZyxcIlwiKTphfVwic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT1DS0VESVRPUi50b29scy5wYXJzZUNzc1RleHQoYSkpO1wic3RyaW5nXCI9PXR5cGVvZiBiJiYoYj1DS0VESVRPUi50b29scy5wYXJzZUNzc1RleHQoYiwhMCkpO2Zvcih2YXIgZCBpbiBhKWlmKCEoZCBpbiBiKXx8YyhiW2RdLGQpIT1jKGFbZF0sZCkmJlwiaW5oZXJpdFwiIT1hW2RdJiZcImluaGVyaXRcIiE9YltkXSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiB5KGEsYixjKXt2YXIgZD1hLmRvY3VtZW50LGU9YS5nZXRSYW5nZXMoKTtiPWI/dGhpcy5yZW1vdmVGcm9tUmFuZ2U6dGhpcy5hcHBseVRvUmFuZ2U7Zm9yKHZhciBmLGc9ZS5jcmVhdGVJdGVyYXRvcigpO2Y9XG5nLmdldE5leHRSYW5nZSgpOyliLmNhbGwodGhpcyxmLGMpO2Euc2VsZWN0UmFuZ2VzKGUpO2QucmVtb3ZlQ3VzdG9tRGF0YShcImRvY19wcm9jZXNzaW5nX3N0eWxlXCIpfXZhciB6PXthZGRyZXNzOjEsZGl2OjEsaDE6MSxoMjoxLGgzOjEsaDQ6MSxoNToxLGg2OjEscDoxLHByZToxLHNlY3Rpb246MSxoZWFkZXI6MSxmb290ZXI6MSxuYXY6MSxhcnRpY2xlOjEsYXNpZGU6MSxmaWd1cmU6MSxkaWFsb2c6MSxoZ3JvdXA6MSx0aW1lOjEsbWV0ZXI6MSxtZW51OjEsY29tbWFuZDoxLGtleWdlbjoxLG91dHB1dDoxLHByb2dyZXNzOjEsZGV0YWlsczoxLGRhdGFncmlkOjEsZGF0YWxpc3Q6MX0sSj17YToxLGJsb2NrcXVvdGU6MSxlbWJlZDoxLGhyOjEsaW1nOjEsbGk6MSxvYmplY3Q6MSxvbDoxLHRhYmxlOjEsdGQ6MSx0cjoxLHRoOjEsdWw6MSxkbDoxLGR0OjEsZGQ6MSxmb3JtOjEsYXVkaW86MSx2aWRlbzoxfSxFPS9cXHMqKD86O1xccyp8JCkvLEM9LyNcXCgoLis/KVxcKS9nLFk9Q0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyaygwLFxuMSksUD1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKDEpO0NLRURJVE9SLnN0eWxlPWZ1bmN0aW9uKGEsYil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEudHlwZSlyZXR1cm4gbmV3IENLRURJVE9SLnN0eWxlLmN1c3RvbUhhbmRsZXJzW2EudHlwZV0oYSk7dmFyIGM9YS5hdHRyaWJ1dGVzO2MmJmMuc3R5bGUmJihhLnN0eWxlcz1DS0VESVRPUi50b29scy5leHRlbmQoe30sYS5zdHlsZXMsQ0tFRElUT1IudG9vbHMucGFyc2VDc3NUZXh0KGMuc3R5bGUpKSxkZWxldGUgYy5zdHlsZSk7YiYmKGE9Q0tFRElUT1IudG9vbHMuY2xvbmUoYSksdihhLmF0dHJpYnV0ZXMsYiksdihhLnN0eWxlcyxiKSk7Yz10aGlzLmVsZW1lbnQ9YS5lbGVtZW50P1wic3RyaW5nXCI9PXR5cGVvZiBhLmVsZW1lbnQ/YS5lbGVtZW50LnRvTG93ZXJDYXNlKCk6YS5lbGVtZW50OlwiKlwiO3RoaXMudHlwZT1hLnR5cGV8fCh6W2NdP0NLRURJVE9SLlNUWUxFX0JMT0NLOkpbY10/Q0tFRElUT1IuU1RZTEVfT0JKRUNUOlxuQ0tFRElUT1IuU1RZTEVfSU5MSU5FKTtcIm9iamVjdFwiPT10eXBlb2YgdGhpcy5lbGVtZW50JiYodGhpcy50eXBlPUNLRURJVE9SLlNUWUxFX09CSkVDVCk7dGhpcy5fPXtkZWZpbml0aW9uOmF9fTtDS0VESVRPUi5zdHlsZS5wcm90b3R5cGU9e2FwcGx5OmZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBDS0VESVRPUi5kb20uZG9jdW1lbnQpcmV0dXJuIHkuY2FsbCh0aGlzLGEuZ2V0U2VsZWN0aW9uKCkpO2lmKHRoaXMuY2hlY2tBcHBsaWNhYmxlKGEuZWxlbWVudFBhdGgoKSxhKSl7dmFyIGI9dGhpcy5fLmVudGVyTW9kZTtifHwodGhpcy5fLmVudGVyTW9kZT1hLmFjdGl2ZUVudGVyTW9kZSk7eS5jYWxsKHRoaXMsYS5nZXRTZWxlY3Rpb24oKSwwLGEpO3RoaXMuXy5lbnRlck1vZGU9Yn19LHJlbW92ZTpmdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLmRvY3VtZW50KXJldHVybiB5LmNhbGwodGhpcyxhLmdldFNlbGVjdGlvbigpLDEpO2lmKHRoaXMuY2hlY2tBcHBsaWNhYmxlKGEuZWxlbWVudFBhdGgoKSxcbmEpKXt2YXIgYj10aGlzLl8uZW50ZXJNb2RlO2J8fCh0aGlzLl8uZW50ZXJNb2RlPWEuYWN0aXZlRW50ZXJNb2RlKTt5LmNhbGwodGhpcyxhLmdldFNlbGVjdGlvbigpLDEsYSk7dGhpcy5fLmVudGVyTW9kZT1ifX0sYXBwbHlUb1JhbmdlOmZ1bmN0aW9uKGEpe3RoaXMuYXBwbHlUb1JhbmdlPXRoaXMudHlwZT09Q0tFRElUT1IuU1RZTEVfSU5MSU5FP2I6dGhpcy50eXBlPT1DS0VESVRPUi5TVFlMRV9CTE9DSz9sOnRoaXMudHlwZT09Q0tFRElUT1IuU1RZTEVfT0JKRUNUP2c6bnVsbDtyZXR1cm4gdGhpcy5hcHBseVRvUmFuZ2UoYSl9LHJlbW92ZUZyb21SYW5nZTpmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUZyb21SYW5nZT10aGlzLnR5cGU9PUNLRURJVE9SLlNUWUxFX0lOTElORT9jOnRoaXMudHlwZT09Q0tFRElUT1IuU1RZTEVfQkxPQ0s/bTp0aGlzLnR5cGU9PUNLRURJVE9SLlNUWUxFX09CSkVDVD9rOm51bGw7cmV0dXJuIHRoaXMucmVtb3ZlRnJvbVJhbmdlKGEpfSxhcHBseVRvT2JqZWN0OmZ1bmN0aW9uKGEpe3QoYSxcbnRoaXMpfSxjaGVja0FjdGl2ZTpmdW5jdGlvbihhLGIpe3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgQ0tFRElUT1IuU1RZTEVfQkxPQ0s6cmV0dXJuIHRoaXMuY2hlY2tFbGVtZW50UmVtb3ZhYmxlKGEuYmxvY2t8fGEuYmxvY2tMaW1pdCwhMCxiKTtjYXNlIENLRURJVE9SLlNUWUxFX09CSkVDVDpjYXNlIENLRURJVE9SLlNUWUxFX0lOTElORTpmb3IodmFyIGM9YS5lbGVtZW50cyxkPTAsZTtkPGMubGVuZ3RoO2QrKylpZihlPWNbZF0sdGhpcy50eXBlIT1DS0VESVRPUi5TVFlMRV9JTkxJTkV8fGUhPWEuYmxvY2smJmUhPWEuYmxvY2tMaW1pdCl7aWYodGhpcy50eXBlPT1DS0VESVRPUi5TVFlMRV9PQkpFQ1Qpe3ZhciBmPWUuZ2V0TmFtZSgpO2lmKCEoXCJzdHJpbmdcIj09dHlwZW9mIHRoaXMuZWxlbWVudD9mPT10aGlzLmVsZW1lbnQ6ZiBpbiB0aGlzLmVsZW1lbnQpKWNvbnRpbnVlfWlmKHRoaXMuY2hlY2tFbGVtZW50UmVtb3ZhYmxlKGUsITAsYikpcmV0dXJuITB9fXJldHVybiExfSxjaGVja0FwcGxpY2FibGU6ZnVuY3Rpb24oYSxcbmIsYyl7YiYmYiBpbnN0YW5jZW9mIENLRURJVE9SLmZpbHRlciYmKGM9Yik7aWYoYyYmIWMuY2hlY2sodGhpcykpcmV0dXJuITE7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSBDS0VESVRPUi5TVFlMRV9PQkpFQ1Q6cmV0dXJuISFhLmNvbnRhaW5zKHRoaXMuZWxlbWVudCk7Y2FzZSBDS0VESVRPUi5TVFlMRV9CTE9DSzpyZXR1cm4hIWEuYmxvY2tMaW1pdC5nZXREdGQoKVt0aGlzLmVsZW1lbnRdfXJldHVybiEwfSxjaGVja0VsZW1lbnRNYXRjaDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuXy5kZWZpbml0aW9uO2lmKCFhfHwhYy5pZ25vcmVSZWFkb25seSYmYS5pc1JlYWRPbmx5KCkpcmV0dXJuITE7dmFyIGQ9YS5nZXROYW1lKCk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHRoaXMuZWxlbWVudD9kPT10aGlzLmVsZW1lbnQ6ZCBpbiB0aGlzLmVsZW1lbnQpe2lmKCFiJiYhYS5oYXNBdHRyaWJ1dGVzKCkpcmV0dXJuITA7aWYoZD1jLl9BQyljPWQ7ZWxzZXt2YXIgZD17fSxlPTAsZj1jLmF0dHJpYnV0ZXM7XG5pZihmKWZvcih2YXIgZyBpbiBmKWUrKyxkW2ddPWZbZ107aWYoZz1DS0VESVRPUi5zdHlsZS5nZXRTdHlsZVRleHQoYykpZC5zdHlsZXx8ZSsrLGQuc3R5bGU9ZztkLl9sZW5ndGg9ZTtjPWMuX0FDPWR9aWYoYy5fbGVuZ3RoKXtmb3IodmFyIGggaW4gYylpZihcIl9sZW5ndGhcIiE9aClpZihkPWEuZ2V0QXR0cmlidXRlKGgpfHxcIlwiLFwic3R5bGVcIj09aD9uKGNbaF0sZCk6Y1toXT09ZCl7aWYoIWIpcmV0dXJuITB9ZWxzZSBpZihiKXJldHVybiExO2lmKGIpcmV0dXJuITB9ZWxzZSByZXR1cm4hMH1yZXR1cm4hMX0sY2hlY2tFbGVtZW50UmVtb3ZhYmxlOmZ1bmN0aW9uKGEsYixjKXtpZih0aGlzLmNoZWNrRWxlbWVudE1hdGNoKGEsYixjKSlyZXR1cm4hMDtpZihiPWgodGhpcylbYS5nZXROYW1lKCldKXt2YXIgZDtpZighKGI9Yi5hdHRyaWJ1dGVzKSlyZXR1cm4hMDtmb3IoYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGQ9YltjXVswXSxkPWEuZ2V0QXR0cmlidXRlKGQpKXt2YXIgZT1iW2NdWzFdO1xuaWYobnVsbD09PWUpcmV0dXJuITA7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe2lmKGQ9PWUpcmV0dXJuITB9ZWxzZSBpZihlLnRlc3QoZCkpcmV0dXJuITB9fXJldHVybiExfSxidWlsZFByZXZpZXc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fLmRlZmluaXRpb24sYz1bXSxkPWIuZWxlbWVudDtcImJkb1wiPT1kJiYoZD1cInNwYW5cIik7dmFyIGM9W1wiXFx4M2NcIixkXSxlPWIuYXR0cmlidXRlcztpZihlKWZvcih2YXIgZiBpbiBlKWMucHVzaChcIiBcIixmLCdcXHgzZFwiJyxlW2ZdLCdcIicpOyhlPUNLRURJVE9SLnN0eWxlLmdldFN0eWxlVGV4dChiKSkmJmMucHVzaCgnIHN0eWxlXFx4M2RcIicsZSwnXCInKTtjLnB1c2goXCJcXHgzZVwiLGF8fGIubmFtZSxcIlxceDNjL1wiLGQsXCJcXHgzZVwiKTtyZXR1cm4gYy5qb2luKFwiXCIpfSxnZXREZWZpbml0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5kZWZpbml0aW9ufX07Q0tFRElUT1Iuc3R5bGUuZ2V0U3R5bGVUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiPWEuX1NUO2lmKGIpcmV0dXJuIGI7XG52YXIgYj1hLnN0eWxlcyxjPWEuYXR0cmlidXRlcyYmYS5hdHRyaWJ1dGVzLnN0eWxlfHxcIlwiLGQ9XCJcIjtjLmxlbmd0aCYmKGM9Yy5yZXBsYWNlKEUsXCI7XCIpKTtmb3IodmFyIGUgaW4gYil7dmFyIGY9YltlXSxnPShlK1wiOlwiK2YpLnJlcGxhY2UoRSxcIjtcIik7XCJpbmhlcml0XCI9PWY/ZCs9ZzpjKz1nfWMubGVuZ3RoJiYoYz1DS0VESVRPUi50b29scy5ub3JtYWxpemVDc3NUZXh0KGMsITApKTtyZXR1cm4gYS5fU1Q9YytkfTtDS0VESVRPUi5zdHlsZS5jdXN0b21IYW5kbGVycz17fTtDS0VESVRPUi5zdHlsZS5hZGRDdXN0b21IYW5kbGVyPWZ1bmN0aW9uKGEpe3ZhciBiPWZ1bmN0aW9uKGEpe3RoaXMuXz17ZGVmaW5pdGlvbjphfTt0aGlzLnNldHVwJiZ0aGlzLnNldHVwKGEpfTtiLnByb3RvdHlwZT1DS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IudG9vbHMucHJvdG90eXBlZENvcHkoQ0tFRElUT1Iuc3R5bGUucHJvdG90eXBlKSx7YXNzaWduZWRUbzpDS0VESVRPUi5TVFlMRV9PQkpFQ1R9LFxuYSwhMCk7cmV0dXJuIHRoaXMuY3VzdG9tSGFuZGxlcnNbYS50eXBlXT1ifTt2YXIgTz1DS0VESVRPUi5QT1NJVElPTl9QUkVDRURJTkd8Q0tFRElUT1IuUE9TSVRJT05fSURFTlRJQ0FMfENLRURJVE9SLlBPU0lUSU9OX0lTX0NPTlRBSU5FRCxOPUNLRURJVE9SLlBPU0lUSU9OX0ZPTExPV0lOR3xDS0VESVRPUi5QT1NJVElPTl9JREVOVElDQUx8Q0tFRElUT1IuUE9TSVRJT05fSVNfQ09OVEFJTkVEfSkoKTtDS0VESVRPUi5zdHlsZUNvbW1hbmQ9ZnVuY3Rpb24oYSxkKXt0aGlzLnJlcXVpcmVkQ29udGVudD10aGlzLmFsbG93ZWRDb250ZW50PXRoaXMuc3R5bGU9YTtDS0VESVRPUi50b29scy5leHRlbmQodGhpcyxkLCEwKX07XG5DS0VESVRPUi5zdHlsZUNvbW1hbmQucHJvdG90eXBlLmV4ZWM9ZnVuY3Rpb24oYSl7YS5mb2N1cygpO3RoaXMuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09GRj9hLmFwcGx5U3R5bGUodGhpcy5zdHlsZSk6dGhpcy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfT04mJmEucmVtb3ZlU3R5bGUodGhpcy5zdHlsZSl9O0NLRURJVE9SLnN0eWxlc1NldD1uZXcgQ0tFRElUT1IucmVzb3VyY2VNYW5hZ2VyKFwiXCIsXCJzdHlsZXNTZXRcIik7Q0tFRElUT1IuYWRkU3R5bGVzU2V0PUNLRURJVE9SLnRvb2xzLmJpbmQoQ0tFRElUT1Iuc3R5bGVzU2V0LmFkZCxDS0VESVRPUi5zdHlsZXNTZXQpO0NLRURJVE9SLmxvYWRTdHlsZXNTZXQ9ZnVuY3Rpb24oYSxkLGIpe0NLRURJVE9SLnN0eWxlc1NldC5hZGRFeHRlcm5hbChhLGQsXCJcIik7Q0tFRElUT1Iuc3R5bGVzU2V0LmxvYWQoYSxiKX07XG5DS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZSx7YXR0YWNoU3R5bGVTdGF0ZUNoYW5nZTpmdW5jdGlvbihhLGQpe3ZhciBiPXRoaXMuXy5zdHlsZVN0YXRlQ2hhbmdlQ2FsbGJhY2tzO2J8fChiPXRoaXMuXy5zdHlsZVN0YXRlQ2hhbmdlQ2FsbGJhY2tzPVtdLHRoaXMub24oXCJzZWxlY3Rpb25DaGFuZ2VcIixmdW5jdGlvbihhKXtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGc9YltkXSxrPWcuc3R5bGUuY2hlY2tBY3RpdmUoYS5kYXRhLnBhdGgsdGhpcyk/Q0tFRElUT1IuVFJJU1RBVEVfT046Q0tFRElUT1IuVFJJU1RBVEVfT0ZGO2cuZm4uY2FsbCh0aGlzLGspfX0pKTtiLnB1c2goe3N0eWxlOmEsZm46ZH0pfSxhcHBseVN0eWxlOmZ1bmN0aW9uKGEpe2EuYXBwbHkodGhpcyl9LHJlbW92ZVN0eWxlOmZ1bmN0aW9uKGEpe2EucmVtb3ZlKHRoaXMpfSxnZXRTdHlsZXNTZXQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5fLnN0eWxlc0RlZmluaXRpb25zKWEodGhpcy5fLnN0eWxlc0RlZmluaXRpb25zKTtcbmVsc2V7dmFyIGQ9dGhpcyxiPWQuY29uZmlnLnN0eWxlc0NvbWJvX3N0eWxlc1NldHx8ZC5jb25maWcuc3R5bGVzU2V0O2lmKCExPT09YilhKG51bGwpO2Vsc2UgaWYoYiBpbnN0YW5jZW9mIEFycmF5KWQuXy5zdHlsZXNEZWZpbml0aW9ucz1iLGEoYik7ZWxzZXtifHwoYj1cImRlZmF1bHRcIik7dmFyIGI9Yi5zcGxpdChcIjpcIiksYz1iWzBdO0NLRURJVE9SLnN0eWxlc1NldC5hZGRFeHRlcm5hbChjLGJbMV0/Yi5zbGljZSgxKS5qb2luKFwiOlwiKTpDS0VESVRPUi5nZXRVcmwoXCJzdHlsZXMuanNcIiksXCJcIik7Q0tFRElUT1Iuc3R5bGVzU2V0LmxvYWQoYyxmdW5jdGlvbihiKXtkLl8uc3R5bGVzRGVmaW5pdGlvbnM9YltjXTthKGQuXy5zdHlsZXNEZWZpbml0aW9ucyl9KX19fX0pO1xuQ0tFRElUT1IuZG9tLmNvbW1lbnQ9ZnVuY3Rpb24oYSxkKXtcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9KGQ/ZC4kOmRvY3VtZW50KS5jcmVhdGVDb21tZW50KGEpKTtDS0VESVRPUi5kb20uZG9tT2JqZWN0LmNhbGwodGhpcyxhKX07Q0tFRElUT1IuZG9tLmNvbW1lbnQucHJvdG90eXBlPW5ldyBDS0VESVRPUi5kb20ubm9kZTtDS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuZG9tLmNvbW1lbnQucHJvdG90eXBlLHt0eXBlOkNLRURJVE9SLk5PREVfQ09NTUVOVCxnZXRPdXRlckh0bWw6ZnVuY3Rpb24oKXtyZXR1cm5cIlxceDNjIS0tXCIrdGhpcy4kLm5vZGVWYWx1ZStcIi0tXFx4M2VcIn19KTtcInVzZSBzdHJpY3RcIjtcbihmdW5jdGlvbigpe3ZhciBhPXt9LGQ9e30sYjtmb3IoYiBpbiBDS0VESVRPUi5kdGQuJGJsb2NrTGltaXQpYiBpbiBDS0VESVRPUi5kdGQuJGxpc3R8fChhW2JdPTEpO2ZvcihiIGluIENLRURJVE9SLmR0ZC4kYmxvY2spYiBpbiBDS0VESVRPUi5kdGQuJGJsb2NrTGltaXR8fGIgaW4gQ0tFRElUT1IuZHRkLiRlbXB0eXx8KGRbYl09MSk7Q0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoPWZ1bmN0aW9uKGIsZil7dmFyIGc9bnVsbCxrPW51bGwsbD1bXSxtPWIsdTtmPWZ8fGIuZ2V0RG9jdW1lbnQoKS5nZXRCb2R5KCk7ZG8gaWYobS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpe2wucHVzaChtKTtpZighdGhpcy5sYXN0RWxlbWVudCYmKHRoaXMubGFzdEVsZW1lbnQ9bSxtLmlzKENLRURJVE9SLmR0ZC4kb2JqZWN0KXx8XCJmYWxzZVwiPT1tLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSkpY29udGludWU7aWYobS5lcXVhbHMoZikpYnJlYWs7aWYoIWsmJih1PW0uZ2V0TmFtZSgpLFxuXCJ0cnVlXCI9PW0uZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpP2s9bTohZyYmZFt1XSYmKGc9bSksYVt1XSkpe2lmKHU9IWcmJlwiZGl2XCI9PXUpe2E6e3U9bS5nZXRDaGlsZHJlbigpO2Zvcih2YXIgZT0wLEE9dS5jb3VudCgpO2U8QTtlKyspe3ZhciByPXUuZ2V0SXRlbShlKTtpZihyLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmQ0tFRElUT1IuZHRkLiRibG9ja1tyLmdldE5hbWUoKV0pe3U9ITA7YnJlYWsgYX19dT0hMX11PSF1fXU/Zz1tOms9bX19d2hpbGUobT1tLmdldFBhcmVudCgpKTtrfHwoaz1mKTt0aGlzLmJsb2NrPWc7dGhpcy5ibG9ja0xpbWl0PWs7dGhpcy5yb290PWY7dGhpcy5lbGVtZW50cz1sfX0pKCk7XG5DS0VESVRPUi5kb20uZWxlbWVudFBhdGgucHJvdG90eXBlPXtjb21wYXJlOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMuZWxlbWVudHM7YT1hJiZhLmVsZW1lbnRzO2lmKCFhfHxkLmxlbmd0aCE9YS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBiPTA7YjxkLmxlbmd0aDtiKyspaWYoIWRbYl0uZXF1YWxzKGFbYl0pKXJldHVybiExO3JldHVybiEwfSxjb250YWluczpmdW5jdGlvbihhLGQsYil7dmFyIGM7XCJzdHJpbmdcIj09dHlwZW9mIGEmJihjPWZ1bmN0aW9uKGIpe3JldHVybiBiLmdldE5hbWUoKT09YX0pO2EgaW5zdGFuY2VvZiBDS0VESVRPUi5kb20uZWxlbWVudD9jPWZ1bmN0aW9uKGIpe3JldHVybiBiLmVxdWFscyhhKX06Q0tFRElUT1IudG9vbHMuaXNBcnJheShhKT9jPWZ1bmN0aW9uKGIpe3JldHVybi0xPENLRURJVE9SLnRvb2xzLmluZGV4T2YoYSxiLmdldE5hbWUoKSl9OlwiZnVuY3Rpb25cIj09dHlwZW9mIGE/Yz1hOlwib2JqZWN0XCI9PXR5cGVvZiBhJiYoYz1mdW5jdGlvbihiKXtyZXR1cm4gYi5nZXROYW1lKClpblxuYX0pO3ZhciBmPXRoaXMuZWxlbWVudHMsZz1mLmxlbmd0aDtkJiZnLS07YiYmKGY9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZiwwKSxmLnJldmVyc2UoKSk7Zm9yKGQ9MDtkPGc7ZCsrKWlmKGMoZltkXSkpcmV0dXJuIGZbZF07cmV0dXJuIG51bGx9LGlzQ29udGV4dEZvcjpmdW5jdGlvbihhKXt2YXIgZDtyZXR1cm4gYSBpbiBDS0VESVRPUi5kdGQuJGJsb2NrPyhkPXRoaXMuY29udGFpbnMoQ0tFRElUT1IuZHRkLiRpbnRlcm1lZGlhdGUpfHx0aGlzLnJvb3QuZXF1YWxzKHRoaXMuYmxvY2spJiZ0aGlzLmJsb2NrfHx0aGlzLmJsb2NrTGltaXQsISFkLmdldER0ZCgpW2FdKTohMH0sZGlyZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuYmxvY2t8fHRoaXMuYmxvY2tMaW1pdHx8dGhpcy5yb290KS5nZXREaXJlY3Rpb24oMSl9fTtcbkNLRURJVE9SLmRvbS50ZXh0PWZ1bmN0aW9uKGEsZCl7XCJzdHJpbmdcIj09dHlwZW9mIGEmJihhPShkP2QuJDpkb2N1bWVudCkuY3JlYXRlVGV4dE5vZGUoYSkpO3RoaXMuJD1hfTtDS0VESVRPUi5kb20udGV4dC5wcm90b3R5cGU9bmV3IENLRURJVE9SLmRvbS5ub2RlO1xuQ0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmRvbS50ZXh0LnByb3RvdHlwZSx7dHlwZTpDS0VESVRPUi5OT0RFX1RFWFQsZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJC5ub2RlVmFsdWUubGVuZ3RofSxnZXRUZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJC5ub2RlVmFsdWV9LHNldFRleHQ6ZnVuY3Rpb24oYSl7dGhpcy4kLm5vZGVWYWx1ZT1hfSxzcGxpdDpmdW5jdGlvbihhKXt2YXIgZD10aGlzLiQucGFyZW50Tm9kZSxiPWQuY2hpbGROb2Rlcy5sZW5ndGgsYz10aGlzLmdldExlbmd0aCgpLGY9dGhpcy5nZXREb2N1bWVudCgpLGc9bmV3IENLRURJVE9SLmRvbS50ZXh0KHRoaXMuJC5zcGxpdFRleHQoYSksZik7ZC5jaGlsZE5vZGVzLmxlbmd0aD09YiYmKGE+PWM/KGc9Zi5jcmVhdGVUZXh0KFwiXCIpLGcuaW5zZXJ0QWZ0ZXIodGhpcykpOihhPWYuY3JlYXRlVGV4dChcIlwiKSxhLmluc2VydEFmdGVyKGcpLGEucmVtb3ZlKCkpKTtyZXR1cm4gZ30sc3Vic3RyaW5nOmZ1bmN0aW9uKGEsXG5kKXtyZXR1cm5cIm51bWJlclwiIT10eXBlb2YgZD90aGlzLiQubm9kZVZhbHVlLnN1YnN0cihhKTp0aGlzLiQubm9kZVZhbHVlLnN1YnN0cmluZyhhLGQpfX0pO1xuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGMsZCl7dmFyIGc9YS5zZXJpYWxpemFibGUsaz1jW2Q/XCJlbmRDb250YWluZXJcIjpcInN0YXJ0Q29udGFpbmVyXCJdLGw9ZD9cImVuZE9mZnNldFwiOlwic3RhcnRPZmZzZXRcIixtPWc/Yy5kb2N1bWVudC5nZXRCeUlkKGEuc3RhcnROb2RlKTphLnN0YXJ0Tm9kZTthPWc/Yy5kb2N1bWVudC5nZXRCeUlkKGEuZW5kTm9kZSk6YS5lbmROb2RlO2suZXF1YWxzKG0uZ2V0UHJldmlvdXMoKSk/KGMuc3RhcnRPZmZzZXQ9Yy5zdGFydE9mZnNldC1rLmdldExlbmd0aCgpLWEuZ2V0UHJldmlvdXMoKS5nZXRMZW5ndGgoKSxrPWEuZ2V0TmV4dCgpKTprLmVxdWFscyhhLmdldFByZXZpb3VzKCkpJiYoYy5zdGFydE9mZnNldC09ay5nZXRMZW5ndGgoKSxrPWEuZ2V0TmV4dCgpKTtrLmVxdWFscyhtLmdldFBhcmVudCgpKSYmY1tsXSsrO2suZXF1YWxzKGEuZ2V0UGFyZW50KCkpJiZjW2xdKys7Y1tkP1wiZW5kQ29udGFpbmVyXCI6XCJzdGFydENvbnRhaW5lclwiXT1rO3JldHVybiBjfVxuQ0tFRElUT1IuZG9tLnJhbmdlTGlzdD1mdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLnJhbmdlTGlzdClyZXR1cm4gYTthP2EgaW5zdGFuY2VvZiBDS0VESVRPUi5kb20ucmFuZ2UmJihhPVthXSk6YT1bXTtyZXR1cm4gQ0tFRElUT1IudG9vbHMuZXh0ZW5kKGEsZCl9O3ZhciBkPXtjcmVhdGVJdGVyYXRvcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYz1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKCksZD1bXSxnO3JldHVybntnZXROZXh0UmFuZ2U6ZnVuY3Rpb24oayl7Zz12b2lkIDA9PT1nPzA6ZysxO3ZhciBsPWFbZ107aWYobCYmMTxhLmxlbmd0aCl7aWYoIWcpZm9yKHZhciBtPWEubGVuZ3RoLTE7MDw9bTttLS0pZC51bnNoaWZ0KGFbbV0uY3JlYXRlQm9va21hcmsoITApKTtpZihrKWZvcih2YXIgdT0wO2FbZyt1KzFdOyl7dmFyIGU9bC5kb2N1bWVudDtrPTA7bT1lLmdldEJ5SWQoZFt1XS5lbmROb2RlKTtmb3IoZT1lLmdldEJ5SWQoZFt1KzFdLnN0YXJ0Tm9kZSk7Oyl7bT1cbm0uZ2V0TmV4dFNvdXJjZU5vZGUoITEpO2lmKGUuZXF1YWxzKG0pKWs9MTtlbHNlIGlmKGMobSl8fG0udHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZtLmlzQmxvY2tCb3VuZGFyeSgpKWNvbnRpbnVlO2JyZWFrfWlmKCFrKWJyZWFrO3UrK31mb3IobC5tb3ZlVG9Cb29rbWFyayhkLnNoaWZ0KCkpO3UtLTspbT1hWysrZ10sbS5tb3ZlVG9Cb29rbWFyayhkLnNoaWZ0KCkpLGwuc2V0RW5kKG0uZW5kQ29udGFpbmVyLG0uZW5kT2Zmc2V0KX1yZXR1cm4gbH19fSxjcmVhdGVCb29rbWFya3M6ZnVuY3Rpb24oYil7Zm9yKHZhciBjPVtdLGQsZz0wO2c8dGhpcy5sZW5ndGg7ZysrKXtjLnB1c2goZD10aGlzW2ddLmNyZWF0ZUJvb2ttYXJrKGIsITApKTtmb3IodmFyIGs9ZysxO2s8dGhpcy5sZW5ndGg7aysrKXRoaXNba109YShkLHRoaXNba10pLHRoaXNba109YShkLHRoaXNba10sITApfXJldHVybiBjfSxjcmVhdGVCb29rbWFya3MyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYz1bXSxkPTA7ZDxcbnRoaXMubGVuZ3RoO2QrKyljLnB1c2godGhpc1tkXS5jcmVhdGVCb29rbWFyazIoYSkpO3JldHVybiBjfSxtb3ZlVG9Cb29rbWFya3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPTA7Yzx0aGlzLmxlbmd0aDtjKyspdGhpc1tjXS5tb3ZlVG9Cb29rbWFyayhhW2NdKX19fSkoKTtcbihmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gQ0tFRElUT1IuZ2V0VXJsKENLRURJVE9SLnNraW5OYW1lLnNwbGl0KFwiLFwiKVsxXXx8XCJza2lucy9cIitDS0VESVRPUi5za2luTmFtZS5zcGxpdChcIixcIilbMF0rXCIvXCIpfWZ1bmN0aW9uIGQoYil7dmFyIGM9Q0tFRElUT1Iuc2tpbltcInVhX1wiK2JdLGQ9Q0tFRElUT1IuZW52O2lmKGMpZm9yKHZhciBjPWMuc3BsaXQoXCIsXCIpLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT5iPy0xOjF9KSxmPTAsZztmPGMubGVuZ3RoO2YrKylpZihnPWNbZl0sZC5pZSYmKGcucmVwbGFjZSgvXmllLyxcIlwiKT09ZC52ZXJzaW9ufHxkLnF1aXJrcyYmXCJpZXF1aXJrc1wiPT1nKSYmKGc9XCJpZVwiKSxkW2ddKXtiKz1cIl9cIitjW2ZdO2JyZWFrfXJldHVybiBDS0VESVRPUi5nZXRVcmwoYSgpK2IrXCIuY3NzXCIpfWZ1bmN0aW9uIGIoYSxiKXtnW2FdfHwoQ0tFRElUT1IuZG9jdW1lbnQuYXBwZW5kU3R5bGVTaGVldChkKGEpKSxnW2FdPTEpO2ImJmIoKX1mdW5jdGlvbiBjKGEpe3ZhciBiPVxuYS5nZXRCeUlkKGspO2J8fChiPWEuZ2V0SGVhZCgpLmFwcGVuZChcInN0eWxlXCIpLGIuc2V0QXR0cmlidXRlKFwiaWRcIixrKSxiLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInRleHQvY3NzXCIpKTtyZXR1cm4gYn1mdW5jdGlvbiBmKGEsYixjKXt2YXIgZCxmLGc7aWYoQ0tFRElUT1IuZW52LndlYmtpdClmb3IoYj1iLnNwbGl0KFwifVwiKS5zbGljZSgwLC0xKSxmPTA7ZjxiLmxlbmd0aDtmKyspYltmXT1iW2ZdLnNwbGl0KFwie1wiKTtmb3IodmFyIGs9MDtrPGEubGVuZ3RoO2srKylpZihDS0VESVRPUi5lbnYud2Via2l0KWZvcihmPTA7ZjxiLmxlbmd0aDtmKyspe2c9YltmXVsxXTtmb3IoZD0wO2Q8Yy5sZW5ndGg7ZCsrKWc9Zy5yZXBsYWNlKGNbZF1bMF0sY1tkXVsxXSk7YVtrXS4kLnNoZWV0LmFkZFJ1bGUoYltmXVswXSxnKX1lbHNle2c9Yjtmb3IoZD0wO2Q8Yy5sZW5ndGg7ZCsrKWc9Zy5yZXBsYWNlKGNbZF1bMF0sY1tkXVsxXSk7Q0tFRElUT1IuZW52LmllJiYxMT5DS0VESVRPUi5lbnYudmVyc2lvbj9cbmFba10uJC5zdHlsZVNoZWV0LmNzc1RleHQrPWc6YVtrXS4kLmlubmVySFRNTCs9Z319dmFyIGc9e307Q0tFRElUT1Iuc2tpbj17cGF0aDphLGxvYWRQYXJ0OmZ1bmN0aW9uKGMsZCl7Q0tFRElUT1Iuc2tpbi5uYW1lIT1DS0VESVRPUi5za2luTmFtZS5zcGxpdChcIixcIilbMF0/Q0tFRElUT1Iuc2NyaXB0TG9hZGVyLmxvYWQoQ0tFRElUT1IuZ2V0VXJsKGEoKStcInNraW4uanNcIiksZnVuY3Rpb24oKXtiKGMsZCl9KTpiKGMsZCl9LGdldFBhdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIENLRURJVE9SLmdldFVybChkKGEpKX0saWNvbnM6e30sYWRkSWNvbjpmdW5jdGlvbihhLGIsYyxkKXthPWEudG9Mb3dlckNhc2UoKTt0aGlzLmljb25zW2FdfHwodGhpcy5pY29uc1thXT17cGF0aDpiLG9mZnNldDpjfHwwLGJnc2l6ZTpkfHxcIjE2cHhcIn0pfSxnZXRJY29uU3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCxmKXt2YXIgZzthJiYoYT1hLnRvTG93ZXJDYXNlKCksYiYmKGc9dGhpcy5pY29uc1thK1wiLXJ0bFwiXSksXG5nfHwoZz10aGlzLmljb25zW2FdKSk7YT1jfHxnJiZnLnBhdGh8fFwiXCI7ZD1kfHxnJiZnLm9mZnNldDtmPWZ8fGcmJmcuYmdzaXplfHxcIjE2cHhcIjthJiYoYT1hLnJlcGxhY2UoLycvZyxcIlxcXFwnXCIpKTtyZXR1cm4gYSYmXCJiYWNrZ3JvdW5kLWltYWdlOnVybCgnXCIrQ0tFRElUT1IuZ2V0VXJsKGEpK1wiJyk7YmFja2dyb3VuZC1wb3NpdGlvbjowIFwiK2QrXCJweDtiYWNrZ3JvdW5kLXNpemU6XCIrZitcIjtcIn19O0NLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLHtnZXRVaUNvbG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudWlDb2xvcn0sc2V0VWlDb2xvcjpmdW5jdGlvbihhKXt2YXIgYj1jKENLRURJVE9SLmRvY3VtZW50KTtyZXR1cm4odGhpcy5zZXRVaUNvbG9yPWZ1bmN0aW9uKGEpe3RoaXMudWlDb2xvcj1hO3ZhciBjPUNLRURJVE9SLnNraW4uY2hhbWVsZW9uLGQ9XCJcIixnPVwiXCI7XCJmdW5jdGlvblwiPT10eXBlb2YgYyYmKGQ9Yyh0aGlzLFwiZWRpdG9yXCIpLGc9XG5jKHRoaXMsXCJwYW5lbFwiKSk7YT1bW20sYV1dO2YoW2JdLGQsYSk7ZihsLGcsYSl9KS5jYWxsKHRoaXMsYSl9fSk7dmFyIGs9XCJja2VfdWlfY29sb3JcIixsPVtdLG09L1xcJGNvbG9yL2c7Q0tFRElUT1Iub24oXCJpbnN0YW5jZUxvYWRlZFwiLGZ1bmN0aW9uKGEpe2lmKCFDS0VESVRPUi5lbnYuaWV8fCFDS0VESVRPUi5lbnYucXVpcmtzKXt2YXIgYj1hLmVkaXRvcjthPWZ1bmN0aW9uKGEpe2E9KGEuZGF0YVswXXx8YS5kYXRhKS5lbGVtZW50LmdldEVsZW1lbnRzQnlUYWcoXCJpZnJhbWVcIikuZ2V0SXRlbSgwKS5nZXRGcmFtZURvY3VtZW50KCk7aWYoIWEuZ2V0QnlJZChcImNrZV91aV9jb2xvclwiKSl7YT1jKGEpO2wucHVzaChhKTt2YXIgZD1iLmdldFVpQ29sb3IoKTtkJiZmKFthXSxDS0VESVRPUi5za2luLmNoYW1lbGVvbihiLFwicGFuZWxcIiksW1ttLGRdXSl9fTtiLm9uKFwicGFuZWxTaG93XCIsYSk7Yi5vbihcIm1lbnVTaG93XCIsYSk7Yi5jb25maWcudWlDb2xvciYmYi5zZXRVaUNvbG9yKGIuY29uZmlnLnVpQ29sb3IpfX0pfSkoKTtcbihmdW5jdGlvbigpe2lmKENLRURJVE9SLmVudi53ZWJraXQpQ0tFRElUT1IuZW52LmhjPSExO2Vsc2V7dmFyIGE9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoJ1xceDNjZGl2IHN0eWxlXFx4M2RcIndpZHRoOjA7aGVpZ2h0OjA7cG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTAwMDBweDtib3JkZXI6MXB4IHNvbGlkO2JvcmRlci1jb2xvcjpyZWQgYmx1ZVwiXFx4M2VcXHgzYy9kaXZcXHgzZScsQ0tFRElUT1IuZG9jdW1lbnQpO2EuYXBwZW5kVG8oQ0tFRElUT1IuZG9jdW1lbnQuZ2V0SGVhZCgpKTt0cnl7dmFyIGQ9YS5nZXRDb21wdXRlZFN0eWxlKFwiYm9yZGVyLXRvcC1jb2xvclwiKSxiPWEuZ2V0Q29tcHV0ZWRTdHlsZShcImJvcmRlci1yaWdodC1jb2xvclwiKTtDS0VESVRPUi5lbnYuaGM9ISghZHx8ZCE9Yil9Y2F0Y2goYyl7Q0tFRElUT1IuZW52LmhjPSExfWEucmVtb3ZlKCl9Q0tFRElUT1IuZW52LmhjJiYoQ0tFRElUT1IuZW52LmNzc0NsYXNzKz1cIiBja2VfaGNcIik7Q0tFRElUT1IuZG9jdW1lbnQuYXBwZW5kU3R5bGVUZXh0KFwiLmNrZXt2aXNpYmlsaXR5OmhpZGRlbjt9XCIpO1xuQ0tFRElUT1Iuc3RhdHVzPVwibG9hZGVkXCI7Q0tFRElUT1IuZmlyZU9uY2UoXCJsb2FkZWRcIik7aWYoYT1DS0VESVRPUi5fLnBlbmRpbmcpZm9yKGRlbGV0ZSBDS0VESVRPUi5fLnBlbmRpbmcsZD0wO2Q8YS5sZW5ndGg7ZCsrKUNLRURJVE9SLmVkaXRvci5wcm90b3R5cGUuY29uc3RydWN0b3IuYXBwbHkoYVtkXVswXSxhW2RdWzFdKSxDS0VESVRPUi5hZGQoYVtkXVswXSl9KSgpOy8qXG4gQ29weXJpZ2h0IChjKSAyMDAzLTIwMTYsIENLU291cmNlIC0gRnJlZGVyaWNvIEtuYWJiZW4uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gRm9yIGxpY2Vuc2luZywgc2VlIExJQ0VOU0UubWQgb3IgaHR0cDovL2NrZWRpdG9yLmNvbS9saWNlbnNlXG4qL1xuQ0tFRElUT1Iuc2tpbi5uYW1lPVwibW9vbm9cIjtDS0VESVRPUi5za2luLnVhX2VkaXRvcj1cImllLGllcXVpcmtzLGllNyxpZTgsZ2Vja29cIjtDS0VESVRPUi5za2luLnVhX2RpYWxvZz1cImllLGllcXVpcmtzLGllNyxpZThcIjtcbkNLRURJVE9SLnNraW4uY2hhbWVsZW9uPWZ1bmN0aW9uKCl7dmFyIGI9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYixlKXtmb3IodmFyIGE9Yi5tYXRjaCgvW14jXS4vZyksYz0wOzM+YztjKyspe3ZhciBmPWMsZDtkPXBhcnNlSW50KGFbY10sMTYpO2Q9KFwiMFwiKygwPmU/MHxkKigxK2UpOjB8ZCsoMjU1LWQpKmUpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO2FbZl09ZH1yZXR1cm5cIiNcIithLmpvaW4oXCJcIil9fSgpLGM9ZnVuY3Rpb24oKXt2YXIgYj1uZXcgQ0tFRElUT1IudGVtcGxhdGUoXCJiYWNrZ3JvdW5kOiN7dG99O2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSx7ZnJvbX0se3RvfSk7ZmlsdGVyOnByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChncmFkaWVudFR5cGVcXHgzZDAsc3RhcnRDb2xvcnN0clxceDNkJ3tmcm9tfScsZW5kQ29sb3JzdHJcXHgzZCd7dG99Jyk7XCIpO3JldHVybiBmdW5jdGlvbihjLGEpe3JldHVybiBiLm91dHB1dCh7ZnJvbTpjLFxudG86YX0pfX0oKSxmPXtlZGl0b3I6bmV3IENLRURJVE9SLnRlbXBsYXRlKFwie2lkfS5ja2VfY2hyb21lIFtib3JkZXItY29sb3I6e2RlZmF1bHRCb3JkZXJ9O10ge2lkfSAuY2tlX3RvcCBbIHtkZWZhdWx0R3JhZGllbnR9Ym9yZGVyLWJvdHRvbS1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07XSB7aWR9IC5ja2VfYm90dG9tIFt7ZGVmYXVsdEdyYWRpZW50fWJvcmRlci10b3AtY29sb3I6e2RlZmF1bHRCb3JkZXJ9O10ge2lkfSAuY2tlX3Jlc2l6ZXIgW2JvcmRlci1yaWdodC1jb2xvcjp7Y2tlUmVzaXplcn1dIHtpZH0gLmNrZV9kaWFsb2dfdGl0bGUgW3tkZWZhdWx0R3JhZGllbnR9Ym9yZGVyLWJvdHRvbS1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07XSB7aWR9IC5ja2VfZGlhbG9nX2Zvb3RlciBbe2RlZmF1bHRHcmFkaWVudH1vdXRsaW5lLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTtib3JkZXItdG9wLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTtdIHtpZH0gLmNrZV9kaWFsb2dfdGFiIFt7bGlnaHRHcmFkaWVudH1ib3JkZXItY29sb3I6e2RlZmF1bHRCb3JkZXJ9O10ge2lkfSAuY2tlX2RpYWxvZ190YWI6aG92ZXIgW3ttZWRpdW1HcmFkaWVudH1dIHtpZH0gLmNrZV9kaWFsb2dfY29udGVudHMgW2JvcmRlci10b3AtY29sb3I6e2RlZmF1bHRCb3JkZXJ9O10ge2lkfSAuY2tlX2RpYWxvZ190YWJfc2VsZWN0ZWQsIHtpZH0gLmNrZV9kaWFsb2dfdGFiX3NlbGVjdGVkOmhvdmVyIFtiYWNrZ3JvdW5kOntkaWFsb2dUYWJTZWxlY3RlZH07Ym9yZGVyLWJvdHRvbS1jb2xvcjp7ZGlhbG9nVGFiU2VsZWN0ZWRCb3JkZXJ9O10ge2lkfSAuY2tlX2RpYWxvZ19ib2R5IFtiYWNrZ3JvdW5kOntkaWFsb2dCb2R5fTtib3JkZXItY29sb3I6e2RlZmF1bHRCb3JkZXJ9O10ge2lkfSAuY2tlX3Rvb2xncm91cCBbe2xpZ2h0R3JhZGllbnR9Ym9yZGVyLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTtdIHtpZH0gYS5ja2VfYnV0dG9uX29mZjpob3Zlciwge2lkfSBhLmNrZV9idXR0b25fb2ZmOmZvY3VzLCB7aWR9IGEuY2tlX2J1dHRvbl9vZmY6YWN0aXZlIFt7bWVkaXVtR3JhZGllbnR9XSB7aWR9IC5ja2VfYnV0dG9uX29uIFt7Y2tlQnV0dG9uT259XSB7aWR9IC5ja2VfdG9vbGJhcl9zZXBhcmF0b3IgW2JhY2tncm91bmQtY29sb3I6IHtja2VUb29sYmFyU2VwYXJhdG9yfTtdIHtpZH0gLmNrZV9jb21ib19idXR0b24gW2JvcmRlci1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07e2xpZ2h0R3JhZGllbnR9XSB7aWR9IGEuY2tlX2NvbWJvX2J1dHRvbjpob3Zlciwge2lkfSBhLmNrZV9jb21ib19idXR0b246Zm9jdXMsIHtpZH0gLmNrZV9jb21ib19vbiBhLmNrZV9jb21ib19idXR0b24gW2JvcmRlci1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07e21lZGl1bUdyYWRpZW50fV0ge2lkfSAuY2tlX3BhdGhfaXRlbSBbY29sb3I6e2VsZW1lbnRzUGF0aENvbG9yfTtdIHtpZH0gYS5ja2VfcGF0aF9pdGVtOmhvdmVyLCB7aWR9IGEuY2tlX3BhdGhfaXRlbTpmb2N1cywge2lkfSBhLmNrZV9wYXRoX2l0ZW06YWN0aXZlIFtiYWNrZ3JvdW5kLWNvbG9yOntlbGVtZW50c1BhdGhCZ307XSB7aWR9LmNrZV9wYW5lbCBbYm9yZGVyLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTtdIFwiKSxcbnBhbmVsOm5ldyBDS0VESVRPUi50ZW1wbGF0ZShcIi5ja2VfcGFuZWxfZ3JvdXB0aXRsZSBbe2xpZ2h0R3JhZGllbnR9Ym9yZGVyLWNvbG9yOntkZWZhdWx0Qm9yZGVyfTtdIC5ja2VfbWVudWJ1dHRvbl9pY29uIFtiYWNrZ3JvdW5kLWNvbG9yOnttZW51YnV0dG9uSWNvbn07XSAuY2tlX21lbnVidXR0b246aG92ZXIgLmNrZV9tZW51YnV0dG9uX2ljb24sIC5ja2VfbWVudWJ1dHRvbjpmb2N1cyAuY2tlX21lbnVidXR0b25faWNvbiwgLmNrZV9tZW51YnV0dG9uOmFjdGl2ZSAuY2tlX21lbnVidXR0b25faWNvbiBbYmFja2dyb3VuZC1jb2xvcjp7bWVudWJ1dHRvbkljb25Ib3Zlcn07XSAuY2tlX21lbnVzZXBhcmF0b3IgW2JhY2tncm91bmQtY29sb3I6e21lbnVidXR0b25JY29ufTtdIGE6aG92ZXIuY2tlX2NvbG9yYm94LCBhOmZvY3VzLmNrZV9jb2xvcmJveCwgYTphY3RpdmUuY2tlX2NvbG9yYm94IFtib3JkZXItY29sb3I6e2RlZmF1bHRCb3JkZXJ9O10gYTpob3Zlci5ja2VfY29sb3JhdXRvLCBhOmhvdmVyLmNrZV9jb2xvcm1vcmUsIGE6Zm9jdXMuY2tlX2NvbG9yYXV0bywgYTpmb2N1cy5ja2VfY29sb3Jtb3JlLCBhOmFjdGl2ZS5ja2VfY29sb3JhdXRvLCBhOmFjdGl2ZS5ja2VfY29sb3Jtb3JlIFtiYWNrZ3JvdW5kLWNvbG9yOntja2VDb2xvcmF1dG99O2JvcmRlci1jb2xvcjp7ZGVmYXVsdEJvcmRlcn07XSBcIil9O1xucmV0dXJuIGZ1bmN0aW9uKGcsZSl7dmFyIGE9Zy51aUNvbG9yLGE9e2lkOlwiLlwiK2cuaWQsZGVmYXVsdEJvcmRlcjpiKGEsLS4xKSxkZWZhdWx0R3JhZGllbnQ6YyhiKGEsLjkpLGEpLGxpZ2h0R3JhZGllbnQ6YyhiKGEsMSksYihhLC43KSksbWVkaXVtR3JhZGllbnQ6YyhiKGEsLjgpLGIoYSwuNSkpLGNrZUJ1dHRvbk9uOmMoYihhLC42KSxiKGEsLjcpKSxja2VSZXNpemVyOmIoYSwtLjQpLGNrZVRvb2xiYXJTZXBhcmF0b3I6YihhLC41KSxja2VDb2xvcmF1dG86YihhLC44KSxkaWFsb2dCb2R5OmIoYSwuNyksZGlhbG9nVGFiU2VsZWN0ZWQ6YyhcIiNGRkZGRkZcIixcIiNGRkZGRkZcIiksZGlhbG9nVGFiU2VsZWN0ZWRCb3JkZXI6XCIjRkZGXCIsZWxlbWVudHNQYXRoQ29sb3I6YihhLC0uNiksZWxlbWVudHNQYXRoQmc6YSxtZW51YnV0dG9uSWNvbjpiKGEsLjUpLG1lbnVidXR0b25JY29uSG92ZXI6YihhLC4zKX07cmV0dXJuIGZbZV0ub3V0cHV0KGEpLnJlcGxhY2UoL1xcWy9nLFwie1wiKS5yZXBsYWNlKC9cXF0vZyxcblwifVwiKX19KCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJkaWFsb2d1aVwiLHtvbkxvYWQ6ZnVuY3Rpb24oKXt2YXIgaD1mdW5jdGlvbihiKXt0aGlzLl98fCh0aGlzLl89e30pO3RoaXMuX1tcImRlZmF1bHRcIl09dGhpcy5fLmluaXRWYWx1ZT1iW1wiZGVmYXVsdFwiXXx8XCJcIjt0aGlzLl8ucmVxdWlyZWQ9Yi5yZXF1aXJlZHx8ITE7Zm9yKHZhciBhPVt0aGlzLl9dLGQ9MTtkPGFyZ3VtZW50cy5sZW5ndGg7ZCsrKWEucHVzaChhcmd1bWVudHNbZF0pO2EucHVzaCghMCk7Q0tFRElUT1IudG9vbHMuZXh0ZW5kLmFwcGx5KENLRURJVE9SLnRvb2xzLGEpO3JldHVybiB0aGlzLl99LHY9e2J1aWxkOmZ1bmN0aW9uKGIsYSxkKXtyZXR1cm4gbmV3IENLRURJVE9SLnVpLmRpYWxvZy50ZXh0SW5wdXQoYixhLGQpfX0sbj17YnVpbGQ6ZnVuY3Rpb24oYixhLGQpe3JldHVybiBuZXcgQ0tFRElUT1IudWkuZGlhbG9nW2EudHlwZV0oYixhLGQpfX0scT17aXNDaGFuZ2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VmFsdWUoKSE9XG50aGlzLmdldEluaXRWYWx1ZSgpfSxyZXNldDpmdW5jdGlvbihiKXt0aGlzLnNldFZhbHVlKHRoaXMuZ2V0SW5pdFZhbHVlKCksYil9LHNldEluaXRWYWx1ZTpmdW5jdGlvbigpe3RoaXMuXy5pbml0VmFsdWU9dGhpcy5nZXRWYWx1ZSgpfSxyZXNldEluaXRWYWx1ZTpmdW5jdGlvbigpe3RoaXMuXy5pbml0VmFsdWU9dGhpcy5fW1wiZGVmYXVsdFwiXX0sZ2V0SW5pdFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5pbml0VmFsdWV9fSxyPUNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSxDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LnByb3RvdHlwZS5ldmVudFByb2Nlc3NvcnMse29uQ2hhbmdlOmZ1bmN0aW9uKGIsYSl7dGhpcy5fLmRvbU9uQ2hhbmdlUmVnaXN0ZXJlZHx8KGIub24oXCJsb2FkXCIsZnVuY3Rpb24oKXt0aGlzLmdldElucHV0RWxlbWVudCgpLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXtiLnBhcnRzLmRpYWxvZy5pc1Zpc2libGUoKSYmdGhpcy5maXJlKFwiY2hhbmdlXCIse3ZhbHVlOnRoaXMuZ2V0VmFsdWUoKX0pfSxcbnRoaXMpfSx0aGlzKSx0aGlzLl8uZG9tT25DaGFuZ2VSZWdpc3RlcmVkPSEwKTt0aGlzLm9uKFwiY2hhbmdlXCIsYSl9fSwhMCkseD0vXm9uKFtBLVpdXFx3KykvLHQ9ZnVuY3Rpb24oYil7Zm9yKHZhciBhIGluIGIpKHgudGVzdChhKXx8XCJ0aXRsZVwiPT1hfHxcInR5cGVcIj09YSkmJmRlbGV0ZSBiW2FdO3JldHVybiBifSx3PWZ1bmN0aW9uKGIpe2I9Yi5kYXRhLmdldEtleXN0cm9rZSgpO2I9PUNLRURJVE9SLlNISUZUK0NLRURJVE9SLkFMVCszNj90aGlzLnNldERpcmVjdGlvbk1hcmtlcihcImx0clwiKTpiPT1DS0VESVRPUi5TSElGVCtDS0VESVRPUi5BTFQrMzUmJnRoaXMuc2V0RGlyZWN0aW9uTWFya2VyKFwicnRsXCIpfTtDS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IudWkuZGlhbG9nLHtsYWJlbGVkRWxlbWVudDpmdW5jdGlvbihiLGEsZCxmKXtpZighKDQ+YXJndW1lbnRzLmxlbmd0aCkpe3ZhciBjPWguY2FsbCh0aGlzLGEpO2MubGFiZWxJZD1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcblwiX2xhYmVsXCI7dGhpcy5fLmNoaWxkcmVuPVtdO3ZhciBlPXtyb2xlOmEucm9sZXx8XCJwcmVzZW50YXRpb25cIn07YS5pbmNsdWRlTGFiZWwmJihlW1wiYXJpYS1sYWJlbGxlZGJ5XCJdPWMubGFiZWxJZCk7Q0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudC5jYWxsKHRoaXMsYixhLGQsXCJkaXZcIixudWxsLGUsZnVuY3Rpb24oKXt2YXIgZT1bXSxnPWEucmVxdWlyZWQ/XCIgY2tlX3JlcXVpcmVkXCI6XCJcIjtcImhvcml6b250YWxcIiE9YS5sYWJlbExheW91dD9lLnB1c2goJ1xceDNjbGFiZWwgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV9sYWJlbGVkX2xhYmVsJytnKydcIiAnLCcgaWRcXHgzZFwiJytjLmxhYmVsSWQrJ1wiJyxjLmlucHV0SWQ/JyBmb3JcXHgzZFwiJytjLmlucHV0SWQrJ1wiJzpcIlwiLChhLmxhYmVsU3R5bGU/JyBzdHlsZVxceDNkXCInK2EubGFiZWxTdHlsZSsnXCInOlwiXCIpK1wiXFx4M2VcIixhLmxhYmVsLFwiXFx4M2MvbGFiZWxcXHgzZVwiLCdcXHgzY2RpdiBjbGFzc1xceDNkXCJja2VfZGlhbG9nX3VpX2xhYmVsZWRfY29udGVudFwiJyxcbmEuY29udHJvbFN0eWxlPycgc3R5bGVcXHgzZFwiJythLmNvbnRyb2xTdHlsZSsnXCInOlwiXCIsJyByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2UnLGYuY2FsbCh0aGlzLGIsYSksXCJcXHgzYy9kaXZcXHgzZVwiKTooZz17dHlwZTpcImhib3hcIix3aWR0aHM6YS53aWR0aHMscGFkZGluZzowLGNoaWxkcmVuOlt7dHlwZTpcImh0bWxcIixodG1sOidcXHgzY2xhYmVsIGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfdWlfbGFiZWxlZF9sYWJlbCcrZysnXCIgaWRcXHgzZFwiJytjLmxhYmVsSWQrJ1wiIGZvclxceDNkXCInK2MuaW5wdXRJZCsnXCInKyhhLmxhYmVsU3R5bGU/JyBzdHlsZVxceDNkXCInK2EubGFiZWxTdHlsZSsnXCInOlwiXCIpK1wiXFx4M2VcIitDS0VESVRPUi50b29scy5odG1sRW5jb2RlKGEubGFiZWwpK1wiXFx4M2MvbGFiZWxcXHgzZVwifSx7dHlwZTpcImh0bWxcIixodG1sOidcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV9sYWJlbGVkX2NvbnRlbnRcIicrKGEuY29udHJvbFN0eWxlPycgc3R5bGVcXHgzZFwiJythLmNvbnRyb2xTdHlsZStcbidcIic6XCJcIikrXCJcXHgzZVwiK2YuY2FsbCh0aGlzLGIsYSkrXCJcXHgzYy9zcGFuXFx4M2VcIn1dfSxDS0VESVRPUi5kaWFsb2cuXy51aUVsZW1lbnRCdWlsZGVycy5oYm94LmJ1aWxkKGIsZyxlKSk7cmV0dXJuIGUuam9pbihcIlwiKX0pfX0sdGV4dElucHV0OmZ1bmN0aW9uKGIsYSxkKXtpZighKDM+YXJndW1lbnRzLmxlbmd0aCkpe2guY2FsbCh0aGlzLGEpO3ZhciBmPXRoaXMuXy5pbnB1dElkPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpK1wiX3RleHRJbnB1dFwiLGM9e1wiY2xhc3NcIjpcImNrZV9kaWFsb2dfdWlfaW5wdXRfXCIrYS50eXBlLGlkOmYsdHlwZTphLnR5cGV9O2EudmFsaWRhdGUmJih0aGlzLnZhbGlkYXRlPWEudmFsaWRhdGUpO2EubWF4TGVuZ3RoJiYoYy5tYXhsZW5ndGg9YS5tYXhMZW5ndGgpO2Euc2l6ZSYmKGMuc2l6ZT1hLnNpemUpO2EuaW5wdXRTdHlsZSYmKGMuc3R5bGU9YS5pbnB1dFN0eWxlKTt2YXIgZT10aGlzLG09ITE7Yi5vbihcImxvYWRcIixmdW5jdGlvbigpe2UuZ2V0SW5wdXRFbGVtZW50KCkub24oXCJrZXlkb3duXCIsXG5mdW5jdGlvbihhKXsxMz09YS5kYXRhLmdldEtleXN0cm9rZSgpJiYobT0hMCl9KTtlLmdldElucHV0RWxlbWVudCgpLm9uKFwia2V5dXBcIixmdW5jdGlvbihhKXsxMz09YS5kYXRhLmdldEtleXN0cm9rZSgpJiZtJiYoYi5nZXRCdXR0b24oXCJva1wiKSYmc2V0VGltZW91dChmdW5jdGlvbigpe2IuZ2V0QnV0dG9uKFwib2tcIikuY2xpY2soKX0sMCksbT0hMSk7ZS5iaWRpJiZ3LmNhbGwoZSxhKX0sbnVsbCxudWxsLDFFMyl9KTtDS0VESVRPUi51aS5kaWFsb2cubGFiZWxlZEVsZW1lbnQuY2FsbCh0aGlzLGIsYSxkLGZ1bmN0aW9uKCl7dmFyIGI9WydcXHgzY2RpdiBjbGFzc1xceDNkXCJja2VfZGlhbG9nX3VpX2lucHV0XycsYS50eXBlLCdcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiJ107YS53aWR0aCYmYi5wdXNoKCdzdHlsZVxceDNkXCJ3aWR0aDonK2Eud2lkdGgrJ1wiICcpO2IucHVzaChcIlxceDNlXFx4M2NpbnB1dCBcIik7Y1tcImFyaWEtbGFiZWxsZWRieVwiXT10aGlzLl8ubGFiZWxJZDt0aGlzLl8ucmVxdWlyZWQmJlxuKGNbXCJhcmlhLXJlcXVpcmVkXCJdPXRoaXMuXy5yZXF1aXJlZCk7Zm9yKHZhciBlIGluIGMpYi5wdXNoKGUrJ1xceDNkXCInK2NbZV0rJ1wiICcpO2IucHVzaChcIiAvXFx4M2VcXHgzYy9kaXZcXHgzZVwiKTtyZXR1cm4gYi5qb2luKFwiXCIpfSl9fSx0ZXh0YXJlYTpmdW5jdGlvbihiLGEsZCl7aWYoISgzPmFyZ3VtZW50cy5sZW5ndGgpKXtoLmNhbGwodGhpcyxhKTt2YXIgZj10aGlzLGM9dGhpcy5fLmlucHV0SWQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCkrXCJfdGV4dGFyZWFcIixlPXt9O2EudmFsaWRhdGUmJih0aGlzLnZhbGlkYXRlPWEudmFsaWRhdGUpO2Uucm93cz1hLnJvd3N8fDU7ZS5jb2xzPWEuY29sc3x8MjA7ZVtcImNsYXNzXCJdPVwiY2tlX2RpYWxvZ191aV9pbnB1dF90ZXh0YXJlYSBcIisoYVtcImNsYXNzXCJdfHxcIlwiKTtcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5pbnB1dFN0eWxlJiYoZS5zdHlsZT1hLmlucHV0U3R5bGUpO2EuZGlyJiYoZS5kaXI9YS5kaXIpO2lmKGYuYmlkaSliLm9uKFwibG9hZFwiLFxuZnVuY3Rpb24oKXtmLmdldElucHV0RWxlbWVudCgpLm9uKFwia2V5dXBcIix3KX0sZik7Q0tFRElUT1IudWkuZGlhbG9nLmxhYmVsZWRFbGVtZW50LmNhbGwodGhpcyxiLGEsZCxmdW5jdGlvbigpe2VbXCJhcmlhLWxhYmVsbGVkYnlcIl09dGhpcy5fLmxhYmVsSWQ7dGhpcy5fLnJlcXVpcmVkJiYoZVtcImFyaWEtcmVxdWlyZWRcIl09dGhpcy5fLnJlcXVpcmVkKTt2YXIgYT1bJ1xceDNjZGl2IGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfdWlfaW5wdXRfdGV4dGFyZWFcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2VcXHgzY3RleHRhcmVhIGlkXFx4M2RcIicsYywnXCIgJ10sYjtmb3IoYiBpbiBlKWEucHVzaChiKydcXHgzZFwiJytDS0VESVRPUi50b29scy5odG1sRW5jb2RlKGVbYl0pKydcIiAnKTthLnB1c2goXCJcXHgzZVwiLENLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoZi5fW1wiZGVmYXVsdFwiXSksXCJcXHgzYy90ZXh0YXJlYVxceDNlXFx4M2MvZGl2XFx4M2VcIik7cmV0dXJuIGEuam9pbihcIlwiKX0pfX0sY2hlY2tib3g6ZnVuY3Rpb24oYixcbmEsZCl7aWYoISgzPmFyZ3VtZW50cy5sZW5ndGgpKXt2YXIgZj1oLmNhbGwodGhpcyxhLHtcImRlZmF1bHRcIjohIWFbXCJkZWZhdWx0XCJdfSk7YS52YWxpZGF0ZSYmKHRoaXMudmFsaWRhdGU9YS52YWxpZGF0ZSk7Q0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudC5jYWxsKHRoaXMsYixhLGQsXCJzcGFuXCIsbnVsbCxudWxsLGZ1bmN0aW9uKCl7dmFyIGM9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LGEse2lkOmEuaWQ/YS5pZCtcIl9jaGVja2JveFwiOkNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpK1wiX2NoZWNrYm94XCJ9LCEwKSxlPVtdLGQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCkrXCJfbGFiZWxcIixnPXtcImNsYXNzXCI6XCJja2VfZGlhbG9nX3VpX2NoZWNrYm94X2lucHV0XCIsdHlwZTpcImNoZWNrYm94XCIsXCJhcmlhLWxhYmVsbGVkYnlcIjpkfTt0KGMpO2FbXCJkZWZhdWx0XCJdJiYoZy5jaGVja2VkPVwiY2hlY2tlZFwiKTtcInVuZGVmaW5lZFwiIT10eXBlb2YgYy5pbnB1dFN0eWxlJiYoYy5zdHlsZT1jLmlucHV0U3R5bGUpO1xuZi5jaGVja2JveD1uZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudChiLGMsZSxcImlucHV0XCIsbnVsbCxnKTtlLnB1c2goJyBcXHgzY2xhYmVsIGlkXFx4M2RcIicsZCwnXCIgZm9yXFx4M2RcIicsZy5pZCwnXCInKyhhLmxhYmVsU3R5bGU/JyBzdHlsZVxceDNkXCInK2EubGFiZWxTdHlsZSsnXCInOlwiXCIpK1wiXFx4M2VcIixDS0VESVRPUi50b29scy5odG1sRW5jb2RlKGEubGFiZWwpLFwiXFx4M2MvbGFiZWxcXHgzZVwiKTtyZXR1cm4gZS5qb2luKFwiXCIpfSl9fSxyYWRpbzpmdW5jdGlvbihiLGEsZCl7aWYoISgzPmFyZ3VtZW50cy5sZW5ndGgpKXtoLmNhbGwodGhpcyxhKTt0aGlzLl9bXCJkZWZhdWx0XCJdfHwodGhpcy5fW1wiZGVmYXVsdFwiXT10aGlzLl8uaW5pdFZhbHVlPWEuaXRlbXNbMF1bMV0pO2EudmFsaWRhdGUmJih0aGlzLnZhbGlkYXRlPWEudmFsaWRhdGUpO3ZhciBmPVtdLGM9dGhpczthLnJvbGU9XCJyYWRpb2dyb3VwXCI7YS5pbmNsdWRlTGFiZWw9ITA7Q0tFRElUT1IudWkuZGlhbG9nLmxhYmVsZWRFbGVtZW50LmNhbGwodGhpcyxcbmIsYSxkLGZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLGQ9W10sZz0oYS5pZD9hLmlkOkNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpKStcIl9yYWRpb1wiLGs9MDtrPGEuaXRlbXMubGVuZ3RoO2srKyl7dmFyIGw9YS5pdGVtc1trXSxoPXZvaWQgMCE9PWxbMl0/bFsyXTpsWzBdLG49dm9pZCAwIT09bFsxXT9sWzFdOmxbMF0scD1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcIl9yYWRpb19pbnB1dFwiLHE9cCtcIl9sYWJlbFwiLHA9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LGEse2lkOnAsdGl0bGU6bnVsbCx0eXBlOm51bGx9LCEwKSxoPUNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSxwLHt0aXRsZTpofSwhMCkscj17dHlwZTpcInJhZGlvXCIsXCJjbGFzc1wiOlwiY2tlX2RpYWxvZ191aV9yYWRpb19pbnB1dFwiLG5hbWU6Zyx2YWx1ZTpuLFwiYXJpYS1sYWJlbGxlZGJ5XCI6cX0sdT1bXTtjLl9bXCJkZWZhdWx0XCJdPT1uJiYoci5jaGVja2VkPVwiY2hlY2tlZFwiKTt0KHApO3QoaCk7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHAuaW5wdXRTdHlsZSYmXG4ocC5zdHlsZT1wLmlucHV0U3R5bGUpO3Aua2V5Ym9hcmRGb2N1c2FibGU9ITA7Zi5wdXNoKG5ldyBDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50KGIscCx1LFwiaW5wdXRcIixudWxsLHIpKTt1LnB1c2goXCIgXCIpO25ldyBDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50KGIsaCx1LFwibGFiZWxcIixudWxsLHtpZDpxLFwiZm9yXCI6ci5pZH0sbFswXSk7ZS5wdXNoKHUuam9pbihcIlwiKSl9bmV3IENLRURJVE9SLnVpLmRpYWxvZy5oYm94KGIsZixlLGQpO3JldHVybiBkLmpvaW4oXCJcIil9KTt0aGlzLl8uY2hpbGRyZW49Zn19LGJ1dHRvbjpmdW5jdGlvbihiLGEsZCl7aWYoYXJndW1lbnRzLmxlbmd0aCl7XCJmdW5jdGlvblwiPT10eXBlb2YgYSYmKGE9YShiLmdldFBhcmVudEVkaXRvcigpKSk7aC5jYWxsKHRoaXMsYSx7ZGlzYWJsZWQ6YS5kaXNhYmxlZHx8ITF9KTtDS0VESVRPUi5ldmVudC5pbXBsZW1lbnRPbih0aGlzKTt2YXIgZj10aGlzO2Iub24oXCJsb2FkXCIsZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEVsZW1lbnQoKTtcbihmdW5jdGlvbigpe2Eub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2YuY2xpY2soKTthLmRhdGEucHJldmVudERlZmF1bHQoKX0pO2Eub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7YS5kYXRhLmdldEtleXN0cm9rZSgpaW57MzI6MX0mJihmLmNsaWNrKCksYS5kYXRhLnByZXZlbnREZWZhdWx0KCkpfSl9KSgpO2EudW5zZWxlY3RhYmxlKCl9LHRoaXMpO3ZhciBjPUNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSxhKTtkZWxldGUgYy5zdHlsZTt2YXIgZT1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcIl9sYWJlbFwiO0NLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQuY2FsbCh0aGlzLGIsYyxkLFwiYVwiLG51bGwse3N0eWxlOmEuc3R5bGUsaHJlZjpcImphdmFzY3JpcHQ6dm9pZCgwKVwiLHRpdGxlOmEubGFiZWwsaGlkZWZvY3VzOlwidHJ1ZVwiLFwiY2xhc3NcIjphW1wiY2xhc3NcIl0scm9sZTpcImJ1dHRvblwiLFwiYXJpYS1sYWJlbGxlZGJ5XCI6ZX0sJ1xceDNjc3BhbiBpZFxceDNkXCInK2UrJ1wiIGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfdWlfYnV0dG9uXCJcXHgzZScrXG5DS0VESVRPUi50b29scy5odG1sRW5jb2RlKGEubGFiZWwpK1wiXFx4M2Mvc3BhblxceDNlXCIpfX0sc2VsZWN0OmZ1bmN0aW9uKGIsYSxkKXtpZighKDM+YXJndW1lbnRzLmxlbmd0aCkpe3ZhciBmPWguY2FsbCh0aGlzLGEpO2EudmFsaWRhdGUmJih0aGlzLnZhbGlkYXRlPWEudmFsaWRhdGUpO2YuaW5wdXRJZD1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcIl9zZWxlY3RcIjtDS0VESVRPUi51aS5kaWFsb2cubGFiZWxlZEVsZW1lbnQuY2FsbCh0aGlzLGIsYSxkLGZ1bmN0aW9uKCl7dmFyIGM9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LGEse2lkOmEuaWQ/YS5pZCtcIl9zZWxlY3RcIjpDS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcIl9zZWxlY3RcIn0sITApLGU9W10sZD1bXSxnPXtpZDpmLmlucHV0SWQsXCJjbGFzc1wiOlwiY2tlX2RpYWxvZ191aV9pbnB1dF9zZWxlY3RcIixcImFyaWEtbGFiZWxsZWRieVwiOnRoaXMuXy5sYWJlbElkfTtlLnB1c2goJ1xceDNjZGl2IGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfdWlfaW5wdXRfJyxcbmEudHlwZSwnXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIicpO2Eud2lkdGgmJmUucHVzaCgnc3R5bGVcXHgzZFwid2lkdGg6JythLndpZHRoKydcIiAnKTtlLnB1c2goXCJcXHgzZVwiKTt2b2lkIDAhPT1hLnNpemUmJihnLnNpemU9YS5zaXplKTt2b2lkIDAhPT1hLm11bHRpcGxlJiYoZy5tdWx0aXBsZT1hLm11bHRpcGxlKTt0KGMpO2Zvcih2YXIgaz0wLGw7azxhLml0ZW1zLmxlbmd0aCYmKGw9YS5pdGVtc1trXSk7aysrKWQucHVzaCgnXFx4M2NvcHRpb24gdmFsdWVcXHgzZFwiJyxDS0VESVRPUi50b29scy5odG1sRW5jb2RlKHZvaWQgMCE9PWxbMV0/bFsxXTpsWzBdKS5yZXBsYWNlKC9cIi9nLFwiXFx4MjZxdW90O1wiKSwnXCIgL1xceDNlICcsQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZShsWzBdKSk7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGMuaW5wdXRTdHlsZSYmKGMuc3R5bGU9Yy5pbnB1dFN0eWxlKTtmLnNlbGVjdD1uZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudChiLGMsZSxcInNlbGVjdFwiLG51bGwsXG5nLGQuam9pbihcIlwiKSk7ZS5wdXNoKFwiXFx4M2MvZGl2XFx4M2VcIik7cmV0dXJuIGUuam9pbihcIlwiKX0pfX0sZmlsZTpmdW5jdGlvbihiLGEsZCl7aWYoISgzPmFyZ3VtZW50cy5sZW5ndGgpKXt2b2lkIDA9PT1hW1wiZGVmYXVsdFwiXSYmKGFbXCJkZWZhdWx0XCJdPVwiXCIpO3ZhciBmPUNLRURJVE9SLnRvb2xzLmV4dGVuZChoLmNhbGwodGhpcyxhKSx7ZGVmaW5pdGlvbjphLGJ1dHRvbnM6W119KTthLnZhbGlkYXRlJiYodGhpcy52YWxpZGF0ZT1hLnZhbGlkYXRlKTtiLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChmLmZyYW1lSWQpLmdldFBhcmVudCgpLmFkZENsYXNzKFwiY2tlX2RpYWxvZ191aV9pbnB1dF9maWxlXCIpfSk7Q0tFRElUT1IudWkuZGlhbG9nLmxhYmVsZWRFbGVtZW50LmNhbGwodGhpcyxiLGEsZCxmdW5jdGlvbigpe2YuZnJhbWVJZD1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcIl9maWxlSW5wdXRcIjt2YXIgYj1bJ1xceDNjaWZyYW1lIGZyYW1lYm9yZGVyXFx4M2RcIjBcIiBhbGxvd3RyYW5zcGFyZW5jeVxceDNkXCIwXCIgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV9pbnB1dF9maWxlXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIiBpZFxceDNkXCInLFxuZi5mcmFtZUlkLCdcIiB0aXRsZVxceDNkXCInLGEubGFiZWwsJ1wiIHNyY1xceDNkXCJqYXZhc2NyaXB0OnZvaWQoJ107Yi5wdXNoKENLRURJVE9SLmVudi5pZT9cIihmdW5jdGlvbigpe1wiK2VuY29kZVVSSUNvbXBvbmVudChcImRvY3VtZW50Lm9wZW4oKTsoXCIrQ0tFRElUT1IudG9vbHMuZml4RG9tYWluK1wiKSgpO2RvY3VtZW50LmNsb3NlKCk7XCIpK1wifSkoKVwiOlwiMFwiKTtiLnB1c2goJylcIlxceDNlXFx4M2MvaWZyYW1lXFx4M2UnKTtyZXR1cm4gYi5qb2luKFwiXCIpfSl9fSxmaWxlQnV0dG9uOmZ1bmN0aW9uKGIsYSxkKXt2YXIgZj10aGlzO2lmKCEoMz5hcmd1bWVudHMubGVuZ3RoKSl7aC5jYWxsKHRoaXMsYSk7YS52YWxpZGF0ZSYmKHRoaXMudmFsaWRhdGU9YS52YWxpZGF0ZSk7dmFyIGM9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LGEpLGU9Yy5vbkNsaWNrO2MuY2xhc3NOYW1lPShjLmNsYXNzTmFtZT9jLmNsYXNzTmFtZStcIiBcIjpcIlwiKStcImNrZV9kaWFsb2dfdWlfYnV0dG9uXCI7Yy5vbkNsaWNrPWZ1bmN0aW9uKGMpe3ZhciBkPVxuYVtcImZvclwiXTtlJiYhMT09PWUuY2FsbCh0aGlzLGMpfHwoYi5nZXRDb250ZW50RWxlbWVudChkWzBdLGRbMV0pLnN1Ym1pdCgpLHRoaXMuZGlzYWJsZSgpKX07Yi5vbihcImxvYWRcIixmdW5jdGlvbigpe2IuZ2V0Q29udGVudEVsZW1lbnQoYVtcImZvclwiXVswXSxhW1wiZm9yXCJdWzFdKS5fLmJ1dHRvbnMucHVzaChmKX0pO0NLRURJVE9SLnVpLmRpYWxvZy5idXR0b24uY2FsbCh0aGlzLGIsYyxkKX19LGh0bWw6ZnVuY3Rpb24oKXt2YXIgYj0vXlxccyo8W1xcdzpdK1xccysoW14+XSopPz4vLGE9L14oXFxzKjxbXFx3Ol0rKD86XFxzK1tePl0qKT8pKCg/Oi58XFxyfFxcbikrKSQvLGQ9L1xcLyQvO3JldHVybiBmdW5jdGlvbihmLGMsZSl7aWYoISgzPmFyZ3VtZW50cy5sZW5ndGgpKXt2YXIgbT1bXSxnPWMuaHRtbDtcIlxceDNjXCIhPWcuY2hhckF0KDApJiYoZz1cIlxceDNjc3BhblxceDNlXCIrZytcIlxceDNjL3NwYW5cXHgzZVwiKTt2YXIgaz1jLmZvY3VzO2lmKGspe3ZhciBsPXRoaXMuZm9jdXM7dGhpcy5mb2N1cz1mdW5jdGlvbigpeyhcImZ1bmN0aW9uXCI9PVxudHlwZW9mIGs/azpsKS5jYWxsKHRoaXMpO3RoaXMuZmlyZShcImZvY3VzXCIpfTtjLmlzRm9jdXNhYmxlJiYodGhpcy5pc0ZvY3VzYWJsZT10aGlzLmlzRm9jdXNhYmxlKTt0aGlzLmtleWJvYXJkRm9jdXNhYmxlPSEwfUNLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQuY2FsbCh0aGlzLGYsYyxtLFwic3BhblwiLG51bGwsbnVsbCxcIlwiKTttPW0uam9pbihcIlwiKS5tYXRjaChiKTtnPWcubWF0Y2goYSl8fFtcIlwiLFwiXCIsXCJcIl07ZC50ZXN0KGdbMV0pJiYoZ1sxXT1nWzFdLnNsaWNlKDAsLTEpLGdbMl09XCIvXCIrZ1syXSk7ZS5wdXNoKFtnWzFdLFwiIFwiLG1bMV18fFwiXCIsZ1syXV0uam9pbihcIlwiKSl9fX0oKSxmaWVsZHNldDpmdW5jdGlvbihiLGEsZCxmLGMpe3ZhciBlPWMubGFiZWw7dGhpcy5fPXtjaGlsZHJlbjphfTtDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LmNhbGwodGhpcyxiLGMsZixcImZpZWxkc2V0XCIsbnVsbCxudWxsLGZ1bmN0aW9uKCl7dmFyIGE9W107ZSYmYS5wdXNoKFwiXFx4M2NsZWdlbmRcIitcbihjLmxhYmVsU3R5bGU/JyBzdHlsZVxceDNkXCInK2MubGFiZWxTdHlsZSsnXCInOlwiXCIpK1wiXFx4M2VcIitlK1wiXFx4M2MvbGVnZW5kXFx4M2VcIik7Zm9yKHZhciBiPTA7YjxkLmxlbmd0aDtiKyspYS5wdXNoKGRbYl0pO3JldHVybiBhLmpvaW4oXCJcIil9KX19LCEwKTtDS0VESVRPUi51aS5kaWFsb2cuaHRtbC5wcm90b3R5cGU9bmV3IENLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQ7Q0tFRElUT1IudWkuZGlhbG9nLmxhYmVsZWRFbGVtZW50LnByb3RvdHlwZT1DS0VESVRPUi50b29scy5leHRlbmQobmV3IENLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQse3NldExhYmVsOmZ1bmN0aW9uKGIpe3ZhciBhPUNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQodGhpcy5fLmxhYmVsSWQpOzE+YS5nZXRDaGlsZENvdW50KCk/KG5ldyBDS0VESVRPUi5kb20udGV4dChiLENLRURJVE9SLmRvY3VtZW50KSkuYXBwZW5kVG8oYSk6YS5nZXRDaGlsZCgwKS4kLm5vZGVWYWx1ZT1iO3JldHVybiB0aGlzfSxnZXRMYWJlbDpmdW5jdGlvbigpe3ZhciBiPVxuQ0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZCh0aGlzLl8ubGFiZWxJZCk7cmV0dXJuIWJ8fDE+Yi5nZXRDaGlsZENvdW50KCk/XCJcIjpiLmdldENoaWxkKDApLmdldFRleHQoKX0sZXZlbnRQcm9jZXNzb3JzOnJ9LCEwKTtDS0VESVRPUi51aS5kaWFsb2cuYnV0dG9uLnByb3RvdHlwZT1DS0VESVRPUi50b29scy5leHRlbmQobmV3IENLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQse2NsaWNrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5kaXNhYmxlZD8hMTp0aGlzLmZpcmUoXCJjbGlja1wiLHtkaWFsb2c6dGhpcy5fLmRpYWxvZ30pfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLl8uZGlzYWJsZWQ9ITE7dmFyIGI9dGhpcy5nZXRFbGVtZW50KCk7YiYmYi5yZW1vdmVDbGFzcyhcImNrZV9kaXNhYmxlZFwiKX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuXy5kaXNhYmxlZD0hMDt0aGlzLmdldEVsZW1lbnQoKS5hZGRDbGFzcyhcImNrZV9kaXNhYmxlZFwiKX0saXNWaXNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RWxlbWVudCgpLmdldEZpcnN0KCkuaXNWaXNpYmxlKCl9LFxuaXNFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuXy5kaXNhYmxlZH0sZXZlbnRQcm9jZXNzb3JzOkNLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSxDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LnByb3RvdHlwZS5ldmVudFByb2Nlc3NvcnMse29uQ2xpY2s6ZnVuY3Rpb24oYixhKXt0aGlzLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe2EuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9fSwhMCksYWNjZXNzS2V5VXA6ZnVuY3Rpb24oKXt0aGlzLmNsaWNrKCl9LGFjY2Vzc0tleURvd246ZnVuY3Rpb24oKXt0aGlzLmZvY3VzKCl9LGtleWJvYXJkRm9jdXNhYmxlOiEwfSwhMCk7Q0tFRElUT1IudWkuZGlhbG9nLnRleHRJbnB1dC5wcm90b3R5cGU9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKG5ldyBDS0VESVRPUi51aS5kaWFsb2cubGFiZWxlZEVsZW1lbnQse2dldElucHV0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiBDS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKHRoaXMuXy5pbnB1dElkKX0sXG5mb2N1czpmdW5jdGlvbigpe3ZhciBiPXRoaXMuc2VsZWN0UGFyZW50VGFiKCk7c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBhPWIuZ2V0SW5wdXRFbGVtZW50KCk7YSYmYS4kLmZvY3VzKCl9LDApfSxzZWxlY3Q6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLnNlbGVjdFBhcmVudFRhYigpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgYT1iLmdldElucHV0RWxlbWVudCgpO2EmJihhLiQuZm9jdXMoKSxhLiQuc2VsZWN0KCkpfSwwKX0sYWNjZXNzS2V5VXA6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdCgpfSxzZXRWYWx1ZTpmdW5jdGlvbihiKXtpZih0aGlzLmJpZGkpe3ZhciBhPWImJmIuY2hhckF0KDApOyhhPVwi4oCqXCI9PWE/XCJsdHJcIjpcIuKAq1wiPT1hP1wicnRsXCI6bnVsbCkmJihiPWIuc2xpY2UoMSkpO3RoaXMuc2V0RGlyZWN0aW9uTWFya2VyKGEpfWJ8fChiPVwiXCIpO3JldHVybiBDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LnByb3RvdHlwZS5zZXRWYWx1ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LFxuZ2V0VmFsdWU6ZnVuY3Rpb24oKXt2YXIgYj1DS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LnByb3RvdHlwZS5nZXRWYWx1ZS5jYWxsKHRoaXMpO2lmKHRoaXMuYmlkaSYmYil7dmFyIGE9dGhpcy5nZXREaXJlY3Rpb25NYXJrZXIoKTthJiYoYj0oXCJsdHJcIj09YT9cIuKAqlwiOlwi4oCrXCIpK2IpfXJldHVybiBifSxzZXREaXJlY3Rpb25NYXJrZXI6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5nZXRJbnB1dEVsZW1lbnQoKTtiP2Euc2V0QXR0cmlidXRlcyh7ZGlyOmIsXCJkYXRhLWNrZS1kaXItbWFya2VyXCI6Yn0pOnRoaXMuZ2V0RGlyZWN0aW9uTWFya2VyKCkmJmEucmVtb3ZlQXR0cmlidXRlcyhbXCJkaXJcIixcImRhdGEtY2tlLWRpci1tYXJrZXJcIl0pfSxnZXREaXJlY3Rpb25NYXJrZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRJbnB1dEVsZW1lbnQoKS5kYXRhKFwiY2tlLWRpci1tYXJrZXJcIil9LGtleWJvYXJkRm9jdXNhYmxlOiEwfSxxLCEwKTtDS0VESVRPUi51aS5kaWFsb2cudGV4dGFyZWEucHJvdG90eXBlPVxubmV3IENLRURJVE9SLnVpLmRpYWxvZy50ZXh0SW5wdXQ7Q0tFRElUT1IudWkuZGlhbG9nLnNlbGVjdC5wcm90b3R5cGU9Q0tFRElUT1IudG9vbHMuZXh0ZW5kKG5ldyBDS0VESVRPUi51aS5kaWFsb2cubGFiZWxlZEVsZW1lbnQse2dldElucHV0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uc2VsZWN0LmdldEVsZW1lbnQoKX0sYWRkOmZ1bmN0aW9uKGIsYSxkKXt2YXIgZj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJvcHRpb25cIix0aGlzLmdldERpYWxvZygpLmdldFBhcmVudEVkaXRvcigpLmRvY3VtZW50KSxjPXRoaXMuZ2V0SW5wdXRFbGVtZW50KCkuJDtmLiQudGV4dD1iO2YuJC52YWx1ZT12b2lkIDA9PT1hfHxudWxsPT09YT9iOmE7dm9pZCAwPT09ZHx8bnVsbD09PWQ/Q0tFRElUT1IuZW52LmllP2MuYWRkKGYuJCk6Yy5hZGQoZi4kLG51bGwpOmMuYWRkKGYuJCxkKTtyZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKGIpe3RoaXMuZ2V0SW5wdXRFbGVtZW50KCkuJC5yZW1vdmUoYik7XG5yZXR1cm4gdGhpc30sY2xlYXI6ZnVuY3Rpb24oKXtmb3IodmFyIGI9dGhpcy5nZXRJbnB1dEVsZW1lbnQoKS4kOzA8Yi5sZW5ndGg7KWIucmVtb3ZlKDApO3JldHVybiB0aGlzfSxrZXlib2FyZEZvY3VzYWJsZTohMH0scSwhMCk7Q0tFRElUT1IudWkuZGlhbG9nLmNoZWNrYm94LnByb3RvdHlwZT1DS0VESVRPUi50b29scy5leHRlbmQobmV3IENLRURJVE9SLnVpLmRpYWxvZy51aUVsZW1lbnQse2dldElucHV0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uY2hlY2tib3guZ2V0RWxlbWVudCgpfSxzZXRWYWx1ZTpmdW5jdGlvbihiLGEpe3RoaXMuZ2V0SW5wdXRFbGVtZW50KCkuJC5jaGVja2VkPWI7IWEmJnRoaXMuZmlyZShcImNoYW5nZVwiLHt2YWx1ZTpifSl9LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0SW5wdXRFbGVtZW50KCkuJC5jaGVja2VkfSxhY2Nlc3NLZXlVcDpmdW5jdGlvbigpe3RoaXMuc2V0VmFsdWUoIXRoaXMuZ2V0VmFsdWUoKSl9LGV2ZW50UHJvY2Vzc29yczp7b25DaGFuZ2U6ZnVuY3Rpb24oYixcbmEpe2lmKCFDS0VESVRPUi5lbnYuaWV8fDg8Q0tFRElUT1IuZW52LnZlcnNpb24pcmV0dXJuIHIub25DaGFuZ2UuYXBwbHkodGhpcyxhcmd1bWVudHMpO2Iub24oXCJsb2FkXCIsZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uY2hlY2tib3guZ2V0RWxlbWVudCgpO2Eub24oXCJwcm9wZXJ0eWNoYW5nZVwiLGZ1bmN0aW9uKGIpe2I9Yi5kYXRhLiQ7XCJjaGVja2VkXCI9PWIucHJvcGVydHlOYW1lJiZ0aGlzLmZpcmUoXCJjaGFuZ2VcIix7dmFsdWU6YS4kLmNoZWNrZWR9KX0sdGhpcyl9LHRoaXMpO3RoaXMub24oXCJjaGFuZ2VcIixhKTtyZXR1cm4gbnVsbH19LGtleWJvYXJkRm9jdXNhYmxlOiEwfSxxLCEwKTtDS0VESVRPUi51aS5kaWFsb2cucmFkaW8ucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudCx7c2V0VmFsdWU6ZnVuY3Rpb24oYixhKXtmb3IodmFyIGQ9dGhpcy5fLmNoaWxkcmVuLGYsYz0wO2M8ZC5sZW5ndGgmJihmPWRbY10pO2MrKylmLmdldEVsZW1lbnQoKS4kLmNoZWNrZWQ9XG5mLmdldFZhbHVlKCk9PWI7IWEmJnRoaXMuZmlyZShcImNoYW5nZVwiLHt2YWx1ZTpifSl9LGdldFZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBiPXRoaXMuXy5jaGlsZHJlbixhPTA7YTxiLmxlbmd0aDthKyspaWYoYlthXS5nZXRFbGVtZW50KCkuJC5jaGVja2VkKXJldHVybiBiW2FdLmdldFZhbHVlKCk7cmV0dXJuIG51bGx9LGFjY2Vzc0tleVVwOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fLmNoaWxkcmVuLGE7Zm9yKGE9MDthPGIubGVuZ3RoO2ErKylpZihiW2FdLmdldEVsZW1lbnQoKS4kLmNoZWNrZWQpe2JbYV0uZ2V0RWxlbWVudCgpLmZvY3VzKCk7cmV0dXJufWJbMF0uZ2V0RWxlbWVudCgpLmZvY3VzKCl9LGV2ZW50UHJvY2Vzc29yczp7b25DaGFuZ2U6ZnVuY3Rpb24oYixhKXtpZighQ0tFRElUT1IuZW52LmllfHw4PENLRURJVE9SLmVudi52ZXJzaW9uKXJldHVybiByLm9uQ2hhbmdlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtiLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhPVxudGhpcy5fLmNoaWxkcmVuLGI9dGhpcyxjPTA7YzxhLmxlbmd0aDtjKyspYVtjXS5nZXRFbGVtZW50KCkub24oXCJwcm9wZXJ0eWNoYW5nZVwiLGZ1bmN0aW9uKGEpe2E9YS5kYXRhLiQ7XCJjaGVja2VkXCI9PWEucHJvcGVydHlOYW1lJiZ0aGlzLiQuY2hlY2tlZCYmYi5maXJlKFwiY2hhbmdlXCIse3ZhbHVlOnRoaXMuZ2V0QXR0cmlidXRlKFwidmFsdWVcIil9KX0pfSx0aGlzKTt0aGlzLm9uKFwiY2hhbmdlXCIsYSk7cmV0dXJuIG51bGx9fX0scSwhMCk7Q0tFRElUT1IudWkuZGlhbG9nLmZpbGUucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IudWkuZGlhbG9nLmxhYmVsZWRFbGVtZW50LHEse2dldElucHV0RWxlbWVudDpmdW5jdGlvbigpe3ZhciBiPUNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQodGhpcy5fLmZyYW1lSWQpLmdldEZyYW1lRG9jdW1lbnQoKTtyZXR1cm4gMDxiLiQuZm9ybXMubGVuZ3RoP25ldyBDS0VESVRPUi5kb20uZWxlbWVudChiLiQuZm9ybXNbMF0uZWxlbWVudHNbMF0pOlxudGhpcy5nZXRFbGVtZW50KCl9LHN1Ym1pdDpmdW5jdGlvbigpe3RoaXMuZ2V0SW5wdXRFbGVtZW50KCkuZ2V0UGFyZW50KCkuJC5zdWJtaXQoKTtyZXR1cm4gdGhpc30sZ2V0QWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0SW5wdXRFbGVtZW50KCkuZ2V0UGFyZW50KCkuJC5hY3Rpb259LHJlZ2lzdGVyRXZlbnRzOmZ1bmN0aW9uKGIpe3ZhciBhPS9eb24oW0EtWl1cXHcrKS8sZCxmPWZ1bmN0aW9uKGEsYixjLGQpe2Eub24oXCJmb3JtTG9hZGVkXCIsZnVuY3Rpb24oKXthLmdldElucHV0RWxlbWVudCgpLm9uKGMsZCxhKX0pfSxjO2ZvcihjIGluIGIpaWYoZD1jLm1hdGNoKGEpKXRoaXMuZXZlbnRQcm9jZXNzb3JzW2NdP3RoaXMuZXZlbnRQcm9jZXNzb3JzW2NdLmNhbGwodGhpcyx0aGlzLl8uZGlhbG9nLGJbY10pOmYodGhpcyx0aGlzLl8uZGlhbG9nLGRbMV0udG9Mb3dlckNhc2UoKSxiW2NdKTtyZXR1cm4gdGhpc30scmVzZXQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKCl7ZC4kLm9wZW4oKTtcbnZhciBiPVwiXCI7Zi5zaXplJiYoYj1mLnNpemUtKENLRURJVE9SLmVudi5pZT83OjApKTt2YXIgaD1hLmZyYW1lSWQrXCJfaW5wdXRcIjtkLiQud3JpdGUoWydcXHgzY2h0bWwgZGlyXFx4M2RcIicrZysnXCIgbGFuZ1xceDNkXCInK2srJ1wiXFx4M2VcXHgzY2hlYWRcXHgzZVxceDNjdGl0bGVcXHgzZVxceDNjL3RpdGxlXFx4M2VcXHgzYy9oZWFkXFx4M2VcXHgzY2JvZHkgc3R5bGVcXHgzZFwibWFyZ2luOiAwOyBvdmVyZmxvdzogaGlkZGVuOyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcIlxceDNlJywnXFx4M2Nmb3JtIGVuY3R5cGVcXHgzZFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiIG1ldGhvZFxceDNkXCJQT1NUXCIgZGlyXFx4M2RcIicrZysnXCIgbGFuZ1xceDNkXCInK2srJ1wiIGFjdGlvblxceDNkXCInLENLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoZi5hY3Rpb24pLCdcIlxceDNlXFx4M2NsYWJlbCBpZFxceDNkXCInLGEubGFiZWxJZCwnXCIgZm9yXFx4M2RcIicsaCwnXCIgc3R5bGVcXHgzZFwiZGlzcGxheTpub25lXCJcXHgzZScsQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZShmLmxhYmVsKSxcbidcXHgzYy9sYWJlbFxceDNlXFx4M2NpbnB1dCBzdHlsZVxceDNkXCJ3aWR0aDoxMDAlXCIgaWRcXHgzZFwiJyxoLCdcIiBhcmlhLWxhYmVsbGVkYnlcXHgzZFwiJyxhLmxhYmVsSWQsJ1wiIHR5cGVcXHgzZFwiZmlsZVwiIG5hbWVcXHgzZFwiJyxDS0VESVRPUi50b29scy5odG1sRW5jb2RlKGYuaWR8fFwiY2tlX3VwbG9hZFwiKSwnXCIgc2l6ZVxceDNkXCInLENLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoMDxiP2I6XCJcIiksJ1wiIC9cXHgzZVxceDNjL2Zvcm1cXHgzZVxceDNjL2JvZHlcXHgzZVxceDNjL2h0bWxcXHgzZVxceDNjc2NyaXB0XFx4M2UnLENLRURJVE9SLmVudi5pZT9cIihcIitDS0VESVRPUi50b29scy5maXhEb21haW4rXCIpKCk7XCI6XCJcIixcIndpbmRvdy5wYXJlbnQuQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKFwiK2UrXCIpO1wiLFwid2luZG93Lm9uYmVmb3JldW5sb2FkIFxceDNkIGZ1bmN0aW9uKCkge3dpbmRvdy5wYXJlbnQuQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKFwiK20rXCIpfVwiLFwiXFx4M2Mvc2NyaXB0XFx4M2VcIl0uam9pbihcIlwiKSk7XG5kLiQuY2xvc2UoKTtmb3IoYj0wO2I8Yy5sZW5ndGg7YisrKWNbYl0uZW5hYmxlKCl9dmFyIGE9dGhpcy5fLGQ9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChhLmZyYW1lSWQpLmdldEZyYW1lRG9jdW1lbnQoKSxmPWEuZGVmaW5pdGlvbixjPWEuYnV0dG9ucyxlPXRoaXMuZm9ybUxvYWRlZE51bWJlcixtPXRoaXMuZm9ybVVubG9hZE51bWJlcixnPWEuZGlhbG9nLl8uZWRpdG9yLmxhbmcuZGlyLGs9YS5kaWFsb2cuXy5lZGl0b3IubGFuZ0NvZGU7ZXx8KGU9dGhpcy5mb3JtTG9hZGVkTnVtYmVyPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKCl7dGhpcy5maXJlKFwiZm9ybUxvYWRlZFwiKX0sdGhpcyksbT10aGlzLmZvcm1VbmxvYWROdW1iZXI9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oKXt0aGlzLmdldElucHV0RWxlbWVudCgpLmNsZWFyQ3VzdG9tRGF0YSgpfSx0aGlzKSx0aGlzLmdldERpYWxvZygpLl8uZWRpdG9yLm9uKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7Q0tFRElUT1IudG9vbHMucmVtb3ZlRnVuY3Rpb24oZSk7XG5DS0VESVRPUi50b29scy5yZW1vdmVGdW5jdGlvbihtKX0pKTtDS0VESVRPUi5lbnYuZ2Vja28/c2V0VGltZW91dChiLDUwMCk6YigpfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldElucHV0RWxlbWVudCgpLiQudmFsdWV8fFwiXCJ9LHNldEluaXRWYWx1ZTpmdW5jdGlvbigpe3RoaXMuXy5pbml0VmFsdWU9XCJcIn0sZXZlbnRQcm9jZXNzb3JzOntvbkNoYW5nZTpmdW5jdGlvbihiLGEpe3RoaXMuXy5kb21PbkNoYW5nZVJlZ2lzdGVyZWR8fCh0aGlzLm9uKFwiZm9ybUxvYWRlZFwiLGZ1bmN0aW9uKCl7dGhpcy5nZXRJbnB1dEVsZW1lbnQoKS5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7dGhpcy5maXJlKFwiY2hhbmdlXCIse3ZhbHVlOnRoaXMuZ2V0VmFsdWUoKX0pfSx0aGlzKX0sdGhpcyksdGhpcy5fLmRvbU9uQ2hhbmdlUmVnaXN0ZXJlZD0hMCk7dGhpcy5vbihcImNoYW5nZVwiLGEpfX0sa2V5Ym9hcmRGb2N1c2FibGU6ITB9LCEwKTtDS0VESVRPUi51aS5kaWFsb2cuZmlsZUJ1dHRvbi5wcm90b3R5cGU9XG5uZXcgQ0tFRElUT1IudWkuZGlhbG9nLmJ1dHRvbjtDS0VESVRPUi51aS5kaWFsb2cuZmllbGRzZXQucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmNsb25lKENLRURJVE9SLnVpLmRpYWxvZy5oYm94LnByb3RvdHlwZSk7Q0tFRElUT1IuZGlhbG9nLmFkZFVJRWxlbWVudChcInRleHRcIix2KTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwicGFzc3dvcmRcIix2KTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwidGV4dGFyZWFcIixuKTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwiY2hlY2tib3hcIixuKTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwicmFkaW9cIixuKTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwiYnV0dG9uXCIsbik7Q0tFRElUT1IuZGlhbG9nLmFkZFVJRWxlbWVudChcInNlbGVjdFwiLG4pO0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJmaWxlXCIsbik7Q0tFRElUT1IuZGlhbG9nLmFkZFVJRWxlbWVudChcImZpbGVCdXR0b25cIixuKTtDS0VESVRPUi5kaWFsb2cuYWRkVUlFbGVtZW50KFwiaHRtbFwiLFxubik7Q0tFRElUT1IuZGlhbG9nLmFkZFVJRWxlbWVudChcImZpZWxkc2V0XCIse2J1aWxkOmZ1bmN0aW9uKGIsYSxkKXtmb3IodmFyIGY9YS5jaGlsZHJlbixjLGU9W10saD1bXSxnPTA7ZzxmLmxlbmd0aCYmKGM9ZltnXSk7ZysrKXt2YXIgaz1bXTtlLnB1c2goayk7aC5wdXNoKENLRURJVE9SLmRpYWxvZy5fLnVpRWxlbWVudEJ1aWxkZXJzW2MudHlwZV0uYnVpbGQoYixjLGspKX1yZXR1cm4gbmV3IENLRURJVE9SLnVpLmRpYWxvZ1thLnR5cGVdKGIsaCxlLGQsYSl9fSl9fSk7Q0tFRElUT1IuRElBTE9HX1JFU0laRV9OT05FPTA7Q0tFRElUT1IuRElBTE9HX1JFU0laRV9XSURUSD0xO0NLRURJVE9SLkRJQUxPR19SRVNJWkVfSEVJR0hUPTI7Q0tFRElUT1IuRElBTE9HX1JFU0laRV9CT1RIPTM7Q0tFRElUT1IuRElBTE9HX1NUQVRFX0lETEU9MTtDS0VESVRPUi5ESUFMT0dfU1RBVEVfQlVTWT0yO1xuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24geCgpe2Zvcih2YXIgYT10aGlzLl8udGFiSWRMaXN0Lmxlbmd0aCxiPUNLRURJVE9SLnRvb2xzLmluZGV4T2YodGhpcy5fLnRhYklkTGlzdCx0aGlzLl8uY3VycmVudFRhYklkKSthLGM9Yi0xO2M+Yi1hO2MtLSlpZih0aGlzLl8udGFic1t0aGlzLl8udGFiSWRMaXN0W2MlYV1dWzBdLiQub2Zmc2V0SGVpZ2h0KXJldHVybiB0aGlzLl8udGFiSWRMaXN0W2MlYV07cmV0dXJuIG51bGx9ZnVuY3Rpb24gQSgpe2Zvcih2YXIgYT10aGlzLl8udGFiSWRMaXN0Lmxlbmd0aCxiPUNLRURJVE9SLnRvb2xzLmluZGV4T2YodGhpcy5fLnRhYklkTGlzdCx0aGlzLl8uY3VycmVudFRhYklkKSxjPWIrMTtjPGIrYTtjKyspaWYodGhpcy5fLnRhYnNbdGhpcy5fLnRhYklkTGlzdFtjJWFdXVswXS4kLm9mZnNldEhlaWdodClyZXR1cm4gdGhpcy5fLnRhYklkTGlzdFtjJWFdO3JldHVybiBudWxsfWZ1bmN0aW9uIEsoYSxiKXtmb3IodmFyIGM9YS4kLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIiksXG5kPTAsZT1jLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoY1tkXSk7XCJ0ZXh0XCI9PWYuZ2V0QXR0cmlidXRlKFwidHlwZVwiKS50b0xvd2VyQ2FzZSgpJiYoYj8oZi5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLGYuZ2V0Q3VzdG9tRGF0YShcImZha2VfdmFsdWVcIil8fFwiXCIpLGYucmVtb3ZlQ3VzdG9tRGF0YShcImZha2VfdmFsdWVcIikpOihmLnNldEN1c3RvbURhdGEoXCJmYWtlX3ZhbHVlXCIsZi5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSksZi5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLFwiXCIpKSl9fWZ1bmN0aW9uIFQoYSxiKXt2YXIgYz10aGlzLmdldElucHV0RWxlbWVudCgpO2MmJihhP2MucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1pbnZhbGlkXCIpOmMuc2V0QXR0cmlidXRlKFwiYXJpYS1pbnZhbGlkXCIsITApKTthfHwodGhpcy5zZWxlY3Q/dGhpcy5zZWxlY3QoKTp0aGlzLmZvY3VzKCkpO2ImJmFsZXJ0KGIpO3RoaXMuZmlyZShcInZhbGlkYXRlZFwiLHt2YWxpZDphLG1zZzpifSl9XG5mdW5jdGlvbiBVKCl7dmFyIGE9dGhpcy5nZXRJbnB1dEVsZW1lbnQoKTthJiZhLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtaW52YWxpZFwiKX1mdW5jdGlvbiBWKGEpe3ZhciBiPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKENLRURJVE9SLmFkZFRlbXBsYXRlKFwiZGlhbG9nXCIsVykub3V0cHV0KHtpZDpDS0VESVRPUi50b29scy5nZXROZXh0TnVtYmVyKCksZWRpdG9ySWQ6YS5pZCxsYW5nRGlyOmEubGFuZy5kaXIsbGFuZ0NvZGU6YS5sYW5nQ29kZSxlZGl0b3JEaWFsb2dDbGFzczpcImNrZV9lZGl0b3JfXCIrYS5uYW1lLnJlcGxhY2UoL1xcLi9nLFwiXFxcXC5cIikrXCJfZGlhbG9nXCIsY2xvc2VUaXRsZTphLmxhbmcuY29tbW9uLmNsb3NlLGhpZHBpOkNLRURJVE9SLmVudi5oaWRwaT9cImNrZV9oaWRwaVwiOlwiXCJ9KSksYz1iLmdldENoaWxkKFswLDAsMCwwLDBdKSxkPWMuZ2V0Q2hpbGQoMCksZT1jLmdldENoaWxkKDEpO2EucGx1Z2lucy5jbGlwYm9hcmQmJkNLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkLnByZXZlbnREZWZhdWx0RHJvcE9uRWxlbWVudChjKTtcbiFDS0VESVRPUi5lbnYuaWV8fENLRURJVE9SLmVudi5xdWlya3N8fENLRURJVE9SLmVudi5lZGdlfHwoYT1cImphdmFzY3JpcHQ6dm9pZChmdW5jdGlvbigpe1wiK2VuY29kZVVSSUNvbXBvbmVudChcImRvY3VtZW50Lm9wZW4oKTsoXCIrQ0tFRElUT1IudG9vbHMuZml4RG9tYWluK1wiKSgpO2RvY3VtZW50LmNsb3NlKCk7XCIpK1wifSgpKVwiLENLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKCdcXHgzY2lmcmFtZSBmcmFtZUJvcmRlclxceDNkXCIwXCIgY2xhc3NcXHgzZFwiY2tlX2lmcmFtZV9zaGltXCIgc3JjXFx4M2RcIicrYSsnXCIgdGFiSW5kZXhcXHgzZFwiLTFcIlxceDNlXFx4M2MvaWZyYW1lXFx4M2UnKS5hcHBlbmRUbyhjLmdldFBhcmVudCgpKSk7ZC51bnNlbGVjdGFibGUoKTtlLnVuc2VsZWN0YWJsZSgpO3JldHVybntlbGVtZW50OmIscGFydHM6e2RpYWxvZzpiLmdldENoaWxkKDApLHRpdGxlOmQsY2xvc2U6ZSx0YWJzOmMuZ2V0Q2hpbGQoMiksY29udGVudHM6Yy5nZXRDaGlsZChbMywwLDAsMF0pLFxuZm9vdGVyOmMuZ2V0Q2hpbGQoWzMsMCwxLDBdKX19fWZ1bmN0aW9uIEwoYSxiLGMpe3RoaXMuZWxlbWVudD1iO3RoaXMuZm9jdXNJbmRleD1jO3RoaXMudGFiSW5kZXg9MDt0aGlzLmlzRm9jdXNhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIWIuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIikmJmIuaXNWaXNpYmxlKCl9O3RoaXMuZm9jdXM9ZnVuY3Rpb24oKXthLl8uY3VycmVudEZvY3VzSW5kZXg9dGhpcy5mb2N1c0luZGV4O3RoaXMuZWxlbWVudC5mb2N1cygpfTtiLm9uKFwia2V5ZG93blwiLGZ1bmN0aW9uKGEpe2EuZGF0YS5nZXRLZXlzdHJva2UoKWluezMyOjEsMTM6MX0mJnRoaXMuZmlyZShcImNsaWNrXCIpfSk7Yi5vbihcImZvY3VzXCIsZnVuY3Rpb24oKXt0aGlzLmZpcmUoXCJtb3VzZW92ZXJcIil9KTtiLm9uKFwiYmx1clwiLGZ1bmN0aW9uKCl7dGhpcy5maXJlKFwibW91c2VvdXRcIil9KX1mdW5jdGlvbiBYKGEpe2Z1bmN0aW9uIGIoKXthLmxheW91dCgpfXZhciBjPUNLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpO1xuYy5vbihcInJlc2l6ZVwiLGIpO2Eub24oXCJoaWRlXCIsZnVuY3Rpb24oKXtjLnJlbW92ZUxpc3RlbmVyKFwicmVzaXplXCIsYil9KX1mdW5jdGlvbiBNKGEsYil7dGhpcy5fPXtkaWFsb2c6YX07Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMsYil9ZnVuY3Rpb24gWShhKXtmdW5jdGlvbiBiKGIpe3ZhciBjPWEuZ2V0U2l6ZSgpLGs9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCkuZ2V0Vmlld1BhbmVTaXplKCkscT1iLmRhdGEuJC5zY3JlZW5YLG49Yi5kYXRhLiQuc2NyZWVuWSxyPXEtZC54LGw9bi1kLnk7ZD17eDpxLHk6bn07ZS54Kz1yO2UueSs9bDthLm1vdmUoZS54K2hbM108Zz8taFszXTplLngtaFsxXT5rLndpZHRoLWMud2lkdGgtZz9rLndpZHRoLWMud2lkdGgrKFwicnRsXCI9PWYubGFuZy5kaXI/MDpoWzFdKTplLngsZS55K2hbMF08Zz8taFswXTplLnktaFsyXT5rLmhlaWdodC1jLmhlaWdodC1nP2suaGVpZ2h0LWMuaGVpZ2h0K2hbMl06ZS55LDEpO2IuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfVxuZnVuY3Rpb24gYygpe0NLRURJVE9SLmRvY3VtZW50LnJlbW92ZUxpc3RlbmVyKFwibW91c2Vtb3ZlXCIsYik7Q0tFRElUT1IuZG9jdW1lbnQucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZXVwXCIsYyk7aWYoQ0tFRElUT1IuZW52LmllNkNvbXBhdCl7dmFyIGE9dS5nZXRDaGlsZCgwKS5nZXRGcmFtZURvY3VtZW50KCk7YS5yZW1vdmVMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGIpO2EucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZXVwXCIsYyl9fXZhciBkPW51bGwsZT1udWxsLGY9YS5nZXRQYXJlbnRFZGl0b3IoKSxnPWYuY29uZmlnLmRpYWxvZ19tYWduZXREaXN0YW5jZSxoPUNLRURJVE9SLnNraW4ubWFyZ2luc3x8WzAsMCwwLDBdO1widW5kZWZpbmVkXCI9PXR5cGVvZiBnJiYoZz0yMCk7YS5wYXJ0cy50aXRsZS5vbihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGcpe2Q9e3g6Zy5kYXRhLiQuc2NyZWVuWCx5OmcuZGF0YS4kLnNjcmVlbll9O0NLRURJVE9SLmRvY3VtZW50Lm9uKFwibW91c2Vtb3ZlXCIsYik7Q0tFRElUT1IuZG9jdW1lbnQub24oXCJtb3VzZXVwXCIsXG5jKTtlPWEuZ2V0UG9zaXRpb24oKTtpZihDS0VESVRPUi5lbnYuaWU2Q29tcGF0KXt2YXIgZj11LmdldENoaWxkKDApLmdldEZyYW1lRG9jdW1lbnQoKTtmLm9uKFwibW91c2Vtb3ZlXCIsYik7Zi5vbihcIm1vdXNldXBcIixjKX1nLmRhdGEucHJldmVudERlZmF1bHQoKX0sYSl9ZnVuY3Rpb24gWihhKXtmdW5jdGlvbiBiKGIpe3ZhciBjPVwicnRsXCI9PWYubGFuZy5kaXIsbj1rLndpZHRoLHE9ay5oZWlnaHQsRz1uKyhiLmRhdGEuJC5zY3JlZW5YLW0ueCkqKGM/LTE6MSkqKGEuXy5tb3ZlZD8xOjIpLEg9cSsoYi5kYXRhLiQuc2NyZWVuWS1tLnkpKihhLl8ubW92ZWQ/MToyKSxCPWEuXy5lbGVtZW50LmdldEZpcnN0KCksQj1jJiZCLmdldENvbXB1dGVkU3R5bGUoXCJyaWdodFwiKSxDPWEuZ2V0UG9zaXRpb24oKTtDLnkrSD5wLmhlaWdodCYmKEg9cC5oZWlnaHQtQy55KTsoYz9COkMueCkrRz5wLndpZHRoJiYoRz1wLndpZHRoLShjP0I6Qy54KSk7aWYoZT09Q0tFRElUT1IuRElBTE9HX1JFU0laRV9XSURUSHx8XG5lPT1DS0VESVRPUi5ESUFMT0dfUkVTSVpFX0JPVEgpbj1NYXRoLm1heChkLm1pbldpZHRofHwwLEctZyk7aWYoZT09Q0tFRElUT1IuRElBTE9HX1JFU0laRV9IRUlHSFR8fGU9PUNLRURJVE9SLkRJQUxPR19SRVNJWkVfQk9USClxPU1hdGgubWF4KGQubWluSGVpZ2h0fHwwLEgtaCk7YS5yZXNpemUobixxKTthLl8ubW92ZWR8fGEubGF5b3V0KCk7Yi5kYXRhLnByZXZlbnREZWZhdWx0KCl9ZnVuY3Rpb24gYygpe0NLRURJVE9SLmRvY3VtZW50LnJlbW92ZUxpc3RlbmVyKFwibW91c2V1cFwiLGMpO0NLRURJVE9SLmRvY3VtZW50LnJlbW92ZUxpc3RlbmVyKFwibW91c2Vtb3ZlXCIsYik7cSYmKHEucmVtb3ZlKCkscT1udWxsKTtpZihDS0VESVRPUi5lbnYuaWU2Q29tcGF0KXt2YXIgYT11LmdldENoaWxkKDApLmdldEZyYW1lRG9jdW1lbnQoKTthLnJlbW92ZUxpc3RlbmVyKFwibW91c2V1cFwiLGMpO2EucmVtb3ZlTGlzdGVuZXIoXCJtb3VzZW1vdmVcIixiKX19dmFyIGQ9YS5kZWZpbml0aW9uLGU9ZC5yZXNpemFibGU7XG5pZihlIT1DS0VESVRPUi5ESUFMT0dfUkVTSVpFX05PTkUpe3ZhciBmPWEuZ2V0UGFyZW50RWRpdG9yKCksZyxoLHAsbSxrLHEsbj1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbihlKXtrPWEuZ2V0U2l6ZSgpO3ZhciBkPWEucGFydHMuY29udGVudHM7ZC4kLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaWZyYW1lXCIpLmxlbmd0aCYmKHE9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoJ1xceDNjZGl2IGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfcmVzaXplX2NvdmVyXCIgc3R5bGVcXHgzZFwiaGVpZ2h0OiAxMDAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAxMDAlO1wiXFx4M2VcXHgzYy9kaXZcXHgzZScpLGQuYXBwZW5kKHEpKTtoPWsuaGVpZ2h0LWEucGFydHMuY29udGVudHMuZ2V0U2l6ZShcImhlaWdodFwiLCEoQ0tFRElUT1IuZW52LmdlY2tvfHxDS0VESVRPUi5lbnYuaWUmJkNLRURJVE9SLmVudi5xdWlya3MpKTtnPWsud2lkdGgtYS5wYXJ0cy5jb250ZW50cy5nZXRTaXplKFwid2lkdGhcIixcbjEpO209e3g6ZS5zY3JlZW5YLHk6ZS5zY3JlZW5ZfTtwPUNLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpLmdldFZpZXdQYW5lU2l6ZSgpO0NLRURJVE9SLmRvY3VtZW50Lm9uKFwibW91c2Vtb3ZlXCIsYik7Q0tFRElUT1IuZG9jdW1lbnQub24oXCJtb3VzZXVwXCIsYyk7Q0tFRElUT1IuZW52LmllNkNvbXBhdCYmKGQ9dS5nZXRDaGlsZCgwKS5nZXRGcmFtZURvY3VtZW50KCksZC5vbihcIm1vdXNlbW92ZVwiLGIpLGQub24oXCJtb3VzZXVwXCIsYykpO2UucHJldmVudERlZmF1bHQmJmUucHJldmVudERlZmF1bHQoKX0pO2Eub24oXCJsb2FkXCIsZnVuY3Rpb24oKXt2YXIgYj1cIlwiO2U9PUNLRURJVE9SLkRJQUxPR19SRVNJWkVfV0lEVEg/Yj1cIiBja2VfcmVzaXplcl9ob3Jpem9udGFsXCI6ZT09Q0tFRElUT1IuRElBTE9HX1JFU0laRV9IRUlHSFQmJihiPVwiIGNrZV9yZXNpemVyX3ZlcnRpY2FsXCIpO2I9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoJ1xceDNjZGl2IGNsYXNzXFx4M2RcImNrZV9yZXNpemVyJytcbmIrXCIgY2tlX3Jlc2l6ZXJfXCIrZi5sYW5nLmRpcisnXCIgdGl0bGVcXHgzZFwiJytDS0VESVRPUi50b29scy5odG1sRW5jb2RlKGYubGFuZy5jb21tb24ucmVzaXplKSsnXCIgb25tb3VzZWRvd25cXHgzZFwiQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKCcrbisnLCBldmVudCApXCJcXHgzZScrKFwibHRyXCI9PWYubGFuZy5kaXI/XCLil6JcIjpcIuKXo1wiKStcIlxceDNjL2RpdlxceDNlXCIpO2EucGFydHMuZm9vdGVyLmFwcGVuZChiLDEpfSk7Zi5vbihcImRlc3Ryb3lcIixmdW5jdGlvbigpe0NLRURJVE9SLnRvb2xzLnJlbW92ZUZ1bmN0aW9uKG4pfSl9fWZ1bmN0aW9uIEkoYSl7YS5kYXRhLnByZXZlbnREZWZhdWx0KDEpfWZ1bmN0aW9uIE4oYSl7dmFyIGI9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCksYz1hLmNvbmZpZyxkPWMuZGlhbG9nX2JhY2tncm91bmRDb3ZlckNvbG9yfHxcIndoaXRlXCIsZT1jLmRpYWxvZ19iYWNrZ3JvdW5kQ292ZXJPcGFjaXR5LGY9Yy5iYXNlRmxvYXRaSW5kZXgsYz1DS0VESVRPUi50b29scy5nZW5LZXkoZCxcbmUsZiksZz16W2NdO2c/Zy5zaG93KCk6KGY9WydcXHgzY2RpdiB0YWJJbmRleFxceDNkXCItMVwiIHN0eWxlXFx4M2RcInBvc2l0aW9uOiAnLENLRURJVE9SLmVudi5pZTZDb21wYXQ/XCJhYnNvbHV0ZVwiOlwiZml4ZWRcIixcIjsgei1pbmRleDogXCIsZixcIjsgdG9wOiAwcHg7IGxlZnQ6IDBweDsgXCIsQ0tFRElUT1IuZW52LmllNkNvbXBhdD9cIlwiOlwiYmFja2dyb3VuZC1jb2xvcjogXCIrZCwnXCIgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ19iYWNrZ3JvdW5kX2NvdmVyXCJcXHgzZSddLENLRURJVE9SLmVudi5pZTZDb21wYXQmJihkPVwiXFx4M2NodG1sXFx4M2VcXHgzY2JvZHkgc3R5bGVcXHgzZFxcXFwnYmFja2dyb3VuZC1jb2xvcjpcIitkK1wiO1xcXFwnXFx4M2VcXHgzYy9ib2R5XFx4M2VcXHgzYy9odG1sXFx4M2VcIixmLnB1c2goJ1xceDNjaWZyYW1lIGhpZGVmb2N1c1xceDNkXCJ0cnVlXCIgZnJhbWVib3JkZXJcXHgzZFwiMFwiIGlkXFx4M2RcImNrZV9kaWFsb2dfYmFja2dyb3VuZF9pZnJhbWVcIiBzcmNcXHgzZFwiamF2YXNjcmlwdDonKSxmLnB1c2goXCJ2b2lkKChmdW5jdGlvbigpe1wiK1xuZW5jb2RlVVJJQ29tcG9uZW50KFwiZG9jdW1lbnQub3BlbigpOyhcIitDS0VESVRPUi50b29scy5maXhEb21haW4rXCIpKCk7ZG9jdW1lbnQud3JpdGUoICdcIitkK1wiJyApO2RvY3VtZW50LmNsb3NlKCk7XCIpK1wifSkoKSlcIiksZi5wdXNoKCdcIiBzdHlsZVxceDNkXCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOjA7d2lkdGg6MTAwJTtoZWlnaHQ6IDEwMCU7ZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGEob3BhY2l0eVxceDNkMClcIlxceDNlXFx4M2MvaWZyYW1lXFx4M2UnKSksZi5wdXNoKFwiXFx4M2MvZGl2XFx4M2VcIiksZz1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbChmLmpvaW4oXCJcIikpLGcuc2V0T3BhY2l0eSh2b2lkIDAhPT1lP2U6LjUpLGcub24oXCJrZXlkb3duXCIsSSksZy5vbihcImtleXByZXNzXCIsSSksZy5vbihcImtleXVwXCIsSSksZy5hcHBlbmRUbyhDS0VESVRPUi5kb2N1bWVudC5nZXRCb2R5KCkpLHpbY109Zyk7YS5mb2N1c01hbmFnZXIuYWRkKGcpO1xudT1nO2E9ZnVuY3Rpb24oKXt2YXIgYT1iLmdldFZpZXdQYW5lU2l6ZSgpO2cuc2V0U3R5bGVzKHt3aWR0aDphLndpZHRoK1wicHhcIixoZWlnaHQ6YS5oZWlnaHQrXCJweFwifSl9O3ZhciBoPWZ1bmN0aW9uKCl7dmFyIGE9Yi5nZXRTY3JvbGxQb3NpdGlvbigpLGM9Q0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFRvcDtnLnNldFN0eWxlcyh7bGVmdDphLngrXCJweFwiLHRvcDphLnkrXCJweFwifSk7aWYoYyl7ZG8gYT1jLmdldFBvc2l0aW9uKCksYy5tb3ZlKGEueCxhLnkpO3doaWxlKGM9Yy5fLnBhcmVudERpYWxvZyl9fTtKPWE7Yi5vbihcInJlc2l6ZVwiLGEpO2EoKTtDS0VESVRPUi5lbnYubWFjJiZDS0VESVRPUi5lbnYud2Via2l0fHxnLmZvY3VzKCk7aWYoQ0tFRElUT1IuZW52LmllNkNvbXBhdCl7dmFyIHA9ZnVuY3Rpb24oKXtoKCk7YXJndW1lbnRzLmNhbGxlZS5wcmV2U2Nyb2xsSGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2IuJC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cC5wcmV2U2Nyb2xsSGFuZGxlcj1cbndpbmRvdy5vbnNjcm9sbHx8ZnVuY3Rpb24oKXt9O3dpbmRvdy5vbnNjcm9sbD1wfSwwKTtoKCl9fWZ1bmN0aW9uIE8oYSl7dSYmKGEuZm9jdXNNYW5hZ2VyLnJlbW92ZSh1KSxhPUNLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpLHUuaGlkZSgpLGEucmVtb3ZlTGlzdGVuZXIoXCJyZXNpemVcIixKKSxDS0VESVRPUi5lbnYuaWU2Q29tcGF0JiZhLiQuc2V0VGltZW91dChmdW5jdGlvbigpe3dpbmRvdy5vbnNjcm9sbD13aW5kb3cub25zY3JvbGwmJndpbmRvdy5vbnNjcm9sbC5wcmV2U2Nyb2xsSGFuZGxlcnx8bnVsbH0sMCksSj1udWxsKX12YXIgdj1DS0VESVRPUi50b29scy5jc3NMZW5ndGgsVz0nXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX3Jlc2V0X2FsbCB7ZWRpdG9ySWR9IHtlZGl0b3JEaWFsb2dDbGFzc30ge2hpZHBpfVwiIGRpclxceDNkXCJ7bGFuZ0Rpcn1cIiBsYW5nXFx4M2RcIntsYW5nQ29kZX1cIiByb2xlXFx4M2RcImRpYWxvZ1wiIGFyaWEtbGFiZWxsZWRieVxceDNkXCJja2VfZGlhbG9nX3RpdGxlX3tpZH1cIlxceDNlXFx4M2N0YWJsZSBjbGFzc1xceDNkXCJja2VfZGlhbG9nICcrXG5DS0VESVRPUi5lbnYuY3NzQ2xhc3MrJyBja2Vfe2xhbmdEaXJ9XCIgc3R5bGVcXHgzZFwicG9zaXRpb246YWJzb2x1dGVcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2VcXHgzY3RyXFx4M2VcXHgzY3RkIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZVxceDNjZGl2IGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfYm9keVwiIHJvbGVcXHgzZFwicHJlc2VudGF0aW9uXCJcXHgzZVxceDNjZGl2IGlkXFx4M2RcImNrZV9kaWFsb2dfdGl0bGVfe2lkfVwiIGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfdGl0bGVcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2VcXHgzYy9kaXZcXHgzZVxceDNjYSBpZFxceDNkXCJja2VfZGlhbG9nX2Nsb3NlX2J1dHRvbl97aWR9XCIgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ19jbG9zZV9idXR0b25cIiBocmVmXFx4M2RcImphdmFzY3JpcHQ6dm9pZCgwKVwiIHRpdGxlXFx4M2RcIntjbG9zZVRpdGxlfVwiIHJvbGVcXHgzZFwiYnV0dG9uXCJcXHgzZVxceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfbGFiZWxcIlxceDNlWFxceDNjL3NwYW5cXHgzZVxceDNjL2FcXHgzZVxceDNjZGl2IGlkXFx4M2RcImNrZV9kaWFsb2dfdGFic197aWR9XCIgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ190YWJzXCIgcm9sZVxceDNkXCJ0YWJsaXN0XCJcXHgzZVxceDNjL2RpdlxceDNlXFx4M2N0YWJsZSBjbGFzc1xceDNkXCJja2VfZGlhbG9nX2NvbnRlbnRzXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNlXFx4M2N0clxceDNlXFx4M2N0ZCBpZFxceDNkXCJja2VfZGlhbG9nX2NvbnRlbnRzX3tpZH1cIiBjbGFzc1xceDNkXCJja2VfZGlhbG9nX2NvbnRlbnRzX2JvZHlcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2VcXHgzYy90ZFxceDNlXFx4M2MvdHJcXHgzZVxceDNjdHJcXHgzZVxceDNjdGQgaWRcXHgzZFwiY2tlX2RpYWxvZ19mb290ZXJfe2lkfVwiIGNsYXNzXFx4M2RcImNrZV9kaWFsb2dfZm9vdGVyXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNlXFx4M2MvdGRcXHgzZVxceDNjL3RyXFx4M2VcXHgzYy90YWJsZVxceDNlXFx4M2MvZGl2XFx4M2VcXHgzYy90ZFxceDNlXFx4M2MvdHJcXHgzZVxceDNjL3RhYmxlXFx4M2VcXHgzYy9kaXZcXHgzZSc7XG5DS0VESVRPUi5kaWFsb2c9ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKCl7dmFyIGE9bC5fLmZvY3VzTGlzdDthLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS50YWJJbmRleCE9Yi50YWJJbmRleD9iLnRhYkluZGV4LWEudGFiSW5kZXg6YS5mb2N1c0luZGV4LWIuZm9jdXNJbmRleH0pO2Zvcih2YXIgYj1hLmxlbmd0aCxjPTA7YzxiO2MrKylhW2NdLmZvY3VzSW5kZXg9Y31mdW5jdGlvbiBkKGEpe3ZhciBiPWwuXy5mb2N1c0xpc3Q7YT1hfHwwO2lmKCEoMT5iLmxlbmd0aCkpe3ZhciBjPWwuXy5jdXJyZW50Rm9jdXNJbmRleDtsLl8udGFiQmFyTW9kZSYmMD5hJiYoYz0wKTt0cnl7YltjXS5nZXRJbnB1dEVsZW1lbnQoKS4kLmJsdXIoKX1jYXRjaChlKXt9dmFyIGQ9YyxnPTE8bC5fLnBhZ2VDb3VudDtkb3tkKz1hO2lmKGcmJiFsLl8udGFiQmFyTW9kZSYmKGQ9PWIubGVuZ3RofHwtMT09ZCkpe2wuXy50YWJCYXJNb2RlPSEwO2wuXy50YWJzW2wuXy5jdXJyZW50VGFiSWRdWzBdLmZvY3VzKCk7XG5sLl8uY3VycmVudEZvY3VzSW5kZXg9LTE7cmV0dXJufWQ9KGQrYi5sZW5ndGgpJWIubGVuZ3RoO2lmKGQ9PWMpYnJlYWt9d2hpbGUoYSYmIWJbZF0uaXNGb2N1c2FibGUoKSk7YltkXS5mb2N1cygpO1widGV4dFwiPT1iW2RdLnR5cGUmJmJbZF0uc2VsZWN0KCl9fWZ1bmN0aW9uIGUoYil7aWYobD09Q0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFRvcCl7dmFyIGM9Yi5kYXRhLmdldEtleXN0cm9rZSgpLGU9XCJydGxcIj09YS5sYW5nLmRpcixnPVszNywzOCwzOSw0MF07cT1uPTA7aWYoOT09Y3x8Yz09Q0tFRElUT1IuU0hJRlQrOSlkKGM9PUNLRURJVE9SLlNISUZUKzk/LTE6MSkscT0xO2Vsc2UgaWYoYz09Q0tFRElUT1IuQUxUKzEyMSYmIWwuXy50YWJCYXJNb2RlJiYxPGwuZ2V0UGFnZUNvdW50KCkpbC5fLnRhYkJhck1vZGU9ITAsbC5fLnRhYnNbbC5fLmN1cnJlbnRUYWJJZF1bMF0uZm9jdXMoKSxsLl8uY3VycmVudEZvY3VzSW5kZXg9LTEscT0xO2Vsc2UgaWYoLTEhPUNLRURJVE9SLnRvb2xzLmluZGV4T2YoZyxcbmMpJiZsLl8udGFiQmFyTW9kZSljPS0xIT1DS0VESVRPUi50b29scy5pbmRleE9mKFtlPzM5OjM3LDM4XSxjKT94LmNhbGwobCk6QS5jYWxsKGwpLGwuc2VsZWN0UGFnZShjKSxsLl8udGFic1tjXVswXS5mb2N1cygpLHE9MTtlbHNlIGlmKDEzIT1jJiYzMiE9Y3x8IWwuXy50YWJCYXJNb2RlKWlmKDEzPT1jKWM9Yi5kYXRhLmdldFRhcmdldCgpLGMuaXMoXCJhXCIsXCJidXR0b25cIixcInNlbGVjdFwiLFwidGV4dGFyZWFcIil8fGMuaXMoXCJpbnB1dFwiKSYmXCJidXR0b25cIj09Yy4kLnR5cGV8fCgoYz10aGlzLmdldEJ1dHRvbihcIm9rXCIpKSYmQ0tFRElUT1IudG9vbHMuc2V0VGltZW91dChjLmNsaWNrLDAsYykscT0xKSxuPTE7ZWxzZSBpZigyNz09YykoYz10aGlzLmdldEJ1dHRvbihcImNhbmNlbFwiKSk/Q0tFRElUT1IudG9vbHMuc2V0VGltZW91dChjLmNsaWNrLDAsYyk6ITEhPT10aGlzLmZpcmUoXCJjYW5jZWxcIix7aGlkZTohMH0pLmhpZGUmJnRoaXMuaGlkZSgpLG49MTtlbHNlIHJldHVybjtlbHNlIHRoaXMuc2VsZWN0UGFnZSh0aGlzLl8uY3VycmVudFRhYklkKSxcbnRoaXMuXy50YWJCYXJNb2RlPSExLHRoaXMuXy5jdXJyZW50Rm9jdXNJbmRleD0tMSxkKDEpLHE9MTtmKGIpfX1mdW5jdGlvbiBmKGEpe3E/YS5kYXRhLnByZXZlbnREZWZhdWx0KDEpOm4mJmEuZGF0YS5zdG9wUHJvcGFnYXRpb24oKX12YXIgZz1DS0VESVRPUi5kaWFsb2cuXy5kaWFsb2dEZWZpbml0aW9uc1tiXSxoPUNLRURJVE9SLnRvb2xzLmNsb25lKGFhKSxwPWEuY29uZmlnLmRpYWxvZ19idXR0b25zT3JkZXJ8fFwiT1NcIixtPWEubGFuZy5kaXIsaz17fSxxLG47KFwiT1NcIj09cCYmQ0tFRElUT1IuZW52Lm1hY3x8XCJydGxcIj09cCYmXCJsdHJcIj09bXx8XCJsdHJcIj09cCYmXCJydGxcIj09bSkmJmguYnV0dG9ucy5yZXZlcnNlKCk7Zz1DS0VESVRPUi50b29scy5leHRlbmQoZyhhKSxoKTtnPUNLRURJVE9SLnRvb2xzLmNsb25lKGcpO2c9bmV3IFAodGhpcyxnKTtoPVYoYSk7dGhpcy5fPXtlZGl0b3I6YSxlbGVtZW50OmguZWxlbWVudCxuYW1lOmIsY29udGVudFNpemU6e3dpZHRoOjAsaGVpZ2h0OjB9LFxuc2l6ZTp7d2lkdGg6MCxoZWlnaHQ6MH0sY29udGVudHM6e30sYnV0dG9uczp7fSxhY2Nlc3NLZXlNYXA6e30sdGFiczp7fSx0YWJJZExpc3Q6W10sY3VycmVudFRhYklkOm51bGwsY3VycmVudFRhYkluZGV4Om51bGwscGFnZUNvdW50OjAsbGFzdFRhYjpudWxsLHRhYkJhck1vZGU6ITEsZm9jdXNMaXN0OltdLGN1cnJlbnRGb2N1c0luZGV4OjAsaGFzRm9jdXM6ITF9O3RoaXMucGFydHM9aC5wYXJ0cztDS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5maXJlKFwiYXJpYVdpZGdldFwiLHRoaXMucGFydHMuY29udGVudHMpfSwwLHRoaXMpO2g9e3Bvc2l0aW9uOkNLRURJVE9SLmVudi5pZTZDb21wYXQ/XCJhYnNvbHV0ZVwiOlwiZml4ZWRcIix0b3A6MCx2aXNpYmlsaXR5OlwiaGlkZGVuXCJ9O2hbXCJydGxcIj09bT9cInJpZ2h0XCI6XCJsZWZ0XCJdPTA7dGhpcy5wYXJ0cy5kaWFsb2cuc2V0U3R5bGVzKGgpO0NLRURJVE9SLmV2ZW50LmNhbGwodGhpcyk7dGhpcy5kZWZpbml0aW9uPWc9Q0tFRElUT1IuZmlyZShcImRpYWxvZ0RlZmluaXRpb25cIixcbntuYW1lOmIsZGVmaW5pdGlvbjpnfSxhKS5kZWZpbml0aW9uO2lmKCEoXCJyZW1vdmVEaWFsb2dUYWJzXCJpbiBhLl8pJiZhLmNvbmZpZy5yZW1vdmVEaWFsb2dUYWJzKXtoPWEuY29uZmlnLnJlbW92ZURpYWxvZ1RhYnMuc3BsaXQoXCI7XCIpO2ZvcihtPTA7bTxoLmxlbmd0aDttKyspaWYocD1oW21dLnNwbGl0KFwiOlwiKSwyPT1wLmxlbmd0aCl7dmFyIHI9cFswXTtrW3JdfHwoa1tyXT1bXSk7a1tyXS5wdXNoKHBbMV0pfWEuXy5yZW1vdmVEaWFsb2dUYWJzPWt9aWYoYS5fLnJlbW92ZURpYWxvZ1RhYnMmJihrPWEuXy5yZW1vdmVEaWFsb2dUYWJzW2JdKSlmb3IobT0wO208ay5sZW5ndGg7bSsrKWcucmVtb3ZlQ29udGVudHMoa1ttXSk7aWYoZy5vbkxvYWQpdGhpcy5vbihcImxvYWRcIixnLm9uTG9hZCk7aWYoZy5vblNob3cpdGhpcy5vbihcInNob3dcIixnLm9uU2hvdyk7aWYoZy5vbkhpZGUpdGhpcy5vbihcImhpZGVcIixnLm9uSGlkZSk7aWYoZy5vbk9rKXRoaXMub24oXCJva1wiLGZ1bmN0aW9uKGIpe2EuZmlyZShcInNhdmVTbmFwc2hvdFwiKTtcbnNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmZpcmUoXCJzYXZlU25hcHNob3RcIil9LDApOyExPT09Zy5vbk9rLmNhbGwodGhpcyxiKSYmKGIuZGF0YS5oaWRlPSExKX0pO3RoaXMuc3RhdGU9Q0tFRElUT1IuRElBTE9HX1NUQVRFX0lETEU7aWYoZy5vbkNhbmNlbCl0aGlzLm9uKFwiY2FuY2VsXCIsZnVuY3Rpb24oYSl7ITE9PT1nLm9uQ2FuY2VsLmNhbGwodGhpcyxhKSYmKGEuZGF0YS5oaWRlPSExKX0pO3ZhciBsPXRoaXMsdD1mdW5jdGlvbihhKXt2YXIgYj1sLl8uY29udGVudHMsYz0hMSxkO2ZvcihkIGluIGIpZm9yKHZhciBlIGluIGJbZF0paWYoYz1hLmNhbGwodGhpcyxiW2RdW2VdKSlyZXR1cm59O3RoaXMub24oXCJva1wiLGZ1bmN0aW9uKGEpe3QoZnVuY3Rpb24oYil7aWYoYi52YWxpZGF0ZSl7dmFyIGM9Yi52YWxpZGF0ZSh0aGlzKSxkPVwic3RyaW5nXCI9PXR5cGVvZiBjfHwhMT09PWM7ZCYmKGEuZGF0YS5oaWRlPSExLGEuc3RvcCgpKTtULmNhbGwoYiwhZCxcInN0cmluZ1wiPT10eXBlb2YgYz9cbmM6dm9pZCAwKTtyZXR1cm4gZH19KX0sdGhpcyxudWxsLDApO3RoaXMub24oXCJjYW5jZWxcIixmdW5jdGlvbihiKXt0KGZ1bmN0aW9uKGMpe2lmKGMuaXNDaGFuZ2VkKCkpcmV0dXJuIGEuY29uZmlnLmRpYWxvZ19ub0NvbmZpcm1DYW5jZWx8fGNvbmZpcm0oYS5sYW5nLmNvbW1vbi5jb25maXJtQ2FuY2VsKXx8KGIuZGF0YS5oaWRlPSExKSwhMH0pfSx0aGlzLG51bGwsMCk7dGhpcy5wYXJ0cy5jbG9zZS5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7ITEhPT10aGlzLmZpcmUoXCJjYW5jZWxcIix7aGlkZTohMH0pLmhpZGUmJnRoaXMuaGlkZSgpO2EuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfSx0aGlzKTt0aGlzLmNoYW5nZUZvY3VzPWQ7dmFyIHk9dGhpcy5fLmVsZW1lbnQ7YS5mb2N1c01hbmFnZXIuYWRkKHksMSk7dGhpcy5vbihcInNob3dcIixmdW5jdGlvbigpe3kub24oXCJrZXlkb3duXCIsZSx0aGlzKTtpZihDS0VESVRPUi5lbnYuZ2Vja28peS5vbihcImtleXByZXNzXCIsZix0aGlzKX0pO3RoaXMub24oXCJoaWRlXCIsXG5mdW5jdGlvbigpe3kucmVtb3ZlTGlzdGVuZXIoXCJrZXlkb3duXCIsZSk7Q0tFRElUT1IuZW52LmdlY2tvJiZ5LnJlbW92ZUxpc3RlbmVyKFwia2V5cHJlc3NcIixmKTt0KGZ1bmN0aW9uKGEpe1UuYXBwbHkoYSl9KX0pO3RoaXMub24oXCJpZnJhbWVBZGRlZFwiLGZ1bmN0aW9uKGEpeyhuZXcgQ0tFRElUT1IuZG9tLmRvY3VtZW50KGEuZGF0YS5pZnJhbWUuJC5jb250ZW50V2luZG93LmRvY3VtZW50KSkub24oXCJrZXlkb3duXCIsZSx0aGlzLG51bGwsMCl9KTt0aGlzLm9uKFwic2hvd1wiLGZ1bmN0aW9uKCl7YygpO3ZhciBiPTE8bC5fLnBhZ2VDb3VudDthLmNvbmZpZy5kaWFsb2dfc3RhcnR1cEZvY3VzVGFiJiZiPyhsLl8udGFiQmFyTW9kZT0hMCxsLl8udGFic1tsLl8uY3VycmVudFRhYklkXVswXS5mb2N1cygpLGwuXy5jdXJyZW50Rm9jdXNJbmRleD0tMSk6dGhpcy5fLmhhc0ZvY3VzfHwodGhpcy5fLmN1cnJlbnRGb2N1c0luZGV4PWI/LTE6dGhpcy5fLmZvY3VzTGlzdC5sZW5ndGgtMSxnLm9uRm9jdXM/XG4oYj1nLm9uRm9jdXMuY2FsbCh0aGlzKSkmJmIuZm9jdXMoKTpkKDEpKX0sdGhpcyxudWxsLDQyOTQ5NjcyOTUpO2lmKENLRURJVE9SLmVudi5pZTZDb21wYXQpdGhpcy5vbihcImxvYWRcIixmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0RWxlbWVudCgpLGI9YS5nZXRGaXJzdCgpO2IucmVtb3ZlKCk7Yi5hcHBlbmRUbyhhKX0sdGhpcyk7WSh0aGlzKTtaKHRoaXMpOyhuZXcgQ0tFRElUT1IuZG9tLnRleHQoZy50aXRsZSxDS0VESVRPUi5kb2N1bWVudCkpLmFwcGVuZFRvKHRoaXMucGFydHMudGl0bGUpO2ZvcihtPTA7bTxnLmNvbnRlbnRzLmxlbmd0aDttKyspKGs9Zy5jb250ZW50c1ttXSkmJnRoaXMuYWRkUGFnZShrKTt0aGlzLnBhcnRzLnRhYnMub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YS5nZXRUYXJnZXQoKTtiLmhhc0NsYXNzKFwiY2tlX2RpYWxvZ190YWJcIikmJihiPWIuJC5pZCx0aGlzLnNlbGVjdFBhZ2UoYi5zdWJzdHJpbmcoNCxiLmxhc3RJbmRleE9mKFwiX1wiKSkpLFxudGhpcy5fLnRhYkJhck1vZGUmJih0aGlzLl8udGFiQmFyTW9kZT0hMSx0aGlzLl8uY3VycmVudEZvY3VzSW5kZXg9LTEsZCgxKSksYS5kYXRhLnByZXZlbnREZWZhdWx0KCkpfSx0aGlzKTttPVtdO2s9Q0tFRElUT1IuZGlhbG9nLl8udWlFbGVtZW50QnVpbGRlcnMuaGJveC5idWlsZCh0aGlzLHt0eXBlOlwiaGJveFwiLGNsYXNzTmFtZTpcImNrZV9kaWFsb2dfZm9vdGVyX2J1dHRvbnNcIix3aWR0aHM6W10sY2hpbGRyZW46Zy5idXR0b25zfSxtKS5nZXRDaGlsZCgpO3RoaXMucGFydHMuZm9vdGVyLnNldEh0bWwobS5qb2luKFwiXCIpKTtmb3IobT0wO208ay5sZW5ndGg7bSsrKXRoaXMuXy5idXR0b25zW2tbbV0uaWRdPWtbbV19O0NLRURJVE9SLmRpYWxvZy5wcm90b3R5cGU9e2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmhpZGUoKTt0aGlzLl8uZWxlbWVudC5yZW1vdmUoKX0scmVzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYil7dGhpcy5fLmNvbnRlbnRTaXplJiZ0aGlzLl8uY29udGVudFNpemUud2lkdGg9PVxuYSYmdGhpcy5fLmNvbnRlbnRTaXplLmhlaWdodD09Ynx8KENLRURJVE9SLmRpYWxvZy5maXJlKFwicmVzaXplXCIse2RpYWxvZzp0aGlzLHdpZHRoOmEsaGVpZ2h0OmJ9LHRoaXMuXy5lZGl0b3IpLHRoaXMuZmlyZShcInJlc2l6ZVwiLHt3aWR0aDphLGhlaWdodDpifSx0aGlzLl8uZWRpdG9yKSx0aGlzLnBhcnRzLmNvbnRlbnRzLnNldFN0eWxlcyh7d2lkdGg6YStcInB4XCIsaGVpZ2h0OmIrXCJweFwifSksXCJydGxcIj09dGhpcy5fLmVkaXRvci5sYW5nLmRpciYmdGhpcy5fLnBvc2l0aW9uJiYodGhpcy5fLnBvc2l0aW9uLng9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCkuZ2V0Vmlld1BhbmVTaXplKCkud2lkdGgtdGhpcy5fLmNvbnRlbnRTaXplLndpZHRoLXBhcnNlSW50KHRoaXMuXy5lbGVtZW50LmdldEZpcnN0KCkuZ2V0U3R5bGUoXCJyaWdodFwiKSwxMCkpLHRoaXMuXy5jb250ZW50U2l6ZT17d2lkdGg6YSxoZWlnaHQ6Yn0pfX0oKSxnZXRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fLmVsZW1lbnQuZ2V0Rmlyc3QoKTtcbnJldHVybnt3aWR0aDphLiQub2Zmc2V0V2lkdGh8fDAsaGVpZ2h0OmEuJC5vZmZzZXRIZWlnaHR8fDB9fSxtb3ZlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl8uZWxlbWVudC5nZXRGaXJzdCgpLGU9XCJydGxcIj09dGhpcy5fLmVkaXRvci5sYW5nLmRpcixmPVwiZml4ZWRcIj09ZC5nZXRDb21wdXRlZFN0eWxlKFwicG9zaXRpb25cIik7Q0tFRElUT1IuZW52LmllJiZkLnNldFN0eWxlKFwiem9vbVwiLFwiMTAwJVwiKTtmJiZ0aGlzLl8ucG9zaXRpb24mJnRoaXMuXy5wb3NpdGlvbi54PT1hJiZ0aGlzLl8ucG9zaXRpb24ueT09Ynx8KHRoaXMuXy5wb3NpdGlvbj17eDphLHk6Yn0sZnx8KGY9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCkuZ2V0U2Nyb2xsUG9zaXRpb24oKSxhKz1mLngsYis9Zi55KSxlJiYoZj10aGlzLmdldFNpemUoKSxhPUNLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpLmdldFZpZXdQYW5lU2l6ZSgpLndpZHRoLWYud2lkdGgtYSksYj17dG9wOigwPGI/YjowKStcInB4XCJ9LFxuYltlP1wicmlnaHRcIjpcImxlZnRcIl09KDA8YT9hOjApK1wicHhcIixkLnNldFN0eWxlcyhiKSxjJiYodGhpcy5fLm1vdmVkPTEpKX0sZ2V0UG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gQ0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LHRoaXMuXy5wb3NpdGlvbil9LHNob3c6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uZWxlbWVudCxiPXRoaXMuZGVmaW5pdGlvbjthLmdldFBhcmVudCgpJiZhLmdldFBhcmVudCgpLmVxdWFscyhDS0VESVRPUi5kb2N1bWVudC5nZXRCb2R5KCkpP2Euc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJibG9ja1wiKTphLmFwcGVuZFRvKENLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKSk7dGhpcy5yZXNpemUodGhpcy5fLmNvbnRlbnRTaXplJiZ0aGlzLl8uY29udGVudFNpemUud2lkdGh8fGIud2lkdGh8fGIubWluV2lkdGgsdGhpcy5fLmNvbnRlbnRTaXplJiZ0aGlzLl8uY29udGVudFNpemUuaGVpZ2h0fHxiLmhlaWdodHx8Yi5taW5IZWlnaHQpO3RoaXMucmVzZXQoKTt0aGlzLnNlbGVjdFBhZ2UodGhpcy5kZWZpbml0aW9uLmNvbnRlbnRzWzBdLmlkKTtcbm51bGw9PT1DS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50WkluZGV4JiYoQ0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFpJbmRleD10aGlzLl8uZWRpdG9yLmNvbmZpZy5iYXNlRmxvYXRaSW5kZXgpO3RoaXMuXy5lbGVtZW50LmdldEZpcnN0KCkuc2V0U3R5bGUoXCJ6LWluZGV4XCIsQ0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFpJbmRleCs9MTApO251bGw9PT1DS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50VG9wPyhDS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50VG9wPXRoaXMsdGhpcy5fLnBhcmVudERpYWxvZz1udWxsLE4odGhpcy5fLmVkaXRvcikpOih0aGlzLl8ucGFyZW50RGlhbG9nPUNLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRUb3AsdGhpcy5fLnBhcmVudERpYWxvZy5nZXRFbGVtZW50KCkuZ2V0Rmlyc3QoKS4kLnN0eWxlLnpJbmRleC09TWF0aC5mbG9vcih0aGlzLl8uZWRpdG9yLmNvbmZpZy5iYXNlRmxvYXRaSW5kZXgvMiksQ0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFRvcD10aGlzKTtcbmEub24oXCJrZXlkb3duXCIsUSk7YS5vbihcImtleXVwXCIsUik7dGhpcy5fLmhhc0ZvY3VzPSExO2Zvcih2YXIgYyBpbiBiLmNvbnRlbnRzKWlmKGIuY29udGVudHNbY10pe3ZhciBhPWIuY29udGVudHNbY10sZD10aGlzLl8udGFic1thLmlkXSxlPWEucmVxdWlyZWRDb250ZW50LGY9MDtpZihkKXtmb3IodmFyIGcgaW4gdGhpcy5fLmNvbnRlbnRzW2EuaWRdKXt2YXIgaD10aGlzLl8uY29udGVudHNbYS5pZF1bZ107XCJoYm94XCIhPWgudHlwZSYmXCJ2Ym94XCIhPWgudHlwZSYmaC5nZXRJbnB1dEVsZW1lbnQoKSYmKGgucmVxdWlyZWRDb250ZW50JiYhdGhpcy5fLmVkaXRvci5hY3RpdmVGaWx0ZXIuY2hlY2soaC5yZXF1aXJlZENvbnRlbnQpP2guZGlzYWJsZSgpOihoLmVuYWJsZSgpLGYrKykpfSFmfHxlJiYhdGhpcy5fLmVkaXRvci5hY3RpdmVGaWx0ZXIuY2hlY2soZSk/ZFswXS5hZGRDbGFzcyhcImNrZV9kaWFsb2dfdGFiX2Rpc2FibGVkXCIpOmRbMF0ucmVtb3ZlQ2xhc3MoXCJja2VfZGlhbG9nX3RhYl9kaXNhYmxlZFwiKX19Q0tFRElUT1IudG9vbHMuc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMubGF5b3V0KCk7XG5YKHRoaXMpO3RoaXMucGFydHMuZGlhbG9nLnNldFN0eWxlKFwidmlzaWJpbGl0eVwiLFwiXCIpO3RoaXMuZmlyZU9uY2UoXCJsb2FkXCIse30pO0NLRURJVE9SLnVpLmZpcmUoXCJyZWFkeVwiLHRoaXMpO3RoaXMuZmlyZShcInNob3dcIix7fSk7dGhpcy5fLmVkaXRvci5maXJlKFwiZGlhbG9nU2hvd1wiLHRoaXMpO3RoaXMuXy5wYXJlbnREaWFsb2d8fHRoaXMuXy5lZGl0b3IuZm9jdXNNYW5hZ2VyLmxvY2soKTt0aGlzLmZvcmVhY2goZnVuY3Rpb24oYSl7YS5zZXRJbml0VmFsdWUmJmEuc2V0SW5pdFZhbHVlKCl9KX0sMTAwLHRoaXMpfSxsYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhcnRzLmRpYWxvZyxiPXRoaXMuZ2V0U2l6ZSgpLGM9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCkuZ2V0Vmlld1BhbmVTaXplKCksZD0oYy53aWR0aC1iLndpZHRoKS8yLGU9KGMuaGVpZ2h0LWIuaGVpZ2h0KS8yO0NLRURJVE9SLmVudi5pZTZDb21wYXR8fChiLmhlaWdodCsoMDxlP2U6MCk+Yy5oZWlnaHR8fFxuYi53aWR0aCsoMDxkP2Q6MCk+Yy53aWR0aD9hLnNldFN0eWxlKFwicG9zaXRpb25cIixcImFic29sdXRlXCIpOmEuc2V0U3R5bGUoXCJwb3NpdGlvblwiLFwiZml4ZWRcIikpO3RoaXMubW92ZSh0aGlzLl8ubW92ZWQ/dGhpcy5fLnBvc2l0aW9uLng6ZCx0aGlzLl8ubW92ZWQ/dGhpcy5fLnBvc2l0aW9uLnk6ZSl9LGZvcmVhY2g6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIHRoaXMuXy5jb250ZW50cylmb3IodmFyIGMgaW4gdGhpcy5fLmNvbnRlbnRzW2JdKWEuY2FsbCh0aGlzLHRoaXMuXy5jb250ZW50c1tiXVtjXSk7cmV0dXJuIHRoaXN9LHJlc2V0OmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYSl7YS5yZXNldCYmYS5yZXNldCgxKX07cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5mb3JlYWNoKGEpO3JldHVybiB0aGlzfX0oKSxzZXR1cENvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5mb3JlYWNoKGZ1bmN0aW9uKGIpe2Iuc2V0dXAmJmIuc2V0dXAuYXBwbHkoYixhKX0pfSxcbmNvbW1pdENvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5mb3JlYWNoKGZ1bmN0aW9uKGIpe0NLRURJVE9SLmVudi5pZSYmdGhpcy5fLmN1cnJlbnRGb2N1c0luZGV4PT1iLmZvY3VzSW5kZXgmJmIuZ2V0SW5wdXRFbGVtZW50KCkuJC5ibHVyKCk7Yi5jb21taXQmJmIuY29tbWl0LmFwcGx5KGIsYSl9KX0saGlkZTpmdW5jdGlvbigpe2lmKHRoaXMucGFydHMuZGlhbG9nLmlzVmlzaWJsZSgpKXt0aGlzLmZpcmUoXCJoaWRlXCIse30pO3RoaXMuXy5lZGl0b3IuZmlyZShcImRpYWxvZ0hpZGVcIix0aGlzKTt0aGlzLnNlbGVjdFBhZ2UodGhpcy5fLnRhYklkTGlzdFswXSk7dmFyIGE9dGhpcy5fLmVsZW1lbnQ7YS5zZXRTdHlsZShcImRpc3BsYXlcIixcIm5vbmVcIik7dGhpcy5wYXJ0cy5kaWFsb2cuc2V0U3R5bGUoXCJ2aXNpYmlsaXR5XCIsXCJoaWRkZW5cIik7Zm9yKGJhKHRoaXMpO0NLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRUb3AhPXRoaXM7KUNLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRUb3AuaGlkZSgpO1xuaWYodGhpcy5fLnBhcmVudERpYWxvZyl7dmFyIGI9dGhpcy5fLnBhcmVudERpYWxvZy5nZXRFbGVtZW50KCkuZ2V0Rmlyc3QoKTtiLnNldFN0eWxlKFwiei1pbmRleFwiLHBhcnNlSW50KGIuJC5zdHlsZS56SW5kZXgsMTApK01hdGguZmxvb3IodGhpcy5fLmVkaXRvci5jb25maWcuYmFzZUZsb2F0WkluZGV4LzIpKX1lbHNlIE8odGhpcy5fLmVkaXRvcik7aWYoQ0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFRvcD10aGlzLl8ucGFyZW50RGlhbG9nKUNLRURJVE9SLmRpYWxvZy5fLmN1cnJlbnRaSW5kZXgtPTEwO2Vsc2V7Q0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFpJbmRleD1udWxsO2EucmVtb3ZlTGlzdGVuZXIoXCJrZXlkb3duXCIsUSk7YS5yZW1vdmVMaXN0ZW5lcihcImtleXVwXCIsUik7dmFyIGM9dGhpcy5fLmVkaXRvcjtjLmZvY3VzKCk7c2V0VGltZW91dChmdW5jdGlvbigpe2MuZm9jdXNNYW5hZ2VyLnVubG9jaygpO0NLRURJVE9SLmVudi5pT1MmJmMud2luZG93LmZvY3VzKCl9LDApfWRlbGV0ZSB0aGlzLl8ucGFyZW50RGlhbG9nO1xudGhpcy5mb3JlYWNoKGZ1bmN0aW9uKGEpe2EucmVzZXRJbml0VmFsdWUmJmEucmVzZXRJbml0VmFsdWUoKX0pO3RoaXMuc2V0U3RhdGUoQ0tFRElUT1IuRElBTE9HX1NUQVRFX0lETEUpfX0sYWRkUGFnZTpmdW5jdGlvbihhKXtpZighYS5yZXF1aXJlZENvbnRlbnR8fHRoaXMuXy5lZGl0b3IuZmlsdGVyLmNoZWNrKGEucmVxdWlyZWRDb250ZW50KSl7Zm9yKHZhciBiPVtdLGM9YS5sYWJlbD8nIHRpdGxlXFx4M2RcIicrQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZShhLmxhYmVsKSsnXCInOlwiXCIsZD1DS0VESVRPUi5kaWFsb2cuXy51aUVsZW1lbnRCdWlsZGVycy52Ym94LmJ1aWxkKHRoaXMse3R5cGU6XCJ2Ym94XCIsY2xhc3NOYW1lOlwiY2tlX2RpYWxvZ19wYWdlX2NvbnRlbnRzXCIsY2hpbGRyZW46YS5lbGVtZW50cyxleHBhbmQ6ISFhLmV4cGFuZCxwYWRkaW5nOmEucGFkZGluZyxzdHlsZTphLnN0eWxlfHxcIndpZHRoOiAxMDAlO1wifSxiKSxlPXRoaXMuXy5jb250ZW50c1thLmlkXT17fSxmPWQuZ2V0Q2hpbGQoKSxcbmc9MDtkPWYuc2hpZnQoKTspZC5ub3RBbGxvd2VkfHxcImhib3hcIj09ZC50eXBlfHxcInZib3hcIj09ZC50eXBlfHxnKyssZVtkLmlkXT1kLFwiZnVuY3Rpb25cIj09dHlwZW9mIGQuZ2V0Q2hpbGQmJmYucHVzaC5hcHBseShmLGQuZ2V0Q2hpbGQoKSk7Z3x8KGEuaGlkZGVuPSEwKTtiPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKGIuam9pbihcIlwiKSk7Yi5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJ0YWJwYW5lbFwiKTtkPUNLRURJVE9SLmVudjtlPVwiY2tlX1wiK2EuaWQrXCJfXCIrQ0tFRElUT1IudG9vbHMuZ2V0TmV4dE51bWJlcigpO2M9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoWydcXHgzY2EgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ190YWJcIicsMDx0aGlzLl8ucGFnZUNvdW50P1wiIGNrZV9sYXN0XCI6XCJja2VfZmlyc3RcIixjLGEuaGlkZGVuPycgc3R5bGVcXHgzZFwiZGlzcGxheTpub25lXCInOlwiXCIsJyBpZFxceDNkXCInLGUsJ1wiJyxkLmdlY2tvJiYhZC5oYz9cIlwiOicgaHJlZlxceDNkXCJqYXZhc2NyaXB0OnZvaWQoMClcIicsXG4nIHRhYkluZGV4XFx4M2RcIi0xXCIgaGlkZWZvY3VzXFx4M2RcInRydWVcIiByb2xlXFx4M2RcInRhYlwiXFx4M2UnLGEubGFiZWwsXCJcXHgzYy9hXFx4M2VcIl0uam9pbihcIlwiKSk7Yi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsbGVkYnlcIixlKTt0aGlzLl8udGFic1thLmlkXT1bYyxiXTt0aGlzLl8udGFiSWRMaXN0LnB1c2goYS5pZCk7IWEuaGlkZGVuJiZ0aGlzLl8ucGFnZUNvdW50Kys7dGhpcy5fLmxhc3RUYWI9Yzt0aGlzLnVwZGF0ZVN0eWxlKCk7Yi5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsYS5pZCk7Yi5hcHBlbmRUbyh0aGlzLnBhcnRzLmNvbnRlbnRzKTtjLnVuc2VsZWN0YWJsZSgpO3RoaXMucGFydHMudGFicy5hcHBlbmQoYyk7YS5hY2Nlc3NLZXkmJihTKHRoaXMsdGhpcyxcIkNUUkwrXCIrYS5hY2Nlc3NLZXksY2EsZGEpLHRoaXMuXy5hY2Nlc3NLZXlNYXBbXCJDVFJMK1wiK2EuYWNjZXNzS2V5XT1hLmlkKX19LHNlbGVjdFBhZ2U6ZnVuY3Rpb24oYSl7aWYodGhpcy5fLmN1cnJlbnRUYWJJZCE9YSYmIXRoaXMuXy50YWJzW2FdWzBdLmhhc0NsYXNzKFwiY2tlX2RpYWxvZ190YWJfZGlzYWJsZWRcIikmJlxuITEhPT10aGlzLmZpcmUoXCJzZWxlY3RQYWdlXCIse3BhZ2U6YSxjdXJyZW50UGFnZTp0aGlzLl8uY3VycmVudFRhYklkfSkpe2Zvcih2YXIgYiBpbiB0aGlzLl8udGFicyl7dmFyIGM9dGhpcy5fLnRhYnNbYl1bMF0sZD10aGlzLl8udGFic1tiXVsxXTtiIT1hJiYoYy5yZW1vdmVDbGFzcyhcImNrZV9kaWFsb2dfdGFiX3NlbGVjdGVkXCIpLGQuaGlkZSgpKTtkLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsYiE9YSl9dmFyIGU9dGhpcy5fLnRhYnNbYV07ZVswXS5hZGRDbGFzcyhcImNrZV9kaWFsb2dfdGFiX3NlbGVjdGVkXCIpO0NLRURJVE9SLmVudi5pZTZDb21wYXR8fENLRURJVE9SLmVudi5pZTdDb21wYXQ/KEsoZVsxXSksZVsxXS5zaG93KCksc2V0VGltZW91dChmdW5jdGlvbigpe0soZVsxXSwxKX0sMCkpOmVbMV0uc2hvdygpO3RoaXMuXy5jdXJyZW50VGFiSWQ9YTt0aGlzLl8uY3VycmVudFRhYkluZGV4PUNLRURJVE9SLnRvb2xzLmluZGV4T2YodGhpcy5fLnRhYklkTGlzdCxhKX19LFxudXBkYXRlU3R5bGU6ZnVuY3Rpb24oKXt0aGlzLnBhcnRzLmRpYWxvZ1soMT09PXRoaXMuXy5wYWdlQ291bnQ/XCJhZGRcIjpcInJlbW92ZVwiKStcIkNsYXNzXCJdKFwiY2tlX3NpbmdsZV9wYWdlXCIpfSxoaWRlUGFnZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl8udGFic1thXSYmdGhpcy5fLnRhYnNbYV1bMF07YiYmMSE9dGhpcy5fLnBhZ2VDb3VudCYmYi5pc1Zpc2libGUoKSYmKGE9PXRoaXMuXy5jdXJyZW50VGFiSWQmJnRoaXMuc2VsZWN0UGFnZSh4LmNhbGwodGhpcykpLGIuaGlkZSgpLHRoaXMuXy5wYWdlQ291bnQtLSx0aGlzLnVwZGF0ZVN0eWxlKCkpfSxzaG93UGFnZTpmdW5jdGlvbihhKXtpZihhPXRoaXMuXy50YWJzW2FdJiZ0aGlzLl8udGFic1thXVswXSlhLnNob3coKSx0aGlzLl8ucGFnZUNvdW50KyssdGhpcy51cGRhdGVTdHlsZSgpfSxnZXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5lbGVtZW50fSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5uYW1lfSxcbmdldENvbnRlbnRFbGVtZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fLmNvbnRlbnRzW2FdO3JldHVybiBjJiZjW2JdfSxnZXRWYWx1ZU9mOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2V0Q29udGVudEVsZW1lbnQoYSxiKS5nZXRWYWx1ZSgpfSxzZXRWYWx1ZU9mOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5nZXRDb250ZW50RWxlbWVudChhLGIpLnNldFZhbHVlKGMpfSxnZXRCdXR0b246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuXy5idXR0b25zW2FdfSxjbGljazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fLmJ1dHRvbnNbYV0uY2xpY2soKX0sZGlzYWJsZUJ1dHRvbjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fLmJ1dHRvbnNbYV0uZGlzYWJsZSgpfSxlbmFibGVCdXR0b246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuXy5idXR0b25zW2FdLmVuYWJsZSgpfSxnZXRQYWdlQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLnBhZ2VDb3VudH0sZ2V0UGFyZW50RWRpdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5lZGl0b3J9LFxuZ2V0U2VsZWN0ZWRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UGFyZW50RWRpdG9yKCkuZ2V0U2VsZWN0aW9uKCkuZ2V0U2VsZWN0ZWRFbGVtZW50KCl9LGFkZEZvY3VzYWJsZTpmdW5jdGlvbihhLGIpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBiKWI9dGhpcy5fLmZvY3VzTGlzdC5sZW5ndGgsdGhpcy5fLmZvY3VzTGlzdC5wdXNoKG5ldyBMKHRoaXMsYSxiKSk7ZWxzZXt0aGlzLl8uZm9jdXNMaXN0LnNwbGljZShiLDAsbmV3IEwodGhpcyxhLGIpKTtmb3IodmFyIGM9YisxO2M8dGhpcy5fLmZvY3VzTGlzdC5sZW5ndGg7YysrKXRoaXMuXy5mb2N1c0xpc3RbY10uZm9jdXNJbmRleCsrfX0sc2V0U3RhdGU6ZnVuY3Rpb24oYSl7aWYodGhpcy5zdGF0ZSE9YSl7dGhpcy5zdGF0ZT1hO2lmKGE9PUNLRURJVE9SLkRJQUxPR19TVEFURV9CVVNZKXtpZighdGhpcy5wYXJ0cy5zcGlubmVyKXt2YXIgYj10aGlzLmdldFBhcmVudEVkaXRvcigpLmxhbmcuZGlyLGM9e2F0dHJpYnV0ZXM6e1wiY2xhc3NcIjpcImNrZV9kaWFsb2dfc3Bpbm5lclwifSxcbnN0eWxlczp7XCJmbG9hdFwiOlwicnRsXCI9PWI/XCJyaWdodFwiOlwibGVmdFwifX07Yy5zdHlsZXNbXCJtYXJnaW4tXCIrKFwicnRsXCI9PWI/XCJsZWZ0XCI6XCJyaWdodFwiKV09XCI4cHhcIjt0aGlzLnBhcnRzLnNwaW5uZXI9Q0tFRElUT1IuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiLGMpO3RoaXMucGFydHMuc3Bpbm5lci5zZXRIdG1sKFwiXFx4MjYjODk4NztcIik7dGhpcy5wYXJ0cy5zcGlubmVyLmFwcGVuZFRvKHRoaXMucGFydHMudGl0bGUsMSl9dGhpcy5wYXJ0cy5zcGlubmVyLnNob3coKTt0aGlzLmdldEJ1dHRvbihcIm9rXCIpLmRpc2FibGUoKX1lbHNlIGE9PUNLRURJVE9SLkRJQUxPR19TVEFURV9JRExFJiYodGhpcy5wYXJ0cy5zcGlubmVyJiZ0aGlzLnBhcnRzLnNwaW5uZXIuaGlkZSgpLHRoaXMuZ2V0QnV0dG9uKFwib2tcIikuZW5hYmxlKCkpO3RoaXMuZmlyZShcInN0YXRlXCIsYSl9fX07Q0tFRElUT1IudG9vbHMuZXh0ZW5kKENLRURJVE9SLmRpYWxvZyx7YWRkOmZ1bmN0aW9uKGEsYil7dGhpcy5fLmRpYWxvZ0RlZmluaXRpb25zW2FdJiZcblwiZnVuY3Rpb25cIiE9dHlwZW9mIGJ8fCh0aGlzLl8uZGlhbG9nRGVmaW5pdGlvbnNbYV09Yil9LGV4aXN0czpmdW5jdGlvbihhKXtyZXR1cm4hIXRoaXMuXy5kaWFsb2dEZWZpbml0aW9uc1thXX0sZ2V0Q3VycmVudDpmdW5jdGlvbigpe3JldHVybiBDS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50VG9wfSxpc1RhYkVuYWJsZWQ6ZnVuY3Rpb24oYSxiLGMpe2E9YS5jb25maWcucmVtb3ZlRGlhbG9nVGFicztyZXR1cm4hKGEmJmEubWF0Y2gobmV3IFJlZ0V4cChcIig/Ol58OylcIitiK1wiOlwiK2MrXCIoPzokfDspXCIsXCJpXCIpKSl9LG9rQnV0dG9uOmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYSxjKXtjPWN8fHt9O3JldHVybiBDS0VESVRPUi50b29scy5leHRlbmQoe2lkOlwib2tcIix0eXBlOlwiYnV0dG9uXCIsbGFiZWw6YS5sYW5nLmNvbW1vbi5vayxcImNsYXNzXCI6XCJja2VfZGlhbG9nX3VpX2J1dHRvbl9va1wiLG9uQ2xpY2s6ZnVuY3Rpb24oYSl7YT1hLmRhdGEuZGlhbG9nOyExIT09YS5maXJlKFwib2tcIixcbntoaWRlOiEwfSkuaGlkZSYmYS5oaWRlKCl9fSxjLCEwKX07YS50eXBlPVwiYnV0dG9uXCI7YS5vdmVycmlkZT1mdW5jdGlvbihiKXtyZXR1cm4gQ0tFRElUT1IudG9vbHMuZXh0ZW5kKGZ1bmN0aW9uKGMpe3JldHVybiBhKGMsYil9LHt0eXBlOlwiYnV0dG9uXCJ9LCEwKX07cmV0dXJuIGF9KCksY2FuY2VsQnV0dG9uOmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYSxjKXtjPWN8fHt9O3JldHVybiBDS0VESVRPUi50b29scy5leHRlbmQoe2lkOlwiY2FuY2VsXCIsdHlwZTpcImJ1dHRvblwiLGxhYmVsOmEubGFuZy5jb21tb24uY2FuY2VsLFwiY2xhc3NcIjpcImNrZV9kaWFsb2dfdWlfYnV0dG9uX2NhbmNlbFwiLG9uQ2xpY2s6ZnVuY3Rpb24oYSl7YT1hLmRhdGEuZGlhbG9nOyExIT09YS5maXJlKFwiY2FuY2VsXCIse2hpZGU6ITB9KS5oaWRlJiZhLmhpZGUoKX19LGMsITApfTthLnR5cGU9XCJidXR0b25cIjthLm92ZXJyaWRlPWZ1bmN0aW9uKGIpe3JldHVybiBDS0VESVRPUi50b29scy5leHRlbmQoZnVuY3Rpb24oYyl7cmV0dXJuIGEoYyxcbmIpfSx7dHlwZTpcImJ1dHRvblwifSwhMCl9O3JldHVybiBhfSgpLGFkZFVJRWxlbWVudDpmdW5jdGlvbihhLGIpe3RoaXMuXy51aUVsZW1lbnRCdWlsZGVyc1thXT1ifX0pO0NLRURJVE9SLmRpYWxvZy5fPXt1aUVsZW1lbnRCdWlsZGVyczp7fSxkaWFsb2dEZWZpbml0aW9uczp7fSxjdXJyZW50VG9wOm51bGwsY3VycmVudFpJbmRleDpudWxsfTtDS0VESVRPUi5ldmVudC5pbXBsZW1lbnRPbihDS0VESVRPUi5kaWFsb2cpO0NLRURJVE9SLmV2ZW50LmltcGxlbWVudE9uKENLRURJVE9SLmRpYWxvZy5wcm90b3R5cGUpO3ZhciBhYT17cmVzaXphYmxlOkNLRURJVE9SLkRJQUxPR19SRVNJWkVfQk9USCxtaW5XaWR0aDo2MDAsbWluSGVpZ2h0OjQwMCxidXR0b25zOltDS0VESVRPUi5kaWFsb2cub2tCdXR0b24sQ0tFRElUT1IuZGlhbG9nLmNhbmNlbEJ1dHRvbl19LEQ9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wLGU7ZT1hW2RdO2QrKylpZihlLmlkPT1ifHxjJiZlW2NdJiYoZT1EKGVbY10sXG5iLGMpKSlyZXR1cm4gZTtyZXR1cm4gbnVsbH0sRT1mdW5jdGlvbihhLGIsYyxkLGUpe2lmKGMpe2Zvcih2YXIgZj0wLGc7Zz1hW2ZdO2YrKyl7aWYoZy5pZD09YylyZXR1cm4gYS5zcGxpY2UoZiwwLGIpLGI7aWYoZCYmZ1tkXSYmKGc9RShnW2RdLGIsYyxkLCEwKSkpcmV0dXJuIGd9aWYoZSlyZXR1cm4gbnVsbH1hLnB1c2goYik7cmV0dXJuIGJ9LEY9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wLGU7ZT1hW2RdO2QrKyl7aWYoZS5pZD09YilyZXR1cm4gYS5zcGxpY2UoZCwxKTtpZihjJiZlW2NdJiYoZT1GKGVbY10sYixjKSkpcmV0dXJuIGV9cmV0dXJuIG51bGx9LFA9ZnVuY3Rpb24oYSxiKXt0aGlzLmRpYWxvZz1hO2Zvcih2YXIgYz1iLmNvbnRlbnRzLGQ9MCxlO2U9Y1tkXTtkKyspY1tkXT1lJiZuZXcgTShhLGUpO0NLRURJVE9SLnRvb2xzLmV4dGVuZCh0aGlzLGIpfTtQLnByb3RvdHlwZT17Z2V0Q29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIEQodGhpcy5jb250ZW50cyxcbmEpfSxnZXRCdXR0b246ZnVuY3Rpb24oYSl7cmV0dXJuIEQodGhpcy5idXR0b25zLGEpfSxhZGRDb250ZW50czpmdW5jdGlvbihhLGIpe3JldHVybiBFKHRoaXMuY29udGVudHMsYSxiKX0sYWRkQnV0dG9uOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEUodGhpcy5idXR0b25zLGEsYil9LHJlbW92ZUNvbnRlbnRzOmZ1bmN0aW9uKGEpe0YodGhpcy5jb250ZW50cyxhKX0scmVtb3ZlQnV0dG9uOmZ1bmN0aW9uKGEpe0YodGhpcy5idXR0b25zLGEpfX07TS5wcm90b3R5cGU9e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gRCh0aGlzLmVsZW1lbnRzLGEsXCJjaGlsZHJlblwiKX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEUodGhpcy5lbGVtZW50cyxhLGIsXCJjaGlsZHJlblwiKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe0YodGhpcy5lbGVtZW50cyxhLFwiY2hpbGRyZW5cIil9fTt2YXIgSix6PXt9LHUsdz17fSxRPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YS4kLmN0cmxLZXl8fGEuZGF0YS4kLm1ldGFLZXksYz1cbmEuZGF0YS4kLmFsdEtleSxkPWEuZGF0YS4kLnNoaWZ0S2V5LGU9U3RyaW5nLmZyb21DaGFyQ29kZShhLmRhdGEuJC5rZXlDb2RlKTsoYj13WyhiP1wiQ1RSTCtcIjpcIlwiKSsoYz9cIkFMVCtcIjpcIlwiKSsoZD9cIlNISUZUK1wiOlwiXCIpK2VdKSYmYi5sZW5ndGgmJihiPWJbYi5sZW5ndGgtMV0sYi5rZXlkb3duJiZiLmtleWRvd24uY2FsbChiLnVpRWxlbWVudCxiLmRpYWxvZyxiLmtleSksYS5kYXRhLnByZXZlbnREZWZhdWx0KCkpfSxSPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YS4kLmN0cmxLZXl8fGEuZGF0YS4kLm1ldGFLZXksYz1hLmRhdGEuJC5hbHRLZXksZD1hLmRhdGEuJC5zaGlmdEtleSxlPVN0cmluZy5mcm9tQ2hhckNvZGUoYS5kYXRhLiQua2V5Q29kZSk7KGI9d1soYj9cIkNUUkwrXCI6XCJcIikrKGM/XCJBTFQrXCI6XCJcIikrKGQ/XCJTSElGVCtcIjpcIlwiKStlXSkmJmIubGVuZ3RoJiYoYj1iW2IubGVuZ3RoLTFdLGIua2V5dXAmJihiLmtleXVwLmNhbGwoYi51aUVsZW1lbnQsYi5kaWFsb2csYi5rZXkpLFxuYS5kYXRhLnByZXZlbnREZWZhdWx0KCkpKX0sUz1mdW5jdGlvbihhLGIsYyxkLGUpeyh3W2NdfHwod1tjXT1bXSkpLnB1c2goe3VpRWxlbWVudDphLGRpYWxvZzpiLGtleTpjLGtleXVwOmV8fGEuYWNjZXNzS2V5VXAsa2V5ZG93bjpkfHxhLmFjY2Vzc0tleURvd259KX0sYmE9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIHcpe2Zvcih2YXIgYz13W2JdLGQ9Yy5sZW5ndGgtMTswPD1kO2QtLSljW2RdLmRpYWxvZyE9YSYmY1tkXS51aUVsZW1lbnQhPWF8fGMuc3BsaWNlKGQsMSk7MD09PWMubGVuZ3RoJiZkZWxldGUgd1tiXX19LGRhPWZ1bmN0aW9uKGEsYil7YS5fLmFjY2Vzc0tleU1hcFtiXSYmYS5zZWxlY3RQYWdlKGEuXy5hY2Nlc3NLZXlNYXBbYl0pfSxjYT1mdW5jdGlvbigpe307KGZ1bmN0aW9uKCl7Q0tFRElUT1IudWkuZGlhbG9nPXt1aUVsZW1lbnQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7aWYoISg0PmFyZ3VtZW50cy5sZW5ndGgpKXt2YXIgaD0oZC5jYWxsP2QoYik6ZCl8fFxuXCJkaXZcIixwPVtcIlxceDNjXCIsaCxcIiBcIl0sbT0oZSYmZS5jYWxsP2UoYik6ZSl8fHt9LGs9KGYmJmYuY2FsbD9mKGIpOmYpfHx7fSxxPShnJiZnLmNhbGw/Zy5jYWxsKHRoaXMsYSxiKTpnKXx8XCJcIixuPXRoaXMuZG9tSWQ9ay5pZHx8Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCkrXCJfdWlFbGVtZW50XCI7Yi5yZXF1aXJlZENvbnRlbnQmJiFhLmdldFBhcmVudEVkaXRvcigpLmZpbHRlci5jaGVjayhiLnJlcXVpcmVkQ29udGVudCkmJihtLmRpc3BsYXk9XCJub25lXCIsdGhpcy5ub3RBbGxvd2VkPSEwKTtrLmlkPW47dmFyIHI9e307Yi50eXBlJiYocltcImNrZV9kaWFsb2dfdWlfXCIrYi50eXBlXT0xKTtiLmNsYXNzTmFtZSYmKHJbYi5jbGFzc05hbWVdPTEpO2IuZGlzYWJsZWQmJihyLmNrZV9kaXNhYmxlZD0xKTtmb3IodmFyIGw9a1tcImNsYXNzXCJdJiZrW1wiY2xhc3NcIl0uc3BsaXQ/a1tcImNsYXNzXCJdLnNwbGl0KFwiIFwiKTpbXSxuPTA7bjxsLmxlbmd0aDtuKyspbFtuXSYmKHJbbFtuXV09MSk7bD1cbltdO2ZvcihuIGluIHIpbC5wdXNoKG4pO2tbXCJjbGFzc1wiXT1sLmpvaW4oXCIgXCIpO2IudGl0bGUmJihrLnRpdGxlPWIudGl0bGUpO3I9KGIuc3R5bGV8fFwiXCIpLnNwbGl0KFwiO1wiKTtiLmFsaWduJiYobD1iLmFsaWduLG1bXCJtYXJnaW4tbGVmdFwiXT1cImxlZnRcIj09bD8wOlwiYXV0b1wiLG1bXCJtYXJnaW4tcmlnaHRcIl09XCJyaWdodFwiPT1sPzA6XCJhdXRvXCIpO2ZvcihuIGluIG0pci5wdXNoKG4rXCI6XCIrbVtuXSk7Yi5oaWRkZW4mJnIucHVzaChcImRpc3BsYXk6bm9uZVwiKTtmb3Iobj1yLmxlbmd0aC0xOzA8PW47bi0tKVwiXCI9PT1yW25dJiZyLnNwbGljZShuLDEpOzA8ci5sZW5ndGgmJihrLnN0eWxlPShrLnN0eWxlP2suc3R5bGUrXCI7IFwiOlwiXCIpK3Iuam9pbihcIjsgXCIpKTtmb3IobiBpbiBrKXAucHVzaChuKydcXHgzZFwiJytDS0VESVRPUi50b29scy5odG1sRW5jb2RlKGtbbl0pKydcIiAnKTtwLnB1c2goXCJcXHgzZVwiLHEsXCJcXHgzYy9cIixoLFwiXFx4M2VcIik7Yy5wdXNoKHAuam9pbihcIlwiKSk7KHRoaXMuX3x8KHRoaXMuXz1cbnt9KSkuZGlhbG9nPWE7XCJib29sZWFuXCI9PXR5cGVvZiBiLmlzQ2hhbmdlZCYmKHRoaXMuaXNDaGFuZ2VkPWZ1bmN0aW9uKCl7cmV0dXJuIGIuaXNDaGFuZ2VkfSk7XCJmdW5jdGlvblwiPT10eXBlb2YgYi5pc0NoYW5nZWQmJih0aGlzLmlzQ2hhbmdlZD1iLmlzQ2hhbmdlZCk7XCJmdW5jdGlvblwiPT10eXBlb2YgYi5zZXRWYWx1ZSYmKHRoaXMuc2V0VmFsdWU9Q0tFRElUT1IudG9vbHMub3ZlcnJpZGUodGhpcy5zZXRWYWx1ZSxmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyl7YS5jYWxsKHRoaXMsYi5zZXRWYWx1ZS5jYWxsKHRoaXMsYykpfX0pKTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBiLmdldFZhbHVlJiYodGhpcy5nZXRWYWx1ZT1DS0VESVRPUi50b29scy5vdmVycmlkZSh0aGlzLmdldFZhbHVlLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBiLmdldFZhbHVlLmNhbGwodGhpcyxhLmNhbGwodGhpcykpfX0pKTtDS0VESVRPUi5ldmVudC5pbXBsZW1lbnRPbih0aGlzKTtcbnRoaXMucmVnaXN0ZXJFdmVudHMoYik7dGhpcy5hY2Nlc3NLZXlVcCYmdGhpcy5hY2Nlc3NLZXlEb3duJiZiLmFjY2Vzc0tleSYmUyh0aGlzLGEsXCJDVFJMK1wiK2IuYWNjZXNzS2V5KTt2YXIgdD10aGlzO2Eub24oXCJsb2FkXCIsZnVuY3Rpb24oKXt2YXIgYj10LmdldElucHV0RWxlbWVudCgpO2lmKGIpe3ZhciBjPXQudHlwZSBpbntjaGVja2JveDoxLHJhdGlvOjF9JiZDS0VESVRPUi5lbnYuaWUmJjg+Q0tFRElUT1IuZW52LnZlcnNpb24/XCJja2VfZGlhbG9nX3VpX2ZvY3VzZWRcIjpcIlwiO2Iub24oXCJmb2N1c1wiLGZ1bmN0aW9uKCl7YS5fLnRhYkJhck1vZGU9ITE7YS5fLmhhc0ZvY3VzPSEwO3QuZmlyZShcImZvY3VzXCIpO2MmJnRoaXMuYWRkQ2xhc3MoYyl9KTtiLm9uKFwiYmx1clwiLGZ1bmN0aW9uKCl7dC5maXJlKFwiYmx1clwiKTtjJiZ0aGlzLnJlbW92ZUNsYXNzKGMpfSl9fSk7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMsYik7dGhpcy5rZXlib2FyZEZvY3VzYWJsZSYmKHRoaXMudGFiSW5kZXg9XG5iLnRhYkluZGV4fHwwLHRoaXMuZm9jdXNJbmRleD1hLl8uZm9jdXNMaXN0LnB1c2godGhpcyktMSx0aGlzLm9uKFwiZm9jdXNcIixmdW5jdGlvbigpe2EuXy5jdXJyZW50Rm9jdXNJbmRleD10LmZvY3VzSW5kZXh9KSl9fSxoYm94OmZ1bmN0aW9uKGEsYixjLGQsZSl7aWYoISg0PmFyZ3VtZW50cy5sZW5ndGgpKXt0aGlzLl98fCh0aGlzLl89e30pO3ZhciBmPXRoaXMuXy5jaGlsZHJlbj1iLGc9ZSYmZS53aWR0aHN8fG51bGwsaD1lJiZlLmhlaWdodHx8bnVsbCxwLG09e3JvbGU6XCJwcmVzZW50YXRpb25cIn07ZSYmZS5hbGlnbiYmKG0uYWxpZ249ZS5hbGlnbik7Q0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudC5jYWxsKHRoaXMsYSxlfHx7dHlwZTpcImhib3hcIn0sZCxcInRhYmxlXCIse30sbSxmdW5jdGlvbigpe3ZhciBhPVsnXFx4M2N0Ym9keVxceDNlXFx4M2N0ciBjbGFzc1xceDNkXCJja2VfZGlhbG9nX3VpX2hib3hcIlxceDNlJ107Zm9yKHA9MDtwPGMubGVuZ3RoO3ArKyl7dmFyIGI9XCJja2VfZGlhbG9nX3VpX2hib3hfY2hpbGRcIixcbmQ9W107MD09PXAmJihiPVwiY2tlX2RpYWxvZ191aV9oYm94X2ZpcnN0XCIpO3A9PWMubGVuZ3RoLTEmJihiPVwiY2tlX2RpYWxvZ191aV9oYm94X2xhc3RcIik7YS5wdXNoKCdcXHgzY3RkIGNsYXNzXFx4M2RcIicsYiwnXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIiAnKTtnP2dbcF0mJmQucHVzaChcIndpZHRoOlwiK3YoZ1twXSkpOmQucHVzaChcIndpZHRoOlwiK01hdGguZmxvb3IoMTAwL2MubGVuZ3RoKStcIiVcIik7aCYmZC5wdXNoKFwiaGVpZ2h0OlwiK3YoaCkpO2UmJnZvaWQgMCE9PWUucGFkZGluZyYmZC5wdXNoKFwicGFkZGluZzpcIit2KGUucGFkZGluZykpO0NLRURJVE9SLmVudi5pZSYmQ0tFRElUT1IuZW52LnF1aXJrcyYmZltwXS5hbGlnbiYmZC5wdXNoKFwidGV4dC1hbGlnbjpcIitmW3BdLmFsaWduKTswPGQubGVuZ3RoJiZhLnB1c2goJ3N0eWxlXFx4M2RcIicrZC5qb2luKFwiOyBcIikrJ1wiICcpO2EucHVzaChcIlxceDNlXCIsY1twXSxcIlxceDNjL3RkXFx4M2VcIil9YS5wdXNoKFwiXFx4M2MvdHJcXHgzZVxceDNjL3Rib2R5XFx4M2VcIik7XG5yZXR1cm4gYS5qb2luKFwiXCIpfSl9fSx2Ym94OmZ1bmN0aW9uKGEsYixjLGQsZSl7aWYoISgzPmFyZ3VtZW50cy5sZW5ndGgpKXt0aGlzLl98fCh0aGlzLl89e30pO3ZhciBmPXRoaXMuXy5jaGlsZHJlbj1iLGc9ZSYmZS53aWR0aHx8bnVsbCxoPWUmJmUuaGVpZ2h0c3x8bnVsbDtDS0VESVRPUi51aS5kaWFsb2cudWlFbGVtZW50LmNhbGwodGhpcyxhLGV8fHt0eXBlOlwidmJveFwifSxkLFwiZGl2XCIsbnVsbCx7cm9sZTpcInByZXNlbnRhdGlvblwifSxmdW5jdGlvbigpe3ZhciBiPVsnXFx4M2N0YWJsZSByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiIGNlbGxzcGFjaW5nXFx4M2RcIjBcIiBib3JkZXJcXHgzZFwiMFwiICddO2IucHVzaCgnc3R5bGVcXHgzZFwiJyk7ZSYmZS5leHBhbmQmJmIucHVzaChcImhlaWdodDoxMDAlO1wiKTtiLnB1c2goXCJ3aWR0aDpcIit2KGd8fFwiMTAwJVwiKSxcIjtcIik7Q0tFRElUT1IuZW52LndlYmtpdCYmYi5wdXNoKFwiZmxvYXQ6bm9uZTtcIik7Yi5wdXNoKCdcIicpO2IucHVzaCgnYWxpZ25cXHgzZFwiJyxcbkNLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGUoZSYmZS5hbGlnbnx8KFwibHRyXCI9PWEuZ2V0UGFyZW50RWRpdG9yKCkubGFuZy5kaXI/XCJsZWZ0XCI6XCJyaWdodFwiKSksJ1wiICcpO2IucHVzaChcIlxceDNlXFx4M2N0Ym9keVxceDNlXCIpO2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgaz1bXTtiLnB1c2goJ1xceDNjdHJcXHgzZVxceDNjdGQgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIiAnKTtnJiZrLnB1c2goXCJ3aWR0aDpcIit2KGd8fFwiMTAwJVwiKSk7aD9rLnB1c2goXCJoZWlnaHQ6XCIrdihoW2RdKSk6ZSYmZS5leHBhbmQmJmsucHVzaChcImhlaWdodDpcIitNYXRoLmZsb29yKDEwMC9jLmxlbmd0aCkrXCIlXCIpO2UmJnZvaWQgMCE9PWUucGFkZGluZyYmay5wdXNoKFwicGFkZGluZzpcIit2KGUucGFkZGluZykpO0NLRURJVE9SLmVudi5pZSYmQ0tFRElUT1IuZW52LnF1aXJrcyYmZltkXS5hbGlnbiYmay5wdXNoKFwidGV4dC1hbGlnbjpcIitmW2RdLmFsaWduKTswPGsubGVuZ3RoJiZiLnB1c2goJ3N0eWxlXFx4M2RcIicsXG5rLmpvaW4oXCI7IFwiKSwnXCIgJyk7Yi5wdXNoKCcgY2xhc3NcXHgzZFwiY2tlX2RpYWxvZ191aV92Ym94X2NoaWxkXCJcXHgzZScsY1tkXSxcIlxceDNjL3RkXFx4M2VcXHgzYy90clxceDNlXCIpfWIucHVzaChcIlxceDNjL3Rib2R5XFx4M2VcXHgzYy90YWJsZVxceDNlXCIpO3JldHVybiBiLmpvaW4oXCJcIil9KX19fX0pKCk7Q0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudC5wcm90b3R5cGU9e2dldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gQ0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZCh0aGlzLmRvbUlkKX0sZ2V0SW5wdXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RWxlbWVudCgpfSxnZXREaWFsb2c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLmRpYWxvZ30sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiKXt0aGlzLmdldElucHV0RWxlbWVudCgpLnNldFZhbHVlKGEpOyFiJiZ0aGlzLmZpcmUoXCJjaGFuZ2VcIix7dmFsdWU6YX0pO3JldHVybiB0aGlzfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldElucHV0RWxlbWVudCgpLmdldFZhbHVlKCl9LFxuaXNDaGFuZ2VkOmZ1bmN0aW9uKCl7cmV0dXJuITF9LHNlbGVjdFBhcmVudFRhYjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmdldElucHV0RWxlbWVudCgpOyhhPWEuZ2V0UGFyZW50KCkpJiYtMT09YS4kLmNsYXNzTmFtZS5zZWFyY2goXCJja2VfZGlhbG9nX3BhZ2VfY29udGVudHNcIik7KTtpZighYSlyZXR1cm4gdGhpczthPWEuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTt0aGlzLl8uZGlhbG9nLl8uY3VycmVudFRhYklkIT1hJiZ0aGlzLl8uZGlhbG9nLnNlbGVjdFBhZ2UoYSk7cmV0dXJuIHRoaXN9LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RQYXJlbnRUYWIoKS5nZXRJbnB1dEVsZW1lbnQoKS5mb2N1cygpO3JldHVybiB0aGlzfSxyZWdpc3RlckV2ZW50czpmdW5jdGlvbihhKXt2YXIgYj0vXm9uKFtBLVpdXFx3KykvLGMsZD1mdW5jdGlvbihhLGIsYyxkKXtiLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7YS5nZXRJbnB1dEVsZW1lbnQoKS5vbihjLGQsYSl9KX0sZTtmb3IoZSBpbiBhKWlmKGM9XG5lLm1hdGNoKGIpKXRoaXMuZXZlbnRQcm9jZXNzb3JzW2VdP3RoaXMuZXZlbnRQcm9jZXNzb3JzW2VdLmNhbGwodGhpcyx0aGlzLl8uZGlhbG9nLGFbZV0pOmQodGhpcyx0aGlzLl8uZGlhbG9nLGNbMV0udG9Mb3dlckNhc2UoKSxhW2VdKTtyZXR1cm4gdGhpc30sZXZlbnRQcm9jZXNzb3JzOntvbkxvYWQ6ZnVuY3Rpb24oYSxiKXthLm9uKFwibG9hZFwiLGIsdGhpcyl9LG9uU2hvdzpmdW5jdGlvbihhLGIpe2Eub24oXCJzaG93XCIsYix0aGlzKX0sb25IaWRlOmZ1bmN0aW9uKGEsYil7YS5vbihcImhpZGVcIixiLHRoaXMpfX0sYWNjZXNzS2V5RG93bjpmdW5jdGlvbigpe3RoaXMuZm9jdXMoKX0sYWNjZXNzS2V5VXA6ZnVuY3Rpb24oKXt9LGRpc2FibGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEVsZW1lbnQoKTt0aGlzLmdldElucHV0RWxlbWVudCgpLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJ0cnVlXCIpO2EuYWRkQ2xhc3MoXCJja2VfZGlzYWJsZWRcIil9LGVuYWJsZTpmdW5jdGlvbigpe3ZhciBhPVxudGhpcy5nZXRFbGVtZW50KCk7dGhpcy5nZXRJbnB1dEVsZW1lbnQoKS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTthLnJlbW92ZUNsYXNzKFwiY2tlX2Rpc2FibGVkXCIpfSxpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5nZXRFbGVtZW50KCkuaGFzQ2xhc3MoXCJja2VfZGlzYWJsZWRcIil9LGlzVmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldElucHV0RWxlbWVudCgpLmlzVmlzaWJsZSgpfSxpc0ZvY3VzYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRW5hYmxlZCgpJiZ0aGlzLmlzVmlzaWJsZSgpPyEwOiExfX07Q0tFRElUT1IudWkuZGlhbG9nLmhib3gucHJvdG90eXBlPUNLRURJVE9SLnRvb2xzLmV4dGVuZChuZXcgQ0tFRElUT1IudWkuZGlhbG9nLnVpRWxlbWVudCx7Z2V0Q2hpbGQ6ZnVuY3Rpb24oYSl7aWYoMT5hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLl8uY2hpbGRyZW4uY29uY2F0KCk7YS5zcGxpY2V8fChhPVthXSk7cmV0dXJuIDI+XG5hLmxlbmd0aD90aGlzLl8uY2hpbGRyZW5bYVswXV06dGhpcy5fLmNoaWxkcmVuW2FbMF1dJiZ0aGlzLl8uY2hpbGRyZW5bYVswXV0uZ2V0Q2hpbGQ/dGhpcy5fLmNoaWxkcmVuW2FbMF1dLmdldENoaWxkKGEuc2xpY2UoMSxhLmxlbmd0aCkpOm51bGx9fSwhMCk7Q0tFRElUT1IudWkuZGlhbG9nLnZib3gucHJvdG90eXBlPW5ldyBDS0VESVRPUi51aS5kaWFsb2cuaGJveDsoZnVuY3Rpb24oKXt2YXIgYT17YnVpbGQ6ZnVuY3Rpb24oYSxjLGQpe2Zvcih2YXIgZT1jLmNoaWxkcmVuLGYsZz1bXSxoPVtdLHA9MDtwPGUubGVuZ3RoJiYoZj1lW3BdKTtwKyspe3ZhciBtPVtdO2cucHVzaChtKTtoLnB1c2goQ0tFRElUT1IuZGlhbG9nLl8udWlFbGVtZW50QnVpbGRlcnNbZi50eXBlXS5idWlsZChhLGYsbSkpfXJldHVybiBuZXcgQ0tFRElUT1IudWkuZGlhbG9nW2MudHlwZV0oYSxoLGcsZCxjKX19O0NLRURJVE9SLmRpYWxvZy5hZGRVSUVsZW1lbnQoXCJoYm94XCIsYSk7Q0tFRElUT1IuZGlhbG9nLmFkZFVJRWxlbWVudChcInZib3hcIixcbmEpfSkoKTtDS0VESVRPUi5kaWFsb2dDb21tYW5kPWZ1bmN0aW9uKGEsYil7dGhpcy5kaWFsb2dOYW1lPWE7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMsYiwhMCl9O0NLRURJVE9SLmRpYWxvZ0NvbW1hbmQucHJvdG90eXBlPXtleGVjOmZ1bmN0aW9uKGEpe2Eub3BlbkRpYWxvZyh0aGlzLmRpYWxvZ05hbWUpfSxjYW5VbmRvOiExLGVkaXRvckZvY3VzOjF9OyhmdW5jdGlvbigpe3ZhciBhPS9eKFthXXxbXmFdKSskLyxiPS9eXFxkKiQvLGM9L15cXGQqKD86XFwuXFxkKyk/JC8sZD0vXigoKFxcZCooXFwuXFxkKykpfChcXGQqKSkocHh8XFwlKT8pPyQvLGU9L14oKChcXGQqKFxcLlxcZCspKXwoXFxkKikpKHB4fGVtfGV4fGlufGNtfG1tfHB0fHBjfFxcJSk/KT8kL2ksZj0vXihcXHMqW1xcdy1dK1xccyo6XFxzKlteOjtdKyg/Ojt8JCkpKiQvO0NLRURJVE9SLlZBTElEQVRFX09SPTE7Q0tFRElUT1IuVkFMSURBVEVfQU5EPTI7Q0tFRElUT1IuZGlhbG9nLnZhbGlkYXRlPXtmdW5jdGlvbnM6ZnVuY3Rpb24oKXt2YXIgYT1cbmFyZ3VtZW50cztyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj10aGlzJiZ0aGlzLmdldFZhbHVlP3RoaXMuZ2V0VmFsdWUoKTphWzBdLGMsZD1DS0VESVRPUi5WQUxJREFURV9BTkQsZT1bXSxmO2ZvcihmPTA7ZjxhLmxlbmd0aDtmKyspaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYVtmXSllLnB1c2goYVtmXSk7ZWxzZSBicmVhaztmPGEubGVuZ3RoJiZcInN0cmluZ1wiPT10eXBlb2YgYVtmXSYmKGM9YVtmXSxmKyspO2Y8YS5sZW5ndGgmJlwibnVtYmVyXCI9PXR5cGVvZiBhW2ZdJiYoZD1hW2ZdKTt2YXIgbj1kPT1DS0VESVRPUi5WQUxJREFURV9BTkQ/ITA6ITE7Zm9yKGY9MDtmPGUubGVuZ3RoO2YrKyluPWQ9PUNLRURJVE9SLlZBTElEQVRFX0FORD9uJiZlW2ZdKGIpOm58fGVbZl0oYik7cmV0dXJuIG4/ITA6Y319LHJlZ2V4OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe2M9dGhpcyYmdGhpcy5nZXRWYWx1ZT90aGlzLmdldFZhbHVlKCk6YztyZXR1cm4gYS50ZXN0KGMpPyEwOmJ9fSxcbm5vdEVtcHR5OmZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnJlZ2V4KGEsYil9LGludGVnZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVnZXgoYixhKX0sbnVtYmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlZ2V4KGMsYSl9LGNzc0xlbmd0aDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5mdW5jdGlvbnMoZnVuY3Rpb24oYSl7cmV0dXJuIGUudGVzdChDS0VESVRPUi50b29scy50cmltKGEpKX0sYSl9LGh0bWxMZW5ndGg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZnVuY3Rpb25zKGZ1bmN0aW9uKGEpe3JldHVybiBkLnRlc3QoQ0tFRElUT1IudG9vbHMudHJpbShhKSl9LGEpfSxpbmxpbmVTdHlsZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5mdW5jdGlvbnMoZnVuY3Rpb24oYSl7cmV0dXJuIGYudGVzdChDS0VESVRPUi50b29scy50cmltKGEpKX0sYSl9LGVxdWFsczpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmZ1bmN0aW9ucyhmdW5jdGlvbihiKXtyZXR1cm4gYj09YX0sYil9LFxubm90RXF1YWw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5mdW5jdGlvbnMoZnVuY3Rpb24oYil7cmV0dXJuIGIhPWF9LGIpfX07Q0tFRElUT1Iub24oXCJpbnN0YW5jZURlc3Ryb3llZFwiLGZ1bmN0aW9uKGEpe2lmKENLRURJVE9SLnRvb2xzLmlzRW1wdHkoQ0tFRElUT1IuaW5zdGFuY2VzKSl7Zm9yKHZhciBiO2I9Q0tFRElUT1IuZGlhbG9nLl8uY3VycmVudFRvcDspYi5oaWRlKCk7Zm9yKHZhciBjIGluIHopeltjXS5yZW1vdmUoKTt6PXt9fWE9YS5lZGl0b3IuXy5zdG9yZWREaWFsb2dzO2Zvcih2YXIgZCBpbiBhKWFbZF0uZGVzdHJveSgpfSl9KSgpO0NLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLHtvcGVuRGlhbG9nOmZ1bmN0aW9uKGEsYil7dmFyIGM9bnVsbCxkPUNLRURJVE9SLmRpYWxvZy5fLmRpYWxvZ0RlZmluaXRpb25zW2FdO251bGw9PT1DS0VESVRPUi5kaWFsb2cuXy5jdXJyZW50VG9wJiZOKHRoaXMpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGQpYz1cbnRoaXMuXy5zdG9yZWREaWFsb2dzfHwodGhpcy5fLnN0b3JlZERpYWxvZ3M9e30pLGM9Y1thXXx8KGNbYV09bmV3IENLRURJVE9SLmRpYWxvZyh0aGlzLGEpKSxiJiZiLmNhbGwoYyxjKSxjLnNob3coKTtlbHNle2lmKFwiZmFpbGVkXCI9PWQpdGhyb3cgTyh0aGlzKSxFcnJvcignW0NLRURJVE9SLmRpYWxvZy5vcGVuRGlhbG9nXSBEaWFsb2cgXCInK2ErJ1wiIGZhaWxlZCB3aGVuIGxvYWRpbmcgZGVmaW5pdGlvbi4nKTtcInN0cmluZ1wiPT10eXBlb2YgZCYmQ0tFRElUT1Iuc2NyaXB0TG9hZGVyLmxvYWQoQ0tFRElUT1IuZ2V0VXJsKGQpLGZ1bmN0aW9uKCl7XCJmdW5jdGlvblwiIT10eXBlb2YgQ0tFRElUT1IuZGlhbG9nLl8uZGlhbG9nRGVmaW5pdGlvbnNbYV0mJihDS0VESVRPUi5kaWFsb2cuXy5kaWFsb2dEZWZpbml0aW9uc1thXT1cImZhaWxlZFwiKTt0aGlzLm9wZW5EaWFsb2coYSxiKX0sdGhpcywwLDEpfUNLRURJVE9SLnNraW4ubG9hZFBhcnQoXCJkaWFsb2dcIik7cmV0dXJuIGN9fSl9KSgpO1xuQ0tFRElUT1IucGx1Z2lucy5hZGQoXCJkaWFsb2dcIix7cmVxdWlyZXM6XCJkaWFsb2d1aVwiLGluaXQ6ZnVuY3Rpb24oeCl7eC5vbihcImRvdWJsZWNsaWNrXCIsZnVuY3Rpb24oQSl7QS5kYXRhLmRpYWxvZyYmeC5vcGVuRGlhbG9nKEEuZGF0YS5kaWFsb2cpfSxudWxsLG51bGwsOTk5KX19KTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImFib3V0XCIse3JlcXVpcmVzOlwiZGlhbG9nXCIsaW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLmFkZENvbW1hbmQoXCJhYm91dFwiLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwiYWJvdXRcIikpO2IubW9kZXM9e3d5c2l3eWc6MSxzb3VyY2U6MX07Yi5jYW5VbmRvPSExO2IucmVhZE9ubHk9MTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJBYm91dFwiLHtsYWJlbDphLmxhbmcuYWJvdXQudGl0bGUsY29tbWFuZDpcImFib3V0XCIsdG9vbGJhcjpcImFib3V0XCJ9KTtDS0VESVRPUi5kaWFsb2cuYWRkKFwiYWJvdXRcIix0aGlzLnBhdGgrXCJkaWFsb2dzL2Fib3V0LmpzXCIpfX0pOyhmdW5jdGlvbigpe0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiYTExeWhlbHBcIix7cmVxdWlyZXM6XCJkaWFsb2dcIixhdmFpbGFibGVMYW5nczp7YWY6MSxhcjoxLGJnOjEsY2E6MSxjczoxLGN5OjEsZGE6MSxkZToxLFwiZGUtY2hcIjoxLGVsOjEsZW46MSxcImVuLWdiXCI6MSxlbzoxLGVzOjEsZXQ6MSxldToxLGZhOjEsZmk6MSxmbzoxLGZyOjEsXCJmci1jYVwiOjEsZ2w6MSxndToxLGhlOjEsaGk6MSxocjoxLGh1OjEsaWQ6MSxpdDoxLGphOjEsa206MSxrbzoxLGt1OjEsbHQ6MSxsdjoxLG1rOjEsbW46MSxuYjoxLG5sOjEsbm86MSxwbDoxLHB0OjEsXCJwdC1iclwiOjEscm86MSxydToxLHNpOjEsc2s6MSxzbDoxLHNxOjEsc3I6MSxcInNyLWxhdG5cIjoxLHN2OjEsdGg6MSx0cjoxLHR0OjEsdWc6MSx1azoxLHZpOjEsemg6MSxcInpoLWNuXCI6MX0saW5pdDpmdW5jdGlvbihiKXt2YXIgYz10aGlzO2IuYWRkQ29tbWFuZChcImExMXlIZWxwXCIse2V4ZWM6ZnVuY3Rpb24oKXt2YXIgYT1iLmxhbmdDb2RlLGE9Yy5hdmFpbGFibGVMYW5nc1thXT9cbmE6Yy5hdmFpbGFibGVMYW5nc1thLnJlcGxhY2UoLy0uKi8sXCJcIildP2EucmVwbGFjZSgvLS4qLyxcIlwiKTpcImVuXCI7Q0tFRElUT1Iuc2NyaXB0TG9hZGVyLmxvYWQoQ0tFRElUT1IuZ2V0VXJsKGMucGF0aCtcImRpYWxvZ3MvbGFuZy9cIithK1wiLmpzXCIpLGZ1bmN0aW9uKCl7Yi5sYW5nLmExMXloZWxwPWMubGFuZ0VudHJpZXNbYV07Yi5vcGVuRGlhbG9nKFwiYTExeUhlbHBcIil9KX0sbW9kZXM6e3d5c2l3eWc6MSxzb3VyY2U6MX0scmVhZE9ubHk6MSxjYW5VbmRvOiExfSk7Yi5zZXRLZXlzdHJva2UoQ0tFRElUT1IuQUxUKzQ4LFwiYTExeUhlbHBcIik7Q0tFRElUT1IuZGlhbG9nLmFkZChcImExMXlIZWxwXCIsdGhpcy5wYXRoK1wiZGlhbG9ncy9hMTF5aGVscC5qc1wiKTtiLm9uKFwiYXJpYUVkaXRvckhlbHBMYWJlbFwiLGZ1bmN0aW9uKGEpe2EuZGF0YS5sYWJlbD1iLmxhbmcuY29tbW9uLmVkaXRvckhlbHB9KX19KX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZihjKXt2YXIgYT10aGlzLmF0dDtjPWMmJmMuaGFzQXR0cmlidXRlKGEpJiZjLmdldEF0dHJpYnV0ZShhKXx8XCJcIjt2b2lkIDAhPT1jJiZ0aGlzLnNldFZhbHVlKGMpfWZ1bmN0aW9uIGcoKXtmb3IodmFyIGMsYT0wO2E8YXJndW1lbnRzLmxlbmd0aDthKyspaWYoYXJndW1lbnRzW2FdaW5zdGFuY2VvZiBDS0VESVRPUi5kb20uZWxlbWVudCl7Yz1hcmd1bWVudHNbYV07YnJlYWt9aWYoYyl7dmFyIGE9dGhpcy5hdHQsYj10aGlzLmdldFZhbHVlKCk7Yj9jLnNldEF0dHJpYnV0ZShhLGIpOmMucmVtb3ZlQXR0cmlidXRlKGEsYil9fXZhciBrPXtpZDoxLGRpcjoxLGNsYXNzZXM6MSxzdHlsZXM6MX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJkaWFsb2dhZHZ0YWJcIix7cmVxdWlyZXM6XCJkaWFsb2dcIixhbGxvd2VkQ29udGVudDpmdW5jdGlvbihjKXtjfHwoYz1rKTt2YXIgYT1bXTtjLmlkJiZhLnB1c2goXCJpZFwiKTtjLmRpciYmYS5wdXNoKFwiZGlyXCIpO3ZhciBiPVxuXCJcIjthLmxlbmd0aCYmKGIrPVwiW1wiK2Euam9pbihcIixcIikrXCJdXCIpO2MuY2xhc3NlcyYmKGIrPVwiKCopXCIpO2Muc3R5bGVzJiYoYis9XCJ7Kn1cIik7cmV0dXJuIGJ9LGNyZWF0ZUFkdmFuY2VkVGFiOmZ1bmN0aW9uKGMsYSxiKXthfHwoYT1rKTt2YXIgZD1jLmxhbmcuY29tbW9uLGg9e2lkOlwiYWR2YW5jZWRcIixsYWJlbDpkLmFkdmFuY2VkVGFiLHRpdGxlOmQuYWR2YW5jZWRUYWIsZWxlbWVudHM6W3t0eXBlOlwidmJveFwiLHBhZGRpbmc6MSxjaGlsZHJlbjpbXX1dfSxlPVtdO2lmKGEuaWR8fGEuZGlyKWEuaWQmJmUucHVzaCh7aWQ6XCJhZHZJZFwiLGF0dDpcImlkXCIsdHlwZTpcInRleHRcIixyZXF1aXJlZENvbnRlbnQ6Yj9iK1wiW2lkXVwiOm51bGwsbGFiZWw6ZC5pZCxzZXR1cDpmLGNvbW1pdDpnfSksYS5kaXImJmUucHVzaCh7aWQ6XCJhZHZMYW5nRGlyXCIsYXR0OlwiZGlyXCIsdHlwZTpcInNlbGVjdFwiLHJlcXVpcmVkQ29udGVudDpiP2IrXCJbZGlyXVwiOm51bGwsbGFiZWw6ZC5sYW5nRGlyLFwiZGVmYXVsdFwiOlwiXCIsXG5zdHlsZTpcIndpZHRoOjEwMCVcIixpdGVtczpbW2Qubm90U2V0LFwiXCJdLFtkLmxhbmdEaXJMVFIsXCJsdHJcIl0sW2QubGFuZ0RpclJUTCxcInJ0bFwiXV0sc2V0dXA6Zixjb21taXQ6Z30pLGguZWxlbWVudHNbMF0uY2hpbGRyZW4ucHVzaCh7dHlwZTpcImhib3hcIix3aWR0aHM6W1wiNTAlXCIsXCI1MCVcIl0sY2hpbGRyZW46W10uY29uY2F0KGUpfSk7aWYoYS5zdHlsZXN8fGEuY2xhc3NlcyllPVtdLGEuc3R5bGVzJiZlLnB1c2goe2lkOlwiYWR2U3R5bGVzXCIsYXR0Olwic3R5bGVcIix0eXBlOlwidGV4dFwiLHJlcXVpcmVkQ29udGVudDpiP2IrXCJ7Y2tlLXh5en1cIjpudWxsLGxhYmVsOmQuc3R5bGVzLFwiZGVmYXVsdFwiOlwiXCIsdmFsaWRhdGU6Q0tFRElUT1IuZGlhbG9nLnZhbGlkYXRlLmlubGluZVN0eWxlKGQuaW52YWxpZElubGluZVN0eWxlKSxvbkNoYW5nZTpmdW5jdGlvbigpe30sZ2V0U3R5bGU6ZnVuY3Rpb24oYSxjKXt2YXIgYj10aGlzLmdldFZhbHVlKCkubWF0Y2gobmV3IFJlZ0V4cChcIig/Ol58OylcXFxccypcIitcbmErXCJcXFxccyo6XFxcXHMqKFteO10qKVwiLFwiaVwiKSk7cmV0dXJuIGI/YlsxXTpjfSx1cGRhdGVTdHlsZTpmdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMuZ2V0VmFsdWUoKSxlPWMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7ZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLGQpO2Uuc2V0U3R5bGUoYSxiKTtkPUNLRURJVE9SLnRvb2xzLm5vcm1hbGl6ZUNzc1RleHQoZS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSk7dGhpcy5zZXRWYWx1ZShkLDEpfSxzZXR1cDpmLGNvbW1pdDpnfSksYS5jbGFzc2VzJiZlLnB1c2goe3R5cGU6XCJoYm94XCIsd2lkdGhzOltcIjQ1JVwiLFwiNTUlXCJdLGNoaWxkcmVuOlt7aWQ6XCJhZHZDU1NDbGFzc2VzXCIsYXR0OlwiY2xhc3NcIix0eXBlOlwidGV4dFwiLHJlcXVpcmVkQ29udGVudDpiP2IrXCIoY2tlLXh5eilcIjpudWxsLGxhYmVsOmQuY3NzQ2xhc3NlcyxcImRlZmF1bHRcIjpcIlwiLHNldHVwOmYsY29tbWl0Omd9XX0pLGguZWxlbWVudHNbMF0uY2hpbGRyZW4ucHVzaCh7dHlwZTpcImhib3hcIixcbndpZHRoczpbXCI1MCVcIixcIjUwJVwiXSxjaGlsZHJlbjpbXS5jb25jYXQoZSl9KTtyZXR1cm4gaH19KX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJiYXNpY3N0eWxlc1wiLHtpbml0OmZ1bmN0aW9uKGMpe3ZhciBlPTAsZD1mdW5jdGlvbihnLGQsYixhKXtpZihhKXthPW5ldyBDS0VESVRPUi5zdHlsZShhKTt2YXIgZj1oW2JdO2YudW5zaGlmdChhKTtjLmF0dGFjaFN0eWxlU3RhdGVDaGFuZ2UoYSxmdW5jdGlvbihhKXshYy5yZWFkT25seSYmYy5nZXRDb21tYW5kKGIpLnNldFN0YXRlKGEpfSk7Yy5hZGRDb21tYW5kKGIsbmV3IENLRURJVE9SLnN0eWxlQ29tbWFuZChhLHtjb250ZW50Rm9ybXM6Zn0pKTtjLnVpLmFkZEJ1dHRvbiYmYy51aS5hZGRCdXR0b24oZyx7bGFiZWw6ZCxjb21tYW5kOmIsdG9vbGJhcjpcImJhc2ljc3R5bGVzLFwiKyhlKz0xMCl9KX19LGg9e2JvbGQ6W1wic3Ryb25nXCIsXCJiXCIsW1wic3BhblwiLGZ1bmN0aW9uKGEpe2E9YS5zdHlsZXNbXCJmb250LXdlaWdodFwiXTtyZXR1cm5cImJvbGRcIj09YXx8NzAwPD0rYX1dXSxpdGFsaWM6W1wiZW1cIixcImlcIixbXCJzcGFuXCIsZnVuY3Rpb24oYSl7cmV0dXJuXCJpdGFsaWNcIj09XG5hLnN0eWxlc1tcImZvbnQtc3R5bGVcIl19XV0sdW5kZXJsaW5lOltcInVcIixbXCJzcGFuXCIsZnVuY3Rpb24oYSl7cmV0dXJuXCJ1bmRlcmxpbmVcIj09YS5zdHlsZXNbXCJ0ZXh0LWRlY29yYXRpb25cIl19XV0sc3RyaWtlOltcInNcIixcInN0cmlrZVwiLFtcInNwYW5cIixmdW5jdGlvbihhKXtyZXR1cm5cImxpbmUtdGhyb3VnaFwiPT1hLnN0eWxlc1tcInRleHQtZGVjb3JhdGlvblwiXX1dXSxzdWJzY3JpcHQ6W1wic3ViXCJdLHN1cGVyc2NyaXB0OltcInN1cFwiXX0sYj1jLmNvbmZpZyxhPWMubGFuZy5iYXNpY3N0eWxlcztkKFwiQm9sZFwiLGEuYm9sZCxcImJvbGRcIixiLmNvcmVTdHlsZXNfYm9sZCk7ZChcIkl0YWxpY1wiLGEuaXRhbGljLFwiaXRhbGljXCIsYi5jb3JlU3R5bGVzX2l0YWxpYyk7ZChcIlVuZGVybGluZVwiLGEudW5kZXJsaW5lLFwidW5kZXJsaW5lXCIsYi5jb3JlU3R5bGVzX3VuZGVybGluZSk7ZChcIlN0cmlrZVwiLGEuc3RyaWtlLFwic3RyaWtlXCIsYi5jb3JlU3R5bGVzX3N0cmlrZSk7ZChcIlN1YnNjcmlwdFwiLGEuc3Vic2NyaXB0LFxuXCJzdWJzY3JpcHRcIixiLmNvcmVTdHlsZXNfc3Vic2NyaXB0KTtkKFwiU3VwZXJzY3JpcHRcIixhLnN1cGVyc2NyaXB0LFwic3VwZXJzY3JpcHRcIixiLmNvcmVTdHlsZXNfc3VwZXJzY3JpcHQpO2Muc2V0S2V5c3Ryb2tlKFtbQ0tFRElUT1IuQ1RSTCs2NixcImJvbGRcIl0sW0NLRURJVE9SLkNUUkwrNzMsXCJpdGFsaWNcIl0sW0NLRURJVE9SLkNUUkwrODUsXCJ1bmRlcmxpbmVcIl1dKX19KTtDS0VESVRPUi5jb25maWcuY29yZVN0eWxlc19ib2xkPXtlbGVtZW50Olwic3Ryb25nXCIsb3ZlcnJpZGVzOlwiYlwifTtDS0VESVRPUi5jb25maWcuY29yZVN0eWxlc19pdGFsaWM9e2VsZW1lbnQ6XCJlbVwiLG92ZXJyaWRlczpcImlcIn07Q0tFRElUT1IuY29uZmlnLmNvcmVTdHlsZXNfdW5kZXJsaW5lPXtlbGVtZW50OlwidVwifTtDS0VESVRPUi5jb25maWcuY29yZVN0eWxlc19zdHJpa2U9e2VsZW1lbnQ6XCJzXCIsb3ZlcnJpZGVzOlwic3RyaWtlXCJ9O0NLRURJVE9SLmNvbmZpZy5jb3JlU3R5bGVzX3N1YnNjcmlwdD17ZWxlbWVudDpcInN1YlwifTtcbkNLRURJVE9SLmNvbmZpZy5jb3JlU3R5bGVzX3N1cGVyc2NyaXB0PXtlbGVtZW50Olwic3VwXCJ9OyhmdW5jdGlvbigpe2Z1bmN0aW9uIHEoYSxmLGQsYil7aWYoIWEuaXNSZWFkT25seSgpJiYhYS5lcXVhbHMoZC5lZGl0YWJsZSgpKSl7Q0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyKGIsYSxcImJpZGlfcHJvY2Vzc2VkXCIsMSk7Yj1hO2Zvcih2YXIgYz1kLmVkaXRhYmxlKCk7KGI9Yi5nZXRQYXJlbnQoKSkmJiFiLmVxdWFscyhjKTspaWYoYi5nZXRDdXN0b21EYXRhKFwiYmlkaV9wcm9jZXNzZWRcIikpe2EucmVtb3ZlU3R5bGUoXCJkaXJlY3Rpb25cIik7YS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXJcIik7cmV0dXJufWI9XCJ1c2VDb21wdXRlZFN0YXRlXCJpbiBkLmNvbmZpZz9kLmNvbmZpZy51c2VDb21wdXRlZFN0YXRlOjE7KGI/YS5nZXRDb21wdXRlZFN0eWxlKFwiZGlyZWN0aW9uXCIpOmEuZ2V0U3R5bGUoXCJkaXJlY3Rpb25cIil8fGEuaGFzQXR0cmlidXRlKFwiZGlyXCIpKSE9ZiYmKGEucmVtb3ZlU3R5bGUoXCJkaXJlY3Rpb25cIiksYj8oYS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXJcIiksZiE9YS5nZXRDb21wdXRlZFN0eWxlKFwiZGlyZWN0aW9uXCIpJiZcbmEuc2V0QXR0cmlidXRlKFwiZGlyXCIsZikpOmEuc2V0QXR0cmlidXRlKFwiZGlyXCIsZiksZC5mb3JjZU5leHRTZWxlY3Rpb25DaGVjaygpKX19ZnVuY3Rpb24gdihhLGYsZCl7dmFyIGI9YS5nZXRDb21tb25BbmNlc3RvcighMSwhMCk7YT1hLmNsb25lKCk7YS5lbmxhcmdlKGQ9PUNLRURJVE9SLkVOVEVSX0JSP0NLRURJVE9SLkVOTEFSR0VfTElTVF9JVEVNX0NPTlRFTlRTOkNLRURJVE9SLkVOTEFSR0VfQkxPQ0tfQ09OVEVOVFMpO2lmKGEuY2hlY2tCb3VuZGFyeU9mRWxlbWVudChiLENLRURJVE9SLlNUQVJUKSYmYS5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGIsQ0tFRElUT1IuRU5EKSl7Zm9yKHZhciBjO2ImJmIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoYz1iLmdldFBhcmVudCgpKSYmMT09Yy5nZXRDaGlsZENvdW50KCkmJiEoYi5nZXROYW1lKClpbiBmKTspYj1jO3JldHVybiBiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYi5nZXROYW1lKClpbiBmJiZifX1mdW5jdGlvbiBwKGEpe3JldHVybntjb250ZXh0OlwicFwiLFxuYWxsb3dlZENvbnRlbnQ6e1wiaDEgaDIgaDMgaDQgaDUgaDYgdGFibGUgdWwgb2wgYmxvY2txdW90ZSBkaXYgdHIgcCBkaXYgbGkgdGRcIjp7cHJvcGVydGllc09ubHk6ITAsYXR0cmlidXRlczpcImRpclwifX0scmVxdWlyZWRDb250ZW50OlwicFtkaXJdXCIscmVmcmVzaDpmdW5jdGlvbihhLGQpe3ZhciBiPWEuY29uZmlnLnVzZUNvbXB1dGVkU3RhdGUsYyxiPXZvaWQgMD09PWJ8fGI7aWYoIWIpe2M9ZC5sYXN0RWxlbWVudDtmb3IodmFyIGg9YS5lZGl0YWJsZSgpO2MmJiEoYy5nZXROYW1lKClpbiB1fHxjLmVxdWFscyhoKSk7KXt2YXIgZT1jLmdldFBhcmVudCgpO2lmKCFlKWJyZWFrO2M9ZX19Yz1jfHxkLmJsb2NrfHxkLmJsb2NrTGltaXQ7Yy5lcXVhbHMoYS5lZGl0YWJsZSgpKSYmKGg9YS5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZXMoKVswXS5nZXRFbmNsb3NlZE5vZGUoKSkmJmgudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoYz1oKTtjJiYoYj1iP2MuZ2V0Q29tcHV0ZWRTdHlsZShcImRpcmVjdGlvblwiKTpcbmMuZ2V0U3R5bGUoXCJkaXJlY3Rpb25cIil8fGMuZ2V0QXR0cmlidXRlKFwiZGlyXCIpLGEuZ2V0Q29tbWFuZChcImJpZGlydGxcIikuc2V0U3RhdGUoXCJydGxcIj09Yj9DS0VESVRPUi5UUklTVEFURV9PTjpDS0VESVRPUi5UUklTVEFURV9PRkYpLGEuZ2V0Q29tbWFuZChcImJpZGlsdHJcIikuc2V0U3RhdGUoXCJsdHJcIj09Yj9DS0VESVRPUi5UUklTVEFURV9PTjpDS0VESVRPUi5UUklTVEFURV9PRkYpKTtiPShkLmJsb2NrfHxkLmJsb2NrTGltaXR8fGEuZWRpdGFibGUoKSkuZ2V0RGlyZWN0aW9uKDEpO2IhPShhLl8uc2VsRGlyfHxhLmxhbmcuZGlyKSYmKGEuXy5zZWxEaXI9YixhLmZpcmUoXCJjb250ZW50RGlyQ2hhbmdlZFwiLGIpKX0sZXhlYzpmdW5jdGlvbihmKXt2YXIgZD1mLmdldFNlbGVjdGlvbigpLGI9Zi5jb25maWcuZW50ZXJNb2RlLGM9ZC5nZXRSYW5nZXMoKTtpZihjJiZjLmxlbmd0aCl7Zm9yKHZhciBoPXt9LGU9ZC5jcmVhdGVCb29rbWFya3MoKSxjPWMuY3JlYXRlSXRlcmF0b3IoKSxnLFxubD0wO2c9Yy5nZXROZXh0UmFuZ2UoMSk7KXt2YXIgaz1nLmdldEVuY2xvc2VkTm9kZSgpO2smJigha3x8ay50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmsuZ2V0TmFtZSgpaW4gcil8fChrPXYoZyx0LGIpKTtrJiZxKGssYSxmLGgpO3ZhciBtPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGcpLG49ZVtsXS5zdGFydE5vZGUscD1lW2wrK10uZW5kTm9kZTttLmV2YWx1YXRvcj1mdW5jdGlvbihhKXt2YXIgYz1iPT1DS0VESVRPUi5FTlRFUl9QP1wicFwiOlwiZGl2XCIsZDtpZihkPShhP2EudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UOiExKSYmYS5nZXROYW1lKClpbiB0KXtpZihjPWEuaXMoYykpYz0oYz1hLmdldFBhcmVudCgpKT9jLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVDohMTtkPSEoYyYmYS5nZXRQYXJlbnQoKS5pcyhcImJsb2NrcXVvdGVcIikpfXJldHVybiEhKGQmJmEuZ2V0UG9zaXRpb24obikmQ0tFRElUT1IuUE9TSVRJT05fRk9MTE9XSU5HJiYoYS5nZXRQb3NpdGlvbihwKSZcbkNLRURJVE9SLlBPU0lUSU9OX1BSRUNFRElORytDS0VESVRPUi5QT1NJVElPTl9DT05UQUlOUyk9PUNLRURJVE9SLlBPU0lUSU9OX1BSRUNFRElORyl9O2Zvcig7az1tLm5leHQoKTspcShrLGEsZixoKTtnPWcuY3JlYXRlSXRlcmF0b3IoKTtmb3IoZy5lbmxhcmdlQnI9YiE9Q0tFRElUT1IuRU5URVJfQlI7az1nLmdldE5leHRQYXJhZ3JhcGgoYj09Q0tFRElUT1IuRU5URVJfUD9cInBcIjpcImRpdlwiKTspcShrLGEsZixoKX1DS0VESVRPUi5kb20uZWxlbWVudC5jbGVhckFsbE1hcmtlcnMoaCk7Zi5mb3JjZU5leHRTZWxlY3Rpb25DaGVjaygpO2Quc2VsZWN0Qm9va21hcmtzKGUpO2YuZm9jdXMoKX19fX1mdW5jdGlvbiB3KGEpe3ZhciBmPWE9PWwuc2V0QXR0cmlidXRlLGQ9YT09bC5yZW1vdmVBdHRyaWJ1dGUsYj0vXFxiZGlyZWN0aW9uXFxzKjpcXHMqKC4qPylcXHMqKDo/JHw7KS87cmV0dXJuIGZ1bmN0aW9uKGMsaCl7aWYoIXRoaXMuaXNSZWFkT25seSgpKXt2YXIgZTtpZihlPWM9PShmfHxkP1xuXCJkaXJcIjpcImRpcmVjdGlvblwiKXx8XCJzdHlsZVwiPT1jJiYoZHx8Yi50ZXN0KGgpKSl7YTp7ZT10aGlzO2Zvcih2YXIgZz1lLmdldERvY3VtZW50KCkuZ2V0Qm9keSgpLmdldFBhcmVudCgpO2U7KXtpZihlLmVxdWFscyhnKSl7ZT0hMTticmVhayBhfWU9ZS5nZXRQYXJlbnQoKX1lPSEwfWU9IWV9aWYoZSYmKGU9dGhpcy5nZXREaXJlY3Rpb24oMSksZz1hLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlIT10aGlzLmdldERpcmVjdGlvbigxKSkpcmV0dXJuIHRoaXMuZ2V0RG9jdW1lbnQoKS5maXJlKFwiZGlyQ2hhbmdlZFwiLHRoaXMpLGd9cmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfX12YXIgdD17dGFibGU6MSx1bDoxLG9sOjEsYmxvY2txdW90ZToxLGRpdjoxfSxyPXt9LHU9e307Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHIsdCx7dHI6MSxwOjEsZGl2OjEsbGk6MX0pO0NLRURJVE9SLnRvb2xzLmV4dGVuZCh1LHIse3RkOjF9KTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImJpZGlcIix7aW5pdDpmdW5jdGlvbihhKXtmdW5jdGlvbiBmKGIsXG5jLGQsZSxmKXthLmFkZENvbW1hbmQoZCxuZXcgQ0tFRElUT1IuY29tbWFuZChhLGUpKTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oYix7bGFiZWw6Yyxjb21tYW5kOmQsdG9vbGJhcjpcImJpZGksXCIrZn0pfWlmKCFhLmJsb2NrbGVzcyl7dmFyIGQ9YS5sYW5nLmJpZGk7ZihcIkJpZGlMdHJcIixkLmx0cixcImJpZGlsdHJcIixwKFwibHRyXCIpLDEwKTtmKFwiQmlkaVJ0bFwiLGQucnRsLFwiYmlkaXJ0bFwiLHAoXCJydGxcIiksMjApO2Eub24oXCJjb250ZW50RG9tXCIsZnVuY3Rpb24oKXthLmRvY3VtZW50Lm9uKFwiZGlyQ2hhbmdlZFwiLGZ1bmN0aW9uKGIpe2EuZmlyZShcImRpckNoYW5nZWRcIix7bm9kZTpiLmRhdGEsZGlyOmIuZGF0YS5nZXREaXJlY3Rpb24oMSl9KX0pfSk7YS5vbihcImNvbnRlbnREaXJDaGFuZ2VkXCIsZnVuY3Rpb24oYil7Yj0oYS5sYW5nLmRpciE9Yi5kYXRhP1wiYWRkXCI6XCJyZW1vdmVcIikrXCJDbGFzc1wiO3ZhciBjPWEudWkuc3BhY2UoYS5jb25maWcudG9vbGJhckxvY2F0aW9uKTtpZihjKWNbYl0oXCJja2VfbWl4ZWRfZGlyX2NvbnRlbnRcIil9KX19fSk7XG5mb3IodmFyIGw9Q0tFRElUT1IuZG9tLmVsZW1lbnQucHJvdG90eXBlLG49W1wic2V0U3R5bGVcIixcInJlbW92ZVN0eWxlXCIsXCJzZXRBdHRyaWJ1dGVcIixcInJlbW92ZUF0dHJpYnV0ZVwiXSxtPTA7bTxuLmxlbmd0aDttKyspbFtuW21dXT1DS0VESVRPUi50b29scy5vdmVycmlkZShsW25bbV1dLHcpfSkoKTsoZnVuY3Rpb24oKXt2YXIgbT17ZXhlYzpmdW5jdGlvbihnKXt2YXIgYT1nLmdldENvbW1hbmQoXCJibG9ja3F1b3RlXCIpLnN0YXRlLGs9Zy5nZXRTZWxlY3Rpb24oKSxjPWsmJmsuZ2V0UmFuZ2VzKClbMF07aWYoYyl7dmFyIGg9ay5jcmVhdGVCb29rbWFya3MoKTtpZihDS0VESVRPUi5lbnYuaWUpe3ZhciBlPWhbMF0uc3RhcnROb2RlLGI9aFswXS5lbmROb2RlLGQ7aWYoZSYmXCJibG9ja3F1b3RlXCI9PWUuZ2V0UGFyZW50KCkuZ2V0TmFtZSgpKWZvcihkPWU7ZD1kLmdldE5leHQoKTspaWYoZC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmQuaXNCbG9ja0JvdW5kYXJ5KCkpe2UubW92ZShkLCEwKTticmVha31pZihiJiZcImJsb2NrcXVvdGVcIj09Yi5nZXRQYXJlbnQoKS5nZXROYW1lKCkpZm9yKGQ9YjtkPWQuZ2V0UHJldmlvdXMoKTspaWYoZC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmQuaXNCbG9ja0JvdW5kYXJ5KCkpe2IubW92ZShkKTticmVha319dmFyIGY9Yy5jcmVhdGVJdGVyYXRvcigpO1xuZi5lbmxhcmdlQnI9Zy5jb25maWcuZW50ZXJNb2RlIT1DS0VESVRPUi5FTlRFUl9CUjtpZihhPT1DS0VESVRPUi5UUklTVEFURV9PRkYpe2ZvcihlPVtdO2E9Zi5nZXROZXh0UGFyYWdyYXBoKCk7KWUucHVzaChhKTsxPmUubGVuZ3RoJiYoYT1nLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZy5jb25maWcuZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9QP1wicFwiOlwiZGl2XCIpLGI9aC5zaGlmdCgpLGMuaW5zZXJ0Tm9kZShhKSxhLmFwcGVuZChuZXcgQ0tFRElUT1IuZG9tLnRleHQoXCLvu79cIixnLmRvY3VtZW50KSksYy5tb3ZlVG9Cb29rbWFyayhiKSxjLnNlbGVjdE5vZGVDb250ZW50cyhhKSxjLmNvbGxhcHNlKCEwKSxiPWMuY3JlYXRlQm9va21hcmsoKSxlLnB1c2goYSksaC51bnNoaWZ0KGIpKTtkPWVbMF0uZ2V0UGFyZW50KCk7Yz1bXTtmb3IoYj0wO2I8ZS5sZW5ndGg7YisrKWE9ZVtiXSxkPWQuZ2V0Q29tbW9uQW5jZXN0b3IoYS5nZXRQYXJlbnQoKSk7Zm9yKGE9e3RhYmxlOjEsdGJvZHk6MSxcbnRyOjEsb2w6MSx1bDoxfTthW2QuZ2V0TmFtZSgpXTspZD1kLmdldFBhcmVudCgpO2ZvcihiPW51bGw7MDxlLmxlbmd0aDspe2ZvcihhPWUuc2hpZnQoKTshYS5nZXRQYXJlbnQoKS5lcXVhbHMoZCk7KWE9YS5nZXRQYXJlbnQoKTthLmVxdWFscyhiKXx8Yy5wdXNoKGEpO2I9YX1mb3IoOzA8Yy5sZW5ndGg7KWlmKGE9Yy5zaGlmdCgpLFwiYmxvY2txdW90ZVwiPT1hLmdldE5hbWUoKSl7Zm9yKGI9bmV3IENLRURJVE9SLmRvbS5kb2N1bWVudEZyYWdtZW50KGcuZG9jdW1lbnQpO2EuZ2V0Rmlyc3QoKTspYi5hcHBlbmQoYS5nZXRGaXJzdCgpLnJlbW92ZSgpKSxlLnB1c2goYi5nZXRMYXN0KCkpO2IucmVwbGFjZShhKX1lbHNlIGUucHVzaChhKTtjPWcuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJsb2NrcXVvdGVcIik7Zm9yKGMuaW5zZXJ0QmVmb3JlKGVbMF0pOzA8ZS5sZW5ndGg7KWE9ZS5zaGlmdCgpLGMuYXBwZW5kKGEpfWVsc2UgaWYoYT09Q0tFRElUT1IuVFJJU1RBVEVfT04pe2I9W107XG5mb3IoZD17fTthPWYuZ2V0TmV4dFBhcmFncmFwaCgpOyl7Zm9yKGU9Yz1udWxsO2EuZ2V0UGFyZW50KCk7KXtpZihcImJsb2NrcXVvdGVcIj09YS5nZXRQYXJlbnQoKS5nZXROYW1lKCkpe2M9YS5nZXRQYXJlbnQoKTtlPWE7YnJlYWt9YT1hLmdldFBhcmVudCgpfWMmJmUmJiFlLmdldEN1c3RvbURhdGEoXCJibG9ja3F1b3RlX21vdmVvdXRcIikmJihiLnB1c2goZSksQ0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyKGQsZSxcImJsb2NrcXVvdGVfbW92ZW91dFwiLCEwKSl9Q0tFRElUT1IuZG9tLmVsZW1lbnQuY2xlYXJBbGxNYXJrZXJzKGQpO2E9W107ZT1bXTtmb3IoZD17fTswPGIubGVuZ3RoOylmPWIuc2hpZnQoKSxjPWYuZ2V0UGFyZW50KCksZi5nZXRQcmV2aW91cygpP2YuZ2V0TmV4dCgpPyhmLmJyZWFrUGFyZW50KGYuZ2V0UGFyZW50KCkpLGUucHVzaChmLmdldE5leHQoKSkpOmYucmVtb3ZlKCkuaW5zZXJ0QWZ0ZXIoYyk6Zi5yZW1vdmUoKS5pbnNlcnRCZWZvcmUoYyksYy5nZXRDdXN0b21EYXRhKFwiYmxvY2txdW90ZV9wcm9jZXNzZWRcIil8fFxuKGUucHVzaChjKSxDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIoZCxjLFwiYmxvY2txdW90ZV9wcm9jZXNzZWRcIiwhMCkpLGEucHVzaChmKTtDS0VESVRPUi5kb20uZWxlbWVudC5jbGVhckFsbE1hcmtlcnMoZCk7Zm9yKGI9ZS5sZW5ndGgtMTswPD1iO2ItLSl7Yz1lW2JdO2E6e2Q9Yztmb3IodmFyIGY9MCxtPWQuZ2V0Q2hpbGRDb3VudCgpLGw9dm9pZCAwO2Y8bSYmKGw9ZC5nZXRDaGlsZChmKSk7ZisrKWlmKGwudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZsLmlzQmxvY2tCb3VuZGFyeSgpKXtkPSExO2JyZWFrIGF9ZD0hMH1kJiZjLnJlbW92ZSgpfWlmKGcuY29uZmlnLmVudGVyTW9kZT09Q0tFRElUT1IuRU5URVJfQlIpZm9yKGM9ITA7YS5sZW5ndGg7KWlmKGY9YS5zaGlmdCgpLFwiZGl2XCI9PWYuZ2V0TmFtZSgpKXtiPW5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnRGcmFnbWVudChnLmRvY3VtZW50KTshY3x8IWYuZ2V0UHJldmlvdXMoKXx8Zi5nZXRQcmV2aW91cygpLnR5cGU9PVxuQ0tFRElUT1IuTk9ERV9FTEVNRU5UJiZmLmdldFByZXZpb3VzKCkuaXNCbG9ja0JvdW5kYXJ5KCl8fGIuYXBwZW5kKGcuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpKTtmb3IoYz1mLmdldE5leHQoKSYmIShmLmdldE5leHQoKS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmYuZ2V0TmV4dCgpLmlzQmxvY2tCb3VuZGFyeSgpKTtmLmdldEZpcnN0KCk7KWYuZ2V0Rmlyc3QoKS5yZW1vdmUoKS5hcHBlbmRUbyhiKTtjJiZiLmFwcGVuZChnLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7Yi5yZXBsYWNlKGYpO2M9ITF9fWsuc2VsZWN0Qm9va21hcmtzKGgpO2cuZm9jdXMoKX19LHJlZnJlc2g6ZnVuY3Rpb24oZyxhKXt0aGlzLnNldFN0YXRlKGcuZWxlbWVudFBhdGgoYS5ibG9ja3x8YS5ibG9ja0xpbWl0KS5jb250YWlucyhcImJsb2NrcXVvdGVcIiwxKT9DS0VESVRPUi5UUklTVEFURV9PTjpDS0VESVRPUi5UUklTVEFURV9PRkYpfSxjb250ZXh0OlwiYmxvY2txdW90ZVwiLGFsbG93ZWRDb250ZW50OlwiYmxvY2txdW90ZVwiLFxucmVxdWlyZWRDb250ZW50OlwiYmxvY2txdW90ZVwifTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImJsb2NrcXVvdGVcIix7aW5pdDpmdW5jdGlvbihnKXtnLmJsb2NrbGVzc3x8KGcuYWRkQ29tbWFuZChcImJsb2NrcXVvdGVcIixtKSxnLnVpLmFkZEJ1dHRvbiYmZy51aS5hZGRCdXR0b24oXCJCbG9ja3F1b3RlXCIse2xhYmVsOmcubGFuZy5ibG9ja3F1b3RlLnRvb2xiYXIsY29tbWFuZDpcImJsb2NrcXVvdGVcIix0b29sYmFyOlwiYmxvY2tzLDEwXCJ9KSl9fSl9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIHIoYixhLGMpe2EudHlwZXx8KGEudHlwZT1cImF1dG9cIik7aWYoYyYmITE9PT1iLmZpcmUoXCJiZWZvcmVQYXN0ZVwiLGEpfHwhYS5kYXRhVmFsdWUmJmEuZGF0YVRyYW5zZmVyLmlzRW1wdHkoKSlyZXR1cm4hMTthLmRhdGFWYWx1ZXx8KGEuZGF0YVZhbHVlPVwiXCIpO2lmKENLRURJVE9SLmVudi5nZWNrbyYmXCJkcm9wXCI9PWEubWV0aG9kJiZiLnRvb2xib3gpYi5vbmNlKFwiYWZ0ZXJQYXN0ZVwiLGZ1bmN0aW9uKCl7Yi50b29sYm94LmZvY3VzKCl9KTtyZXR1cm4gYi5maXJlKFwicGFzdGVcIixhKX1mdW5jdGlvbiB5KGIpe2Z1bmN0aW9uIGEoKXt2YXIgYT1iLmVkaXRhYmxlKCk7aWYoQ0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQuaXNDdXN0b21Db3B5Q3V0U3VwcG9ydGVkKXt2YXIgZD1mdW5jdGlvbihhKXtiLnJlYWRPbmx5JiZcImN1dFwiPT1hLm5hbWV8fG4uaW5pdFBhc3RlRGF0YVRyYW5zZmVyKGEsYik7YS5kYXRhLnByZXZlbnREZWZhdWx0KCl9O2Eub24oXCJjb3B5XCIsXG5kKTthLm9uKFwiY3V0XCIsZCk7YS5vbihcImN1dFwiLGZ1bmN0aW9uKCl7Yi5yZWFkT25seXx8Yi5leHRyYWN0U2VsZWN0ZWRIdG1sKCl9LG51bGwsbnVsbCw5OTkpfWEub24obi5tYWluUGFzdGVFdmVudCxmdW5jdGlvbihiKXtcImJlZm9yZXBhc3RlXCI9PW4ubWFpblBhc3RlRXZlbnQmJnB8fGsoYil9KTtcImJlZm9yZXBhc3RlXCI9PW4ubWFpblBhc3RlRXZlbnQmJihhLm9uKFwicGFzdGVcIixmdW5jdGlvbihhKXt2fHwoZSgpLGEuZGF0YS5wcmV2ZW50RGVmYXVsdCgpLGsoYSksZihcInBhc3RlXCIpfHxiLm9wZW5EaWFsb2coXCJwYXN0ZVwiKSl9KSxhLm9uKFwiY29udGV4dG1lbnVcIixnLG51bGwsbnVsbCwwKSxhLm9uKFwiYmVmb3JlcGFzdGVcIixmdW5jdGlvbihiKXshYi5kYXRhfHxiLmRhdGEuJC5jdHJsS2V5fHxiLmRhdGEuJC5zaGlmdEtleXx8ZygpfSxudWxsLG51bGwsMCkpO2Eub24oXCJiZWZvcmVjdXRcIixmdW5jdGlvbigpeyFwJiZoKGIpfSk7dmFyIGM7YS5hdHRhY2hMaXN0ZW5lcihDS0VESVRPUi5lbnYuaWU/XG5hOmIuZG9jdW1lbnQuZ2V0RG9jdW1lbnRFbGVtZW50KCksXCJtb3VzZXVwXCIsZnVuY3Rpb24oKXtjPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0KCl9LDApfSk7Yi5vbihcImRlc3Ryb3lcIixmdW5jdGlvbigpe2NsZWFyVGltZW91dChjKX0pO2Eub24oXCJrZXl1cFwiLHQpfWZ1bmN0aW9uIGMoYSl7cmV0dXJue3R5cGU6YSxjYW5VbmRvOlwiY3V0XCI9PWEsc3RhcnREaXNhYmxlZDohMCxleGVjOmZ1bmN0aW9uKCl7XCJjdXRcIj09dGhpcy50eXBlJiZoKCk7dmFyIGE7dmFyIGQ9dGhpcy50eXBlO2lmKENLRURJVE9SLmVudi5pZSlhPWYoZCk7ZWxzZSB0cnl7YT1iLmRvY3VtZW50LiQuZXhlY0NvbW1hbmQoZCwhMSxudWxsKX1jYXRjaChjKXthPSExfWF8fGIuc2hvd05vdGlmaWNhdGlvbihiLmxhbmcuY2xpcGJvYXJkW3RoaXMudHlwZStcIkVycm9yXCJdKTtyZXR1cm4gYX19fWZ1bmN0aW9uIGQoKXtyZXR1cm57Y2FuVW5kbzohMSxhc3luYzohMCxleGVjOmZ1bmN0aW9uKGIsYSl7dmFyIGQ9dGhpcyxjPWZ1bmN0aW9uKGEsXG5jKXthJiZyKGIsYSwhIWMpO2IuZmlyZShcImFmdGVyQ29tbWFuZEV4ZWNcIix7bmFtZTpcInBhc3RlXCIsY29tbWFuZDpkLHJldHVyblZhbHVlOiEhYX0pfTtcInN0cmluZ1wiPT10eXBlb2YgYT9jKHtkYXRhVmFsdWU6YSxtZXRob2Q6XCJwYXN0ZVwiLGRhdGFUcmFuc2ZlcjpuLmluaXRQYXN0ZURhdGFUcmFuc2ZlcigpfSwxKTpiLmdldENsaXBib2FyZERhdGEoYyl9fX1mdW5jdGlvbiBlKCl7dj0xO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2PTB9LDEwMCl9ZnVuY3Rpb24gZygpe3A9MTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cD0wfSwxMCl9ZnVuY3Rpb24gZihhKXt2YXIgZD1iLmRvY3VtZW50LGM9ZC5nZXRCb2R5KCksZT0hMSxmPWZ1bmN0aW9uKCl7ZT0hMH07Yy5vbihhLGYpOzc8Q0tFRElUT1IuZW52LnZlcnNpb24/ZC4kLmV4ZWNDb21tYW5kKGEpOmQuJC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKS5leGVjQ29tbWFuZChhKTtjLnJlbW92ZUxpc3RlbmVyKGEsZik7cmV0dXJuIGV9ZnVuY3Rpb24gaCgpe2lmKENLRURJVE9SLmVudi5pZSYmXG4hQ0tFRElUT1IuZW52LnF1aXJrcyl7dmFyIGE9Yi5nZXRTZWxlY3Rpb24oKSxkLGMsZTthLmdldFR5cGUoKT09Q0tFRElUT1IuU0VMRUNUSU9OX0VMRU1FTlQmJihkPWEuZ2V0U2VsZWN0ZWRFbGVtZW50KCkpJiYoYz1hLmdldFJhbmdlcygpWzBdLGU9Yi5kb2N1bWVudC5jcmVhdGVUZXh0KFwiXCIpLGUuaW5zZXJ0QmVmb3JlKGQpLGMuc2V0U3RhcnRCZWZvcmUoZSksYy5zZXRFbmRBZnRlcihkKSxhLnNlbGVjdFJhbmdlcyhbY10pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtkLmdldFBhcmVudCgpJiYoZS5yZW1vdmUoKSxhLnNlbGVjdEVsZW1lbnQoZCkpfSwwKSl9fWZ1bmN0aW9uIGwoYSxkKXt2YXIgYz1iLmRvY3VtZW50LGU9Yi5lZGl0YWJsZSgpLGY9ZnVuY3Rpb24oYil7Yi5jYW5jZWwoKX0scTtpZighYy5nZXRCeUlkKFwiY2tlX3Bhc3RlYmluXCIpKXt2YXIgZz1iLmdldFNlbGVjdGlvbigpLGg9Zy5jcmVhdGVCb29rbWFya3MoKTtDS0VESVRPUi5lbnYuaWUmJmcucm9vdC5maXJlKFwic2VsZWN0aW9uY2hhbmdlXCIpO1xudmFyIG09bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KCFDS0VESVRPUi5lbnYud2Via2l0JiYhZS5pcyhcImJvZHlcIil8fENLRURJVE9SLmVudi5pZT9cImRpdlwiOlwiYm9keVwiLGMpO20uc2V0QXR0cmlidXRlcyh7aWQ6XCJja2VfcGFzdGViaW5cIixcImRhdGEtY2tlLXRlbXBcIjpcIjFcIn0pO3ZhciBrPTAsYz1jLmdldFdpbmRvdygpO0NLRURJVE9SLmVudi53ZWJraXQ/KGUuYXBwZW5kKG0pLG0uYWRkQ2xhc3MoXCJja2VfZWRpdGFibGVcIiksZS5pcyhcImJvZHlcIil8fChrPVwic3RhdGljXCIhPWUuZ2V0Q29tcHV0ZWRTdHlsZShcInBvc2l0aW9uXCIpP2U6Q0tFRElUT1IuZG9tLmVsZW1lbnQuZ2V0KGUuJC5vZmZzZXRQYXJlbnQpLGs9ay5nZXREb2N1bWVudFBvc2l0aW9uKCkueSkpOmUuZ2V0QXNjZW5kYW50KENLRURJVE9SLmVudi5pZT9cImJvZHlcIjpcImh0bWxcIiwxKS5hcHBlbmQobSk7bS5zZXRTdHlsZXMoe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6Yy5nZXRTY3JvbGxQb3NpdGlvbigpLnktaysxMCtcInB4XCIsXG53aWR0aDpcIjFweFwiLGhlaWdodDpNYXRoLm1heCgxLGMuZ2V0Vmlld1BhbmVTaXplKCkuaGVpZ2h0LTIwKStcInB4XCIsb3ZlcmZsb3c6XCJoaWRkZW5cIixtYXJnaW46MCxwYWRkaW5nOjB9KTtDS0VESVRPUi5lbnYuc2FmYXJpJiZtLnNldFN0eWxlcyhDS0VESVRPUi50b29scy5jc3NWZW5kb3JQcmVmaXgoXCJ1c2VyLXNlbGVjdFwiLFwidGV4dFwiKSk7KGs9bS5nZXRQYXJlbnQoKS5pc1JlYWRPbmx5KCkpPyhtLnNldE9wYWNpdHkoMCksbS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwhMCkpOm0uc2V0U3R5bGUoXCJsdHJcIj09Yi5jb25maWcuY29udGVudHNMYW5nRGlyZWN0aW9uP1wibGVmdFwiOlwicmlnaHRcIixcIi0xMDAwMHB4XCIpO2Iub24oXCJzZWxlY3Rpb25DaGFuZ2VcIixmLG51bGwsbnVsbCwwKTtpZihDS0VESVRPUi5lbnYud2Via2l0fHxDS0VESVRPUi5lbnYuZ2Vja28pcT1lLm9uY2UoXCJibHVyXCIsZixudWxsLG51bGwsLTEwMCk7ayYmbS5mb2N1cygpO2s9bmV3IENLRURJVE9SLmRvbS5yYW5nZShtKTtcbmsuc2VsZWN0Tm9kZUNvbnRlbnRzKG0pO3ZhciB0PWsuc2VsZWN0KCk7Q0tFRElUT1IuZW52LmllJiYocT1lLm9uY2UoXCJibHVyXCIsZnVuY3Rpb24oKXtiLmxvY2tTZWxlY3Rpb24odCl9KSk7dmFyIGw9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0V2luZG93KCkuZ2V0U2Nyb2xsUG9zaXRpb24oKS55O3NldFRpbWVvdXQoZnVuY3Rpb24oKXtDS0VESVRPUi5lbnYud2Via2l0JiYoQ0tFRElUT1IuZG9jdW1lbnQuZ2V0Qm9keSgpLiQuc2Nyb2xsVG9wPWwpO3EmJnEucmVtb3ZlTGlzdGVuZXIoKTtDS0VESVRPUi5lbnYuaWUmJmUuZm9jdXMoKTtnLnNlbGVjdEJvb2ttYXJrcyhoKTttLnJlbW92ZSgpO3ZhciBhO0NLRURJVE9SLmVudi53ZWJraXQmJihhPW0uZ2V0Rmlyc3QoKSkmJmEuaXMmJmEuaGFzQ2xhc3MoXCJBcHBsZS1zdHlsZS1zcGFuXCIpJiYobT1hKTtiLnJlbW92ZUxpc3RlbmVyKFwic2VsZWN0aW9uQ2hhbmdlXCIsZik7ZChtLmdldEh0bWwoKSl9LDApfX1mdW5jdGlvbiB6KCl7aWYoXCJwYXN0ZVwiPT1cbm4ubWFpblBhc3RlRXZlbnQpcmV0dXJuIGIuZmlyZShcImJlZm9yZVBhc3RlXCIse3R5cGU6XCJhdXRvXCIsbWV0aG9kOlwicGFzdGVcIn0pLCExO2IuZm9jdXMoKTtlKCk7dmFyIGE9Yi5mb2N1c01hbmFnZXI7YS5sb2NrKCk7aWYoYi5lZGl0YWJsZSgpLmZpcmUobi5tYWluUGFzdGVFdmVudCkmJiFmKFwicGFzdGVcIikpcmV0dXJuIGEudW5sb2NrKCksITE7YS51bmxvY2soKTtyZXR1cm4hMH1mdW5jdGlvbiBxKGEpe2lmKFwid3lzaXd5Z1wiPT1iLm1vZGUpc3dpdGNoKGEuZGF0YS5rZXlDb2RlKXtjYXNlIENLRURJVE9SLkNUUkwrODY6Y2FzZSBDS0VESVRPUi5TSElGVCs0NTphPWIuZWRpdGFibGUoKTtlKCk7XCJwYXN0ZVwiPT1uLm1haW5QYXN0ZUV2ZW50JiZhLmZpcmUoXCJiZWZvcmVwYXN0ZVwiKTticmVhaztjYXNlIENLRURJVE9SLkNUUkwrODg6Y2FzZSBDS0VESVRPUi5TSElGVCs0NjpiLmZpcmUoXCJzYXZlU25hcHNob3RcIiksc2V0VGltZW91dChmdW5jdGlvbigpe2IuZmlyZShcInNhdmVTbmFwc2hvdFwiKX0sXG41MCl9fWZ1bmN0aW9uIGsoYSl7dmFyIGQ9e3R5cGU6XCJhdXRvXCIsbWV0aG9kOlwicGFzdGVcIixkYXRhVHJhbnNmZXI6bi5pbml0UGFzdGVEYXRhVHJhbnNmZXIoYSl9O2QuZGF0YVRyYW5zZmVyLmNhY2hlRGF0YSgpO3ZhciBjPSExIT09Yi5maXJlKFwiYmVmb3JlUGFzdGVcIixkKTtjJiZuLmNhbkNsaXBib2FyZEFwaUJlVHJ1c3RlZChkLmRhdGFUcmFuc2ZlcixiKT8oYS5kYXRhLnByZXZlbnREZWZhdWx0KCksc2V0VGltZW91dChmdW5jdGlvbigpe3IoYixkKX0sMCkpOmwoYSxmdW5jdGlvbihhKXtkLmRhdGFWYWx1ZT1hLnJlcGxhY2UoLzxzcGFuW14+XStkYXRhLWNrZS1ib29rbWFya1tePF0qPzxcXC9zcGFuPi9pZyxcIlwiKTtjJiZyKGIsZCl9KX1mdW5jdGlvbiB0KCl7aWYoXCJ3eXNpd3lnXCI9PWIubW9kZSl7dmFyIGE9dShcInBhc3RlXCIpO2IuZ2V0Q29tbWFuZChcImN1dFwiKS5zZXRTdGF0ZSh1KFwiY3V0XCIpKTtiLmdldENvbW1hbmQoXCJjb3B5XCIpLnNldFN0YXRlKHUoXCJjb3B5XCIpKTtiLmdldENvbW1hbmQoXCJwYXN0ZVwiKS5zZXRTdGF0ZShhKTtcbmIuZmlyZShcInBhc3RlU3RhdGVcIixhKX19ZnVuY3Rpb24gdShhKXtpZih3JiZhIGlue3Bhc3RlOjEsY3V0OjF9KXJldHVybiBDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRDtpZihcInBhc3RlXCI9PWEpcmV0dXJuIENLRURJVE9SLlRSSVNUQVRFX09GRjthPWIuZ2V0U2VsZWN0aW9uKCk7dmFyIGQ9YS5nZXRSYW5nZXMoKTtyZXR1cm4gYS5nZXRUeXBlKCk9PUNLRURJVE9SLlNFTEVDVElPTl9OT05FfHwxPT1kLmxlbmd0aCYmZFswXS5jb2xsYXBzZWQ/Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfXZhciBuPUNLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkLHA9MCx2PTAsdz0wOyhmdW5jdGlvbigpe2Iub24oXCJrZXlcIixxKTtiLm9uKFwiY29udGVudERvbVwiLGEpO2Iub24oXCJzZWxlY3Rpb25DaGFuZ2VcIixmdW5jdGlvbihiKXt3PWIuZGF0YS5zZWxlY3Rpb24uZ2V0UmFuZ2VzKClbMF0uY2hlY2tSZWFkT25seSgpO3QoKX0pO2IuY29udGV4dE1lbnUmJmIuY29udGV4dE1lbnUuYWRkTGlzdGVuZXIoZnVuY3Rpb24oYixcbmEpe3c9YS5nZXRSYW5nZXMoKVswXS5jaGVja1JlYWRPbmx5KCk7cmV0dXJue2N1dDp1KFwiY3V0XCIpLGNvcHk6dShcImNvcHlcIikscGFzdGU6dShcInBhc3RlXCIpfX0pfSkoKTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGQsYyxlLGYscSl7dmFyIGc9Yi5sYW5nLmNsaXBib2FyZFtjXTtiLmFkZENvbW1hbmQoYyxlKTtiLnVpLmFkZEJ1dHRvbiYmYi51aS5hZGRCdXR0b24oZCx7bGFiZWw6Zyxjb21tYW5kOmMsdG9vbGJhcjpcImNsaXBib2FyZCxcIitmfSk7Yi5hZGRNZW51SXRlbXMmJmIuYWRkTWVudUl0ZW0oYyx7bGFiZWw6Zyxjb21tYW5kOmMsZ3JvdXA6XCJjbGlwYm9hcmRcIixvcmRlcjpxfSl9YShcIkN1dFwiLFwiY3V0XCIsYyhcImN1dFwiKSwxMCwxKTthKFwiQ29weVwiLFwiY29weVwiLGMoXCJjb3B5XCIpLDIwLDQpO2EoXCJQYXN0ZVwiLFwicGFzdGVcIixkKCksMzAsOCl9KSgpO2IuZ2V0Q2xpcGJvYXJkRGF0YT1mdW5jdGlvbihhLGQpe2Z1bmN0aW9uIGMoYSl7YS5yZW1vdmVMaXN0ZW5lcigpO2EuY2FuY2VsKCk7XG5kKGEuZGF0YSl9ZnVuY3Rpb24gZShhKXthLnJlbW92ZUxpc3RlbmVyKCk7YS5jYW5jZWwoKTtrPSEwO2Qoe3R5cGU6ZyxkYXRhVmFsdWU6YS5kYXRhLmRhdGFWYWx1ZSxkYXRhVHJhbnNmZXI6YS5kYXRhLmRhdGFUcmFuc2ZlcixtZXRob2Q6XCJwYXN0ZVwifSl9ZnVuY3Rpb24gZigpe3RoaXMuY3VzdG9tVGl0bGU9YSYmYS50aXRsZX12YXIgcT0hMSxnPVwiYXV0b1wiLGs9ITE7ZHx8KGQ9YSxhPW51bGwpO2Iub24oXCJwYXN0ZVwiLGMsbnVsbCxudWxsLDApO2Iub24oXCJiZWZvcmVQYXN0ZVwiLGZ1bmN0aW9uKGEpe2EucmVtb3ZlTGlzdGVuZXIoKTtxPSEwO2c9YS5kYXRhLnR5cGV9LG51bGwsbnVsbCwxRTMpOyExPT09eigpJiYoYi5yZW1vdmVMaXN0ZW5lcihcInBhc3RlXCIsYykscSYmYi5maXJlKFwicGFzdGVEaWFsb2dcIixmKT8oYi5vbihcInBhc3RlRGlhbG9nQ29tbWl0XCIsZSksYi5vbihcImRpYWxvZ0hpZGVcIixmdW5jdGlvbihhKXthLnJlbW92ZUxpc3RlbmVyKCk7YS5kYXRhLnJlbW92ZUxpc3RlbmVyKFwicGFzdGVEaWFsb2dDb21taXRcIixcbmUpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtrfHxkKG51bGwpfSwxMCl9KSk6ZChudWxsKSl9fWZ1bmN0aW9uIEEoYil7aWYoQ0tFRElUT1IuZW52LndlYmtpdCl7aWYoIWIubWF0Y2goL15bXjxdKiQvZykmJiFiLm1hdGNoKC9eKDxkaXY+PGJyKCA/XFwvKT8+PFxcL2Rpdj58PGRpdj5bXjxdKjxcXC9kaXY+KSokL2dpKSlyZXR1cm5cImh0bWxcIn1lbHNlIGlmKENLRURJVE9SLmVudi5pZSl7aWYoIWIubWF0Y2goL14oW148XXw8YnIoID9cXC8pPz4pKiQvZ2kpJiYhYi5tYXRjaCgvXig8cD4oW148XXw8YnIoID9cXC8pPz4pKjxcXC9wPnwoXFxyXFxuKSkqJC9naSkpcmV0dXJuXCJodG1sXCJ9ZWxzZSBpZihDS0VESVRPUi5lbnYuZ2Vja28pe2lmKCFiLm1hdGNoKC9eKFtePF18PGJyKCA/XFwvKT8+KSokL2dpKSlyZXR1cm5cImh0bWxcIn1lbHNlIHJldHVyblwiaHRtbFwiO3JldHVyblwiaHRtbGlmaWVkdGV4dFwifWZ1bmN0aW9uIEIoYixhKXtmdW5jdGlvbiBjKGEpe3JldHVybiBDS0VESVRPUi50b29scy5yZXBlYXQoXCJcXHgzYy9wXFx4M2VcXHgzY3BcXHgzZVwiLFxufn4oYS8yKSkrKDE9PWElMj9cIlxceDNjYnJcXHgzZVwiOlwiXCIpfWE9YS5yZXBsYWNlKC9cXHMrL2csXCIgXCIpLnJlcGxhY2UoLz4gKzwvZyxcIlxceDNlXFx4M2NcIikucmVwbGFjZSgvPGJyID9cXC8+L2dpLFwiXFx4M2NiclxceDNlXCIpO2E9YS5yZXBsYWNlKC88XFwvP1tBLVpdKz4vZyxmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpfSk7aWYoYS5tYXRjaCgvXltePF0kLykpcmV0dXJuIGE7Q0tFRElUT1IuZW52LndlYmtpdCYmLTE8YS5pbmRleE9mKFwiXFx4M2NkaXZcXHgzZVwiKSYmKGE9YS5yZXBsYWNlKC9eKDxkaXY+KDxicj58KTxcXC9kaXY+KSg/ISR8KDxkaXY+KDxicj58KTxcXC9kaXY+KSkvZyxcIlxceDNjYnJcXHgzZVwiKS5yZXBsYWNlKC9eKDxkaXY+KDxicj58KTxcXC9kaXY+KXsyfSg/ISQpL2csXCJcXHgzY2RpdlxceDNlXFx4M2MvZGl2XFx4M2VcIiksYS5tYXRjaCgvPGRpdj4oPGJyPnwpPFxcL2Rpdj4vKSYmKGE9XCJcXHgzY3BcXHgzZVwiK2EucmVwbGFjZSgvKDxkaXY+KDxicj58KTxcXC9kaXY+KSsvZyxmdW5jdGlvbihhKXtyZXR1cm4gYyhhLnNwbGl0KFwiXFx4M2MvZGl2XFx4M2VcXHgzY2RpdlxceDNlXCIpLmxlbmd0aCtcbjEpfSkrXCJcXHgzYy9wXFx4M2VcIiksYT1hLnJlcGxhY2UoLzxcXC9kaXY+PGRpdj4vZyxcIlxceDNjYnJcXHgzZVwiKSxhPWEucmVwbGFjZSgvPFxcLz9kaXY+L2csXCJcIikpO0NLRURJVE9SLmVudi5nZWNrbyYmYi5lbnRlck1vZGUhPUNLRURJVE9SLkVOVEVSX0JSJiYoQ0tFRElUT1IuZW52LmdlY2tvJiYoYT1hLnJlcGxhY2UoL148YnI+PGJyPiQvLFwiXFx4M2NiclxceDNlXCIpKSwtMTxhLmluZGV4T2YoXCJcXHgzY2JyXFx4M2VcXHgzY2JyXFx4M2VcIikmJihhPVwiXFx4M2NwXFx4M2VcIithLnJlcGxhY2UoLyg8YnI+KXsyLH0vZyxmdW5jdGlvbihhKXtyZXR1cm4gYyhhLmxlbmd0aC80KX0pK1wiXFx4M2MvcFxceDNlXCIpKTtyZXR1cm4gQyhiLGEpfWZ1bmN0aW9uIEQoKXtmdW5jdGlvbiBiKCl7dmFyIGE9e30sYjtmb3IoYiBpbiBDS0VESVRPUi5kdGQpXCIkXCIhPWIuY2hhckF0KDApJiZcImRpdlwiIT1iJiZcInNwYW5cIiE9YiYmKGFbYl09MSk7cmV0dXJuIGF9dmFyIGE9e307cmV0dXJue2dldDpmdW5jdGlvbihjKXtyZXR1cm5cInBsYWluLXRleHRcIj09XG5jP2EucGxhaW5UZXh0fHwoYS5wbGFpblRleHQ9bmV3IENLRURJVE9SLmZpbHRlcihcImJyXCIpKTpcInNlbWFudGljLWNvbnRlbnRcIj09Yz8oKGM9YS5zZW1hbnRpY0NvbnRlbnQpfHwoYz1uZXcgQ0tFRElUT1IuZmlsdGVyLGMuYWxsb3coeyQxOntlbGVtZW50czpiKCksYXR0cmlidXRlczohMCxzdHlsZXM6ITEsY2xhc3NlczohMX19KSxjPWEuc2VtYW50aWNDb250ZW50PWMpLGMpOmM/bmV3IENLRURJVE9SLmZpbHRlcihjKTpudWxsfX19ZnVuY3Rpb24geChiLGEsYyl7YT1DS0VESVRPUi5odG1sUGFyc2VyLmZyYWdtZW50LmZyb21IdG1sKGEpO3ZhciBkPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmJhc2ljV3JpdGVyO2MuYXBwbHlUbyhhLCEwLCExLGIuYWN0aXZlRW50ZXJNb2RlKTthLndyaXRlSHRtbChkKTtyZXR1cm4gZC5nZXRIdG1sKCl9ZnVuY3Rpb24gQyhiLGEpe2IuZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9CUj9hPWEucmVwbGFjZSgvKDxcXC9wPjxwPikrL2csZnVuY3Rpb24oYSl7cmV0dXJuIENLRURJVE9SLnRvb2xzLnJlcGVhdChcIlxceDNjYnJcXHgzZVwiLFxuYS5sZW5ndGgvNyoyKX0pLnJlcGxhY2UoLzxcXC8/cD4vZyxcIlwiKTpiLmVudGVyTW9kZT09Q0tFRElUT1IuRU5URVJfRElWJiYoYT1hLnJlcGxhY2UoLzwoXFwvKT9wPi9nLFwiXFx4M2MkMWRpdlxceDNlXCIpKTtyZXR1cm4gYX1mdW5jdGlvbiBFKGIpe2IuZGF0YS5wcmV2ZW50RGVmYXVsdCgpO2IuZGF0YS4kLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0PVwibm9uZVwifWZ1bmN0aW9uIEYoYil7dmFyIGE9Q0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQ7Yi5vbihcImNvbnRlbnREb21cIixmdW5jdGlvbigpe2Z1bmN0aW9uIGMoYSxkLGMpe2Quc2VsZWN0KCk7cihiLHtkYXRhVHJhbnNmZXI6YyxtZXRob2Q6XCJkcm9wXCJ9LDEpO2Muc291cmNlRWRpdG9yLmZpcmUoXCJzYXZlU25hcHNob3RcIik7Yy5zb3VyY2VFZGl0b3IuZWRpdGFibGUoKS5leHRyYWN0SHRtbEZyb21SYW5nZShhKTtjLnNvdXJjZUVkaXRvci5nZXRTZWxlY3Rpb24oKS5zZWxlY3RSYW5nZXMoW2FdKTtjLnNvdXJjZUVkaXRvci5maXJlKFwic2F2ZVNuYXBzaG90XCIpfVxuZnVuY3Rpb24gZChkLGMpe2Quc2VsZWN0KCk7cihiLHtkYXRhVHJhbnNmZXI6YyxtZXRob2Q6XCJkcm9wXCJ9LDEpO2EucmVzZXREcmFnRGF0YVRyYW5zZmVyKCl9ZnVuY3Rpb24gZShhLGQsYyl7dmFyIGU9eyQ6YS5kYXRhLiQsdGFyZ2V0OmEuZGF0YS5nZXRUYXJnZXQoKX07ZCYmKGUuZHJhZ1JhbmdlPWQpO2MmJihlLmRyb3BSYW5nZT1jKTshMT09PWIuZmlyZShhLm5hbWUsZSkmJmEuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIGcoYSl7YS50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihhPWEuZ2V0UGFyZW50KCkpO3JldHVybiBhLmdldENoaWxkQ291bnQoKX12YXIgZj1iLmVkaXRhYmxlKCksaD1DS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5nZXREcm9wVGFyZ2V0KGIpLGw9Yi51aS5zcGFjZShcInRvcFwiKSxwPWIudWkuc3BhY2UoXCJib3R0b21cIik7YS5wcmV2ZW50RGVmYXVsdERyb3BPbkVsZW1lbnQobCk7YS5wcmV2ZW50RGVmYXVsdERyb3BPbkVsZW1lbnQocCk7XG5mLmF0dGFjaExpc3RlbmVyKGgsXCJkcmFnc3RhcnRcIixlKTtmLmF0dGFjaExpc3RlbmVyKGIsXCJkcmFnc3RhcnRcIixhLnJlc2V0RHJhZ0RhdGFUcmFuc2ZlcixhLG51bGwsMSk7Zi5hdHRhY2hMaXN0ZW5lcihiLFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oZCl7YS5pbml0RHJhZ0RhdGFUcmFuc2ZlcihkLGIpfSxudWxsLG51bGwsMik7Zi5hdHRhY2hMaXN0ZW5lcihiLFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oKXt2YXIgZD1hLmRyYWdSYW5nZT1iLmdldFNlbGVjdGlvbigpLmdldFJhbmdlcygpWzBdO0NLRURJVE9SLmVudi5pZSYmMTA+Q0tFRElUT1IuZW52LnZlcnNpb24mJihhLmRyYWdTdGFydENvbnRhaW5lckNoaWxkQ291bnQ9ZD9nKGQuc3RhcnRDb250YWluZXIpOm51bGwsYS5kcmFnRW5kQ29udGFpbmVyQ2hpbGRDb3VudD1kP2coZC5lbmRDb250YWluZXIpOm51bGwpfSxudWxsLG51bGwsMTAwKTtmLmF0dGFjaExpc3RlbmVyKGgsXCJkcmFnZW5kXCIsZSk7Zi5hdHRhY2hMaXN0ZW5lcihiLFwiZHJhZ2VuZFwiLFxuYS5pbml0RHJhZ0RhdGFUcmFuc2ZlcixhLG51bGwsMSk7Zi5hdHRhY2hMaXN0ZW5lcihiLFwiZHJhZ2VuZFwiLGEucmVzZXREcmFnRGF0YVRyYW5zZmVyLGEsbnVsbCwxMDApO2YuYXR0YWNoTGlzdGVuZXIoaCxcImRyYWdvdmVyXCIsZnVuY3Rpb24oYSl7dmFyIGI9YS5kYXRhLmdldFRhcmdldCgpO2ImJmIuaXMmJmIuaXMoXCJodG1sXCIpP2EuZGF0YS5wcmV2ZW50RGVmYXVsdCgpOkNLRURJVE9SLmVudi5pZSYmQ0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQuaXNGaWxlQXBpU3VwcG9ydGVkJiZhLmRhdGEuJC5kYXRhVHJhbnNmZXIudHlwZXMuY29udGFpbnMoXCJGaWxlc1wiKSYmYS5kYXRhLnByZXZlbnREZWZhdWx0KCl9KTtmLmF0dGFjaExpc3RlbmVyKGgsXCJkcm9wXCIsZnVuY3Rpb24oZCl7aWYoIWQuZGF0YS4kLmRlZmF1bHRQcmV2ZW50ZWQpe2QuZGF0YS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBjPWQuZGF0YS5nZXRUYXJnZXQoKTtpZighYy5pc1JlYWRPbmx5KCl8fGMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcbmMuaXMoXCJodG1sXCIpKXt2YXIgYz1hLmdldFJhbmdlQXREcm9wUG9zaXRpb24oZCxiKSxmPWEuZHJhZ1JhbmdlO2MmJmUoZCxmLGMpfX19LG51bGwsbnVsbCw5OTk5KTtmLmF0dGFjaExpc3RlbmVyKGIsXCJkcm9wXCIsYS5pbml0RHJhZ0RhdGFUcmFuc2ZlcixhLG51bGwsMSk7Zi5hdHRhY2hMaXN0ZW5lcihiLFwiZHJvcFwiLGZ1bmN0aW9uKGUpe2lmKGU9ZS5kYXRhKXt2YXIgZj1lLmRyb3BSYW5nZSxnPWUuZHJhZ1JhbmdlLGg9ZS5kYXRhVHJhbnNmZXI7aC5nZXRUcmFuc2ZlclR5cGUoYik9PUNLRURJVE9SLkRBVEFfVFJBTlNGRVJfSU5URVJOQUw/c2V0VGltZW91dChmdW5jdGlvbigpe2EuaW50ZXJuYWxEcm9wKGcsZixoLGIpfSwwKTpoLmdldFRyYW5zZmVyVHlwZShiKT09Q0tFRElUT1IuREFUQV9UUkFOU0ZFUl9DUk9TU19FRElUT1JTP2MoZyxmLGgpOmQoZixoKX19LG51bGwsbnVsbCw5OTk5KX0pfUNLRURJVE9SLnBsdWdpbnMuYWRkKFwiY2xpcGJvYXJkXCIse3JlcXVpcmVzOlwiZGlhbG9nXCIsXG5pbml0OmZ1bmN0aW9uKGIpe3ZhciBhLGM9RCgpO2IuY29uZmlnLmZvcmNlUGFzdGVBc1BsYWluVGV4dD9hPVwicGxhaW4tdGV4dFwiOmIuY29uZmlnLnBhc3RlRmlsdGVyP2E9Yi5jb25maWcucGFzdGVGaWx0ZXI6IUNLRURJVE9SLmVudi53ZWJraXR8fFwicGFzdGVGaWx0ZXJcImluIGIuY29uZmlnfHwoYT1cInNlbWFudGljLWNvbnRlbnRcIik7Yi5wYXN0ZUZpbHRlcj1jLmdldChhKTt5KGIpO0YoYik7Q0tFRElUT1IuZGlhbG9nLmFkZChcInBhc3RlXCIsQ0tFRElUT1IuZ2V0VXJsKHRoaXMucGF0aCtcImRpYWxvZ3MvcGFzdGUuanNcIikpO2Iub24oXCJwYXN0ZVwiLGZ1bmN0aW9uKGEpe2EuZGF0YS5kYXRhVHJhbnNmZXJ8fChhLmRhdGEuZGF0YVRyYW5zZmVyPW5ldyBDS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5kYXRhVHJhbnNmZXIpO2lmKCFhLmRhdGEuZGF0YVZhbHVlKXt2YXIgYz1hLmRhdGEuZGF0YVRyYW5zZmVyLGc9Yy5nZXREYXRhKFwidGV4dC9odG1sXCIpO2lmKGcpYS5kYXRhLmRhdGFWYWx1ZT1cbmcsYS5kYXRhLnR5cGU9XCJodG1sXCI7ZWxzZSBpZihnPWMuZ2V0RGF0YShcInRleHQvcGxhaW5cIikpYS5kYXRhLmRhdGFWYWx1ZT1iLmVkaXRhYmxlKCkudHJhbnNmb3JtUGxhaW5UZXh0VG9IdG1sKGcpLGEuZGF0YS50eXBlPVwidGV4dFwifX0sbnVsbCxudWxsLDEpO2Iub24oXCJwYXN0ZVwiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YS5kYXRhVmFsdWUsYz1DS0VESVRPUi5kdGQuJGJsb2NrOy0xPGIuaW5kZXhPZihcIkFwcGxlLVwiKSYmKGI9Yi5yZXBsYWNlKC88c3BhbiBjbGFzcz1cIkFwcGxlLWNvbnZlcnRlZC1zcGFjZVwiPiZuYnNwOzxcXC9zcGFuPi9naSxcIiBcIiksXCJodG1sXCIhPWEuZGF0YS50eXBlJiYoYj1iLnJlcGxhY2UoLzxzcGFuIGNsYXNzPVwiQXBwbGUtdGFiLXNwYW5cIltePl0qPihbXjxdKik8XFwvc3Bhbj4vZ2ksZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5yZXBsYWNlKC9cXHQvZyxcIlxceDI2bmJzcDtcXHgyNm5ic3A7IFxceDI2bmJzcDtcIil9KSksLTE8Yi5pbmRleE9mKCdcXHgzY2JyIGNsYXNzXFx4M2RcIkFwcGxlLWludGVyY2hhbmdlLW5ld2xpbmVcIlxceDNlJykmJlxuKGEuZGF0YS5zdGFydHNXaXRoRU9MPTEsYS5kYXRhLnByZVNuaWZmaW5nPVwiaHRtbFwiLGI9Yi5yZXBsYWNlKC88YnIgY2xhc3M9XCJBcHBsZS1pbnRlcmNoYW5nZS1uZXdsaW5lXCI+LyxcIlwiKSksYj1iLnJlcGxhY2UoLyg8W14+XSspIGNsYXNzPVwiQXBwbGUtW15cIl0qXCIvZ2ksXCIkMVwiKSk7aWYoYi5tYXRjaCgvXjxbXjxdK2NrZV8oZWRpdGFibGV8Y29udGVudHMpL2kpKXt2YXIgZixoLGw9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwiZGl2XCIpO2ZvcihsLnNldEh0bWwoYik7MT09bC5nZXRDaGlsZENvdW50KCkmJihmPWwuZ2V0Rmlyc3QoKSkmJmYudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoZi5oYXNDbGFzcyhcImNrZV9lZGl0YWJsZVwiKXx8Zi5oYXNDbGFzcyhcImNrZV9jb250ZW50c1wiKSk7KWw9aD1mO2gmJihiPWguZ2V0SHRtbCgpLnJlcGxhY2UoLzxicj4kL2ksXCJcIikpfUNLRURJVE9SLmVudi5pZT9iPWIucmVwbGFjZSgvXiZuYnNwOyg/OiB8XFxyXFxuKT88KFxcdyspL2csZnVuY3Rpb24oYixcbmYpe3JldHVybiBmLnRvTG93ZXJDYXNlKClpbiBjPyhhLmRhdGEucHJlU25pZmZpbmc9XCJodG1sXCIsXCJcXHgzY1wiK2YpOmJ9KTpDS0VESVRPUi5lbnYud2Via2l0P2I9Yi5yZXBsYWNlKC88XFwvKFxcdyspPjxkaXY+PGJyPjxcXC9kaXY+JC8sZnVuY3Rpb24oYixmKXtyZXR1cm4gZiBpbiBjPyhhLmRhdGEuZW5kc1dpdGhFT0w9MSxcIlxceDNjL1wiK2YrXCJcXHgzZVwiKTpifSk6Q0tFRElUT1IuZW52LmdlY2tvJiYoYj1iLnJlcGxhY2UoLyhcXHMpPGJyPiQvLFwiJDFcIikpO2EuZGF0YS5kYXRhVmFsdWU9Yn0sbnVsbCxudWxsLDMpO2Iub24oXCJwYXN0ZVwiLGZ1bmN0aW9uKGEpe2E9YS5kYXRhO3ZhciBlPWEudHlwZSxnPWEuZGF0YVZhbHVlLGYsaD1iLmNvbmZpZy5jbGlwYm9hcmRfZGVmYXVsdENvbnRlbnRUeXBlfHxcImh0bWxcIixsPWEuZGF0YVRyYW5zZmVyLmdldFRyYW5zZmVyVHlwZShiKTtmPVwiaHRtbFwiPT1lfHxcImh0bWxcIj09YS5wcmVTbmlmZmluZz9cImh0bWxcIjpBKGcpO1wiaHRtbGlmaWVkdGV4dFwiPT1mJiZcbihnPUIoYi5jb25maWcsZykpO1widGV4dFwiPT1lJiZcImh0bWxcIj09Zj9nPXgoYixnLGMuZ2V0KFwicGxhaW4tdGV4dFwiKSk6bD09Q0tFRElUT1IuREFUQV9UUkFOU0ZFUl9FWFRFUk5BTCYmYi5wYXN0ZUZpbHRlciYmIWEuZG9udEZpbHRlciYmKGc9eChiLGcsYi5wYXN0ZUZpbHRlcikpO2Euc3RhcnRzV2l0aEVPTCYmKGc9J1xceDNjYnIgZGF0YS1ja2UtZW9sXFx4M2RcIjFcIlxceDNlJytnKTthLmVuZHNXaXRoRU9MJiYoZys9J1xceDNjYnIgZGF0YS1ja2UtZW9sXFx4M2RcIjFcIlxceDNlJyk7XCJhdXRvXCI9PWUmJihlPVwiaHRtbFwiPT1mfHxcImh0bWxcIj09aD9cImh0bWxcIjpcInRleHRcIik7YS50eXBlPWU7YS5kYXRhVmFsdWU9ZztkZWxldGUgYS5wcmVTbmlmZmluZztkZWxldGUgYS5zdGFydHNXaXRoRU9MO2RlbGV0ZSBhLmVuZHNXaXRoRU9MfSxudWxsLG51bGwsNik7Yi5vbihcInBhc3RlXCIsZnVuY3Rpb24oYSl7YT1hLmRhdGE7YS5kYXRhVmFsdWUmJihiLmluc2VydEh0bWwoYS5kYXRhVmFsdWUsYS50eXBlLGEucmFuZ2UpLFxuc2V0VGltZW91dChmdW5jdGlvbigpe2IuZmlyZShcImFmdGVyUGFzdGVcIil9LDApKX0sbnVsbCxudWxsLDFFMyk7Yi5vbihcInBhc3RlRGlhbG9nXCIsZnVuY3Rpb24oYSl7c2V0VGltZW91dChmdW5jdGlvbigpe2Iub3BlbkRpYWxvZyhcInBhc3RlXCIsYS5kYXRhKX0sMCl9KX19KTtDS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZD17aXNDdXN0b21Db3B5Q3V0U3VwcG9ydGVkOiFDS0VESVRPUi5lbnYuaWUmJiFDS0VESVRPUi5lbnYuaU9TLGlzQ3VzdG9tRGF0YVR5cGVzU3VwcG9ydGVkOiFDS0VESVRPUi5lbnYuaWUsaXNGaWxlQXBpU3VwcG9ydGVkOiFDS0VESVRPUi5lbnYuaWV8fDk8Q0tFRElUT1IuZW52LnZlcnNpb24sbWFpblBhc3RlRXZlbnQ6Q0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LmVkZ2U/XCJiZWZvcmVwYXN0ZVwiOlwicGFzdGVcIixjYW5DbGlwYm9hcmRBcGlCZVRydXN0ZWQ6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYi5nZXRUcmFuc2ZlclR5cGUoYSkhPUNLRURJVE9SLkRBVEFfVFJBTlNGRVJfRVhURVJOQUx8fFxuQ0tFRElUT1IuZW52LmNocm9tZSYmIWIuaXNFbXB0eSgpfHxDS0VESVRPUi5lbnYuZ2Vja28mJihiLmdldERhdGEoXCJ0ZXh0L2h0bWxcIil8fGIuZ2V0RmlsZXNDb3VudCgpKT8hMDohMX0sZ2V0RHJvcFRhcmdldDpmdW5jdGlvbihiKXt2YXIgYT1iLmVkaXRhYmxlKCk7cmV0dXJuIENLRURJVE9SLmVudi5pZSYmOT5DS0VESVRPUi5lbnYudmVyc2lvbnx8YS5pc0lubGluZSgpP2E6Yi5kb2N1bWVudH0sZml4U3BsaXROb2Rlc0FmdGVyRHJvcDpmdW5jdGlvbihiLGEsYyxkKXtmdW5jdGlvbiBlKGIsYyxkKXt2YXIgZT1iO2UudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYoZT1iLmdldFBhcmVudCgpKTtpZihlLmVxdWFscyhjKSYmZCE9Yy5nZXRDaGlsZENvdW50KCkpcmV0dXJuIGI9YS5zdGFydENvbnRhaW5lci5nZXRDaGlsZChhLnN0YXJ0T2Zmc2V0LTEpLGM9YS5zdGFydENvbnRhaW5lci5nZXRDaGlsZChhLnN0YXJ0T2Zmc2V0KSxiJiZiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmXG5jJiZjLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVCYmKGQ9Yi5nZXRMZW5ndGgoKSxiLnNldFRleHQoYi5nZXRUZXh0KCkrYy5nZXRUZXh0KCkpLGMucmVtb3ZlKCksYS5zZXRTdGFydChiLGQpLGEuY29sbGFwc2UoITApKSwhMH12YXIgZz1hLnN0YXJ0Q29udGFpbmVyO1wibnVtYmVyXCI9PXR5cGVvZiBkJiZcIm51bWJlclwiPT10eXBlb2YgYyYmZy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJihlKGIuc3RhcnRDb250YWluZXIsZyxjKXx8ZShiLmVuZENvbnRhaW5lcixnLGQpKX0saXNEcm9wUmFuZ2VBZmZlY3RlZEJ5RHJhZ1JhbmdlOmZ1bmN0aW9uKGIsYSl7dmFyIGM9YS5zdGFydENvbnRhaW5lcixkPWEuZW5kT2Zmc2V0O3JldHVybiBiLmVuZENvbnRhaW5lci5lcXVhbHMoYykmJmIuZW5kT2Zmc2V0PD1kfHxiLnN0YXJ0Q29udGFpbmVyLmdldFBhcmVudCgpLmVxdWFscyhjKSYmYi5zdGFydENvbnRhaW5lci5nZXRJbmRleCgpPGR8fGIuZW5kQ29udGFpbmVyLmdldFBhcmVudCgpLmVxdWFscyhjKSYmXG5iLmVuZENvbnRhaW5lci5nZXRJbmRleCgpPGQ/ITA6ITF9LGludGVybmFsRHJvcDpmdW5jdGlvbihiLGEsYyxkKXt2YXIgZT1DS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZCxnPWQuZWRpdGFibGUoKSxmLGg7ZC5maXJlKFwic2F2ZVNuYXBzaG90XCIpO2QuZmlyZShcImxvY2tTbmFwc2hvdFwiLHtkb250VXBkYXRlOjF9KTtDS0VESVRPUi5lbnYuaWUmJjEwPkNLRURJVE9SLmVudi52ZXJzaW9uJiZ0aGlzLmZpeFNwbGl0Tm9kZXNBZnRlckRyb3AoYixhLGUuZHJhZ1N0YXJ0Q29udGFpbmVyQ2hpbGRDb3VudCxlLmRyYWdFbmRDb250YWluZXJDaGlsZENvdW50KTsoaD10aGlzLmlzRHJvcFJhbmdlQWZmZWN0ZWRCeURyYWdSYW5nZShiLGEpKXx8KGY9Yi5jcmVhdGVCb29rbWFyayghMSkpO2U9YS5jbG9uZSgpLmNyZWF0ZUJvb2ttYXJrKCExKTtoJiYoZj1iLmNyZWF0ZUJvb2ttYXJrKCExKSk7Yj1mLnN0YXJ0Tm9kZTthPWYuZW5kTm9kZTtoPWUuc3RhcnROb2RlO2EmJmIuZ2V0UG9zaXRpb24oaCkmXG5DS0VESVRPUi5QT1NJVElPTl9QUkVDRURJTkcmJmEuZ2V0UG9zaXRpb24oaCkmQ0tFRElUT1IuUE9TSVRJT05fRk9MTE9XSU5HJiZoLmluc2VydEJlZm9yZShiKTtiPWQuY3JlYXRlUmFuZ2UoKTtiLm1vdmVUb0Jvb2ttYXJrKGYpO2cuZXh0cmFjdEh0bWxGcm9tUmFuZ2UoYiwxKTthPWQuY3JlYXRlUmFuZ2UoKTthLm1vdmVUb0Jvb2ttYXJrKGUpO3IoZCx7ZGF0YVRyYW5zZmVyOmMsbWV0aG9kOlwiZHJvcFwiLHJhbmdlOmF9LDEpO2QuZmlyZShcInVubG9ja1NuYXBzaG90XCIpfSxnZXRSYW5nZUF0RHJvcFBvc2l0aW9uOmZ1bmN0aW9uKGIsYSl7dmFyIGM9Yi5kYXRhLiQsZD1jLmNsaWVudFgsZT1jLmNsaWVudFksZz1hLmdldFNlbGVjdGlvbighMCkuZ2V0UmFuZ2VzKClbMF0sZj1hLmNyZWF0ZVJhbmdlKCk7aWYoYi5kYXRhLnRlc3RSYW5nZSlyZXR1cm4gYi5kYXRhLnRlc3RSYW5nZTtpZihkb2N1bWVudC5jYXJldFJhbmdlRnJvbVBvaW50KWM9YS5kb2N1bWVudC4kLmNhcmV0UmFuZ2VGcm9tUG9pbnQoZCxcbmUpLGYuc2V0U3RhcnQoQ0tFRElUT1IuZG9tLm5vZGUoYy5zdGFydENvbnRhaW5lciksYy5zdGFydE9mZnNldCksZi5jb2xsYXBzZSghMCk7ZWxzZSBpZihjLnJhbmdlUGFyZW50KWYuc2V0U3RhcnQoQ0tFRElUT1IuZG9tLm5vZGUoYy5yYW5nZVBhcmVudCksYy5yYW5nZU9mZnNldCksZi5jb2xsYXBzZSghMCk7ZWxzZXtpZihDS0VESVRPUi5lbnYuaWUmJjg8Q0tFRElUT1IuZW52LnZlcnNpb24mJmcmJmEuZWRpdGFibGUoKS5oYXNGb2N1cylyZXR1cm4gZztpZihkb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSl7YS5mb2N1cygpO2M9YS5kb2N1bWVudC5nZXRCb2R5KCkuJC5jcmVhdGVUZXh0UmFuZ2UoKTt0cnl7Zm9yKHZhciBoPSExLGw9MDsyMD5sJiYhaDtsKyspe2lmKCFoKXRyeXtjLm1vdmVUb1BvaW50KGQsZS1sKSxoPSEwfWNhdGNoKHApe31pZighaCl0cnl7Yy5tb3ZlVG9Qb2ludChkLGUrbCksaD0hMH1jYXRjaChxKXt9fWlmKGgpe3ZhciBrPVwiY2tlLXRlbXAtXCIrKG5ldyBEYXRlKS5nZXRUaW1lKCk7XG5jLnBhc3RlSFRNTCgnXFx4M2NzcGFuIGlkXFx4M2RcIicraysnXCJcXHgzZeKAi1xceDNjL3NwYW5cXHgzZScpO3ZhciB0PWEuZG9jdW1lbnQuZ2V0QnlJZChrKTtmLm1vdmVUb1Bvc2l0aW9uKHQsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTt0LnJlbW92ZSgpfWVsc2V7dmFyIHU9YS5kb2N1bWVudC4kLmVsZW1lbnRGcm9tUG9pbnQoZCxlKSxuPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudCh1KSxyO2lmKG4uZXF1YWxzKGEuZWRpdGFibGUoKSl8fFwiaHRtbFwiPT1uLmdldE5hbWUoKSlyZXR1cm4gZyYmZy5zdGFydENvbnRhaW5lciYmIWcuc3RhcnRDb250YWluZXIuZXF1YWxzKGEuZWRpdGFibGUoKSk/ZzpudWxsO3I9bi5nZXRDbGllbnRSZWN0KCk7ZDxyLmxlZnQ/Zi5zZXRTdGFydEF0KG4sQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpOmYuc2V0U3RhcnRBdChuLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpO2YuY29sbGFwc2UoITApfX1jYXRjaCh2KXtyZXR1cm4gbnVsbH19ZWxzZSByZXR1cm4gbnVsbH1yZXR1cm4gZn0sXG5pbml0RHJhZ0RhdGFUcmFuc2ZlcjpmdW5jdGlvbihiLGEpe3ZhciBjPWIuZGF0YS4kP2IuZGF0YS4kLmRhdGFUcmFuc2ZlcjpudWxsLGQ9bmV3IHRoaXMuZGF0YVRyYW5zZmVyKGMsYSk7Yz90aGlzLmRyYWdEYXRhJiZkLmlkPT10aGlzLmRyYWdEYXRhLmlkP2Q9dGhpcy5kcmFnRGF0YTp0aGlzLmRyYWdEYXRhPWQ6dGhpcy5kcmFnRGF0YT9kPXRoaXMuZHJhZ0RhdGE6dGhpcy5kcmFnRGF0YT1kO2IuZGF0YS5kYXRhVHJhbnNmZXI9ZH0scmVzZXREcmFnRGF0YVRyYW5zZmVyOmZ1bmN0aW9uKCl7dGhpcy5kcmFnRGF0YT1udWxsfSxpbml0UGFzdGVEYXRhVHJhbnNmZXI6ZnVuY3Rpb24oYixhKXtpZih0aGlzLmlzQ3VzdG9tQ29weUN1dFN1cHBvcnRlZCl7aWYoYiYmYi5kYXRhJiZiLmRhdGEuJCl7dmFyIGM9bmV3IHRoaXMuZGF0YVRyYW5zZmVyKGIuZGF0YS4kLmNsaXBib2FyZERhdGEsYSk7dGhpcy5jb3B5Q3V0RGF0YSYmYy5pZD09dGhpcy5jb3B5Q3V0RGF0YS5pZD8oYz10aGlzLmNvcHlDdXREYXRhLFxuYy4kPWIuZGF0YS4kLmNsaXBib2FyZERhdGEpOnRoaXMuY29weUN1dERhdGE9YztyZXR1cm4gY31yZXR1cm4gbmV3IHRoaXMuZGF0YVRyYW5zZmVyKG51bGwsYSl9cmV0dXJuIG5ldyB0aGlzLmRhdGFUcmFuc2ZlcihDS0VESVRPUi5lbnYuZWRnZSYmYiYmYi5kYXRhLiQmJmIuZGF0YS4kLmNsaXBib2FyZERhdGF8fG51bGwsYSl9LHByZXZlbnREZWZhdWx0RHJvcE9uRWxlbWVudDpmdW5jdGlvbihiKXtiJiZiLm9uKFwiZHJhZ292ZXJcIixFKX19O3ZhciBwPUNLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkLmlzQ3VzdG9tRGF0YVR5cGVzU3VwcG9ydGVkP1wiY2tlL2lkXCI6XCJUZXh0XCI7Q0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQuZGF0YVRyYW5zZmVyPWZ1bmN0aW9uKGIsYSl7YiYmKHRoaXMuJD1iKTt0aGlzLl89e21ldGFSZWdFeHA6L148bWV0YS4qPz4vaSxib2R5UmVnRXhwOi88Ym9keSg/OltcXHNcXFNdKj8pPihbXFxzXFxTXSopPFxcL2JvZHk+L2ksZnJhZ21lbnRSZWdFeHA6L1xceDNjIS0tKD86U3RhcnR8RW5kKUZyYWdtZW50LS1cXHgzZS9nLFxuZGF0YTp7fSxmaWxlczpbXSxub3JtYWxpemVUeXBlOmZ1bmN0aW9uKGEpe2E9YS50b0xvd2VyQ2FzZSgpO3JldHVyblwidGV4dFwiPT1hfHxcInRleHQvcGxhaW5cIj09YT9cIlRleHRcIjpcInVybFwiPT1hP1wiVVJMXCI6YX19O3RoaXMuaWQ9dGhpcy5nZXREYXRhKHApO3RoaXMuaWR8fCh0aGlzLmlkPVwiVGV4dFwiPT1wP1wiXCI6XCJja2UtXCIrQ0tFRElUT1IudG9vbHMuZ2V0VW5pcXVlSWQoKSk7aWYoXCJUZXh0XCIhPXApdHJ5e3RoaXMuJC5zZXREYXRhKHAsdGhpcy5pZCl9Y2F0Y2goYyl7fWEmJih0aGlzLnNvdXJjZUVkaXRvcj1hLHRoaXMuc2V0RGF0YShcInRleHQvaHRtbFwiLGEuZ2V0U2VsZWN0ZWRIdG1sKDEpKSxcIlRleHRcIj09cHx8dGhpcy5nZXREYXRhKFwidGV4dC9wbGFpblwiKXx8dGhpcy5zZXREYXRhKFwidGV4dC9wbGFpblwiLGEuZ2V0U2VsZWN0aW9uKCkuZ2V0U2VsZWN0ZWRUZXh0KCkpKX07Q0tFRElUT1IuREFUQV9UUkFOU0ZFUl9JTlRFUk5BTD0xO0NLRURJVE9SLkRBVEFfVFJBTlNGRVJfQ1JPU1NfRURJVE9SUz1cbjI7Q0tFRElUT1IuREFUQV9UUkFOU0ZFUl9FWFRFUk5BTD0zO0NLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkLmRhdGFUcmFuc2Zlci5wcm90b3R5cGU9e2dldERhdGE6ZnVuY3Rpb24oYil7Yj10aGlzLl8ubm9ybWFsaXplVHlwZShiKTt2YXIgYT10aGlzLl8uZGF0YVtiXTtpZih2b2lkIDA9PT1hfHxudWxsPT09YXx8XCJcIj09PWEpdHJ5e2E9dGhpcy4kLmdldERhdGEoYil9Y2F0Y2goYyl7fWlmKHZvaWQgMD09PWF8fG51bGw9PT1hfHxcIlwiPT09YSlhPVwiXCI7XCJ0ZXh0L2h0bWxcIj09Yj8oYT1hLnJlcGxhY2UodGhpcy5fLm1ldGFSZWdFeHAsXCJcIiksKGI9dGhpcy5fLmJvZHlSZWdFeHAuZXhlYyhhKSkmJmIubGVuZ3RoJiYoYT1iWzFdLGE9YS5yZXBsYWNlKHRoaXMuXy5mcmFnbWVudFJlZ0V4cCxcIlwiKSkpOlwiVGV4dFwiPT1iJiZDS0VESVRPUi5lbnYuZ2Vja28mJnRoaXMuZ2V0RmlsZXNDb3VudCgpJiZcImZpbGU6Ly9cIj09YS5zdWJzdHJpbmcoMCw3KSYmKGE9XCJcIik7cmV0dXJuIGF9LHNldERhdGE6ZnVuY3Rpb24oYixcbmEpe2I9dGhpcy5fLm5vcm1hbGl6ZVR5cGUoYik7dGhpcy5fLmRhdGFbYl09YTtpZihDS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5pc0N1c3RvbURhdGFUeXBlc1N1cHBvcnRlZHx8XCJVUkxcIj09Ynx8XCJUZXh0XCI9PWIpe1wiVGV4dFwiPT1wJiZcIlRleHRcIj09YiYmKHRoaXMuaWQ9YSk7dHJ5e3RoaXMuJC5zZXREYXRhKGIsYSl9Y2F0Y2goYyl7fX19LGdldFRyYW5zZmVyVHlwZTpmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5zb3VyY2VFZGl0b3I/dGhpcy5zb3VyY2VFZGl0b3I9PWI/Q0tFRElUT1IuREFUQV9UUkFOU0ZFUl9JTlRFUk5BTDpDS0VESVRPUi5EQVRBX1RSQU5TRkVSX0NST1NTX0VESVRPUlM6Q0tFRElUT1IuREFUQV9UUkFOU0ZFUl9FWFRFUk5BTH0sY2FjaGVEYXRhOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYihiKXtiPWEuXy5ub3JtYWxpemVUeXBlKGIpO3ZhciBjPWEuZ2V0RGF0YShiKTtjJiYoYS5fLmRhdGFbYl09Yyl9aWYodGhpcy4kKXt2YXIgYT10aGlzLGMsZDtpZihDS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5pc0N1c3RvbURhdGFUeXBlc1N1cHBvcnRlZCl7aWYodGhpcy4kLnR5cGVzKWZvcihjPVxuMDtjPHRoaXMuJC50eXBlcy5sZW5ndGg7YysrKWIodGhpcy4kLnR5cGVzW2NdKX1lbHNlIGIoXCJUZXh0XCIpLGIoXCJVUkxcIik7ZD10aGlzLl9nZXRJbWFnZUZyb21DbGlwYm9hcmQoKTtpZih0aGlzLiQmJnRoaXMuJC5maWxlc3x8ZCl7dGhpcy5fLmZpbGVzPVtdO2lmKHRoaXMuJC5maWxlcyYmdGhpcy4kLmZpbGVzLmxlbmd0aClmb3IoYz0wO2M8dGhpcy4kLmZpbGVzLmxlbmd0aDtjKyspdGhpcy5fLmZpbGVzLnB1c2godGhpcy4kLmZpbGVzW2NdKTswPT09dGhpcy5fLmZpbGVzLmxlbmd0aCYmZCYmdGhpcy5fLmZpbGVzLnB1c2goZCl9fX0sZ2V0RmlsZXNDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZmlsZXMubGVuZ3RoP3RoaXMuXy5maWxlcy5sZW5ndGg6dGhpcy4kJiZ0aGlzLiQuZmlsZXMmJnRoaXMuJC5maWxlcy5sZW5ndGg/dGhpcy4kLmZpbGVzLmxlbmd0aDp0aGlzLl9nZXRJbWFnZUZyb21DbGlwYm9hcmQoKT8xOjB9LGdldEZpbGU6ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuXy5maWxlcy5sZW5ndGg/XG50aGlzLl8uZmlsZXNbYl06dGhpcy4kJiZ0aGlzLiQuZmlsZXMmJnRoaXMuJC5maWxlcy5sZW5ndGg/dGhpcy4kLmZpbGVzW2JdOjA9PT1iP3RoaXMuX2dldEltYWdlRnJvbUNsaXBib2FyZCgpOnZvaWQgMH0saXNFbXB0eTpmdW5jdGlvbigpe3ZhciBiPXt9LGE7aWYodGhpcy5nZXRGaWxlc0NvdW50KCkpcmV0dXJuITE7Zm9yKGEgaW4gdGhpcy5fLmRhdGEpYlthXT0xO2lmKHRoaXMuJClpZihDS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5pc0N1c3RvbURhdGFUeXBlc1N1cHBvcnRlZCl7aWYodGhpcy4kLnR5cGVzKWZvcih2YXIgYz0wO2M8dGhpcy4kLnR5cGVzLmxlbmd0aDtjKyspYlt0aGlzLiQudHlwZXNbY11dPTF9ZWxzZSBiLlRleHQ9MSxiLlVSTD0xO1wiVGV4dFwiIT1wJiYoYltwXT0wKTtmb3IoYSBpbiBiKWlmKGJbYV0mJlwiXCIhPT10aGlzLmdldERhdGEoYSkpcmV0dXJuITE7cmV0dXJuITB9LF9nZXRJbWFnZUZyb21DbGlwYm9hcmQ6ZnVuY3Rpb24oKXt2YXIgYjtpZih0aGlzLiQmJlxudGhpcy4kLml0ZW1zJiZ0aGlzLiQuaXRlbXNbMF0pdHJ5e2lmKChiPXRoaXMuJC5pdGVtc1swXS5nZXRBc0ZpbGUoKSkmJmIudHlwZSlyZXR1cm4gYn1jYXRjaChhKXt9fX19KSgpOyhmdW5jdGlvbigpe3ZhciBjPSdcXHgzY2EgaWRcXHgzZFwie2lkfVwiIGNsYXNzXFx4M2RcImNrZV9idXR0b24gY2tlX2J1dHRvbl9fe25hbWV9IGNrZV9idXR0b25fe3N0YXRlfSB7Y2xzfVwiJysoQ0tFRElUT1IuZW52LmdlY2tvJiYhQ0tFRElUT1IuZW52LmhjP1wiXCI6XCIgaHJlZlxceDNkXFxcImphdmFzY3JpcHQ6dm9pZCgne3RpdGxlSnN9JylcXFwiXCIpKycgdGl0bGVcXHgzZFwie3RpdGxlfVwiIHRhYmluZGV4XFx4M2RcIi0xXCIgaGlkZWZvY3VzXFx4M2RcInRydWVcIiByb2xlXFx4M2RcImJ1dHRvblwiIGFyaWEtbGFiZWxsZWRieVxceDNkXCJ7aWR9X2xhYmVsXCIgYXJpYS1oYXNwb3B1cFxceDNkXCJ7aGFzQXJyb3d9XCIgYXJpYS1kaXNhYmxlZFxceDNkXCJ7YXJpYURpc2FibGVkfVwiJztDS0VESVRPUi5lbnYuZ2Vja28mJkNLRURJVE9SLmVudi5tYWMmJihjKz0nIG9ua2V5cHJlc3NcXHgzZFwicmV0dXJuIGZhbHNlO1wiJyk7Q0tFRElUT1IuZW52LmdlY2tvJiYoYys9JyBvbmJsdXJcXHgzZFwidGhpcy5zdHlsZS5jc3NUZXh0IFxceDNkIHRoaXMuc3R5bGUuY3NzVGV4dDtcIicpO1xudmFyIGM9YysoJyBvbmtleWRvd25cXHgzZFwicmV0dXJuIENLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbih7a2V5ZG93bkZufSxldmVudCk7XCIgb25mb2N1c1xceDNkXCJyZXR1cm4gQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKHtmb2N1c0ZufSxldmVudCk7XCIgJysoQ0tFRElUT1IuZW52LmllPydvbmNsaWNrXFx4M2RcInJldHVybiBmYWxzZTtcIiBvbm1vdXNldXAnOlwib25jbGlja1wiKSsnXFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbih7Y2xpY2tGbn0sdGhpcyk7cmV0dXJuIGZhbHNlO1wiXFx4M2VcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX2J1dHRvbl9pY29uIGNrZV9idXR0b25fX3tpY29uTmFtZX1faWNvblwiIHN0eWxlXFx4M2RcIntzdHlsZX1cIicpLGM9YysnXFx4M2VcXHgyNm5ic3A7XFx4M2Mvc3BhblxceDNlXFx4M2NzcGFuIGlkXFx4M2RcIntpZH1fbGFiZWxcIiBjbGFzc1xceDNkXCJja2VfYnV0dG9uX2xhYmVsIGNrZV9idXR0b25fX3tuYW1lfV9sYWJlbFwiIGFyaWEtaGlkZGVuXFx4M2RcImZhbHNlXCJcXHgzZXtsYWJlbH1cXHgzYy9zcGFuXFx4M2V7YXJyb3dIdG1sfVxceDNjL2FcXHgzZScsXG5yPUNLRURJVE9SLmFkZFRlbXBsYXRlKFwiYnV0dG9uQXJyb3dcIiwnXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9idXR0b25fYXJyb3dcIlxceDNlJysoQ0tFRElUT1IuZW52LmhjP1wiXFx4MjYjOTY2MDtcIjpcIlwiKStcIlxceDNjL3NwYW5cXHgzZVwiKSx0PUNLRURJVE9SLmFkZFRlbXBsYXRlKFwiYnV0dG9uXCIsYyk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJidXR0b25cIix7YmVmb3JlSW5pdDpmdW5jdGlvbihhKXthLnVpLmFkZEhhbmRsZXIoQ0tFRElUT1IuVUlfQlVUVE9OLENLRURJVE9SLnVpLmJ1dHRvbi5oYW5kbGVyKX19KTtDS0VESVRPUi5VSV9CVVRUT049XCJidXR0b25cIjtDS0VESVRPUi51aS5idXR0b249ZnVuY3Rpb24oYSl7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMsYSx7dGl0bGU6YS5sYWJlbCxjbGljazphLmNsaWNrfHxmdW5jdGlvbihiKXtiLmV4ZWNDb21tYW5kKGEuY29tbWFuZCl9fSk7dGhpcy5fPXt9fTtDS0VESVRPUi51aS5idXR0b24uaGFuZGxlcj17Y3JlYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQ0tFRElUT1IudWkuYnV0dG9uKGEpfX07XG5DS0VESVRPUi51aS5idXR0b24ucHJvdG90eXBlPXtyZW5kZXI6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKCl7dmFyIGU9YS5tb2RlO2UmJihlPXRoaXMubW9kZXNbZV0/dm9pZCAwIT09a1tlXT9rW2VdOkNLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxlPWEucmVhZE9ubHkmJiF0aGlzLnJlYWRPbmx5P0NLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEOmUsdGhpcy5zZXRTdGF0ZShlKSx0aGlzLnJlZnJlc2gmJnRoaXMucmVmcmVzaCgpKX12YXIgbD1DS0VESVRPUi5lbnYsbT10aGlzLl8uaWQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCksZj1cIlwiLGc9dGhpcy5jb21tYW5kLG47dGhpcy5fLmVkaXRvcj1hO3ZhciBkPXtpZDptLGJ1dHRvbjp0aGlzLGVkaXRvcjphLGZvY3VzOmZ1bmN0aW9uKCl7Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChtKS5mb2N1cygpfSxleGVjdXRlOmZ1bmN0aW9uKCl7dGhpcy5idXR0b24uY2xpY2soYSl9LGF0dGFjaDpmdW5jdGlvbihhKXt0aGlzLmJ1dHRvbi5hdHRhY2goYSl9fSxcbnU9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oZnVuY3Rpb24oYSl7aWYoZC5vbmtleSlyZXR1cm4gYT1uZXcgQ0tFRElUT1IuZG9tLmV2ZW50KGEpLCExIT09ZC5vbmtleShkLGEuZ2V0S2V5c3Ryb2tlKCkpfSksdj1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbihhKXt2YXIgYjtkLm9uZm9jdXMmJihiPSExIT09ZC5vbmZvY3VzKGQsbmV3IENLRURJVE9SLmRvbS5ldmVudChhKSkpO3JldHVybiBifSkscD0wO2QuY2xpY2tGbj1uPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKCl7cCYmKGEudW5sb2NrU2VsZWN0aW9uKDEpLHA9MCk7ZC5leGVjdXRlKCk7bC5pT1MmJmEuZm9jdXMoKX0pO2lmKHRoaXMubW9kZXMpe3ZhciBrPXt9O2Eub24oXCJiZWZvcmVNb2RlVW5sb2FkXCIsZnVuY3Rpb24oKXthLm1vZGUmJnRoaXMuXy5zdGF0ZSE9Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQmJihrW2EubW9kZV09dGhpcy5fLnN0YXRlKX0sdGhpcyk7YS5vbihcImFjdGl2ZUZpbHRlckNoYW5nZVwiLFxuYyx0aGlzKTthLm9uKFwibW9kZVwiLGMsdGhpcyk7IXRoaXMucmVhZE9ubHkmJmEub24oXCJyZWFkT25seVwiLGMsdGhpcyl9ZWxzZSBnJiYoZz1hLmdldENvbW1hbmQoZykpJiYoZy5vbihcInN0YXRlXCIsZnVuY3Rpb24oKXt0aGlzLnNldFN0YXRlKGcuc3RhdGUpfSx0aGlzKSxmKz1nLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PTj9cIm9uXCI6Zy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ/XCJkaXNhYmxlZFwiOlwib2ZmXCIpO2lmKHRoaXMuZGlyZWN0aW9uYWwpYS5vbihcImNvbnRlbnREaXJDaGFuZ2VkXCIsZnVuY3Rpb24oYil7dmFyIGM9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZCh0aGlzLl8uaWQpLGQ9Yy5nZXRGaXJzdCgpO2I9Yi5kYXRhO2IhPWEubGFuZy5kaXI/Yy5hZGRDbGFzcyhcImNrZV9cIitiKTpjLnJlbW92ZUNsYXNzKFwiY2tlX2x0clwiKS5yZW1vdmVDbGFzcyhcImNrZV9ydGxcIik7ZC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLENLRURJVE9SLnNraW4uZ2V0SWNvblN0eWxlKGgsXG5cInJ0bFwiPT1iLHRoaXMuaWNvbix0aGlzLmljb25PZmZzZXQpKX0sdGhpcyk7Z3x8KGYrPVwib2ZmXCIpO3ZhciBxPXRoaXMubmFtZXx8dGhpcy5jb21tYW5kLGg9cTt0aGlzLmljb24mJiEvXFwuLy50ZXN0KHRoaXMuaWNvbikmJihoPXRoaXMuaWNvbix0aGlzLmljb249bnVsbCk7Zj17aWQ6bSxuYW1lOnEsaWNvbk5hbWU6aCxsYWJlbDp0aGlzLmxhYmVsLGNsczp0aGlzLmNsYXNzTmFtZXx8XCJcIixzdGF0ZTpmLGFyaWFEaXNhYmxlZDpcImRpc2FibGVkXCI9PWY/XCJ0cnVlXCI6XCJmYWxzZVwiLHRpdGxlOnRoaXMudGl0bGUsdGl0bGVKczpsLmdlY2tvJiYhbC5oYz9cIlwiOih0aGlzLnRpdGxlfHxcIlwiKS5yZXBsYWNlKFwiJ1wiLFwiXCIpLGhhc0Fycm93OnRoaXMuaGFzQXJyb3c/XCJ0cnVlXCI6XCJmYWxzZVwiLGtleWRvd25Gbjp1LGZvY3VzRm46dixjbGlja0ZuOm4sc3R5bGU6Q0tFRElUT1Iuc2tpbi5nZXRJY29uU3R5bGUoaCxcInJ0bFwiPT1hLmxhbmcuZGlyLHRoaXMuaWNvbix0aGlzLmljb25PZmZzZXQpLGFycm93SHRtbDp0aGlzLmhhc0Fycm93P1xuci5vdXRwdXQoKTpcIlwifTt0Lm91dHB1dChmLGIpO2lmKHRoaXMub25SZW5kZXIpdGhpcy5vblJlbmRlcigpO3JldHVybiBkfSxzZXRTdGF0ZTpmdW5jdGlvbihhKXtpZih0aGlzLl8uc3RhdGU9PWEpcmV0dXJuITE7dGhpcy5fLnN0YXRlPWE7dmFyIGI9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZCh0aGlzLl8uaWQpO3JldHVybiBiPyhiLnNldFN0YXRlKGEsXCJja2VfYnV0dG9uXCIpLGE9PUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEP2Iuc2V0QXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiLCEwKTpiLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIiksdGhpcy5oYXNBcnJvdz8oYT1hPT1DS0VESVRPUi5UUklTVEFURV9PTj90aGlzLl8uZWRpdG9yLmxhbmcuYnV0dG9uLnNlbGVjdGVkTGFiZWwucmVwbGFjZSgvJTEvZyx0aGlzLmxhYmVsKTp0aGlzLmxhYmVsLENLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQodGhpcy5fLmlkK1wiX2xhYmVsXCIpLnNldFRleHQoYSkpOmE9PUNLRURJVE9SLlRSSVNUQVRFX09OP1xuYi5zZXRBdHRyaWJ1dGUoXCJhcmlhLXByZXNzZWRcIiwhMCk6Yi5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLXByZXNzZWRcIiksITApOiExfSxnZXRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uc3RhdGV9LHRvRmVhdHVyZTpmdW5jdGlvbihhKXtpZih0aGlzLl8uZmVhdHVyZSlyZXR1cm4gdGhpcy5fLmZlYXR1cmU7dmFyIGI9dGhpczt0aGlzLmFsbG93ZWRDb250ZW50fHx0aGlzLnJlcXVpcmVkQ29udGVudHx8IXRoaXMuY29tbWFuZHx8KGI9YS5nZXRDb21tYW5kKHRoaXMuY29tbWFuZCl8fGIpO3JldHVybiB0aGlzLl8uZmVhdHVyZT1ifX07Q0tFRElUT1IudWkucHJvdG90eXBlLmFkZEJ1dHRvbj1mdW5jdGlvbihhLGIpe3RoaXMuYWRkKGEsQ0tFRElUT1IuVUlfQlVUVE9OLGIpfX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJwYW5lbGJ1dHRvblwiLHtyZXF1aXJlczpcImJ1dHRvblwiLG9uTG9hZDpmdW5jdGlvbigpe2Z1bmN0aW9uIGUoYyl7dmFyIGE9dGhpcy5fO2Euc3RhdGUhPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEJiYodGhpcy5jcmVhdGVQYW5lbChjKSxhLm9uP2EucGFuZWwuaGlkZSgpOmEucGFuZWwuc2hvd0Jsb2NrKHRoaXMuXy5pZCx0aGlzLmRvY3VtZW50LmdldEJ5SWQodGhpcy5fLmlkKSw0KSl9Q0tFRElUT1IudWkucGFuZWxCdXR0b249Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3Moe2Jhc2U6Q0tFRElUT1IudWkuYnV0dG9uLCQ6ZnVuY3Rpb24oYyl7dmFyIGE9Yy5wYW5lbHx8e307ZGVsZXRlIGMucGFuZWw7dGhpcy5iYXNlKGMpO3RoaXMuZG9jdW1lbnQ9YS5wYXJlbnQmJmEucGFyZW50LmdldERvY3VtZW50KCl8fENLRURJVE9SLmRvY3VtZW50O2EuYmxvY2s9e2F0dHJpYnV0ZXM6YS5hdHRyaWJ1dGVzfTt0aGlzLmhhc0Fycm93PWEudG9vbGJhclJlbGF0ZWQ9XG4hMDt0aGlzLmNsaWNrPWU7dGhpcy5fPXtwYW5lbERlZmluaXRpb246YX19LHN0YXRpY3M6e2hhbmRsZXI6e2NyZWF0ZTpmdW5jdGlvbihjKXtyZXR1cm4gbmV3IENLRURJVE9SLnVpLnBhbmVsQnV0dG9uKGMpfX19LHByb3RvOntjcmVhdGVQYW5lbDpmdW5jdGlvbihjKXt2YXIgYT10aGlzLl87aWYoIWEucGFuZWwpe3ZhciBmPXRoaXMuXy5wYW5lbERlZmluaXRpb24sZT10aGlzLl8ucGFuZWxEZWZpbml0aW9uLmJsb2NrLGc9Zi5wYXJlbnR8fENLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKSxkPXRoaXMuXy5wYW5lbD1uZXcgQ0tFRElUT1IudWkuZmxvYXRQYW5lbChjLGcsZiksZj1kLmFkZEJsb2NrKGEuaWQsZSksYj10aGlzO2Qub25TaG93PWZ1bmN0aW9uKCl7Yi5jbGFzc05hbWUmJnRoaXMuZWxlbWVudC5hZGRDbGFzcyhiLmNsYXNzTmFtZStcIl9wYW5lbFwiKTtiLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX09OKTthLm9uPTE7Yi5lZGl0b3JGb2N1cyYmYy5mb2N1cygpO2lmKGIub25PcGVuKWIub25PcGVuKCl9O1xuZC5vbkhpZGU9ZnVuY3Rpb24oZCl7Yi5jbGFzc05hbWUmJnRoaXMuZWxlbWVudC5nZXRGaXJzdCgpLnJlbW92ZUNsYXNzKGIuY2xhc3NOYW1lK1wiX3BhbmVsXCIpO2Iuc2V0U3RhdGUoYi5tb2RlcyYmYi5tb2Rlc1tjLm1vZGVdP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCk7YS5vbj0wO2lmKCFkJiZiLm9uQ2xvc2UpYi5vbkNsb3NlKCl9O2Qub25Fc2NhcGU9ZnVuY3Rpb24oKXtkLmhpZGUoMSk7Yi5kb2N1bWVudC5nZXRCeUlkKGEuaWQpLmZvY3VzKCl9O2lmKHRoaXMub25CbG9jayl0aGlzLm9uQmxvY2soZCxmKTtmLm9uSGlkZT1mdW5jdGlvbigpe2Eub249MDtiLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX09GRil9fX19fSl9LGJlZm9yZUluaXQ6ZnVuY3Rpb24oZSl7ZS51aS5hZGRIYW5kbGVyKENLRURJVE9SLlVJX1BBTkVMQlVUVE9OLENLRURJVE9SLnVpLnBhbmVsQnV0dG9uLmhhbmRsZXIpfX0pO1xuQ0tFRElUT1IuVUlfUEFORUxCVVRUT049XCJwYW5lbGJ1dHRvblwiOyhmdW5jdGlvbigpe0NLRURJVE9SLnBsdWdpbnMuYWRkKFwicGFuZWxcIix7YmVmb3JlSW5pdDpmdW5jdGlvbihhKXthLnVpLmFkZEhhbmRsZXIoQ0tFRElUT1IuVUlfUEFORUwsQ0tFRElUT1IudWkucGFuZWwuaGFuZGxlcil9fSk7Q0tFRElUT1IuVUlfUEFORUw9XCJwYW5lbFwiO0NLRURJVE9SLnVpLnBhbmVsPWZ1bmN0aW9uKGEsYil7YiYmQ0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMsYik7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMse2NsYXNzTmFtZTpcIlwiLGNzczpbXX0pO3RoaXMuaWQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCk7dGhpcy5kb2N1bWVudD1hO3RoaXMuaXNGcmFtZWQ9dGhpcy5mb3JjZUlGcmFtZXx8dGhpcy5jc3MubGVuZ3RoO3RoaXMuXz17YmxvY2tzOnt9fX07Q0tFRElUT1IudWkucGFuZWwuaGFuZGxlcj17Y3JlYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQ0tFRElUT1IudWkucGFuZWwoYSl9fTt2YXIgZj1DS0VESVRPUi5hZGRUZW1wbGF0ZShcInBhbmVsXCIsXG4nXFx4M2NkaXYgbGFuZ1xceDNkXCJ7bGFuZ0NvZGV9XCIgaWRcXHgzZFwie2lkfVwiIGRpclxceDNke2Rpcn0gY2xhc3NcXHgzZFwiY2tlIGNrZV9yZXNldF9hbGwge2VkaXRvcklkfSBja2VfcGFuZWwgY2tlX3BhbmVsIHtjbHN9IGNrZV97ZGlyfVwiIHN0eWxlXFx4M2RcInotaW5kZXg6e3otaW5kZXh9XCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNle2ZyYW1lfVxceDNjL2RpdlxceDNlJyksZz1DS0VESVRPUi5hZGRUZW1wbGF0ZShcInBhbmVsLWZyYW1lXCIsJ1xceDNjaWZyYW1lIGlkXFx4M2RcIntpZH1cIiBjbGFzc1xceDNkXCJja2VfcGFuZWxfZnJhbWVcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiIGZyYW1lYm9yZGVyXFx4M2RcIjBcIiBzcmNcXHgzZFwie3NyY31cIlxceDNlXFx4M2MvaWZyYW1lXFx4M2UnKSxoPUNLRURJVE9SLmFkZFRlbXBsYXRlKFwicGFuZWwtZnJhbWUtaW5uZXJcIiwnXFx4M2MhRE9DVFlQRSBodG1sXFx4M2VcXHgzY2h0bWwgY2xhc3NcXHgzZFwiY2tlX3BhbmVsX2NvbnRhaW5lciB7ZW52fVwiIGRpclxceDNkXCJ7ZGlyfVwiIGxhbmdcXHgzZFwie2xhbmdDb2RlfVwiXFx4M2VcXHgzY2hlYWRcXHgzZXtjc3N9XFx4M2MvaGVhZFxceDNlXFx4M2Nib2R5IGNsYXNzXFx4M2RcImNrZV97ZGlyfVwiIHN0eWxlXFx4M2RcIm1hcmdpbjowO3BhZGRpbmc6MFwiIG9ubG9hZFxceDNkXCJ7b25sb2FkfVwiXFx4M2VcXHgzYy9ib2R5XFx4M2VcXHgzYy9odG1sXFx4M2UnKTtcbkNLRURJVE9SLnVpLnBhbmVsLnByb3RvdHlwZT17cmVuZGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5nZXRIb2xkZXJFbGVtZW50PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fLmhvbGRlcjtpZighYSl7aWYodGhpcy5pc0ZyYW1lZCl7dmFyIGE9dGhpcy5kb2N1bWVudC5nZXRCeUlkKHRoaXMuaWQrXCJfZnJhbWVcIiksYj1hLmdldFBhcmVudCgpLGE9YS5nZXRGcmFtZURvY3VtZW50KCk7Q0tFRElUT1IuZW52LmlPUyYmYi5zZXRTdHlsZXMoe292ZXJmbG93Olwic2Nyb2xsXCIsXCItd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZ1wiOlwidG91Y2hcIn0pO2I9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24oQ0tFRElUT1IudG9vbHMuYmluZChmdW5jdGlvbigpe3RoaXMuaXNMb2FkZWQ9ITA7aWYodGhpcy5vbkxvYWQpdGhpcy5vbkxvYWQoKX0sdGhpcykpO2Eud3JpdGUoaC5vdXRwdXQoQ0tFRElUT1IudG9vbHMuZXh0ZW5kKHtjc3M6Q0tFRElUT1IudG9vbHMuYnVpbGRTdHlsZUh0bWwodGhpcy5jc3MpLG9ubG9hZDpcIndpbmRvdy5wYXJlbnQuQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKFwiK1xuYitcIik7XCJ9LGQpKSk7YS5nZXRXaW5kb3coKS4kLkNLRURJVE9SPUNLRURJVE9SO2Eub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7dmFyIGI9YS5kYXRhLmdldEtleXN0cm9rZSgpLGM9dGhpcy5kb2N1bWVudC5nZXRCeUlkKHRoaXMuaWQpLmdldEF0dHJpYnV0ZShcImRpclwiKTt0aGlzLl8ub25LZXlEb3duJiYhMT09PXRoaXMuXy5vbktleURvd24oYik/YS5kYXRhLnByZXZlbnREZWZhdWx0KCk6KDI3PT1ifHxiPT0oXCJydGxcIj09Yz8zOTozNykpJiZ0aGlzLm9uRXNjYXBlJiYhMT09PXRoaXMub25Fc2NhcGUoYikmJmEuZGF0YS5wcmV2ZW50RGVmYXVsdCgpfSx0aGlzKTthPWEuZ2V0Qm9keSgpO2EudW5zZWxlY3RhYmxlKCk7Q0tFRElUT1IuZW52LmFpciYmQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKGIpfWVsc2UgYT10aGlzLmRvY3VtZW50LmdldEJ5SWQodGhpcy5pZCk7dGhpcy5fLmhvbGRlcj1hfXJldHVybiBhfTt2YXIgZD17ZWRpdG9ySWQ6YS5pZCxpZDp0aGlzLmlkLGxhbmdDb2RlOmEubGFuZ0NvZGUsXG5kaXI6YS5sYW5nLmRpcixjbHM6dGhpcy5jbGFzc05hbWUsZnJhbWU6XCJcIixlbnY6Q0tFRElUT1IuZW52LmNzc0NsYXNzLFwiei1pbmRleFwiOmEuY29uZmlnLmJhc2VGbG9hdFpJbmRleCsxfTtpZih0aGlzLmlzRnJhbWVkKXt2YXIgZT1DS0VESVRPUi5lbnYuYWlyP1wiamF2YXNjcmlwdDp2b2lkKDApXCI6Q0tFRElUT1IuZW52LmllP1wiamF2YXNjcmlwdDp2b2lkKGZ1bmN0aW9uKCl7XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiZG9jdW1lbnQub3BlbigpOyhcIitDS0VESVRPUi50b29scy5maXhEb21haW4rXCIpKCk7ZG9jdW1lbnQuY2xvc2UoKTtcIikrXCJ9KCkpXCI6XCJcIjtkLmZyYW1lPWcub3V0cHV0KHtpZDp0aGlzLmlkK1wiX2ZyYW1lXCIsc3JjOmV9KX1lPWYub3V0cHV0KGQpO2ImJmIucHVzaChlKTtyZXR1cm4gZX0sYWRkQmxvY2s6ZnVuY3Rpb24oYSxiKXtiPXRoaXMuXy5ibG9ja3NbYV09YiBpbnN0YW5jZW9mIENLRURJVE9SLnVpLnBhbmVsLmJsb2NrP2I6bmV3IENLRURJVE9SLnVpLnBhbmVsLmJsb2NrKHRoaXMuZ2V0SG9sZGVyRWxlbWVudCgpLFxuYik7dGhpcy5fLmN1cnJlbnRCbG9ja3x8dGhpcy5zaG93QmxvY2soYSk7cmV0dXJuIGJ9LGdldEJsb2NrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl8uYmxvY2tzW2FdfSxzaG93QmxvY2s6ZnVuY3Rpb24oYSl7YT10aGlzLl8uYmxvY2tzW2FdO3ZhciBiPXRoaXMuXy5jdXJyZW50QmxvY2ssZD0hdGhpcy5mb3JjZUlGcmFtZXx8Q0tFRElUT1IuZW52LmllP3RoaXMuXy5ob2xkZXI6dGhpcy5kb2N1bWVudC5nZXRCeUlkKHRoaXMuaWQrXCJfZnJhbWVcIik7YiYmYi5oaWRlKCk7dGhpcy5fLmN1cnJlbnRCbG9jaz1hO0NLRURJVE9SLmZpcmUoXCJhcmlhV2lkZ2V0XCIsZCk7YS5fLmZvY3VzSW5kZXg9LTE7dGhpcy5fLm9uS2V5RG93bj1hLm9uS2V5RG93biYmQ0tFRElUT1IudG9vbHMuYmluZChhLm9uS2V5RG93bixhKTthLnNob3coKTtyZXR1cm4gYX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudCYmdGhpcy5lbGVtZW50LnJlbW92ZSgpfX07Q0tFRElUT1IudWkucGFuZWwuYmxvY2s9XG5DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7JDpmdW5jdGlvbihhLGIpe3RoaXMuZWxlbWVudD1hLmFwcGVuZChhLmdldERvY3VtZW50KCkuY3JlYXRlRWxlbWVudChcImRpdlwiLHthdHRyaWJ1dGVzOnt0YWJpbmRleDotMSxcImNsYXNzXCI6XCJja2VfcGFuZWxfYmxvY2tcIn0sc3R5bGVzOntkaXNwbGF5Olwibm9uZVwifX0pKTtiJiZDS0VESVRPUi50b29scy5leHRlbmQodGhpcyxiKTt0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlcyh7cm9sZTp0aGlzLmF0dHJpYnV0ZXMucm9sZXx8XCJwcmVzZW50YXRpb25cIixcImFyaWEtbGFiZWxcIjp0aGlzLmF0dHJpYnV0ZXNbXCJhcmlhLWxhYmVsXCJdLHRpdGxlOnRoaXMuYXR0cmlidXRlcy50aXRsZXx8dGhpcy5hdHRyaWJ1dGVzW1wiYXJpYS1sYWJlbFwiXX0pO3RoaXMua2V5cz17fTt0aGlzLl8uZm9jdXNJbmRleD0tMTt0aGlzLmVsZW1lbnQuZGlzYWJsZUNvbnRleHRNZW51KCl9LF86e21hcmtJdGVtOmZ1bmN0aW9uKGEpey0xIT1hJiYoYT10aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZyhcImFcIikuZ2V0SXRlbSh0aGlzLl8uZm9jdXNJbmRleD1cbmEpLENLRURJVE9SLmVudi53ZWJraXQmJmEuZ2V0RG9jdW1lbnQoKS5nZXRXaW5kb3coKS5mb2N1cygpLGEuZm9jdXMoKSx0aGlzLm9uTWFyayYmdGhpcy5vbk1hcmsoYSkpfX0scHJvdG86e3Nob3c6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJcIil9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLm9uSGlkZSYmITA9PT10aGlzLm9uSGlkZS5jYWxsKHRoaXMpfHx0aGlzLmVsZW1lbnQuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJub25lXCIpfSxvbktleURvd246ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLmtleXNbYV07c3dpdGNoKGQpe2Nhc2UgXCJuZXh0XCI6Zm9yKHZhciBlPXRoaXMuXy5mb2N1c0luZGV4LGQ9dGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlUYWcoXCJhXCIpLGM7Yz1kLmdldEl0ZW0oKytlKTspaWYoYy5nZXRBdHRyaWJ1dGUoXCJfY2tlX2ZvY3VzXCIpJiZjLiQub2Zmc2V0V2lkdGgpe3RoaXMuXy5mb2N1c0luZGV4PWU7Yy5mb2N1cygpO2JyZWFrfXJldHVybiBjfHxcbmI/ITE6KHRoaXMuXy5mb2N1c0luZGV4PS0xLHRoaXMub25LZXlEb3duKGEsMSkpO2Nhc2UgXCJwcmV2XCI6ZT10aGlzLl8uZm9jdXNJbmRleDtmb3IoZD10aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZyhcImFcIik7MDxlJiYoYz1kLmdldEl0ZW0oLS1lKSk7KXtpZihjLmdldEF0dHJpYnV0ZShcIl9ja2VfZm9jdXNcIikmJmMuJC5vZmZzZXRXaWR0aCl7dGhpcy5fLmZvY3VzSW5kZXg9ZTtjLmZvY3VzKCk7YnJlYWt9Yz1udWxsfXJldHVybiBjfHxiPyExOih0aGlzLl8uZm9jdXNJbmRleD1kLmNvdW50KCksdGhpcy5vbktleURvd24oYSwxKSk7Y2FzZSBcImNsaWNrXCI6Y2FzZSBcIm1vdXNldXBcIjpyZXR1cm4gZT10aGlzLl8uZm9jdXNJbmRleCwoYz0wPD1lJiZ0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZyhcImFcIikuZ2V0SXRlbShlKSkmJihjLiRbZF0/Yy4kW2RdKCk6Yy4kW1wib25cIitkXSgpKSwhMX1yZXR1cm4hMH19fSl9KSgpO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiZmxvYXRwYW5lbFwiLHtyZXF1aXJlczpcInBhbmVsXCJ9KTtcbihmdW5jdGlvbigpe2Z1bmN0aW9uIHYoYSxiLGMsbCxoKXtoPUNLRURJVE9SLnRvb2xzLmdlbktleShiLmdldFVuaXF1ZUlkKCksYy5nZXRVbmlxdWVJZCgpLGEubGFuZy5kaXIsYS51aUNvbG9yfHxcIlwiLGwuY3NzfHxcIlwiLGh8fFwiXCIpO3ZhciBnPWZbaF07Z3x8KGc9ZltoXT1uZXcgQ0tFRElUT1IudWkucGFuZWwoYixsKSxnLmVsZW1lbnQ9Yy5hcHBlbmQoQ0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoZy5yZW5kZXIoYSksYikpLGcuZWxlbWVudC5zZXRTdHlsZXMoe2Rpc3BsYXk6XCJub25lXCIscG9zaXRpb246XCJhYnNvbHV0ZVwifSkpO3JldHVybiBnfXZhciBmPXt9O0NLRURJVE9SLnVpLmZsb2F0UGFuZWw9Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3MoeyQ6ZnVuY3Rpb24oYSxiLGMsbCl7ZnVuY3Rpb24gaCgpe2UuaGlkZSgpfWMuZm9yY2VJRnJhbWU9MTtjLnRvb2xiYXJSZWxhdGVkJiZhLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FJiZcbihiPUNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQoXCJja2VfXCIrYS5uYW1lKSk7dmFyIGc9Yi5nZXREb2N1bWVudCgpO2w9dihhLGcsYixjLGx8fDApO3ZhciBtPWwuZWxlbWVudCxwPW0uZ2V0Rmlyc3QoKSxlPXRoaXM7bS5kaXNhYmxlQ29udGV4dE1lbnUoKTt0aGlzLmVsZW1lbnQ9bTt0aGlzLl89e2VkaXRvcjphLHBhbmVsOmwscGFyZW50RWxlbWVudDpiLGRlZmluaXRpb246Yyxkb2N1bWVudDpnLGlmcmFtZTpwLGNoaWxkcmVuOltdLGRpcjphLmxhbmcuZGlyLHNob3dCbG9ja1BhcmFtczpudWxsfTthLm9uKFwibW9kZVwiLGgpO2Eub24oXCJyZXNpemVcIixoKTtnLmdldFdpbmRvdygpLm9uKFwicmVzaXplXCIsZnVuY3Rpb24oKXt0aGlzLnJlcG9zaXRpb24oKX0sdGhpcyl9LHByb3RvOnthZGRCbG9jazpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLl8ucGFuZWwuYWRkQmxvY2soYSxiKX0sYWRkTGlzdEJsb2NrOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuXy5wYW5lbC5hZGRMaXN0QmxvY2soYSxcbmIpfSxnZXRCbG9jazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fLnBhbmVsLmdldEJsb2NrKGEpfSxzaG93QmxvY2s6ZnVuY3Rpb24oYSxiLGMsbCxoLGcpe3ZhciBtPXRoaXMuXy5wYW5lbCxwPW0uc2hvd0Jsb2NrKGEpO3RoaXMuXy5zaG93QmxvY2tQYXJhbXM9W10uc2xpY2UuY2FsbChhcmd1bWVudHMpO3RoaXMuYWxsb3dCbHVyKCExKTt2YXIgZT10aGlzLl8uZWRpdG9yLmVkaXRhYmxlKCk7dGhpcy5fLnJldHVybkZvY3VzPWUuaGFzRm9jdXM/ZTpuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoQ0tFRElUT1IuZG9jdW1lbnQuJC5hY3RpdmVFbGVtZW50KTt0aGlzLl8uaGlkZVRpbWVvdXQ9MDt2YXIgaz10aGlzLmVsZW1lbnQsZT10aGlzLl8uaWZyYW1lLGU9Q0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LmVkZ2U/ZTpuZXcgQ0tFRElUT1IuZG9tLndpbmRvdyhlLiQuY29udGVudFdpbmRvdyksZj1rLmdldERvY3VtZW50KCkscj10aGlzLl8ucGFyZW50RWxlbWVudC5nZXRQb3NpdGlvbmVkQW5jZXN0b3IoKSxcbnQ9Yi5nZXREb2N1bWVudFBvc2l0aW9uKGYpLGY9cj9yLmdldERvY3VtZW50UG9zaXRpb24oZik6e3g6MCx5OjB9LHE9XCJydGxcIj09dGhpcy5fLmRpcixkPXQueCsobHx8MCktZi54LG49dC55KyhofHwwKS1mLnk7IXF8fDEhPWMmJjQhPWM/cXx8MiE9YyYmMyE9Y3x8KGQrPWIuJC5vZmZzZXRXaWR0aC0xKTpkKz1iLiQub2Zmc2V0V2lkdGg7aWYoMz09Y3x8ND09YyluKz1iLiQub2Zmc2V0SGVpZ2h0LTE7dGhpcy5fLnBhbmVsLl8ub2Zmc2V0UGFyZW50SWQ9Yi5nZXRJZCgpO2suc2V0U3R5bGVzKHt0b3A6bitcInB4XCIsbGVmdDowLGRpc3BsYXk6XCJcIn0pO2suc2V0T3BhY2l0eSgwKTtrLmdldEZpcnN0KCkucmVtb3ZlU3R5bGUoXCJ3aWR0aFwiKTt0aGlzLl8uZWRpdG9yLmZvY3VzTWFuYWdlci5hZGQoZSk7dGhpcy5fLmJsdXJTZXR8fChDS0VESVRPUi5ldmVudC51c2VDYXB0dXJlPSEwLGUub24oXCJibHVyXCIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gdSgpe2RlbGV0ZSB0aGlzLl8ucmV0dXJuRm9jdXM7XG50aGlzLmhpZGUoKX10aGlzLmFsbG93Qmx1cigpJiZhLmRhdGEuZ2V0UGhhc2UoKT09Q0tFRElUT1IuRVZFTlRfUEhBU0VfQVRfVEFSR0VUJiZ0aGlzLnZpc2libGUmJiF0aGlzLl8uYWN0aXZlQ2hpbGQmJihDS0VESVRPUi5lbnYuaU9TP3RoaXMuXy5oaWRlVGltZW91dHx8KHRoaXMuXy5oaWRlVGltZW91dD1DS0VESVRPUi50b29scy5zZXRUaW1lb3V0KHUsMCx0aGlzKSk6dS5jYWxsKHRoaXMpKX0sdGhpcyksZS5vbihcImZvY3VzXCIsZnVuY3Rpb24oKXt0aGlzLl8uZm9jdXNlZD0hMDt0aGlzLmhpZGVDaGlsZCgpO3RoaXMuYWxsb3dCbHVyKCEwKX0sdGhpcyksQ0tFRElUT1IuZW52LmlPUyYmKGUub24oXCJ0b3VjaHN0YXJ0XCIsZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fLmhpZGVUaW1lb3V0KX0sdGhpcyksZS5vbihcInRvdWNoZW5kXCIsZnVuY3Rpb24oKXt0aGlzLl8uaGlkZVRpbWVvdXQ9MDt0aGlzLmZvY3VzKCl9LHRoaXMpKSxDS0VESVRPUi5ldmVudC51c2VDYXB0dXJlPSExLFxudGhpcy5fLmJsdXJTZXQ9MSk7bS5vbkVzY2FwZT1DS0VESVRPUi50b29scy5iaW5kKGZ1bmN0aW9uKGEpe2lmKHRoaXMub25Fc2NhcGUmJiExPT09dGhpcy5vbkVzY2FwZShhKSlyZXR1cm4hMX0sdGhpcyk7Q0tFRElUT1IudG9vbHMuc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBhPUNLRURJVE9SLnRvb2xzLmJpbmQoZnVuY3Rpb24oKXt2YXIgYT1rO2EucmVtb3ZlU3R5bGUoXCJ3aWR0aFwiKTtpZihwLmF1dG9TaXplKXt2YXIgYj1wLmVsZW1lbnQuZ2V0RG9jdW1lbnQoKSxiPShDS0VESVRPUi5lbnYud2Via2l0fHxDS0VESVRPUi5lbnYuZWRnZT9wLmVsZW1lbnQ6Yi5nZXRCb2R5KCkpLiQuc2Nyb2xsV2lkdGg7Q0tFRElUT1IuZW52LmllJiZDS0VESVRPUi5lbnYucXVpcmtzJiYwPGImJihiKz0oYS4kLm9mZnNldFdpZHRofHwwKS0oYS4kLmNsaWVudFdpZHRofHwwKSszKTthLnNldFN0eWxlKFwid2lkdGhcIixiKzEwK1wicHhcIik7Yj1wLmVsZW1lbnQuJC5zY3JvbGxIZWlnaHQ7Q0tFRElUT1IuZW52LmllJiZcbkNLRURJVE9SLmVudi5xdWlya3MmJjA8YiYmKGIrPShhLiQub2Zmc2V0SGVpZ2h0fHwwKS0oYS4kLmNsaWVudEhlaWdodHx8MCkrMyk7YS5zZXRTdHlsZShcImhlaWdodFwiLGIrXCJweFwiKTttLl8uY3VycmVudEJsb2NrLmVsZW1lbnQuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJub25lXCIpLnJlbW92ZVN0eWxlKFwiZGlzcGxheVwiKX1lbHNlIGEucmVtb3ZlU3R5bGUoXCJoZWlnaHRcIik7cSYmKGQtPWsuJC5vZmZzZXRXaWR0aCk7ay5zZXRTdHlsZShcImxlZnRcIixkK1wicHhcIik7dmFyIGI9bS5lbGVtZW50LmdldFdpbmRvdygpLGE9ay4kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGI9Yi5nZXRWaWV3UGFuZVNpemUoKSxjPWEud2lkdGh8fGEucmlnaHQtYS5sZWZ0LGU9YS5oZWlnaHR8fGEuYm90dG9tLWEudG9wLGw9cT9hLnJpZ2h0OmIud2lkdGgtYS5sZWZ0LGg9cT9iLndpZHRoLWEucmlnaHQ6YS5sZWZ0O3E/bDxjJiYoZD1oPmM/ZCtjOmIud2lkdGg+Yz9kLWEubGVmdDpkLWEucmlnaHQrYi53aWR0aCk6XG5sPGMmJihkPWg+Yz9kLWM6Yi53aWR0aD5jP2QtYS5yaWdodCtiLndpZHRoOmQtYS5sZWZ0KTtjPWEudG9wO2IuaGVpZ2h0LWEudG9wPGUmJihuPWM+ZT9uLWU6Yi5oZWlnaHQ+ZT9uLWEuYm90dG9tK2IuaGVpZ2h0Om4tYS50b3ApO0NLRURJVE9SLmVudi5pZSYmKGI9YT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoay4kLm9mZnNldFBhcmVudCksXCJodG1sXCI9PWIuZ2V0TmFtZSgpJiYoYj1iLmdldERvY3VtZW50KCkuZ2V0Qm9keSgpKSxcInJ0bFwiPT1iLmdldENvbXB1dGVkU3R5bGUoXCJkaXJlY3Rpb25cIikmJihkPUNLRURJVE9SLmVudi5pZThDb21wYXQ/ZC0yKmsuZ2V0RG9jdW1lbnQoKS5nZXREb2N1bWVudEVsZW1lbnQoKS4kLnNjcm9sbExlZnQ6ZC0oYS4kLnNjcm9sbFdpZHRoLWEuJC5jbGllbnRXaWR0aCkpKTt2YXIgYT1rLmdldEZpcnN0KCksZjsoZj1hLmdldEN1c3RvbURhdGEoXCJhY3RpdmVQYW5lbFwiKSkmJmYub25IaWRlJiZmLm9uSGlkZS5jYWxsKHRoaXMsMSk7YS5zZXRDdXN0b21EYXRhKFwiYWN0aXZlUGFuZWxcIixcbnRoaXMpO2suc2V0U3R5bGVzKHt0b3A6bitcInB4XCIsbGVmdDpkK1wicHhcIn0pO2suc2V0T3BhY2l0eSgxKTtnJiZnKCl9LHRoaXMpO20uaXNMb2FkZWQ/YSgpOm0ub25Mb2FkPWE7Q0tFRElUT1IudG9vbHMuc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBhPUNLRURJVE9SLmVudi53ZWJraXQmJkNLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpLmdldFNjcm9sbFBvc2l0aW9uKCkueTt0aGlzLmZvY3VzKCk7cC5lbGVtZW50LmZvY3VzKCk7Q0tFRElUT1IuZW52LndlYmtpdCYmKENLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKS4kLnNjcm9sbFRvcD1hKTt0aGlzLmFsbG93Qmx1cighMCk7dGhpcy5fLmVkaXRvci5maXJlKFwicGFuZWxTaG93XCIsdGhpcyl9LDAsdGhpcyl9LENLRURJVE9SLmVudi5haXI/MjAwOjAsdGhpcyk7dGhpcy52aXNpYmxlPTE7dGhpcy5vblNob3cmJnRoaXMub25TaG93LmNhbGwodGhpcyl9LHJlcG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uc2hvd0Jsb2NrUGFyYW1zO1xudGhpcy52aXNpYmxlJiZ0aGlzLl8uc2hvd0Jsb2NrUGFyYW1zJiYodGhpcy5oaWRlKCksdGhpcy5zaG93QmxvY2suYXBwbHkodGhpcyxhKSl9LGZvY3VzOmZ1bmN0aW9uKCl7aWYoQ0tFRElUT1IuZW52LndlYmtpdCl7dmFyIGE9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QWN0aXZlKCk7YSYmIWEuZXF1YWxzKHRoaXMuXy5pZnJhbWUpJiZhLiQuYmx1cigpfSh0aGlzLl8ubGFzdEZvY3VzZWR8fHRoaXMuXy5pZnJhbWUuZ2V0RnJhbWVEb2N1bWVudCgpLmdldFdpbmRvdygpKS5mb2N1cygpfSxibHVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fLmlmcmFtZS5nZXRGcmFtZURvY3VtZW50KCkuZ2V0QWN0aXZlKCk7YSYmYS5pcyhcImFcIikmJih0aGlzLl8ubGFzdEZvY3VzZWQ9YSl9LGhpZGU6ZnVuY3Rpb24oYSl7aWYodGhpcy52aXNpYmxlJiYoIXRoaXMub25IaWRlfHwhMCE9PXRoaXMub25IaWRlLmNhbGwodGhpcykpKXt0aGlzLmhpZGVDaGlsZCgpO0NLRURJVE9SLmVudi5nZWNrbyYmdGhpcy5fLmlmcmFtZS5nZXRGcmFtZURvY3VtZW50KCkuJC5hY3RpdmVFbGVtZW50LmJsdXIoKTtcbnRoaXMuZWxlbWVudC5zZXRTdHlsZShcImRpc3BsYXlcIixcIm5vbmVcIik7dGhpcy52aXNpYmxlPTA7dGhpcy5lbGVtZW50LmdldEZpcnN0KCkucmVtb3ZlQ3VzdG9tRGF0YShcImFjdGl2ZVBhbmVsXCIpO2lmKGE9YSYmdGhpcy5fLnJldHVybkZvY3VzKUNLRURJVE9SLmVudi53ZWJraXQmJmEudHlwZSYmYS5nZXRXaW5kb3coKS4kLmZvY3VzKCksYS5mb2N1cygpO2RlbGV0ZSB0aGlzLl8ubGFzdEZvY3VzZWQ7dGhpcy5fLnNob3dCbG9ja1BhcmFtcz1udWxsO3RoaXMuXy5lZGl0b3IuZmlyZShcInBhbmVsSGlkZVwiLHRoaXMpfX0sYWxsb3dCbHVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuXy5wYW5lbDt2b2lkIDAhPT1hJiYoYi5hbGxvd0JsdXI9YSk7cmV0dXJuIGIuYWxsb3dCbHVyfSxzaG93QXNDaGlsZDpmdW5jdGlvbihhLGIsYyxmLGgsZyl7aWYodGhpcy5fLmFjdGl2ZUNoaWxkIT1hfHxhLl8ucGFuZWwuXy5vZmZzZXRQYXJlbnRJZCE9Yy5nZXRJZCgpKXRoaXMuaGlkZUNoaWxkKCksYS5vbkhpZGU9XG5DS0VESVRPUi50b29scy5iaW5kKGZ1bmN0aW9uKCl7Q0tFRElUT1IudG9vbHMuc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMuXy5mb2N1c2VkfHx0aGlzLmhpZGUoKX0sMCx0aGlzKX0sdGhpcyksdGhpcy5fLmFjdGl2ZUNoaWxkPWEsdGhpcy5fLmZvY3VzZWQ9ITEsYS5zaG93QmxvY2soYixjLGYsaCxnKSx0aGlzLmJsdXIoKSwoQ0tFRElUT1IuZW52LmllN0NvbXBhdHx8Q0tFRElUT1IuZW52LmllNkNvbXBhdCkmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmVsZW1lbnQuZ2V0Q2hpbGQoMCkuJC5zdHlsZS5jc3NUZXh0Kz1cIlwifSwxMDApfSxoaWRlQ2hpbGQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fLmFjdGl2ZUNoaWxkO2ImJihkZWxldGUgYi5vbkhpZGUsZGVsZXRlIHRoaXMuXy5hY3RpdmVDaGlsZCxiLmhpZGUoKSxhJiZ0aGlzLmZvY3VzKCkpfX19KTtDS0VESVRPUi5vbihcImluc3RhbmNlRGVzdHJveWVkXCIsZnVuY3Rpb24oKXt2YXIgYT1DS0VESVRPUi50b29scy5pc0VtcHR5KENLRURJVE9SLmluc3RhbmNlcyksXG5iO2ZvcihiIGluIGYpe3ZhciBjPWZbYl07YT9jLmRlc3Ryb3koKTpjLmVsZW1lbnQuaGlkZSgpfWEmJihmPXt9KX0pfSkoKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImNvbG9yYnV0dG9uXCIse3JlcXVpcmVzOlwicGFuZWxidXR0b24sZmxvYXRwYW5lbFwiLGluaXQ6ZnVuY3Rpb24oYyl7ZnVuY3Rpb24gcihwLGgsZSxmKXt2YXIgbD1uZXcgQ0tFRElUT1Iuc3R5bGUoa1tcImNvbG9yQnV0dG9uX1wiK2grXCJTdHlsZVwiXSksbT1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKStcIl9jb2xvckJveFwiO2MudWkuYWRkKHAsQ0tFRElUT1IuVUlfUEFORUxCVVRUT04se2xhYmVsOmUsdGl0bGU6ZSxtb2Rlczp7d3lzaXd5ZzoxfSxlZGl0b3JGb2N1czowLHRvb2xiYXI6XCJjb2xvcnMsXCIrZixhbGxvd2VkQ29udGVudDpsLHJlcXVpcmVkQ29udGVudDpsLHBhbmVsOntjc3M6Q0tFRElUT1Iuc2tpbi5nZXRQYXRoKFwiZWRpdG9yXCIpLGF0dHJpYnV0ZXM6e3JvbGU6XCJsaXN0Ym94XCIsXCJhcmlhLWxhYmVsXCI6Zy5wYW5lbFRpdGxlfX0sb25CbG9jazpmdW5jdGlvbihhLGIpe2IuYXV0b1NpemU9ITA7Yi5lbGVtZW50LmFkZENsYXNzKFwiY2tlX2NvbG9yYmxvY2tcIik7XG5iLmVsZW1lbnQuc2V0SHRtbCh1KGEsaCxtKSk7Yi5lbGVtZW50LmdldERvY3VtZW50KCkuZ2V0Qm9keSgpLnNldFN0eWxlKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKTtDS0VESVRPUi51aS5maXJlKFwicmVhZHlcIix0aGlzKTt2YXIgZD1iLmtleXMsZT1cInJ0bFwiPT1jLmxhbmcuZGlyO2RbZT8zNzozOV09XCJuZXh0XCI7ZFs0MF09XCJuZXh0XCI7ZFs5XT1cIm5leHRcIjtkW2U/Mzk6MzddPVwicHJldlwiO2RbMzhdPVwicHJldlwiO2RbQ0tFRElUT1IuU0hJRlQrOV09XCJwcmV2XCI7ZFszMl09XCJjbGlja1wifSxyZWZyZXNoOmZ1bmN0aW9uKCl7Yy5hY3RpdmVGaWx0ZXIuY2hlY2sobCl8fHRoaXMuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpfSxvbk9wZW46ZnVuY3Rpb24oKXt2YXIgYT1jLmdldFNlbGVjdGlvbigpLGE9YSYmYS5nZXRTdGFydEVsZW1lbnQoKSxhPWMuZWxlbWVudFBhdGgoYSksYjtpZihhKXthPWEuYmxvY2t8fGEuYmxvY2tMaW1pdHx8Yy5kb2N1bWVudC5nZXRCb2R5KCk7ZG8gYj1cbmEmJmEuZ2V0Q29tcHV0ZWRTdHlsZShcImJhY2tcIj09aD9cImJhY2tncm91bmQtY29sb3JcIjpcImNvbG9yXCIpfHxcInRyYW5zcGFyZW50XCI7d2hpbGUoXCJiYWNrXCI9PWgmJlwidHJhbnNwYXJlbnRcIj09YiYmYSYmKGE9YS5nZXRQYXJlbnQoKSkpO2ImJlwidHJhbnNwYXJlbnRcIiE9Ynx8KGI9XCIjZmZmZmZmXCIpOyExIT09ay5jb2xvckJ1dHRvbl9lbmFibGVBdXRvbWF0aWMmJnRoaXMuXy5wYW5lbC5fLmlmcmFtZS5nZXRGcmFtZURvY3VtZW50KCkuZ2V0QnlJZChtKS5zZXRTdHlsZShcImJhY2tncm91bmQtY29sb3JcIixiKTtyZXR1cm4gYn19fSl9ZnVuY3Rpb24gdShwLGgsZSl7dmFyIGY9W10sbD1rLmNvbG9yQnV0dG9uX2NvbG9ycy5zcGxpdChcIixcIiksbT1jLnBsdWdpbnMuY29sb3JkaWFsb2cmJiExIT09ay5jb2xvckJ1dHRvbl9lbmFibGVNb3JlLGE9bC5sZW5ndGgrKG0/MjoxKSxiPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhKXt0aGlzLnJlbW92ZUxpc3RlbmVyKFwib2tcIixcbmQpO3RoaXMucmVtb3ZlTGlzdGVuZXIoXCJjYW5jZWxcIixkKTtcIm9rXCI9PWEubmFtZSYmZSh0aGlzLmdldENvbnRlbnRFbGVtZW50KFwicGlja2VyXCIsXCJzZWxlY3RlZENvbG9yXCIpLmdldFZhbHVlKCksYil9dmFyIGU9YXJndW1lbnRzLmNhbGxlZTtpZihcIj9cIj09YSljLm9wZW5EaWFsb2coXCJjb2xvcmRpYWxvZ1wiLGZ1bmN0aW9uKCl7dGhpcy5vbihcIm9rXCIsZCk7dGhpcy5vbihcImNhbmNlbFwiLGQpfSk7ZWxzZXtjLmZvY3VzKCk7cC5oaWRlKCk7Yy5maXJlKFwic2F2ZVNuYXBzaG90XCIpO2MucmVtb3ZlU3R5bGUobmV3IENLRURJVE9SLnN0eWxlKGtbXCJjb2xvckJ1dHRvbl9cIitiK1wiU3R5bGVcIl0se2NvbG9yOlwiaW5oZXJpdFwifSkpO2lmKGEpe3ZhciBmPWtbXCJjb2xvckJ1dHRvbl9cIitiK1wiU3R5bGVcIl07Zi5jaGlsZFJ1bGU9XCJiYWNrXCI9PWI/ZnVuY3Rpb24oYSl7cmV0dXJuIHQoYSl9OmZ1bmN0aW9uKGEpe3JldHVybiEoYS5pcyhcImFcIil8fGEuZ2V0RWxlbWVudHNCeVRhZyhcImFcIikuY291bnQoKSl8fFxudChhKX07Yy5hcHBseVN0eWxlKG5ldyBDS0VESVRPUi5zdHlsZShmLHtjb2xvcjphfSkpfWMuZmlyZShcInNhdmVTbmFwc2hvdFwiKX19KTshMSE9PWsuY29sb3JCdXR0b25fZW5hYmxlQXV0b21hdGljJiZmLnB1c2goJ1xceDNjYSBjbGFzc1xceDNkXCJja2VfY29sb3JhdXRvXCIgX2NrZV9mb2N1c1xceDNkMSBoaWRlZm9jdXNcXHgzZHRydWUgdGl0bGVcXHgzZFwiJyxnLmF1dG8sJ1wiIG9uY2xpY2tcXHgzZFwiQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKCcsYixcIixudWxsLCdcIixoLFwiJyk7cmV0dXJuIGZhbHNlO1xcXCIgaHJlZlxceDNkXFxcImphdmFzY3JpcHQ6dm9pZCgnXCIsZy5hdXRvLCdcXCcpXCIgcm9sZVxceDNkXCJvcHRpb25cIiBhcmlhLXBvc2luc2V0XFx4M2RcIjFcIiBhcmlhLXNldHNpemVcXHgzZFwiJyxhLCdcIlxceDNlXFx4M2N0YWJsZSByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiIGNlbGxzcGFjaW5nXFx4M2QwIGNlbGxwYWRkaW5nXFx4M2QwIHdpZHRoXFx4M2RcIjEwMCVcIlxceDNlXFx4M2N0clxceDNlXFx4M2N0ZFxceDNlXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9jb2xvcmJveFwiIGlkXFx4M2RcIicsXG5lLCdcIlxceDNlXFx4M2Mvc3BhblxceDNlXFx4M2MvdGRcXHgzZVxceDNjdGQgY29sc3BhblxceDNkNyBhbGlnblxceDNkY2VudGVyXFx4M2UnLGcuYXV0byxcIlxceDNjL3RkXFx4M2VcXHgzYy90clxceDNlXFx4M2MvdGFibGVcXHgzZVxceDNjL2FcXHgzZVwiKTtmLnB1c2goJ1xceDNjdGFibGUgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIiBjZWxsc3BhY2luZ1xceDNkMCBjZWxscGFkZGluZ1xceDNkMCB3aWR0aFxceDNkXCIxMDAlXCJcXHgzZScpO2ZvcihlPTA7ZTxsLmxlbmd0aDtlKyspezA9PT1lJTgmJmYucHVzaChcIlxceDNjL3RyXFx4M2VcXHgzY3RyXFx4M2VcIik7dmFyIGQ9bFtlXS5zcGxpdChcIi9cIiksbj1kWzBdLHE9ZFsxXXx8bjtkWzFdfHwobj1cIiNcIituLnJlcGxhY2UoL14oLikoLikoLikkLyxcIiQxJDEkMiQyJDMkM1wiKSk7ZD1jLmxhbmcuY29sb3JidXR0b24uY29sb3JzW3FdfHxxO2YucHVzaCgnXFx4M2N0ZFxceDNlXFx4M2NhIGNsYXNzXFx4M2RcImNrZV9jb2xvcmJveFwiIF9ja2VfZm9jdXNcXHgzZDEgaGlkZWZvY3VzXFx4M2R0cnVlIHRpdGxlXFx4M2RcIicsXG5kLCdcIiBvbmNsaWNrXFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbignLGIsXCIsJ1wiLG4sXCInLCdcIixoLFwiJyk7IHJldHVybiBmYWxzZTtcXFwiIGhyZWZcXHgzZFxcXCJqYXZhc2NyaXB0OnZvaWQoJ1wiLGQsJ1xcJylcIiByb2xlXFx4M2RcIm9wdGlvblwiIGFyaWEtcG9zaW5zZXRcXHgzZFwiJyxlKzIsJ1wiIGFyaWEtc2V0c2l6ZVxceDNkXCInLGEsJ1wiXFx4M2VcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX2NvbG9yYm94XCIgc3R5bGVcXHgzZFwiYmFja2dyb3VuZC1jb2xvcjojJyxxLCdcIlxceDNlXFx4M2Mvc3BhblxceDNlXFx4M2MvYVxceDNlXFx4M2MvdGRcXHgzZScpfW0mJmYucHVzaCgnXFx4M2MvdHJcXHgzZVxceDNjdHJcXHgzZVxceDNjdGQgY29sc3BhblxceDNkOCBhbGlnblxceDNkY2VudGVyXFx4M2VcXHgzY2EgY2xhc3NcXHgzZFwiY2tlX2NvbG9ybW9yZVwiIF9ja2VfZm9jdXNcXHgzZDEgaGlkZWZvY3VzXFx4M2R0cnVlIHRpdGxlXFx4M2RcIicsZy5tb3JlLCdcIiBvbmNsaWNrXFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbignLFxuYixcIiwnPycsJ1wiLGgsXCInKTtyZXR1cm4gZmFsc2U7XFxcIiBocmVmXFx4M2RcXFwiamF2YXNjcmlwdDp2b2lkKCdcIixnLm1vcmUsXCInKVxcXCJcIiwnIHJvbGVcXHgzZFwib3B0aW9uXCIgYXJpYS1wb3NpbnNldFxceDNkXCInLGEsJ1wiIGFyaWEtc2V0c2l6ZVxceDNkXCInLGEsJ1wiXFx4M2UnLGcubW9yZSxcIlxceDNjL2FcXHgzZVxceDNjL3RkXFx4M2VcIik7Zi5wdXNoKFwiXFx4M2MvdHJcXHgzZVxceDNjL3RhYmxlXFx4M2VcIik7cmV0dXJuIGYuam9pbihcIlwiKX1mdW5jdGlvbiB0KGMpe3JldHVyblwiZmFsc2VcIj09Yy5nZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIil8fGMuZ2V0QXR0cmlidXRlKFwiZGF0YS1ub3N0eWxlXCIpfXZhciBrPWMuY29uZmlnLGc9Yy5sYW5nLmNvbG9yYnV0dG9uO0NLRURJVE9SLmVudi5oY3x8KHIoXCJUZXh0Q29sb3JcIixcImZvcmVcIixnLnRleHRDb2xvclRpdGxlLDEwKSxyKFwiQkdDb2xvclwiLFwiYmFja1wiLGcuYmdDb2xvclRpdGxlLDIwKSl9fSk7XG5DS0VESVRPUi5jb25maWcuY29sb3JCdXR0b25fY29sb3JzPVwiMDAwLDgwMDAwMCw4QjQ1MTMsMkY0RjRGLDAwODA4MCwwMDAwODAsNEIwMDgyLDY5Njk2OSxCMjIyMjIsQTUyQTJBLERBQTUyMCwwMDY0MDAsNDBFMEQwLDAwMDBDRCw4MDAwODAsODA4MDgwLEYwMCxGRjhDMDAsRkZENzAwLDAwODAwMCwwRkYsMDBGLEVFODJFRSxBOUE5QTksRkZBMDdBLEZGQTUwMCxGRkZGMDAsMDBGRjAwLEFGRUVFRSxBREQ4RTYsRERBMERELEQzRDNEMyxGRkYwRjUsRkFFQkQ3LEZGRkZFMCxGMEZGRjAsRjBGRkZGLEYwRjhGRixFNkU2RkEsRkZGXCI7Q0tFRElUT1IuY29uZmlnLmNvbG9yQnV0dG9uX2ZvcmVTdHlsZT17ZWxlbWVudDpcInNwYW5cIixzdHlsZXM6e2NvbG9yOlwiIyhjb2xvcilcIn0sb3ZlcnJpZGVzOlt7ZWxlbWVudDpcImZvbnRcIixhdHRyaWJ1dGVzOntjb2xvcjpudWxsfX1dfTtDS0VESVRPUi5jb25maWcuY29sb3JCdXR0b25fYmFja1N0eWxlPXtlbGVtZW50Olwic3BhblwiLHN0eWxlczp7XCJiYWNrZ3JvdW5kLWNvbG9yXCI6XCIjKGNvbG9yKVwifX07Q0tFRElUT1IucGx1Z2lucy5jb2xvcmRpYWxvZz17cmVxdWlyZXM6XCJkaWFsb2dcIixpbml0OmZ1bmN0aW9uKGIpe3ZhciBjPW5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwiY29sb3JkaWFsb2dcIik7Yy5lZGl0b3JGb2N1cz0hMTtiLmFkZENvbW1hbmQoXCJjb2xvcmRpYWxvZ1wiLGMpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJjb2xvcmRpYWxvZ1wiLHRoaXMucGF0aCtcImRpYWxvZ3MvY29sb3JkaWFsb2cuanNcIik7Yi5nZXRDb2xvckZyb21EaWFsb2c9ZnVuY3Rpb24oYyxmKXt2YXIgZD1mdW5jdGlvbihhKXt0aGlzLnJlbW92ZUxpc3RlbmVyKFwib2tcIixkKTt0aGlzLnJlbW92ZUxpc3RlbmVyKFwiY2FuY2VsXCIsZCk7YT1cIm9rXCI9PWEubmFtZT90aGlzLmdldFZhbHVlT2YoXCJwaWNrZXJcIixcInNlbGVjdGVkQ29sb3JcIik6bnVsbDtjLmNhbGwoZixhKX0sZT1mdW5jdGlvbihhKXthLm9uKFwib2tcIixkKTthLm9uKFwiY2FuY2VsXCIsZCl9O2IuZXhlY0NvbW1hbmQoXCJjb2xvcmRpYWxvZ1wiKTtpZihiLl8uc3RvcmVkRGlhbG9ncyYmXG5iLl8uc3RvcmVkRGlhbG9ncy5jb2xvcmRpYWxvZyllKGIuXy5zdG9yZWREaWFsb2dzLmNvbG9yZGlhbG9nKTtlbHNlIENLRURJVE9SLm9uKFwiZGlhbG9nRGVmaW5pdGlvblwiLGZ1bmN0aW9uKGEpe2lmKFwiY29sb3JkaWFsb2dcIj09YS5kYXRhLm5hbWUpe3ZhciBiPWEuZGF0YS5kZWZpbml0aW9uO2EucmVtb3ZlTGlzdGVuZXIoKTtiLm9uTG9hZD1DS0VESVRPUi50b29scy5vdmVycmlkZShiLm9uTG9hZCxmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtlKHRoaXMpO2Iub25Mb2FkPWE7XCJmdW5jdGlvblwiPT10eXBlb2YgYSYmYS5jYWxsKHRoaXMpfX0pfX0pfX19O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiY29sb3JkaWFsb2dcIixDS0VESVRPUi5wbHVnaW5zLmNvbG9yZGlhbG9nKTsoZnVuY3Rpb24oKXtDS0VESVRPUi5wbHVnaW5zLmFkZChcInRlbXBsYXRlc1wiLHtyZXF1aXJlczpcImRpYWxvZ1wiLGluaXQ6ZnVuY3Rpb24oYSl7Q0tFRElUT1IuZGlhbG9nLmFkZChcInRlbXBsYXRlc1wiLENLRURJVE9SLmdldFVybCh0aGlzLnBhdGgrXCJkaWFsb2dzL3RlbXBsYXRlcy5qc1wiKSk7YS5hZGRDb21tYW5kKFwidGVtcGxhdGVzXCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJ0ZW1wbGF0ZXNcIikpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlRlbXBsYXRlc1wiLHtsYWJlbDphLmxhbmcudGVtcGxhdGVzLmJ1dHRvbixjb21tYW5kOlwidGVtcGxhdGVzXCIsdG9vbGJhcjpcImRvY3Rvb2xzLDEwXCJ9KX19KTt2YXIgYz17fSxmPXt9O0NLRURJVE9SLmFkZFRlbXBsYXRlcz1mdW5jdGlvbihhLGQpe2NbYV09ZH07Q0tFRElUT1IuZ2V0VGVtcGxhdGVzPWZ1bmN0aW9uKGEpe3JldHVybiBjW2FdfTtDS0VESVRPUi5sb2FkVGVtcGxhdGVzPWZ1bmN0aW9uKGEsZCl7Zm9yKHZhciBlPVxuW10sYj0wLGM9YS5sZW5ndGg7YjxjO2IrKylmW2FbYl1dfHwoZS5wdXNoKGFbYl0pLGZbYVtiXV09MSk7ZS5sZW5ndGg/Q0tFRElUT1Iuc2NyaXB0TG9hZGVyLmxvYWQoZSxkKTpzZXRUaW1lb3V0KGQsMCl9fSkoKTtDS0VESVRPUi5jb25maWcudGVtcGxhdGVzX2ZpbGVzPVtDS0VESVRPUi5nZXRVcmwoXCJwbHVnaW5zL3RlbXBsYXRlcy90ZW1wbGF0ZXMvZGVmYXVsdC5qc1wiKV07Q0tFRElUT1IuY29uZmlnLnRlbXBsYXRlc19yZXBsYWNlQ29udGVudD0hMDtDS0VESVRPUi5wbHVnaW5zLmFkZChcIm1lbnVcIix7cmVxdWlyZXM6XCJmbG9hdHBhbmVsXCIsYmVmb3JlSW5pdDpmdW5jdGlvbihnKXtmb3IodmFyIGg9Zy5jb25maWcubWVudV9ncm91cHMuc3BsaXQoXCIsXCIpLHA9Zy5fLm1lbnVHcm91cHM9e30sbj1nLl8ubWVudUl0ZW1zPXt9LGE9MDthPGgubGVuZ3RoO2ErKylwW2hbYV1dPWErMTtnLmFkZE1lbnVHcm91cD1mdW5jdGlvbihiLGEpe3BbYl09YXx8MTAwfTtnLmFkZE1lbnVJdGVtPWZ1bmN0aW9uKGEsYyl7cFtjLmdyb3VwXSYmKG5bYV09bmV3IENLRURJVE9SLm1lbnVJdGVtKHRoaXMsYSxjKSl9O2cuYWRkTWVudUl0ZW1zPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBhKXRoaXMuYWRkTWVudUl0ZW0oYyxhW2NdKX07Zy5nZXRNZW51SXRlbT1mdW5jdGlvbihhKXtyZXR1cm4gblthXX07Zy5yZW1vdmVNZW51SXRlbT1mdW5jdGlvbihhKXtkZWxldGUgblthXX19fSk7XG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBnKGEpe2Euc29ydChmdW5jdGlvbihhLGMpe3JldHVybiBhLmdyb3VwPGMuZ3JvdXA/LTE6YS5ncm91cD5jLmdyb3VwPzE6YS5vcmRlcjxjLm9yZGVyPy0xOmEub3JkZXI+Yy5vcmRlcj8xOjB9KX12YXIgaD0nXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9tZW51aXRlbVwiXFx4M2VcXHgzY2EgaWRcXHgzZFwie2lkfVwiIGNsYXNzXFx4M2RcImNrZV9tZW51YnV0dG9uIGNrZV9tZW51YnV0dG9uX197bmFtZX0gY2tlX21lbnVidXR0b25fe3N0YXRlfSB7Y2xzfVwiIGhyZWZcXHgzZFwie2hyZWZ9XCIgdGl0bGVcXHgzZFwie3RpdGxlfVwiIHRhYmluZGV4XFx4M2RcIi0xXCJfY2tlX2ZvY3VzXFx4M2QxIGhpZGVmb2N1c1xceDNkXCJ0cnVlXCIgcm9sZVxceDNkXCJ7cm9sZX1cIiBhcmlhLWhhc3BvcHVwXFx4M2RcIntoYXNQb3B1cH1cIiBhcmlhLWRpc2FibGVkXFx4M2RcIntkaXNhYmxlZH1cIiB7YXJpYUNoZWNrZWR9JztDS0VESVRPUi5lbnYuZ2Vja28mJkNLRURJVE9SLmVudi5tYWMmJihoKz0nIG9ua2V5cHJlc3NcXHgzZFwicmV0dXJuIGZhbHNlO1wiJyk7XG5DS0VESVRPUi5lbnYuZ2Vja28mJihoKz0nIG9uYmx1clxceDNkXCJ0aGlzLnN0eWxlLmNzc1RleHQgXFx4M2QgdGhpcy5zdHlsZS5jc3NUZXh0O1wiJyk7dmFyIGg9aCsoJyBvbm1vdXNlb3ZlclxceDNkXCJDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oe2hvdmVyRm59LHtpbmRleH0pO1wiIG9ubW91c2VvdXRcXHgzZFwiQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKHttb3ZlT3V0Rm59LHtpbmRleH0pO1wiICcrKENLRURJVE9SLmVudi5pZT8nb25jbGlja1xceDNkXCJyZXR1cm4gZmFsc2U7XCIgb25tb3VzZXVwJzpcIm9uY2xpY2tcIikrJ1xceDNkXCJDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oe2NsaWNrRm59LHtpbmRleH0pOyByZXR1cm4gZmFsc2U7XCJcXHgzZScpLHA9Q0tFRElUT1IuYWRkVGVtcGxhdGUoXCJtZW51SXRlbVwiLGgrJ1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfbWVudWJ1dHRvbl9pbm5lclwiXFx4M2VcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX21lbnVidXR0b25faWNvblwiXFx4M2VcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX2J1dHRvbl9pY29uIGNrZV9idXR0b25fX3tpY29uTmFtZX1faWNvblwiIHN0eWxlXFx4M2RcIntpY29uU3R5bGV9XCJcXHgzZVxceDNjL3NwYW5cXHgzZVxceDNjL3NwYW5cXHgzZVxceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfbWVudWJ1dHRvbl9sYWJlbFwiXFx4M2V7bGFiZWx9XFx4M2Mvc3BhblxceDNle2Fycm93SHRtbH1cXHgzYy9zcGFuXFx4M2VcXHgzYy9hXFx4M2VcXHgzYy9zcGFuXFx4M2UnKSxcbm49Q0tFRElUT1IuYWRkVGVtcGxhdGUoXCJtZW51QXJyb3dcIiwnXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9tZW51YXJyb3dcIlxceDNlXFx4M2NzcGFuXFx4M2V7bGFiZWx9XFx4M2Mvc3BhblxceDNlXFx4M2Mvc3BhblxceDNlJyk7Q0tFRElUT1IubWVudT1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7JDpmdW5jdGlvbihhLGIpe2I9dGhpcy5fLmRlZmluaXRpb249Ynx8e307dGhpcy5pZD1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKTt0aGlzLmVkaXRvcj1hO3RoaXMuaXRlbXM9W107dGhpcy5fLmxpc3RlbmVycz1bXTt0aGlzLl8ubGV2ZWw9Yi5sZXZlbHx8MTt2YXIgYz1DS0VESVRPUi50b29scy5leHRlbmQoe30sYi5wYW5lbCx7Y3NzOltDS0VESVRPUi5za2luLmdldFBhdGgoXCJlZGl0b3JcIildLGxldmVsOnRoaXMuXy5sZXZlbC0xLGJsb2NrOnt9fSksbT1jLmJsb2NrLmF0dHJpYnV0ZXM9Yy5hdHRyaWJ1dGVzfHx7fTshbS5yb2xlJiYobS5yb2xlPVwibWVudVwiKTt0aGlzLl8ucGFuZWxEZWZpbml0aW9uPVxuY30sXzp7b25TaG93OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lZGl0b3IuZ2V0U2VsZWN0aW9uKCksYj1hJiZhLmdldFN0YXJ0RWxlbWVudCgpLGM9dGhpcy5lZGl0b3IuZWxlbWVudFBhdGgoKSxtPXRoaXMuXy5saXN0ZW5lcnM7dGhpcy5yZW1vdmVBbGwoKTtmb3IodmFyIGU9MDtlPG0ubGVuZ3RoO2UrKyl7dmFyIGw9bVtlXShiLGEsYyk7aWYobClmb3IodmFyIGsgaW4gbCl7dmFyIGY9dGhpcy5lZGl0b3IuZ2V0TWVudUl0ZW0oayk7IWZ8fGYuY29tbWFuZCYmIXRoaXMuZWRpdG9yLmdldENvbW1hbmQoZi5jb21tYW5kKS5zdGF0ZXx8KGYuc3RhdGU9bFtrXSx0aGlzLmFkZChmKSl9fX0sb25DbGljazpmdW5jdGlvbihhKXt0aGlzLmhpZGUoKTtpZihhLm9uQ2xpY2spYS5vbkNsaWNrKCk7ZWxzZSBhLmNvbW1hbmQmJnRoaXMuZWRpdG9yLmV4ZWNDb21tYW5kKGEuY29tbWFuZCl9LG9uRXNjYXBlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGFyZW50O2I/Yi5fLnBhbmVsLmhpZGVDaGlsZCgxKTpcbjI3PT1hJiZ0aGlzLmhpZGUoMSk7cmV0dXJuITF9LG9uSGlkZTpmdW5jdGlvbigpe3RoaXMub25IaWRlJiZ0aGlzLm9uSGlkZSgpfSxzaG93U3ViTWVudTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl8uc3ViTWVudSxjPXRoaXMuaXRlbXNbYV07aWYoYz1jLmdldEl0ZW1zJiZjLmdldEl0ZW1zKCkpe2I/Yi5yZW1vdmVBbGwoKTooYj10aGlzLl8uc3ViTWVudT1uZXcgQ0tFRElUT1IubWVudSh0aGlzLmVkaXRvcixDS0VESVRPUi50b29scy5leHRlbmQoe30sdGhpcy5fLmRlZmluaXRpb24se2xldmVsOnRoaXMuXy5sZXZlbCsxfSwhMCkpLGIucGFyZW50PXRoaXMsYi5fLm9uQ2xpY2s9Q0tFRElUT1IudG9vbHMuYmluZCh0aGlzLl8ub25DbGljayx0aGlzKSk7Zm9yKHZhciBtIGluIGMpe3ZhciBlPXRoaXMuZWRpdG9yLmdldE1lbnVJdGVtKG0pO2UmJihlLnN0YXRlPWNbbV0sYi5hZGQoZSkpfXZhciBsPXRoaXMuXy5wYW5lbC5nZXRCbG9jayh0aGlzLmlkKS5lbGVtZW50LmdldERvY3VtZW50KCkuZ2V0QnlJZCh0aGlzLmlkK1xuU3RyaW5nKGEpKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5zaG93KGwsMil9LDApfWVsc2UgdGhpcy5fLnBhbmVsLmhpZGVDaGlsZCgxKX19LHByb3RvOnthZGQ6ZnVuY3Rpb24oYSl7YS5vcmRlcnx8KGEub3JkZXI9dGhpcy5pdGVtcy5sZW5ndGgpO3RoaXMuaXRlbXMucHVzaChhKX0scmVtb3ZlQWxsOmZ1bmN0aW9uKCl7dGhpcy5pdGVtcz1bXX0sc2hvdzpmdW5jdGlvbihhLGIsYyxtKXtpZighdGhpcy5wYXJlbnQmJih0aGlzLl8ub25TaG93KCksIXRoaXMuaXRlbXMubGVuZ3RoKSlyZXR1cm47Yj1ifHwoXCJydGxcIj09dGhpcy5lZGl0b3IubGFuZy5kaXI/MjoxKTt2YXIgZT10aGlzLml0ZW1zLGw9dGhpcy5lZGl0b3Isaz10aGlzLl8ucGFuZWwsZj10aGlzLl8uZWxlbWVudDtpZighayl7az10aGlzLl8ucGFuZWw9bmV3IENLRURJVE9SLnVpLmZsb2F0UGFuZWwodGhpcy5lZGl0b3IsQ0tFRElUT1IuZG9jdW1lbnQuZ2V0Qm9keSgpLHRoaXMuXy5wYW5lbERlZmluaXRpb24sdGhpcy5fLmxldmVsKTtcbmsub25Fc2NhcGU9Q0tFRElUT1IudG9vbHMuYmluZChmdW5jdGlvbihhKXtpZighMT09PXRoaXMuXy5vbkVzY2FwZShhKSlyZXR1cm4hMX0sdGhpcyk7ay5vblNob3c9ZnVuY3Rpb24oKXtrLl8ucGFuZWwuZ2V0SG9sZGVyRWxlbWVudCgpLmdldFBhcmVudCgpLmFkZENsYXNzKFwiY2tlXCIpLmFkZENsYXNzKFwiY2tlX3Jlc2V0X2FsbFwiKX07ay5vbkhpZGU9Q0tFRElUT1IudG9vbHMuYmluZChmdW5jdGlvbigpe3RoaXMuXy5vbkhpZGUmJnRoaXMuXy5vbkhpZGUoKX0sdGhpcyk7Zj1rLmFkZEJsb2NrKHRoaXMuaWQsdGhpcy5fLnBhbmVsRGVmaW5pdGlvbi5ibG9jayk7Zi5hdXRvU2l6ZT0hMDt2YXIgZD1mLmtleXM7ZFs0MF09XCJuZXh0XCI7ZFs5XT1cIm5leHRcIjtkWzM4XT1cInByZXZcIjtkW0NLRURJVE9SLlNISUZUKzldPVwicHJldlwiO2RbXCJydGxcIj09bC5sYW5nLmRpcj8zNzozOV09Q0tFRElUT1IuZW52LmllP1wibW91c2V1cFwiOlwiY2xpY2tcIjtkWzMyXT1DS0VESVRPUi5lbnYuaWU/XCJtb3VzZXVwXCI6XG5cImNsaWNrXCI7Q0tFRElUT1IuZW52LmllJiYoZFsxM109XCJtb3VzZXVwXCIpO2Y9dGhpcy5fLmVsZW1lbnQ9Zi5lbGVtZW50O2Q9Zi5nZXREb2N1bWVudCgpO2QuZ2V0Qm9keSgpLnNldFN0eWxlKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKTtkLmdldEVsZW1lbnRzQnlUYWcoXCJodG1sXCIpLmdldEl0ZW0oMCkuc2V0U3R5bGUoXCJvdmVyZmxvd1wiLFwiaGlkZGVuXCIpO3RoaXMuXy5pdGVtT3ZlckZuPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKGEpe2NsZWFyVGltZW91dCh0aGlzLl8uc2hvd1N1YlRpbWVvdXQpO3RoaXMuXy5zaG93U3ViVGltZW91dD1DS0VESVRPUi50b29scy5zZXRUaW1lb3V0KHRoaXMuXy5zaG93U3ViTWVudSxsLmNvbmZpZy5tZW51X3N1Yk1lbnVEZWxheXx8NDAwLHRoaXMsW2FdKX0sdGhpcyk7dGhpcy5fLml0ZW1PdXRGbj1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLl8uc2hvd1N1YlRpbWVvdXQpfSx0aGlzKTtcbnRoaXMuXy5pdGVtQ2xpY2tGbj1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbihhKXt2YXIgYj10aGlzLml0ZW1zW2FdO2lmKGIuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKXRoaXMuaGlkZSgxKTtlbHNlIGlmKGIuZ2V0SXRlbXMpdGhpcy5fLnNob3dTdWJNZW51KGEpO2Vsc2UgdGhpcy5fLm9uQ2xpY2soYil9LHRoaXMpfWcoZSk7Zm9yKHZhciBkPWwuZWxlbWVudFBhdGgoKSxkPVsnXFx4M2NkaXYgY2xhc3NcXHgzZFwiY2tlX21lbnUnKyhkJiZkLmRpcmVjdGlvbigpIT1sLmxhbmcuZGlyP1wiIGNrZV9taXhlZF9kaXJfY29udGVudFwiOlwiXCIpKydcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2UnXSxoPWUubGVuZ3RoLHA9aCYmZVswXS5ncm91cCxuPTA7bjxoO24rKyl7dmFyIHE9ZVtuXTtwIT1xLmdyb3VwJiYoZC5wdXNoKCdcXHgzY2RpdiBjbGFzc1xceDNkXCJja2VfbWVudXNlcGFyYXRvclwiIHJvbGVcXHgzZFwic2VwYXJhdG9yXCJcXHgzZVxceDNjL2RpdlxceDNlJyksXG5wPXEuZ3JvdXApO3EucmVuZGVyKHRoaXMsbixkKX1kLnB1c2goXCJcXHgzYy9kaXZcXHgzZVwiKTtmLnNldEh0bWwoZC5qb2luKFwiXCIpKTtDS0VESVRPUi51aS5maXJlKFwicmVhZHlcIix0aGlzKTt0aGlzLnBhcmVudD90aGlzLnBhcmVudC5fLnBhbmVsLnNob3dBc0NoaWxkKGssdGhpcy5pZCxhLGIsYyxtKTprLnNob3dCbG9jayh0aGlzLmlkLGEsYixjLG0pO2wuZmlyZShcIm1lbnVTaG93XCIsW2tdKX0sYWRkTGlzdGVuZXI6ZnVuY3Rpb24oYSl7dGhpcy5fLmxpc3RlbmVycy5wdXNoKGEpfSxoaWRlOmZ1bmN0aW9uKGEpe3RoaXMuXy5vbkhpZGUmJnRoaXMuXy5vbkhpZGUoKTt0aGlzLl8ucGFuZWwmJnRoaXMuXy5wYW5lbC5oaWRlKGEpfX19KTtDS0VESVRPUi5tZW51SXRlbT1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7JDpmdW5jdGlvbihhLGIsYyl7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMsYyx7b3JkZXI6MCxjbGFzc05hbWU6XCJja2VfbWVudWJ1dHRvbl9fXCIrYn0pO3RoaXMuZ3JvdXA9XG5hLl8ubWVudUdyb3Vwc1t0aGlzLmdyb3VwXTt0aGlzLmVkaXRvcj1hO3RoaXMubmFtZT1ifSxwcm90bzp7cmVuZGVyOmZ1bmN0aW9uKGEsYixjKXt2YXIgaD1hLmlkK1N0cmluZyhiKSxlPVwidW5kZWZpbmVkXCI9PXR5cGVvZiB0aGlzLnN0YXRlP0NLRURJVE9SLlRSSVNUQVRFX09GRjp0aGlzLnN0YXRlLGw9XCJcIixrPWU9PUNLRURJVE9SLlRSSVNUQVRFX09OP1wib25cIjplPT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRD9cImRpc2FibGVkXCI6XCJvZmZcIjt0aGlzLnJvbGUgaW57bWVudWl0ZW1jaGVja2JveDoxLG1lbnVpdGVtcmFkaW86MX0mJihsPScgYXJpYS1jaGVja2VkXFx4M2RcIicrKGU9PUNLRURJVE9SLlRSSVNUQVRFX09OP1widHJ1ZVwiOlwiZmFsc2VcIikrJ1wiJyk7dmFyIGY9dGhpcy5nZXRJdGVtcyxkPVwiXFx4MjYjXCIrKFwicnRsXCI9PXRoaXMuZWRpdG9yLmxhbmcuZGlyP1wiOTY2OFwiOlwiOTY1OFwiKStcIjtcIixnPXRoaXMubmFtZTt0aGlzLmljb24mJiEvXFwuLy50ZXN0KHRoaXMuaWNvbikmJihnPVxudGhpcy5pY29uKTthPXtpZDpoLG5hbWU6dGhpcy5uYW1lLGljb25OYW1lOmcsbGFiZWw6dGhpcy5sYWJlbCxjbHM6dGhpcy5jbGFzc05hbWV8fFwiXCIsc3RhdGU6ayxoYXNQb3B1cDpmP1widHJ1ZVwiOlwiZmFsc2VcIixkaXNhYmxlZDplPT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCx0aXRsZTp0aGlzLmxhYmVsLGhyZWY6XCJqYXZhc2NyaXB0OnZvaWQoJ1wiKyh0aGlzLmxhYmVsfHxcIlwiKS5yZXBsYWNlKFwiJ1wiKStcIicpXCIsaG92ZXJGbjphLl8uaXRlbU92ZXJGbixtb3ZlT3V0Rm46YS5fLml0ZW1PdXRGbixjbGlja0ZuOmEuXy5pdGVtQ2xpY2tGbixpbmRleDpiLGljb25TdHlsZTpDS0VESVRPUi5za2luLmdldEljb25TdHlsZShnLFwicnRsXCI9PXRoaXMuZWRpdG9yLmxhbmcuZGlyLGc9PXRoaXMuaWNvbj9udWxsOnRoaXMuaWNvbix0aGlzLmljb25PZmZzZXQpLGFycm93SHRtbDpmP24ub3V0cHV0KHtsYWJlbDpkfSk6XCJcIixyb2xlOnRoaXMucm9sZT90aGlzLnJvbGU6XCJtZW51aXRlbVwiLGFyaWFDaGVja2VkOmx9O1xucC5vdXRwdXQoYSxjKX19fSl9KSgpO0NLRURJVE9SLmNvbmZpZy5tZW51X2dyb3Vwcz1cImNsaXBib2FyZCxmb3JtLHRhYmxlY2VsbCx0YWJsZWNlbGxwcm9wZXJ0aWVzLHRhYmxlcm93LHRhYmxlY29sdW1uLHRhYmxlLGFuY2hvcixsaW5rLGltYWdlLGZsYXNoLGNoZWNrYm94LHJhZGlvLHRleHRmaWVsZCxoaWRkZW5maWVsZCxpbWFnZWJ1dHRvbixidXR0b24sc2VsZWN0LHRleHRhcmVhLGRpdlwiO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiY29udGV4dG1lbnVcIix7cmVxdWlyZXM6XCJtZW51XCIsb25Mb2FkOmZ1bmN0aW9uKCl7Q0tFRElUT1IucGx1Z2lucy5jb250ZXh0TWVudT1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7YmFzZTpDS0VESVRPUi5tZW51LCQ6ZnVuY3Rpb24oYSl7dGhpcy5iYXNlLmNhbGwodGhpcyxhLHtwYW5lbDp7Y2xhc3NOYW1lOlwiY2tlX21lbnVfcGFuZWxcIixhdHRyaWJ1dGVzOntcImFyaWEtbGFiZWxcIjphLmxhbmcuY29udGV4dG1lbnUub3B0aW9uc319fSl9LHByb3RvOnthZGRUYXJnZXQ6ZnVuY3Rpb24oYSxlKXthLm9uKFwiY29udGV4dG1lbnVcIixmdW5jdGlvbihhKXthPWEuZGF0YTt2YXIgYz1DS0VESVRPUi5lbnYud2Via2l0P2Y6Q0tFRElUT1IuZW52Lm1hYz9hLiQubWV0YUtleTphLiQuY3RybEtleTtpZighZXx8IWMpe2EucHJldmVudERlZmF1bHQoKTtpZihDS0VESVRPUi5lbnYubWFjJiZDS0VESVRPUi5lbnYud2Via2l0KXt2YXIgYz10aGlzLmVkaXRvcixcbmI9KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoYS5nZXRUYXJnZXQoKSxjLmVkaXRhYmxlKCkpKS5jb250YWlucyhmdW5jdGlvbihhKXtyZXR1cm4gYS5oYXNBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIil9LCEwKTtiJiZcImZhbHNlXCI9PWIuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpJiZjLmdldFNlbGVjdGlvbigpLmZha2UoYil9dmFyIGI9YS5nZXRUYXJnZXQoKS5nZXREb2N1bWVudCgpLGQ9YS5nZXRUYXJnZXQoKS5nZXREb2N1bWVudCgpLmdldERvY3VtZW50RWxlbWVudCgpLGM9IWIuZXF1YWxzKENLRURJVE9SLmRvY3VtZW50KSxiPWIuZ2V0V2luZG93KCkuZ2V0U2Nyb2xsUG9zaXRpb24oKSxnPWM/YS4kLmNsaWVudFg6YS4kLnBhZ2VYfHxiLngrYS4kLmNsaWVudFgsaD1jP2EuJC5jbGllbnRZOmEuJC5wYWdlWXx8Yi55K2EuJC5jbGllbnRZO0NLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLm9wZW4oZCxudWxsLGcsaCl9LENLRURJVE9SLmVudi5pZT9cbjIwMDowLHRoaXMpfX0sdGhpcyk7aWYoQ0tFRElUT1IuZW52LndlYmtpdCl7dmFyIGYsZD1mdW5jdGlvbigpe2Y9MH07YS5vbihcImtleWRvd25cIixmdW5jdGlvbihhKXtmPUNLRURJVE9SLmVudi5tYWM/YS5kYXRhLiQubWV0YUtleTphLmRhdGEuJC5jdHJsS2V5fSk7YS5vbihcImtleXVwXCIsZCk7YS5vbihcImNvbnRleHRtZW51XCIsZCl9fSxvcGVuOmZ1bmN0aW9uKGEsZSxmLGQpe3RoaXMuZWRpdG9yLmZvY3VzKCk7YT1hfHxDS0VESVRPUi5kb2N1bWVudC5nZXREb2N1bWVudEVsZW1lbnQoKTt0aGlzLmVkaXRvci5zZWxlY3Rpb25DaGFuZ2UoMSk7dGhpcy5zaG93KGEsZSxmLGQpfX19KX0sYmVmb3JlSW5pdDpmdW5jdGlvbihhKXt2YXIgZT1hLmNvbnRleHRNZW51PW5ldyBDS0VESVRPUi5wbHVnaW5zLmNvbnRleHRNZW51KGEpO2Eub24oXCJjb250ZW50RG9tXCIsZnVuY3Rpb24oKXtlLmFkZFRhcmdldChhLmVkaXRhYmxlKCksITEhPT1hLmNvbmZpZy5icm93c2VyQ29udGV4dE1lbnVPbkN0cmwpfSk7XG5hLmFkZENvbW1hbmQoXCJjb250ZXh0TWVudVwiLHtleGVjOmZ1bmN0aW9uKCl7YS5jb250ZXh0TWVudS5vcGVuKGEuZG9jdW1lbnQuZ2V0Qm9keSgpKX19KTthLnNldEtleXN0cm9rZShDS0VESVRPUi5TSElGVCsxMjEsXCJjb250ZXh0TWVudVwiKTthLnNldEtleXN0cm9rZShDS0VESVRPUi5DVFJMK0NLRURJVE9SLlNISUZUKzEyMSxcImNvbnRleHRNZW51XCIpfX0pOyhmdW5jdGlvbigpe0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiZGl2XCIse3JlcXVpcmVzOlwiZGlhbG9nXCIsaW5pdDpmdW5jdGlvbihhKXtpZighYS5ibG9ja2xlc3Mpe3ZhciBjPWEubGFuZy5kaXYsYj1cImRpdigqKVwiO0NLRURJVE9SLmRpYWxvZy5pc1RhYkVuYWJsZWQoYSxcImVkaXRkaXZcIixcImFkdmFuY2VkXCIpJiYoYis9XCI7ZGl2W2RpcixpZCxsYW5nLHRpdGxlXXsqfVwiKTthLmFkZENvbW1hbmQoXCJjcmVhdGVkaXZcIixuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcImNyZWF0ZWRpdlwiLHthbGxvd2VkQ29udGVudDpiLHJlcXVpcmVkQ29udGVudDpcImRpdlwiLGNvbnRleHRTZW5zaXRpdmU6ITAscmVmcmVzaDpmdW5jdGlvbihhLGMpe3RoaXMuc2V0U3RhdGUoXCJkaXZcImluKGEuY29uZmlnLmRpdl93cmFwVGFibGU/Yy5yb290OmMuYmxvY2tMaW1pdCkuZ2V0RHRkKCk/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKX19KSk7YS5hZGRDb21tYW5kKFwiZWRpdGRpdlwiLFxubmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJlZGl0ZGl2XCIse3JlcXVpcmVkQ29udGVudDpcImRpdlwifSkpO2EuYWRkQ29tbWFuZChcInJlbW92ZWRpdlwiLHtyZXF1aXJlZENvbnRlbnQ6XCJkaXZcIixleGVjOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGMoYil7KGI9Q0tFRElUT1IucGx1Z2lucy5kaXYuZ2V0U3Vycm91bmREaXYoYSxiKSkmJiFiLmRhdGEoXCJja2UtZGl2LWFkZGVkXCIpJiYoZi5wdXNoKGIpLGIuZGF0YShcImNrZS1kaXYtYWRkZWRcIikpfWZvcih2YXIgYj1hLmdldFNlbGVjdGlvbigpLGc9YiYmYi5nZXRSYW5nZXMoKSxlLGg9Yi5jcmVhdGVCb29rbWFya3MoKSxmPVtdLGQ9MDtkPGcubGVuZ3RoO2QrKyllPWdbZF0sZS5jb2xsYXBzZWQ/YyhiLmdldFN0YXJ0RWxlbWVudCgpKTooZT1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihlKSxlLmV2YWx1YXRvcj1jLGUubGFzdEZvcndhcmQoKSk7Zm9yKGQ9MDtkPGYubGVuZ3RoO2QrKylmW2RdLnJlbW92ZSghMCk7Yi5zZWxlY3RCb29rbWFya3MoaCl9fSk7XG5hLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJDcmVhdGVEaXZcIix7bGFiZWw6Yy50b29sYmFyLGNvbW1hbmQ6XCJjcmVhdGVkaXZcIix0b29sYmFyOlwiYmxvY2tzLDUwXCJ9KTthLmFkZE1lbnVJdGVtcyYmKGEuYWRkTWVudUl0ZW1zKHtlZGl0ZGl2OntsYWJlbDpjLmVkaXQsY29tbWFuZDpcImVkaXRkaXZcIixncm91cDpcImRpdlwiLG9yZGVyOjF9LHJlbW92ZWRpdjp7bGFiZWw6Yy5yZW1vdmUsY29tbWFuZDpcInJlbW92ZWRpdlwiLGdyb3VwOlwiZGl2XCIsb3JkZXI6NX19KSxhLmNvbnRleHRNZW51JiZhLmNvbnRleHRNZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uKGIpe3JldHVybiFifHxiLmlzUmVhZE9ubHkoKT9udWxsOkNLRURJVE9SLnBsdWdpbnMuZGl2LmdldFN1cnJvdW5kRGl2KGEpP3tlZGl0ZGl2OkNLRURJVE9SLlRSSVNUQVRFX09GRixyZW1vdmVkaXY6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfTpudWxsfSkpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJjcmVhdGVkaXZcIix0aGlzLnBhdGgrXG5cImRpYWxvZ3MvZGl2LmpzXCIpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJlZGl0ZGl2XCIsdGhpcy5wYXRoK1wiZGlhbG9ncy9kaXYuanNcIil9fX0pO0NLRURJVE9SLnBsdWdpbnMuZGl2PXtnZXRTdXJyb3VuZERpdjpmdW5jdGlvbihhLGMpe3ZhciBiPWEuZWxlbWVudFBhdGgoYyk7cmV0dXJuIGEuZWxlbWVudFBhdGgoYi5ibG9ja0xpbWl0KS5jb250YWlucyhmdW5jdGlvbihhKXtyZXR1cm4gYS5pcyhcImRpdlwiKSYmIWEuaXNSZWFkT25seSgpfSwxKX19fSkoKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcInJlc2l6ZVwiLHtpbml0OmZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGYoZCl7dmFyIGU9Yy53aWR0aCxtPWMuaGVpZ2h0LGY9ZSsoZC5kYXRhLiQuc2NyZWVuWC1uLngpKihcInJ0bFwiPT1nPy0xOjEpO2Q9bSsoZC5kYXRhLiQuc2NyZWVuWS1uLnkpO2gmJihlPU1hdGgubWF4KGEucmVzaXplX21pbldpZHRoLE1hdGgubWluKGYsYS5yZXNpemVfbWF4V2lkdGgpKSk7cCYmKG09TWF0aC5tYXgoYS5yZXNpemVfbWluSGVpZ2h0LE1hdGgubWluKGQsYS5yZXNpemVfbWF4SGVpZ2h0KSkpO2IucmVzaXplKGg/ZTpudWxsLG0pfWZ1bmN0aW9uIGsoKXtDS0VESVRPUi5kb2N1bWVudC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGYpO0NLRURJVE9SLmRvY3VtZW50LnJlbW92ZUxpc3RlbmVyKFwibW91c2V1cFwiLGspO2IuZG9jdW1lbnQmJihiLmRvY3VtZW50LnJlbW92ZUxpc3RlbmVyKFwibW91c2Vtb3ZlXCIsZiksYi5kb2N1bWVudC5yZW1vdmVMaXN0ZW5lcihcIm1vdXNldXBcIixcbmspKX12YXIgYT1iLmNvbmZpZyxyPWIudWkuc3BhY2VJZChcInJlc2l6ZXJcIiksZz1iLmVsZW1lbnQ/Yi5lbGVtZW50LmdldERpcmVjdGlvbigxKTpcImx0clwiOyFhLnJlc2l6ZV9kaXImJihhLnJlc2l6ZV9kaXI9XCJ2ZXJ0aWNhbFwiKTt2b2lkIDA9PT1hLnJlc2l6ZV9tYXhXaWR0aCYmKGEucmVzaXplX21heFdpZHRoPTNFMyk7dm9pZCAwPT09YS5yZXNpemVfbWF4SGVpZ2h0JiYoYS5yZXNpemVfbWF4SGVpZ2h0PTNFMyk7dm9pZCAwPT09YS5yZXNpemVfbWluV2lkdGgmJihhLnJlc2l6ZV9taW5XaWR0aD03NTApO3ZvaWQgMD09PWEucmVzaXplX21pbkhlaWdodCYmKGEucmVzaXplX21pbkhlaWdodD0yNTApO2lmKCExIT09YS5yZXNpemVfZW5hYmxlZCl7dmFyIGw9bnVsbCxuLGMsaD0oXCJib3RoXCI9PWEucmVzaXplX2Rpcnx8XCJob3Jpem9udGFsXCI9PWEucmVzaXplX2RpcikmJmEucmVzaXplX21pbldpZHRoIT1hLnJlc2l6ZV9tYXhXaWR0aCxwPShcImJvdGhcIj09YS5yZXNpemVfZGlyfHxcInZlcnRpY2FsXCI9PVxuYS5yZXNpemVfZGlyKSYmYS5yZXNpemVfbWluSGVpZ2h0IT1hLnJlc2l6ZV9tYXhIZWlnaHQscT1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbihkKXtsfHwobD1iLmdldFJlc2l6YWJsZSgpKTtjPXt3aWR0aDpsLiQub2Zmc2V0V2lkdGh8fDAsaGVpZ2h0OmwuJC5vZmZzZXRIZWlnaHR8fDB9O249e3g6ZC5zY3JlZW5YLHk6ZC5zY3JlZW5ZfTthLnJlc2l6ZV9taW5XaWR0aD5jLndpZHRoJiYoYS5yZXNpemVfbWluV2lkdGg9Yy53aWR0aCk7YS5yZXNpemVfbWluSGVpZ2h0PmMuaGVpZ2h0JiYoYS5yZXNpemVfbWluSGVpZ2h0PWMuaGVpZ2h0KTtDS0VESVRPUi5kb2N1bWVudC5vbihcIm1vdXNlbW92ZVwiLGYpO0NLRURJVE9SLmRvY3VtZW50Lm9uKFwibW91c2V1cFwiLGspO2IuZG9jdW1lbnQmJihiLmRvY3VtZW50Lm9uKFwibW91c2Vtb3ZlXCIsZiksYi5kb2N1bWVudC5vbihcIm1vdXNldXBcIixrKSk7ZC5wcmV2ZW50RGVmYXVsdCYmZC5wcmV2ZW50RGVmYXVsdCgpfSk7Yi5vbihcImRlc3Ryb3lcIixcbmZ1bmN0aW9uKCl7Q0tFRElUT1IudG9vbHMucmVtb3ZlRnVuY3Rpb24ocSl9KTtiLm9uKFwidWlTcGFjZVwiLGZ1bmN0aW9uKGEpe2lmKFwiYm90dG9tXCI9PWEuZGF0YS5zcGFjZSl7dmFyIGU9XCJcIjtoJiYhcCYmKGU9XCIgY2tlX3Jlc2l6ZXJfaG9yaXpvbnRhbFwiKTshaCYmcCYmKGU9XCIgY2tlX3Jlc2l6ZXJfdmVydGljYWxcIik7dmFyIGM9J1xceDNjc3BhbiBpZFxceDNkXCInK3IrJ1wiIGNsYXNzXFx4M2RcImNrZV9yZXNpemVyJytlK1wiIGNrZV9yZXNpemVyX1wiK2crJ1wiIHRpdGxlXFx4M2RcIicrQ0tFRElUT1IudG9vbHMuaHRtbEVuY29kZShiLmxhbmcuY29tbW9uLnJlc2l6ZSkrJ1wiIG9ubW91c2Vkb3duXFx4M2RcIkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbignK3ErJywgZXZlbnQpXCJcXHgzZScrKFwibHRyXCI9PWc/XCLil6JcIjpcIuKXo1wiKStcIlxceDNjL3NwYW5cXHgzZVwiO1wibHRyXCI9PWcmJlwibHRyXCI9PWU/YS5kYXRhLmh0bWwrPWM6YS5kYXRhLmh0bWw9YythLmRhdGEuaHRtbH19LGIsbnVsbCwxMDApO2Iub24oXCJtYXhpbWl6ZVwiLFxuZnVuY3Rpb24oYSl7Yi51aS5zcGFjZShcInJlc2l6ZXJcIilbYS5kYXRhPT1DS0VESVRPUi5UUklTVEFURV9PTj9cImhpZGVcIjpcInNob3dcIl0oKX0pfX19KTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBCKGEpe2Z1bmN0aW9uIGQoKXtmb3IodmFyIGI9ZygpLGU9Q0tFRElUT1IudG9vbHMuY2xvbmUoYS5jb25maWcudG9vbGJhckdyb3Vwcyl8fHEoYSksZj0wO2Y8ZS5sZW5ndGg7ZisrKXt2YXIgbD1lW2ZdO2lmKFwiL1wiIT1sKXtcInN0cmluZ1wiPT10eXBlb2YgbCYmKGw9ZVtmXT17bmFtZTpsfSk7dmFyIG0sZD1sLmdyb3VwcztpZihkKWZvcih2YXIgaD0wO2g8ZC5sZW5ndGg7aCsrKW09ZFtoXSwobT1iW21dKSYmYyhsLG0pOyhtPWJbbC5uYW1lXSkmJmMobCxtKX19cmV0dXJuIGV9ZnVuY3Rpb24gZygpe3ZhciBiPXt9LGMsZixlO2ZvcihjIGluIGEudWkuaXRlbXMpZj1hLnVpLml0ZW1zW2NdLGU9Zi50b29sYmFyfHxcIm90aGVyc1wiLGU9ZS5zcGxpdChcIixcIiksZj1lWzBdLGU9cGFyc2VJbnQoZVsxXXx8LTEsMTApLGJbZl18fChiW2ZdPVtdKSxiW2ZdLnB1c2goe25hbWU6YyxvcmRlcjplfSk7Zm9yKGYgaW4gYiliW2ZdPWJbZl0uc29ydChmdW5jdGlvbihiLFxuYSl7cmV0dXJuIGIub3JkZXI9PWEub3JkZXI/MDowPmEub3JkZXI/LTE6MD5iLm9yZGVyPzE6Yi5vcmRlcjxhLm9yZGVyPy0xOjF9KTtyZXR1cm4gYn1mdW5jdGlvbiBjKGMsZSl7aWYoZS5sZW5ndGgpe2MuaXRlbXM/Yy5pdGVtcy5wdXNoKGEudWkuY3JlYXRlKFwiLVwiKSk6Yy5pdGVtcz1bXTtmb3IodmFyIGY7Zj1lLnNoaWZ0KCk7KWY9XCJzdHJpbmdcIj09dHlwZW9mIGY/ZjpmLm5hbWUsYiYmLTEhPUNLRURJVE9SLnRvb2xzLmluZGV4T2YoYixmKXx8KGY9YS51aS5jcmVhdGUoZikpJiZhLmFkZEZlYXR1cmUoZikmJmMuaXRlbXMucHVzaChmKX19ZnVuY3Rpb24gaChiKXt2YXIgYT1bXSxlLGQsaDtmb3IoZT0wO2U8Yi5sZW5ndGg7KytlKWQ9YltlXSxoPXt9LFwiL1wiPT1kP2EucHVzaChkKTpDS0VESVRPUi50b29scy5pc0FycmF5KGQpPyhjKGgsQ0tFRElUT1IudG9vbHMuY2xvbmUoZCkpLGEucHVzaChoKSk6ZC5pdGVtcyYmKGMoaCxDS0VESVRPUi50b29scy5jbG9uZShkLml0ZW1zKSksXG5oLm5hbWU9ZC5uYW1lLGEucHVzaChoKSk7cmV0dXJuIGF9dmFyIGI9YS5jb25maWcucmVtb3ZlQnV0dG9ucyxiPWImJmIuc3BsaXQoXCIsXCIpLGU9YS5jb25maWcudG9vbGJhcjtcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9YS5jb25maWdbXCJ0b29sYmFyX1wiK2VdKTtyZXR1cm4gYS50b29sYmFyPWU/aChlKTpkKCl9ZnVuY3Rpb24gcShhKXtyZXR1cm4gYS5fLnRvb2xiYXJHcm91cHN8fChhLl8udG9vbGJhckdyb3Vwcz1be25hbWU6XCJkb2N1bWVudFwiLGdyb3VwczpbXCJtb2RlXCIsXCJkb2N1bWVudFwiLFwiZG9jdG9vbHNcIl19LHtuYW1lOlwiY2xpcGJvYXJkXCIsZ3JvdXBzOltcImNsaXBib2FyZFwiLFwidW5kb1wiXX0se25hbWU6XCJlZGl0aW5nXCIsZ3JvdXBzOltcImZpbmRcIixcInNlbGVjdGlvblwiLFwic3BlbGxjaGVja2VyXCJdfSx7bmFtZTpcImZvcm1zXCJ9LFwiL1wiLHtuYW1lOlwiYmFzaWNzdHlsZXNcIixncm91cHM6W1wiYmFzaWNzdHlsZXNcIixcImNsZWFudXBcIl19LHtuYW1lOlwicGFyYWdyYXBoXCIsZ3JvdXBzOltcImxpc3RcIixcblwiaW5kZW50XCIsXCJibG9ja3NcIixcImFsaWduXCIsXCJiaWRpXCJdfSx7bmFtZTpcImxpbmtzXCJ9LHtuYW1lOlwiaW5zZXJ0XCJ9LFwiL1wiLHtuYW1lOlwic3R5bGVzXCJ9LHtuYW1lOlwiY29sb3JzXCJ9LHtuYW1lOlwidG9vbHNcIn0se25hbWU6XCJvdGhlcnNcIn0se25hbWU6XCJhYm91dFwifV0pfXZhciB5PWZ1bmN0aW9uKCl7dGhpcy50b29sYmFycz1bXTt0aGlzLmZvY3VzQ29tbWFuZEV4ZWN1dGVkPSExfTt5LnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbigpe2Zvcih2YXIgYT0wLGQ7ZD10aGlzLnRvb2xiYXJzW2ErK107KWZvcih2YXIgZz0wLGM7Yz1kLml0ZW1zW2crK107KWlmKGMuZm9jdXMpe2MuZm9jdXMoKTtyZXR1cm59fTt2YXIgQz17bW9kZXM6e3d5c2l3eWc6MSxzb3VyY2U6MX0scmVhZE9ubHk6MSxleGVjOmZ1bmN0aW9uKGEpe2EudG9vbGJveCYmKGEudG9vbGJveC5mb2N1c0NvbW1hbmRFeGVjdXRlZD0hMCxDS0VESVRPUi5lbnYuaWV8fENLRURJVE9SLmVudi5haXI/c2V0VGltZW91dChmdW5jdGlvbigpe2EudG9vbGJveC5mb2N1cygpfSxcbjEwMCk6YS50b29sYm94LmZvY3VzKCkpfX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJ0b29sYmFyXCIse3JlcXVpcmVzOlwiYnV0dG9uXCIsaW5pdDpmdW5jdGlvbihhKXt2YXIgZCxnPWZ1bmN0aW9uKGMsaCl7dmFyIGIsZT1cInJ0bFwiPT1hLmxhbmcuZGlyLGs9YS5jb25maWcudG9vbGJhckdyb3VwQ3ljbGluZyxyPWU/Mzc6MzksZT1lPzM5OjM3LGs9dm9pZCAwPT09a3x8aztzd2l0Y2goaCl7Y2FzZSA5OmNhc2UgQ0tFRElUT1IuU0hJRlQrOTpmb3IoOyFifHwhYi5pdGVtcy5sZW5ndGg7KWlmKGI9OT09aD8oYj9iLm5leHQ6Yy50b29sYmFyLm5leHQpfHxhLnRvb2xib3gudG9vbGJhcnNbMF06KGI/Yi5wcmV2aW91czpjLnRvb2xiYXIucHJldmlvdXMpfHxhLnRvb2xib3gudG9vbGJhcnNbYS50b29sYm94LnRvb2xiYXJzLmxlbmd0aC0xXSxiLml0ZW1zLmxlbmd0aClmb3IoYz1iLml0ZW1zW2Q/Yi5pdGVtcy5sZW5ndGgtMTowXTtjJiYhYy5mb2N1czspKGM9ZD9jLnByZXZpb3VzOmMubmV4dCl8fFxuKGI9MCk7YyYmYy5mb2N1cygpO3JldHVybiExO2Nhc2UgcjpiPWM7ZG8gYj1iLm5leHQsIWImJmsmJihiPWMudG9vbGJhci5pdGVtc1swXSk7d2hpbGUoYiYmIWIuZm9jdXMpO2I/Yi5mb2N1cygpOmcoYyw5KTtyZXR1cm4hMTtjYXNlIDQwOnJldHVybiBjLmJ1dHRvbiYmYy5idXR0b24uaGFzQXJyb3c/KGEub25jZShcInBhbmVsU2hvd1wiLGZ1bmN0aW9uKGIpe2IuZGF0YS5fLnBhbmVsLl8uY3VycmVudEJsb2NrLm9uS2V5RG93big0MCl9KSxjLmV4ZWN1dGUoKSk6ZyhjLDQwPT1oP3I6ZSksITE7Y2FzZSBlOmNhc2UgMzg6Yj1jO2RvIGI9Yi5wcmV2aW91cywhYiYmayYmKGI9Yy50b29sYmFyLml0ZW1zW2MudG9vbGJhci5pdGVtcy5sZW5ndGgtMV0pO3doaWxlKGImJiFiLmZvY3VzKTtiP2IuZm9jdXMoKTooZD0xLGcoYyxDS0VESVRPUi5TSElGVCs5KSxkPTApO3JldHVybiExO2Nhc2UgMjc6cmV0dXJuIGEuZm9jdXMoKSwhMTtjYXNlIDEzOmNhc2UgMzI6cmV0dXJuIGMuZXhlY3V0ZSgpLFxuITF9cmV0dXJuITB9O2Eub24oXCJ1aVNwYWNlXCIsZnVuY3Rpb24oYyl7aWYoYy5kYXRhLnNwYWNlPT1hLmNvbmZpZy50b29sYmFyTG9jYXRpb24pe2MucmVtb3ZlTGlzdGVuZXIoKTthLnRvb2xib3g9bmV3IHk7dmFyIGQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCksYj1bJ1xceDNjc3BhbiBpZFxceDNkXCInLGQsJ1wiIGNsYXNzXFx4M2RcImNrZV92b2ljZV9sYWJlbFwiXFx4M2UnLGEubGFuZy50b29sYmFyLnRvb2xiYXJzLFwiXFx4M2Mvc3BhblxceDNlXCIsJ1xceDNjc3BhbiBpZFxceDNkXCInK2EudWkuc3BhY2VJZChcInRvb2xib3hcIikrJ1wiIGNsYXNzXFx4M2RcImNrZV90b29sYm94XCIgcm9sZVxceDNkXCJncm91cFwiIGFyaWEtbGFiZWxsZWRieVxceDNkXCInLGQsJ1wiIG9ubW91c2Vkb3duXFx4M2RcInJldHVybiBmYWxzZTtcIlxceDNlJ10sZD0hMSE9PWEuY29uZmlnLnRvb2xiYXJTdGFydHVwRXhwYW5kZWQsZSxrO2EuY29uZmlnLnRvb2xiYXJDYW5Db2xsYXBzZSYmYS5lbGVtZW50TW9kZSE9Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORSYmXG5iLnB1c2goJ1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfdG9vbGJveF9tYWluXCInKyhkP1wiXFx4M2VcIjonIHN0eWxlXFx4M2RcImRpc3BsYXk6bm9uZVwiXFx4M2UnKSk7Zm9yKHZhciByPWEudG9vbGJveC50b29sYmFycyxmPUIoYSksbD0wO2w8Zi5sZW5ndGg7bCsrKXt2YXIgbSxuPTAsdixwPWZbbF0sdztpZihwKWlmKGUmJihiLnB1c2goXCJcXHgzYy9zcGFuXFx4M2VcIiksaz1lPTApLFwiL1wiPT09cCliLnB1c2goJ1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfdG9vbGJhcl9icmVha1wiXFx4M2VcXHgzYy9zcGFuXFx4M2UnKTtlbHNle3c9cC5pdGVtc3x8cDtmb3IodmFyIHg9MDt4PHcubGVuZ3RoO3grKyl7dmFyIHQ9d1t4XSxxO2lmKHQpe3ZhciB6PWZ1bmN0aW9uKGMpe2M9Yy5yZW5kZXIoYSxiKTt1PW4uaXRlbXMucHVzaChjKS0xOzA8dSYmKGMucHJldmlvdXM9bi5pdGVtc1t1LTFdLGMucHJldmlvdXMubmV4dD1jKTtjLnRvb2xiYXI9bjtjLm9ua2V5PWc7Yy5vbmZvY3VzPWZ1bmN0aW9uKCl7YS50b29sYm94LmZvY3VzQ29tbWFuZEV4ZWN1dGVkfHxcbmEuZm9jdXMoKX19O2lmKHQudHlwZT09Q0tFRElUT1IuVUlfU0VQQVJBVE9SKWs9ZSYmdDtlbHNle3E9ITEhPT10LmNhbkdyb3VwO2lmKCFuKXttPUNLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpO249e2lkOm0saXRlbXM6W119O3Y9cC5uYW1lJiYoYS5sYW5nLnRvb2xiYXIudG9vbGJhckdyb3Vwc1twLm5hbWVdfHxwLm5hbWUpO2IucHVzaCgnXFx4M2NzcGFuIGlkXFx4M2RcIicsbSwnXCIgY2xhc3NcXHgzZFwiY2tlX3Rvb2xiYXJcIicsdj8nIGFyaWEtbGFiZWxsZWRieVxceDNkXCInK20rJ19sYWJlbFwiJzpcIlwiLCcgcm9sZVxceDNkXCJ0b29sYmFyXCJcXHgzZScpO3YmJmIucHVzaCgnXFx4M2NzcGFuIGlkXFx4M2RcIicsbSwnX2xhYmVsXCIgY2xhc3NcXHgzZFwiY2tlX3ZvaWNlX2xhYmVsXCJcXHgzZScsdixcIlxceDNjL3NwYW5cXHgzZVwiKTtiLnB1c2goJ1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfdG9vbGJhcl9zdGFydFwiXFx4M2VcXHgzYy9zcGFuXFx4M2UnKTt2YXIgdT1yLnB1c2gobiktMTswPHUmJihuLnByZXZpb3VzPXJbdS1cbjFdLG4ucHJldmlvdXMubmV4dD1uKX1xP2V8fChiLnB1c2goJ1xceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfdG9vbGdyb3VwXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIlxceDNlJyksZT0xKTplJiYoYi5wdXNoKFwiXFx4M2Mvc3BhblxceDNlXCIpLGU9MCk7ayYmKHooayksaz0wKTt6KHQpfX19ZSYmKGIucHVzaChcIlxceDNjL3NwYW5cXHgzZVwiKSxrPWU9MCk7biYmYi5wdXNoKCdcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX3Rvb2xiYXJfZW5kXCJcXHgzZVxceDNjL3NwYW5cXHgzZVxceDNjL3NwYW5cXHgzZScpfX1hLmNvbmZpZy50b29sYmFyQ2FuQ29sbGFwc2UmJmIucHVzaChcIlxceDNjL3NwYW5cXHgzZVwiKTtpZihhLmNvbmZpZy50b29sYmFyQ2FuQ29sbGFwc2UmJmEuZWxlbWVudE1vZGUhPUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkUpe3ZhciBBPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKCl7YS5leGVjQ29tbWFuZChcInRvb2xiYXJDb2xsYXBzZVwiKX0pO2Eub24oXCJkZXN0cm95XCIsZnVuY3Rpb24oKXtDS0VESVRPUi50b29scy5yZW1vdmVGdW5jdGlvbihBKX0pO1xuYS5hZGRDb21tYW5kKFwidG9vbGJhckNvbGxhcHNlXCIse3JlYWRPbmx5OjEsZXhlYzpmdW5jdGlvbihiKXt2YXIgYT1iLnVpLnNwYWNlKFwidG9vbGJhcl9jb2xsYXBzZXJcIiksYz1hLmdldFByZXZpb3VzKCksZT1iLnVpLnNwYWNlKFwiY29udGVudHNcIiksZD1jLmdldFBhcmVudCgpLGY9cGFyc2VJbnQoZS4kLnN0eWxlLmhlaWdodCwxMCksaD1kLiQub2Zmc2V0SGVpZ2h0LGc9YS5oYXNDbGFzcyhcImNrZV90b29sYm94X2NvbGxhcHNlcl9taW5cIik7Zz8oYy5zaG93KCksYS5yZW1vdmVDbGFzcyhcImNrZV90b29sYm94X2NvbGxhcHNlcl9taW5cIiksYS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLGIubGFuZy50b29sYmFyLnRvb2xiYXJDb2xsYXBzZSkpOihjLmhpZGUoKSxhLmFkZENsYXNzKFwiY2tlX3Rvb2xib3hfY29sbGFwc2VyX21pblwiKSxhLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsYi5sYW5nLnRvb2xiYXIudG9vbGJhckV4cGFuZCkpO2EuZ2V0Rmlyc3QoKS5zZXRUZXh0KGc/XCLilrJcIjpcIuKXgFwiKTtlLnNldFN0eWxlKFwiaGVpZ2h0XCIsXG5mLShkLiQub2Zmc2V0SGVpZ2h0LWgpK1wicHhcIik7Yi5maXJlKFwicmVzaXplXCIse291dGVySGVpZ2h0OmIuY29udGFpbmVyLiQub2Zmc2V0SGVpZ2h0LGNvbnRlbnRzSGVpZ2h0OmUuJC5vZmZzZXRIZWlnaHQsb3V0ZXJXaWR0aDpiLmNvbnRhaW5lci4kLm9mZnNldFdpZHRofSl9LG1vZGVzOnt3eXNpd3lnOjEsc291cmNlOjF9fSk7YS5zZXRLZXlzdHJva2UoQ0tFRElUT1IuQUxUKyhDS0VESVRPUi5lbnYuaWV8fENLRURJVE9SLmVudi53ZWJraXQ/MTg5OjEwOSksXCJ0b29sYmFyQ29sbGFwc2VcIik7Yi5wdXNoKCdcXHgzY2EgdGl0bGVcXHgzZFwiJysoZD9hLmxhbmcudG9vbGJhci50b29sYmFyQ29sbGFwc2U6YS5sYW5nLnRvb2xiYXIudG9vbGJhckV4cGFuZCkrJ1wiIGlkXFx4M2RcIicrYS51aS5zcGFjZUlkKFwidG9vbGJhcl9jb2xsYXBzZXJcIikrJ1wiIHRhYkluZGV4XFx4M2RcIi0xXCIgY2xhc3NcXHgzZFwiY2tlX3Rvb2xib3hfY29sbGFwc2VyJyk7ZHx8Yi5wdXNoKFwiIGNrZV90b29sYm94X2NvbGxhcHNlcl9taW5cIik7XG5iLnB1c2goJ1wiIG9uY2xpY2tcXHgzZFwiQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKCcrQSsnKVwiXFx4M2UnLCdcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX2Fycm93XCJcXHgzZVxceDI2Izk2NTA7XFx4M2Mvc3BhblxceDNlJyxcIlxceDNjL2FcXHgzZVwiKX1iLnB1c2goXCJcXHgzYy9zcGFuXFx4M2VcIik7Yy5kYXRhLmh0bWwrPWIuam9pbihcIlwiKX19KTthLm9uKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7aWYodGhpcy50b29sYm94KXt2YXIgYSxkPTAsYixlLGc7Zm9yKGE9dGhpcy50b29sYm94LnRvb2xiYXJzO2Q8YS5sZW5ndGg7ZCsrKWZvcihlPWFbZF0uaXRlbXMsYj0wO2I8ZS5sZW5ndGg7YisrKWc9ZVtiXSxnLmNsaWNrRm4mJkNLRURJVE9SLnRvb2xzLnJlbW92ZUZ1bmN0aW9uKGcuY2xpY2tGbiksZy5rZXlEb3duRm4mJkNLRURJVE9SLnRvb2xzLnJlbW92ZUZ1bmN0aW9uKGcua2V5RG93bkZuKX19KTthLm9uKFwidWlSZWFkeVwiLGZ1bmN0aW9uKCl7dmFyIGM9YS51aS5zcGFjZShcInRvb2xib3hcIik7YyYmYS5mb2N1c01hbmFnZXIuYWRkKGMsXG4xKX0pO2EuYWRkQ29tbWFuZChcInRvb2xiYXJGb2N1c1wiLEMpO2Euc2V0S2V5c3Ryb2tlKENLRURJVE9SLkFMVCsxMjEsXCJ0b29sYmFyRm9jdXNcIik7YS51aS5hZGQoXCItXCIsQ0tFRElUT1IuVUlfU0VQQVJBVE9SLHt9KTthLnVpLmFkZEhhbmRsZXIoQ0tFRElUT1IuVUlfU0VQQVJBVE9SLHtjcmVhdGU6ZnVuY3Rpb24oKXtyZXR1cm57cmVuZGVyOmZ1bmN0aW9uKGEsZCl7ZC5wdXNoKCdcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX3Rvb2xiYXJfc2VwYXJhdG9yXCIgcm9sZVxceDNkXCJzZXBhcmF0b3JcIlxceDNlXFx4M2Mvc3BhblxceDNlJyk7cmV0dXJue319fX19KX19KTtDS0VESVRPUi51aS5wcm90b3R5cGUuYWRkVG9vbGJhckdyb3VwPWZ1bmN0aW9uKGEsZCxnKXt2YXIgYz1xKHRoaXMuZWRpdG9yKSxoPTA9PT1kLGI9e25hbWU6YX07aWYoZyl7aWYoZz1DS0VESVRPUi50b29scy5zZWFyY2goYyxmdW5jdGlvbihhKXtyZXR1cm4gYS5uYW1lPT1nfSkpeyFnLmdyb3VwcyYmKGcuZ3JvdXBzPVtdKTtpZihkJiZcbihkPUNLRURJVE9SLnRvb2xzLmluZGV4T2YoZy5ncm91cHMsZCksMDw9ZCkpe2cuZ3JvdXBzLnNwbGljZShkKzEsMCxhKTtyZXR1cm59aD9nLmdyb3Vwcy5zcGxpY2UoMCwwLGEpOmcuZ3JvdXBzLnB1c2goYSk7cmV0dXJufWQ9bnVsbH1kJiYoZD1DS0VESVRPUi50b29scy5pbmRleE9mKGMsZnVuY3Rpb24oYSl7cmV0dXJuIGEubmFtZT09ZH0pKTtoP2Muc3BsaWNlKDAsMCxhKTpcIm51bWJlclwiPT10eXBlb2YgZD9jLnNwbGljZShkKzEsMCxiKTpjLnB1c2goYSl9fSkoKTtDS0VESVRPUi5VSV9TRVBBUkFUT1I9XCJzZXBhcmF0b3JcIjtDS0VESVRPUi5jb25maWcudG9vbGJhckxvY2F0aW9uPVwidG9wXCI7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcShhLGUpe2Z1bmN0aW9uIGwoYyl7Yz1rLmxpc3RbY107dmFyIGQ7Yy5lcXVhbHMoYS5lZGl0YWJsZSgpKXx8XCJ0cnVlXCI9PWMuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpPyhkPWEuY3JlYXRlUmFuZ2UoKSxkLnNlbGVjdE5vZGVDb250ZW50cyhjKSxkPWQuc2VsZWN0KCkpOihkPWEuZ2V0U2VsZWN0aW9uKCksZC5zZWxlY3RFbGVtZW50KGMpKTtDS0VESVRPUi5lbnYuaWUmJmEuZmlyZShcInNlbGVjdGlvbkNoYW5nZVwiLHtzZWxlY3Rpb246ZCxwYXRoOm5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoYyl9KTthLmZvY3VzKCl9ZnVuY3Rpb24gbSgpe24mJm4uc2V0SHRtbCgnXFx4M2NzcGFuIGNsYXNzXFx4M2RcImNrZV9wYXRoX2VtcHR5XCJcXHgzZVxceDI2bmJzcDtcXHgzYy9zcGFuXFx4M2UnKTtkZWxldGUgay5saXN0fXZhciBwPWEudWkuc3BhY2VJZChcInBhdGhcIiksbixrPWEuXy5lbGVtZW50c1BhdGgscT1rLmlkQmFzZTtlLmh0bWwrPSdcXHgzY3NwYW4gaWRcXHgzZFwiJytcbnArJ19sYWJlbFwiIGNsYXNzXFx4M2RcImNrZV92b2ljZV9sYWJlbFwiXFx4M2UnK2EubGFuZy5lbGVtZW50c3BhdGguZWxlTGFiZWwrJ1xceDNjL3NwYW5cXHgzZVxceDNjc3BhbiBpZFxceDNkXCInK3ArJ1wiIGNsYXNzXFx4M2RcImNrZV9wYXRoXCIgcm9sZVxceDNkXCJncm91cFwiIGFyaWEtbGFiZWxsZWRieVxceDNkXCInK3ArJ19sYWJlbFwiXFx4M2VcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX3BhdGhfZW1wdHlcIlxceDNlXFx4MjZuYnNwO1xceDNjL3NwYW5cXHgzZVxceDNjL3NwYW5cXHgzZSc7YS5vbihcInVpUmVhZHlcIixmdW5jdGlvbigpe3ZhciBjPWEudWkuc3BhY2UoXCJwYXRoXCIpO2MmJmEuZm9jdXNNYW5hZ2VyLmFkZChjLDEpfSk7ay5vbkNsaWNrPWw7dmFyIHY9Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24obCksdz1DS0VESVRPUi50b29scy5hZGRGdW5jdGlvbihmdW5jdGlvbihjLGQpe3ZhciBnPWsuaWRCYXNlLGI7ZD1uZXcgQ0tFRElUT1IuZG9tLmV2ZW50KGQpO2I9XCJydGxcIj09YS5sYW5nLmRpcjtzd2l0Y2goZC5nZXRLZXlzdHJva2UoKSl7Y2FzZSBiP1xuMzk6Mzc6Y2FzZSA5OnJldHVybihiPUNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQoZysoYysxKSkpfHwoYj1DS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKGcrXCIwXCIpKSxiLmZvY3VzKCksITE7Y2FzZSBiPzM3OjM5OmNhc2UgQ0tFRElUT1IuU0hJRlQrOTpyZXR1cm4oYj1DS0VESVRPUi5kb2N1bWVudC5nZXRCeUlkKGcrKGMtMSkpKXx8KGI9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChnKyhrLmxpc3QubGVuZ3RoLTEpKSksYi5mb2N1cygpLCExO2Nhc2UgMjc6cmV0dXJuIGEuZm9jdXMoKSwhMTtjYXNlIDEzOmNhc2UgMzI6cmV0dXJuIGwoYyksITF9cmV0dXJuITB9KTthLm9uKFwic2VsZWN0aW9uQ2hhbmdlXCIsZnVuY3Rpb24oKXtmb3IodmFyIGM9W10sZD1rLmxpc3Q9W10sZz1bXSxiPWsuZmlsdGVycyxlPSEwLGw9YS5lbGVtZW50UGF0aCgpLmVsZW1lbnRzLGYsdT1sLmxlbmd0aDt1LS07KXt2YXIgaD1sW3VdLHI9MDtmPWguZGF0YShcImNrZS1kaXNwbGF5LW5hbWVcIik/aC5kYXRhKFwiY2tlLWRpc3BsYXktbmFtZVwiKTpcbmguZGF0YShcImNrZS1yZWFsLWVsZW1lbnQtdHlwZVwiKT9oLmRhdGEoXCJja2UtcmVhbC1lbGVtZW50LXR5cGVcIik6aC5nZXROYW1lKCk7KGU9aC5oYXNBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIik/XCJ0cnVlXCI9PWguZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpOmUpfHxoLmhhc0F0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKXx8KHI9MSk7Zm9yKHZhciB0PTA7dDxiLmxlbmd0aDt0Kyspe3ZhciBtPWJbdF0oaCxmKTtpZighMT09PW0pe3I9MTticmVha31mPW18fGZ9cnx8KGQudW5zaGlmdChoKSxnLnVuc2hpZnQoZikpfWQ9ZC5sZW5ndGg7Zm9yKGI9MDtiPGQ7YisrKWY9Z1tiXSxlPWEubGFuZy5lbGVtZW50c3BhdGguZWxlVGl0bGUucmVwbGFjZSgvJTEvLGYpLGY9eC5vdXRwdXQoe2lkOnErYixsYWJlbDplLHRleHQ6Zixqc1RpdGxlOlwiamF2YXNjcmlwdDp2b2lkKCdcIitmK1wiJylcIixpbmRleDpiLGtleURvd25Gbjp3LGNsaWNrRm46dn0pLGMudW5zaGlmdChmKTtufHxcbihuPUNLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQocCkpO2c9bjtnLnNldEh0bWwoYy5qb2luKFwiXCIpKydcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX3BhdGhfZW1wdHlcIlxceDNlXFx4MjZuYnNwO1xceDNjL3NwYW5cXHgzZScpO2EuZmlyZShcImVsZW1lbnRzUGF0aFVwZGF0ZVwiLHtzcGFjZTpnfSl9KTthLm9uKFwicmVhZE9ubHlcIixtKTthLm9uKFwiY29udGVudERvbVVubG9hZFwiLG0pO2EuYWRkQ29tbWFuZChcImVsZW1lbnRzUGF0aEZvY3VzXCIseS50b29sYmFyRm9jdXMpO2Euc2V0S2V5c3Ryb2tlKENLRURJVE9SLkFMVCsxMjIsXCJlbGVtZW50c1BhdGhGb2N1c1wiKX12YXIgeT17dG9vbGJhckZvY3VzOntlZGl0b3JGb2N1czohMSxyZWFkT25seToxLGV4ZWM6ZnVuY3Rpb24oYSl7KGE9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChhLl8uZWxlbWVudHNQYXRoLmlkQmFzZStcIjBcIikpJiZhLmZvY3VzKENLRURJVE9SLmVudi5pZXx8Q0tFRElUT1IuZW52LmFpcil9fX0sZT1cIlwiO0NLRURJVE9SLmVudi5nZWNrbyYmXG5DS0VESVRPUi5lbnYubWFjJiYoZSs9JyBvbmtleXByZXNzXFx4M2RcInJldHVybiBmYWxzZTtcIicpO0NLRURJVE9SLmVudi5nZWNrbyYmKGUrPScgb25ibHVyXFx4M2RcInRoaXMuc3R5bGUuY3NzVGV4dCBcXHgzZCB0aGlzLnN0eWxlLmNzc1RleHQ7XCInKTt2YXIgeD1DS0VESVRPUi5hZGRUZW1wbGF0ZShcInBhdGhJdGVtXCIsJ1xceDNjYSBpZFxceDNkXCJ7aWR9XCIgaHJlZlxceDNkXCJ7anNUaXRsZX1cIiB0YWJpbmRleFxceDNkXCItMVwiIGNsYXNzXFx4M2RcImNrZV9wYXRoX2l0ZW1cIiB0aXRsZVxceDNkXCJ7bGFiZWx9XCInK2UrJyBoaWRlZm9jdXNcXHgzZFwidHJ1ZVwiICBvbmtleWRvd25cXHgzZFwicmV0dXJuIENLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbih7a2V5RG93bkZufSx7aW5kZXh9LCBldmVudCApO1wiIG9uY2xpY2tcXHgzZFwiQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKHtjbGlja0ZufSx7aW5kZXh9KTsgcmV0dXJuIGZhbHNlO1wiIHJvbGVcXHgzZFwiYnV0dG9uXCIgYXJpYS1sYWJlbFxceDNkXCJ7bGFiZWx9XCJcXHgzZXt0ZXh0fVxceDNjL2FcXHgzZScpO1xuQ0tFRElUT1IucGx1Z2lucy5hZGQoXCJlbGVtZW50c3BhdGhcIix7aW5pdDpmdW5jdGlvbihhKXthLl8uZWxlbWVudHNQYXRoPXtpZEJhc2U6XCJja2VfZWxlbWVudHNwYXRoX1wiK0NLRURJVE9SLnRvb2xzLmdldE5leHROdW1iZXIoKStcIl9cIixmaWx0ZXJzOltdfTthLm9uKFwidWlTcGFjZVwiLGZ1bmN0aW9uKGUpe1wiYm90dG9tXCI9PWUuZGF0YS5zcGFjZSYmcShhLGUuZGF0YSl9KX19KX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcShiLGQsYSl7YT1iLmNvbmZpZy5mb3JjZUVudGVyTW9kZXx8YTtcInd5c2l3eWdcIj09Yi5tb2RlJiYoZHx8KGQ9Yi5hY3RpdmVFbnRlck1vZGUpLGIuZWxlbWVudFBhdGgoKS5pc0NvbnRleHRGb3IoXCJwXCIpfHwoZD1DS0VESVRPUi5FTlRFUl9CUixhPTEpLGIuZmlyZShcInNhdmVTbmFwc2hvdFwiKSxkPT1DS0VESVRPUi5FTlRFUl9CUj90KGIsZCxudWxsLGEpOnUoYixkLG51bGwsYSksYi5maXJlKFwic2F2ZVNuYXBzaG90XCIpKX1mdW5jdGlvbiB2KGIpe2I9Yi5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZXMoITApO2Zvcih2YXIgZD1iLmxlbmd0aC0xOzA8ZDtkLS0pYltkXS5kZWxldGVDb250ZW50cygpO3JldHVybiBiWzBdfWZ1bmN0aW9uIHkoYil7dmFyIGQ9Yi5zdGFydENvbnRhaW5lci5nZXRBc2NlbmRhbnQoZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcInRydWVcIj09YS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIil9LFxuITApO2lmKGIucm9vdC5lcXVhbHMoZCkpcmV0dXJuIGI7ZD1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGQpO2QubW92ZVRvUmFuZ2UoYik7cmV0dXJuIGR9Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJlbnRlcmtleVwiLHtpbml0OmZ1bmN0aW9uKGIpe2IuYWRkQ29tbWFuZChcImVudGVyXCIse21vZGVzOnt3eXNpd3lnOjF9LGVkaXRvckZvY3VzOiExLGV4ZWM6ZnVuY3Rpb24oYil7cShiKX19KTtiLmFkZENvbW1hbmQoXCJzaGlmdEVudGVyXCIse21vZGVzOnt3eXNpd3lnOjF9LGVkaXRvckZvY3VzOiExLGV4ZWM6ZnVuY3Rpb24oYil7cShiLGIuYWN0aXZlU2hpZnRFbnRlck1vZGUsMSl9fSk7Yi5zZXRLZXlzdHJva2UoW1sxMyxcImVudGVyXCJdLFtDS0VESVRPUi5TSElGVCsxMyxcInNoaWZ0RW50ZXJcIl1dKX19KTt2YXIgej1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCksQT1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKCk7Q0tFRElUT1IucGx1Z2lucy5lbnRlcmtleT17ZW50ZXJCbG9jazpmdW5jdGlvbihiLFxuZCxhLGgpe2lmKGE9YXx8dihiKSl7YT15KGEpO3ZhciBmPWEuZG9jdW1lbnQsaz1hLmNoZWNrU3RhcnRPZkJsb2NrKCksbT1hLmNoZWNrRW5kT2ZCbG9jaygpLGw9Yi5lbGVtZW50UGF0aChhLnN0YXJ0Q29udGFpbmVyKSxjPWwuYmxvY2ssbj1kPT1DS0VESVRPUi5FTlRFUl9ESVY/XCJkaXZcIjpcInBcIixlO2lmKGsmJm0pe2lmKGMmJihjLmlzKFwibGlcIil8fGMuZ2V0UGFyZW50KCkuaXMoXCJsaVwiKSkpe2MuaXMoXCJsaVwiKXx8KGM9Yy5nZXRQYXJlbnQoKSk7YT1jLmdldFBhcmVudCgpO2U9YS5nZXRQYXJlbnQoKTtoPSFjLmhhc1ByZXZpb3VzKCk7dmFyIHA9IWMuaGFzTmV4dCgpLG49Yi5nZXRTZWxlY3Rpb24oKSxnPW4uY3JlYXRlQm9va21hcmtzKCksaz1jLmdldERpcmVjdGlvbigxKSxtPWMuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikscj1jLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpLHE9ZS5nZXREaXJlY3Rpb24oMSkhPWs7Yj1iLmVudGVyTW9kZSE9Q0tFRElUT1IuRU5URVJfQlJ8fHF8fHJ8fG07XG5pZihlLmlzKFwibGlcIikpaHx8cD8oaCYmcCYmYS5yZW1vdmUoKSxjW3A/XCJpbnNlcnRBZnRlclwiOlwiaW5zZXJ0QmVmb3JlXCJdKGUpKTpjLmJyZWFrUGFyZW50KGUpO2Vsc2V7aWYoYilpZihsLmJsb2NrLmlzKFwibGlcIik/KGU9Zi5jcmVhdGVFbGVtZW50KGQ9PUNLRURJVE9SLkVOVEVSX1A/XCJwXCI6XCJkaXZcIikscSYmZS5zZXRBdHRyaWJ1dGUoXCJkaXJcIixrKSxyJiZlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsciksbSYmZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLG0pLGMubW92ZUNoaWxkcmVuKGUpKTplPWwuYmxvY2ssaHx8cCllW2g/XCJpbnNlcnRCZWZvcmVcIjpcImluc2VydEFmdGVyXCJdKGEpO2Vsc2UgYy5icmVha1BhcmVudChhKSxlLmluc2VydEFmdGVyKGEpO2Vsc2UgaWYoYy5hcHBlbmRCb2d1cyghMCksaHx8cClmb3IoO2Y9Y1toP1wiZ2V0Rmlyc3RcIjpcImdldExhc3RcIl0oKTspZltoP1wiaW5zZXJ0QmVmb3JlXCI6XCJpbnNlcnRBZnRlclwiXShhKTtlbHNlIGZvcihjLmJyZWFrUGFyZW50KGEpO2Y9Yy5nZXRMYXN0KCk7KWYuaW5zZXJ0QWZ0ZXIoYSk7XG5jLnJlbW92ZSgpfW4uc2VsZWN0Qm9va21hcmtzKGcpO3JldHVybn1pZihjJiZjLmdldFBhcmVudCgpLmlzKFwiYmxvY2txdW90ZVwiKSl7Yy5icmVha1BhcmVudChjLmdldFBhcmVudCgpKTtjLmdldFByZXZpb3VzKCkuZ2V0Rmlyc3QoQ0tFRElUT1IuZG9tLndhbGtlci5pbnZpc2libGUoMSkpfHxjLmdldFByZXZpb3VzKCkucmVtb3ZlKCk7Yy5nZXROZXh0KCkuZ2V0Rmlyc3QoQ0tFRElUT1IuZG9tLndhbGtlci5pbnZpc2libGUoMSkpfHxjLmdldE5leHQoKS5yZW1vdmUoKTthLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoYyk7YS5zZWxlY3QoKTtyZXR1cm59fWVsc2UgaWYoYyYmYy5pcyhcInByZVwiKSYmIW0pe3QoYixkLGEsaCk7cmV0dXJufWlmKGs9YS5zcGxpdEJsb2NrKG4pKXtkPWsucHJldmlvdXNCbG9jaztjPWsubmV4dEJsb2NrO2w9ay53YXNTdGFydE9mQmxvY2s7Yj1rLndhc0VuZE9mQmxvY2s7Yz8oZz1jLmdldFBhcmVudCgpLGcuaXMoXCJsaVwiKSYmKGMuYnJlYWtQYXJlbnQoZyksXG5jLm1vdmUoYy5nZXROZXh0KCksMSkpKTpkJiYoZz1kLmdldFBhcmVudCgpKSYmZy5pcyhcImxpXCIpJiYoZC5icmVha1BhcmVudChnKSxnPWQuZ2V0TmV4dCgpLGEubW92ZVRvRWxlbWVudEVkaXRTdGFydChnKSxkLm1vdmUoZC5nZXRQcmV2aW91cygpKSk7aWYobHx8Yil7aWYoZCl7aWYoZC5pcyhcImxpXCIpfHwhdy50ZXN0KGQuZ2V0TmFtZSgpKSYmIWQuaXMoXCJwcmVcIikpZT1kLmNsb25lKCl9ZWxzZSBjJiYoZT1jLmNsb25lKCkpO2U/aCYmIWUuaXMoXCJsaVwiKSYmZS5yZW5hbWVOb2RlKG4pOmcmJmcuaXMoXCJsaVwiKT9lPWc6KGU9Zi5jcmVhdGVFbGVtZW50KG4pLGQmJihwPWQuZ2V0RGlyZWN0aW9uKCkpJiZlLnNldEF0dHJpYnV0ZShcImRpclwiLHApKTtpZihmPWsuZWxlbWVudFBhdGgpZm9yKGg9MCxuPWYuZWxlbWVudHMubGVuZ3RoO2g8bjtoKyspe2c9Zi5lbGVtZW50c1toXTtpZihnLmVxdWFscyhmLmJsb2NrKXx8Zy5lcXVhbHMoZi5ibG9ja0xpbWl0KSlicmVhaztDS0VESVRPUi5kdGQuJHJlbW92ZUVtcHR5W2cuZ2V0TmFtZSgpXSYmXG4oZz1nLmNsb25lKCksZS5tb3ZlQ2hpbGRyZW4oZyksZS5hcHBlbmQoZykpfWUuYXBwZW5kQm9ndXMoKTtlLmdldFBhcmVudCgpfHxhLmluc2VydE5vZGUoZSk7ZS5pcyhcImxpXCIpJiZlLnJlbW92ZUF0dHJpYnV0ZShcInZhbHVlXCIpOyFDS0VESVRPUi5lbnYuaWV8fCFsfHxiJiZkLmdldENoaWxkQ291bnQoKXx8KGEubW92ZVRvRWxlbWVudEVkaXRTdGFydChiP2Q6ZSksYS5zZWxlY3QoKSk7YS5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KGwmJiFiP2M6ZSl9ZWxzZSBjLmlzKFwibGlcIikmJihlPWEuY2xvbmUoKSxlLnNlbGVjdE5vZGVDb250ZW50cyhjKSxlPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGUpLGUuZXZhbHVhdG9yPWZ1bmN0aW9uKGEpe3JldHVybiEoQShhKXx8eihhKXx8YS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuZ2V0TmFtZSgpaW4gQ0tFRElUT1IuZHRkLiRpbmxpbmUmJiEoYS5nZXROYW1lKClpbiBDS0VESVRPUi5kdGQuJGVtcHR5KSl9LChnPWUubmV4dCgpKSYmXG5nLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZy5pcyhcInVsXCIsXCJvbFwiKSYmKENLRURJVE9SLmVudi5uZWVkc0JyRmlsbGVyP2YuY3JlYXRlRWxlbWVudChcImJyXCIpOmYuY3JlYXRlVGV4dChcIsKgXCIpKS5pbnNlcnRCZWZvcmUoZykpLGMmJmEubW92ZVRvRWxlbWVudEVkaXRTdGFydChjKTthLnNlbGVjdCgpO2Euc2Nyb2xsSW50b1ZpZXcoKX19fSxlbnRlckJyOmZ1bmN0aW9uKGIsZCxhLGgpe2lmKGE9YXx8dihiKSl7dmFyIGY9YS5kb2N1bWVudCxrPWEuY2hlY2tFbmRPZkJsb2NrKCksbT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKGIuZ2V0U2VsZWN0aW9uKCkuZ2V0U3RhcnRFbGVtZW50KCkpLGw9bS5ibG9jayxjPWwmJm0uYmxvY2suZ2V0TmFtZSgpO2h8fFwibGlcIiE9Yz8oIWgmJmsmJncudGVzdChjKT8oaz1sLmdldERpcmVjdGlvbigpKT8oZj1mLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZi5zZXRBdHRyaWJ1dGUoXCJkaXJcIixrKSxmLmluc2VydEFmdGVyKGwpLGEuc2V0U3RhcnQoZixcbjApKTooZi5jcmVhdGVFbGVtZW50KFwiYnJcIikuaW5zZXJ0QWZ0ZXIobCksQ0tFRElUT1IuZW52LmdlY2tvJiZmLmNyZWF0ZVRleHQoXCJcIikuaW5zZXJ0QWZ0ZXIobCksYS5zZXRTdGFydEF0KGwuZ2V0TmV4dCgpLENLRURJVE9SLmVudi5pZT9DS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfU1RBUlQ6Q0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQpKTooYj1cInByZVwiPT1jJiZDS0VESVRPUi5lbnYuaWUmJjg+Q0tFRElUT1IuZW52LnZlcnNpb24/Zi5jcmVhdGVUZXh0KFwiXFxyXCIpOmYuY3JlYXRlRWxlbWVudChcImJyXCIpLGEuZGVsZXRlQ29udGVudHMoKSxhLmluc2VydE5vZGUoYiksQ0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXI/KGYuY3JlYXRlVGV4dChcIu+7v1wiKS5pbnNlcnRBZnRlcihiKSxrJiYobHx8bS5ibG9ja0xpbWl0KS5hcHBlbmRCb2d1cygpLGIuZ2V0TmV4dCgpLiQubm9kZVZhbHVlPVwiXCIsYS5zZXRTdGFydEF0KGIuZ2V0TmV4dCgpLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKSk6XG5hLnNldFN0YXJ0QXQoYixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpKSxhLmNvbGxhcHNlKCEwKSxhLnNlbGVjdCgpLGEuc2Nyb2xsSW50b1ZpZXcoKSk6dShiLGQsYSxoKX19fTt2YXIgeD1DS0VESVRPUi5wbHVnaW5zLmVudGVya2V5LHQ9eC5lbnRlckJyLHU9eC5lbnRlckJsb2NrLHc9L15oWzEtNl0kL30pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gayhiLGYpe3ZhciBnPXt9LGM9W10sZT17bmJzcDpcIsKgXCIsc2h5Olwiwq1cIixndDpcIlxceDNlXCIsbHQ6XCJcXHgzY1wiLGFtcDpcIlxceDI2XCIsYXBvczpcIidcIixxdW90OidcIid9O2I9Yi5yZXBsYWNlKC9cXGIobmJzcHxzaHl8Z3R8bHR8YW1wfGFwb3N8cXVvdCkoPzosfCQpL2csZnVuY3Rpb24oYixhKXt2YXIgZD1mP1wiXFx4MjZcIithK1wiO1wiOmVbYV07Z1tkXT1mP2VbYV06XCJcXHgyNlwiK2ErXCI7XCI7Yy5wdXNoKGQpO3JldHVyblwiXCJ9KTtpZighZiYmYil7Yj1iLnNwbGl0KFwiLFwiKTt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGQ7YS5pbm5lckhUTUw9XCJcXHgyNlwiK2Iuam9pbihcIjtcXHgyNlwiKStcIjtcIjtkPWEuaW5uZXJIVE1MO2E9bnVsbDtmb3IoYT0wO2E8ZC5sZW5ndGg7YSsrKXt2YXIgaD1kLmNoYXJBdChhKTtnW2hdPVwiXFx4MjZcIitiW2FdK1wiO1wiO2MucHVzaChoKX19Zy5yZWdleD1jLmpvaW4oZj9cInxcIjpcIlwiKTtyZXR1cm4gZ31DS0VESVRPUi5wbHVnaW5zLmFkZChcImVudGl0aWVzXCIsXG57YWZ0ZXJJbml0OmZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGYoYSl7cmV0dXJuIGhbYV19ZnVuY3Rpb24gZyhiKXtyZXR1cm5cImZvcmNlXCIhPWMuZW50aXRpZXNfcHJvY2Vzc051bWVyaWNhbCYmYVtiXT9hW2JdOlwiXFx4MjYjXCIrYi5jaGFyQ29kZUF0KDApK1wiO1wifXZhciBjPWIuY29uZmlnO2lmKGI9KGI9Yi5kYXRhUHJvY2Vzc29yKSYmYi5odG1sRmlsdGVyKXt2YXIgZT1bXTshMSE9PWMuYmFzaWNFbnRpdGllcyYmZS5wdXNoKFwibmJzcCxndCxsdCxhbXBcIik7Yy5lbnRpdGllcyYmKGUubGVuZ3RoJiZlLnB1c2goXCJxdW90LGlleGNsLGNlbnQscG91bmQsY3VycmVuLHllbixicnZiYXIsc2VjdCx1bWwsY29weSxvcmRmLGxhcXVvLG5vdCxzaHkscmVnLG1hY3IsZGVnLHBsdXNtbixzdXAyLHN1cDMsYWN1dGUsbWljcm8scGFyYSxtaWRkb3QsY2VkaWwsc3VwMSxvcmRtLHJhcXVvLGZyYWMxNCxmcmFjMTIsZnJhYzM0LGlxdWVzdCx0aW1lcyxkaXZpZGUsZm5vZixidWxsLGhlbGxpcCxwcmltZSxQcmltZSxvbGluZSxmcmFzbCx3ZWllcnAsaW1hZ2UscmVhbCx0cmFkZSxhbGVmc3ltLGxhcnIsdWFycixyYXJyLGRhcnIsaGFycixjcmFycixsQXJyLHVBcnIsckFycixkQXJyLGhBcnIsZm9yYWxsLHBhcnQsZXhpc3QsZW1wdHksbmFibGEsaXNpbixub3RpbixuaSxwcm9kLHN1bSxtaW51cyxsb3dhc3QscmFkaWMscHJvcCxpbmZpbixhbmcsYW5kLG9yLGNhcCxjdXAsaW50LHRoZXJlNCxzaW0sY29uZyxhc3ltcCxuZSxlcXVpdixsZSxnZSxzdWIsc3VwLG5zdWIsc3ViZSxzdXBlLG9wbHVzLG90aW1lcyxwZXJwLHNkb3QsbGNlaWwscmNlaWwsbGZsb29yLHJmbG9vcixsYW5nLHJhbmcsbG96LHNwYWRlcyxjbHVicyxoZWFydHMsZGlhbXMsY2lyYyx0aWxkZSxlbnNwLGVtc3AsdGhpbnNwLHp3bmosendqLGxybSxybG0sbmRhc2gsbWRhc2gsbHNxdW8scnNxdW8sc2JxdW8sbGRxdW8scmRxdW8sYmRxdW8sZGFnZ2VyLERhZ2dlcixwZXJtaWwsbHNhcXVvLHJzYXF1byxldXJvXCIpLFxuYy5lbnRpdGllc19sYXRpbiYmZS5wdXNoKFwiQWdyYXZlLEFhY3V0ZSxBY2lyYyxBdGlsZGUsQXVtbCxBcmluZyxBRWxpZyxDY2VkaWwsRWdyYXZlLEVhY3V0ZSxFY2lyYyxFdW1sLElncmF2ZSxJYWN1dGUsSWNpcmMsSXVtbCxFVEgsTnRpbGRlLE9ncmF2ZSxPYWN1dGUsT2NpcmMsT3RpbGRlLE91bWwsT3NsYXNoLFVncmF2ZSxVYWN1dGUsVWNpcmMsVXVtbCxZYWN1dGUsVEhPUk4sc3psaWcsYWdyYXZlLGFhY3V0ZSxhY2lyYyxhdGlsZGUsYXVtbCxhcmluZyxhZWxpZyxjY2VkaWwsZWdyYXZlLGVhY3V0ZSxlY2lyYyxldW1sLGlncmF2ZSxpYWN1dGUsaWNpcmMsaXVtbCxldGgsbnRpbGRlLG9ncmF2ZSxvYWN1dGUsb2NpcmMsb3RpbGRlLG91bWwsb3NsYXNoLHVncmF2ZSx1YWN1dGUsdWNpcmMsdXVtbCx5YWN1dGUsdGhvcm4seXVtbCxPRWxpZyxvZWxpZyxTY2Fyb24sc2Nhcm9uLFl1bWxcIiksYy5lbnRpdGllc19ncmVlayYmZS5wdXNoKFwiQWxwaGEsQmV0YSxHYW1tYSxEZWx0YSxFcHNpbG9uLFpldGEsRXRhLFRoZXRhLElvdGEsS2FwcGEsTGFtYmRhLE11LE51LFhpLE9taWNyb24sUGksUmhvLFNpZ21hLFRhdSxVcHNpbG9uLFBoaSxDaGksUHNpLE9tZWdhLGFscGhhLGJldGEsZ2FtbWEsZGVsdGEsZXBzaWxvbix6ZXRhLGV0YSx0aGV0YSxpb3RhLGthcHBhLGxhbWJkYSxtdSxudSx4aSxvbWljcm9uLHBpLHJobyxzaWdtYWYsc2lnbWEsdGF1LHVwc2lsb24scGhpLGNoaSxwc2ksb21lZ2EsdGhldGFzeW0sdXBzaWgscGl2XCIpLFxuYy5lbnRpdGllc19hZGRpdGlvbmFsJiZlLnB1c2goYy5lbnRpdGllc19hZGRpdGlvbmFsKSk7dmFyIGE9ayhlLmpvaW4oXCIsXCIpKSxkPWEucmVnZXg/XCJbXCIrYS5yZWdleCtcIl1cIjpcImFeXCI7ZGVsZXRlIGEucmVnZXg7Yy5lbnRpdGllcyYmYy5lbnRpdGllc19wcm9jZXNzTnVtZXJpY2FsJiYoZD1cIlteIC1+XXxcIitkKTt2YXIgZD1uZXcgUmVnRXhwKGQsXCJnXCIpLGg9ayhcIm5ic3AsZ3QsbHQsYW1wLHNoeVwiLCEwKSxsPW5ldyBSZWdFeHAoaC5yZWdleCxcImdcIik7Yi5hZGRSdWxlcyh7dGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKGwsZikucmVwbGFjZShkLGcpfX0se2FwcGx5VG9BbGw6ITAsZXhjbHVkZU5lc3RlZEVkaXRhYmxlOiEwfSl9fX0pfSkoKTtDS0VESVRPUi5jb25maWcuYmFzaWNFbnRpdGllcz0hMDtDS0VESVRPUi5jb25maWcuZW50aXRpZXM9ITA7Q0tFRElUT1IuY29uZmlnLmVudGl0aWVzX2xhdGluPSEwO0NLRURJVE9SLmNvbmZpZy5lbnRpdGllc19ncmVlaz0hMDtcbkNLRURJVE9SLmNvbmZpZy5lbnRpdGllc19hZGRpdGlvbmFsPVwiIzM5XCI7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJwb3B1cFwiKTtcbkNLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLHtwb3B1cDpmdW5jdGlvbihlLGEsYixkKXthPWF8fFwiODAlXCI7Yj1ifHxcIjcwJVwiO1wic3RyaW5nXCI9PXR5cGVvZiBhJiYxPGEubGVuZ3RoJiZcIiVcIj09YS5zdWJzdHIoYS5sZW5ndGgtMSwxKSYmKGE9cGFyc2VJbnQod2luZG93LnNjcmVlbi53aWR0aCpwYXJzZUludChhLDEwKS8xMDAsMTApKTtcInN0cmluZ1wiPT10eXBlb2YgYiYmMTxiLmxlbmd0aCYmXCIlXCI9PWIuc3Vic3RyKGIubGVuZ3RoLTEsMSkmJihiPXBhcnNlSW50KHdpbmRvdy5zY3JlZW4uaGVpZ2h0KnBhcnNlSW50KGIsMTApLzEwMCwxMCkpOzY0MD5hJiYoYT02NDApOzQyMD5iJiYoYj00MjApO3ZhciBmPXBhcnNlSW50KCh3aW5kb3cuc2NyZWVuLmhlaWdodC1iKS8yLDEwKSxnPXBhcnNlSW50KCh3aW5kb3cuc2NyZWVuLndpZHRoLWEpLzIsMTApO2Q9KGR8fFwibG9jYXRpb25cXHgzZG5vLG1lbnViYXJcXHgzZG5vLHRvb2xiYXJcXHgzZG5vLGRlcGVuZGVudFxceDNkeWVzLG1pbmltaXphYmxlXFx4M2Rubyxtb2RhbFxceDNkeWVzLGFsd2F5c1JhaXNlZFxceDNkeWVzLHJlc2l6YWJsZVxceDNkeWVzLHNjcm9sbGJhcnNcXHgzZHllc1wiKStcIix3aWR0aFxceDNkXCIrXG5hK1wiLGhlaWdodFxceDNkXCIrYitcIix0b3BcXHgzZFwiK2YrXCIsbGVmdFxceDNkXCIrZzt2YXIgYz13aW5kb3cub3BlbihcIlwiLG51bGwsZCwhMCk7aWYoIWMpcmV0dXJuITE7dHJ5ey0xPT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIiBjaHJvbWUvXCIpJiYoYy5tb3ZlVG8oZyxmKSxjLnJlc2l6ZVRvKGEsYikpLGMuZm9jdXMoKSxjLmxvY2F0aW9uLmhyZWY9ZX1jYXRjaChoKXt3aW5kb3cub3BlbihlLG51bGwsZCwhMCl9cmV0dXJuITB9fSk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZyhhLGMpe3ZhciBkPVtdO2lmKGMpZm9yKHZhciBiIGluIGMpZC5wdXNoKGIrXCJcXHgzZFwiK2VuY29kZVVSSUNvbXBvbmVudChjW2JdKSk7ZWxzZSByZXR1cm4gYTtyZXR1cm4gYSsoLTEhPWEuaW5kZXhPZihcIj9cIik/XCJcXHgyNlwiOlwiP1wiKStkLmpvaW4oXCJcXHgyNlwiKX1mdW5jdGlvbiBrKGEpe2ErPVwiXCI7cmV0dXJuIGEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zdWJzdHIoMSl9ZnVuY3Rpb24gbSgpe3ZhciBhPXRoaXMuZ2V0RGlhbG9nKCksYz1hLmdldFBhcmVudEVkaXRvcigpO2MuXy5maWxlYnJvd3NlclNlPXRoaXM7dmFyIGQ9Yy5jb25maWdbXCJmaWxlYnJvd3NlclwiK2soYS5nZXROYW1lKCkpK1wiV2luZG93V2lkdGhcIl18fGMuY29uZmlnLmZpbGVicm93c2VyV2luZG93V2lkdGh8fFwiODAlXCIsYT1jLmNvbmZpZ1tcImZpbGVicm93c2VyXCIrayhhLmdldE5hbWUoKSkrXCJXaW5kb3dIZWlnaHRcIl18fGMuY29uZmlnLmZpbGVicm93c2VyV2luZG93SGVpZ2h0fHxcblwiNzAlXCIsYj10aGlzLmZpbGVicm93c2VyLnBhcmFtc3x8e307Yi5DS0VkaXRvcj1jLm5hbWU7Yi5DS0VkaXRvckZ1bmNOdW09Yy5fLmZpbGVicm93c2VyRm47Yi5sYW5nQ29kZXx8KGIubGFuZ0NvZGU9Yy5sYW5nQ29kZSk7Yj1nKHRoaXMuZmlsZWJyb3dzZXIudXJsLGIpO2MucG9wdXAoYixkLGEsYy5jb25maWcuZmlsZWJyb3dzZXJXaW5kb3dGZWF0dXJlc3x8Yy5jb25maWcuZmlsZUJyb3dzZXJXaW5kb3dGZWF0dXJlcyl9ZnVuY3Rpb24gbigpe3ZhciBhPXRoaXMuZ2V0RGlhbG9nKCk7YS5nZXRQYXJlbnRFZGl0b3IoKS5fLmZpbGVicm93c2VyU2U9dGhpcztyZXR1cm4gYS5nZXRDb250ZW50RWxlbWVudCh0aGlzW1wiZm9yXCJdWzBdLHRoaXNbXCJmb3JcIl1bMV0pLmdldElucHV0RWxlbWVudCgpLiQudmFsdWUmJmEuZ2V0Q29udGVudEVsZW1lbnQodGhpc1tcImZvclwiXVswXSx0aGlzW1wiZm9yXCJdWzFdKS5nZXRBY3Rpb24oKT8hMDohMX1mdW5jdGlvbiBwKGEsYyxkKXt2YXIgYj1kLnBhcmFtc3x8XG57fTtiLkNLRWRpdG9yPWEubmFtZTtiLkNLRWRpdG9yRnVuY051bT1hLl8uZmlsZWJyb3dzZXJGbjtiLmxhbmdDb2RlfHwoYi5sYW5nQ29kZT1hLmxhbmdDb2RlKTtjLmFjdGlvbj1nKGQudXJsLGIpO2MuZmlsZWJyb3dzZXI9ZH1mdW5jdGlvbiBsKGEsYyxkLGIpe2lmKGImJmIubGVuZ3RoKWZvcih2YXIgZSxnPWIubGVuZ3RoO2ctLTspaWYoZT1iW2ddLFwiaGJveFwiIT1lLnR5cGUmJlwidmJveFwiIT1lLnR5cGUmJlwiZmllbGRzZXRcIiE9ZS50eXBlfHxsKGEsYyxkLGUuY2hpbGRyZW4pLGUuZmlsZWJyb3dzZXIpaWYoXCJzdHJpbmdcIj09dHlwZW9mIGUuZmlsZWJyb3dzZXImJihlLmZpbGVicm93c2VyPXthY3Rpb246XCJmaWxlQnV0dG9uXCI9PWUudHlwZT9cIlF1aWNrVXBsb2FkXCI6XCJCcm93c2VcIix0YXJnZXQ6ZS5maWxlYnJvd3Nlcn0pLFwiQnJvd3NlXCI9PWUuZmlsZWJyb3dzZXIuYWN0aW9uKXt2YXIgZj1lLmZpbGVicm93c2VyLnVybDt2b2lkIDA9PT1mJiYoZj1hLmNvbmZpZ1tcImZpbGVicm93c2VyXCIrXG5rKGMpK1wiQnJvd3NlVXJsXCJdLHZvaWQgMD09PWYmJihmPWEuY29uZmlnLmZpbGVicm93c2VyQnJvd3NlVXJsKSk7ZiYmKGUub25DbGljaz1tLGUuZmlsZWJyb3dzZXIudXJsPWYsZS5oaWRkZW49ITEpfWVsc2UgaWYoXCJRdWlja1VwbG9hZFwiPT1lLmZpbGVicm93c2VyLmFjdGlvbiYmZVtcImZvclwiXSYmKGY9ZS5maWxlYnJvd3Nlci51cmwsdm9pZCAwPT09ZiYmKGY9YS5jb25maWdbXCJmaWxlYnJvd3NlclwiK2soYykrXCJVcGxvYWRVcmxcIl0sdm9pZCAwPT09ZiYmKGY9YS5jb25maWcuZmlsZWJyb3dzZXJVcGxvYWRVcmwpKSxmKSl7dmFyIGg9ZS5vbkNsaWNrO2Uub25DbGljaz1mdW5jdGlvbihhKXt2YXIgYj1hLnNlbmRlcjtpZihoJiYhMT09PWguY2FsbChiLGEpKXJldHVybiExO2lmKG4uY2FsbChiLGEpKXthPWIuZ2V0RGlhbG9nKCkuZ2V0Q29udGVudEVsZW1lbnQodGhpc1tcImZvclwiXVswXSx0aGlzW1wiZm9yXCJdWzFdKS5nZXRJbnB1dEVsZW1lbnQoKTtpZihiPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChhLiQuZm9ybSkpKGE9XG5iLiQuZWxlbWVudHMuY2tDc3JmVG9rZW4pP2E9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGEpOihhPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcImlucHV0XCIpLGEuc2V0QXR0cmlidXRlcyh7bmFtZTpcImNrQ3NyZlRva2VuXCIsdHlwZTpcImhpZGRlblwifSksYi5hcHBlbmQoYSkpLGEuc2V0QXR0cmlidXRlKFwidmFsdWVcIixDS0VESVRPUi50b29scy5nZXRDc3JmVG9rZW4oKSk7cmV0dXJuITB9cmV0dXJuITF9O2UuZmlsZWJyb3dzZXIudXJsPWY7ZS5oaWRkZW49ITE7cChhLGQuZ2V0Q29udGVudHMoZVtcImZvclwiXVswXSkuZ2V0KGVbXCJmb3JcIl1bMV0pLGUuZmlsZWJyb3dzZXIpfX1mdW5jdGlvbiBoKGEsYyxkKXtpZigtMSE9PWQuaW5kZXhPZihcIjtcIikpe2Q9ZC5zcGxpdChcIjtcIik7Zm9yKHZhciBiPTA7YjxkLmxlbmd0aDtiKyspaWYoaChhLGMsZFtiXSkpcmV0dXJuITA7cmV0dXJuITF9cmV0dXJuKGE9YS5nZXRDb250ZW50cyhjKS5nZXQoZCkuZmlsZWJyb3dzZXIpJiZhLnVybH1mdW5jdGlvbiBxKGEsXG5jKXt2YXIgZD10aGlzLl8uZmlsZWJyb3dzZXJTZS5nZXREaWFsb2coKSxiPXRoaXMuXy5maWxlYnJvd3NlclNlW1wiZm9yXCJdLGU9dGhpcy5fLmZpbGVicm93c2VyU2UuZmlsZWJyb3dzZXIub25TZWxlY3Q7YiYmZC5nZXRDb250ZW50RWxlbWVudChiWzBdLGJbMV0pLnJlc2V0KCk7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgY3x8ITEhPT1jLmNhbGwodGhpcy5fLmZpbGVicm93c2VyU2UpKWlmKCFlfHwhMSE9PWUuY2FsbCh0aGlzLl8uZmlsZWJyb3dzZXJTZSxhLGMpKWlmKFwic3RyaW5nXCI9PXR5cGVvZiBjJiZjJiZhbGVydChjKSxhJiYoYj10aGlzLl8uZmlsZWJyb3dzZXJTZSxkPWIuZ2V0RGlhbG9nKCksYj1iLmZpbGVicm93c2VyLnRhcmdldHx8bnVsbCkpaWYoYj1iLnNwbGl0KFwiOlwiKSxlPWQuZ2V0Q29udGVudEVsZW1lbnQoYlswXSxiWzFdKSllLnNldFZhbHVlKGEpLGQuc2VsZWN0UGFnZShiWzBdKX1DS0VESVRPUi5wbHVnaW5zLmFkZChcImZpbGVicm93c2VyXCIse3JlcXVpcmVzOlwicG9wdXBcIixcbmluaXQ6ZnVuY3Rpb24oYSl7YS5fLmZpbGVicm93c2VyRm49Q0tFRElUT1IudG9vbHMuYWRkRnVuY3Rpb24ocSxhKTthLm9uKFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7Q0tFRElUT1IudG9vbHMucmVtb3ZlRnVuY3Rpb24odGhpcy5fLmZpbGVicm93c2VyRm4pfSl9fSk7Q0tFRElUT1Iub24oXCJkaWFsb2dEZWZpbml0aW9uXCIsZnVuY3Rpb24oYSl7aWYoYS5lZGl0b3IucGx1Z2lucy5maWxlYnJvd3Nlcilmb3IodmFyIGM9YS5kYXRhLmRlZmluaXRpb24sZCxiPTA7YjxjLmNvbnRlbnRzLmxlbmd0aDsrK2IpaWYoZD1jLmNvbnRlbnRzW2JdKWwoYS5lZGl0b3IsYS5kYXRhLm5hbWUsYyxkLmVsZW1lbnRzKSxkLmhpZGRlbiYmZC5maWxlYnJvd3NlciYmKGQuaGlkZGVuPSFoKGMsZC5pZCxkLmZpbGVicm93c2VyKSl9KX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJmaW5kXCIse3JlcXVpcmVzOlwiZGlhbG9nXCIsaW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLmFkZENvbW1hbmQoXCJmaW5kXCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJmaW5kXCIpKTtiLmNhblVuZG89ITE7Yi5yZWFkT25seT0xO2EuYWRkQ29tbWFuZChcInJlcGxhY2VcIixuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcInJlcGxhY2VcIikpLmNhblVuZG89ITE7YS51aS5hZGRCdXR0b24mJihhLnVpLmFkZEJ1dHRvbihcIkZpbmRcIix7bGFiZWw6YS5sYW5nLmZpbmQuZmluZCxjb21tYW5kOlwiZmluZFwiLHRvb2xiYXI6XCJmaW5kLDEwXCJ9KSxhLnVpLmFkZEJ1dHRvbihcIlJlcGxhY2VcIix7bGFiZWw6YS5sYW5nLmZpbmQucmVwbGFjZSxjb21tYW5kOlwicmVwbGFjZVwiLHRvb2xiYXI6XCJmaW5kLDIwXCJ9KSk7Q0tFRElUT1IuZGlhbG9nLmFkZChcImZpbmRcIix0aGlzLnBhdGgrXCJkaWFsb2dzL2ZpbmQuanNcIik7Q0tFRElUT1IuZGlhbG9nLmFkZChcInJlcGxhY2VcIix0aGlzLnBhdGgrXG5cImRpYWxvZ3MvZmluZC5qc1wiKX19KTtDS0VESVRPUi5jb25maWcuZmluZF9oaWdobGlnaHQ9e2VsZW1lbnQ6XCJzcGFuXCIsc3R5bGVzOntcImJhY2tncm91bmQtY29sb3JcIjpcIiMwMDRcIixjb2xvcjpcIiNmZmZcIn19OyhmdW5jdGlvbigpe2Z1bmN0aW9uIGcoYSxiKXt2YXIgYz1sLmV4ZWMoYSksZD1sLmV4ZWMoYik7aWYoYyl7aWYoIWNbMl0mJlwicHhcIj09ZFsyXSlyZXR1cm4gZFsxXTtpZihcInB4XCI9PWNbMl0mJiFkWzJdKXJldHVybiBkWzFdK1wicHhcIn1yZXR1cm4gYn12YXIgaz1DS0VESVRPUi5odG1sUGFyc2VyLmNzc1N0eWxlLGg9Q0tFRElUT1IudG9vbHMuY3NzTGVuZ3RoLGw9L14oKD86XFxkKig/OlxcLlxcZCspKXwoPzpcXGQrKSkoLiopPyQvaSxtPXtlbGVtZW50czp7JDpmdW5jdGlvbihhKXt2YXIgYj1hLmF0dHJpYnV0ZXM7aWYoKGI9KGI9KGI9YiYmYltcImRhdGEtY2tlLXJlYWxlbGVtZW50XCJdKSYmbmV3IENLRURJVE9SLmh0bWxQYXJzZXIuZnJhZ21lbnQuZnJvbUh0bWwoZGVjb2RlVVJJQ29tcG9uZW50KGIpKSkmJmIuY2hpbGRyZW5bMF0pJiZhLmF0dHJpYnV0ZXNbXCJkYXRhLWNrZS1yZXNpemFibGVcIl0pe3ZhciBjPShuZXcgayhhKSkucnVsZXM7YT1iLmF0dHJpYnV0ZXM7dmFyIGQ9Yy53aWR0aCxcbmM9Yy5oZWlnaHQ7ZCYmKGEud2lkdGg9ZyhhLndpZHRoLGQpKTtjJiYoYS5oZWlnaHQ9ZyhhLmhlaWdodCxjKSl9cmV0dXJuIGJ9fX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJmYWtlb2JqZWN0c1wiLHtpbml0OmZ1bmN0aW9uKGEpe2EuZmlsdGVyLmFsbG93KFwiaW1nWyFkYXRhLWNrZS1yZWFsZWxlbWVudCxzcmMsYWx0LHRpdGxlXSgqKXsqfVwiLFwiZmFrZW9iamVjdHNcIil9LGFmdGVySW5pdDpmdW5jdGlvbihhKXsoYT0oYT1hLmRhdGFQcm9jZXNzb3IpJiZhLmh0bWxGaWx0ZXIpJiZhLmFkZFJ1bGVzKG0se2FwcGx5VG9BbGw6ITB9KX19KTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmNyZWF0ZUZha2VFbGVtZW50PWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMubGFuZy5mYWtlb2JqZWN0cyxlPWVbY118fGUudW5rbm93bjtiPXtcImNsYXNzXCI6YixcImRhdGEtY2tlLXJlYWxlbGVtZW50XCI6ZW5jb2RlVVJJQ29tcG9uZW50KGEuZ2V0T3V0ZXJIdG1sKCkpLFwiZGF0YS1ja2UtcmVhbC1ub2RlLXR5cGVcIjphLnR5cGUsXG5hbHQ6ZSx0aXRsZTplLGFsaWduOmEuZ2V0QXR0cmlidXRlKFwiYWxpZ25cIil8fFwiXCJ9O0NLRURJVE9SLmVudi5oY3x8KGIuc3JjPUNLRURJVE9SLnRvb2xzLnRyYW5zcGFyZW50SW1hZ2VEYXRhKTtjJiYoYltcImRhdGEtY2tlLXJlYWwtZWxlbWVudC10eXBlXCJdPWMpO2QmJihiW1wiZGF0YS1ja2UtcmVzaXphYmxlXCJdPWQsYz1uZXcgayxkPWEuZ2V0QXR0cmlidXRlKFwid2lkdGhcIiksYT1hLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKSxkJiYoYy5ydWxlcy53aWR0aD1oKGQpKSxhJiYoYy5ydWxlcy5oZWlnaHQ9aChhKSksYy5wb3B1bGF0ZShiKSk7cmV0dXJuIHRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiLHthdHRyaWJ1dGVzOmJ9KX07Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5jcmVhdGVGYWtlUGFyc2VyRWxlbWVudD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLmxhbmcuZmFrZW9iamVjdHMsZT1lW2NdfHxlLnVua25vd24sZjtmPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmJhc2ljV3JpdGVyO1xuYS53cml0ZUh0bWwoZik7Zj1mLmdldEh0bWwoKTtiPXtcImNsYXNzXCI6YixcImRhdGEtY2tlLXJlYWxlbGVtZW50XCI6ZW5jb2RlVVJJQ29tcG9uZW50KGYpLFwiZGF0YS1ja2UtcmVhbC1ub2RlLXR5cGVcIjphLnR5cGUsYWx0OmUsdGl0bGU6ZSxhbGlnbjphLmF0dHJpYnV0ZXMuYWxpZ258fFwiXCJ9O0NLRURJVE9SLmVudi5oY3x8KGIuc3JjPUNLRURJVE9SLnRvb2xzLnRyYW5zcGFyZW50SW1hZ2VEYXRhKTtjJiYoYltcImRhdGEtY2tlLXJlYWwtZWxlbWVudC10eXBlXCJdPWMpO2QmJihiW1wiZGF0YS1ja2UtcmVzaXphYmxlXCJdPWQsZD1hLmF0dHJpYnV0ZXMsYT1uZXcgayxjPWQud2lkdGgsZD1kLmhlaWdodCx2b2lkIDAhPT1jJiYoYS5ydWxlcy53aWR0aD1oKGMpKSx2b2lkIDAhPT1kJiYoYS5ydWxlcy5oZWlnaHQ9aChkKSksYS5wb3B1bGF0ZShiKSk7cmV0dXJuIG5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQoXCJpbWdcIixiKX07Q0tFRElUT1IuZWRpdG9yLnByb3RvdHlwZS5yZXN0b3JlUmVhbEVsZW1lbnQ9XG5mdW5jdGlvbihhKXtpZihhLmRhdGEoXCJja2UtcmVhbC1ub2RlLXR5cGVcIikhPUNLRURJVE9SLk5PREVfRUxFTUVOVClyZXR1cm4gbnVsbDt2YXIgYj1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbChkZWNvZGVVUklDb21wb25lbnQoYS5kYXRhKFwiY2tlLXJlYWxlbGVtZW50XCIpKSx0aGlzLmRvY3VtZW50KTtpZihhLmRhdGEoXCJja2UtcmVzaXphYmxlXCIpKXt2YXIgYz1hLmdldFN0eWxlKFwid2lkdGhcIik7YT1hLmdldFN0eWxlKFwiaGVpZ2h0XCIpO2MmJmIuc2V0QXR0cmlidXRlKFwid2lkdGhcIixnKGIuZ2V0QXR0cmlidXRlKFwid2lkdGhcIiksYykpO2EmJmIuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsZyhiLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKSxhKSl9cmV0dXJuIGJ9fSkoKTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBkKGEpe2E9YS5hdHRyaWJ1dGVzO3JldHVyblwiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIj09YS50eXBlfHxmLnRlc3QoYS5zcmN8fFwiXCIpfWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gYS5jcmVhdGVGYWtlUGFyc2VyRWxlbWVudChiLFwiY2tlX2ZsYXNoXCIsXCJmbGFzaFwiLCEwKX12YXIgZj0vXFwuc3dmKD86JHxcXD8pL2k7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJmbGFzaFwiLHtyZXF1aXJlczpcImRpYWxvZyxmYWtlb2JqZWN0c1wiLG9uTG9hZDpmdW5jdGlvbigpe0NLRURJVE9SLmFkZENzcyhcImltZy5ja2VfZmxhc2h7YmFja2dyb3VuZC1pbWFnZTogdXJsKFwiK0NLRURJVE9SLmdldFVybCh0aGlzLnBhdGgrXCJpbWFnZXMvcGxhY2Vob2xkZXIucG5nXCIpK1wiKTtiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyO2JhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7Ym9yZGVyOiAxcHggc29saWQgI2E5YTlhOTt3aWR0aDogODBweDtoZWlnaHQ6IDgwcHg7fVwiKX0sXG5pbml0OmZ1bmN0aW9uKGEpe3ZhciBiPVwib2JqZWN0W2NsYXNzaWQsY29kZWJhc2UsaGVpZ2h0LGhzcGFjZSx2c3BhY2Usd2lkdGhdO3BhcmFtW25hbWUsdmFsdWVdO2VtYmVkW2hlaWdodCxoc3BhY2UscGx1Z2luc3BhZ2Usc3JjLHR5cGUsdnNwYWNlLHdpZHRoXVwiO0NLRURJVE9SLmRpYWxvZy5pc1RhYkVuYWJsZWQoYSxcImZsYXNoXCIsXCJwcm9wZXJ0aWVzXCIpJiYoYis9XCI7b2JqZWN0W2FsaWduXTsgZW1iZWRbYWxsb3dzY3JpcHRhY2Nlc3MscXVhbGl0eSxzY2FsZSx3bW9kZV1cIik7Q0tFRElUT1IuZGlhbG9nLmlzVGFiRW5hYmxlZChhLFwiZmxhc2hcIixcImFkdmFuY2VkXCIpJiYoYis9XCI7b2JqZWN0W2lkXXsqfTsgZW1iZWRbYmdjb2xvcl17Kn0oKilcIik7YS5hZGRDb21tYW5kKFwiZmxhc2hcIixuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcImZsYXNoXCIse2FsbG93ZWRDb250ZW50OmIscmVxdWlyZWRDb250ZW50OlwiZW1iZWRcIn0pKTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJGbGFzaFwiLFxue2xhYmVsOmEubGFuZy5jb21tb24uZmxhc2gsY29tbWFuZDpcImZsYXNoXCIsdG9vbGJhcjpcImluc2VydCwyMFwifSk7Q0tFRElUT1IuZGlhbG9nLmFkZChcImZsYXNoXCIsdGhpcy5wYXRoK1wiZGlhbG9ncy9mbGFzaC5qc1wiKTthLmFkZE1lbnVJdGVtcyYmYS5hZGRNZW51SXRlbXMoe2ZsYXNoOntsYWJlbDphLmxhbmcuZmxhc2gucHJvcGVydGllcyxjb21tYW5kOlwiZmxhc2hcIixncm91cDpcImZsYXNoXCJ9fSk7YS5vbihcImRvdWJsZWNsaWNrXCIsZnVuY3Rpb24oYSl7dmFyIGI9YS5kYXRhLmVsZW1lbnQ7Yi5pcyhcImltZ1wiKSYmXCJmbGFzaFwiPT1iLmRhdGEoXCJja2UtcmVhbC1lbGVtZW50LXR5cGVcIikmJihhLmRhdGEuZGlhbG9nPVwiZmxhc2hcIil9KTthLmNvbnRleHRNZW51JiZhLmNvbnRleHRNZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uKGEpe2lmKGEmJmEuaXMoXCJpbWdcIikmJiFhLmlzUmVhZE9ubHkoKSYmXCJmbGFzaFwiPT1hLmRhdGEoXCJja2UtcmVhbC1lbGVtZW50LXR5cGVcIikpcmV0dXJue2ZsYXNoOkNLRURJVE9SLlRSSVNUQVRFX09GRn19KX0sXG5hZnRlckluaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5kYXRhUHJvY2Vzc29yOyhiPWImJmIuZGF0YUZpbHRlcikmJmIuYWRkUnVsZXMoe2VsZW1lbnRzOntcImNrZTpvYmplY3RcIjpmdW5jdGlvbihiKXt2YXIgYz1iLmF0dHJpYnV0ZXM7aWYoIShjLmNsYXNzaWQmJlN0cmluZyhjLmNsYXNzaWQpLnRvTG93ZXJDYXNlKCl8fGQoYikpKXtmb3IoYz0wO2M8Yi5jaGlsZHJlbi5sZW5ndGg7YysrKWlmKFwiY2tlOmVtYmVkXCI9PWIuY2hpbGRyZW5bY10ubmFtZSl7aWYoIWQoYi5jaGlsZHJlbltjXSkpYnJlYWs7cmV0dXJuIGUoYSxiKX1yZXR1cm4gbnVsbH1yZXR1cm4gZShhLGIpfSxcImNrZTplbWJlZFwiOmZ1bmN0aW9uKGIpe3JldHVybiBkKGIpP2UoYSxiKTpudWxsfX19LDUpfX0pfSkoKTtDS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IuY29uZmlnLHtmbGFzaEVtYmVkVGFnT25seTohMSxmbGFzaEFkZEVtYmVkVGFnOiEwLGZsYXNoQ29udmVydE9uRWRpdDohMX0pOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGsoYSl7dmFyIGw9YS5jb25maWcscD1hLmZpcmUoXCJ1aVNwYWNlXCIse3NwYWNlOlwidG9wXCIsaHRtbDpcIlwifSkuaHRtbCx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZihhLGMsZSl7Yi5zZXRTdHlsZShjLHcoZSkpO2Iuc2V0U3R5bGUoXCJwb3NpdGlvblwiLGEpfWZ1bmN0aW9uIGUoYSl7dmFyIGI9ay5nZXREb2N1bWVudFBvc2l0aW9uKCk7c3dpdGNoKGEpe2Nhc2UgXCJ0b3BcIjpmKFwiYWJzb2x1dGVcIixcInRvcFwiLGIueS1xLXIpO2JyZWFrO2Nhc2UgXCJwaW5cIjpmKFwiZml4ZWRcIixcInRvcFwiLHgpO2JyZWFrO2Nhc2UgXCJib3R0b21cIjpmKFwiYWJzb2x1dGVcIixcInRvcFwiLGIueSsoYy5oZWlnaHR8fGMuYm90dG9tLWMudG9wKStyKX1tPWF9dmFyIG0sayxuLGMsaCxxLHYscD1sLmZsb2F0U3BhY2VEb2NrZWRPZmZzZXRYfHwwLHI9bC5mbG9hdFNwYWNlRG9ja2VkT2Zmc2V0WXx8MCx1PWwuZmxvYXRTcGFjZVBpbm5lZE9mZnNldFh8fDAseD1sLmZsb2F0U3BhY2VQaW5uZWRPZmZzZXRZfHxcbjA7cmV0dXJuIGZ1bmN0aW9uKGQpe2lmKGs9YS5lZGl0YWJsZSgpKXt2YXIgZj1kJiZcImZvY3VzXCI9PWQubmFtZTtmJiZiLnNob3coKTthLmZpcmUoXCJmbG9hdGluZ1NwYWNlTGF5b3V0XCIse3Nob3c6Zn0pO2IucmVtb3ZlU3R5bGUoXCJsZWZ0XCIpO2IucmVtb3ZlU3R5bGUoXCJyaWdodFwiKTtuPWIuZ2V0Q2xpZW50UmVjdCgpO2M9ay5nZXRDbGllbnRSZWN0KCk7aD1nLmdldFZpZXdQYW5lU2l6ZSgpO3E9bi5oZWlnaHQ7dj1cInBhZ2VYT2Zmc2V0XCJpbiBnLiQ/Zy4kLnBhZ2VYT2Zmc2V0OkNLRURJVE9SLmRvY3VtZW50LiQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7bT8ocStyPD1jLnRvcD9lKFwidG9wXCIpOnErcj5oLmhlaWdodC1jLmJvdHRvbT9lKFwicGluXCIpOmUoXCJib3R0b21cIiksZD1oLndpZHRoLzIsZD1sLmZsb2F0U3BhY2VQcmVmZXJSaWdodD9cInJpZ2h0XCI6MDxjLmxlZnQmJmMucmlnaHQ8aC53aWR0aCYmYy53aWR0aD5uLndpZHRoP1wicnRsXCI9PWwuY29udGVudHNMYW5nRGlyZWN0aW9uP1xuXCJyaWdodFwiOlwibGVmdFwiOmQtYy5sZWZ0PmMucmlnaHQtZD9cImxlZnRcIjpcInJpZ2h0XCIsbi53aWR0aD5oLndpZHRoPyhkPVwibGVmdFwiLGY9MCk6KGY9XCJsZWZ0XCI9PWQ/MDxjLmxlZnQ/Yy5sZWZ0OjA6Yy5yaWdodDxoLndpZHRoP2gud2lkdGgtYy5yaWdodDowLGYrbi53aWR0aD5oLndpZHRoJiYoZD1cImxlZnRcIj09ZD9cInJpZ2h0XCI6XCJsZWZ0XCIsZj0wKSksYi5zZXRTdHlsZShkLHcoKFwicGluXCI9PW0/dTpwKStmKyhcInBpblwiPT1tPzA6XCJsZWZ0XCI9PWQ/djotdikpKSk6KG09XCJwaW5cIixlKFwicGluXCIpLHQoZCkpfX19KCk7aWYocCl7dmFyIGs9bmV3IENLRURJVE9SLnRlbXBsYXRlKCdcXHgzY2RpdiBpZFxceDNkXCJja2Vfe25hbWV9XCIgY2xhc3NcXHgzZFwiY2tlIHtpZH0gY2tlX3Jlc2V0X2FsbCBja2VfY2hyb21lIGNrZV9lZGl0b3Jfe25hbWV9IGNrZV9mbG9hdCBja2Vfe2xhbmdEaXJ9ICcrQ0tFRElUT1IuZW52LmNzc0NsYXNzKydcIiBkaXJcXHgzZFwie2xhbmdEaXJ9XCIgdGl0bGVcXHgzZFwiJysoQ0tFRElUT1IuZW52LmdlY2tvP1xuXCIgXCI6XCJcIikrJ1wiIGxhbmdcXHgzZFwie2xhbmdDb2RlfVwiIHJvbGVcXHgzZFwiYXBwbGljYXRpb25cIiBzdHlsZVxceDNkXCJ7c3R5bGV9XCInKyhhLnRpdGxlPycgYXJpYS1sYWJlbGxlZGJ5XFx4M2RcImNrZV97bmFtZX1fYXJpYWxibFwiJzpcIiBcIikrXCJcXHgzZVwiKyhhLnRpdGxlPydcXHgzY3NwYW4gaWRcXHgzZFwiY2tlX3tuYW1lfV9hcmlhbGJsXCIgY2xhc3NcXHgzZFwiY2tlX3ZvaWNlX2xhYmVsXCJcXHgzZXt2b2ljZUxhYmVsfVxceDNjL3NwYW5cXHgzZSc6XCIgXCIpKydcXHgzY2RpdiBjbGFzc1xceDNkXCJja2VfaW5uZXJcIlxceDNlXFx4M2NkaXYgaWRcXHgzZFwie3RvcElkfVwiIGNsYXNzXFx4M2RcImNrZV90b3BcIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2V7Y29udGVudH1cXHgzYy9kaXZcXHgzZVxceDNjL2RpdlxceDNlXFx4M2MvZGl2XFx4M2UnKSxiPUNLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKS5hcHBlbmQoQ0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoay5vdXRwdXQoe2NvbnRlbnQ6cCxpZDphLmlkLGxhbmdEaXI6YS5sYW5nLmRpcixcbmxhbmdDb2RlOmEubGFuZ0NvZGUsbmFtZTphLm5hbWUsc3R5bGU6XCJkaXNwbGF5Om5vbmU7ei1pbmRleDpcIisobC5iYXNlRmxvYXRaSW5kZXgtMSksdG9wSWQ6YS51aS5zcGFjZUlkKFwidG9wXCIpLHZvaWNlTGFiZWw6YS50aXRsZX0pKSksdT1DS0VESVRPUi50b29scy5ldmVudHNCdWZmZXIoNTAwLHQpLGU9Q0tFRElUT1IudG9vbHMuZXZlbnRzQnVmZmVyKDEwMCx0KTtiLnVuc2VsZWN0YWJsZSgpO2Iub24oXCJtb3VzZWRvd25cIixmdW5jdGlvbihhKXthPWEuZGF0YTthLmdldFRhcmdldCgpLmhhc0FzY2VuZGFudChcImFcIiwxKXx8YS5wcmV2ZW50RGVmYXVsdCgpfSk7YS5vbihcImZvY3VzXCIsZnVuY3Rpb24oYil7dChiKTthLm9uKFwiY2hhbmdlXCIsdS5pbnB1dCk7Zy5vbihcInNjcm9sbFwiLGUuaW5wdXQpO2cub24oXCJyZXNpemVcIixlLmlucHV0KX0pO2Eub24oXCJibHVyXCIsZnVuY3Rpb24oKXtiLmhpZGUoKTthLnJlbW92ZUxpc3RlbmVyKFwiY2hhbmdlXCIsdS5pbnB1dCk7Zy5yZW1vdmVMaXN0ZW5lcihcInNjcm9sbFwiLFxuZS5pbnB1dCk7Zy5yZW1vdmVMaXN0ZW5lcihcInJlc2l6ZVwiLGUuaW5wdXQpfSk7YS5vbihcImRlc3Ryb3lcIixmdW5jdGlvbigpe2cucmVtb3ZlTGlzdGVuZXIoXCJzY3JvbGxcIixlLmlucHV0KTtnLnJlbW92ZUxpc3RlbmVyKFwicmVzaXplXCIsZS5pbnB1dCk7Yi5jbGVhckN1c3RvbURhdGEoKTtiLnJlbW92ZSgpfSk7YS5mb2N1c01hbmFnZXIuaGFzRm9jdXMmJmIuc2hvdygpO2EuZm9jdXNNYW5hZ2VyLmFkZChiLDEpfX12YXIgZz1DS0VESVRPUi5kb2N1bWVudC5nZXRXaW5kb3coKSx3PUNLRURJVE9SLnRvb2xzLmNzc0xlbmd0aDtDS0VESVRPUi5wbHVnaW5zLmFkZChcImZsb2F0aW5nc3BhY2VcIix7aW5pdDpmdW5jdGlvbihhKXthLm9uKFwibG9hZGVkXCIsZnVuY3Rpb24oKXtrKHRoaXMpfSxudWxsLG51bGwsMjApfX0pfSkoKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImxpc3RibG9ja1wiLHtyZXF1aXJlczpcInBhbmVsXCIsb25Mb2FkOmZ1bmN0aW9uKCl7dmFyIGY9Q0tFRElUT1IuYWRkVGVtcGxhdGUoXCJwYW5lbC1saXN0XCIsJ1xceDNjdWwgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIiBjbGFzc1xceDNkXCJja2VfcGFuZWxfbGlzdFwiXFx4M2V7aXRlbXN9XFx4M2MvdWxcXHgzZScpLGc9Q0tFRElUT1IuYWRkVGVtcGxhdGUoXCJwYW5lbC1saXN0LWl0ZW1cIiwnXFx4M2NsaSBpZFxceDNkXCJ7aWR9XCIgY2xhc3NcXHgzZFwiY2tlX3BhbmVsX2xpc3RJdGVtXCIgcm9sZVxceDNkcHJlc2VudGF0aW9uXFx4M2VcXHgzY2EgaWRcXHgzZFwie2lkfV9vcHRpb25cIiBfY2tlX2ZvY3VzXFx4M2QxIGhpZGVmb2N1c1xceDNkdHJ1ZSB0aXRsZVxceDNkXCJ7dGl0bGV9XCIgaHJlZlxceDNkXCJqYXZhc2NyaXB0OnZvaWQoXFwne3ZhbH1cXCcpXCIgIHtvbmNsaWNrfVxceDNkXCJDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oe2NsaWNrRm59LFxcJ3t2YWx9XFwnKTsgcmV0dXJuIGZhbHNlO1wiIHJvbGVcXHgzZFwib3B0aW9uXCJcXHgzZXt0ZXh0fVxceDNjL2FcXHgzZVxceDNjL2xpXFx4M2UnKSxcbmg9Q0tFRElUT1IuYWRkVGVtcGxhdGUoXCJwYW5lbC1saXN0LWdyb3VwXCIsJ1xceDNjaDEgaWRcXHgzZFwie2lkfVwiIGNsYXNzXFx4M2RcImNrZV9wYW5lbF9ncm91cHRpdGxlXCIgcm9sZVxceDNkXCJwcmVzZW50YXRpb25cIiBcXHgzZXtsYWJlbH1cXHgzYy9oMVxceDNlJyksaz0vXFwnL2c7Q0tFRElUT1IudWkucGFuZWwucHJvdG90eXBlLmFkZExpc3RCbG9jaz1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmFkZEJsb2NrKGEsbmV3IENLRURJVE9SLnVpLmxpc3RCbG9jayh0aGlzLmdldEhvbGRlckVsZW1lbnQoKSxiKSl9O0NLRURJVE9SLnVpLmxpc3RCbG9jaz1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7YmFzZTpDS0VESVRPUi51aS5wYW5lbC5ibG9jaywkOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLmF0dHJpYnV0ZXN8fChiLmF0dHJpYnV0ZXM9e30pOyh0aGlzLm11bHRpU2VsZWN0PSEhYi5tdWx0aVNlbGVjdCkmJihjW1wiYXJpYS1tdWx0aXNlbGVjdGFibGVcIl09ITApOyFjLnJvbGUmJlxuKGMucm9sZT1cImxpc3Rib3hcIik7dGhpcy5iYXNlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwicm9sZVwiLGMucm9sZSk7Yz10aGlzLmtleXM7Y1s0MF09XCJuZXh0XCI7Y1s5XT1cIm5leHRcIjtjWzM4XT1cInByZXZcIjtjW0NLRURJVE9SLlNISUZUKzldPVwicHJldlwiO2NbMzJdPUNLRURJVE9SLmVudi5pZT9cIm1vdXNldXBcIjpcImNsaWNrXCI7Q0tFRElUT1IuZW52LmllJiYoY1sxM109XCJtb3VzZXVwXCIpO3RoaXMuXy5wZW5kaW5nSHRtbD1bXTt0aGlzLl8ucGVuZGluZ0xpc3Q9W107dGhpcy5fLml0ZW1zPXt9O3RoaXMuXy5ncm91cHM9e319LF86e2Nsb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy5fLnN0YXJ0ZWQpe3ZhciBhPWYub3V0cHV0KHtpdGVtczp0aGlzLl8ucGVuZGluZ0xpc3Quam9pbihcIlwiKX0pO3RoaXMuXy5wZW5kaW5nTGlzdD1bXTt0aGlzLl8ucGVuZGluZ0h0bWwucHVzaChhKTtkZWxldGUgdGhpcy5fLnN0YXJ0ZWR9fSxnZXRDbGljazpmdW5jdGlvbigpe3RoaXMuXy5jbGlja3x8XG4odGhpcy5fLmNsaWNrPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMudG9nZ2xlKGEpO2lmKHRoaXMub25DbGljayl0aGlzLm9uQ2xpY2soYSxiKX0sdGhpcykpO3JldHVybiB0aGlzLl8uY2xpY2t9fSxwcm90bzp7YWRkOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKTt0aGlzLl8uc3RhcnRlZHx8KHRoaXMuXy5zdGFydGVkPTEsdGhpcy5fLnNpemU9dGhpcy5fLnNpemV8fDApO3RoaXMuXy5pdGVtc1thXT1kO3ZhciBlO2U9Q0tFRElUT1IudG9vbHMuaHRtbEVuY29kZUF0dHIoYSkucmVwbGFjZShrLFwiXFxcXCdcIik7YT17aWQ6ZCx2YWw6ZSxvbmNsaWNrOkNLRURJVE9SLmVudi5pZT8nb25jbGlja1xceDNkXCJyZXR1cm4gZmFsc2U7XCIgb25tb3VzZXVwJzpcIm9uY2xpY2tcIixjbGlja0ZuOnRoaXMuXy5nZXRDbGljaygpLHRpdGxlOkNLRURJVE9SLnRvb2xzLmh0bWxFbmNvZGVBdHRyKGN8fGEpLHRleHQ6Ynx8YX07XG50aGlzLl8ucGVuZGluZ0xpc3QucHVzaChnLm91dHB1dChhKSl9LHN0YXJ0R3JvdXA6ZnVuY3Rpb24oYSl7dGhpcy5fLmNsb3NlKCk7dmFyIGI9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dElkKCk7dGhpcy5fLmdyb3Vwc1thXT1iO3RoaXMuXy5wZW5kaW5nSHRtbC5wdXNoKGgub3V0cHV0KHtpZDpiLGxhYmVsOmF9KSl9LGNvbW1pdDpmdW5jdGlvbigpe3RoaXMuXy5jbG9zZSgpO3RoaXMuZWxlbWVudC5hcHBlbmRIdG1sKHRoaXMuXy5wZW5kaW5nSHRtbC5qb2luKFwiXCIpKTtkZWxldGUgdGhpcy5fLnNpemU7dGhpcy5fLnBlbmRpbmdIdG1sPVtdfSx0b2dnbGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pc01hcmtlZChhKTtiP3RoaXMudW5tYXJrKGEpOnRoaXMubWFyayhhKTtyZXR1cm4hYn0saGlkZUdyb3VwOmZ1bmN0aW9uKGEpe3ZhciBiPShhPXRoaXMuZWxlbWVudC5nZXREb2N1bWVudCgpLmdldEJ5SWQodGhpcy5fLmdyb3Vwc1thXSkpJiZhLmdldE5leHQoKTthJiYoYS5zZXRTdHlsZShcImRpc3BsYXlcIixcblwibm9uZVwiKSxiJiZcInVsXCI9PWIuZ2V0TmFtZSgpJiZiLnNldFN0eWxlKFwiZGlzcGxheVwiLFwibm9uZVwiKSl9LGhpZGVJdGVtOmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudC5nZXREb2N1bWVudCgpLmdldEJ5SWQodGhpcy5fLml0ZW1zW2FdKS5zZXRTdHlsZShcImRpc3BsYXlcIixcIm5vbmVcIil9LHNob3dBbGw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uaXRlbXMsYj10aGlzLl8uZ3JvdXBzLGM9dGhpcy5lbGVtZW50LmdldERvY3VtZW50KCksZDtmb3IoZCBpbiBhKWMuZ2V0QnlJZChhW2RdKS5zZXRTdHlsZShcImRpc3BsYXlcIixcIlwiKTtmb3IodmFyIGUgaW4gYilhPWMuZ2V0QnlJZChiW2VdKSxkPWEuZ2V0TmV4dCgpLGEuc2V0U3R5bGUoXCJkaXNwbGF5XCIsXCJcIiksZCYmXCJ1bFwiPT1kLmdldE5hbWUoKSYmZC5zZXRTdHlsZShcImRpc3BsYXlcIixcIlwiKX0sbWFyazpmdW5jdGlvbihhKXt0aGlzLm11bHRpU2VsZWN0fHx0aGlzLnVubWFya0FsbCgpO2E9dGhpcy5fLml0ZW1zW2FdO3ZhciBiPXRoaXMuZWxlbWVudC5nZXREb2N1bWVudCgpLmdldEJ5SWQoYSk7XG5iLmFkZENsYXNzKFwiY2tlX3NlbGVjdGVkXCIpO3RoaXMuZWxlbWVudC5nZXREb2N1bWVudCgpLmdldEJ5SWQoYStcIl9vcHRpb25cIikuc2V0QXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiLCEwKTt0aGlzLm9uTWFyayYmdGhpcy5vbk1hcmsoYil9LHVubWFyazpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnQuZ2V0RG9jdW1lbnQoKTthPXRoaXMuXy5pdGVtc1thXTt2YXIgYz1iLmdldEJ5SWQoYSk7Yy5yZW1vdmVDbGFzcyhcImNrZV9zZWxlY3RlZFwiKTtiLmdldEJ5SWQoYStcIl9vcHRpb25cIikucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiKTt0aGlzLm9uVW5tYXJrJiZ0aGlzLm9uVW5tYXJrKGMpfSx1bm1hcmtBbGw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl8uaXRlbXMsYj10aGlzLmVsZW1lbnQuZ2V0RG9jdW1lbnQoKSxjO2ZvcihjIGluIGEpe3ZhciBkPWFbY107Yi5nZXRCeUlkKGQpLnJlbW92ZUNsYXNzKFwiY2tlX3NlbGVjdGVkXCIpO2IuZ2V0QnlJZChkK1wiX29wdGlvblwiKS5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIpfXRoaXMub25Vbm1hcmsmJlxudGhpcy5vblVubWFyaygpfSxpc01hcmtlZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lbGVtZW50LmdldERvY3VtZW50KCkuZ2V0QnlJZCh0aGlzLl8uaXRlbXNbYV0pLmhhc0NsYXNzKFwiY2tlX3NlbGVjdGVkXCIpfSxmb2N1czpmdW5jdGlvbihhKXt0aGlzLl8uZm9jdXNJbmRleD0tMTt2YXIgYj10aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZyhcImFcIiksYyxkPS0xO2lmKGEpZm9yKGM9dGhpcy5lbGVtZW50LmdldERvY3VtZW50KCkuZ2V0QnlJZCh0aGlzLl8uaXRlbXNbYV0pLmdldEZpcnN0KCk7YT1iLmdldEl0ZW0oKytkKTspe2lmKGEuZXF1YWxzKGMpKXt0aGlzLl8uZm9jdXNJbmRleD1kO2JyZWFrfX1lbHNlIHRoaXMuZWxlbWVudC5mb2N1cygpO2MmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmZvY3VzKCl9LDApfX19KX19KTtDS0VESVRPUi5wbHVnaW5zLmFkZChcInJpY2hjb21ib1wiLHtyZXF1aXJlczpcImZsb2F0cGFuZWwsbGlzdGJsb2NrLGJ1dHRvblwiLGJlZm9yZUluaXQ6ZnVuY3Rpb24oZCl7ZC51aS5hZGRIYW5kbGVyKENLRURJVE9SLlVJX1JJQ0hDT01CTyxDS0VESVRPUi51aS5yaWNoQ29tYm8uaGFuZGxlcil9fSk7XG4oZnVuY3Rpb24oKXt2YXIgZD0nXFx4M2NzcGFuIGlkXFx4M2RcIntpZH1cIiBjbGFzc1xceDNkXCJja2VfY29tYm8gY2tlX2NvbWJvX197bmFtZX0ge2Nsc31cIiByb2xlXFx4M2RcInByZXNlbnRhdGlvblwiXFx4M2VcXHgzY3NwYW4gaWRcXHgzZFwie2lkfV9sYWJlbFwiIGNsYXNzXFx4M2RcImNrZV9jb21ib19sYWJlbFwiXFx4M2V7bGFiZWx9XFx4M2Mvc3BhblxceDNlXFx4M2NhIGNsYXNzXFx4M2RcImNrZV9jb21ib19idXR0b25cIiB0aXRsZVxceDNkXCJ7dGl0bGV9XCIgdGFiaW5kZXhcXHgzZFwiLTFcIicrKENLRURJVE9SLmVudi5nZWNrbyYmIUNLRURJVE9SLmVudi5oYz9cIlwiOlwiIGhyZWZcXHgzZFxcXCJqYXZhc2NyaXB0OnZvaWQoJ3t0aXRsZUpzfScpXFxcIlwiKSsnIGhpZGVmb2N1c1xceDNkXCJ0cnVlXCIgcm9sZVxceDNkXCJidXR0b25cIiBhcmlhLWxhYmVsbGVkYnlcXHgzZFwie2lkfV9sYWJlbFwiIGFyaWEtaGFzcG9wdXBcXHgzZFwidHJ1ZVwiJztDS0VESVRPUi5lbnYuZ2Vja28mJkNLRURJVE9SLmVudi5tYWMmJihkKz0nIG9ua2V5cHJlc3NcXHgzZFwicmV0dXJuIGZhbHNlO1wiJyk7XG5DS0VESVRPUi5lbnYuZ2Vja28mJihkKz0nIG9uYmx1clxceDNkXCJ0aGlzLnN0eWxlLmNzc1RleHQgXFx4M2QgdGhpcy5zdHlsZS5jc3NUZXh0O1wiJyk7dmFyIGQ9ZCsoJyBvbmtleWRvd25cXHgzZFwicmV0dXJuIENLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbih7a2V5ZG93bkZufSxldmVudCx0aGlzKTtcIiBvbmZvY3VzXFx4M2RcInJldHVybiBDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oe2ZvY3VzRm59LGV2ZW50KTtcIiAnKyhDS0VESVRPUi5lbnYuaWU/J29uY2xpY2tcXHgzZFwicmV0dXJuIGZhbHNlO1wiIG9ubW91c2V1cCc6XCJvbmNsaWNrXCIpKydcXHgzZFwiQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKHtjbGlja0ZufSx0aGlzKTtyZXR1cm4gZmFsc2U7XCJcXHgzZVxceDNjc3BhbiBpZFxceDNkXCJ7aWR9X3RleHRcIiBjbGFzc1xceDNkXCJja2VfY29tYm9fdGV4dCBja2VfY29tYm9faW5saW5lbGFiZWxcIlxceDNle2xhYmVsfVxceDNjL3NwYW5cXHgzZVxceDNjc3BhbiBjbGFzc1xceDNkXCJja2VfY29tYm9fb3BlblwiXFx4M2VcXHgzY3NwYW4gY2xhc3NcXHgzZFwiY2tlX2NvbWJvX2Fycm93XCJcXHgzZScrXG4oQ0tFRElUT1IuZW52LmhjP1wiXFx4MjYjOTY2MDtcIjpDS0VESVRPUi5lbnYuYWlyP1wiXFx4MjZuYnNwO1wiOlwiXCIpK1wiXFx4M2Mvc3BhblxceDNlXFx4M2Mvc3BhblxceDNlXFx4M2MvYVxceDNlXFx4M2Mvc3BhblxceDNlXCIpLGs9Q0tFRElUT1IuYWRkVGVtcGxhdGUoXCJjb21ib1wiLGQpO0NLRURJVE9SLlVJX1JJQ0hDT01CTz1cInJpY2hjb21ib1wiO0NLRURJVE9SLnVpLnJpY2hDb21ibz1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7JDpmdW5jdGlvbihhKXtDS0VESVRPUi50b29scy5leHRlbmQodGhpcyxhLHtjYW5Hcm91cDohMSx0aXRsZTphLmxhYmVsLG1vZGVzOnt3eXNpd3lnOjF9LGVkaXRvckZvY3VzOjF9KTthPXRoaXMucGFuZWx8fHt9O2RlbGV0ZSB0aGlzLnBhbmVsO3RoaXMuaWQ9Q0tFRElUT1IudG9vbHMuZ2V0TmV4dE51bWJlcigpO3RoaXMuZG9jdW1lbnQ9YS5wYXJlbnQmJmEucGFyZW50LmdldERvY3VtZW50KCl8fENLRURJVE9SLmRvY3VtZW50O2EuY2xhc3NOYW1lPVwiY2tlX2NvbWJvcGFuZWxcIjtcbmEuYmxvY2s9e211bHRpU2VsZWN0OmEubXVsdGlTZWxlY3QsYXR0cmlidXRlczphLmF0dHJpYnV0ZXN9O2EudG9vbGJhclJlbGF0ZWQ9ITA7dGhpcy5fPXtwYW5lbERlZmluaXRpb246YSxpdGVtczp7fX19LHByb3RvOntyZW5kZXJIdG1sOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO3RoaXMucmVuZGVyKGEsYik7cmV0dXJuIGIuam9pbihcIlwiKX0scmVuZGVyOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZygpe2lmKHRoaXMuZ2V0U3RhdGUoKSE9Q0tFRElUT1IuVFJJU1RBVEVfT04pe3ZhciBjPXRoaXMubW9kZXNbYS5tb2RlXT9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ7YS5yZWFkT25seSYmIXRoaXMucmVhZE9ubHkmJihjPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKTt0aGlzLnNldFN0YXRlKGMpO3RoaXMuc2V0VmFsdWUoXCJcIik7YyE9Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQmJnRoaXMucmVmcmVzaCYmdGhpcy5yZWZyZXNoKCl9fXZhciBkPVxuQ0tFRElUT1IuZW52LGg9XCJja2VfXCIrdGhpcy5pZCxlPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKGIpe2wmJihhLnVubG9ja1NlbGVjdGlvbigxKSxsPTApO2MuZXhlY3V0ZShiKX0sdGhpcyksZj10aGlzLGM9e2lkOmgsY29tYm86dGhpcyxmb2N1czpmdW5jdGlvbigpe0NLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQoaCkuZ2V0Q2hpbGQoMSkuZm9jdXMoKX0sZXhlY3V0ZTpmdW5jdGlvbihjKXt2YXIgYj1mLl87aWYoYi5zdGF0ZSE9Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpaWYoZi5jcmVhdGVQYW5lbChhKSxiLm9uKWIucGFuZWwuaGlkZSgpO2Vsc2V7Zi5jb21taXQoKTt2YXIgZD1mLmdldFZhbHVlKCk7ZD9iLmxpc3QubWFyayhkKTpiLmxpc3QudW5tYXJrQWxsKCk7Yi5wYW5lbC5zaG93QmxvY2soZi5pZCxuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYyksNCl9fSxjbGlja0ZuOmV9O2Eub24oXCJhY3RpdmVGaWx0ZXJDaGFuZ2VcIixnLHRoaXMpO2Eub24oXCJtb2RlXCIsXG5nLHRoaXMpO2Eub24oXCJzZWxlY3Rpb25DaGFuZ2VcIixnLHRoaXMpOyF0aGlzLnJlYWRPbmx5JiZhLm9uKFwicmVhZE9ubHlcIixnLHRoaXMpO3ZhciBtPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKGIsZCl7Yj1uZXcgQ0tFRElUT1IuZG9tLmV2ZW50KGIpO3ZhciBnPWIuZ2V0S2V5c3Ryb2tlKCk7aWYoNDA9PWcpYS5vbmNlKFwicGFuZWxTaG93XCIsZnVuY3Rpb24oYSl7YS5kYXRhLl8ucGFuZWwuXy5jdXJyZW50QmxvY2sub25LZXlEb3duKDQwKX0pO3N3aXRjaChnKXtjYXNlIDEzOmNhc2UgMzI6Y2FzZSA0MDpDS0VESVRPUi50b29scy5jYWxsRnVuY3Rpb24oZSxkKTticmVhaztkZWZhdWx0OmMub25rZXkoYyxnKX1iLnByZXZlbnREZWZhdWx0KCl9KSxuPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKCl7Yy5vbmZvY3VzJiZjLm9uZm9jdXMoKX0pLGw9MDtjLmtleURvd25Gbj1tO2Q9e2lkOmgsbmFtZTp0aGlzLm5hbWV8fHRoaXMuY29tbWFuZCxsYWJlbDp0aGlzLmxhYmVsLFxudGl0bGU6dGhpcy50aXRsZSxjbHM6dGhpcy5jbGFzc05hbWV8fFwiXCIsdGl0bGVKczpkLmdlY2tvJiYhZC5oYz9cIlwiOih0aGlzLnRpdGxlfHxcIlwiKS5yZXBsYWNlKFwiJ1wiLFwiXCIpLGtleWRvd25GbjptLGZvY3VzRm46bixjbGlja0ZuOmV9O2sub3V0cHV0KGQsYik7aWYodGhpcy5vblJlbmRlcil0aGlzLm9uUmVuZGVyKCk7cmV0dXJuIGN9LGNyZWF0ZVBhbmVsOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl8ucGFuZWwpe3ZhciBiPXRoaXMuXy5wYW5lbERlZmluaXRpb24sZD10aGlzLl8ucGFuZWxEZWZpbml0aW9uLmJsb2NrLGs9Yi5wYXJlbnR8fENLRURJVE9SLmRvY3VtZW50LmdldEJvZHkoKSxoPVwiY2tlX2NvbWJvcGFuZWxfX1wiK3RoaXMubmFtZSxlPW5ldyBDS0VESVRPUi51aS5mbG9hdFBhbmVsKGEsayxiKSxmPWUuYWRkTGlzdEJsb2NrKHRoaXMuaWQsZCksYz10aGlzO2Uub25TaG93PWZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmFkZENsYXNzKGgpO2Muc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfT04pO1xuYy5fLm9uPTE7Yy5lZGl0b3JGb2N1cyYmIWEuZm9jdXNNYW5hZ2VyLmhhc0ZvY3VzJiZhLmZvY3VzKCk7aWYoYy5vbk9wZW4pYy5vbk9wZW4oKTthLm9uY2UoXCJwYW5lbFNob3dcIixmdW5jdGlvbigpe2YuZm9jdXMoIWYubXVsdGlTZWxlY3QmJmMuZ2V0VmFsdWUoKSl9KX07ZS5vbkhpZGU9ZnVuY3Rpb24oYil7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKGgpO2Muc2V0U3RhdGUoYy5tb2RlcyYmYy5tb2Rlc1thLm1vZGVdP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCk7Yy5fLm9uPTA7aWYoIWImJmMub25DbG9zZSljLm9uQ2xvc2UoKX07ZS5vbkVzY2FwZT1mdW5jdGlvbigpe2UuaGlkZSgxKX07Zi5vbkNsaWNrPWZ1bmN0aW9uKGEsYil7Yy5vbkNsaWNrJiZjLm9uQ2xpY2suY2FsbChjLGEsYik7ZS5oaWRlKCl9O3RoaXMuXy5wYW5lbD1lO3RoaXMuXy5saXN0PWY7ZS5nZXRCbG9jayh0aGlzLmlkKS5vbkhpZGU9ZnVuY3Rpb24oKXtjLl8ub249XG4wO2Muc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfT0ZGKX07dGhpcy5pbml0JiZ0aGlzLmluaXQoKX19LHNldFZhbHVlOmZ1bmN0aW9uKGEsYil7dGhpcy5fLnZhbHVlPWE7dmFyIGQ9dGhpcy5kb2N1bWVudC5nZXRCeUlkKFwiY2tlX1wiK3RoaXMuaWQrXCJfdGV4dFwiKTtkJiYoYXx8Yj9kLnJlbW92ZUNsYXNzKFwiY2tlX2NvbWJvX2lubGluZWxhYmVsXCIpOihiPXRoaXMubGFiZWwsZC5hZGRDbGFzcyhcImNrZV9jb21ib19pbmxpbmVsYWJlbFwiKSksZC5zZXRUZXh0KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiP2I6YSkpfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8udmFsdWV8fFwiXCJ9LHVubWFya0FsbDpmdW5jdGlvbigpe3RoaXMuXy5saXN0LnVubWFya0FsbCgpfSxtYXJrOmZ1bmN0aW9uKGEpe3RoaXMuXy5saXN0Lm1hcmsoYSl9LGhpZGVJdGVtOmZ1bmN0aW9uKGEpe3RoaXMuXy5saXN0LmhpZGVJdGVtKGEpfSxoaWRlR3JvdXA6ZnVuY3Rpb24oYSl7dGhpcy5fLmxpc3QuaGlkZUdyb3VwKGEpfSxcbnNob3dBbGw6ZnVuY3Rpb24oKXt0aGlzLl8ubGlzdC5zaG93QWxsKCl9LGFkZDpmdW5jdGlvbihhLGIsZCl7dGhpcy5fLml0ZW1zW2FdPWR8fGE7dGhpcy5fLmxpc3QuYWRkKGEsYixkKX0sc3RhcnRHcm91cDpmdW5jdGlvbihhKXt0aGlzLl8ubGlzdC5zdGFydEdyb3VwKGEpfSxjb21taXQ6ZnVuY3Rpb24oKXt0aGlzLl8uY29tbWl0dGVkfHwodGhpcy5fLmxpc3QuY29tbWl0KCksdGhpcy5fLmNvbW1pdHRlZD0xLENLRURJVE9SLnVpLmZpcmUoXCJyZWFkeVwiLHRoaXMpKTt0aGlzLl8uY29tbWl0dGVkPTF9LHNldFN0YXRlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuXy5zdGF0ZSE9YSl7dmFyIGI9dGhpcy5kb2N1bWVudC5nZXRCeUlkKFwiY2tlX1wiK3RoaXMuaWQpO2Iuc2V0U3RhdGUoYSxcImNrZV9jb21ib1wiKTthPT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRD9iLnNldEF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIiwhMCk6Yi5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIpO3RoaXMuXy5zdGF0ZT1cbmF9fSxnZXRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uc3RhdGV9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuXy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQmJnRoaXMuc2V0U3RhdGUodGhpcy5fLmxhc3RTdGF0ZSl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLl8uc3RhdGUhPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEJiYodGhpcy5fLmxhc3RTdGF0ZT10aGlzLl8uc3RhdGUsdGhpcy5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCkpfX0sc3RhdGljczp7aGFuZGxlcjp7Y3JlYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQ0tFRElUT1IudWkucmljaENvbWJvKGEpfX19fSk7Q0tFRElUT1IudWkucHJvdG90eXBlLmFkZFJpY2hDb21ibz1mdW5jdGlvbihhLGIpe3RoaXMuYWRkKGEsQ0tFRElUT1IuVUlfUklDSENPTUJPLGIpfX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbChhLGIsYyxmLHAsbCx0LHYpe3ZhciB3PWEuY29uZmlnLHE9bmV3IENLRURJVE9SLnN0eWxlKHQpLGs9cC5zcGxpdChcIjtcIik7cD1bXTtmb3IodmFyIG09e30sZD0wO2Q8ay5sZW5ndGg7ZCsrKXt2YXIgaD1rW2RdO2lmKGgpe3ZhciBoPWguc3BsaXQoXCIvXCIpLHU9e30sbj1rW2RdPWhbMF07dVtjXT1wW2RdPWhbMV18fG47bVtuXT1uZXcgQ0tFRElUT1Iuc3R5bGUodCx1KTttW25dLl8uZGVmaW5pdGlvbi5uYW1lPW59ZWxzZSBrLnNwbGljZShkLS0sMSl9YS51aS5hZGRSaWNoQ29tYm8oYix7bGFiZWw6Zi5sYWJlbCx0aXRsZTpmLnBhbmVsVGl0bGUsdG9vbGJhcjpcInN0eWxlcyxcIit2LGFsbG93ZWRDb250ZW50OnEscmVxdWlyZWRDb250ZW50OnEscGFuZWw6e2NzczpbQ0tFRElUT1Iuc2tpbi5nZXRQYXRoKFwiZWRpdG9yXCIpXS5jb25jYXQody5jb250ZW50c0NzcyksbXVsdGlTZWxlY3Q6ITEsYXR0cmlidXRlczp7XCJhcmlhLWxhYmVsXCI6Zi5wYW5lbFRpdGxlfX0sXG5pbml0OmZ1bmN0aW9uKCl7dGhpcy5zdGFydEdyb3VwKGYucGFuZWxUaXRsZSk7Zm9yKHZhciBhPTA7YTxrLmxlbmd0aDthKyspe3ZhciBiPWtbYV07dGhpcy5hZGQoYixtW2JdLmJ1aWxkUHJldmlldygpLGIpfX0sb25DbGljazpmdW5jdGlvbihiKXthLmZvY3VzKCk7YS5maXJlKFwic2F2ZVNuYXBzaG90XCIpO3ZhciBjPXRoaXMuZ2V0VmFsdWUoKSxmPW1bYl07aWYoYyYmYiE9Yyl7dmFyIGs9bVtjXSxlPWEuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VzKClbMF07aWYoZS5jb2xsYXBzZWQpe3ZhciBkPWEuZWxlbWVudFBhdGgoKSxnPWQuY29udGFpbnMoZnVuY3Rpb24oYSl7cmV0dXJuIGsuY2hlY2tFbGVtZW50UmVtb3ZhYmxlKGEpfSk7aWYoZyl7dmFyIGg9ZS5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGcsQ0tFRElUT1IuU1RBUlQpLGw9ZS5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGcsQ0tFRElUT1IuRU5EKTtpZihoJiZsKXtmb3IoaD1lLmNyZWF0ZUJvb2ttYXJrKCk7ZD1nLmdldEZpcnN0KCk7KWQuaW5zZXJ0QmVmb3JlKGcpO1xuZy5yZW1vdmUoKTtlLm1vdmVUb0Jvb2ttYXJrKGgpfWVsc2UgaD9lLm1vdmVUb1Bvc2l0aW9uKGcsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX1NUQVJUKTpsP2UubW92ZVRvUG9zaXRpb24oZyxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpOihlLnNwbGl0RWxlbWVudChnKSxlLm1vdmVUb1Bvc2l0aW9uKGcsQ0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EKSxyKGUsZC5lbGVtZW50cy5zbGljZSgpLGcpKTthLmdldFNlbGVjdGlvbigpLnNlbGVjdFJhbmdlcyhbZV0pfX1lbHNlIGEucmVtb3ZlU3R5bGUoayl9YVtjPT1iP1wicmVtb3ZlU3R5bGVcIjpcImFwcGx5U3R5bGVcIl0oZik7YS5maXJlKFwic2F2ZVNuYXBzaG90XCIpfSxvblJlbmRlcjpmdW5jdGlvbigpe2Eub24oXCJzZWxlY3Rpb25DaGFuZ2VcIixmdW5jdGlvbihiKXt2YXIgYz10aGlzLmdldFZhbHVlKCk7Yj1iLmRhdGEucGF0aC5lbGVtZW50cztmb3IodmFyIGQ9MCxmO2Q8Yi5sZW5ndGg7ZCsrKXtmPWJbZF07Zm9yKHZhciBlIGluIG0paWYobVtlXS5jaGVja0VsZW1lbnRNYXRjaChmLFxuITAsYSkpe2UhPWMmJnRoaXMuc2V0VmFsdWUoZSk7cmV0dXJufX10aGlzLnNldFZhbHVlKFwiXCIsbCl9LHRoaXMpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7YS5hY3RpdmVGaWx0ZXIuY2hlY2socSl8fHRoaXMuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpfX0pfWZ1bmN0aW9uIHIoYSxiLGMpe3ZhciBmPWIucG9wKCk7aWYoZil7aWYoYylyZXR1cm4gcihhLGIsZi5lcXVhbHMoYyk/bnVsbDpjKTtjPWYuY2xvbmUoKTthLmluc2VydE5vZGUoYyk7YS5tb3ZlVG9Qb3NpdGlvbihjLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKTtyKGEsYil9fUNLRURJVE9SLnBsdWdpbnMuYWRkKFwiZm9udFwiLHtyZXF1aXJlczpcInJpY2hjb21ib1wiLGluaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5jb25maWc7bChhLFwiRm9udFwiLFwiZmFtaWx5XCIsYS5sYW5nLmZvbnQsYi5mb250X25hbWVzLGIuZm9udF9kZWZhdWx0TGFiZWwsYi5mb250X3N0eWxlLDMwKTtsKGEsXCJGb250U2l6ZVwiLFwic2l6ZVwiLFxuYS5sYW5nLmZvbnQuZm9udFNpemUsYi5mb250U2l6ZV9zaXplcyxiLmZvbnRTaXplX2RlZmF1bHRMYWJlbCxiLmZvbnRTaXplX3N0eWxlLDQwKX19KX0pKCk7Q0tFRElUT1IuY29uZmlnLmZvbnRfbmFtZXM9XCJBcmlhbC9BcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO0NvbWljIFNhbnMgTVMvQ29taWMgU2FucyBNUywgY3Vyc2l2ZTtDb3VyaWVyIE5ldy9Db3VyaWVyIE5ldywgQ291cmllciwgbW9ub3NwYWNlO0dlb3JnaWEvR2VvcmdpYSwgc2VyaWY7THVjaWRhIFNhbnMgVW5pY29kZS9MdWNpZGEgU2FucyBVbmljb2RlLCBMdWNpZGEgR3JhbmRlLCBzYW5zLXNlcmlmO1RhaG9tYS9UYWhvbWEsIEdlbmV2YSwgc2Fucy1zZXJpZjtUaW1lcyBOZXcgUm9tYW4vVGltZXMgTmV3IFJvbWFuLCBUaW1lcywgc2VyaWY7VHJlYnVjaGV0IE1TL1RyZWJ1Y2hldCBNUywgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO1ZlcmRhbmEvVmVyZGFuYSwgR2VuZXZhLCBzYW5zLXNlcmlmXCI7XG5DS0VESVRPUi5jb25maWcuZm9udF9kZWZhdWx0TGFiZWw9XCJcIjtDS0VESVRPUi5jb25maWcuZm9udF9zdHlsZT17ZWxlbWVudDpcInNwYW5cIixzdHlsZXM6e1wiZm9udC1mYW1pbHlcIjpcIiMoZmFtaWx5KVwifSxvdmVycmlkZXM6W3tlbGVtZW50OlwiZm9udFwiLGF0dHJpYnV0ZXM6e2ZhY2U6bnVsbH19XX07Q0tFRElUT1IuY29uZmlnLmZvbnRTaXplX3NpemVzPVwiOC84cHg7OS85cHg7MTAvMTBweDsxMS8xMXB4OzEyLzEycHg7MTQvMTRweDsxNi8xNnB4OzE4LzE4cHg7MjAvMjBweDsyMi8yMnB4OzI0LzI0cHg7MjYvMjZweDsyOC8yOHB4OzM2LzM2cHg7NDgvNDhweDs3Mi83MnB4XCI7Q0tFRElUT1IuY29uZmlnLmZvbnRTaXplX2RlZmF1bHRMYWJlbD1cIlwiO0NLRURJVE9SLmNvbmZpZy5mb250U2l6ZV9zdHlsZT17ZWxlbWVudDpcInNwYW5cIixzdHlsZXM6e1wiZm9udC1zaXplXCI6XCIjKHNpemUpXCJ9LG92ZXJyaWRlczpbe2VsZW1lbnQ6XCJmb250XCIsYXR0cmlidXRlczp7c2l6ZTpudWxsfX1dfTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImZvcm1zXCIse3JlcXVpcmVzOlwiZGlhbG9nLGZha2VvYmplY3RzXCIsb25Mb2FkOmZ1bmN0aW9uKCl7Q0tFRElUT1IuYWRkQ3NzKFwiLmNrZV9lZGl0YWJsZSBmb3Jte2JvcmRlcjogMXB4IGRvdHRlZCAjRkYwMDAwO3BhZGRpbmc6IDJweDt9XFxuXCIpO0NLRURJVE9SLmFkZENzcyhcImltZy5ja2VfaGlkZGVue2JhY2tncm91bmQtaW1hZ2U6IHVybChcIitDS0VESVRPUi5nZXRVcmwodGhpcy5wYXRoK1wiaW1hZ2VzL2hpZGRlbmZpZWxkLmdpZlwiKStcIik7YmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcjtiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O2JvcmRlcjogMXB4IHNvbGlkICNhOWE5YTk7d2lkdGg6IDE2cHggIWltcG9ydGFudDtoZWlnaHQ6IDE2cHggIWltcG9ydGFudDt9XCIpfSxpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEubGFuZyxnPTAsaD17ZW1haWw6MSxwYXNzd29yZDoxLHNlYXJjaDoxLHRlbDoxLHRleHQ6MSx1cmw6MX0sbD17Y2hlY2tib3g6XCJpbnB1dFt0eXBlLG5hbWUsY2hlY2tlZCxyZXF1aXJlZF1cIixcbnJhZGlvOlwiaW5wdXRbdHlwZSxuYW1lLGNoZWNrZWQscmVxdWlyZWRdXCIsdGV4dGZpZWxkOlwiaW5wdXRbdHlwZSxuYW1lLHZhbHVlLHNpemUsbWF4bGVuZ3RoLHJlcXVpcmVkXVwiLHRleHRhcmVhOlwidGV4dGFyZWFbY29scyxyb3dzLG5hbWUscmVxdWlyZWRdXCIsc2VsZWN0Olwic2VsZWN0W25hbWUsc2l6ZSxtdWx0aXBsZSxyZXF1aXJlZF07IG9wdGlvblt2YWx1ZSxzZWxlY3RlZF1cIixidXR0b246XCJpbnB1dFt0eXBlLG5hbWUsdmFsdWVdXCIsZm9ybTpcImZvcm1bYWN0aW9uLG5hbWUsaWQsZW5jdHlwZSx0YXJnZXQsbWV0aG9kXVwiLGhpZGRlbmZpZWxkOlwiaW5wdXRbdHlwZSxuYW1lLHZhbHVlXVwiLGltYWdlYnV0dG9uOlwiaW5wdXRbdHlwZSxhbHQsc3JjXXt3aWR0aCxoZWlnaHQsYm9yZGVyLGJvcmRlci13aWR0aCxib3JkZXItc3R5bGUsbWFyZ2luLGZsb2F0fVwifSxtPXtjaGVja2JveDpcImlucHV0XCIscmFkaW86XCJpbnB1dFwiLHRleHRmaWVsZDpcImlucHV0XCIsdGV4dGFyZWE6XCJ0ZXh0YXJlYVwiLFxuc2VsZWN0Olwic2VsZWN0XCIsYnV0dG9uOlwiaW5wdXRcIixmb3JtOlwiZm9ybVwiLGhpZGRlbmZpZWxkOlwiaW5wdXRcIixpbWFnZWJ1dHRvbjpcImlucHV0XCJ9LGU9ZnVuY3Rpb24oZCxjLGUpe3ZhciBoPXthbGxvd2VkQ29udGVudDpsW2NdLHJlcXVpcmVkQ29udGVudDptW2NdfTtcImZvcm1cIj09YyYmKGguY29udGV4dD1cImZvcm1cIik7YS5hZGRDb21tYW5kKGMsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoYyxoKSk7YS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKGQse2xhYmVsOmIuY29tbW9uW2QuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkrZC5zbGljZSgxKV0sY29tbWFuZDpjLHRvb2xiYXI6XCJmb3JtcyxcIisoZys9MTApfSk7Q0tFRElUT1IuZGlhbG9nLmFkZChjLGUpfSxmPXRoaXMucGF0aCtcImRpYWxvZ3MvXCI7IWEuYmxvY2tsZXNzJiZlKFwiRm9ybVwiLFwiZm9ybVwiLGYrXCJmb3JtLmpzXCIpO2UoXCJDaGVja2JveFwiLFwiY2hlY2tib3hcIixmK1wiY2hlY2tib3guanNcIik7ZShcIlJhZGlvXCIsXCJyYWRpb1wiLFxuZitcInJhZGlvLmpzXCIpO2UoXCJUZXh0RmllbGRcIixcInRleHRmaWVsZFwiLGYrXCJ0ZXh0ZmllbGQuanNcIik7ZShcIlRleHRhcmVhXCIsXCJ0ZXh0YXJlYVwiLGYrXCJ0ZXh0YXJlYS5qc1wiKTtlKFwiU2VsZWN0XCIsXCJzZWxlY3RcIixmK1wic2VsZWN0LmpzXCIpO2UoXCJCdXR0b25cIixcImJ1dHRvblwiLGYrXCJidXR0b24uanNcIik7dmFyIGs9YS5wbHVnaW5zLmltYWdlO2smJiFhLnBsdWdpbnMuaW1hZ2UyJiZlKFwiSW1hZ2VCdXR0b25cIixcImltYWdlYnV0dG9uXCIsQ0tFRElUT1IucGx1Z2lucy5nZXRQYXRoKFwiaW1hZ2VcIikrXCJkaWFsb2dzL2ltYWdlLmpzXCIpO2UoXCJIaWRkZW5GaWVsZFwiLFwiaGlkZGVuZmllbGRcIixmK1wiaGlkZGVuZmllbGQuanNcIik7YS5hZGRNZW51SXRlbXMmJihlPXtjaGVja2JveDp7bGFiZWw6Yi5mb3Jtcy5jaGVja2JveEFuZFJhZGlvLmNoZWNrYm94VGl0bGUsY29tbWFuZDpcImNoZWNrYm94XCIsZ3JvdXA6XCJjaGVja2JveFwifSxyYWRpbzp7bGFiZWw6Yi5mb3Jtcy5jaGVja2JveEFuZFJhZGlvLnJhZGlvVGl0bGUsXG5jb21tYW5kOlwicmFkaW9cIixncm91cDpcInJhZGlvXCJ9LHRleHRmaWVsZDp7bGFiZWw6Yi5mb3Jtcy50ZXh0ZmllbGQudGl0bGUsY29tbWFuZDpcInRleHRmaWVsZFwiLGdyb3VwOlwidGV4dGZpZWxkXCJ9LGhpZGRlbmZpZWxkOntsYWJlbDpiLmZvcm1zLmhpZGRlbi50aXRsZSxjb21tYW5kOlwiaGlkZGVuZmllbGRcIixncm91cDpcImhpZGRlbmZpZWxkXCJ9LGJ1dHRvbjp7bGFiZWw6Yi5mb3Jtcy5idXR0b24udGl0bGUsY29tbWFuZDpcImJ1dHRvblwiLGdyb3VwOlwiYnV0dG9uXCJ9LHNlbGVjdDp7bGFiZWw6Yi5mb3Jtcy5zZWxlY3QudGl0bGUsY29tbWFuZDpcInNlbGVjdFwiLGdyb3VwOlwic2VsZWN0XCJ9LHRleHRhcmVhOntsYWJlbDpiLmZvcm1zLnRleHRhcmVhLnRpdGxlLGNvbW1hbmQ6XCJ0ZXh0YXJlYVwiLGdyb3VwOlwidGV4dGFyZWFcIn19LGsmJihlLmltYWdlYnV0dG9uPXtsYWJlbDpiLmltYWdlLnRpdGxlQnV0dG9uLGNvbW1hbmQ6XCJpbWFnZWJ1dHRvblwiLGdyb3VwOlwiaW1hZ2VidXR0b25cIn0pLCFhLmJsb2NrbGVzcyYmXG4oZS5mb3JtPXtsYWJlbDpiLmZvcm1zLmZvcm0ubWVudSxjb21tYW5kOlwiZm9ybVwiLGdyb3VwOlwiZm9ybVwifSksYS5hZGRNZW51SXRlbXMoZSkpO2EuY29udGV4dE1lbnUmJighYS5ibG9ja2xlc3MmJmEuY29udGV4dE1lbnUuYWRkTGlzdGVuZXIoZnVuY3Rpb24oZCxjLGEpe2lmKChkPWEuY29udGFpbnMoXCJmb3JtXCIsMSkpJiYhZC5pc1JlYWRPbmx5KCkpcmV0dXJue2Zvcm06Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfX0pLGEuY29udGV4dE1lbnUuYWRkTGlzdGVuZXIoZnVuY3Rpb24oZCl7aWYoZCYmIWQuaXNSZWFkT25seSgpKXt2YXIgYz1kLmdldE5hbWUoKTtpZihcInNlbGVjdFwiPT1jKXJldHVybntzZWxlY3Q6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfTtpZihcInRleHRhcmVhXCI9PWMpcmV0dXJue3RleHRhcmVhOkNLRURJVE9SLlRSSVNUQVRFX09GRn07aWYoXCJpbnB1dFwiPT1jKXt2YXIgYT1kLmdldEF0dHJpYnV0ZShcInR5cGVcIil8fFwidGV4dFwiO3N3aXRjaChhKXtjYXNlIFwiYnV0dG9uXCI6Y2FzZSBcInN1Ym1pdFwiOmNhc2UgXCJyZXNldFwiOnJldHVybntidXR0b246Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfTtcbmNhc2UgXCJjaGVja2JveFwiOnJldHVybntjaGVja2JveDpDS0VESVRPUi5UUklTVEFURV9PRkZ9O2Nhc2UgXCJyYWRpb1wiOnJldHVybntyYWRpbzpDS0VESVRPUi5UUklTVEFURV9PRkZ9O2Nhc2UgXCJpbWFnZVwiOnJldHVybiBrP3tpbWFnZWJ1dHRvbjpDS0VESVRPUi5UUklTVEFURV9PRkZ9Om51bGx9aWYoaFthXSlyZXR1cm57dGV4dGZpZWxkOkNLRURJVE9SLlRSSVNUQVRFX09GRn19aWYoXCJpbWdcIj09YyYmXCJoaWRkZW5maWVsZFwiPT1kLmRhdGEoXCJja2UtcmVhbC1lbGVtZW50LXR5cGVcIikpcmV0dXJue2hpZGRlbmZpZWxkOkNLRURJVE9SLlRSSVNUQVRFX09GRn19fSkpO2Eub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGQpe3ZhciBjPWQuZGF0YS5lbGVtZW50O2lmKCFhLmJsb2NrbGVzcyYmYy5pcyhcImZvcm1cIikpZC5kYXRhLmRpYWxvZz1cImZvcm1cIjtlbHNlIGlmKGMuaXMoXCJzZWxlY3RcIikpZC5kYXRhLmRpYWxvZz1cInNlbGVjdFwiO2Vsc2UgaWYoYy5pcyhcInRleHRhcmVhXCIpKWQuZGF0YS5kaWFsb2c9XG5cInRleHRhcmVhXCI7ZWxzZSBpZihjLmlzKFwiaW1nXCIpJiZcImhpZGRlbmZpZWxkXCI9PWMuZGF0YShcImNrZS1yZWFsLWVsZW1lbnQtdHlwZVwiKSlkLmRhdGEuZGlhbG9nPVwiaGlkZGVuZmllbGRcIjtlbHNlIGlmKGMuaXMoXCJpbnB1dFwiKSl7Yz1jLmdldEF0dHJpYnV0ZShcInR5cGVcIil8fFwidGV4dFwiO3N3aXRjaChjKXtjYXNlIFwiYnV0dG9uXCI6Y2FzZSBcInN1Ym1pdFwiOmNhc2UgXCJyZXNldFwiOmQuZGF0YS5kaWFsb2c9XCJidXR0b25cIjticmVhaztjYXNlIFwiY2hlY2tib3hcIjpkLmRhdGEuZGlhbG9nPVwiY2hlY2tib3hcIjticmVhaztjYXNlIFwicmFkaW9cIjpkLmRhdGEuZGlhbG9nPVwicmFkaW9cIjticmVhaztjYXNlIFwiaW1hZ2VcIjpkLmRhdGEuZGlhbG9nPVwiaW1hZ2VidXR0b25cIn1oW2NdJiYoZC5kYXRhLmRpYWxvZz1cInRleHRmaWVsZFwiKX19KX0sYWZ0ZXJJbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YVByb2Nlc3NvcixnPWImJmIuaHRtbEZpbHRlcixiPWImJmIuZGF0YUZpbHRlcjtDS0VESVRPUi5lbnYuaWUmJlxuZyYmZy5hZGRSdWxlcyh7ZWxlbWVudHM6e2lucHV0OmZ1bmN0aW9uKGEpe2E9YS5hdHRyaWJ1dGVzO3ZhciBiPWEudHlwZTtifHwoYS50eXBlPVwidGV4dFwiKTtcImNoZWNrYm94XCIhPWImJlwicmFkaW9cIiE9Ynx8XCJvblwiIT1hLnZhbHVlfHxkZWxldGUgYS52YWx1ZX19fSx7YXBwbHlUb0FsbDohMH0pO2ImJmIuYWRkUnVsZXMoe2VsZW1lbnRzOntpbnB1dDpmdW5jdGlvbihiKXtpZihcImhpZGRlblwiPT1iLmF0dHJpYnV0ZXMudHlwZSlyZXR1cm4gYS5jcmVhdGVGYWtlUGFyc2VyRWxlbWVudChiLFwiY2tlX2hpZGRlblwiLFwiaGlkZGVuZmllbGRcIil9fX0se2FwcGx5VG9BbGw6ITB9KX19KTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImZvcm1hdFwiLHtyZXF1aXJlczpcInJpY2hjb21ib1wiLGluaXQ6ZnVuY3Rpb24oYSl7aWYoIWEuYmxvY2tsZXNzKXtmb3IodmFyIGY9YS5jb25maWcsYz1hLmxhbmcuZm9ybWF0LGw9Zi5mb3JtYXRfdGFncy5zcGxpdChcIjtcIiksZD17fSxtPTAsbj1bXSxnPTA7ZzxsLmxlbmd0aDtnKyspe3ZhciBoPWxbZ10saz1uZXcgQ0tFRElUT1Iuc3R5bGUoZltcImZvcm1hdF9cIitoXSk7aWYoIWEuZmlsdGVyLmN1c3RvbUNvbmZpZ3x8YS5maWx0ZXIuY2hlY2soaykpbSsrLGRbaF09ayxkW2hdLl8uZW50ZXJNb2RlPWEuY29uZmlnLmVudGVyTW9kZSxuLnB1c2goayl9MCE9PW0mJmEudWkuYWRkUmljaENvbWJvKFwiRm9ybWF0XCIse2xhYmVsOmMubGFiZWwsdGl0bGU6Yy5wYW5lbFRpdGxlLHRvb2xiYXI6XCJzdHlsZXMsMjBcIixhbGxvd2VkQ29udGVudDpuLHBhbmVsOntjc3M6W0NLRURJVE9SLnNraW4uZ2V0UGF0aChcImVkaXRvclwiKV0uY29uY2F0KGYuY29udGVudHNDc3MpLFxubXVsdGlTZWxlY3Q6ITEsYXR0cmlidXRlczp7XCJhcmlhLWxhYmVsXCI6Yy5wYW5lbFRpdGxlfX0saW5pdDpmdW5jdGlvbigpe3RoaXMuc3RhcnRHcm91cChjLnBhbmVsVGl0bGUpO2Zvcih2YXIgYSBpbiBkKXt2YXIgZT1jW1widGFnX1wiK2FdO3RoaXMuYWRkKGEsZFthXS5idWlsZFByZXZpZXcoZSksZSl9fSxvbkNsaWNrOmZ1bmN0aW9uKGIpe2EuZm9jdXMoKTthLmZpcmUoXCJzYXZlU25hcHNob3RcIik7Yj1kW2JdO3ZhciBlPWEuZWxlbWVudFBhdGgoKTthW2IuY2hlY2tBY3RpdmUoZSxhKT9cInJlbW92ZVN0eWxlXCI6XCJhcHBseVN0eWxlXCJdKGIpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXthLmZpcmUoXCJzYXZlU25hcHNob3RcIil9LDApfSxvblJlbmRlcjpmdW5jdGlvbigpe2Eub24oXCJzZWxlY3Rpb25DaGFuZ2VcIixmdW5jdGlvbihiKXt2YXIgZT10aGlzLmdldFZhbHVlKCk7Yj1iLmRhdGEucGF0aDt0aGlzLnJlZnJlc2goKTtmb3IodmFyIGMgaW4gZClpZihkW2NdLmNoZWNrQWN0aXZlKGIsYSkpe2MhPVxuZSYmdGhpcy5zZXRWYWx1ZShjLGEubGFuZy5mb3JtYXRbXCJ0YWdfXCIrY10pO3JldHVybn10aGlzLnNldFZhbHVlKFwiXCIpfSx0aGlzKX0sb25PcGVuOmZ1bmN0aW9uKCl7dGhpcy5zaG93QWxsKCk7Zm9yKHZhciBiIGluIGQpYS5hY3RpdmVGaWx0ZXIuY2hlY2soZFtiXSl8fHRoaXMuaGlkZUl0ZW0oYil9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgYj1hLmVsZW1lbnRQYXRoKCk7aWYoYil7aWYoYi5pc0NvbnRleHRGb3IoXCJwXCIpKWZvcih2YXIgYyBpbiBkKWlmKGEuYWN0aXZlRmlsdGVyLmNoZWNrKGRbY10pKXJldHVybjt0aGlzLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKX19fSl9fX0pO0NLRURJVE9SLmNvbmZpZy5mb3JtYXRfdGFncz1cInA7aDE7aDI7aDM7aDQ7aDU7aDY7cHJlO2FkZHJlc3M7ZGl2XCI7Q0tFRElUT1IuY29uZmlnLmZvcm1hdF9wPXtlbGVtZW50OlwicFwifTtDS0VESVRPUi5jb25maWcuZm9ybWF0X2Rpdj17ZWxlbWVudDpcImRpdlwifTtcbkNLRURJVE9SLmNvbmZpZy5mb3JtYXRfcHJlPXtlbGVtZW50OlwicHJlXCJ9O0NLRURJVE9SLmNvbmZpZy5mb3JtYXRfYWRkcmVzcz17ZWxlbWVudDpcImFkZHJlc3NcIn07Q0tFRElUT1IuY29uZmlnLmZvcm1hdF9oMT17ZWxlbWVudDpcImgxXCJ9O0NLRURJVE9SLmNvbmZpZy5mb3JtYXRfaDI9e2VsZW1lbnQ6XCJoMlwifTtDS0VESVRPUi5jb25maWcuZm9ybWF0X2gzPXtlbGVtZW50OlwiaDNcIn07Q0tFRElUT1IuY29uZmlnLmZvcm1hdF9oND17ZWxlbWVudDpcImg0XCJ9O0NLRURJVE9SLmNvbmZpZy5mb3JtYXRfaDU9e2VsZW1lbnQ6XCJoNVwifTtDS0VESVRPUi5jb25maWcuZm9ybWF0X2g2PXtlbGVtZW50OlwiaDZcIn07KGZ1bmN0aW9uKCl7dmFyIGI9e2NhblVuZG86ITEsZXhlYzpmdW5jdGlvbihhKXt2YXIgYj1hLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoclwiKTthLmluc2VydEVsZW1lbnQoYil9LGFsbG93ZWRDb250ZW50OlwiaHJcIixyZXF1aXJlZENvbnRlbnQ6XCJoclwifTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImhvcml6b250YWxydWxlXCIse2luaXQ6ZnVuY3Rpb24oYSl7YS5ibG9ja2xlc3N8fChhLmFkZENvbW1hbmQoXCJob3Jpem9udGFscnVsZVwiLGIpLGEudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIkhvcml6b250YWxSdWxlXCIse2xhYmVsOmEubGFuZy5ob3Jpem9udGFscnVsZS50b29sYmFyLGNvbW1hbmQ6XCJob3Jpem9udGFscnVsZVwiLHRvb2xiYXI6XCJpbnNlcnQsNDBcIn0pKX19KX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJodG1sd3JpdGVyXCIse2luaXQ6ZnVuY3Rpb24oYil7dmFyIGE9bmV3IENLRURJVE9SLmh0bWxXcml0ZXI7YS5mb3JjZVNpbXBsZUFtcGVyc2FuZD1iLmNvbmZpZy5mb3JjZVNpbXBsZUFtcGVyc2FuZDthLmluZGVudGF0aW9uQ2hhcnM9Yi5jb25maWcuZGF0YUluZGVudGF0aW9uQ2hhcnN8fFwiXFx0XCI7Yi5kYXRhUHJvY2Vzc29yLndyaXRlcj1hfX0pO1xuQ0tFRElUT1IuaHRtbFdyaXRlcj1DS0VESVRPUi50b29scy5jcmVhdGVDbGFzcyh7YmFzZTpDS0VESVRPUi5odG1sUGFyc2VyLmJhc2ljV3JpdGVyLCQ6ZnVuY3Rpb24oKXt0aGlzLmJhc2UoKTt0aGlzLmluZGVudGF0aW9uQ2hhcnM9XCJcXHRcIjt0aGlzLnNlbGZDbG9zaW5nRW5kPVwiIC9cXHgzZVwiO3RoaXMubGluZUJyZWFrQ2hhcnM9XCJcXG5cIjt0aGlzLnNvcnRBdHRyaWJ1dGVzPTE7dGhpcy5fLmluZGVudD0wO3RoaXMuXy5pbmRlbnRhdGlvbj1cIlwiO3RoaXMuXy5pblByZT0wO3RoaXMuXy5ydWxlcz17fTt2YXIgYj1DS0VESVRPUi5kdGQsYTtmb3IoYSBpbiBDS0VESVRPUi50b29scy5leHRlbmQoe30sYi4kbm9uQm9keUNvbnRlbnQsYi4kYmxvY2ssYi4kbGlzdEl0ZW0sYi4kdGFibGVDb250ZW50KSl0aGlzLnNldFJ1bGVzKGEse2luZGVudDohYlthXVtcIiNcIl0sYnJlYWtCZWZvcmVPcGVuOjEsYnJlYWtCZWZvcmVDbG9zZTohYlthXVtcIiNcIl0sYnJlYWtBZnRlckNsb3NlOjEsbmVlZHNTcGFjZTphIGluXG5iLiRibG9jayYmIShhIGlue2xpOjEsZHQ6MSxkZDoxfSl9KTt0aGlzLnNldFJ1bGVzKFwiYnJcIix7YnJlYWtBZnRlck9wZW46MX0pO3RoaXMuc2V0UnVsZXMoXCJ0aXRsZVwiLHtpbmRlbnQ6MCxicmVha0FmdGVyT3BlbjowfSk7dGhpcy5zZXRSdWxlcyhcInN0eWxlXCIse2luZGVudDowLGJyZWFrQmVmb3JlQ2xvc2U6MX0pO3RoaXMuc2V0UnVsZXMoXCJwcmVcIix7YnJlYWtBZnRlck9wZW46MSxpbmRlbnQ6MH0pfSxwcm90bzp7b3BlblRhZzpmdW5jdGlvbihiKXt2YXIgYT10aGlzLl8ucnVsZXNbYl07dGhpcy5fLmFmdGVyQ2xvc2VyJiZhJiZhLm5lZWRzU3BhY2UmJnRoaXMuXy5uZWVkc1NwYWNlJiZ0aGlzLl8ub3V0cHV0LnB1c2goXCJcXG5cIik7dGhpcy5fLmluZGVudD90aGlzLmluZGVudGF0aW9uKCk6YSYmYS5icmVha0JlZm9yZU9wZW4mJih0aGlzLmxpbmVCcmVhaygpLHRoaXMuaW5kZW50YXRpb24oKSk7dGhpcy5fLm91dHB1dC5wdXNoKFwiXFx4M2NcIixiKTt0aGlzLl8uYWZ0ZXJDbG9zZXI9MH0sXG5vcGVuVGFnQ2xvc2U6ZnVuY3Rpb24oYixhKXt2YXIgYz10aGlzLl8ucnVsZXNbYl07YT8odGhpcy5fLm91dHB1dC5wdXNoKHRoaXMuc2VsZkNsb3NpbmdFbmQpLGMmJmMuYnJlYWtBZnRlckNsb3NlJiYodGhpcy5fLm5lZWRzU3BhY2U9Yy5uZWVkc1NwYWNlKSk6KHRoaXMuXy5vdXRwdXQucHVzaChcIlxceDNlXCIpLGMmJmMuaW5kZW50JiYodGhpcy5fLmluZGVudGF0aW9uKz10aGlzLmluZGVudGF0aW9uQ2hhcnMpKTtjJiZjLmJyZWFrQWZ0ZXJPcGVuJiZ0aGlzLmxpbmVCcmVhaygpO1wicHJlXCI9PWImJih0aGlzLl8uaW5QcmU9MSl9LGF0dHJpYnV0ZTpmdW5jdGlvbihiLGEpe1wic3RyaW5nXCI9PXR5cGVvZiBhJiYodGhpcy5mb3JjZVNpbXBsZUFtcGVyc2FuZCYmKGE9YS5yZXBsYWNlKC8mYW1wOy9nLFwiXFx4MjZcIikpLGE9Q0tFRElUT1IudG9vbHMuaHRtbEVuY29kZUF0dHIoYSkpO3RoaXMuXy5vdXRwdXQucHVzaChcIiBcIixiLCdcXHgzZFwiJyxhLCdcIicpfSxjbG9zZVRhZzpmdW5jdGlvbihiKXt2YXIgYT1cbnRoaXMuXy5ydWxlc1tiXTthJiZhLmluZGVudCYmKHRoaXMuXy5pbmRlbnRhdGlvbj10aGlzLl8uaW5kZW50YXRpb24uc3Vic3RyKHRoaXMuaW5kZW50YXRpb25DaGFycy5sZW5ndGgpKTt0aGlzLl8uaW5kZW50P3RoaXMuaW5kZW50YXRpb24oKTphJiZhLmJyZWFrQmVmb3JlQ2xvc2UmJih0aGlzLmxpbmVCcmVhaygpLHRoaXMuaW5kZW50YXRpb24oKSk7dGhpcy5fLm91dHB1dC5wdXNoKFwiXFx4M2MvXCIsYixcIlxceDNlXCIpO1wicHJlXCI9PWImJih0aGlzLl8uaW5QcmU9MCk7YSYmYS5icmVha0FmdGVyQ2xvc2UmJih0aGlzLmxpbmVCcmVhaygpLHRoaXMuXy5uZWVkc1NwYWNlPWEubmVlZHNTcGFjZSk7dGhpcy5fLmFmdGVyQ2xvc2VyPTF9LHRleHQ6ZnVuY3Rpb24oYil7dGhpcy5fLmluZGVudCYmKHRoaXMuaW5kZW50YXRpb24oKSwhdGhpcy5fLmluUHJlJiYoYj1DS0VESVRPUi50b29scy5sdHJpbShiKSkpO3RoaXMuXy5vdXRwdXQucHVzaChiKX0sY29tbWVudDpmdW5jdGlvbihiKXt0aGlzLl8uaW5kZW50JiZcbnRoaXMuaW5kZW50YXRpb24oKTt0aGlzLl8ub3V0cHV0LnB1c2goXCJcXHgzYyEtLVwiLGIsXCItLVxceDNlXCIpfSxsaW5lQnJlYWs6ZnVuY3Rpb24oKXshdGhpcy5fLmluUHJlJiYwPHRoaXMuXy5vdXRwdXQubGVuZ3RoJiZ0aGlzLl8ub3V0cHV0LnB1c2godGhpcy5saW5lQnJlYWtDaGFycyk7dGhpcy5fLmluZGVudD0xfSxpbmRlbnRhdGlvbjpmdW5jdGlvbigpeyF0aGlzLl8uaW5QcmUmJnRoaXMuXy5pbmRlbnRhdGlvbiYmdGhpcy5fLm91dHB1dC5wdXNoKHRoaXMuXy5pbmRlbnRhdGlvbik7dGhpcy5fLmluZGVudD0wfSxyZXNldDpmdW5jdGlvbigpe3RoaXMuXy5vdXRwdXQ9W107dGhpcy5fLmluZGVudD0wO3RoaXMuXy5pbmRlbnRhdGlvbj1cIlwiO3RoaXMuXy5hZnRlckNsb3Nlcj0wO3RoaXMuXy5pblByZT0wO3RoaXMuXy5uZWVkc1NwYWNlPTB9LHNldFJ1bGVzOmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcy5fLnJ1bGVzW2JdO2M/Q0tFRElUT1IudG9vbHMuZXh0ZW5kKGMsYSwhMCk6dGhpcy5fLnJ1bGVzW2JdPVxuYX19fSk7KGZ1bmN0aW9uKCl7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJpZnJhbWVcIix7cmVxdWlyZXM6XCJkaWFsb2csZmFrZW9iamVjdHNcIixvbkxvYWQ6ZnVuY3Rpb24oKXtDS0VESVRPUi5hZGRDc3MoXCJpbWcuY2tlX2lmcmFtZXtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIrQ0tFRElUT1IuZ2V0VXJsKHRoaXMucGF0aCtcImltYWdlcy9wbGFjZWhvbGRlci5wbmdcIikrXCIpO2JhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7YmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtib3JkZXI6IDFweCBzb2xpZCAjYTlhOWE5O3dpZHRoOiA4MHB4O2hlaWdodDogODBweDt9XCIpfSxpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEubGFuZy5pZnJhbWUsYz1cImlmcmFtZVthbGlnbixsb25nZGVzYyxmcmFtZWJvcmRlcixoZWlnaHQsbmFtZSxzY3JvbGxpbmcsc3JjLHRpdGxlLHdpZHRoXVwiO2EucGx1Z2lucy5kaWFsb2dhZHZ0YWImJihjKz1cIjtpZnJhbWVcIithLnBsdWdpbnMuZGlhbG9nYWR2dGFiLmFsbG93ZWRDb250ZW50KHtpZDoxLFxuY2xhc3NlczoxLHN0eWxlczoxfSkpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJpZnJhbWVcIix0aGlzLnBhdGgrXCJkaWFsb2dzL2lmcmFtZS5qc1wiKTthLmFkZENvbW1hbmQoXCJpZnJhbWVcIixuZXcgQ0tFRElUT1IuZGlhbG9nQ29tbWFuZChcImlmcmFtZVwiLHthbGxvd2VkQ29udGVudDpjLHJlcXVpcmVkQ29udGVudDpcImlmcmFtZVwifSkpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIklmcmFtZVwiLHtsYWJlbDpiLnRvb2xiYXIsY29tbWFuZDpcImlmcmFtZVwiLHRvb2xiYXI6XCJpbnNlcnQsODBcIn0pO2Eub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YS5lbGVtZW50O2IuaXMoXCJpbWdcIikmJlwiaWZyYW1lXCI9PWIuZGF0YShcImNrZS1yZWFsLWVsZW1lbnQtdHlwZVwiKSYmKGEuZGF0YS5kaWFsb2c9XCJpZnJhbWVcIil9KTthLmFkZE1lbnVJdGVtcyYmYS5hZGRNZW51SXRlbXMoe2lmcmFtZTp7bGFiZWw6Yi50aXRsZSxjb21tYW5kOlwiaWZyYW1lXCIsZ3JvdXA6XCJpbWFnZVwifX0pO1xuYS5jb250ZXh0TWVudSYmYS5jb250ZXh0TWVudS5hZGRMaXN0ZW5lcihmdW5jdGlvbihhKXtpZihhJiZhLmlzKFwiaW1nXCIpJiZcImlmcmFtZVwiPT1hLmRhdGEoXCJja2UtcmVhbC1lbGVtZW50LXR5cGVcIikpcmV0dXJue2lmcmFtZTpDS0VESVRPUi5UUklTVEFURV9PRkZ9fSl9LGFmdGVySW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLmRhdGFQcm9jZXNzb3I7KGI9YiYmYi5kYXRhRmlsdGVyKSYmYi5hZGRSdWxlcyh7ZWxlbWVudHM6e2lmcmFtZTpmdW5jdGlvbihiKXtyZXR1cm4gYS5jcmVhdGVGYWtlUGFyc2VyRWxlbWVudChiLFwiY2tlX2lmcmFtZVwiLFwiaWZyYW1lXCIsITApfX19KX19KX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbShhKXtmdW5jdGlvbiBmKGEpe3ZhciBiPSExO2cuYXR0YWNoTGlzdGVuZXIoZyxcImtleWRvd25cIixmdW5jdGlvbigpe3ZhciBkPWMuZ2V0Qm9keSgpLmdldEVsZW1lbnRzQnlUYWcoYSk7aWYoIWIpe2Zvcih2YXIgZT0wO2U8ZC5jb3VudCgpO2UrKylkLmdldEl0ZW0oZSkuc2V0Q3VzdG9tRGF0YShcInJldGFpblwiLCEwKTtiPSEwfX0sbnVsbCxudWxsLDEpO2cuYXR0YWNoTGlzdGVuZXIoZyxcImtleXVwXCIsZnVuY3Rpb24oKXt2YXIgZD1jLmdldEVsZW1lbnRzQnlUYWcoYSk7YiYmKDEhPWQuY291bnQoKXx8ZC5nZXRJdGVtKDApLmdldEN1c3RvbURhdGEoXCJyZXRhaW5cIil8fGQuZ2V0SXRlbSgwKS5oYXNBdHRyaWJ1dGUoXCJkYXRhLWNrZS10ZW1wXCIpfHxkLmdldEl0ZW0oMCkucmVtb3ZlKDEpLGI9ITEpfSl9dmFyIGI9dGhpcy5lZGl0b3IsYz1hLmRvY3VtZW50LGQ9Yy5ib2R5LGU9Yy5nZXRFbGVtZW50QnlJZChcImNrZV9hY3RzY3JwdFwiKTtlJiZlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSk7XG4oZT1jLmdldEVsZW1lbnRCeUlkKFwiY2tlX3NoaW1zY3JwdFwiKSkmJmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTsoZT1jLmdldEVsZW1lbnRCeUlkKFwiY2tlX2Jhc2V0YWdzY3JwdFwiKSkmJmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTtkLmNvbnRlbnRFZGl0YWJsZT0hMDtDS0VESVRPUi5lbnYuaWUmJihkLmhpZGVGb2N1cz0hMCxkLmRpc2FibGVkPSEwLGQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIikpO2RlbGV0ZSB0aGlzLl8uaXNMb2FkaW5nRGF0YTt0aGlzLiQ9ZDtjPW5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnQoYyk7dGhpcy5zZXR1cCgpO3RoaXMuZml4SW5pdGlhbFNlbGVjdGlvbigpO3ZhciBnPXRoaXM7Q0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LmVkZ2UmJmMuZ2V0RG9jdW1lbnRFbGVtZW50KCkuYWRkQ2xhc3MoYy4kLmNvbXBhdE1vZGUpO0NLRURJVE9SLmVudi5pZSYmIUNLRURJVE9SLmVudi5lZGdlJiZiLmVudGVyTW9kZSE9Q0tFRElUT1IuRU5URVJfUD9cbmYoXCJwXCIpOkNLRURJVE9SLmVudi5lZGdlJiZiLmVudGVyTW9kZSE9Q0tFRElUT1IuRU5URVJfRElWJiZmKFwiZGl2XCIpO2lmKENLRURJVE9SLmVudi53ZWJraXR8fENLRURJVE9SLmVudi5pZSYmMTA8Q0tFRElUT1IuZW52LnZlcnNpb24pYy5nZXREb2N1bWVudEVsZW1lbnQoKS5vbihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGEpe2EuZGF0YS5nZXRUYXJnZXQoKS5pcyhcImh0bWxcIikmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmVkaXRhYmxlKCkuZm9jdXMoKX0pfSk7bihiKTt0cnl7Yi5kb2N1bWVudC4kLmV4ZWNDb21tYW5kKFwiMkQtcG9zaXRpb25cIiwhMSwhMCl9Y2F0Y2goaCl7fShDS0VESVRPUi5lbnYuZ2Vja298fENLRURJVE9SLmVudi5pZSYmXCJDU1MxQ29tcGF0XCI9PWIuZG9jdW1lbnQuJC5jb21wYXRNb2RlKSYmdGhpcy5hdHRhY2hMaXN0ZW5lcih0aGlzLFwia2V5ZG93blwiLGZ1bmN0aW9uKGEpe3ZhciBjPWEuZGF0YS5nZXRLZXlzdHJva2UoKTtpZigzMz09Y3x8MzQ9PWMpaWYoQ0tFRElUT1IuZW52LmllKXNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmdldFNlbGVjdGlvbigpLnNjcm9sbEludG9WaWV3KCl9LFxuMCk7ZWxzZSBpZihiLndpbmRvdy4kLmlubmVySGVpZ2h0PnRoaXMuJC5vZmZzZXRIZWlnaHQpe3ZhciBkPWIuY3JlYXRlUmFuZ2UoKTtkWzMzPT1jP1wibW92ZVRvRWxlbWVudEVkaXRTdGFydFwiOlwibW92ZVRvRWxlbWVudEVkaXRFbmRcIl0odGhpcyk7ZC5zZWxlY3QoKTthLmRhdGEucHJldmVudERlZmF1bHQoKX19KTtDS0VESVRPUi5lbnYuaWUmJnRoaXMuYXR0YWNoTGlzdGVuZXIoYyxcImJsdXJcIixmdW5jdGlvbigpe3RyeXtjLiQuc2VsZWN0aW9uLmVtcHR5KCl9Y2F0Y2goYSl7fX0pO0NLRURJVE9SLmVudi5pT1MmJnRoaXMuYXR0YWNoTGlzdGVuZXIoYyxcInRvdWNoZW5kXCIsZnVuY3Rpb24oKXthLmZvY3VzKCl9KTtkPWIuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZyhcInRpdGxlXCIpLmdldEl0ZW0oMCk7ZC5kYXRhKFwiY2tlLXRpdGxlXCIsZC5nZXRUZXh0KCkpO0NLRURJVE9SLmVudi5pZSYmKGIuZG9jdW1lbnQuJC50aXRsZT10aGlzLl8uZG9jVGl0bGUpO0NLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtcInVubG9hZGVkXCI9PVxudGhpcy5zdGF0dXMmJih0aGlzLnN0YXR1cz1cInJlYWR5XCIpO2IuZmlyZShcImNvbnRlbnREb21cIik7dGhpcy5fLmlzUGVuZGluZ0ZvY3VzJiYoYi5mb2N1cygpLHRoaXMuXy5pc1BlbmRpbmdGb2N1cz0hMSk7c2V0VGltZW91dChmdW5jdGlvbigpe2IuZmlyZShcImRhdGFSZWFkeVwiKX0sMCl9LDAsdGhpcyl9ZnVuY3Rpb24gbihhKXtmdW5jdGlvbiBmKCl7dmFyIGM7YS5lZGl0YWJsZSgpLmF0dGFjaExpc3RlbmVyKGEsXCJzZWxlY3Rpb25DaGFuZ2VcIixmdW5jdGlvbigpe3ZhciBkPWEuZ2V0U2VsZWN0aW9uKCkuZ2V0U2VsZWN0ZWRFbGVtZW50KCk7ZCYmKGMmJihjLmRldGFjaEV2ZW50KFwib25yZXNpemVzdGFydFwiLGIpLGM9bnVsbCksZC4kLmF0dGFjaEV2ZW50KFwib25yZXNpemVzdGFydFwiLGIpLGM9ZC4kKX0pfWZ1bmN0aW9uIGIoYSl7YS5yZXR1cm5WYWx1ZT0hMX1pZihDS0VESVRPUi5lbnYuZ2Vja28pdHJ5e3ZhciBjPWEuZG9jdW1lbnQuJDtjLmV4ZWNDb21tYW5kKFwiZW5hYmxlT2JqZWN0UmVzaXppbmdcIixcbiExLCFhLmNvbmZpZy5kaXNhYmxlT2JqZWN0UmVzaXppbmcpO2MuZXhlY0NvbW1hbmQoXCJlbmFibGVJbmxpbmVUYWJsZUVkaXRpbmdcIiwhMSwhYS5jb25maWcuZGlzYWJsZU5hdGl2ZVRhYmxlSGFuZGxlcyl9Y2F0Y2goZCl7fWVsc2UgQ0tFRElUT1IuZW52LmllJiYxMT5DS0VESVRPUi5lbnYudmVyc2lvbiYmYS5jb25maWcuZGlzYWJsZU9iamVjdFJlc2l6aW5nJiZmKGEpfWZ1bmN0aW9uIHAoKXt2YXIgYT1bXTtpZig4PD1DS0VESVRPUi5kb2N1bWVudC4kLmRvY3VtZW50TW9kZSl7YS5wdXNoKFwiaHRtbC5DU1MxQ29tcGF0IFtjb250ZW50ZWRpdGFibGVcXHgzZGZhbHNlXXttaW4taGVpZ2h0OjAgIWltcG9ydGFudH1cIik7dmFyIGY9W10sYjtmb3IoYiBpbiBDS0VESVRPUi5kdGQuJHJlbW92ZUVtcHR5KWYucHVzaChcImh0bWwuQ1NTMUNvbXBhdCBcIitiK1wiW2NvbnRlbnRlZGl0YWJsZVxceDNkZmFsc2VdXCIpO2EucHVzaChmLmpvaW4oXCIsXCIpK1wie2Rpc3BsYXk6aW5saW5lLWJsb2NrfVwiKX1lbHNlIENLRURJVE9SLmVudi5nZWNrbyYmXG4oYS5wdXNoKFwiaHRtbHtoZWlnaHQ6MTAwJSAhaW1wb3J0YW50fVwiKSxhLnB1c2goXCJpbWc6LW1vei1icm9rZW57LW1vei1mb3JjZS1icm9rZW4taW1hZ2UtaWNvbjoxO21pbi13aWR0aDoyNHB4O21pbi1oZWlnaHQ6MjRweH1cIikpO2EucHVzaChcImh0bWx7Y3Vyc29yOnRleHQ7KmN1cnNvcjphdXRvfVwiKTthLnB1c2goXCJpbWcsaW5wdXQsdGV4dGFyZWF7Y3Vyc29yOmRlZmF1bHR9XCIpO3JldHVybiBhLmpvaW4oXCJcXG5cIil9dmFyIGw7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJ3eXNpd3lnYXJlYVwiLHtpbml0OmZ1bmN0aW9uKGEpe2EuY29uZmlnLmZ1bGxQYWdlJiZhLmFkZEZlYXR1cmUoe2FsbG93ZWRDb250ZW50OlwiaHRtbCBoZWFkIHRpdGxlOyBzdHlsZSBbbWVkaWEsdHlwZV07IGJvZHkgKCopW2lkXTsgbWV0YSBsaW5rIFsqXVwiLHJlcXVpcmVkQ29udGVudDpcImJvZHlcIn0pO2EuYWRkTW9kZShcInd5c2l3eWdcIixmdW5jdGlvbihmKXtmdW5jdGlvbiBiKGIpe2ImJmIucmVtb3ZlTGlzdGVuZXIoKTtcbmEuZWRpdGFibGUobmV3IGwoYSxkLiQuY29udGVudFdpbmRvdy5kb2N1bWVudC5ib2R5KSk7YS5zZXREYXRhKGEuZ2V0RGF0YSgxKSxmKX12YXIgYz1cImRvY3VtZW50Lm9wZW4oKTtcIisoQ0tFRElUT1IuZW52LmllP1wiKFwiK0NLRURJVE9SLnRvb2xzLmZpeERvbWFpbitcIikoKTtcIjpcIlwiKStcImRvY3VtZW50LmNsb3NlKCk7XCIsYz1DS0VESVRPUi5lbnYuYWlyP1wiamF2YXNjcmlwdDp2b2lkKDApXCI6Q0tFRElUT1IuZW52LmllJiYhQ0tFRElUT1IuZW52LmVkZ2U/XCJqYXZhc2NyaXB0OnZvaWQoZnVuY3Rpb24oKXtcIitlbmNvZGVVUklDb21wb25lbnQoYykrXCJ9KCkpXCI6XCJcIixkPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKCdcXHgzY2lmcmFtZSBzcmNcXHgzZFwiJytjKydcIiBmcmFtZUJvcmRlclxceDNkXCIwXCJcXHgzZVxceDNjL2lmcmFtZVxceDNlJyk7ZC5zZXRTdHlsZXMoe3dpZHRoOlwiMTAwJVwiLGhlaWdodDpcIjEwMCVcIn0pO2QuYWRkQ2xhc3MoXCJja2Vfd3lzaXd5Z19mcmFtZVwiKS5hZGRDbGFzcyhcImNrZV9yZXNldFwiKTtcbmM9YS51aS5zcGFjZShcImNvbnRlbnRzXCIpO2MuYXBwZW5kKGQpO3ZhciBlPUNLRURJVE9SLmVudi5pZSYmIUNLRURJVE9SLmVudi5lZGdlfHxDS0VESVRPUi5lbnYuZ2Vja287aWYoZSlkLm9uKFwibG9hZFwiLGIpO3ZhciBnPWEudGl0bGUsaD1hLmZpcmUoXCJhcmlhRWRpdG9ySGVscExhYmVsXCIse30pLmxhYmVsO2cmJihDS0VESVRPUi5lbnYuaWUmJmgmJihnKz1cIiwgXCIraCksZC5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLGcpKTtpZihoKXt2YXIgZz1DS0VESVRPUi50b29scy5nZXROZXh0SWQoKSxrPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKCdcXHgzY3NwYW4gaWRcXHgzZFwiJytnKydcIiBjbGFzc1xceDNkXCJja2Vfdm9pY2VfbGFiZWxcIlxceDNlJytoK1wiXFx4M2Mvc3BhblxceDNlXCIpO2MuYXBwZW5kKGssMSk7ZC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWRlc2NyaWJlZGJ5XCIsZyl9YS5vbihcImJlZm9yZU1vZGVVbmxvYWRcIixmdW5jdGlvbihhKXthLnJlbW92ZUxpc3RlbmVyKCk7ayYmay5yZW1vdmUoKX0pO1xuZC5zZXRBdHRyaWJ1dGVzKHt0YWJJbmRleDphLnRhYkluZGV4LGFsbG93VHJhbnNwYXJlbmN5OlwidHJ1ZVwifSk7IWUmJmIoKTthLmZpcmUoXCJhcmlhV2lkZ2V0XCIsZCl9KX19KTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmFkZENvbnRlbnRzQ3NzPWZ1bmN0aW9uKGEpe3ZhciBmPXRoaXMuY29uZmlnLGI9Zi5jb250ZW50c0NzcztDS0VESVRPUi50b29scy5pc0FycmF5KGIpfHwoZi5jb250ZW50c0Nzcz1iP1tiXTpbXSk7Zi5jb250ZW50c0Nzcy5wdXNoKGEpfTtsPUNLRURJVE9SLnRvb2xzLmNyZWF0ZUNsYXNzKHskOmZ1bmN0aW9uKCl7dGhpcy5iYXNlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl8uZnJhbWVMb2FkZWRIYW5kbGVyPUNLRURJVE9SLnRvb2xzLmFkZEZ1bmN0aW9uKGZ1bmN0aW9uKGEpe0NLRURJVE9SLnRvb2xzLnNldFRpbWVvdXQobSwwLHRoaXMsYSl9LHRoaXMpO3RoaXMuXy5kb2NUaXRsZT10aGlzLmdldFdpbmRvdygpLmdldEZyYW1lKCkuZ2V0QXR0cmlidXRlKFwidGl0bGVcIil9LFxuYmFzZTpDS0VESVRPUi5lZGl0YWJsZSxwcm90bzp7c2V0RGF0YTpmdW5jdGlvbihhLGYpe3ZhciBiPXRoaXMuZWRpdG9yO2lmKGYpdGhpcy5zZXRIdG1sKGEpLHRoaXMuZml4SW5pdGlhbFNlbGVjdGlvbigpLGIuZmlyZShcImRhdGFSZWFkeVwiKTtlbHNle3RoaXMuXy5pc0xvYWRpbmdEYXRhPSEwO2IuXy5kYXRhU3RvcmU9e2lkOjF9O3ZhciBjPWIuY29uZmlnLGQ9Yy5mdWxsUGFnZSxlPWMuZG9jVHlwZSxnPUNLRURJVE9SLnRvb2xzLmJ1aWxkU3R5bGVIdG1sKHAoKSkucmVwbGFjZSgvPHN0eWxlPi8sJ1xceDNjc3R5bGUgZGF0YS1ja2UtdGVtcFxceDNkXCIxXCJcXHgzZScpO2R8fChnKz1DS0VESVRPUi50b29scy5idWlsZFN0eWxlSHRtbChiLmNvbmZpZy5jb250ZW50c0NzcykpO3ZhciBoPWMuYmFzZUhyZWY/J1xceDNjYmFzZSBocmVmXFx4M2RcIicrYy5iYXNlSHJlZisnXCIgZGF0YS1ja2UtdGVtcFxceDNkXCIxXCIgL1xceDNlJzpcIlwiO2QmJihhPWEucmVwbGFjZSgvPCFET0NUWVBFW14+XSo+L2ksZnVuY3Rpb24oYSl7Yi5kb2NUeXBlPVxuZT1hO3JldHVyblwiXCJ9KS5yZXBsYWNlKC88XFw/eG1sXFxzW15cXD9dKlxcPz4vaSxmdW5jdGlvbihhKXtiLnhtbERlY2xhcmF0aW9uPWE7cmV0dXJuXCJcIn0pKTthPWIuZGF0YVByb2Nlc3Nvci50b0h0bWwoYSk7ZD8oLzxib2R5W1xcc3w+XS8udGVzdChhKXx8KGE9XCJcXHgzY2JvZHlcXHgzZVwiK2EpLC88aHRtbFtcXHN8Pl0vLnRlc3QoYSl8fChhPVwiXFx4M2NodG1sXFx4M2VcIithK1wiXFx4M2MvaHRtbFxceDNlXCIpLC88aGVhZFtcXHN8Pl0vLnRlc3QoYSk/Lzx0aXRsZVtcXHN8Pl0vLnRlc3QoYSl8fChhPWEucmVwbGFjZSgvPGhlYWRbXj5dKj4vLFwiJFxceDI2XFx4M2N0aXRsZVxceDNlXFx4M2MvdGl0bGVcXHgzZVwiKSk6YT1hLnJlcGxhY2UoLzxodG1sW14+XSo+LyxcIiRcXHgyNlxceDNjaGVhZFxceDNlXFx4M2N0aXRsZVxceDNlXFx4M2MvdGl0bGVcXHgzZVxceDNjL2hlYWRcXHgzZVwiKSxoJiYoYT1hLnJlcGxhY2UoLzxoZWFkW14+XSo/Pi8sXCIkXFx4MjZcIitoKSksYT1hLnJlcGxhY2UoLzxcXC9oZWFkXFxzKj4vLGcrXCIkXFx4MjZcIiksYT1cbmUrYSk6YT1jLmRvY1R5cGUrJ1xceDNjaHRtbCBkaXJcXHgzZFwiJytjLmNvbnRlbnRzTGFuZ0RpcmVjdGlvbisnXCIgbGFuZ1xceDNkXCInKyhjLmNvbnRlbnRzTGFuZ3VhZ2V8fGIubGFuZ0NvZGUpKydcIlxceDNlXFx4M2NoZWFkXFx4M2VcXHgzY3RpdGxlXFx4M2UnK3RoaXMuXy5kb2NUaXRsZStcIlxceDNjL3RpdGxlXFx4M2VcIitoK2crXCJcXHgzYy9oZWFkXFx4M2VcXHgzY2JvZHlcIisoYy5ib2R5SWQ/JyBpZFxceDNkXCInK2MuYm9keUlkKydcIic6XCJcIikrKGMuYm9keUNsYXNzPycgY2xhc3NcXHgzZFwiJytjLmJvZHlDbGFzcysnXCInOlwiXCIpK1wiXFx4M2VcIithK1wiXFx4M2MvYm9keVxceDNlXFx4M2MvaHRtbFxceDNlXCI7Q0tFRElUT1IuZW52LmdlY2tvJiYoYT1hLnJlcGxhY2UoLzxib2R5LywnXFx4M2Nib2R5IGNvbnRlbnRlZGl0YWJsZVxceDNkXCJ0cnVlXCIgJyksMkU0PkNLRURJVE9SLmVudi52ZXJzaW9uJiYoYT1hLnJlcGxhY2UoLzxib2R5W14+XSo+LyxcIiRcXHgyNlxceDNjIS0tIGNrZS1jb250ZW50LXN0YXJ0IC0tXFx4M2VcIikpKTtcbmM9J1xceDNjc2NyaXB0IGlkXFx4M2RcImNrZV9hY3RzY3JwdFwiIHR5cGVcXHgzZFwidGV4dC9qYXZhc2NyaXB0XCInKyhDS0VESVRPUi5lbnYuaWU/JyBkZWZlclxceDNkXCJkZWZlclwiICc6XCJcIikrXCJcXHgzZXZhciB3YXNMb2FkZWRcXHgzZDA7ZnVuY3Rpb24gb25sb2FkKCl7aWYoIXdhc0xvYWRlZCl3aW5kb3cucGFyZW50LkNLRURJVE9SLnRvb2xzLmNhbGxGdW5jdGlvbihcIit0aGlzLl8uZnJhbWVMb2FkZWRIYW5kbGVyK1wiLHdpbmRvdyk7d2FzTG9hZGVkXFx4M2QxO31cIisoQ0tFRElUT1IuZW52LmllP1wib25sb2FkKCk7XCI6J2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIG9ubG9hZCwgZmFsc2UgKTsnKStcIlxceDNjL3NjcmlwdFxceDNlXCI7Q0tFRElUT1IuZW52LmllJiY5PkNLRURJVE9SLmVudi52ZXJzaW9uJiYoYys9J1xceDNjc2NyaXB0IGlkXFx4M2RcImNrZV9zaGltc2NycHRcIlxceDNld2luZG93LnBhcmVudC5DS0VESVRPUi50b29scy5lbmFibGVIdG1sNUVsZW1lbnRzKGRvY3VtZW50KVxceDNjL3NjcmlwdFxceDNlJyk7XG5oJiZDS0VESVRPUi5lbnYuaWUmJjEwPkNLRURJVE9SLmVudi52ZXJzaW9uJiYoYys9J1xceDNjc2NyaXB0IGlkXFx4M2RcImNrZV9iYXNldGFnc2NycHRcIlxceDNldmFyIGJhc2VUYWcgXFx4M2QgZG9jdW1lbnQucXVlcnlTZWxlY3RvciggXCJiYXNlXCIgKTtiYXNlVGFnLmhyZWYgXFx4M2QgYmFzZVRhZy5ocmVmO1xceDNjL3NjcmlwdFxceDNlJyk7YT1hLnJlcGxhY2UoLyg/PVxccyo8XFwvKDo/aGVhZCk+KS8sYyk7dGhpcy5jbGVhckN1c3RvbURhdGEoKTt0aGlzLmNsZWFyTGlzdGVuZXJzKCk7Yi5maXJlKFwiY29udGVudERvbVVubG9hZFwiKTt2YXIgaz10aGlzLmdldERvY3VtZW50KCk7dHJ5e2sud3JpdGUoYSl9Y2F0Y2gobCl7c2V0VGltZW91dChmdW5jdGlvbigpe2sud3JpdGUoYSl9LDApfX19LGdldERhdGE6ZnVuY3Rpb24oYSl7aWYoYSlyZXR1cm4gdGhpcy5nZXRIdG1sKCk7YT10aGlzLmVkaXRvcjt2YXIgZj1hLmNvbmZpZyxiPWYuZnVsbFBhZ2UsYz1iJiZhLmRvY1R5cGUsZD1iJiZhLnhtbERlY2xhcmF0aW9uLFxuZT10aGlzLmdldERvY3VtZW50KCksYj1iP2UuZ2V0RG9jdW1lbnRFbGVtZW50KCkuZ2V0T3V0ZXJIdG1sKCk6ZS5nZXRCb2R5KCkuZ2V0SHRtbCgpO0NLRURJVE9SLmVudi5nZWNrbyYmZi5lbnRlck1vZGUhPUNLRURJVE9SLkVOVEVSX0JSJiYoYj1iLnJlcGxhY2UoLzxicj4oPz1cXHMqKDo/JHw8XFwvYm9keT4pKS8sXCJcIikpO2I9YS5kYXRhUHJvY2Vzc29yLnRvRGF0YUZvcm1hdChiKTtkJiYoYj1kK1wiXFxuXCIrYik7YyYmKGI9YytcIlxcblwiK2IpO3JldHVybiBifSxmb2N1czpmdW5jdGlvbigpe3RoaXMuXy5pc0xvYWRpbmdEYXRhP3RoaXMuXy5pc1BlbmRpbmdGb2N1cz0hMDpsLmJhc2VQcm90by5mb2N1cy5jYWxsKHRoaXMpfSxkZXRhY2g6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVkaXRvcixmPWEuZG9jdW1lbnQsYjt0cnl7Yj1hLndpbmRvdy5nZXRGcmFtZSgpfWNhdGNoKGMpe31sLmJhc2VQcm90by5kZXRhY2guY2FsbCh0aGlzKTt0aGlzLmNsZWFyQ3VzdG9tRGF0YSgpO2YuZ2V0RG9jdW1lbnRFbGVtZW50KCkuY2xlYXJDdXN0b21EYXRhKCk7XG5DS0VESVRPUi50b29scy5yZW1vdmVGdW5jdGlvbih0aGlzLl8uZnJhbWVMb2FkZWRIYW5kbGVyKTtiJiZiLmdldFBhcmVudCgpPyhiLmNsZWFyQ3VzdG9tRGF0YSgpLChhPWIucmVtb3ZlQ3VzdG9tRGF0YShcIm9uUmVzaXplXCIpKSYmYS5yZW1vdmVMaXN0ZW5lcigpLGIucmVtb3ZlKCkpOkNLRURJVE9SLndhcm4oXCJlZGl0b3ItZGVzdHJveS1pZnJhbWVcIil9fX0pfSkoKTtDS0VESVRPUi5jb25maWcuZGlzYWJsZU9iamVjdFJlc2l6aW5nPSExO0NLRURJVE9SLmNvbmZpZy5kaXNhYmxlTmF0aXZlVGFibGVIYW5kbGVzPSEwO0NLRURJVE9SLmNvbmZpZy5kaXNhYmxlTmF0aXZlU3BlbGxDaGVja2VyPSEwOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGUoYixhKXthfHwoYT1iLmdldFNlbGVjdGlvbigpLmdldFNlbGVjdGVkRWxlbWVudCgpKTtpZihhJiZhLmlzKFwiaW1nXCIpJiYhYS5kYXRhKFwiY2tlLXJlYWxlbGVtZW50XCIpJiYhYS5pc1JlYWRPbmx5KCkpcmV0dXJuIGF9ZnVuY3Rpb24gZihiKXt2YXIgYT1iLmdldFN0eWxlKFwiZmxvYXRcIik7aWYoXCJpbmhlcml0XCI9PWF8fFwibm9uZVwiPT1hKWE9MDthfHwoYT1iLmdldEF0dHJpYnV0ZShcImFsaWduXCIpKTtyZXR1cm4gYX1DS0VESVRPUi5wbHVnaW5zLmFkZChcImltYWdlXCIse3JlcXVpcmVzOlwiZGlhbG9nXCIsaW5pdDpmdW5jdGlvbihiKXtpZighYi5wbHVnaW5zLmltYWdlMil7Q0tFRElUT1IuZGlhbG9nLmFkZChcImltYWdlXCIsdGhpcy5wYXRoK1wiZGlhbG9ncy9pbWFnZS5qc1wiKTt2YXIgYT1cImltZ1thbHQsIXNyY117Ym9yZGVyLXN0eWxlLGJvcmRlci13aWR0aCxmbG9hdCxoZWlnaHQsbWFyZ2luLG1hcmdpbi1ib3R0b20sbWFyZ2luLWxlZnQsbWFyZ2luLXJpZ2h0LG1hcmdpbi10b3Asd2lkdGh9XCI7XG5DS0VESVRPUi5kaWFsb2cuaXNUYWJFbmFibGVkKGIsXCJpbWFnZVwiLFwiYWR2YW5jZWRcIikmJihhPVwiaW1nW2FsdCxkaXIsaWQsbGFuZyxsb25nZGVzYywhc3JjLHRpdGxlXXsqfSgqKVwiKTtiLmFkZENvbW1hbmQoXCJpbWFnZVwiLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwiaW1hZ2VcIix7YWxsb3dlZENvbnRlbnQ6YSxyZXF1aXJlZENvbnRlbnQ6XCJpbWdbYWx0LHNyY11cIixjb250ZW50VHJhbnNmb3JtYXRpb25zOltbXCJpbWd7d2lkdGh9OiBzaXplVG9TdHlsZVwiLFwiaW1nW3dpZHRoXTogc2l6ZVRvQXR0cmlidXRlXCJdLFtcImltZ3tmbG9hdH06IGFsaWdubWVudFRvU3R5bGVcIixcImltZ1thbGlnbl06IGFsaWdubWVudFRvQXR0cmlidXRlXCJdXX0pKTtiLnVpLmFkZEJ1dHRvbiYmYi51aS5hZGRCdXR0b24oXCJJbWFnZVwiLHtsYWJlbDpiLmxhbmcuY29tbW9uLmltYWdlLGNvbW1hbmQ6XCJpbWFnZVwiLHRvb2xiYXI6XCJpbnNlcnQsMTBcIn0pO2Iub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGIpe3ZhciBhPVxuYi5kYXRhLmVsZW1lbnQ7IWEuaXMoXCJpbWdcIil8fGEuZGF0YShcImNrZS1yZWFsZWxlbWVudFwiKXx8YS5pc1JlYWRPbmx5KCl8fChiLmRhdGEuZGlhbG9nPVwiaW1hZ2VcIil9KTtiLmFkZE1lbnVJdGVtcyYmYi5hZGRNZW51SXRlbXMoe2ltYWdlOntsYWJlbDpiLmxhbmcuaW1hZ2UubWVudSxjb21tYW5kOlwiaW1hZ2VcIixncm91cDpcImltYWdlXCJ9fSk7Yi5jb250ZXh0TWVudSYmYi5jb250ZXh0TWVudS5hZGRMaXN0ZW5lcihmdW5jdGlvbihhKXtpZihlKGIsYSkpcmV0dXJue2ltYWdlOkNLRURJVE9SLlRSSVNUQVRFX09GRn19KX19LGFmdGVySW5pdDpmdW5jdGlvbihiKXtmdW5jdGlvbiBhKGEpe3ZhciBkPWIuZ2V0Q29tbWFuZChcImp1c3RpZnlcIithKTtpZihkKXtpZihcImxlZnRcIj09YXx8XCJyaWdodFwiPT1hKWQub24oXCJleGVjXCIsZnVuY3Rpb24oZCl7dmFyIGM9ZShiKSxnO2MmJihnPWYoYyksZz09YT8oYy5yZW1vdmVTdHlsZShcImZsb2F0XCIpLGE9PWYoYykmJmMucmVtb3ZlQXR0cmlidXRlKFwiYWxpZ25cIikpOlxuYy5zZXRTdHlsZShcImZsb2F0XCIsYSksZC5jYW5jZWwoKSl9KTtkLm9uKFwicmVmcmVzaFwiLGZ1bmN0aW9uKGQpe3ZhciBjPWUoYik7YyYmKGM9ZihjKSx0aGlzLnNldFN0YXRlKGM9PWE/Q0tFRElUT1IuVFJJU1RBVEVfT046XCJyaWdodFwiPT1hfHxcImxlZnRcIj09YT9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpLGQuY2FuY2VsKCkpfSl9fWIucGx1Z2lucy5pbWFnZTJ8fChhKFwibGVmdFwiKSxhKFwicmlnaHRcIiksYShcImNlbnRlclwiKSxhKFwiYmxvY2tcIikpfX0pfSkoKTtDS0VESVRPUi5jb25maWcuaW1hZ2VfcmVtb3ZlTGlua0J5RW1wdHlVUkw9ITA7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbShhLGIpe3ZhciBlLGY7Yi5vbihcInJlZnJlc2hcIixmdW5jdGlvbihhKXt2YXIgYj1ba10sYztmb3IoYyBpbiBhLmRhdGEuc3RhdGVzKWIucHVzaChhLmRhdGEuc3RhdGVzW2NdKTt0aGlzLnNldFN0YXRlKENLRURJVE9SLnRvb2xzLnNlYXJjaChiLHApP3A6ayl9LGIsbnVsbCwxMDApO2Iub24oXCJleGVjXCIsZnVuY3Rpb24oYil7ZT1hLmdldFNlbGVjdGlvbigpO2Y9ZS5jcmVhdGVCb29rbWFya3MoMSk7Yi5kYXRhfHwoYi5kYXRhPXt9KTtiLmRhdGEuZG9uZT0hMX0sYixudWxsLDApO2Iub24oXCJleGVjXCIsZnVuY3Rpb24oKXthLmZvcmNlTmV4dFNlbGVjdGlvbkNoZWNrKCk7ZS5zZWxlY3RCb29rbWFya3MoZil9LGIsbnVsbCwxMDApfXZhciBrPUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELHA9Q0tFRElUT1IuVFJJU1RBVEVfT0ZGO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiaW5kZW50XCIse2luaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9Q0tFRElUT1IucGx1Z2lucy5pbmRlbnQuZ2VuZXJpY0RlZmluaXRpb247XG5tKGEsYS5hZGRDb21tYW5kKFwiaW5kZW50XCIsbmV3IGIoITApKSk7bShhLGEuYWRkQ29tbWFuZChcIm91dGRlbnRcIixuZXcgYikpO2EudWkuYWRkQnV0dG9uJiYoYS51aS5hZGRCdXR0b24oXCJJbmRlbnRcIix7bGFiZWw6YS5sYW5nLmluZGVudC5pbmRlbnQsY29tbWFuZDpcImluZGVudFwiLGRpcmVjdGlvbmFsOiEwLHRvb2xiYXI6XCJpbmRlbnQsMjBcIn0pLGEudWkuYWRkQnV0dG9uKFwiT3V0ZGVudFwiLHtsYWJlbDphLmxhbmcuaW5kZW50Lm91dGRlbnQsY29tbWFuZDpcIm91dGRlbnRcIixkaXJlY3Rpb25hbDohMCx0b29sYmFyOlwiaW5kZW50LDEwXCJ9KSk7YS5vbihcImRpckNoYW5nZWRcIixmdW5jdGlvbihiKXt2YXIgZj1hLmNyZWF0ZVJhbmdlKCksbD1iLmRhdGEubm9kZTtmLnNldFN0YXJ0QmVmb3JlKGwpO2Yuc2V0RW5kQWZ0ZXIobCk7Zm9yKHZhciBuPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGYpLGM7Yz1uLm5leHQoKTspaWYoYy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQpaWYoIWMuZXF1YWxzKGwpJiZcbmMuZ2V0RGlyZWN0aW9uKCkpZi5zZXRTdGFydEFmdGVyKGMpLG49bmV3IENLRURJVE9SLmRvbS53YWxrZXIoZik7ZWxzZXt2YXIgZD1hLmNvbmZpZy5pbmRlbnRDbGFzc2VzO2lmKGQpZm9yKHZhciBnPVwibHRyXCI9PWIuZGF0YS5kaXI/W1wiX3J0bFwiLFwiXCJdOltcIlwiLFwiX3J0bFwiXSxoPTA7aDxkLmxlbmd0aDtoKyspYy5oYXNDbGFzcyhkW2hdK2dbMF0pJiYoYy5yZW1vdmVDbGFzcyhkW2hdK2dbMF0pLGMuYWRkQ2xhc3MoZFtoXStnWzFdKSk7ZD1jLmdldFN0eWxlKFwibWFyZ2luLXJpZ2h0XCIpO2c9Yy5nZXRTdHlsZShcIm1hcmdpbi1sZWZ0XCIpO2Q/Yy5zZXRTdHlsZShcIm1hcmdpbi1sZWZ0XCIsZCk6Yy5yZW1vdmVTdHlsZShcIm1hcmdpbi1sZWZ0XCIpO2c/Yy5zZXRTdHlsZShcIm1hcmdpbi1yaWdodFwiLGcpOmMucmVtb3ZlU3R5bGUoXCJtYXJnaW4tcmlnaHRcIil9fSl9fSk7Q0tFRElUT1IucGx1Z2lucy5pbmRlbnQ9e2dlbmVyaWNEZWZpbml0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuaXNJbmRlbnQ9ISFhO1xudGhpcy5zdGFydERpc2FibGVkPSF0aGlzLmlzSW5kZW50fSxzcGVjaWZpY0RlZmluaXRpb246ZnVuY3Rpb24oYSxiLGUpe3RoaXMubmFtZT1iO3RoaXMuZWRpdG9yPWE7dGhpcy5qb2JzPXt9O3RoaXMuZW50ZXJCcj1hLmNvbmZpZy5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX0JSO3RoaXMuaXNJbmRlbnQ9ISFlO3RoaXMucmVsYXRlZEdsb2JhbD1lP1wiaW5kZW50XCI6XCJvdXRkZW50XCI7dGhpcy5pbmRlbnRLZXk9ZT85OkNLRURJVE9SLlNISUZUKzk7dGhpcy5kYXRhYmFzZT17fX0scmVnaXN0ZXJDb21tYW5kczpmdW5jdGlvbihhLGIpe2Eub24oXCJwbHVnaW5zTG9hZGVkXCIsZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gYikoZnVuY3Rpb24oYSxiKXt2YXIgZT1hLmdldENvbW1hbmQoYi5yZWxhdGVkR2xvYmFsKSxjO2ZvcihjIGluIGIuam9icyllLm9uKFwiZXhlY1wiLGZ1bmN0aW9uKGQpe2QuZGF0YS5kb25lfHwoYS5maXJlKFwibG9ja1NuYXBzaG90XCIpLGIuZXhlY0pvYihhLGMpJiYoZC5kYXRhLmRvbmU9XG4hMCksYS5maXJlKFwidW5sb2NrU25hcHNob3RcIiksQ0tFRElUT1IuZG9tLmVsZW1lbnQuY2xlYXJBbGxNYXJrZXJzKGIuZGF0YWJhc2UpKX0sdGhpcyxudWxsLGMpLGUub24oXCJyZWZyZXNoXCIsZnVuY3Rpb24oZCl7ZC5kYXRhLnN0YXRlc3x8KGQuZGF0YS5zdGF0ZXM9e30pO2QuZGF0YS5zdGF0ZXNbYi5uYW1lK1wiQFwiK2NdPWIucmVmcmVzaEpvYihhLGMsZC5kYXRhLnBhdGgpfSx0aGlzLG51bGwsYyk7YS5hZGRGZWF0dXJlKGIpfSkodGhpcyxiW2FdKX0pfX07Q0tFRElUT1IucGx1Z2lucy5pbmRlbnQuZ2VuZXJpY0RlZmluaXRpb24ucHJvdG90eXBlPXtjb250ZXh0OlwicFwiLGV4ZWM6ZnVuY3Rpb24oKXt9fTtDS0VESVRPUi5wbHVnaW5zLmluZGVudC5zcGVjaWZpY0RlZmluaXRpb24ucHJvdG90eXBlPXtleGVjSm9iOmZ1bmN0aW9uKGEsYil7dmFyIGU9dGhpcy5qb2JzW2JdO2lmKGUuc3RhdGUhPWspcmV0dXJuIGUuZXhlYy5jYWxsKHRoaXMsYSl9LHJlZnJlc2hKb2I6ZnVuY3Rpb24oYSxcbmIsZSl7Yj10aGlzLmpvYnNbYl07YS5hY3RpdmVGaWx0ZXIuY2hlY2tGZWF0dXJlKHRoaXMpP2Iuc3RhdGU9Yi5yZWZyZXNoLmNhbGwodGhpcyxhLGUpOmIuc3RhdGU9aztyZXR1cm4gYi5zdGF0ZX0sZ2V0Q29udGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250YWlucyh0aGlzLmNvbnRleHQpfX19KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGYoYixjLGEpe2lmKCFiLmdldEN1c3RvbURhdGEoXCJpbmRlbnRfcHJvY2Vzc2VkXCIpKXt2YXIgZD10aGlzLmVkaXRvcixsPXRoaXMuaXNJbmRlbnQ7aWYoYyl7ZD1iLiQuY2xhc3NOYW1lLm1hdGNoKHRoaXMuY2xhc3NOYW1lUmVnZXgpO2E9MDtkJiYoZD1kWzFdLGE9Q0tFRElUT1IudG9vbHMuaW5kZXhPZihjLGQpKzEpO2lmKDA+KGErPWw/MTotMSkpcmV0dXJuO2E9TWF0aC5taW4oYSxjLmxlbmd0aCk7YT1NYXRoLm1heChhLDApO2IuJC5jbGFzc05hbWU9Q0tFRElUT1IudG9vbHMubHRyaW0oYi4kLmNsYXNzTmFtZS5yZXBsYWNlKHRoaXMuY2xhc3NOYW1lUmVnZXgsXCJcIikpOzA8YSYmYi5hZGRDbGFzcyhjW2EtMV0pfWVsc2V7Yz1tKGIsYSk7YT1wYXJzZUludChiLmdldFN0eWxlKGMpLDEwKTt2YXIgZz1kLmNvbmZpZy5pbmRlbnRPZmZzZXR8fDQwO2lzTmFOKGEpJiYoYT0wKTthKz0obD8xOi0xKSpnO2lmKDA+YSlyZXR1cm47YT1NYXRoLm1heChhLFxuMCk7YT1NYXRoLmNlaWwoYS9nKSpnO2Iuc2V0U3R5bGUoYyxhP2ErKGQuY29uZmlnLmluZGVudFVuaXR8fFwicHhcIik6XCJcIik7XCJcIj09PWIuZ2V0QXR0cmlidXRlKFwic3R5bGVcIikmJmIucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIil9Q0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyKHRoaXMuZGF0YWJhc2UsYixcImluZGVudF9wcm9jZXNzZWRcIiwxKX19ZnVuY3Rpb24gbShiLGMpe3JldHVyblwibHRyXCI9PShjfHxiLmdldENvbXB1dGVkU3R5bGUoXCJkaXJlY3Rpb25cIikpP1wibWFyZ2luLWxlZnRcIjpcIm1hcmdpbi1yaWdodFwifXZhciBoPUNLRURJVE9SLmR0ZC4kbGlzdEl0ZW0scD1DS0VESVRPUi5kdGQuJGxpc3Qsaz1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxuPUNLRURJVE9SLlRSSVNUQVRFX09GRjtDS0VESVRPUi5wbHVnaW5zLmFkZChcImluZGVudGJsb2NrXCIse3JlcXVpcmVzOlwiaW5kZW50XCIsaW5pdDpmdW5jdGlvbihiKXtmdW5jdGlvbiBjKCl7YS5zcGVjaWZpY0RlZmluaXRpb24uYXBwbHkodGhpcyxcbmFyZ3VtZW50cyk7dGhpcy5hbGxvd2VkQ29udGVudD17XCJkaXYgaDEgaDIgaDMgaDQgaDUgaDYgb2wgcCBwcmUgdWxcIjp7cHJvcGVydGllc09ubHk6ITAsc3R5bGVzOmQ/bnVsbDpcIm1hcmdpbi1sZWZ0LG1hcmdpbi1yaWdodFwiLGNsYXNzZXM6ZHx8bnVsbH19O3RoaXMuZW50ZXJCciYmKHRoaXMuYWxsb3dlZENvbnRlbnQuZGl2PSEwKTt0aGlzLnJlcXVpcmVkQ29udGVudD0odGhpcy5lbnRlckJyP1wiZGl2XCI6XCJwXCIpKyhkP1wiKFwiK2Quam9pbihcIixcIikrXCIpXCI6XCJ7bWFyZ2luLWxlZnR9XCIpO3RoaXMuam9icz17MjA6e3JlZnJlc2g6ZnVuY3Rpb24oYSxiKXt2YXIgZT1iLmJsb2NrfHxiLmJsb2NrTGltaXQ7aWYoIWUuaXMoaCkpdmFyIGM9ZS5nZXRBc2NlbmRhbnQoaCksZT1jJiZiLmNvbnRhaW5zKGMpfHxlO2UuaXMoaCkmJihlPWUuZ2V0UGFyZW50KCkpO2lmKHRoaXMuZW50ZXJCcnx8dGhpcy5nZXRDb250ZXh0KGIpKXtpZihkKXt2YXIgYz1kLGU9ZS4kLmNsYXNzTmFtZS5tYXRjaCh0aGlzLmNsYXNzTmFtZVJlZ2V4KSxcbmY9dGhpcy5pc0luZGVudCxjPWU/Zj9lWzFdIT1jLnNsaWNlKC0xKTohMDpmO3JldHVybiBjP246a31yZXR1cm4gdGhpcy5pc0luZGVudD9uOmU/Q0tFRElUT1JbMD49KHBhcnNlSW50KGUuZ2V0U3R5bGUobShlKSksMTApfHwwKT9cIlRSSVNUQVRFX0RJU0FCTEVEXCI6XCJUUklTVEFURV9PRkZcIl06a31yZXR1cm4ga30sZXhlYzpmdW5jdGlvbihhKXt2YXIgYj1hLmdldFNlbGVjdGlvbigpLGI9YiYmYi5nZXRSYW5nZXMoKVswXSxjO2lmKGM9YS5lbGVtZW50UGF0aCgpLmNvbnRhaW5zKHApKWYuY2FsbCh0aGlzLGMsZCk7ZWxzZSBmb3IoYj1iLmNyZWF0ZUl0ZXJhdG9yKCksYT1hLmNvbmZpZy5lbnRlck1vZGUsYi5lbmZvcmNlUmVhbEJsb2Nrcz0hMCxiLmVubGFyZ2VCcj1hIT1DS0VESVRPUi5FTlRFUl9CUjtjPWIuZ2V0TmV4dFBhcmFncmFwaChhPT1DS0VESVRPUi5FTlRFUl9QP1wicFwiOlwiZGl2XCIpOyljLmlzUmVhZE9ubHkoKXx8Zi5jYWxsKHRoaXMsYyxkKTtyZXR1cm4hMH19fX12YXIgYT1cbkNLRURJVE9SLnBsdWdpbnMuaW5kZW50LGQ9Yi5jb25maWcuaW5kZW50Q2xhc3NlczthLnJlZ2lzdGVyQ29tbWFuZHMoYix7aW5kZW50YmxvY2s6bmV3IGMoYixcImluZGVudGJsb2NrXCIsITApLG91dGRlbnRibG9jazpuZXcgYyhiLFwib3V0ZGVudGJsb2NrXCIpfSk7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKGMucHJvdG90eXBlLGEuc3BlY2lmaWNEZWZpbml0aW9uLnByb3RvdHlwZSx7Y29udGV4dDp7ZGl2OjEsZGw6MSxoMToxLGgyOjEsaDM6MSxoNDoxLGg1OjEsaDY6MSx1bDoxLG9sOjEscDoxLHByZToxLHRhYmxlOjF9LGNsYXNzTmFtZVJlZ2V4OmQ/bmV3IFJlZ0V4cChcIig/Ol58XFxcXHMrKShcIitkLmpvaW4oXCJ8XCIpK1wiKSg/XFx4M2QkfFxcXFxzKVwiKTpudWxsfSl9fSl9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIHcoYyl7ZnVuY3Rpb24gZihiKXtmb3IodmFyIGU9ZC5zdGFydENvbnRhaW5lcixhPWQuZW5kQ29udGFpbmVyO2UmJiFlLmdldFBhcmVudCgpLmVxdWFscyhiKTspZT1lLmdldFBhcmVudCgpO2Zvcig7YSYmIWEuZ2V0UGFyZW50KCkuZXF1YWxzKGIpOylhPWEuZ2V0UGFyZW50KCk7aWYoIWV8fCFhKXJldHVybiExO2Zvcih2YXIgZz1lLGU9W10saz0hMTshazspZy5lcXVhbHMoYSkmJihrPSEwKSxlLnB1c2goZyksZz1nLmdldE5leHQoKTtpZigxPmUubGVuZ3RoKXJldHVybiExO2c9Yi5nZXRQYXJlbnRzKCEwKTtmb3IoYT0wO2E8Zy5sZW5ndGg7YSsrKWlmKGdbYV0uZ2V0TmFtZSYmcFtnW2FdLmdldE5hbWUoKV0pe2I9Z1thXTticmVha31mb3IodmFyIGc9bC5pc0luZGVudD8xOi0xLGE9ZVswXSxlPWVbZS5sZW5ndGgtMV0saz1DS0VESVRPUi5wbHVnaW5zLmxpc3QubGlzdFRvQXJyYXkoYixxKSxuPWtbZS5nZXRDdXN0b21EYXRhKFwibGlzdGFycmF5X2luZGV4XCIpXS5pbmRlbnQsXG5hPWEuZ2V0Q3VzdG9tRGF0YShcImxpc3RhcnJheV9pbmRleFwiKTthPD1lLmdldEN1c3RvbURhdGEoXCJsaXN0YXJyYXlfaW5kZXhcIik7YSsrKWlmKGtbYV0uaW5kZW50Kz1nLDA8Zyl7dmFyIGg9a1thXS5wYXJlbnQ7a1thXS5wYXJlbnQ9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGguZ2V0TmFtZSgpLGguZ2V0RG9jdW1lbnQoKSl9Zm9yKGE9ZS5nZXRDdXN0b21EYXRhKFwibGlzdGFycmF5X2luZGV4XCIpKzE7YTxrLmxlbmd0aCYma1thXS5pbmRlbnQ+bjthKyspa1thXS5pbmRlbnQrPWc7ZT1DS0VESVRPUi5wbHVnaW5zLmxpc3QuYXJyYXlUb0xpc3QoayxxLG51bGwsYy5jb25maWcuZW50ZXJNb2RlLGIuZ2V0RGlyZWN0aW9uKCkpO2lmKCFsLmlzSW5kZW50KXt2YXIgZjtpZigoZj1iLmdldFBhcmVudCgpKSYmZi5pcyhcImxpXCIpKWZvcih2YXIgZz1lLmxpc3ROb2RlLmdldENoaWxkcmVuKCkscj1bXSxtLGE9Zy5jb3VudCgpLTE7MDw9YTthLS0pKG09Zy5nZXRJdGVtKGEpKSYmbS5pcyYmbS5pcyhcImxpXCIpJiZcbnIucHVzaChtKX1lJiZlLmxpc3ROb2RlLnJlcGxhY2UoYik7aWYociYmci5sZW5ndGgpZm9yKGE9MDthPHIubGVuZ3RoO2ErKyl7Zm9yKG09Yj1yW2FdOyhtPW0uZ2V0TmV4dCgpKSYmbS5pcyYmbS5nZXROYW1lKClpbiBwOylDS0VESVRPUi5lbnYubmVlZHNOYnNwRmlsbGVyJiYhYi5nZXRGaXJzdCh4KSYmYi5hcHBlbmQoZC5kb2N1bWVudC5jcmVhdGVUZXh0KFwiwqBcIikpLGIuYXBwZW5kKG0pO2IuaW5zZXJ0QWZ0ZXIoZil9ZSYmYy5maXJlKFwiY29udGVudERvbUludmFsaWRhdGVkXCIpO3JldHVybiEwfWZvcih2YXIgbD10aGlzLHE9dGhpcy5kYXRhYmFzZSxwPXRoaXMuY29udGV4dCxuPWMuZ2V0U2VsZWN0aW9uKCksbj0obiYmbi5nZXRSYW5nZXMoKSkuY3JlYXRlSXRlcmF0b3IoKSxkO2Q9bi5nZXROZXh0UmFuZ2UoKTspe2Zvcih2YXIgYj1kLmdldENvbW1vbkFuY2VzdG9yKCk7YiYmKGIudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHwhcFtiLmdldE5hbWUoKV0pOyl7aWYoYy5lZGl0YWJsZSgpLmVxdWFscyhiKSl7Yj1cbiExO2JyZWFrfWI9Yi5nZXRQYXJlbnQoKX1ifHwoYj1kLnN0YXJ0UGF0aCgpLmNvbnRhaW5zKHApKSYmZC5zZXRFbmRBdChiLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpO2lmKCFiKXt2YXIgaD1kLmdldEVuY2xvc2VkTm9kZSgpO2gmJmgudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZoLmdldE5hbWUoKWluIHAmJihkLnNldFN0YXJ0QXQoaCxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCksZC5zZXRFbmRBdChoLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpLGI9aCl9YiYmZC5zdGFydENvbnRhaW5lci50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmQuc3RhcnRDb250YWluZXIuZ2V0TmFtZSgpaW4gcCYmKGg9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoZCksaC5ldmFsdWF0b3I9dCxkLnN0YXJ0Q29udGFpbmVyPWgubmV4dCgpKTtiJiZkLmVuZENvbnRhaW5lci50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmQuZW5kQ29udGFpbmVyLmdldE5hbWUoKWluXG5wJiYoaD1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihkKSxoLmV2YWx1YXRvcj10LGQuZW5kQ29udGFpbmVyPWgucHJldmlvdXMoKSk7aWYoYilyZXR1cm4gZihiKX1yZXR1cm4gMH1mdW5jdGlvbiB0KGMpe3JldHVybiBjLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYy5pcyhcImxpXCIpfWZ1bmN0aW9uIHgoYyl7cmV0dXJuIHkoYykmJnooYyl9dmFyIHk9Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcyghMCksej1DS0VESVRPUi5kb20ud2Fsa2VyLmJvb2ttYXJrKCExLCEwKSx1PUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELHY9Q0tFRElUT1IuVFJJU1RBVEVfT0ZGO0NLRURJVE9SLnBsdWdpbnMuYWRkKFwiaW5kZW50bGlzdFwiLHtyZXF1aXJlczpcImluZGVudFwiLGluaXQ6ZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZihjKXtsLnNwZWNpZmljRGVmaW5pdGlvbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5yZXF1aXJlZENvbnRlbnQ9W1widWxcIixcIm9sXCJdO2Mub24oXCJrZXlcIixcbmZ1bmN0aW9uKGYpe2lmKFwid3lzaXd5Z1wiPT1jLm1vZGUmJmYuZGF0YS5rZXlDb2RlPT10aGlzLmluZGVudEtleSl7dmFyIG49dGhpcy5nZXRDb250ZXh0KGMuZWxlbWVudFBhdGgoKSk7IW58fHRoaXMuaXNJbmRlbnQmJkNLRURJVE9SLnBsdWdpbnMuaW5kZW50TGlzdC5maXJzdEl0ZW1JblBhdGgodGhpcy5jb250ZXh0LGMuZWxlbWVudFBhdGgoKSxuKXx8KGMuZXhlY0NvbW1hbmQodGhpcy5yZWxhdGVkR2xvYmFsKSxmLmNhbmNlbCgpKX19LHRoaXMpO3RoaXMuam9ic1t0aGlzLmlzSW5kZW50PzEwOjMwXT17cmVmcmVzaDp0aGlzLmlzSW5kZW50P2Z1bmN0aW9uKGMsZil7dmFyIGQ9dGhpcy5nZXRDb250ZXh0KGYpLGI9Q0tFRElUT1IucGx1Z2lucy5pbmRlbnRMaXN0LmZpcnN0SXRlbUluUGF0aCh0aGlzLmNvbnRleHQsZixkKTtyZXR1cm4gZCYmdGhpcy5pc0luZGVudCYmIWI/djp1fTpmdW5jdGlvbihjLGYpe3JldHVybiF0aGlzLmdldENvbnRleHQoZil8fHRoaXMuaXNJbmRlbnQ/XG51OnZ9LGV4ZWM6Q0tFRElUT1IudG9vbHMuYmluZCh3LHRoaXMpfX12YXIgbD1DS0VESVRPUi5wbHVnaW5zLmluZGVudDtsLnJlZ2lzdGVyQ29tbWFuZHMoYyx7aW5kZW50bGlzdDpuZXcgZihjLFwiaW5kZW50bGlzdFwiLCEwKSxvdXRkZW50bGlzdDpuZXcgZihjLFwib3V0ZGVudGxpc3RcIil9KTtDS0VESVRPUi50b29scy5leHRlbmQoZi5wcm90b3R5cGUsbC5zcGVjaWZpY0RlZmluaXRpb24ucHJvdG90eXBlLHtjb250ZXh0OntvbDoxLHVsOjF9fSl9fSk7Q0tFRElUT1IucGx1Z2lucy5pbmRlbnRMaXN0PXt9O0NLRURJVE9SLnBsdWdpbnMuaW5kZW50TGlzdC5maXJzdEl0ZW1JblBhdGg9ZnVuY3Rpb24oYyxmLGwpe3ZhciBxPWYuY29udGFpbnModCk7bHx8KGw9Zi5jb250YWlucyhjKSk7cmV0dXJuIGwmJnEmJnEuZXF1YWxzKGwuZ2V0Rmlyc3QodCkpfX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJzbWlsZXlcIix7cmVxdWlyZXM6XCJkaWFsb2dcIixpbml0OmZ1bmN0aW9uKGEpe2EuY29uZmlnLnNtaWxleV9wYXRoPWEuY29uZmlnLnNtaWxleV9wYXRofHx0aGlzLnBhdGgrXCJpbWFnZXMvXCI7YS5hZGRDb21tYW5kKFwic21pbGV5XCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJzbWlsZXlcIix7YWxsb3dlZENvbnRlbnQ6XCJpbWdbYWx0LGhlaWdodCwhc3JjLHRpdGxlLHdpZHRoXVwiLHJlcXVpcmVkQ29udGVudDpcImltZ1wifSkpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlNtaWxleVwiLHtsYWJlbDphLmxhbmcuc21pbGV5LnRvb2xiYXIsY29tbWFuZDpcInNtaWxleVwiLHRvb2xiYXI6XCJpbnNlcnQsNTBcIn0pO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJzbWlsZXlcIix0aGlzLnBhdGgrXCJkaWFsb2dzL3NtaWxleS5qc1wiKX19KTtDS0VESVRPUi5jb25maWcuc21pbGV5X2ltYWdlcz1cInJlZ3VsYXJfc21pbGUucG5nIHNhZF9zbWlsZS5wbmcgd2lua19zbWlsZS5wbmcgdGVldGhfc21pbGUucG5nIGNvbmZ1c2VkX3NtaWxlLnBuZyB0b25ndWVfc21pbGUucG5nIGVtYmFycmFzc2VkX3NtaWxlLnBuZyBvbWdfc21pbGUucG5nIHdoYXRjaHV0YWxraW5nYWJvdXRfc21pbGUucG5nIGFuZ3J5X3NtaWxlLnBuZyBhbmdlbF9zbWlsZS5wbmcgc2hhZGVzX3NtaWxlLnBuZyBkZXZpbF9zbWlsZS5wbmcgY3J5X3NtaWxlLnBuZyBsaWdodGJ1bGIucG5nIHRodW1ic19kb3duLnBuZyB0aHVtYnNfdXAucG5nIGhlYXJ0LnBuZyBicm9rZW5faGVhcnQucG5nIGtpc3MucG5nIGVudmVsb3BlLnBuZ1wiLnNwbGl0KFwiIFwiKTtcbkNLRURJVE9SLmNvbmZpZy5zbWlsZXlfZGVzY3JpcHRpb25zPVwic21pbGV5O3NhZDt3aW5rO2xhdWdoO2Zyb3duO2NoZWVreTtibHVzaDtzdXJwcmlzZTtpbmRlY2lzaW9uO2FuZ3J5O2FuZ2VsO2Nvb2w7ZGV2aWw7Y3J5aW5nO2VubGlnaHRlbmVkO25vO3llcztoZWFydDticm9rZW4gaGVhcnQ7a2lzczttYWlsXCIuc3BsaXQoXCI7XCIpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIG4oYSxjKXtjPXZvaWQgMD09PWN8fGM7dmFyIGI7aWYoYyliPWEuZ2V0Q29tcHV0ZWRTdHlsZShcInRleHQtYWxpZ25cIik7ZWxzZXtmb3IoOyFhLmhhc0F0dHJpYnV0ZXx8IWEuaGFzQXR0cmlidXRlKFwiYWxpZ25cIikmJiFhLmdldFN0eWxlKFwidGV4dC1hbGlnblwiKTspe2I9YS5nZXRQYXJlbnQoKTtpZighYilicmVhazthPWJ9Yj1hLmdldFN0eWxlKFwidGV4dC1hbGlnblwiKXx8YS5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKXx8XCJcIn1iJiYoYj1iLnJlcGxhY2UoLyg/Oi0oPzptb3p8d2Via2l0KS0pPyg/OnN0YXJ0fGF1dG8pL2ksXCJcIikpOyFiJiZjJiYoYj1cInJ0bFwiPT1hLmdldENvbXB1dGVkU3R5bGUoXCJkaXJlY3Rpb25cIik/XCJyaWdodFwiOlwibGVmdFwiKTtyZXR1cm4gYn1mdW5jdGlvbiBnKGEsYyxiKXt0aGlzLmVkaXRvcj1hO3RoaXMubmFtZT1jO3RoaXMudmFsdWU9Yjt0aGlzLmNvbnRleHQ9XCJwXCI7Yz1hLmNvbmZpZy5qdXN0aWZ5Q2xhc3Nlczt2YXIgaD1hLmNvbmZpZy5lbnRlck1vZGU9PVxuQ0tFRElUT1IuRU5URVJfUD9cInBcIjpcImRpdlwiO2lmKGMpe3N3aXRjaChiKXtjYXNlIFwibGVmdFwiOnRoaXMuY3NzQ2xhc3NOYW1lPWNbMF07YnJlYWs7Y2FzZSBcImNlbnRlclwiOnRoaXMuY3NzQ2xhc3NOYW1lPWNbMV07YnJlYWs7Y2FzZSBcInJpZ2h0XCI6dGhpcy5jc3NDbGFzc05hbWU9Y1syXTticmVhaztjYXNlIFwianVzdGlmeVwiOnRoaXMuY3NzQ2xhc3NOYW1lPWNbM119dGhpcy5jc3NDbGFzc1JlZ2V4PW5ldyBSZWdFeHAoXCIoPzpefFxcXFxzKykoPzpcIitjLmpvaW4oXCJ8XCIpK1wiKSg/XFx4M2QkfFxcXFxzKVwiKTt0aGlzLnJlcXVpcmVkQ29udGVudD1oK1wiKFwiK3RoaXMuY3NzQ2xhc3NOYW1lK1wiKVwifWVsc2UgdGhpcy5yZXF1aXJlZENvbnRlbnQ9aCtcInt0ZXh0LWFsaWdufVwiO3RoaXMuYWxsb3dlZENvbnRlbnQ9e1wiY2FwdGlvbiBkaXYgaDEgaDIgaDMgaDQgaDUgaDYgcCBwcmUgdGQgdGggbGlcIjp7cHJvcGVydGllc09ubHk6ITAsc3R5bGVzOnRoaXMuY3NzQ2xhc3NOYW1lP251bGw6XCJ0ZXh0LWFsaWduXCIsXG5jbGFzc2VzOnRoaXMuY3NzQ2xhc3NOYW1lfHxudWxsfX07YS5jb25maWcuZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9CUiYmKHRoaXMuYWxsb3dlZENvbnRlbnQuZGl2PSEwKX1mdW5jdGlvbiBsKGEpe3ZhciBjPWEuZWRpdG9yLGI9Yy5jcmVhdGVSYW5nZSgpO2Iuc2V0U3RhcnRCZWZvcmUoYS5kYXRhLm5vZGUpO2Iuc2V0RW5kQWZ0ZXIoYS5kYXRhLm5vZGUpO2Zvcih2YXIgaD1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihiKSxkO2Q9aC5uZXh0KCk7KWlmKGQudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UKWlmKCFkLmVxdWFscyhhLmRhdGEubm9kZSkmJmQuZ2V0RGlyZWN0aW9uKCkpYi5zZXRTdGFydEFmdGVyKGQpLGg9bmV3IENLRURJVE9SLmRvbS53YWxrZXIoYik7ZWxzZXt2YXIgZT1jLmNvbmZpZy5qdXN0aWZ5Q2xhc3NlcztlJiYoZC5oYXNDbGFzcyhlWzBdKT8oZC5yZW1vdmVDbGFzcyhlWzBdKSxkLmFkZENsYXNzKGVbMl0pKTpkLmhhc0NsYXNzKGVbMl0pJiYoZC5yZW1vdmVDbGFzcyhlWzJdKSxcbmQuYWRkQ2xhc3MoZVswXSkpKTtlPWQuZ2V0U3R5bGUoXCJ0ZXh0LWFsaWduXCIpO1wibGVmdFwiPT1lP2Quc2V0U3R5bGUoXCJ0ZXh0LWFsaWduXCIsXCJyaWdodFwiKTpcInJpZ2h0XCI9PWUmJmQuc2V0U3R5bGUoXCJ0ZXh0LWFsaWduXCIsXCJsZWZ0XCIpfX1nLnByb3RvdHlwZT17ZXhlYzpmdW5jdGlvbihhKXt2YXIgYz1hLmdldFNlbGVjdGlvbigpLGI9YS5jb25maWcuZW50ZXJNb2RlO2lmKGMpe2Zvcih2YXIgaD1jLmNyZWF0ZUJvb2ttYXJrcygpLGQ9Yy5nZXRSYW5nZXMoKSxlPXRoaXMuY3NzQ2xhc3NOYW1lLGcsZixrPWEuY29uZmlnLnVzZUNvbXB1dGVkU3RhdGUsaz12b2lkIDA9PT1rfHxrLG09ZC5sZW5ndGgtMTswPD1tO20tLSlmb3IoZz1kW21dLmNyZWF0ZUl0ZXJhdG9yKCksZy5lbmxhcmdlQnI9YiE9Q0tFRElUT1IuRU5URVJfQlI7Zj1nLmdldE5leHRQYXJhZ3JhcGgoYj09Q0tFRElUT1IuRU5URVJfUD9cInBcIjpcImRpdlwiKTspaWYoIWYuaXNSZWFkT25seSgpKXtmLnJlbW92ZUF0dHJpYnV0ZShcImFsaWduXCIpO1xuZi5yZW1vdmVTdHlsZShcInRleHQtYWxpZ25cIik7dmFyIGw9ZSYmKGYuJC5jbGFzc05hbWU9Q0tFRElUT1IudG9vbHMubHRyaW0oZi4kLmNsYXNzTmFtZS5yZXBsYWNlKHRoaXMuY3NzQ2xhc3NSZWdleCxcIlwiKSkpLHA9dGhpcy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfT0ZGJiYoIWt8fG4oZiwhMCkhPXRoaXMudmFsdWUpO2U/cD9mLmFkZENsYXNzKGUpOmx8fGYucmVtb3ZlQXR0cmlidXRlKFwiY2xhc3NcIik6cCYmZi5zZXRTdHlsZShcInRleHQtYWxpZ25cIix0aGlzLnZhbHVlKX1hLmZvY3VzKCk7YS5mb3JjZU5leHRTZWxlY3Rpb25DaGVjaygpO2Muc2VsZWN0Qm9va21hcmtzKGgpfX0scmVmcmVzaDpmdW5jdGlvbihhLGMpe3ZhciBiPWMuYmxvY2t8fGMuYmxvY2tMaW1pdDt0aGlzLnNldFN0YXRlKFwiYm9keVwiIT1iLmdldE5hbWUoKSYmbihiLHRoaXMuZWRpdG9yLmNvbmZpZy51c2VDb21wdXRlZFN0YXRlKT09dGhpcy52YWx1ZT9DS0VESVRPUi5UUklTVEFURV9PTjpDS0VESVRPUi5UUklTVEFURV9PRkYpfX07XG5DS0VESVRPUi5wbHVnaW5zLmFkZChcImp1c3RpZnlcIix7aW5pdDpmdW5jdGlvbihhKXtpZighYS5ibG9ja2xlc3Mpe3ZhciBjPW5ldyBnKGEsXCJqdXN0aWZ5bGVmdFwiLFwibGVmdFwiKSxiPW5ldyBnKGEsXCJqdXN0aWZ5Y2VudGVyXCIsXCJjZW50ZXJcIiksaD1uZXcgZyhhLFwianVzdGlmeXJpZ2h0XCIsXCJyaWdodFwiKSxkPW5ldyBnKGEsXCJqdXN0aWZ5YmxvY2tcIixcImp1c3RpZnlcIik7YS5hZGRDb21tYW5kKFwianVzdGlmeWxlZnRcIixjKTthLmFkZENvbW1hbmQoXCJqdXN0aWZ5Y2VudGVyXCIsYik7YS5hZGRDb21tYW5kKFwianVzdGlmeXJpZ2h0XCIsaCk7YS5hZGRDb21tYW5kKFwianVzdGlmeWJsb2NrXCIsZCk7YS51aS5hZGRCdXR0b24mJihhLnVpLmFkZEJ1dHRvbihcIkp1c3RpZnlMZWZ0XCIse2xhYmVsOmEubGFuZy5qdXN0aWZ5LmxlZnQsY29tbWFuZDpcImp1c3RpZnlsZWZ0XCIsdG9vbGJhcjpcImFsaWduLDEwXCJ9KSxhLnVpLmFkZEJ1dHRvbihcIkp1c3RpZnlDZW50ZXJcIix7bGFiZWw6YS5sYW5nLmp1c3RpZnkuY2VudGVyLFxuY29tbWFuZDpcImp1c3RpZnljZW50ZXJcIix0b29sYmFyOlwiYWxpZ24sMjBcIn0pLGEudWkuYWRkQnV0dG9uKFwiSnVzdGlmeVJpZ2h0XCIse2xhYmVsOmEubGFuZy5qdXN0aWZ5LnJpZ2h0LGNvbW1hbmQ6XCJqdXN0aWZ5cmlnaHRcIix0b29sYmFyOlwiYWxpZ24sMzBcIn0pLGEudWkuYWRkQnV0dG9uKFwiSnVzdGlmeUJsb2NrXCIse2xhYmVsOmEubGFuZy5qdXN0aWZ5LmJsb2NrLGNvbW1hbmQ6XCJqdXN0aWZ5YmxvY2tcIix0b29sYmFyOlwiYWxpZ24sNDBcIn0pKTthLm9uKFwiZGlyQ2hhbmdlZFwiLGwpfX19KX0pKCk7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJtZW51YnV0dG9uXCIse3JlcXVpcmVzOlwiYnV0dG9uLG1lbnVcIixvbkxvYWQ6ZnVuY3Rpb24oKXt2YXIgZD1mdW5jdGlvbihjKXt2YXIgYT10aGlzLl8sYj1hLm1lbnU7YS5zdGF0ZSE9PUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEJiYoYS5vbiYmYj9iLmhpZGUoKTooYS5wcmV2aW91c1N0YXRlPWEuc3RhdGUsYnx8KGI9YS5tZW51PW5ldyBDS0VESVRPUi5tZW51KGMse3BhbmVsOntjbGFzc05hbWU6XCJja2VfbWVudV9wYW5lbFwiLGF0dHJpYnV0ZXM6e1wiYXJpYS1sYWJlbFwiOmMubGFuZy5jb21tb24ub3B0aW9uc319fSksYi5vbkhpZGU9Q0tFRElUT1IudG9vbHMuYmluZChmdW5jdGlvbigpe3ZhciBiPXRoaXMuY29tbWFuZD9jLmdldENvbW1hbmQodGhpcy5jb21tYW5kKS5tb2Rlczp0aGlzLm1vZGVzO3RoaXMuc2V0U3RhdGUoIWJ8fGJbYy5tb2RlXT9hLnByZXZpb3VzU3RhdGU6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpO2Eub249MH0sdGhpcyksXG50aGlzLm9uTWVudSYmYi5hZGRMaXN0ZW5lcih0aGlzLm9uTWVudSkpLHRoaXMuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfT04pLGEub249MSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5zaG93KENLRURJVE9SLmRvY3VtZW50LmdldEJ5SWQoYS5pZCksNCl9LDApKSl9O0NLRURJVE9SLnVpLm1lbnVCdXR0b249Q0tFRElUT1IudG9vbHMuY3JlYXRlQ2xhc3Moe2Jhc2U6Q0tFRElUT1IudWkuYnV0dG9uLCQ6ZnVuY3Rpb24oYyl7ZGVsZXRlIGMucGFuZWw7dGhpcy5iYXNlKGMpO3RoaXMuaGFzQXJyb3c9ITA7dGhpcy5jbGljaz1kfSxzdGF0aWNzOntoYW5kbGVyOntjcmVhdGU6ZnVuY3Rpb24oYyl7cmV0dXJuIG5ldyBDS0VESVRPUi51aS5tZW51QnV0dG9uKGMpfX19fSl9LGJlZm9yZUluaXQ6ZnVuY3Rpb24oZCl7ZC51aS5hZGRIYW5kbGVyKENLRURJVE9SLlVJX01FTlVCVVRUT04sQ0tFRElUT1IudWkubWVudUJ1dHRvbi5oYW5kbGVyKX19KTtcbkNLRURJVE9SLlVJX01FTlVCVVRUT049XCJtZW51YnV0dG9uXCI7KGZ1bmN0aW9uKCl7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJsYW5ndWFnZVwiLHtyZXF1aXJlczpcIm1lbnVidXR0b25cIixpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuY29uZmlnLmxhbmd1YWdlX2xpc3R8fFtcImFyOkFyYWJpYzpydGxcIixcImZyOkZyZW5jaFwiLFwiZXM6U3BhbmlzaFwiXSxjPXRoaXMsZD1hLmxhbmcubGFuZ3VhZ2UsZT17fSxnLGgsayxmO2EuYWRkQ29tbWFuZChcImxhbmd1YWdlXCIse2FsbG93ZWRDb250ZW50Olwic3BhblshbGFuZywhZGlyXVwiLHJlcXVpcmVkQ29udGVudDpcInNwYW5bbGFuZyxkaXJdXCIsY29udGV4dFNlbnNpdGl2ZTohMCxleGVjOmZ1bmN0aW9uKGEsYil7dmFyIGM9ZVtcImxhbmd1YWdlX1wiK2JdO2lmKGMpYVtjLnN0eWxlLmNoZWNrQWN0aXZlKGEuZWxlbWVudFBhdGgoKSxhKT9cInJlbW92ZVN0eWxlXCI6XCJhcHBseVN0eWxlXCJdKGMuc3R5bGUpfSxyZWZyZXNoOmZ1bmN0aW9uKGEpe3RoaXMuc2V0U3RhdGUoYy5nZXRDdXJyZW50TGFuZ0VsZW1lbnQoYSk/Q0tFRElUT1IuVFJJU1RBVEVfT046XG5DS0VESVRPUi5UUklTVEFURV9PRkYpfX0pO2ZvcihmPTA7ZjxiLmxlbmd0aDtmKyspZz1iW2ZdLnNwbGl0KFwiOlwiKSxoPWdbMF0saz1cImxhbmd1YWdlX1wiK2gsZVtrXT17bGFiZWw6Z1sxXSxsYW5nSWQ6aCxncm91cDpcImxhbmd1YWdlXCIsb3JkZXI6ZixsdHI6XCJydGxcIiE9KFwiXCIrZ1syXSkudG9Mb3dlckNhc2UoKSxvbkNsaWNrOmZ1bmN0aW9uKCl7YS5leGVjQ29tbWFuZChcImxhbmd1YWdlXCIsdGhpcy5sYW5nSWQpfSxyb2xlOlwibWVudWl0ZW1jaGVja2JveFwifSxlW2tdLnN0eWxlPW5ldyBDS0VESVRPUi5zdHlsZSh7ZWxlbWVudDpcInNwYW5cIixhdHRyaWJ1dGVzOntsYW5nOmgsZGlyOmVba10ubHRyP1wibHRyXCI6XCJydGxcIn19KTtlLmxhbmd1YWdlX3JlbW92ZT17bGFiZWw6ZC5yZW1vdmUsZ3JvdXA6XCJsYW5ndWFnZV9yZW1vdmVcIixzdGF0ZTpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxvcmRlcjplLmxlbmd0aCxvbkNsaWNrOmZ1bmN0aW9uKCl7dmFyIGI9Yy5nZXRDdXJyZW50TGFuZ0VsZW1lbnQoYSk7XG5iJiZhLmV4ZWNDb21tYW5kKFwibGFuZ3VhZ2VcIixiLmdldEF0dHJpYnV0ZShcImxhbmdcIikpfX07YS5hZGRNZW51R3JvdXAoXCJsYW5ndWFnZVwiLDEpO2EuYWRkTWVudUdyb3VwKFwibGFuZ3VhZ2VfcmVtb3ZlXCIpO2EuYWRkTWVudUl0ZW1zKGUpO2EudWkuYWRkKFwiTGFuZ3VhZ2VcIixDS0VESVRPUi5VSV9NRU5VQlVUVE9OLHtsYWJlbDpkLmJ1dHRvbixhbGxvd2VkQ29udGVudDpcInNwYW5bIWxhbmcsIWRpcl1cIixyZXF1aXJlZENvbnRlbnQ6XCJzcGFuW2xhbmcsZGlyXVwiLHRvb2xiYXI6XCJiaWRpLDMwXCIsY29tbWFuZDpcImxhbmd1YWdlXCIsb25NZW51OmZ1bmN0aW9uKCl7dmFyIGI9e30sZD1jLmdldEN1cnJlbnRMYW5nRWxlbWVudChhKSxmO2ZvcihmIGluIGUpYltmXT1DS0VESVRPUi5UUklTVEFURV9PRkY7Yi5sYW5ndWFnZV9yZW1vdmU9ZD9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ7ZCYmKGJbXCJsYW5ndWFnZV9cIitkLmdldEF0dHJpYnV0ZShcImxhbmdcIildPVxuQ0tFRElUT1IuVFJJU1RBVEVfT04pO3JldHVybiBifX0pfSxnZXRDdXJyZW50TGFuZ0VsZW1lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5lbGVtZW50UGF0aCgpO2E9YiYmYi5lbGVtZW50czt2YXIgYztpZihiKWZvcih2YXIgZD0wO2Q8YS5sZW5ndGg7ZCsrKWI9YVtkXSwhYyYmXCJzcGFuXCI9PWIuZ2V0TmFtZSgpJiZiLmhhc0F0dHJpYnV0ZShcImRpclwiKSYmYi5oYXNBdHRyaWJ1dGUoXCJsYW5nXCIpJiYoYz1iKTtyZXR1cm4gY319KX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcChjKXtyZXR1cm4gYy5yZXBsYWNlKC8nL2csXCJcXFxcJFxceDI2XCIpfWZ1bmN0aW9uIHEoYyl7Zm9yKHZhciBiLGE9Yy5sZW5ndGgsZj1bXSxlPTA7ZTxhO2UrKyliPWMuY2hhckNvZGVBdChlKSxmLnB1c2goYik7cmV0dXJuXCJTdHJpbmcuZnJvbUNoYXJDb2RlKFwiK2Yuam9pbihcIixcIikrXCIpXCJ9ZnVuY3Rpb24gcihjLGIpe3ZhciBhPWMucGx1Z2lucy5saW5rLGY9YS5jb21waWxlZFByb3RlY3Rpb25GdW5jdGlvbi5wYXJhbXMsZSxkO2Q9W2EuY29tcGlsZWRQcm90ZWN0aW9uRnVuY3Rpb24ubmFtZSxcIihcIl07Zm9yKHZhciBnPTA7ZzxmLmxlbmd0aDtnKyspYT1mW2ddLnRvTG93ZXJDYXNlKCksZT1iW2FdLDA8ZyYmZC5wdXNoKFwiLFwiKSxkLnB1c2goXCInXCIsZT9wKGVuY29kZVVSSUNvbXBvbmVudChiW2FdKSk6XCJcIixcIidcIik7ZC5wdXNoKFwiKVwiKTtyZXR1cm4gZC5qb2luKFwiXCIpfWZ1bmN0aW9uIG4oYyl7Yz1jLmNvbmZpZy5lbWFpbFByb3RlY3Rpb258fFwiXCI7XG52YXIgYjtjJiZcImVuY29kZVwiIT1jJiYoYj17fSxjLnJlcGxhY2UoL14oW14oXSspXFwoKFteKV0rKVxcKSQvLGZ1bmN0aW9uKGEsYyxlKXtiLm5hbWU9YztiLnBhcmFtcz1bXTtlLnJlcGxhY2UoL1teLFxcc10rL2csZnVuY3Rpb24oYSl7Yi5wYXJhbXMucHVzaChhKX0pfSkpO3JldHVybiBifUNLRURJVE9SLnBsdWdpbnMuYWRkKFwibGlua1wiLHtyZXF1aXJlczpcImRpYWxvZyxmYWtlb2JqZWN0c1wiLG9uTG9hZDpmdW5jdGlvbigpe2Z1bmN0aW9uIGMoYil7cmV0dXJuIGEucmVwbGFjZSgvJTEvZyxcInJ0bFwiPT1iP1wicmlnaHRcIjpcImxlZnRcIikucmVwbGFjZSgvJTIvZyxcImNrZV9jb250ZW50c19cIitiKX12YXIgYj1cImJhY2tncm91bmQ6dXJsKFwiK0NLRURJVE9SLmdldFVybCh0aGlzLnBhdGgrXCJpbWFnZXNcIisoQ0tFRElUT1IuZW52LmhpZHBpP1wiL2hpZHBpXCI6XCJcIikrXCIvYW5jaG9yLnBuZ1wiKStcIikgbm8tcmVwZWF0ICUxIGNlbnRlcjtib3JkZXI6MXB4IGRvdHRlZCAjMDBmO2JhY2tncm91bmQtc2l6ZToxNnB4O1wiLFxuYT1cIi4lMiBhLmNrZV9hbmNob3IsLiUyIGEuY2tlX2FuY2hvcl9lbXB0eSwuY2tlX2VkaXRhYmxlLiUyIGFbbmFtZV0sLmNrZV9lZGl0YWJsZS4lMiBhW2RhdGEtY2tlLXNhdmVkLW5hbWVde1wiK2IrXCJwYWRkaW5nLSUxOjE4cHg7Y3Vyc29yOmF1dG87fS4lMiBpbWcuY2tlX2FuY2hvcntcIitiK1wid2lkdGg6MTZweDttaW4taGVpZ2h0OjE1cHg7aGVpZ2h0OjEuMTVlbTt2ZXJ0aWNhbC1hbGlnbjp0ZXh0LWJvdHRvbTt9XCI7Q0tFRElUT1IuYWRkQ3NzKGMoXCJsdHJcIikrYyhcInJ0bFwiKSl9LGluaXQ6ZnVuY3Rpb24oYyl7dmFyIGI9XCJhWyFocmVmXVwiO0NLRURJVE9SLmRpYWxvZy5pc1RhYkVuYWJsZWQoYyxcImxpbmtcIixcImFkdmFuY2VkXCIpJiYoYj1iLnJlcGxhY2UoXCJdXCIsXCIsYWNjZXNza2V5LGNoYXJzZXQsZGlyLGlkLGxhbmcsbmFtZSxyZWwsdGFiaW5kZXgsdGl0bGUsdHlwZV17Kn0oKilcIikpO0NLRURJVE9SLmRpYWxvZy5pc1RhYkVuYWJsZWQoYyxcImxpbmtcIixcInRhcmdldFwiKSYmKGI9Yi5yZXBsYWNlKFwiXVwiLFxuXCIsdGFyZ2V0LG9uY2xpY2tdXCIpKTtjLmFkZENvbW1hbmQoXCJsaW5rXCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJsaW5rXCIse2FsbG93ZWRDb250ZW50OmIscmVxdWlyZWRDb250ZW50OlwiYVtocmVmXVwifSkpO2MuYWRkQ29tbWFuZChcImFuY2hvclwiLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwiYW5jaG9yXCIse2FsbG93ZWRDb250ZW50OlwiYVshbmFtZSxpZF1cIixyZXF1aXJlZENvbnRlbnQ6XCJhW25hbWVdXCJ9KSk7Yy5hZGRDb21tYW5kKFwidW5saW5rXCIsbmV3IENLRURJVE9SLnVubGlua0NvbW1hbmQpO2MuYWRkQ29tbWFuZChcInJlbW92ZUFuY2hvclwiLG5ldyBDS0VESVRPUi5yZW1vdmVBbmNob3JDb21tYW5kKTtjLnNldEtleXN0cm9rZShDS0VESVRPUi5DVFJMKzc2LFwibGlua1wiKTtjLnVpLmFkZEJ1dHRvbiYmKGMudWkuYWRkQnV0dG9uKFwiTGlua1wiLHtsYWJlbDpjLmxhbmcubGluay50b29sYmFyLGNvbW1hbmQ6XCJsaW5rXCIsdG9vbGJhcjpcImxpbmtzLDEwXCJ9KSxjLnVpLmFkZEJ1dHRvbihcIlVubGlua1wiLFxue2xhYmVsOmMubGFuZy5saW5rLnVubGluayxjb21tYW5kOlwidW5saW5rXCIsdG9vbGJhcjpcImxpbmtzLDIwXCJ9KSxjLnVpLmFkZEJ1dHRvbihcIkFuY2hvclwiLHtsYWJlbDpjLmxhbmcubGluay5hbmNob3IudG9vbGJhcixjb21tYW5kOlwiYW5jaG9yXCIsdG9vbGJhcjpcImxpbmtzLDMwXCJ9KSk7Q0tFRElUT1IuZGlhbG9nLmFkZChcImxpbmtcIix0aGlzLnBhdGgrXCJkaWFsb2dzL2xpbmsuanNcIik7Q0tFRElUT1IuZGlhbG9nLmFkZChcImFuY2hvclwiLHRoaXMucGF0aCtcImRpYWxvZ3MvYW5jaG9yLmpzXCIpO2Mub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGEpe3ZhciBiPUNLRURJVE9SLnBsdWdpbnMubGluay5nZXRTZWxlY3RlZExpbmsoYyl8fGEuZGF0YS5lbGVtZW50O2IuaXNSZWFkT25seSgpfHwoYi5pcyhcImFcIik/KGEuZGF0YS5kaWFsb2c9IWIuZ2V0QXR0cmlidXRlKFwibmFtZVwiKXx8Yi5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpJiZiLmdldENoaWxkQ291bnQoKT9cImxpbmtcIjpcImFuY2hvclwiLGEuZGF0YS5saW5rPVxuYik6Q0tFRElUT1IucGx1Z2lucy5saW5rLnRyeVJlc3RvcmVGYWtlQW5jaG9yKGMsYikmJihhLmRhdGEuZGlhbG9nPVwiYW5jaG9yXCIpKX0sbnVsbCxudWxsLDApO2Mub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGEpe2EuZGF0YS5kaWFsb2cgaW57bGluazoxLGFuY2hvcjoxfSYmYS5kYXRhLmxpbmsmJmMuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0RWxlbWVudChhLmRhdGEubGluayl9LG51bGwsbnVsbCwyMCk7Yy5hZGRNZW51SXRlbXMmJmMuYWRkTWVudUl0ZW1zKHthbmNob3I6e2xhYmVsOmMubGFuZy5saW5rLmFuY2hvci5tZW51LGNvbW1hbmQ6XCJhbmNob3JcIixncm91cDpcImFuY2hvclwiLG9yZGVyOjF9LHJlbW92ZUFuY2hvcjp7bGFiZWw6Yy5sYW5nLmxpbmsuYW5jaG9yLnJlbW92ZSxjb21tYW5kOlwicmVtb3ZlQW5jaG9yXCIsZ3JvdXA6XCJhbmNob3JcIixvcmRlcjo1fSxsaW5rOntsYWJlbDpjLmxhbmcubGluay5tZW51LGNvbW1hbmQ6XCJsaW5rXCIsZ3JvdXA6XCJsaW5rXCIsb3JkZXI6MX0sdW5saW5rOntsYWJlbDpjLmxhbmcubGluay51bmxpbmssXG5jb21tYW5kOlwidW5saW5rXCIsZ3JvdXA6XCJsaW5rXCIsb3JkZXI6NX19KTtjLmNvbnRleHRNZW51JiZjLmNvbnRleHRNZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uKGEpe2lmKCFhfHxhLmlzUmVhZE9ubHkoKSlyZXR1cm4gbnVsbDthPUNLRURJVE9SLnBsdWdpbnMubGluay50cnlSZXN0b3JlRmFrZUFuY2hvcihjLGEpO2lmKCFhJiYhKGE9Q0tFRElUT1IucGx1Z2lucy5saW5rLmdldFNlbGVjdGVkTGluayhjKSkpcmV0dXJuIG51bGw7dmFyIGI9e307YS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpJiZhLmdldENoaWxkQ291bnQoKSYmKGI9e2xpbms6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHVubGluazpDS0VESVRPUi5UUklTVEFURV9PRkZ9KTthJiZhLmhhc0F0dHJpYnV0ZShcIm5hbWVcIikmJihiLmFuY2hvcj1iLnJlbW92ZUFuY2hvcj1DS0VESVRPUi5UUklTVEFURV9PRkYpO3JldHVybiBifSk7dGhpcy5jb21waWxlZFByb3RlY3Rpb25GdW5jdGlvbj1uKGMpfSxhZnRlckluaXQ6ZnVuY3Rpb24oYyl7Yy5kYXRhUHJvY2Vzc29yLmRhdGFGaWx0ZXIuYWRkUnVsZXMoe2VsZW1lbnRzOnthOmZ1bmN0aW9uKGEpe3JldHVybiBhLmF0dHJpYnV0ZXMubmFtZT9cbmEuY2hpbGRyZW4ubGVuZ3RoP251bGw6Yy5jcmVhdGVGYWtlUGFyc2VyRWxlbWVudChhLFwiY2tlX2FuY2hvclwiLFwiYW5jaG9yXCIpOm51bGx9fX0pO3ZhciBiPWMuXy5lbGVtZW50c1BhdGgmJmMuXy5lbGVtZW50c1BhdGguZmlsdGVycztiJiZiLnB1c2goZnVuY3Rpb24oYSxiKXtpZihcImFcIj09YiYmKENLRURJVE9SLnBsdWdpbnMubGluay50cnlSZXN0b3JlRmFrZUFuY2hvcihjLGEpfHxhLmdldEF0dHJpYnV0ZShcIm5hbWVcIikmJighYS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfHwhYS5nZXRDaGlsZENvdW50KCkpKSlyZXR1cm5cImFuY2hvclwifSl9fSk7dmFyIHQ9L15qYXZhc2NyaXB0Oi8sdT0vXm1haWx0bzooW14/XSspKD86XFw/KC4rKSk/JC8sdj0vc3ViamVjdD0oW147PzpAJj0kLFxcL10qKS9pLHc9L2JvZHk9KFteOz86QCY9JCxcXC9dKikvaSx4PS9eIyguKikkLyx5PS9eKCg/Omh0dHB8aHR0cHN8ZnRwfG5ld3MpOlxcL1xcLyk/KC4qKSQvLHo9L14oXyg/OnNlbGZ8dG9wfHBhcmVudHxibGFuaykpJC8sXG5BPS9eamF2YXNjcmlwdDp2b2lkXFwobG9jYXRpb25cXC5ocmVmPSdtYWlsdG86J1xcK1N0cmluZ1xcLmZyb21DaGFyQ29kZVxcKChbXildKylcXCkoPzpcXCsnKC4qKScpP1xcKSQvLEI9L15qYXZhc2NyaXB0OihbXihdKylcXCgoW14pXSspXFwpJC8sQz0vXFxzKndpbmRvdy5vcGVuXFwoXFxzKnRoaXNcXC5ocmVmXFxzKixcXHMqKD86JyhbXiddKiknfG51bGwpXFxzKixcXHMqJyhbXiddKiknXFxzKlxcKVxccyo7XFxzKnJldHVyblxccypmYWxzZTsqXFxzKi8sRD0vKD86XnwsKShbXj1dKyk9KFxcZCt8eWVzfG5vKS9naSxtPXtpZDpcImFkdklkXCIsZGlyOlwiYWR2TGFuZ0RpclwiLGFjY2Vzc0tleTpcImFkdkFjY2Vzc0tleVwiLG5hbWU6XCJhZHZOYW1lXCIsbGFuZzpcImFkdkxhbmdDb2RlXCIsdGFiaW5kZXg6XCJhZHZUYWJJbmRleFwiLHRpdGxlOlwiYWR2VGl0bGVcIix0eXBlOlwiYWR2Q29udGVudFR5cGVcIixcImNsYXNzXCI6XCJhZHZDU1NDbGFzc2VzXCIsY2hhcnNldDpcImFkdkNoYXJzZXRcIixzdHlsZTpcImFkdlN0eWxlc1wiLHJlbDpcImFkdlJlbFwifTtcbkNLRURJVE9SLnBsdWdpbnMubGluaz17Z2V0U2VsZWN0ZWRMaW5rOmZ1bmN0aW9uKGMpe3ZhciBiPWMuZ2V0U2VsZWN0aW9uKCksYT1iLmdldFNlbGVjdGVkRWxlbWVudCgpO3JldHVybiBhJiZhLmlzKFwiYVwiKT9hOihiPWIuZ2V0UmFuZ2VzKClbMF0pPyhiLnNocmluayhDS0VESVRPUi5TSFJJTktfVEVYVCksYy5lbGVtZW50UGF0aChiLmdldENvbW1vbkFuY2VzdG9yKCkpLmNvbnRhaW5zKFwiYVwiLDEpKTpudWxsfSxnZXRFZGl0b3JBbmNob3JzOmZ1bmN0aW9uKGMpe2Zvcih2YXIgYj1jLmVkaXRhYmxlKCksYT1iLmlzSW5saW5lKCkmJiFjLnBsdWdpbnMuZGl2YXJlYT9jLmRvY3VtZW50OmIsYj1hLmdldEVsZW1lbnRzQnlUYWcoXCJhXCIpLGE9YS5nZXRFbGVtZW50c0J5VGFnKFwiaW1nXCIpLGY9W10sZT0wLGQ7ZD1iLmdldEl0ZW0oZSsrKTspKGQuZGF0YShcImNrZS1zYXZlZC1uYW1lXCIpfHxkLmhhc0F0dHJpYnV0ZShcIm5hbWVcIikpJiZmLnB1c2goe25hbWU6ZC5kYXRhKFwiY2tlLXNhdmVkLW5hbWVcIil8fFxuZC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpLGlkOmQuZ2V0QXR0cmlidXRlKFwiaWRcIil9KTtmb3IoZT0wO2Q9YS5nZXRJdGVtKGUrKyk7KShkPXRoaXMudHJ5UmVzdG9yZUZha2VBbmNob3IoYyxkKSkmJmYucHVzaCh7bmFtZTpkLmdldEF0dHJpYnV0ZShcIm5hbWVcIiksaWQ6ZC5nZXRBdHRyaWJ1dGUoXCJpZFwiKX0pO3JldHVybiBmfSxmYWtlQW5jaG9yOiEwLHRyeVJlc3RvcmVGYWtlQW5jaG9yOmZ1bmN0aW9uKGMsYil7aWYoYiYmYi5kYXRhKFwiY2tlLXJlYWwtZWxlbWVudC10eXBlXCIpJiZcImFuY2hvclwiPT1iLmRhdGEoXCJja2UtcmVhbC1lbGVtZW50LXR5cGVcIikpe3ZhciBhPWMucmVzdG9yZVJlYWxFbGVtZW50KGIpO2lmKGEuZGF0YShcImNrZS1zYXZlZC1uYW1lXCIpKXJldHVybiBhfX0scGFyc2VMaW5rQXR0cmlidXRlczpmdW5jdGlvbihjLGIpe3ZhciBhPWImJihiLmRhdGEoXCJja2Utc2F2ZWQtaHJlZlwiKXx8Yi5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpKXx8XCJcIixmPWMucGx1Z2lucy5saW5rLmNvbXBpbGVkUHJvdGVjdGlvbkZ1bmN0aW9uLFxuZT1jLmNvbmZpZy5lbWFpbFByb3RlY3Rpb24sZCxnPXt9O2EubWF0Y2godCkmJihcImVuY29kZVwiPT1lP2E9YS5yZXBsYWNlKEEsZnVuY3Rpb24oYSxiLGMpe2M9Y3x8XCJcIjtyZXR1cm5cIm1haWx0bzpcIitTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxiLnNwbGl0KFwiLFwiKSkrYy5yZXBsYWNlKC9cXFxcJy9nLFwiJ1wiKX0pOmUmJmEucmVwbGFjZShCLGZ1bmN0aW9uKGEsYixjKXtpZihiPT1mLm5hbWUpe2cudHlwZT1cImVtYWlsXCI7YT1nLmVtYWlsPXt9O2I9LyheJyl8KCckKS9nO2M9Yy5tYXRjaCgvW14sXFxzXSsvZyk7Zm9yKHZhciBkPWMubGVuZ3RoLGUsaCxrPTA7azxkO2srKyllPWRlY29kZVVSSUNvbXBvbmVudCxoPWNba10ucmVwbGFjZShiLFwiXCIpLnJlcGxhY2UoL1xcXFwnL2csXCInXCIpLGg9ZShoKSxlPWYucGFyYW1zW2tdLnRvTG93ZXJDYXNlKCksYVtlXT1oO2EuYWRkcmVzcz1bYS5uYW1lLGEuZG9tYWluXS5qb2luKFwiQFwiKX19KSk7aWYoIWcudHlwZSlpZihlPWEubWF0Y2goeCkpZy50eXBlPVxuXCJhbmNob3JcIixnLmFuY2hvcj17fSxnLmFuY2hvci5uYW1lPWcuYW5jaG9yLmlkPWVbMV07ZWxzZSBpZihlPWEubWF0Y2godSkpe2Q9YS5tYXRjaCh2KTthPWEubWF0Y2godyk7Zy50eXBlPVwiZW1haWxcIjt2YXIgaz1nLmVtYWlsPXt9O2suYWRkcmVzcz1lWzFdO2QmJihrLnN1YmplY3Q9ZGVjb2RlVVJJQ29tcG9uZW50KGRbMV0pKTthJiYoay5ib2R5PWRlY29kZVVSSUNvbXBvbmVudChhWzFdKSl9ZWxzZSBhJiYoZD1hLm1hdGNoKHkpKSYmKGcudHlwZT1cInVybFwiLGcudXJsPXt9LGcudXJsLnByb3RvY29sPWRbMV0sZy51cmwudXJsPWRbMl0pO2lmKGIpe2lmKGE9Yi5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIikpZy50YXJnZXQ9e3R5cGU6YS5tYXRjaCh6KT9hOlwiZnJhbWVcIixuYW1lOmF9O2Vsc2UgaWYoYT0oYT1iLmRhdGEoXCJja2UtcGEtb25jbGlja1wiKXx8Yi5nZXRBdHRyaWJ1dGUoXCJvbmNsaWNrXCIpKSYmYS5tYXRjaChDKSlmb3IoZy50YXJnZXQ9e3R5cGU6XCJwb3B1cFwiLG5hbWU6YVsxXX07ZT1cbkQuZXhlYyhhWzJdKTspXCJ5ZXNcIiE9ZVsyXSYmXCIxXCIhPWVbMl18fGVbMV1pbntoZWlnaHQ6MSx3aWR0aDoxLHRvcDoxLGxlZnQ6MX0/aXNGaW5pdGUoZVsyXSkmJihnLnRhcmdldFtlWzFdXT1lWzJdKTpnLnRhcmdldFtlWzFdXT0hMDt2YXIgYT17fSxoO2ZvcihoIGluIG0pKGU9Yi5nZXRBdHRyaWJ1dGUoaCkpJiYoYVttW2hdXT1lKTtpZihoPWIuZGF0YShcImNrZS1zYXZlZC1uYW1lXCIpfHxhLmFkdk5hbWUpYS5hZHZOYW1lPWg7Q0tFRElUT1IudG9vbHMuaXNFbXB0eShhKXx8KGcuYWR2YW5jZWQ9YSl9cmV0dXJuIGd9LGdldExpbmtBdHRyaWJ1dGVzOmZ1bmN0aW9uKGMsYil7dmFyIGE9Yy5jb25maWcuZW1haWxQcm90ZWN0aW9ufHxcIlwiLGY9e307c3dpdGNoKGIudHlwZSl7Y2FzZSBcInVybFwiOnZhciBhPWIudXJsJiZ2b2lkIDAhPT1iLnVybC5wcm90b2NvbD9iLnVybC5wcm90b2NvbDpcImh0dHA6Ly9cIixlPWIudXJsJiZDS0VESVRPUi50b29scy50cmltKGIudXJsLnVybCl8fFwiXCI7ZltcImRhdGEtY2tlLXNhdmVkLWhyZWZcIl09XG4wPT09ZS5pbmRleE9mKFwiL1wiKT9lOmErZTticmVhaztjYXNlIFwiYW5jaG9yXCI6YT1iLmFuY2hvciYmYi5hbmNob3IuaWQ7ZltcImRhdGEtY2tlLXNhdmVkLWhyZWZcIl09XCIjXCIrKGIuYW5jaG9yJiZiLmFuY2hvci5uYW1lfHxhfHxcIlwiKTticmVhaztjYXNlIFwiZW1haWxcIjp2YXIgZD1iLmVtYWlsLGU9ZC5hZGRyZXNzO3N3aXRjaChhKXtjYXNlIFwiXCI6Y2FzZSBcImVuY29kZVwiOnZhciBnPWVuY29kZVVSSUNvbXBvbmVudChkLnN1YmplY3R8fFwiXCIpLGs9ZW5jb2RlVVJJQ29tcG9uZW50KGQuYm9keXx8XCJcIiksZD1bXTtnJiZkLnB1c2goXCJzdWJqZWN0XFx4M2RcIitnKTtrJiZkLnB1c2goXCJib2R5XFx4M2RcIitrKTtkPWQubGVuZ3RoP1wiP1wiK2Quam9pbihcIlxceDI2XCIpOlwiXCI7XCJlbmNvZGVcIj09YT8oYT1bXCJqYXZhc2NyaXB0OnZvaWQobG9jYXRpb24uaHJlZlxceDNkJ21haWx0bzonK1wiLHEoZSldLGQmJmEucHVzaChcIisnXCIscChkKSxcIidcIiksYS5wdXNoKFwiKVwiKSk6YT1bXCJtYWlsdG86XCIsZSxkXTticmVhaztkZWZhdWx0OmE9XG5lLnNwbGl0KFwiQFwiLDIpLGQubmFtZT1hWzBdLGQuZG9tYWluPWFbMV0sYT1bXCJqYXZhc2NyaXB0OlwiLHIoYyxkKV19ZltcImRhdGEtY2tlLXNhdmVkLWhyZWZcIl09YS5qb2luKFwiXCIpfWlmKGIudGFyZ2V0KWlmKFwicG9wdXBcIj09Yi50YXJnZXQudHlwZSl7Zm9yKHZhciBhPVtcIndpbmRvdy5vcGVuKHRoaXMuaHJlZiwgJ1wiLGIudGFyZ2V0Lm5hbWV8fFwiXCIsXCInLCAnXCJdLGg9XCJyZXNpemFibGUgc3RhdHVzIGxvY2F0aW9uIHRvb2xiYXIgbWVudWJhciBmdWxsc2NyZWVuIHNjcm9sbGJhcnMgZGVwZW5kZW50XCIuc3BsaXQoXCIgXCIpLGU9aC5sZW5ndGgsZz1mdW5jdGlvbihhKXtiLnRhcmdldFthXSYmaC5wdXNoKGErXCJcXHgzZFwiK2IudGFyZ2V0W2FdKX0sZD0wO2Q8ZTtkKyspaFtkXSs9Yi50YXJnZXRbaFtkXV0/XCJcXHgzZHllc1wiOlwiXFx4M2Rub1wiO2coXCJ3aWR0aFwiKTtnKFwibGVmdFwiKTtnKFwiaGVpZ2h0XCIpO2coXCJ0b3BcIik7YS5wdXNoKGguam9pbihcIixcIiksXCInKTsgcmV0dXJuIGZhbHNlO1wiKTtmW1wiZGF0YS1ja2UtcGEtb25jbGlja1wiXT1cbmEuam9pbihcIlwiKX1lbHNlXCJub3RTZXRcIiE9Yi50YXJnZXQudHlwZSYmYi50YXJnZXQubmFtZSYmKGYudGFyZ2V0PWIudGFyZ2V0Lm5hbWUpO2lmKGIuYWR2YW5jZWQpe2Zvcih2YXIgbCBpbiBtKShhPWIuYWR2YW5jZWRbbVtsXV0pJiYoZltsXT1hKTtmLm5hbWUmJihmW1wiZGF0YS1ja2Utc2F2ZWQtbmFtZVwiXT1mLm5hbWUpfWZbXCJkYXRhLWNrZS1zYXZlZC1ocmVmXCJdJiYoZi5ocmVmPWZbXCJkYXRhLWNrZS1zYXZlZC1ocmVmXCJdKTtsPXt0YXJnZXQ6MSxvbmNsaWNrOjEsXCJkYXRhLWNrZS1wYS1vbmNsaWNrXCI6MSxcImRhdGEtY2tlLXNhdmVkLW5hbWVcIjoxfTtiLmFkdmFuY2VkJiZDS0VESVRPUi50b29scy5leHRlbmQobCxtKTtmb3IodmFyIG4gaW4gZilkZWxldGUgbFtuXTtyZXR1cm57c2V0OmYscmVtb3ZlZDpDS0VESVRPUi50b29scy5vYmplY3RLZXlzKGwpfX0sc2hvd0Rpc3BsYXlUZXh0Rm9yRWxlbWVudDpmdW5jdGlvbihjLGIpe3ZhciBhPXtpbWc6MSx0YWJsZToxLHRib2R5OjEsXG50aGVhZDoxLHRmb290OjEsaW5wdXQ6MSxzZWxlY3Q6MSx0ZXh0YXJlYToxfTtyZXR1cm4gYi53aWRnZXRzJiZiLndpZGdldHMuZm9jdXNlZD8hMTohY3x8IWMuZ2V0TmFtZXx8IWMuaXMoYSl9fTtDS0VESVRPUi51bmxpbmtDb21tYW5kPWZ1bmN0aW9uKCl7fTtDS0VESVRPUi51bmxpbmtDb21tYW5kLnByb3RvdHlwZT17ZXhlYzpmdW5jdGlvbihjKXt2YXIgYj1uZXcgQ0tFRElUT1Iuc3R5bGUoe2VsZW1lbnQ6XCJhXCIsdHlwZTpDS0VESVRPUi5TVFlMRV9JTkxJTkUsYWx3YXlzUmVtb3ZlRWxlbWVudDoxfSk7Yy5yZW1vdmVTdHlsZShiKX0scmVmcmVzaDpmdW5jdGlvbihjLGIpe3ZhciBhPWIubGFzdEVsZW1lbnQmJmIubGFzdEVsZW1lbnQuZ2V0QXNjZW5kYW50KFwiYVwiLCEwKTthJiZcImFcIj09YS5nZXROYW1lKCkmJmEuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSYmYS5nZXRDaGlsZENvdW50KCk/dGhpcy5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9PRkYpOnRoaXMuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpfSxcbmNvbnRleHRTZW5zaXRpdmU6MSxzdGFydERpc2FibGVkOjEscmVxdWlyZWRDb250ZW50OlwiYVtocmVmXVwifTtDS0VESVRPUi5yZW1vdmVBbmNob3JDb21tYW5kPWZ1bmN0aW9uKCl7fTtDS0VESVRPUi5yZW1vdmVBbmNob3JDb21tYW5kLnByb3RvdHlwZT17ZXhlYzpmdW5jdGlvbihjKXt2YXIgYj1jLmdldFNlbGVjdGlvbigpLGE9Yi5jcmVhdGVCb29rbWFya3MoKSxmO2lmKGImJihmPWIuZ2V0U2VsZWN0ZWRFbGVtZW50KCkpJiYoZi5nZXRDaGlsZENvdW50KCk/Zi5pcyhcImFcIik6Q0tFRElUT1IucGx1Z2lucy5saW5rLnRyeVJlc3RvcmVGYWtlQW5jaG9yKGMsZikpKWYucmVtb3ZlKDEpO2Vsc2UgaWYoZj1DS0VESVRPUi5wbHVnaW5zLmxpbmsuZ2V0U2VsZWN0ZWRMaW5rKGMpKWYuaGFzQXR0cmlidXRlKFwiaHJlZlwiKT8oZi5yZW1vdmVBdHRyaWJ1dGVzKHtuYW1lOjEsXCJkYXRhLWNrZS1zYXZlZC1uYW1lXCI6MX0pLGYucmVtb3ZlQ2xhc3MoXCJja2VfYW5jaG9yXCIpKTpmLnJlbW92ZSgxKTtcbmIuc2VsZWN0Qm9va21hcmtzKGEpfSxyZXF1aXJlZENvbnRlbnQ6XCJhW25hbWVdXCJ9O0NLRURJVE9SLnRvb2xzLmV4dGVuZChDS0VESVRPUi5jb25maWcse2xpbmtTaG93QWR2YW5jZWRUYWI6ITAsbGlua1Nob3dUYXJnZXRUYWI6ITB9KX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gSShiLG0sZSl7ZnVuY3Rpb24gYyhjKXtpZighKCEoYT1kW2M/XCJnZXRGaXJzdFwiOlwiZ2V0TGFzdFwiXSgpKXx8YS5pcyYmYS5pc0Jsb2NrQm91bmRhcnkoKXx8IShwPW0ucm9vdFtjP1wiZ2V0UHJldmlvdXNcIjpcImdldE5leHRcIl0oQ0tFRElUT1IuZG9tLndhbGtlci5pbnZpc2libGUoITApKSl8fHAuaXMmJnAuaXNCbG9ja0JvdW5kYXJ5KHticjoxfSkpKWIuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpW2M/XCJpbnNlcnRCZWZvcmVcIjpcImluc2VydEFmdGVyXCJdKGEpfWZvcih2YXIgZj1DS0VESVRPUi5wbHVnaW5zLmxpc3QubGlzdFRvQXJyYXkobS5yb290LGUpLGc9W10saz0wO2s8bS5jb250ZW50cy5sZW5ndGg7aysrKXt2YXIgaD1tLmNvbnRlbnRzW2tdOyhoPWguZ2V0QXNjZW5kYW50KFwibGlcIiwhMCkpJiYhaC5nZXRDdXN0b21EYXRhKFwibGlzdF9pdGVtX3Byb2Nlc3NlZFwiKSYmKGcucHVzaChoKSxDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIoZSxcbmgsXCJsaXN0X2l0ZW1fcHJvY2Vzc2VkXCIsITApKX1oPW51bGw7Zm9yKGs9MDtrPGcubGVuZ3RoO2srKyloPWdba10uZ2V0Q3VzdG9tRGF0YShcImxpc3RhcnJheV9pbmRleFwiKSxmW2hdLmluZGVudD0tMTtmb3Ioaz1oKzE7azxmLmxlbmd0aDtrKyspaWYoZltrXS5pbmRlbnQ+ZltrLTFdLmluZGVudCsxKXtnPWZbay0xXS5pbmRlbnQrMS1mW2tdLmluZGVudDtmb3IoaD1mW2tdLmluZGVudDtmW2tdJiZmW2tdLmluZGVudD49aDspZltrXS5pbmRlbnQrPWcsaysrO2stLX12YXIgZD1DS0VESVRPUi5wbHVnaW5zLmxpc3QuYXJyYXlUb0xpc3QoZixlLG51bGwsYi5jb25maWcuZW50ZXJNb2RlLG0ucm9vdC5nZXRBdHRyaWJ1dGUoXCJkaXJcIikpLmxpc3ROb2RlLGEscDtjKCEwKTtjKCk7ZC5yZXBsYWNlKG0ucm9vdCk7Yi5maXJlKFwiY29udGVudERvbUludmFsaWRhdGVkXCIpfWZ1bmN0aW9uIEIoYixtKXt0aGlzLm5hbWU9Yjt0aGlzLmNvbnRleHQ9dGhpcy50eXBlPW07dGhpcy5hbGxvd2VkQ29udGVudD1cbm0rXCIgbGlcIjt0aGlzLnJlcXVpcmVkQ29udGVudD1tfWZ1bmN0aW9uIEUoYixtLGUsYyl7Zm9yKHZhciBmLGc7Zj1iW2M/XCJnZXRMYXN0XCI6XCJnZXRGaXJzdFwiXShKKTspKGc9Zi5nZXREaXJlY3Rpb24oMSkpIT09bS5nZXREaXJlY3Rpb24oMSkmJmYuc2V0QXR0cmlidXRlKFwiZGlyXCIsZyksZi5yZW1vdmUoKSxlP2ZbYz9cImluc2VydEJlZm9yZVwiOlwiaW5zZXJ0QWZ0ZXJcIl0oZSk6bS5hcHBlbmQoZixjKX1mdW5jdGlvbiBGKGIpe2Z1bmN0aW9uIG0oZSl7dmFyIGM9YltlP1wiZ2V0UHJldmlvdXNcIjpcImdldE5leHRcIl0odSk7YyYmYy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmMuaXMoYi5nZXROYW1lKCkpJiYoRShiLGMsbnVsbCwhZSksYi5yZW1vdmUoKSxiPWMpfW0oKTttKDEpfWZ1bmN0aW9uIEcoYil7cmV0dXJuIGIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoYi5nZXROYW1lKClpbiBDS0VESVRPUi5kdGQuJGJsb2NrfHxiLmdldE5hbWUoKWluIENLRURJVE9SLmR0ZC4kbGlzdEl0ZW0pJiZcbkNLRURJVE9SLmR0ZFtiLmdldE5hbWUoKV1bXCIjXCJdfWZ1bmN0aW9uIEMoYixtLGUpe2IuZmlyZShcInNhdmVTbmFwc2hvdFwiKTtlLmVubGFyZ2UoQ0tFRElUT1IuRU5MQVJHRV9MSVNUX0lURU1fQ09OVEVOVFMpO3ZhciBjPWUuZXh0cmFjdENvbnRlbnRzKCk7bS50cmltKCExLCEwKTt2YXIgZj1tLmNyZWF0ZUJvb2ttYXJrKCksZz1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnRQYXRoKG0uc3RhcnRDb250YWluZXIpLGs9Zy5ibG9jayxnPWcubGFzdEVsZW1lbnQuZ2V0QXNjZW5kYW50KFwibGlcIiwxKXx8ayxoPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudFBhdGgoZS5zdGFydENvbnRhaW5lciksZD1oLmNvbnRhaW5zKENLRURJVE9SLmR0ZC4kbGlzdEl0ZW0pLGg9aC5jb250YWlucyhDS0VESVRPUi5kdGQuJGxpc3QpO2s/KGs9ay5nZXRCb2d1cygpKSYmay5yZW1vdmUoKTpoJiYoaz1oLmdldFByZXZpb3VzKHUpKSYmeihrKSYmay5yZW1vdmUoKTsoaz1jLmdldExhc3QoKSkmJmsudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZcbmsuaXMoXCJiclwiKSYmay5yZW1vdmUoKTsoaz1tLnN0YXJ0Q29udGFpbmVyLmdldENoaWxkKG0uc3RhcnRPZmZzZXQpKT9jLmluc2VydEJlZm9yZShrKTptLnN0YXJ0Q29udGFpbmVyLmFwcGVuZChjKTtkJiYoYz1BKGQpKSYmKGcuY29udGFpbnMoZCk/KEUoYyxkLmdldFBhcmVudCgpLGQpLGMucmVtb3ZlKCkpOmcuYXBwZW5kKGMpKTtmb3IoO2UuY2hlY2tTdGFydE9mQmxvY2soKSYmZS5jaGVja0VuZE9mQmxvY2soKTspe2g9ZS5zdGFydFBhdGgoKTtjPWguYmxvY2s7aWYoIWMpYnJlYWs7Yy5pcyhcImxpXCIpJiYoZz1jLmdldFBhcmVudCgpLGMuZXF1YWxzKGcuZ2V0TGFzdCh1KSkmJmMuZXF1YWxzKGcuZ2V0Rmlyc3QodSkpJiYoYz1nKSk7ZS5tb3ZlVG9Qb3NpdGlvbihjLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCk7Yy5yZW1vdmUoKX1lPWUuY2xvbmUoKTtjPWIuZWRpdGFibGUoKTtlLnNldEVuZEF0KGMsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCk7ZT1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihlKTtcbmUuZXZhbHVhdG9yPWZ1bmN0aW9uKGEpe3JldHVybiB1KGEpJiYheihhKX07KGU9ZS5uZXh0KCkpJiZlLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZS5nZXROYW1lKClpbiBDS0VESVRPUi5kdGQuJGxpc3QmJkYoZSk7bS5tb3ZlVG9Cb29rbWFyayhmKTttLnNlbGVjdCgpO2IuZmlyZShcInNhdmVTbmFwc2hvdFwiKX1mdW5jdGlvbiBBKGIpe3JldHVybihiPWIuZ2V0TGFzdCh1KSkmJmIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZiLmdldE5hbWUoKWluIHY/YjpudWxsfXZhciB2PXtvbDoxLHVsOjF9LEs9Q0tFRElUT1IuZG9tLndhbGtlci53aGl0ZXNwYWNlcygpLEg9Q0tFRElUT1IuZG9tLndhbGtlci5ib29rbWFyaygpLHU9ZnVuY3Rpb24oYil7cmV0dXJuIShLKGIpfHxIKGIpKX0sej1DS0VESVRPUi5kb20ud2Fsa2VyLmJvZ3VzKCk7Q0tFRElUT1IucGx1Z2lucy5saXN0PXtsaXN0VG9BcnJheTpmdW5jdGlvbihiLG0sZSxjLGYpe2lmKCF2W2IuZ2V0TmFtZSgpXSlyZXR1cm5bXTtcbmN8fChjPTApO2V8fChlPVtdKTtmb3IodmFyIGc9MCxrPWIuZ2V0Q2hpbGRDb3VudCgpO2c8aztnKyspe3ZhciBoPWIuZ2V0Q2hpbGQoZyk7aC50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmguZ2V0TmFtZSgpaW4gQ0tFRElUT1IuZHRkLiRsaXN0JiZDS0VESVRPUi5wbHVnaW5zLmxpc3QubGlzdFRvQXJyYXkoaCxtLGUsYysxKTtpZihcImxpXCI9PWguJC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXt2YXIgZD17cGFyZW50OmIsaW5kZW50OmMsZWxlbWVudDpoLGNvbnRlbnRzOltdfTtmP2QuZ3JhbmRwYXJlbnQ9ZjooZC5ncmFuZHBhcmVudD1iLmdldFBhcmVudCgpLGQuZ3JhbmRwYXJlbnQmJlwibGlcIj09ZC5ncmFuZHBhcmVudC4kLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJihkLmdyYW5kcGFyZW50PWQuZ3JhbmRwYXJlbnQuZ2V0UGFyZW50KCkpKTttJiZDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIobSxoLFwibGlzdGFycmF5X2luZGV4XCIsZS5sZW5ndGgpO2UucHVzaChkKTtcbmZvcih2YXIgYT0wLHA9aC5nZXRDaGlsZENvdW50KCksbDthPHA7YSsrKWw9aC5nZXRDaGlsZChhKSxsLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmdltsLmdldE5hbWUoKV0/Q0tFRElUT1IucGx1Z2lucy5saXN0Lmxpc3RUb0FycmF5KGwsbSxlLGMrMSxkLmdyYW5kcGFyZW50KTpkLmNvbnRlbnRzLnB1c2gobCl9fXJldHVybiBlfSxhcnJheVRvTGlzdDpmdW5jdGlvbihiLG0sZSxjLGYpe2V8fChlPTApO2lmKCFifHxiLmxlbmd0aDxlKzEpcmV0dXJuIG51bGw7Zm9yKHZhciBnLGs9YltlXS5wYXJlbnQuZ2V0RG9jdW1lbnQoKSxoPW5ldyBDS0VESVRPUi5kb20uZG9jdW1lbnRGcmFnbWVudChrKSxkPW51bGwsYT1lLHA9TWF0aC5tYXgoYltlXS5pbmRlbnQsMCksbD1udWxsLHEsbix0PWM9PUNLRURJVE9SLkVOVEVSX1A/XCJwXCI6XCJkaXZcIjs7KXt2YXIgcj1iW2FdO2c9ci5ncmFuZHBhcmVudDtxPXIuZWxlbWVudC5nZXREaXJlY3Rpb24oMSk7aWYoci5pbmRlbnQ9PXApe2QmJmJbYV0ucGFyZW50LmdldE5hbWUoKT09XG5kLmdldE5hbWUoKXx8KGQ9YlthXS5wYXJlbnQuY2xvbmUoITEsMSksZiYmZC5zZXRBdHRyaWJ1dGUoXCJkaXJcIixmKSxoLmFwcGVuZChkKSk7bD1kLmFwcGVuZChyLmVsZW1lbnQuY2xvbmUoMCwxKSk7cSE9ZC5nZXREaXJlY3Rpb24oMSkmJmwuc2V0QXR0cmlidXRlKFwiZGlyXCIscSk7Zm9yKGc9MDtnPHIuY29udGVudHMubGVuZ3RoO2crKylsLmFwcGVuZChyLmNvbnRlbnRzW2ddLmNsb25lKDEsMSkpO2ErK31lbHNlIGlmKHIuaW5kZW50PT1NYXRoLm1heChwLDApKzEpcj1iW2EtMV0uZWxlbWVudC5nZXREaXJlY3Rpb24oMSksYT1DS0VESVRPUi5wbHVnaW5zLmxpc3QuYXJyYXlUb0xpc3QoYixudWxsLGEsYyxyIT1xP3E6bnVsbCksIWwuZ2V0Q2hpbGRDb3VudCgpJiZDS0VESVRPUi5lbnYubmVlZHNOYnNwRmlsbGVyJiY3Pj1rLiQuZG9jdW1lbnRNb2RlJiZsLmFwcGVuZChrLmNyZWF0ZVRleHQoXCLCoFwiKSksbC5hcHBlbmQoYS5saXN0Tm9kZSksYT1hLm5leHRJbmRleDtlbHNlIGlmKC0xPT1cbnIuaW5kZW50JiYhZSYmZyl7dltnLmdldE5hbWUoKV0/KGw9ci5lbGVtZW50LmNsb25lKCExLCEwKSxxIT1nLmdldERpcmVjdGlvbigxKSYmbC5zZXRBdHRyaWJ1dGUoXCJkaXJcIixxKSk6bD1uZXcgQ0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQoayk7dmFyIGQ9Zy5nZXREaXJlY3Rpb24oMSkhPXEseT1yLmVsZW1lbnQsRD15LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpLHo9eS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSxBPWwudHlwZT09Q0tFRElUT1IuTk9ERV9ET0NVTUVOVF9GUkFHTUVOVCYmKGMhPUNLRURJVE9SLkVOVEVSX0JSfHxkfHx6fHxEKSx3LEI9ci5jb250ZW50cy5sZW5ndGgseDtmb3IoZz0wO2c8QjtnKyspaWYodz1yLmNvbnRlbnRzW2ddLEgodykmJjE8QilBP3g9dy5jbG9uZSgxLDEpOmwuYXBwZW5kKHcuY2xvbmUoMSwxKSk7ZWxzZSBpZih3LnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmdy5pc0Jsb2NrQm91bmRhcnkoKSl7ZCYmIXcuZ2V0RGlyZWN0aW9uKCkmJlxudy5zZXRBdHRyaWJ1dGUoXCJkaXJcIixxKTtuPXc7dmFyIEM9eS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKTtDJiZuLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsQy5yZXBsYWNlKC8oW147XSkkLyxcIiQxO1wiKSsobi5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKXx8XCJcIikpO0QmJncuYWRkQ2xhc3MoRCk7bj1udWxsO3gmJihsLmFwcGVuZCh4KSx4PW51bGwpO2wuYXBwZW5kKHcuY2xvbmUoMSwxKSl9ZWxzZSBBPyhufHwobj1rLmNyZWF0ZUVsZW1lbnQodCksbC5hcHBlbmQobiksZCYmbi5zZXRBdHRyaWJ1dGUoXCJkaXJcIixxKSkseiYmbi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLHopLEQmJm4uc2V0QXR0cmlidXRlKFwiY2xhc3NcIixEKSx4JiYobi5hcHBlbmQoeCkseD1udWxsKSxuLmFwcGVuZCh3LmNsb25lKDEsMSkpKTpsLmFwcGVuZCh3LmNsb25lKDEsMSkpO3gmJigobnx8bCkuYXBwZW5kKHgpLHg9bnVsbCk7bC50eXBlPT1DS0VESVRPUi5OT0RFX0RPQ1VNRU5UX0ZSQUdNRU5UJiZhIT1iLmxlbmd0aC0xJiYoQ0tFRElUT1IuZW52Lm5lZWRzQnJGaWxsZXImJlxuKHE9bC5nZXRMYXN0KCkpJiZxLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmcS5pcyhcImJyXCIpJiZxLnJlbW92ZSgpLChxPWwuZ2V0TGFzdCh1KSkmJnEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZxLmlzKENLRURJVE9SLmR0ZC4kYmxvY2spfHxsLmFwcGVuZChrLmNyZWF0ZUVsZW1lbnQoXCJiclwiKSkpO3E9bC4kLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XCJkaXZcIiE9cSYmXCJwXCIhPXF8fGwuYXBwZW5kQm9ndXMoKTtoLmFwcGVuZChsKTtkPW51bGw7YSsrfWVsc2UgcmV0dXJuIG51bGw7bj1udWxsO2lmKGIubGVuZ3RoPD1hfHxNYXRoLm1heChiW2FdLmluZGVudCwwKTxwKWJyZWFrfWlmKG0pZm9yKGI9aC5nZXRGaXJzdCgpO2I7KXtpZihiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKENLRURJVE9SLmRvbS5lbGVtZW50LmNsZWFyTWFya2VycyhtLGIpLGIuZ2V0TmFtZSgpaW4gQ0tFRElUT1IuZHRkLiRsaXN0SXRlbSYmKGU9YixrPWY9Yz12b2lkIDAsYz1lLmdldERpcmVjdGlvbigpKSkpe2ZvcihmPVxuZS5nZXRQYXJlbnQoKTtmJiYhKGs9Zi5nZXREaXJlY3Rpb24oKSk7KWY9Zi5nZXRQYXJlbnQoKTtjPT1rJiZlLnJlbW92ZUF0dHJpYnV0ZShcImRpclwiKX1iPWIuZ2V0TmV4dFNvdXJjZU5vZGUoKX1yZXR1cm57bGlzdE5vZGU6aCxuZXh0SW5kZXg6YX19fTt2YXIgTD0vXmhbMS02XSQvLEo9Q0tFRElUT1IuZG9tLndhbGtlci5ub2RlVHlwZShDS0VESVRPUi5OT0RFX0VMRU1FTlQpO0IucHJvdG90eXBlPXtleGVjOmZ1bmN0aW9uKGIpe3RoaXMucmVmcmVzaChiLGIuZWxlbWVudFBhdGgoKSk7dmFyIG09Yi5jb25maWcsZT1iLmdldFNlbGVjdGlvbigpLGM9ZSYmZS5nZXRSYW5nZXMoKTtpZih0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PRkYpe3ZhciBmPWIuZWRpdGFibGUoKTtpZihmLmdldEZpcnN0KHUpKXt2YXIgZz0xPT1jLmxlbmd0aCYmY1swXTsobT1nJiZnLmdldEVuY2xvc2VkTm9kZSgpKSYmbS5pcyYmdGhpcy50eXBlPT1tLmdldE5hbWUoKSYmdGhpcy5zZXRTdGF0ZShDS0VESVRPUi5UUklTVEFURV9PTil9ZWxzZSBtLmVudGVyTW9kZT09XG5DS0VESVRPUi5FTlRFUl9CUj9mLmFwcGVuZEJvZ3VzKCk6Y1swXS5maXhCbG9jaygxLG0uZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9QP1wicFwiOlwiZGl2XCIpLGUuc2VsZWN0UmFuZ2VzKGMpfWZvcih2YXIgbT1lLmNyZWF0ZUJvb2ttYXJrcyghMCksZj1bXSxrPXt9LGM9Yy5jcmVhdGVJdGVyYXRvcigpLGg9MDsoZz1jLmdldE5leHRSYW5nZSgpKSYmKytoOyl7dmFyIGQ9Zy5nZXRCb3VuZGFyeU5vZGVzKCksYT1kLnN0YXJ0Tm9kZSxwPWQuZW5kTm9kZTthLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmXCJ0ZFwiPT1hLmdldE5hbWUoKSYmZy5zZXRTdGFydEF0KGQuc3RhcnROb2RlLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKTtwLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmXCJ0ZFwiPT1wLmdldE5hbWUoKSYmZy5zZXRFbmRBdChkLmVuZE5vZGUsQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCk7Zz1nLmNyZWF0ZUl0ZXJhdG9yKCk7Zm9yKGcuZm9yY2VCckJyZWFrPVxudGhpcy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfT0ZGO2Q9Zy5nZXROZXh0UGFyYWdyYXBoKCk7KWlmKCFkLmdldEN1c3RvbURhdGEoXCJsaXN0X2Jsb2NrXCIpKXtDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIoayxkLFwibGlzdF9ibG9ja1wiLDEpO2Zvcih2YXIgbD1iLmVsZW1lbnRQYXRoKGQpLGE9bC5lbGVtZW50cyxwPTAsbD1sLmJsb2NrTGltaXQscSxuPWEubGVuZ3RoLTE7MDw9biYmKHE9YVtuXSk7bi0tKWlmKHZbcS5nZXROYW1lKCldJiZsLmNvbnRhaW5zKHEpKXtsLnJlbW92ZUN1c3RvbURhdGEoXCJsaXN0X2dyb3VwX29iamVjdF9cIitoKTsoYT1xLmdldEN1c3RvbURhdGEoXCJsaXN0X2dyb3VwX29iamVjdFwiKSk/YS5jb250ZW50cy5wdXNoKGQpOihhPXtyb290OnEsY29udGVudHM6W2RdfSxmLnB1c2goYSksQ0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyKGsscSxcImxpc3RfZ3JvdXBfb2JqZWN0XCIsYSkpO3A9MTticmVha31wfHwocD1sLHAuZ2V0Q3VzdG9tRGF0YShcImxpc3RfZ3JvdXBfb2JqZWN0X1wiK1xuaCk/cC5nZXRDdXN0b21EYXRhKFwibGlzdF9ncm91cF9vYmplY3RfXCIraCkuY29udGVudHMucHVzaChkKTooYT17cm9vdDpwLGNvbnRlbnRzOltkXX0sQ0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyKGsscCxcImxpc3RfZ3JvdXBfb2JqZWN0X1wiK2gsYSksZi5wdXNoKGEpKSl9fWZvcihxPVtdOzA8Zi5sZW5ndGg7KWlmKGE9Zi5zaGlmdCgpLHRoaXMuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09GRilpZih2W2Eucm9vdC5nZXROYW1lKCldKXtjPWI7aD1hO2E9aztnPXE7cD1DS0VESVRPUi5wbHVnaW5zLmxpc3QubGlzdFRvQXJyYXkoaC5yb290LGEpO2w9W107Zm9yKGQ9MDtkPGguY29udGVudHMubGVuZ3RoO2QrKyluPWguY29udGVudHNbZF0sKG49bi5nZXRBc2NlbmRhbnQoXCJsaVwiLCEwKSkmJiFuLmdldEN1c3RvbURhdGEoXCJsaXN0X2l0ZW1fcHJvY2Vzc2VkXCIpJiYobC5wdXNoKG4pLENLRURJVE9SLmRvbS5lbGVtZW50LnNldE1hcmtlcihhLG4sXCJsaXN0X2l0ZW1fcHJvY2Vzc2VkXCIsXG4hMCkpO2Zvcih2YXIgbj1oLnJvb3QuZ2V0RG9jdW1lbnQoKSx0PXZvaWQgMCxyPXZvaWQgMCxkPTA7ZDxsLmxlbmd0aDtkKyspe3ZhciB5PWxbZF0uZ2V0Q3VzdG9tRGF0YShcImxpc3RhcnJheV9pbmRleFwiKSx0PXBbeV0ucGFyZW50O3QuaXModGhpcy50eXBlKXx8KHI9bi5jcmVhdGVFbGVtZW50KHRoaXMudHlwZSksdC5jb3B5QXR0cmlidXRlcyhyLHtzdGFydDoxLHR5cGU6MX0pLHIucmVtb3ZlU3R5bGUoXCJsaXN0LXN0eWxlLXR5cGVcIikscFt5XS5wYXJlbnQ9cil9YT1DS0VESVRPUi5wbHVnaW5zLmxpc3QuYXJyYXlUb0xpc3QocCxhLG51bGwsYy5jb25maWcuZW50ZXJNb2RlKTtwPXZvaWQgMDtsPWEubGlzdE5vZGUuZ2V0Q2hpbGRDb3VudCgpO2ZvcihkPTA7ZDxsJiYocD1hLmxpc3ROb2RlLmdldENoaWxkKGQpKTtkKyspcC5nZXROYW1lKCk9PXRoaXMudHlwZSYmZy5wdXNoKHApO2EubGlzdE5vZGUucmVwbGFjZShoLnJvb3QpO2MuZmlyZShcImNvbnRlbnREb21JbnZhbGlkYXRlZFwiKX1lbHNle3A9XG5iO2c9YTtkPXE7bD1nLmNvbnRlbnRzO2M9Zy5yb290LmdldERvY3VtZW50KCk7aD1bXTsxPT1sLmxlbmd0aCYmbFswXS5lcXVhbHMoZy5yb290KSYmKGE9Yy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGxbMF0ubW92ZUNoaWxkcmVuJiZsWzBdLm1vdmVDaGlsZHJlbihhKSxsWzBdLmFwcGVuZChhKSxsWzBdPWEpO2c9Zy5jb250ZW50c1swXS5nZXRQYXJlbnQoKTtmb3Iobj0wO248bC5sZW5ndGg7bisrKWc9Zy5nZXRDb21tb25BbmNlc3RvcihsW25dLmdldFBhcmVudCgpKTt0PXAuY29uZmlnLnVzZUNvbXB1dGVkU3RhdGU7cD1hPXZvaWQgMDt0PXZvaWQgMD09PXR8fHQ7Zm9yKG49MDtuPGwubGVuZ3RoO24rKylmb3Iocj1sW25dO3k9ci5nZXRQYXJlbnQoKTspe2lmKHkuZXF1YWxzKGcpKXtoLnB1c2gocik7IXAmJnIuZ2V0RGlyZWN0aW9uKCkmJihwPTEpO3I9ci5nZXREaXJlY3Rpb24odCk7bnVsbCE9PWEmJihhPWEmJmEhPXI/bnVsbDpyKTticmVha31yPXl9aWYoISgxPmgubGVuZ3RoKSl7bD1cbmhbaC5sZW5ndGgtMV0uZ2V0TmV4dCgpO249Yy5jcmVhdGVFbGVtZW50KHRoaXMudHlwZSk7ZC5wdXNoKG4pO2Zvcih0PWQ9dm9pZCAwO2gubGVuZ3RoOylkPWguc2hpZnQoKSx0PWMuY3JlYXRlRWxlbWVudChcImxpXCIpLHI9ZCxyLmlzKFwicHJlXCIpfHxMLnRlc3Qoci5nZXROYW1lKCkpfHxcImZhbHNlXCI9PXIuZ2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpP2QuYXBwZW5kVG8odCk6KGQuY29weUF0dHJpYnV0ZXModCksYSYmZC5nZXREaXJlY3Rpb24oKSYmKHQucmVtb3ZlU3R5bGUoXCJkaXJlY3Rpb25cIiksdC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXJcIikpLGQubW92ZUNoaWxkcmVuKHQpLGQucmVtb3ZlKCkpLHQuYXBwZW5kVG8obik7YSYmcCYmbi5zZXRBdHRyaWJ1dGUoXCJkaXJcIixhKTtsP24uaW5zZXJ0QmVmb3JlKGwpOm4uYXBwZW5kVG8oZyl9fWVsc2UgdGhpcy5zdGF0ZT09Q0tFRElUT1IuVFJJU1RBVEVfT04mJnZbYS5yb290LmdldE5hbWUoKV0mJkkuY2FsbCh0aGlzLGIsYSxrKTtcbmZvcihuPTA7bjxxLmxlbmd0aDtuKyspRihxW25dKTtDS0VESVRPUi5kb20uZWxlbWVudC5jbGVhckFsbE1hcmtlcnMoayk7ZS5zZWxlY3RCb29rbWFya3MobSk7Yi5mb2N1cygpfSxyZWZyZXNoOmZ1bmN0aW9uKGIsbSl7dmFyIGU9bS5jb250YWlucyh2LDEpLGM9bS5ibG9ja0xpbWl0fHxtLnJvb3Q7ZSYmYy5jb250YWlucyhlKT90aGlzLnNldFN0YXRlKGUuaXModGhpcy50eXBlKT9DS0VESVRPUi5UUklTVEFURV9PTjpDS0VESVRPUi5UUklTVEFURV9PRkYpOnRoaXMuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfT0ZGKX19O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwibGlzdFwiLHtyZXF1aXJlczpcImluZGVudGxpc3RcIixpbml0OmZ1bmN0aW9uKGIpe2IuYmxvY2tsZXNzfHwoYi5hZGRDb21tYW5kKFwibnVtYmVyZWRsaXN0XCIsbmV3IEIoXCJudW1iZXJlZGxpc3RcIixcIm9sXCIpKSxiLmFkZENvbW1hbmQoXCJidWxsZXRlZGxpc3RcIixuZXcgQihcImJ1bGxldGVkbGlzdFwiLFwidWxcIikpLGIudWkuYWRkQnV0dG9uJiZcbihiLnVpLmFkZEJ1dHRvbihcIk51bWJlcmVkTGlzdFwiLHtsYWJlbDpiLmxhbmcubGlzdC5udW1iZXJlZGxpc3QsY29tbWFuZDpcIm51bWJlcmVkbGlzdFwiLGRpcmVjdGlvbmFsOiEwLHRvb2xiYXI6XCJsaXN0LDEwXCJ9KSxiLnVpLmFkZEJ1dHRvbihcIkJ1bGxldGVkTGlzdFwiLHtsYWJlbDpiLmxhbmcubGlzdC5idWxsZXRlZGxpc3QsY29tbWFuZDpcImJ1bGxldGVkbGlzdFwiLGRpcmVjdGlvbmFsOiEwLHRvb2xiYXI6XCJsaXN0LDIwXCJ9KSksYi5vbihcImtleVwiLGZ1bmN0aW9uKG0pe3ZhciBlPW0uZGF0YS5kb21FdmVudC5nZXRLZXkoKSxjO2lmKFwid3lzaXd5Z1wiPT1iLm1vZGUmJmUgaW57ODoxLDQ2OjF9KXt2YXIgZj1iLmdldFNlbGVjdGlvbigpLmdldFJhbmdlcygpWzBdLGc9ZiYmZi5zdGFydFBhdGgoKTtpZihmJiZmLmNvbGxhcHNlZCl7dmFyIGs9OD09ZSxoPWIuZWRpdGFibGUoKSxkPW5ldyBDS0VESVRPUi5kb20ud2Fsa2VyKGYuY2xvbmUoKSk7ZC5ldmFsdWF0b3I9ZnVuY3Rpb24oYSl7cmV0dXJuIHUoYSkmJlxuIXooYSl9O2QuZ3VhcmQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4hKGImJmEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmlzKFwidGFibGVcIikpfTtlPWYuY2xvbmUoKTtpZihrKXt2YXIgYTsoYT1nLmNvbnRhaW5zKHYpKSYmZi5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGEsQ0tFRElUT1IuU1RBUlQpJiYoYT1hLmdldFBhcmVudCgpKSYmYS5pcyhcImxpXCIpJiYoYT1BKGEpKT8oYz1hLGE9YS5nZXRQcmV2aW91cyh1KSxlLm1vdmVUb1Bvc2l0aW9uKGEmJnooYSk/YTpjLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCkpOihkLnJhbmdlLnNldFN0YXJ0QXQoaCxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCksZC5yYW5nZS5zZXRFbmQoZi5zdGFydENvbnRhaW5lcixmLnN0YXJ0T2Zmc2V0KSwoYT1kLnByZXZpb3VzKCkpJiZhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmKGEuZ2V0TmFtZSgpaW4gdnx8YS5pcyhcImxpXCIpKSYmKGEuaXMoXCJsaVwiKXx8KGQucmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGEpLFxuZC5yZXNldCgpLGQuZXZhbHVhdG9yPUcsYT1kLnByZXZpb3VzKCkpLGM9YSxlLm1vdmVUb0VsZW1lbnRFZGl0RW5kKGMpLGUubW92ZVRvUG9zaXRpb24oZS5lbmRQYXRoKCkuYmxvY2ssQ0tFRElUT1IuUE9TSVRJT05fQkVGT1JFX0VORCkpKTtpZihjKUMoYixlLGYpLG0uY2FuY2VsKCk7ZWxzZXt2YXIgcD1nLmNvbnRhaW5zKHYpO3AmJmYuY2hlY2tCb3VuZGFyeU9mRWxlbWVudChwLENLRURJVE9SLlNUQVJUKSYmKGM9cC5nZXRGaXJzdCh1KSxmLmNoZWNrQm91bmRhcnlPZkVsZW1lbnQoYyxDS0VESVRPUi5TVEFSVCkmJihhPXAuZ2V0UHJldmlvdXModSksQShjKT9hJiYoZi5tb3ZlVG9FbGVtZW50RWRpdEVuZChhKSxmLnNlbGVjdCgpKTpiLmV4ZWNDb21tYW5kKFwib3V0ZGVudFwiKSxtLmNhbmNlbCgpKSl9fWVsc2UgaWYoYz1nLmNvbnRhaW5zKFwibGlcIikpe2lmKGQucmFuZ2Uuc2V0RW5kQXQoaCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKSxrPShoPWMuZ2V0TGFzdCh1KSkmJlxuRyhoKT9oOmMsZz0wLChhPWQubmV4dCgpKSYmYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuZ2V0TmFtZSgpaW4gdiYmYS5lcXVhbHMoaCk/KGc9MSxhPWQubmV4dCgpKTpmLmNoZWNrQm91bmRhcnlPZkVsZW1lbnQoayxDS0VESVRPUi5FTkQpJiYoZz0yKSxnJiZhKXtmPWYuY2xvbmUoKTtmLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoYSk7aWYoMT09ZyYmKGUub3B0aW1pemUoKSwhZS5zdGFydENvbnRhaW5lci5lcXVhbHMoYykpKXtmb3IoYz1lLnN0YXJ0Q29udGFpbmVyO2MuaXMoQ0tFRElUT1IuZHRkLiRpbmxpbmUpOylwPWMsYz1jLmdldFBhcmVudCgpO3AmJmUubW92ZVRvUG9zaXRpb24ocCxDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9FTkQpfTI9PWcmJihlLm1vdmVUb1Bvc2l0aW9uKGUuZW5kUGF0aCgpLmJsb2NrLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9FTkQpLGYuZW5kUGF0aCgpLmJsb2NrJiZmLm1vdmVUb1Bvc2l0aW9uKGYuZW5kUGF0aCgpLmJsb2NrLENLRURJVE9SLlBPU0lUSU9OX0FGVEVSX1NUQVJUKSk7XG5DKGIsZSxmKTttLmNhbmNlbCgpfX1lbHNlIGQucmFuZ2Uuc2V0RW5kQXQoaCxDS0VESVRPUi5QT1NJVElPTl9CRUZPUkVfRU5EKSwoYT1kLm5leHQoKSkmJmEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmlzKHYpJiYoYT1hLmdldEZpcnN0KHUpLGcuYmxvY2smJmYuY2hlY2tTdGFydE9mQmxvY2soKSYmZi5jaGVja0VuZE9mQmxvY2soKT8oZy5ibG9jay5yZW1vdmUoKSxmLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoYSksZi5zZWxlY3QoKSk6QShhKT8oZi5tb3ZlVG9FbGVtZW50RWRpdFN0YXJ0KGEpLGYuc2VsZWN0KCkpOihmPWYuY2xvbmUoKSxmLm1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoYSksQyhiLGUsZikpLG0uY2FuY2VsKCkpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtiLnNlbGVjdGlvbkNoYW5nZSgxKX0pfX19KSl9fSl9KSgpOyhmdW5jdGlvbigpe0NLRURJVE9SLnBsdWdpbnMubGlzdHN0eWxlPXtyZXF1aXJlczpcImRpYWxvZyxjb250ZXh0bWVudVwiLGluaXQ6ZnVuY3Rpb24oYSl7aWYoIWEuYmxvY2tsZXNzKXt2YXIgYjtiPW5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwibnVtYmVyZWRMaXN0U3R5bGVcIix7cmVxdWlyZWRDb250ZW50Olwib2xcIixhbGxvd2VkQ29udGVudDpcIm9se2xpc3Qtc3R5bGUtdHlwZX1bc3RhcnRdXCJ9KTtiPWEuYWRkQ29tbWFuZChcIm51bWJlcmVkTGlzdFN0eWxlXCIsYik7YS5hZGRGZWF0dXJlKGIpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJudW1iZXJlZExpc3RTdHlsZVwiLHRoaXMucGF0aCtcImRpYWxvZ3MvbGlzdHN0eWxlLmpzXCIpO2I9bmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJidWxsZXRlZExpc3RTdHlsZVwiLHtyZXF1aXJlZENvbnRlbnQ6XCJ1bFwiLGFsbG93ZWRDb250ZW50OlwidWx7bGlzdC1zdHlsZS10eXBlfVwifSk7Yj1hLmFkZENvbW1hbmQoXCJidWxsZXRlZExpc3RTdHlsZVwiLGIpO1xuYS5hZGRGZWF0dXJlKGIpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJidWxsZXRlZExpc3RTdHlsZVwiLHRoaXMucGF0aCtcImRpYWxvZ3MvbGlzdHN0eWxlLmpzXCIpO2EuYWRkTWVudUdyb3VwKFwibGlzdFwiLDEwOCk7YS5hZGRNZW51SXRlbXMoe251bWJlcmVkbGlzdDp7bGFiZWw6YS5sYW5nLmxpc3RzdHlsZS5udW1iZXJlZFRpdGxlLGdyb3VwOlwibGlzdFwiLGNvbW1hbmQ6XCJudW1iZXJlZExpc3RTdHlsZVwifSxidWxsZXRlZGxpc3Q6e2xhYmVsOmEubGFuZy5saXN0c3R5bGUuYnVsbGV0ZWRUaXRsZSxncm91cDpcImxpc3RcIixjb21tYW5kOlwiYnVsbGV0ZWRMaXN0U3R5bGVcIn19KTthLmNvbnRleHRNZW51LmFkZExpc3RlbmVyKGZ1bmN0aW9uKGEpe2lmKCFhfHxhLmlzUmVhZE9ubHkoKSlyZXR1cm4gbnVsbDtmb3IoO2E7KXt2YXIgYj1hLmdldE5hbWUoKTtpZihcIm9sXCI9PWIpcmV0dXJue251bWJlcmVkbGlzdDpDS0VESVRPUi5UUklTVEFURV9PRkZ9O2lmKFwidWxcIj09YilyZXR1cm57YnVsbGV0ZWRsaXN0OkNLRURJVE9SLlRSSVNUQVRFX09GRn07XG5hPWEuZ2V0UGFyZW50KCl9cmV0dXJuIG51bGx9KX19fTtDS0VESVRPUi5wbHVnaW5zLmFkZChcImxpc3RzdHlsZVwiLENLRURJVE9SLnBsdWdpbnMubGlzdHN0eWxlKX0pKCk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gVihhLGMsZCl7cmV0dXJuIG4oYykmJm4oZCkmJmQuZXF1YWxzKGMuZ2V0TmV4dChmdW5jdGlvbihhKXtyZXR1cm4hKEUoYSl8fEYoYSl8fHUoYSkpfSkpfWZ1bmN0aW9uIHooYSl7dGhpcy51cHBlcj1hWzBdO3RoaXMubG93ZXI9YVsxXTt0aGlzLnNldC5hcHBseSh0aGlzLGEuc2xpY2UoMikpfWZ1bmN0aW9uIE8oYSl7dmFyIGM9YS5lbGVtZW50O2lmKGMmJm4oYykmJihjPWMuZ2V0QXNjZW5kYW50KGEudHJpZ2dlcnMsITApKSYmYS5lZGl0YWJsZS5jb250YWlucyhjKSl7dmFyIGQ9UChjKTtpZihcInRydWVcIj09ZC5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikpcmV0dXJuIGM7aWYoZC5pcyhhLnRyaWdnZXJzKSlyZXR1cm4gZH1yZXR1cm4gbnVsbH1mdW5jdGlvbiBrYShhLGMsZCl7cihhLGMpO3IoYSxkKTthPWMuc2l6ZS5ib3R0b207ZD1kLnNpemUudG9wO3JldHVybiBhJiZkPzB8KGErZCkvMjphfHxkfWZ1bmN0aW9uIHcoYSxjLGQpe3JldHVybiBjPVxuY1tkP1wiZ2V0UHJldmlvdXNcIjpcImdldE5leHRcIl0oZnVuY3Rpb24oYil7cmV0dXJuIGImJmIudHlwZT09Q0tFRElUT1IuTk9ERV9URVhUJiYhRShiKXx8bihiKSYmIXUoYikmJiFBKGEsYil9KX1mdW5jdGlvbiBxKGEsYyxkKXtyZXR1cm4gYT5jJiZhPGR9ZnVuY3Rpb24gUChhLGMpe2lmKGEuZGF0YShcImNrZS1lZGl0YWJsZVwiKSlyZXR1cm4gbnVsbDtmb3IoY3x8KGE9YS5nZXRQYXJlbnQoKSk7YSYmIWEuZGF0YShcImNrZS1lZGl0YWJsZVwiKTspe2lmKGEuaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKXJldHVybiBhO2E9YS5nZXRQYXJlbnQoKX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBsYShhKXt2YXIgYz1hLmRvYyxkPUcoJ1xceDNjc3BhbiBjb250ZW50ZWRpdGFibGVcXHgzZFwiZmFsc2VcIiBzdHlsZVxceDNkXCInK1ErXCJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXItdG9wOjFweCBkYXNoZWQgXCIrYS5ib3hDb2xvcisnXCJcXHgzZVxceDNjL3NwYW5cXHgzZScsYyksYj1DS0VESVRPUi5nZXRVcmwodGhpcy5wYXRoK1xuXCJpbWFnZXMvXCIrKHQuaGlkcGk/XCJoaWRwaS9cIjpcIlwiKStcImljb25cIisoYS5ydGw/XCItcnRsXCI6XCJcIikrXCIucG5nXCIpO3YoZCx7YXR0YWNoOmZ1bmN0aW9uKCl7dGhpcy53cmFwLmdldFBhcmVudCgpfHx0aGlzLndyYXAuYXBwZW5kVG8oYS5lZGl0YWJsZSwhMCk7cmV0dXJuIHRoaXN9LGxpbmVDaGlsZHJlbjpbdihHKCdcXHgzY3NwYW4gdGl0bGVcXHgzZFwiJythLmVkaXRvci5sYW5nLm1hZ2ljbGluZS50aXRsZSsnXCIgY29udGVudGVkaXRhYmxlXFx4M2RcImZhbHNlXCJcXHgzZVxceDI2Izg2Mjk7XFx4M2Mvc3BhblxceDNlJyxjKSx7YmFzZTpRK1wiaGVpZ2h0OjE3cHg7d2lkdGg6MTdweDtcIisoYS5ydGw/XCJsZWZ0XCI6XCJyaWdodFwiKStcIjoxN3B4O2JhY2tncm91bmQ6dXJsKFwiK2IrXCIpIGNlbnRlciBuby1yZXBlYXQgXCIrYS5ib3hDb2xvcitcIjtjdXJzb3I6cG9pbnRlcjtcIisodC5oYz9cImZvbnQtc2l6ZTogMTVweDtsaW5lLWhlaWdodDoxNHB4O2JvcmRlcjoxcHggc29saWQgI2ZmZjt0ZXh0LWFsaWduOmNlbnRlcjtcIjpcblwiXCIpKyh0LmhpZHBpP1wiYmFja2dyb3VuZC1zaXplOiA5cHggMTBweDtcIjpcIlwiKSxsb29rczpbXCJ0b3A6LThweDsgYm9yZGVyLXJhZGl1czogMnB4O1wiLFwidG9wOi0xN3B4OyBib3JkZXItcmFkaXVzOiAycHggMnB4IDBweCAwcHg7XCIsXCJ0b3A6LTFweDsgYm9yZGVyLXJhZGl1czogMHB4IDBweCAycHggMnB4O1wiXX0pLHYoRyhXLGMpLHtiYXNlOlgrXCJsZWZ0OjBweDtib3JkZXItbGVmdC1jb2xvcjpcIithLmJveENvbG9yK1wiO1wiLGxvb2tzOltcImJvcmRlci13aWR0aDo4cHggMCA4cHggOHB4O3RvcDotOHB4XCIsXCJib3JkZXItd2lkdGg6OHB4IDAgMCA4cHg7dG9wOi04cHhcIixcImJvcmRlci13aWR0aDowIDAgOHB4IDhweDt0b3A6MHB4XCJdfSksdihHKFcsYykse2Jhc2U6WCtcInJpZ2h0OjBweDtib3JkZXItcmlnaHQtY29sb3I6XCIrYS5ib3hDb2xvcitcIjtcIixsb29rczpbXCJib3JkZXItd2lkdGg6OHB4IDhweCA4cHggMDt0b3A6LThweFwiLFwiYm9yZGVyLXdpZHRoOjhweCA4cHggMCAwO3RvcDotOHB4XCIsXG5cImJvcmRlci13aWR0aDowIDhweCA4cHggMDt0b3A6MHB4XCJdfSldLGRldGFjaDpmdW5jdGlvbigpe3RoaXMud3JhcC5nZXRQYXJlbnQoKSYmdGhpcy53cmFwLnJlbW92ZSgpO3JldHVybiB0aGlzfSxtb3VzZU5lYXI6ZnVuY3Rpb24oKXtyKGEsdGhpcyk7dmFyIGI9YS5ob2xkRGlzdGFuY2UsYz10aGlzLnNpemU7cmV0dXJuIGMmJnEoYS5tb3VzZS55LGMudG9wLWIsYy5ib3R0b20rYikmJnEoYS5tb3VzZS54LGMubGVmdC1iLGMucmlnaHQrYik/ITA6ITF9LHBsYWNlOmZ1bmN0aW9uKCl7dmFyIGI9YS52aWV3LGM9YS5lZGl0YWJsZSxkPWEudHJpZ2dlcixoPWQudXBwZXIsZz1kLmxvd2VyLGw9aHx8ZyxwPWwuZ2V0UGFyZW50KCksbT17fTt0aGlzLnRyaWdnZXI9ZDtoJiZyKGEsaCwhMCk7ZyYmcihhLGcsITApO3IoYSxwLCEwKTthLmluSW5saW5lTW9kZSYmSChhLCEwKTtwLmVxdWFscyhjKT8obS5sZWZ0PWIuc2Nyb2xsLngsbS5yaWdodD0tYi5zY3JvbGwueCxtLndpZHRoPVwiXCIpOihtLmxlZnQ9XG5sLnNpemUubGVmdC1sLnNpemUubWFyZ2luLmxlZnQrYi5zY3JvbGwueC0oYS5pbklubGluZU1vZGU/Yi5lZGl0YWJsZS5sZWZ0K2IuZWRpdGFibGUuYm9yZGVyLmxlZnQ6MCksbS53aWR0aD1sLnNpemUub3V0ZXJXaWR0aCtsLnNpemUubWFyZ2luLmxlZnQrbC5zaXplLm1hcmdpbi5yaWdodCtiLnNjcm9sbC54LG0ucmlnaHQ9XCJcIik7aCYmZz9tLnRvcD1oLnNpemUubWFyZ2luLmJvdHRvbT09PWcuc2l6ZS5tYXJnaW4udG9wPzB8aC5zaXplLmJvdHRvbStoLnNpemUubWFyZ2luLmJvdHRvbS8yOmguc2l6ZS5tYXJnaW4uYm90dG9tPGcuc2l6ZS5tYXJnaW4udG9wP2guc2l6ZS5ib3R0b20raC5zaXplLm1hcmdpbi5ib3R0b206aC5zaXplLmJvdHRvbStoLnNpemUubWFyZ2luLmJvdHRvbS1nLnNpemUubWFyZ2luLnRvcDpoP2d8fChtLnRvcD1oLnNpemUuYm90dG9tK2guc2l6ZS5tYXJnaW4uYm90dG9tKTptLnRvcD1nLnNpemUudG9wLWcuc2l6ZS5tYXJnaW4udG9wO2QuaXMoQyl8fHEobS50b3AsXG5iLnNjcm9sbC55LTE1LGIuc2Nyb2xsLnkrNSk/KG0udG9wPWEuaW5JbmxpbmVNb2RlPzA6Yi5zY3JvbGwueSx0aGlzLmxvb2soQykpOmQuaXMoRCl8fHEobS50b3AsYi5wYW5lLmJvdHRvbS01LGIucGFuZS5ib3R0b20rMTUpPyhtLnRvcD1hLmluSW5saW5lTW9kZT9iLmVkaXRhYmxlLmhlaWdodCtiLmVkaXRhYmxlLnBhZGRpbmcudG9wK2IuZWRpdGFibGUucGFkZGluZy5ib3R0b206Yi5wYW5lLmJvdHRvbS0xLHRoaXMubG9vayhEKSk6KGEuaW5JbmxpbmVNb2RlJiYobS50b3AtPWIuZWRpdGFibGUudG9wK2IuZWRpdGFibGUuYm9yZGVyLnRvcCksdGhpcy5sb29rKHgpKTthLmluSW5saW5lTW9kZSYmKG0udG9wLS0sbS50b3ArPWIuZWRpdGFibGUuc2Nyb2xsLnRvcCxtLmxlZnQrPWIuZWRpdGFibGUuc2Nyb2xsLmxlZnQpO2Zvcih2YXIgbiBpbiBtKW1bbl09Q0tFRElUT1IudG9vbHMuY3NzTGVuZ3RoKG1bbl0pO3RoaXMuc2V0U3R5bGVzKG0pfSxsb29rOmZ1bmN0aW9uKGEpe2lmKHRoaXMub2xkTG9vayE9XG5hKXtmb3IodmFyIGI9dGhpcy5saW5lQ2hpbGRyZW4ubGVuZ3RoLGM7Yi0tOykoYz10aGlzLmxpbmVDaGlsZHJlbltiXSkuc2V0QXR0cmlidXRlKFwic3R5bGVcIixjLmJhc2UrYy5sb29rc1swfGEvMl0pO3RoaXMub2xkTG9vaz1hfX0sd3JhcDpuZXcgUihcInNwYW5cIixhLmRvYyl9KTtmb3IoYz1kLmxpbmVDaGlsZHJlbi5sZW5ndGg7Yy0tOylkLmxpbmVDaGlsZHJlbltjXS5hcHBlbmRUbyhkKTtkLmxvb2soeCk7ZC5hcHBlbmRUbyhkLndyYXApO2QudW5zZWxlY3RhYmxlKCk7ZC5saW5lQ2hpbGRyZW5bMF0ub24oXCJtb3VzZXVwXCIsZnVuY3Rpb24oYil7ZC5kZXRhY2goKTtTKGEsZnVuY3Rpb24oYil7dmFyIGM9YS5saW5lLnRyaWdnZXI7YltjLmlzKEkpP1wiaW5zZXJ0QmVmb3JlXCI6XCJpbnNlcnRBZnRlclwiXShjLmlzKEkpP2MubG93ZXI6Yy51cHBlcil9LCEwKTthLmVkaXRvci5mb2N1cygpO3QuaWV8fGEuZW50ZXJNb2RlPT1DS0VESVRPUi5FTlRFUl9CUnx8YS5ob3ROb2RlLnNjcm9sbEludG9WaWV3KCk7XG5iLmRhdGEucHJldmVudERlZmF1bHQoITApfSk7ZC5vbihcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGEpe2EuZGF0YS5wcmV2ZW50RGVmYXVsdCghMCl9KTthLmxpbmU9ZH1mdW5jdGlvbiBTKGEsYyxkKXt2YXIgYj1uZXcgQ0tFRElUT1IuZG9tLnJhbmdlKGEuZG9jKSxlPWEuZWRpdG9yLGY7dC5pZSYmYS5lbnRlck1vZGU9PUNLRURJVE9SLkVOVEVSX0JSP2Y9YS5kb2MuY3JlYXRlVGV4dChKKTooZj0oZj1QKGEuZWxlbWVudCwhMCkpJiZmLmRhdGEoXCJja2UtZW50ZXItbW9kZVwiKXx8YS5lbnRlck1vZGUsZj1uZXcgUihLW2ZdLGEuZG9jKSxmLmlzKFwiYnJcIil8fGEuZG9jLmNyZWF0ZVRleHQoSikuYXBwZW5kVG8oZikpO2QmJmUuZmlyZShcInNhdmVTbmFwc2hvdFwiKTtjKGYpO2IubW92ZVRvUG9zaXRpb24oZixDS0VESVRPUi5QT1NJVElPTl9BRlRFUl9TVEFSVCk7ZS5nZXRTZWxlY3Rpb24oKS5zZWxlY3RSYW5nZXMoW2JdKTthLmhvdE5vZGU9ZjtkJiZlLmZpcmUoXCJzYXZlU25hcHNob3RcIil9XG5mdW5jdGlvbiBZKGEsYyl7cmV0dXJue2NhblVuZG86ITAsbW9kZXM6e3d5c2l3eWc6MX0sZXhlYzpmdW5jdGlvbigpe2Z1bmN0aW9uIGQoYil7dmFyIGQ9dC5pZSYmOT50LnZlcnNpb24/XCIgXCI6SixmPWEuaG90Tm9kZSYmYS5ob3ROb2RlLmdldFRleHQoKT09ZCYmYS5lbGVtZW50LmVxdWFscyhhLmhvdE5vZGUpJiZhLmxhc3RDbWREaXJlY3Rpb249PT0hIWM7UyhhLGZ1bmN0aW9uKGQpe2YmJmEuaG90Tm9kZSYmYS5ob3ROb2RlLnJlbW92ZSgpO2RbYz9cImluc2VydEFmdGVyXCI6XCJpbnNlcnRCZWZvcmVcIl0oYik7ZC5zZXRBdHRyaWJ1dGVzKHtcImRhdGEtY2tlLW1hZ2ljbGluZS1ob3RcIjoxLFwiZGF0YS1ja2UtbWFnaWNsaW5lLWRpclwiOiEhY30pO2EubGFzdENtZERpcmVjdGlvbj0hIWN9KTt0LmllfHxhLmVudGVyTW9kZT09Q0tFRElUT1IuRU5URVJfQlJ8fGEuaG90Tm9kZS5zY3JvbGxJbnRvVmlldygpO2EubGluZS5kZXRhY2goKX1yZXR1cm4gZnVuY3Rpb24oYil7Yj1iLmdldFNlbGVjdGlvbigpLmdldFN0YXJ0RWxlbWVudCgpO1xudmFyIGU7Yj1iLmdldEFzY2VuZGFudChaLDEpO2lmKCFhYShhLGIpJiZiJiYhYi5lcXVhbHMoYS5lZGl0YWJsZSkmJiFiLmNvbnRhaW5zKGEuZWRpdGFibGUpKXsoZT1QKGIpKSYmXCJmYWxzZVwiPT1lLmdldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSYmKGI9ZSk7YS5lbGVtZW50PWI7ZT13KGEsYiwhYyk7dmFyIGY7bihlKSYmZS5pcyhhLnRyaWdnZXJzKSYmZS5pcyhtYSkmJighdyhhLGUsIWMpfHwoZj13KGEsZSwhYykpJiZuKGYpJiZmLmlzKGEudHJpZ2dlcnMpKT9kKGUpOihmPU8oYSxiKSxuKGYpJiYodyhhLGYsIWMpPyhiPXcoYSxmLCFjKSkmJm4oYikmJmIuaXMoYS50cmlnZ2VycykmJmQoZik6ZChmKSkpfX19KCl9fWZ1bmN0aW9uIEEoYSxjKXtpZighY3x8Yy50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlR8fCFjLiQpcmV0dXJuITE7dmFyIGQ9YS5saW5lO3JldHVybiBkLndyYXAuZXF1YWxzKGMpfHxkLndyYXAuY29udGFpbnMoYyl9ZnVuY3Rpb24gbihhKXtyZXR1cm4gYSYmXG5hLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYS4kfWZ1bmN0aW9uIHUoYSl7aWYoIW4oYSkpcmV0dXJuITE7dmFyIGM7KGM9YmEoYSkpfHwobihhKT8oYz17bGVmdDoxLHJpZ2h0OjEsY2VudGVyOjF9LGM9ISghY1thLmdldENvbXB1dGVkU3R5bGUoXCJmbG9hdFwiKV0mJiFjW2EuZ2V0QXR0cmlidXRlKFwiYWxpZ25cIildKSk6Yz0hMSk7cmV0dXJuIGN9ZnVuY3Rpb24gYmEoYSl7cmV0dXJuISF7YWJzb2x1dGU6MSxmaXhlZDoxfVthLmdldENvbXB1dGVkU3R5bGUoXCJwb3NpdGlvblwiKV19ZnVuY3Rpb24gTChhLGMpe3JldHVybiBuKGMpP2MuaXMoYS50cmlnZ2Vycyk6bnVsbH1mdW5jdGlvbiBhYShhLGMpe2lmKCFjKXJldHVybiExO2Zvcih2YXIgZD1jLmdldFBhcmVudHMoMSksYj1kLmxlbmd0aDtiLS07KWZvcih2YXIgZT1hLnRhYnVMaXN0Lmxlbmd0aDtlLS07KWlmKGRbYl0uaGFzQXR0cmlidXRlKGEudGFidUxpc3RbZV0pKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIG5hKGEsXG5jLGQpe2M9Y1tkP1wiZ2V0TGFzdFwiOlwiZ2V0Rmlyc3RcIl0oZnVuY3Rpb24oYil7cmV0dXJuIGEuaXNSZWxldmFudChiKSYmIWIuaXMob2EpfSk7aWYoIWMpcmV0dXJuITE7cihhLGMpO3JldHVybiBkP2Muc2l6ZS50b3A+YS5tb3VzZS55OmMuc2l6ZS5ib3R0b208YS5tb3VzZS55fWZ1bmN0aW9uIGNhKGEpe3ZhciBjPWEuZWRpdGFibGUsZD1hLm1vdXNlLGI9YS52aWV3LGU9YS50cmlnZ2VyT2Zmc2V0O0goYSk7dmFyIGY9ZC55PihhLmluSW5saW5lTW9kZT9iLmVkaXRhYmxlLnRvcCtiLmVkaXRhYmxlLmhlaWdodC8yOk1hdGgubWluKGIuZWRpdGFibGUuaGVpZ2h0LGIucGFuZS5oZWlnaHQpLzIpLGM9Y1tmP1wiZ2V0TGFzdFwiOlwiZ2V0Rmlyc3RcIl0oZnVuY3Rpb24oYSl7cmV0dXJuIShFKGEpfHxGKGEpKX0pO2lmKCFjKXJldHVybiBudWxsO0EoYSxjKSYmKGM9YS5saW5lLndyYXBbZj9cImdldFByZXZpb3VzXCI6XCJnZXROZXh0XCJdKGZ1bmN0aW9uKGEpe3JldHVybiEoRShhKXx8RihhKSl9KSk7XG5pZighbihjKXx8dShjKXx8IUwoYSxjKSlyZXR1cm4gbnVsbDtyKGEsYyk7cmV0dXJuIWYmJjA8PWMuc2l6ZS50b3AmJnEoZC55LDAsYy5zaXplLnRvcCtlKT8oYT1hLmluSW5saW5lTW9kZXx8MD09PWIuc2Nyb2xsLnk/Qzp4LG5ldyB6KFtudWxsLGMsSSxNLGFdKSk6ZiYmYy5zaXplLmJvdHRvbTw9Yi5wYW5lLmhlaWdodCYmcShkLnksYy5zaXplLmJvdHRvbS1lLGIucGFuZS5oZWlnaHQpPyhhPWEuaW5JbmxpbmVNb2RlfHxxKGMuc2l6ZS5ib3R0b20sYi5wYW5lLmhlaWdodC1lLGIucGFuZS5oZWlnaHQpP0Q6eCxuZXcgeihbYyxudWxsLGRhLE0sYV0pKTpudWxsfWZ1bmN0aW9uIGVhKGEpe3ZhciBjPWEubW91c2UsZD1hLnZpZXcsYj1hLnRyaWdnZXJPZmZzZXQsZT1PKGEpO2lmKCFlKXJldHVybiBudWxsO3IoYSxlKTt2YXIgYj1NYXRoLm1pbihiLDB8ZS5zaXplLm91dGVySGVpZ2h0LzIpLGY9W10sayxoO2lmKHEoYy55LGUuc2l6ZS50b3AtMSxlLnNpemUudG9wK2IpKWg9ITE7ZWxzZSBpZihxKGMueSxcbmUuc2l6ZS5ib3R0b20tYixlLnNpemUuYm90dG9tKzEpKWg9ITA7ZWxzZSByZXR1cm4gbnVsbDtpZih1KGUpfHxuYShhLGUsaCl8fGUuZ2V0UGFyZW50KCkuaXMoZmEpKXJldHVybiBudWxsO3ZhciBnPXcoYSxlLCFoKTtpZihnKXtpZihnJiZnLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVClyZXR1cm4gbnVsbDtpZihuKGcpKXtpZih1KGcpfHwhTChhLGcpfHxnLmdldFBhcmVudCgpLmlzKGZhKSlyZXR1cm4gbnVsbDtmPVtnLGVdW2g/XCJyZXZlcnNlXCI6XCJjb25jYXRcIl0oKS5jb25jYXQoW1QsTV0pfX1lbHNlIGUuZXF1YWxzKGEuZWRpdGFibGVbaD9cImdldExhc3RcIjpcImdldEZpcnN0XCJdKGEuaXNSZWxldmFudCkpPyhIKGEpLGgmJnEoYy55LGUuc2l6ZS5ib3R0b20tYixkLnBhbmUuaGVpZ2h0KSYmcShlLnNpemUuYm90dG9tLGQucGFuZS5oZWlnaHQtYixkLnBhbmUuaGVpZ2h0KT9rPUQ6cShjLnksMCxlLnNpemUudG9wK2IpJiYoaz1DKSk6az14LGY9W251bGwsZV1baD9cInJldmVyc2VcIjpcblwiY29uY2F0XCJdKCkuY29uY2F0KFtoP2RhOkksTSxrLGUuZXF1YWxzKGEuZWRpdGFibGVbaD9cImdldExhc3RcIjpcImdldEZpcnN0XCJdKGEuaXNSZWxldmFudCkpP2g/RDpDOnhdKTtyZXR1cm4gMCBpbiBmP25ldyB6KGYpOm51bGx9ZnVuY3Rpb24gVShhLGMsZCxiKXtmb3IodmFyIGU9Yy5nZXREb2N1bWVudFBvc2l0aW9uKCksZj17fSxrPXt9LGg9e30sZz17fSxsPXkubGVuZ3RoO2wtLTspZlt5W2xdXT1wYXJzZUludChjLmdldENvbXB1dGVkU3R5bGUuY2FsbChjLFwiYm9yZGVyLVwiK3lbbF0rXCItd2lkdGhcIiksMTApfHwwLGhbeVtsXV09cGFyc2VJbnQoYy5nZXRDb21wdXRlZFN0eWxlLmNhbGwoYyxcInBhZGRpbmctXCIreVtsXSksMTApfHwwLGtbeVtsXV09cGFyc2VJbnQoYy5nZXRDb21wdXRlZFN0eWxlLmNhbGwoYyxcIm1hcmdpbi1cIit5W2xdKSwxMCl8fDA7ZCYmIWJ8fE4oYSxiKTtnLnRvcD1lLnktKGQ/MDphLnZpZXcuc2Nyb2xsLnkpO2cubGVmdD1lLngtKGQ/MDphLnZpZXcuc2Nyb2xsLngpO1xuZy5vdXRlcldpZHRoPWMuJC5vZmZzZXRXaWR0aDtnLm91dGVySGVpZ2h0PWMuJC5vZmZzZXRIZWlnaHQ7Zy5oZWlnaHQ9Zy5vdXRlckhlaWdodC0oaC50b3AraC5ib3R0b20rZi50b3ArZi5ib3R0b20pO2cud2lkdGg9Zy5vdXRlcldpZHRoLShoLmxlZnQraC5yaWdodCtmLmxlZnQrZi5yaWdodCk7Zy5ib3R0b209Zy50b3ArZy5vdXRlckhlaWdodDtnLnJpZ2h0PWcubGVmdCtnLm91dGVyV2lkdGg7YS5pbklubGluZU1vZGUmJihnLnNjcm9sbD17dG9wOmMuJC5zY3JvbGxUb3AsbGVmdDpjLiQuc2Nyb2xsTGVmdH0pO3JldHVybiB2KHtib3JkZXI6ZixwYWRkaW5nOmgsbWFyZ2luOmssaWdub3JlU2Nyb2xsOmR9LGcsITApfWZ1bmN0aW9uIHIoYSxjLGQpe2lmKCFuKGMpKXJldHVybiBjLnNpemU9bnVsbDtpZighYy5zaXplKWMuc2l6ZT17fTtlbHNlIGlmKGMuc2l6ZS5pZ25vcmVTY3JvbGw9PWQmJmMuc2l6ZS5kYXRlPm5ldyBEYXRlLWdhKXJldHVybiBudWxsO3JldHVybiB2KGMuc2l6ZSxcblUoYSxjLGQpLHtkYXRlOituZXcgRGF0ZX0sITApfWZ1bmN0aW9uIEgoYSxjKXthLnZpZXcuZWRpdGFibGU9VShhLGEuZWRpdGFibGUsYywhMCl9ZnVuY3Rpb24gTihhLGMpe2Eudmlld3x8KGEudmlldz17fSk7dmFyIGQ9YS52aWV3O2lmKCEoIWMmJmQmJmQuZGF0ZT5uZXcgRGF0ZS1nYSkpe3ZhciBiPWEud2luLGQ9Yi5nZXRTY3JvbGxQb3NpdGlvbigpLGI9Yi5nZXRWaWV3UGFuZVNpemUoKTt2KGEudmlldyx7c2Nyb2xsOnt4OmQueCx5OmQueSx3aWR0aDphLmRvYy4kLmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aC1iLndpZHRoLGhlaWdodDphLmRvYy4kLmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQtYi5oZWlnaHR9LHBhbmU6e3dpZHRoOmIud2lkdGgsaGVpZ2h0OmIuaGVpZ2h0LGJvdHRvbTpiLmhlaWdodCtkLnl9LGRhdGU6K25ldyBEYXRlfSwhMCl9fWZ1bmN0aW9uIHBhKGEsYyxkLGIpe2Zvcih2YXIgZT1iLGY9YixrPTAsaD0hMSxnPSExLGw9YS52aWV3LnBhbmUuaGVpZ2h0LFxucD1hLm1vdXNlO3AueStrPGwmJjA8cC55LWs7KXtofHwoaD1jKGUsYikpO2d8fChnPWMoZixiKSk7IWgmJjA8cC55LWsmJihlPWQoYSx7eDpwLngseTpwLnkta30pKTshZyYmcC55K2s8bCYmKGY9ZChhLHt4OnAueCx5OnAueStrfSkpO2lmKGgmJmcpYnJlYWs7ays9Mn1yZXR1cm4gbmV3IHooW2UsZixudWxsLG51bGxdKX1DS0VESVRPUi5wbHVnaW5zLmFkZChcIm1hZ2ljbGluZVwiLHtpbml0OmZ1bmN0aW9uKGEpe3ZhciBjPWEuY29uZmlnLGQ9Yy5tYWdpY2xpbmVfdHJpZ2dlck9mZnNldHx8MzAsYj17ZWRpdG9yOmEsZW50ZXJNb2RlOmMuZW50ZXJNb2RlLHRyaWdnZXJPZmZzZXQ6ZCxob2xkRGlzdGFuY2U6MHxkKihjLm1hZ2ljbGluZV9ob2xkRGlzdGFuY2V8fC41KSxib3hDb2xvcjpjLm1hZ2ljbGluZV9jb2xvcnx8XCIjZmYwMDAwXCIscnRsOlwicnRsXCI9PWMuY29udGVudHNMYW5nRGlyZWN0aW9uLHRhYnVMaXN0OltcImRhdGEtY2tlLWhpZGRlbi1zZWxcIl0uY29uY2F0KGMubWFnaWNsaW5lX3RhYnVMaXN0fHxcbltdKSx0cmlnZ2VyczpjLm1hZ2ljbGluZV9ldmVyeXdoZXJlP1o6e3RhYmxlOjEsaHI6MSxkaXY6MSx1bDoxLG9sOjEsZGw6MSxmb3JtOjEsYmxvY2txdW90ZToxfX0sZSxmLGs7Yi5pc1JlbGV2YW50PWZ1bmN0aW9uKGEpe3JldHVybiBuKGEpJiYhQShiLGEpJiYhdShhKX07YS5vbihcImNvbnRlbnREb21cIixmdW5jdGlvbigpe3ZhciBkPWEuZWRpdGFibGUoKSxnPWEuZG9jdW1lbnQsbD1hLndpbmRvdzt2KGIse2VkaXRhYmxlOmQsaW5JbmxpbmVNb2RlOmQuaXNJbmxpbmUoKSxkb2M6Zyx3aW46bCxob3ROb2RlOm51bGx9LCEwKTtiLmJvdW5kYXJ5PWIuaW5JbmxpbmVNb2RlP2IuZWRpdGFibGU6Yi5kb2MuZ2V0RG9jdW1lbnRFbGVtZW50KCk7ZC5pcyhCLiRpbmxpbmUpfHwoYi5pbklubGluZU1vZGUmJiFiYShkKSYmZC5zZXRTdHlsZXMoe3Bvc2l0aW9uOlwicmVsYXRpdmVcIix0b3A6bnVsbCxsZWZ0Om51bGx9KSxsYS5jYWxsKHRoaXMsYiksTihiKSxkLmF0dGFjaExpc3RlbmVyKGEsXCJiZWZvcmVVbmRvSW1hZ2VcIixcbmZ1bmN0aW9uKCl7Yi5saW5lLmRldGFjaCgpfSksZC5hdHRhY2hMaXN0ZW5lcihhLFwiYmVmb3JlR2V0RGF0YVwiLGZ1bmN0aW9uKCl7Yi5saW5lLndyYXAuZ2V0UGFyZW50KCkmJihiLmxpbmUuZGV0YWNoKCksYS5vbmNlKFwiZ2V0RGF0YVwiLGZ1bmN0aW9uKCl7Yi5saW5lLmF0dGFjaCgpfSxudWxsLG51bGwsMUUzKSl9LG51bGwsbnVsbCwwKSxkLmF0dGFjaExpc3RlbmVyKGIuaW5JbmxpbmVNb2RlP2c6Zy5nZXRXaW5kb3coKS5nZXRGcmFtZSgpLFwibW91c2VvdXRcIixmdW5jdGlvbihjKXtpZihcInd5c2l3eWdcIj09YS5tb2RlKWlmKGIuaW5JbmxpbmVNb2RlKXt2YXIgZD1jLmRhdGEuJC5jbGllbnRYO2M9Yy5kYXRhLiQuY2xpZW50WTtOKGIpO0goYiwhMCk7dmFyIGU9Yi52aWV3LmVkaXRhYmxlLGY9Yi52aWV3LnNjcm9sbDtkPmUubGVmdC1mLngmJmQ8ZS5yaWdodC1mLngmJmM+ZS50b3AtZi55JiZjPGUuYm90dG9tLWYueXx8KGNsZWFyVGltZW91dChrKSxrPW51bGwsYi5saW5lLmRldGFjaCgpKX1lbHNlIGNsZWFyVGltZW91dChrKSxcbms9bnVsbCxiLmxpbmUuZGV0YWNoKCl9KSxkLmF0dGFjaExpc3RlbmVyKGQsXCJrZXl1cFwiLGZ1bmN0aW9uKCl7Yi5oaWRkZW5Nb2RlPTB9KSxkLmF0dGFjaExpc3RlbmVyKGQsXCJrZXlkb3duXCIsZnVuY3Rpb24oYyl7aWYoXCJ3eXNpd3lnXCI9PWEubW9kZSlzd2l0Y2goYy5kYXRhLmdldEtleXN0cm9rZSgpKXtjYXNlIDIyMjgyNDA6Y2FzZSAxNjpiLmhpZGRlbk1vZGU9MSxiLmxpbmUuZGV0YWNoKCl9fSksZC5hdHRhY2hMaXN0ZW5lcihiLmluSW5saW5lTW9kZT9kOmcsXCJtb3VzZW1vdmVcIixmdW5jdGlvbihjKXtmPSEwO2lmKFwid3lzaXd5Z1wiPT1hLm1vZGUmJiFhLnJlYWRPbmx5JiYhayl7dmFyIGQ9e3g6Yy5kYXRhLiQuY2xpZW50WCx5OmMuZGF0YS4kLmNsaWVudFl9O2s9c2V0VGltZW91dChmdW5jdGlvbigpe2IubW91c2U9ZDtrPWIudHJpZ2dlcj1udWxsO04oYik7ZiYmIWIuaGlkZGVuTW9kZSYmYS5mb2N1c01hbmFnZXIuaGFzRm9jdXMmJiFiLmxpbmUubW91c2VOZWFyKCkmJihiLmVsZW1lbnQ9XG5oYShiLCEwKSkmJigoYi50cmlnZ2VyPWNhKGIpfHxlYShiKXx8aWEoYikpJiYhYWEoYixiLnRyaWdnZXIudXBwZXJ8fGIudHJpZ2dlci5sb3dlcik/Yi5saW5lLmF0dGFjaCgpLnBsYWNlKCk6KGIudHJpZ2dlcj1udWxsLGIubGluZS5kZXRhY2goKSksZj0hMSl9LDMwKX19KSxkLmF0dGFjaExpc3RlbmVyKGwsXCJzY3JvbGxcIixmdW5jdGlvbigpe1wid3lzaXd5Z1wiPT1hLm1vZGUmJihiLmxpbmUuZGV0YWNoKCksdC53ZWJraXQmJihiLmhpZGRlbk1vZGU9MSxjbGVhclRpbWVvdXQoZSksZT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5tb3VzZURvd258fChiLmhpZGRlbk1vZGU9MCl9LDUwKSkpfSksZC5hdHRhY2hMaXN0ZW5lcihqYT9nOmwsXCJtb3VzZWRvd25cIixmdW5jdGlvbigpe1wid3lzaXd5Z1wiPT1hLm1vZGUmJihiLmxpbmUuZGV0YWNoKCksYi5oaWRkZW5Nb2RlPTEsYi5tb3VzZURvd249MSl9KSxkLmF0dGFjaExpc3RlbmVyKGphP2c6bCxcIm1vdXNldXBcIixmdW5jdGlvbigpe2IuaGlkZGVuTW9kZT1cbjA7Yi5tb3VzZURvd249MH0pLGEuYWRkQ29tbWFuZChcImFjY2Vzc1ByZXZpb3VzU3BhY2VcIixZKGIpKSxhLmFkZENvbW1hbmQoXCJhY2Nlc3NOZXh0U3BhY2VcIixZKGIsITApKSxhLnNldEtleXN0cm9rZShbW2MubWFnaWNsaW5lX2tleXN0cm9rZVByZXZpb3VzLFwiYWNjZXNzUHJldmlvdXNTcGFjZVwiXSxbYy5tYWdpY2xpbmVfa2V5c3Ryb2tlTmV4dCxcImFjY2Vzc05leHRTcGFjZVwiXV0pLGEub24oXCJsb2FkU25hcHNob3RcIixmdW5jdGlvbigpe3ZhciBjLGQsZSxmO2ZvcihmIGlue3A6MSxicjoxLGRpdjoxfSlmb3IoYz1hLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWcoZiksZT1jLmNvdW50KCk7ZS0tOylpZigoZD1jLmdldEl0ZW0oZSkpLmRhdGEoXCJja2UtbWFnaWNsaW5lLWhvdFwiKSl7Yi5ob3ROb2RlPWQ7Yi5sYXN0Q21kRGlyZWN0aW9uPVwidHJ1ZVwiPT09ZC5kYXRhKFwiY2tlLW1hZ2ljbGluZS1kaXJcIik/ITA6ITE7cmV0dXJufX0pLHRoaXMuYmFja2Rvb3I9e2FjY2Vzc0ZvY3VzU3BhY2U6UyxcbmJveFRyaWdnZXI6eixpc0xpbmU6QSxnZXRBc2NlbmRhbnRUcmlnZ2VyOk8sZ2V0Tm9uRW1wdHlOZWlnaGJvdXI6dyxnZXRTaXplOlUsdGhhdDpiLHRyaWdnZXJFZGdlOmVhLHRyaWdnZXJFZGl0YWJsZTpjYSx0cmlnZ2VyRXhwYW5kOmlhfSl9LHRoaXMpfX0pO3ZhciB2PUNLRURJVE9SLnRvb2xzLmV4dGVuZCxSPUNLRURJVE9SLmRvbS5lbGVtZW50LEc9Ui5jcmVhdGVGcm9tSHRtbCx0PUNLRURJVE9SLmVudixqYT1DS0VESVRPUi5lbnYuaWUmJjk+Q0tFRElUT1IuZW52LnZlcnNpb24sQj1DS0VESVRPUi5kdGQsSz17fSxJPTEyOCxkYT02NCxUPTMyLE09MTYsQz00LEQ9Mix4PTEsSj1cIsKgXCIsZmE9Qi4kbGlzdEl0ZW0sb2E9Qi4kdGFibGVDb250ZW50LG1hPXYoe30sQi4kbm9uRWRpdGFibGUsQi4kZW1wdHkpLFo9Qi4kYmxvY2ssZ2E9MTAwLFE9XCJ3aWR0aDowcHg7aGVpZ2h0OjBweDtwYWRkaW5nOjBweDttYXJnaW46MHB4O2Rpc3BsYXk6YmxvY2s7ei1pbmRleDo5OTk5O2NvbG9yOiNmZmY7cG9zaXRpb246YWJzb2x1dGU7Zm9udC1zaXplOiAwcHg7bGluZS1oZWlnaHQ6MHB4O1wiLFxuWD1RK1wiYm9yZGVyLWNvbG9yOnRyYW5zcGFyZW50O2Rpc3BsYXk6YmxvY2s7Ym9yZGVyLXN0eWxlOnNvbGlkO1wiLFc9XCJcXHgzY3NwYW5cXHgzZVwiK0orXCJcXHgzYy9zcGFuXFx4M2VcIjtLW0NLRURJVE9SLkVOVEVSX0JSXT1cImJyXCI7S1tDS0VESVRPUi5FTlRFUl9QXT1cInBcIjtLW0NLRURJVE9SLkVOVEVSX0RJVl09XCJkaXZcIjt6LnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEsYyxkKXt0aGlzLnByb3BlcnRpZXM9YStjKyhkfHx4KTtyZXR1cm4gdGhpc30saXM6ZnVuY3Rpb24oYSl7cmV0dXJuKHRoaXMucHJvcGVydGllcyZhKT09YX19O3ZhciBoYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxkKXt2YXIgYj1hLiQuZWxlbWVudEZyb21Qb2ludChkLngsZC55KTtyZXR1cm4gYiYmYi5ub2RlVHlwZT9uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYik6bnVsbH1yZXR1cm4gZnVuY3Rpb24oYyxkLGIpe2lmKCFjLm1vdXNlKXJldHVybiBudWxsO3ZhciBlPWMuZG9jLGY9Yy5saW5lLndyYXA7Yj1ifHxjLm1vdXNlO1xudmFyIGs9YShlLGIpO2QmJkEoYyxrKSYmKGYuaGlkZSgpLGs9YShlLGIpLGYuc2hvdygpKTtyZXR1cm4ha3x8ay50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlR8fCFrLiR8fHQuaWUmJjk+dC52ZXJzaW9uJiYhYy5ib3VuZGFyeS5lcXVhbHMoaykmJiFjLmJvdW5kYXJ5LmNvbnRhaW5zKGspP251bGw6a319KCksRT1DS0VESVRPUi5kb20ud2Fsa2VyLndoaXRlc3BhY2VzKCksRj1DS0VESVRPUi5kb20ud2Fsa2VyLm5vZGVUeXBlKENLRURJVE9SLk5PREVfQ09NTUVOVCksaWE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3ZhciBiPWEuZWxlbWVudCxlLGYsaztpZighbihiKXx8Yi5jb250YWlucyhhLmVkaXRhYmxlKXx8Yi5pc1JlYWRPbmx5KCkpcmV0dXJuIG51bGw7az1wYShhLGZ1bmN0aW9uKGEsYil7cmV0dXJuIWIuZXF1YWxzKGEpfSxmdW5jdGlvbihhLGIpe3JldHVybiBoYShhLCEwLGIpfSxiKTtlPWsudXBwZXI7Zj1rLmxvd2VyO2lmKFYoYSxlLGYpKXJldHVybiBrLnNldChULFxuOCk7aWYoZSYmYi5jb250YWlucyhlKSlmb3IoOyFlLmdldFBhcmVudCgpLmVxdWFscyhiKTspZT1lLmdldFBhcmVudCgpO2Vsc2UgZT1iLmdldEZpcnN0KGZ1bmN0aW9uKGIpe3JldHVybiBjKGEsYil9KTtpZihmJiZiLmNvbnRhaW5zKGYpKWZvcig7IWYuZ2V0UGFyZW50KCkuZXF1YWxzKGIpOylmPWYuZ2V0UGFyZW50KCk7ZWxzZSBmPWIuZ2V0TGFzdChmdW5jdGlvbihiKXtyZXR1cm4gYyhhLGIpfSk7aWYoIWV8fCFmKXJldHVybiBudWxsO3IoYSxlKTtyKGEsZik7aWYoIXEoYS5tb3VzZS55LGUuc2l6ZS50b3AsZi5zaXplLmJvdHRvbSkpcmV0dXJuIG51bGw7Zm9yKHZhciBiPU51bWJlci5NQVhfVkFMVUUsaCxnLGwscDtmJiYhZi5lcXVhbHMoZSkmJihnPWUuZ2V0TmV4dChhLmlzUmVsZXZhbnQpKTspaD1NYXRoLmFicyhrYShhLGUsZyktYS5tb3VzZS55KSxoPGImJihiPWgsbD1lLHA9ZyksZT1nLHIoYSxlKTtpZighbHx8IXB8fCFxKGEubW91c2UueSxsLnNpemUudG9wLHAuc2l6ZS5ib3R0b20pKXJldHVybiBudWxsO1xuay51cHBlcj1sO2subG93ZXI9cDtyZXR1cm4gay5zZXQoVCw4KX1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIShiJiZiLnR5cGU9PUNLRURJVE9SLk5PREVfVEVYVHx8RihiKXx8dShiKXx8QShhLGIpfHxiLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYi4kJiZiLmlzKFwiYnJcIikpfXJldHVybiBmdW5jdGlvbihjKXt2YXIgYj1hKGMpLGU7aWYoZT1iKXtlPWIudXBwZXI7dmFyIGY9Yi5sb3dlcjtlPSFlfHwhZnx8dShmKXx8dShlKXx8Zi5lcXVhbHMoZSl8fGUuZXF1YWxzKGYpfHxmLmNvbnRhaW5zKGUpfHxlLmNvbnRhaW5zKGYpPyExOkwoYyxlKSYmTChjLGYpJiZWKGMsZSxmKT8hMDohMX1yZXR1cm4gZT9iOm51bGx9fSgpLHk9W1widG9wXCIsXCJsZWZ0XCIsXCJyaWdodFwiLFwiYm90dG9tXCJdfSkoKTtDS0VESVRPUi5jb25maWcubWFnaWNsaW5lX2tleXN0cm9rZVByZXZpb3VzPUNLRURJVE9SLkNUUkwrQ0tFRElUT1IuU0hJRlQrNTE7XG5DS0VESVRPUi5jb25maWcubWFnaWNsaW5lX2tleXN0cm9rZU5leHQ9Q0tFRElUT1IuQ1RSTCtDS0VESVRPUi5TSElGVCs1MjsoZnVuY3Rpb24oKXtmdW5jdGlvbiBuKGEpe2lmKCFhfHxhLnR5cGUhPUNLRURJVE9SLk5PREVfRUxFTUVOVHx8XCJmb3JtXCIhPWEuZ2V0TmFtZSgpKXJldHVybltdO2Zvcih2YXIgZT1bXSxmPVtcInN0eWxlXCIsXCJjbGFzc05hbWVcIl0sYj0wO2I8Zi5sZW5ndGg7YisrKXt2YXIgYz1hLiQuZWxlbWVudHMubmFtZWRJdGVtKGZbYl0pO2MmJihjPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChjKSxlLnB1c2goW2MsYy5uZXh0U2libGluZ10pLGMucmVtb3ZlKCkpfXJldHVybiBlfWZ1bmN0aW9uIHQoYSxlKXtpZihhJiZhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmXCJmb3JtXCI9PWEuZ2V0TmFtZSgpJiYwPGUubGVuZ3RoKWZvcih2YXIgZj1lLmxlbmd0aC0xOzA8PWY7Zi0tKXt2YXIgYj1lW2ZdWzBdLGM9ZVtmXVsxXTtjP2IuaW5zZXJ0QmVmb3JlKGMpOmIuYXBwZW5kVG8oYSl9fWZ1bmN0aW9uIHIoYSxlKXt2YXIgZj1uKGEpLGI9e30sYz1hLiQ7ZXx8KGJbXCJjbGFzc1wiXT1jLmNsYXNzTmFtZXx8XG5cIlwiLGMuY2xhc3NOYW1lPVwiXCIpO2IuaW5saW5lPWMuc3R5bGUuY3NzVGV4dHx8XCJcIjtlfHwoYy5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246IHN0YXRpYzsgb3ZlcmZsb3c6IHZpc2libGVcIik7dChmKTtyZXR1cm4gYn1mdW5jdGlvbiB1KGEsZSl7dmFyIGY9bihhKSxiPWEuJDtcImNsYXNzXCJpbiBlJiYoYi5jbGFzc05hbWU9ZVtcImNsYXNzXCJdKTtcImlubGluZVwiaW4gZSYmKGIuc3R5bGUuY3NzVGV4dD1lLmlubGluZSk7dChmKX1mdW5jdGlvbiB2KGEpe2lmKCFhLmVkaXRhYmxlKCkuaXNJbmxpbmUoKSl7dmFyIGU9Q0tFRElUT1IuaW5zdGFuY2VzLGY7Zm9yKGYgaW4gZSl7dmFyIGI9ZVtmXTtcInd5c2l3eWdcIiE9Yi5tb2RlfHxiLnJlYWRPbmx5fHwoYj1iLmRvY3VtZW50LmdldEJvZHkoKSxiLnNldEF0dHJpYnV0ZShcImNvbnRlbnRFZGl0YWJsZVwiLCExKSxiLnNldEF0dHJpYnV0ZShcImNvbnRlbnRFZGl0YWJsZVwiLCEwKSl9YS5lZGl0YWJsZSgpLmhhc0ZvY3VzJiYoYS50b29sYm94LmZvY3VzKCksXG5hLmZvY3VzKCkpfX1DS0VESVRPUi5wbHVnaW5zLmFkZChcIm1heGltaXplXCIse2luaXQ6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZSgpe3ZhciBiPWMuZ2V0Vmlld1BhbmVTaXplKCk7YS5yZXNpemUoYi53aWR0aCxiLmhlaWdodCxudWxsLCEwKX1pZihhLmVsZW1lbnRNb2RlIT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FKXt2YXIgZj1hLmxhbmcsYj1DS0VESVRPUi5kb2N1bWVudCxjPWIuZ2V0V2luZG93KCksbCxtLHAsbj1DS0VESVRPUi5UUklTVEFURV9PRkY7YS5hZGRDb21tYW5kKFwibWF4aW1pemVcIix7bW9kZXM6e3d5c2l3eWc6IUNLRURJVE9SLmVudi5pT1Msc291cmNlOiFDS0VESVRPUi5lbnYuaU9TfSxyZWFkT25seToxLGVkaXRvckZvY3VzOiExLGV4ZWM6ZnVuY3Rpb24oKXt2YXIgaD1hLmNvbnRhaW5lci5nZXRGaXJzdChmdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuaGFzQ2xhc3MoXCJja2VfaW5uZXJcIil9KSxnPWEudWkuc3BhY2UoXCJjb250ZW50c1wiKTtcbmlmKFwid3lzaXd5Z1wiPT1hLm1vZGUpe3ZhciBkPWEuZ2V0U2VsZWN0aW9uKCk7bD1kJiZkLmdldFJhbmdlcygpO209Yy5nZXRTY3JvbGxQb3NpdGlvbigpfWVsc2V7dmFyIGs9YS5lZGl0YWJsZSgpLiQ7bD0hQ0tFRElUT1IuZW52LmllJiZbay5zZWxlY3Rpb25TdGFydCxrLnNlbGVjdGlvbkVuZF07bT1bay5zY3JvbGxMZWZ0LGsuc2Nyb2xsVG9wXX1pZih0aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PRkYpe2Mub24oXCJyZXNpemVcIixlKTtwPWMuZ2V0U2Nyb2xsUG9zaXRpb24oKTtmb3IoZD1hLmNvbnRhaW5lcjtkPWQuZ2V0UGFyZW50KCk7KWQuc2V0Q3VzdG9tRGF0YShcIm1heGltaXplX3NhdmVkX3N0eWxlc1wiLHIoZCkpLGQuc2V0U3R5bGUoXCJ6LWluZGV4XCIsYS5jb25maWcuYmFzZUZsb2F0WkluZGV4LTUpO2cuc2V0Q3VzdG9tRGF0YShcIm1heGltaXplX3NhdmVkX3N0eWxlc1wiLHIoZywhMCkpO2guc2V0Q3VzdG9tRGF0YShcIm1heGltaXplX3NhdmVkX3N0eWxlc1wiLHIoaCwhMCkpO1xuZz17b3ZlcmZsb3c6Q0tFRElUT1IuZW52LndlYmtpdD9cIlwiOlwiaGlkZGVuXCIsd2lkdGg6MCxoZWlnaHQ6MH07Yi5nZXREb2N1bWVudEVsZW1lbnQoKS5zZXRTdHlsZXMoZyk7IUNLRURJVE9SLmVudi5nZWNrbyYmYi5nZXREb2N1bWVudEVsZW1lbnQoKS5zZXRTdHlsZShcInBvc2l0aW9uXCIsXCJmaXhlZFwiKTtDS0VESVRPUi5lbnYuZ2Vja28mJkNLRURJVE9SLmVudi5xdWlya3N8fGIuZ2V0Qm9keSgpLnNldFN0eWxlcyhnKTtDS0VESVRPUi5lbnYuaWU/c2V0VGltZW91dChmdW5jdGlvbigpe2MuJC5zY3JvbGxUbygwLDApfSwwKTpjLiQuc2Nyb2xsVG8oMCwwKTtoLnNldFN0eWxlKFwicG9zaXRpb25cIixDS0VESVRPUi5lbnYuZ2Vja28mJkNLRURJVE9SLmVudi5xdWlya3M/XCJmaXhlZFwiOlwiYWJzb2x1dGVcIik7aC4kLm9mZnNldExlZnQ7aC5zZXRTdHlsZXMoe1wiei1pbmRleFwiOmEuY29uZmlnLmJhc2VGbG9hdFpJbmRleC01LGxlZnQ6XCIwcHhcIix0b3A6XCIwcHhcIn0pO2guYWRkQ2xhc3MoXCJja2VfbWF4aW1pemVkXCIpO1xuZSgpO2c9aC5nZXREb2N1bWVudFBvc2l0aW9uKCk7aC5zZXRTdHlsZXMoe2xlZnQ6LTEqZy54K1wicHhcIix0b3A6LTEqZy55K1wicHhcIn0pO0NLRURJVE9SLmVudi5nZWNrbyYmdihhKX1lbHNlIGlmKHRoaXMuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09OKXtjLnJlbW92ZUxpc3RlbmVyKFwicmVzaXplXCIsZSk7Zm9yKHZhciBkPVtnLGhdLHE9MDtxPGQubGVuZ3RoO3ErKyl1KGRbcV0sZFtxXS5nZXRDdXN0b21EYXRhKFwibWF4aW1pemVfc2F2ZWRfc3R5bGVzXCIpKSxkW3FdLnJlbW92ZUN1c3RvbURhdGEoXCJtYXhpbWl6ZV9zYXZlZF9zdHlsZXNcIik7Zm9yKGQ9YS5jb250YWluZXI7ZD1kLmdldFBhcmVudCgpOyl1KGQsZC5nZXRDdXN0b21EYXRhKFwibWF4aW1pemVfc2F2ZWRfc3R5bGVzXCIpKSxkLnJlbW92ZUN1c3RvbURhdGEoXCJtYXhpbWl6ZV9zYXZlZF9zdHlsZXNcIik7Q0tFRElUT1IuZW52LmllP3NldFRpbWVvdXQoZnVuY3Rpb24oKXtjLiQuc2Nyb2xsVG8ocC54LHAueSl9LDApOmMuJC5zY3JvbGxUbyhwLngsXG5wLnkpO2gucmVtb3ZlQ2xhc3MoXCJja2VfbWF4aW1pemVkXCIpO0NLRURJVE9SLmVudi53ZWJraXQmJihoLnNldFN0eWxlKFwiZGlzcGxheVwiLFwiaW5saW5lXCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtoLnNldFN0eWxlKFwiZGlzcGxheVwiLFwiYmxvY2tcIil9LDApKTthLmZpcmUoXCJyZXNpemVcIix7b3V0ZXJIZWlnaHQ6YS5jb250YWluZXIuJC5vZmZzZXRIZWlnaHQsY29udGVudHNIZWlnaHQ6Zy4kLm9mZnNldEhlaWdodCxvdXRlcldpZHRoOmEuY29udGFpbmVyLiQub2Zmc2V0V2lkdGh9KX10aGlzLnRvZ2dsZVN0YXRlKCk7aWYoZD10aGlzLnVpSXRlbXNbMF0pZz10aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PRkY/Zi5tYXhpbWl6ZS5tYXhpbWl6ZTpmLm1heGltaXplLm1pbmltaXplLGQ9Q0tFRElUT1IuZG9jdW1lbnQuZ2V0QnlJZChkLl8uaWQpLGQuZ2V0Q2hpbGQoMSkuc2V0SHRtbChnKSxkLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsZyksZC5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsJ2phdmFzY3JpcHQ6dm9pZChcIicrXG5nKydcIik7Jyk7XCJ3eXNpd3lnXCI9PWEubW9kZT9sPyhDS0VESVRPUi5lbnYuZ2Vja28mJnYoYSksYS5nZXRTZWxlY3Rpb24oKS5zZWxlY3RSYW5nZXMobCksKGs9YS5nZXRTZWxlY3Rpb24oKS5nZXRTdGFydEVsZW1lbnQoKSkmJmsuc2Nyb2xsSW50b1ZpZXcoITApKTpjLiQuc2Nyb2xsVG8obS54LG0ueSk6KGwmJihrLnNlbGVjdGlvblN0YXJ0PWxbMF0say5zZWxlY3Rpb25FbmQ9bFsxXSksay5zY3JvbGxMZWZ0PW1bMF0say5zY3JvbGxUb3A9bVsxXSk7bD1tPW51bGw7bj10aGlzLnN0YXRlO2EuZmlyZShcIm1heGltaXplXCIsdGhpcy5zdGF0ZSl9LGNhblVuZG86ITF9KTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJNYXhpbWl6ZVwiLHtsYWJlbDpmLm1heGltaXplLm1heGltaXplLGNvbW1hbmQ6XCJtYXhpbWl6ZVwiLHRvb2xiYXI6XCJ0b29scywxMFwifSk7YS5vbihcIm1vZGVcIixmdW5jdGlvbigpe3ZhciBiPWEuZ2V0Q29tbWFuZChcIm1heGltaXplXCIpO2Iuc2V0U3RhdGUoYi5zdGF0ZT09XG5DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRD9DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRDpuKX0sbnVsbCxudWxsLDEwMCl9fX0pfSkoKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcIm5ld3BhZ2VcIix7aW5pdDpmdW5jdGlvbihhKXthLmFkZENvbW1hbmQoXCJuZXdwYWdlXCIse21vZGVzOnt3eXNpd3lnOjEsc291cmNlOjF9LGV4ZWM6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztiLnNldERhdGEoYi5jb25maWcubmV3cGFnZV9odG1sfHxcIlwiLGZ1bmN0aW9uKCl7Yi5mb2N1cygpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmZpcmUoXCJhZnRlckNvbW1hbmRFeGVjXCIse25hbWU6XCJuZXdwYWdlXCIsY29tbWFuZDphfSk7Yi5zZWxlY3Rpb25DaGFuZ2UoKX0sMjAwKX0pfSxhc3luYzohMH0pO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIk5ld1BhZ2VcIix7bGFiZWw6YS5sYW5nLm5ld3BhZ2UudG9vbGJhcixjb21tYW5kOlwibmV3cGFnZVwiLHRvb2xiYXI6XCJkb2N1bWVudCwyMFwifSl9fSk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShhKXtyZXR1cm57XCJhcmlhLWxhYmVsXCI6YSxcImNsYXNzXCI6XCJja2VfcGFnZWJyZWFrXCIsY29udGVudGVkaXRhYmxlOlwiZmFsc2VcIixcImRhdGEtY2tlLWRpc3BsYXktbmFtZVwiOlwicGFnZWJyZWFrXCIsXCJkYXRhLWNrZS1wYWdlYnJlYWtcIjoxLHN0eWxlOlwicGFnZS1icmVhay1hZnRlcjogYWx3YXlzXCIsdGl0bGU6YX19Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJwYWdlYnJlYWtcIix7cmVxdWlyZXM6XCJmYWtlb2JqZWN0c1wiLG9uTG9hZDpmdW5jdGlvbigpe3ZhciBhPShcImJhY2tncm91bmQ6dXJsKFwiK0NLRURJVE9SLmdldFVybCh0aGlzLnBhdGgrXCJpbWFnZXMvcGFnZWJyZWFrLmdpZlwiKStcIikgbm8tcmVwZWF0IGNlbnRlciBjZW50ZXI7Y2xlYXI6Ym90aDt3aWR0aDoxMDAlO2JvcmRlci10b3A6Izk5OSAxcHggZG90dGVkO2JvcmRlci1ib3R0b206Izk5OSAxcHggZG90dGVkO3BhZGRpbmc6MDtoZWlnaHQ6N3B4O2N1cnNvcjpkZWZhdWx0O1wiKS5yZXBsYWNlKC87L2csXG5cIiAhaW1wb3J0YW50O1wiKTtDS0VESVRPUi5hZGRDc3MoXCJkaXYuY2tlX3BhZ2VicmVha3tcIithK1wifVwiKX0saW5pdDpmdW5jdGlvbihhKXthLmJsb2NrbGVzc3x8KGEuYWRkQ29tbWFuZChcInBhZ2VicmVha1wiLENLRURJVE9SLnBsdWdpbnMucGFnZWJyZWFrQ21kKSxhLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJQYWdlQnJlYWtcIix7bGFiZWw6YS5sYW5nLnBhZ2VicmVhay50b29sYmFyLGNvbW1hbmQ6XCJwYWdlYnJlYWtcIix0b29sYmFyOlwiaW5zZXJ0LDcwXCJ9KSxDS0VESVRPUi5lbnYud2Via2l0JiZhLm9uKFwiY29udGVudERvbVwiLGZ1bmN0aW9uKCl7YS5kb2N1bWVudC5vbihcImNsaWNrXCIsZnVuY3Rpb24oYil7Yj1iLmRhdGEuZ2V0VGFyZ2V0KCk7Yi5pcyhcImRpdlwiKSYmYi5oYXNDbGFzcyhcImNrZV9wYWdlYnJlYWtcIikmJmEuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0RWxlbWVudChiKX0pfSkpfSxhZnRlckluaXQ6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihmKXtDS0VESVRPUi50b29scy5leHRlbmQoZi5hdHRyaWJ1dGVzLFxuZShhLmxhbmcucGFnZWJyZWFrLmFsdCksITApO2YuY2hpbGRyZW4ubGVuZ3RoPTB9dmFyIGM9YS5kYXRhUHJvY2Vzc29yLGc9YyYmYy5kYXRhRmlsdGVyLGM9YyYmYy5odG1sRmlsdGVyLGg9L3BhZ2UtYnJlYWstYWZ0ZXJcXHMqOlxccyphbHdheXMvaSxrPS9kaXNwbGF5XFxzKjpcXHMqbm9uZS9pO2MmJmMuYWRkUnVsZXMoe2F0dHJpYnV0ZXM6e1wiY2xhc3NcIjpmdW5jdGlvbihhLGIpe3ZhciBjPWEucmVwbGFjZShcImNrZV9wYWdlYnJlYWtcIixcIlwiKTtpZihjIT1hKXt2YXIgZD1DS0VESVRPUi5odG1sUGFyc2VyLmZyYWdtZW50LmZyb21IdG1sKCdcXHgzY3NwYW4gc3R5bGVcXHgzZFwiZGlzcGxheTogbm9uZTtcIlxceDNlXFx4MjZuYnNwO1xceDNjL3NwYW5cXHgzZScpLmNoaWxkcmVuWzBdO2IuY2hpbGRyZW4ubGVuZ3RoPTA7Yi5hZGQoZCk7ZD1iLmF0dHJpYnV0ZXM7ZGVsZXRlIGRbXCJhcmlhLWxhYmVsXCJdO2RlbGV0ZSBkLmNvbnRlbnRlZGl0YWJsZTtkZWxldGUgZC50aXRsZX1yZXR1cm4gY319fSx7YXBwbHlUb0FsbDohMCxcbnByaW9yaXR5OjV9KTtnJiZnLmFkZFJ1bGVzKHtlbGVtZW50czp7ZGl2OmZ1bmN0aW9uKGEpe2lmKGEuYXR0cmlidXRlc1tcImRhdGEtY2tlLXBhZ2VicmVha1wiXSliKGEpO2Vsc2UgaWYoaC50ZXN0KGEuYXR0cmlidXRlcy5zdHlsZSkpe3ZhciBjPWEuY2hpbGRyZW5bMF07YyYmXCJzcGFuXCI9PWMubmFtZSYmay50ZXN0KGMuYXR0cmlidXRlcy5zdHlsZSkmJmIoYSl9fX19KX19KTtDS0VESVRPUi5wbHVnaW5zLnBhZ2VicmVha0NtZD17ZXhlYzpmdW5jdGlvbihhKXt2YXIgYj1hLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7YXR0cmlidXRlczplKGEubGFuZy5wYWdlYnJlYWsuYWx0KX0pO2EuaW5zZXJ0RWxlbWVudChiKX0sY29udGV4dDpcImRpdlwiLGFsbG93ZWRDb250ZW50OntkaXY6e3N0eWxlczpcIiFwYWdlLWJyZWFrLWFmdGVyXCJ9LHNwYW46e21hdGNoOmZ1bmN0aW9uKGEpe3JldHVybihhPWEucGFyZW50KSYmXCJkaXZcIj09YS5uYW1lJiZhLnN0eWxlcyYmYS5zdHlsZXNbXCJwYWdlLWJyZWFrLWFmdGVyXCJdfSxcbnN0eWxlczpcImRpc3BsYXlcIn19LHJlcXVpcmVkQ29udGVudDpcImRpdntwYWdlLWJyZWFrLWFmdGVyfVwifX0pKCk7KGZ1bmN0aW9uKCl7dmFyIGM9e2NhblVuZG86ITEsYXN5bmM6ITAsZXhlYzpmdW5jdGlvbihhKXthLmdldENsaXBib2FyZERhdGEoe3RpdGxlOmEubGFuZy5wYXN0ZXRleHQudGl0bGV9LGZ1bmN0aW9uKGIpe2ImJmEuZmlyZShcInBhc3RlXCIse3R5cGU6XCJ0ZXh0XCIsZGF0YVZhbHVlOmIuZGF0YVZhbHVlLG1ldGhvZDpcInBhc3RlXCIsZGF0YVRyYW5zZmVyOkNLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkLmluaXRQYXN0ZURhdGFUcmFuc2ZlcigpfSk7YS5maXJlKFwiYWZ0ZXJDb21tYW5kRXhlY1wiLHtuYW1lOlwicGFzdGV0ZXh0XCIsY29tbWFuZDpjLHJldHVyblZhbHVlOiEhYn0pfSl9fTtDS0VESVRPUi5wbHVnaW5zLmFkZChcInBhc3RldGV4dFwiLHtyZXF1aXJlczpcImNsaXBib2FyZFwiLGluaXQ6ZnVuY3Rpb24oYSl7YS5hZGRDb21tYW5kKFwicGFzdGV0ZXh0XCIsYyk7YS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiUGFzdGVUZXh0XCIse2xhYmVsOmEubGFuZy5wYXN0ZXRleHQuYnV0dG9uLFxuY29tbWFuZDpcInBhc3RldGV4dFwiLHRvb2xiYXI6XCJjbGlwYm9hcmQsNDBcIn0pO2lmKGEuY29uZmlnLmZvcmNlUGFzdGVBc1BsYWluVGV4dClhLm9uKFwiYmVmb3JlUGFzdGVcIixmdW5jdGlvbihhKXtcImh0bWxcIiE9YS5kYXRhLnR5cGUmJihhLmRhdGEudHlwZT1cInRleHRcIil9KTthLm9uKFwicGFzdGVTdGF0ZVwiLGZ1bmN0aW9uKGIpe2EuZ2V0Q29tbWFuZChcInBhc3RldGV4dFwiKS5zZXRTdGF0ZShiLmRhdGEpfSl9fSl9KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIGgoYSxkLGYpe3ZhciBiPUNLRURJVE9SLmNsZWFuV29yZDtiP2YoKTooYT1DS0VESVRPUi5nZXRVcmwoYS5jb25maWcucGFzdGVGcm9tV29yZENsZWFudXBGaWxlfHxkK1wiZmlsdGVyL2RlZmF1bHQuanNcIiksQ0tFRElUT1Iuc2NyaXB0TG9hZGVyLmxvYWQoYSxmLG51bGwsITApKTtyZXR1cm4hYn1mdW5jdGlvbiBrKGEpe2EuZGF0YS50eXBlPVwiaHRtbFwifUNLRURJVE9SLnBsdWdpbnMuYWRkKFwicGFzdGVmcm9td29yZFwiLHtyZXF1aXJlczpcImNsaXBib2FyZFwiLGluaXQ6ZnVuY3Rpb24oYSl7dmFyIGQ9MCxmPXRoaXMucGF0aDthLmFkZENvbW1hbmQoXCJwYXN0ZWZyb213b3JkXCIse2NhblVuZG86ITEsYXN5bmM6ITAsZXhlYzpmdW5jdGlvbihhKXt2YXIgZT10aGlzO2Q9MTthLm9uY2UoXCJiZWZvcmVQYXN0ZVwiLGspO2EuZ2V0Q2xpcGJvYXJkRGF0YSh7dGl0bGU6YS5sYW5nLnBhc3RlZnJvbXdvcmQudGl0bGV9LGZ1bmN0aW9uKGMpe2MmJmEuZmlyZShcInBhc3RlXCIsXG57dHlwZTpcImh0bWxcIixkYXRhVmFsdWU6Yy5kYXRhVmFsdWUsbWV0aG9kOlwicGFzdGVcIixkYXRhVHJhbnNmZXI6Q0tFRElUT1IucGx1Z2lucy5jbGlwYm9hcmQuaW5pdFBhc3RlRGF0YVRyYW5zZmVyKCl9KTthLmZpcmUoXCJhZnRlckNvbW1hbmRFeGVjXCIse25hbWU6XCJwYXN0ZWZyb213b3JkXCIsY29tbWFuZDplLHJldHVyblZhbHVlOiEhY30pfSl9fSk7YS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiUGFzdGVGcm9tV29yZFwiLHtsYWJlbDphLmxhbmcucGFzdGVmcm9td29yZC50b29sYmFyLGNvbW1hbmQ6XCJwYXN0ZWZyb213b3JkXCIsdG9vbGJhcjpcImNsaXBib2FyZCw1MFwifSk7YS5vbihcInBhc3RlU3RhdGVcIixmdW5jdGlvbihiKXthLmdldENvbW1hbmQoXCJwYXN0ZWZyb213b3JkXCIpLnNldFN0YXRlKGIuZGF0YSl9KTthLm9uKFwicGFzdGVcIixmdW5jdGlvbihiKXt2YXIgZT1iLmRhdGEsYz1lLmRhdGFWYWx1ZTtpZihjJiYoZHx8LyhjbGFzcz1cXFwiP01zb3xzdHlsZT1cXFwiW15cXFwiXSpcXGJtc29cXC18dzpXb3JkRG9jdW1lbnQpLy50ZXN0KGMpKSl7ZS5kb250RmlsdGVyPVxuITA7dmFyIGc9aChhLGYsZnVuY3Rpb24oKXtpZihnKWEuZmlyZShcInBhc3RlXCIsZSk7ZWxzZSBpZighYS5jb25maWcucGFzdGVGcm9tV29yZFByb21wdENsZWFudXB8fGR8fGNvbmZpcm0oYS5sYW5nLnBhc3RlZnJvbXdvcmQuY29uZmlybUNsZWFudXApKWUuZGF0YVZhbHVlPUNLRURJVE9SLmNsZWFuV29yZChjLGEpO2Q9MH0pO2cmJmIuY2FuY2VsKCl9fSxudWxsLG51bGwsMyl9fSl9KSgpOyhmdW5jdGlvbigpe3ZhciBoLGs9e21vZGVzOnt3eXNpd3lnOjEsc291cmNlOjF9LGNhblVuZG86ITEscmVhZE9ubHk6MSxleGVjOmZ1bmN0aW9uKGEpe3ZhciBnLGI9YS5jb25maWcsZj1iLmJhc2VIcmVmPydcXHgzY2Jhc2UgaHJlZlxceDNkXCInK2IuYmFzZUhyZWYrJ1wiL1xceDNlJzpcIlwiO2lmKGIuZnVsbFBhZ2UpZz1hLmdldERhdGEoKS5yZXBsYWNlKC88aGVhZD4vLFwiJFxceDI2XCIrZikucmVwbGFjZSgvW14+XSooPz08XFwvdGl0bGU+KS8sXCIkXFx4MjYgXFx4MjZtZGFzaDsgXCIrYS5sYW5nLnByZXZpZXcucHJldmlldyk7ZWxzZXt2YXIgYj1cIlxceDNjYm9keSBcIixkPWEuZG9jdW1lbnQmJmEuZG9jdW1lbnQuZ2V0Qm9keSgpO2QmJihkLmdldEF0dHJpYnV0ZShcImlkXCIpJiYoYis9J2lkXFx4M2RcIicrZC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSsnXCIgJyksZC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSYmKGIrPSdjbGFzc1xceDNkXCInK2QuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikrJ1wiICcpKTtiKz1cIlxceDNlXCI7Zz1hLmNvbmZpZy5kb2NUeXBlK1xuJ1xceDNjaHRtbCBkaXJcXHgzZFwiJythLmNvbmZpZy5jb250ZW50c0xhbmdEaXJlY3Rpb24rJ1wiXFx4M2VcXHgzY2hlYWRcXHgzZScrZitcIlxceDNjdGl0bGVcXHgzZVwiK2EubGFuZy5wcmV2aWV3LnByZXZpZXcrXCJcXHgzYy90aXRsZVxceDNlXCIrQ0tFRElUT1IudG9vbHMuYnVpbGRTdHlsZUh0bWwoYS5jb25maWcuY29udGVudHNDc3MpK1wiXFx4M2MvaGVhZFxceDNlXCIrYithLmdldERhdGEoKStcIlxceDNjL2JvZHlcXHgzZVxceDNjL2h0bWxcXHgzZVwifWY9NjQwO2I9NDIwO2Q9ODA7dHJ5e3ZhciBjPXdpbmRvdy5zY3JlZW4sZj1NYXRoLnJvdW5kKC44KmMud2lkdGgpLGI9TWF0aC5yb3VuZCguNypjLmhlaWdodCksZD1NYXRoLnJvdW5kKC4xKmMud2lkdGgpfWNhdGNoKGspe31pZighMT09PWEuZmlyZShcImNvbnRlbnRQcmV2aWV3XCIsYT17ZGF0YVZhbHVlOmd9KSlyZXR1cm4hMTt2YXIgYz1cIlwiLGU7Q0tFRElUT1IuZW52LmllJiYod2luZG93Ll9ja2VfaHRtbFRvTG9hZD1hLmRhdGFWYWx1ZSxlPVwiamF2YXNjcmlwdDp2b2lkKCAoZnVuY3Rpb24oKXtkb2N1bWVudC5vcGVuKCk7XCIrXG4oXCIoXCIrQ0tFRElUT1IudG9vbHMuZml4RG9tYWluK1wiKSgpO1wiKS5yZXBsYWNlKC9cXC9cXC8uKj9cXG4vZyxcIlwiKS5yZXBsYWNlKC9wYXJlbnRcXC4vZyxcIndpbmRvdy5vcGVuZXIuXCIpK1wiZG9jdW1lbnQud3JpdGUoIHdpbmRvdy5vcGVuZXIuX2NrZV9odG1sVG9Mb2FkICk7ZG9jdW1lbnQuY2xvc2UoKTt3aW5kb3cub3BlbmVyLl9ja2VfaHRtbFRvTG9hZCBcXHgzZCBudWxsO30pKCkgKVwiLGM9XCJcIik7Q0tFRElUT1IuZW52LmdlY2tvJiYod2luZG93Ll9ja2VfaHRtbFRvTG9hZD1hLmRhdGFWYWx1ZSxjPUNLRURJVE9SLmdldFVybChoK1wicHJldmlldy5odG1sXCIpKTtjPXdpbmRvdy5vcGVuKGMsbnVsbCxcInRvb2xiYXJcXHgzZHllcyxsb2NhdGlvblxceDNkbm8sc3RhdHVzXFx4M2R5ZXMsbWVudWJhclxceDNkeWVzLHNjcm9sbGJhcnNcXHgzZHllcyxyZXNpemFibGVcXHgzZHllcyx3aWR0aFxceDNkXCIrZitcIixoZWlnaHRcXHgzZFwiK2IrXCIsbGVmdFxceDNkXCIrZCk7Q0tFRElUT1IuZW52LmllJiZjJiYoYy5sb2NhdGlvbj1cbmUpO0NLRURJVE9SLmVudi5pZXx8Q0tFRElUT1IuZW52LmdlY2tvfHwoZT1jLmRvY3VtZW50LGUub3BlbigpLGUud3JpdGUoYS5kYXRhVmFsdWUpLGUuY2xvc2UoKSk7cmV0dXJuITB9fTtDS0VESVRPUi5wbHVnaW5zLmFkZChcInByZXZpZXdcIix7aW5pdDpmdW5jdGlvbihhKXthLmVsZW1lbnRNb2RlIT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FJiYoaD10aGlzLnBhdGgsYS5hZGRDb21tYW5kKFwicHJldmlld1wiLGspLGEudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlByZXZpZXdcIix7bGFiZWw6YS5sYW5nLnByZXZpZXcucHJldmlldyxjb21tYW5kOlwicHJldmlld1wiLHRvb2xiYXI6XCJkb2N1bWVudCw0MFwifSkpfX0pfSkoKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcInByaW50XCIse2luaXQ6ZnVuY3Rpb24oYSl7YS5lbGVtZW50TW9kZSE9Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORSYmKGEuYWRkQ29tbWFuZChcInByaW50XCIsQ0tFRElUT1IucGx1Z2lucy5wcmludCksYS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiUHJpbnRcIix7bGFiZWw6YS5sYW5nLnByaW50LnRvb2xiYXIsY29tbWFuZDpcInByaW50XCIsdG9vbGJhcjpcImRvY3VtZW50LDUwXCJ9KSl9fSk7Q0tFRElUT1IucGx1Z2lucy5wcmludD17ZXhlYzpmdW5jdGlvbihhKXtDS0VESVRPUi5lbnYuZ2Vja28/YS53aW5kb3cuJC5wcmludCgpOmEuZG9jdW1lbnQuJC5leGVjQ29tbWFuZChcIlByaW50XCIpfSxjYW5VbmRvOiExLHJlYWRPbmx5OjEsbW9kZXM6e3d5c2l3eWc6MX19O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwicmVtb3ZlZm9ybWF0XCIse2luaXQ6ZnVuY3Rpb24oYSl7YS5hZGRDb21tYW5kKFwicmVtb3ZlRm9ybWF0XCIsQ0tFRElUT1IucGx1Z2lucy5yZW1vdmVmb3JtYXQuY29tbWFuZHMucmVtb3ZlZm9ybWF0KTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJSZW1vdmVGb3JtYXRcIix7bGFiZWw6YS5sYW5nLnJlbW92ZWZvcm1hdC50b29sYmFyLGNvbW1hbmQ6XCJyZW1vdmVGb3JtYXRcIix0b29sYmFyOlwiY2xlYW51cCwxMFwifSl9fSk7XG5DS0VESVRPUi5wbHVnaW5zLnJlbW92ZWZvcm1hdD17Y29tbWFuZHM6e3JlbW92ZWZvcm1hdDp7ZXhlYzpmdW5jdGlvbihhKXtmb3IodmFyIGg9YS5fLnJlbW92ZUZvcm1hdFJlZ2V4fHwoYS5fLnJlbW92ZUZvcm1hdFJlZ2V4PW5ldyBSZWdFeHAoXCJeKD86XCIrYS5jb25maWcucmVtb3ZlRm9ybWF0VGFncy5yZXBsYWNlKC8sL2csXCJ8XCIpK1wiKSRcIixcImlcIikpLGU9YS5fLnJlbW92ZUF0dHJpYnV0ZXN8fChhLl8ucmVtb3ZlQXR0cmlidXRlcz1hLmNvbmZpZy5yZW1vdmVGb3JtYXRBdHRyaWJ1dGVzLnNwbGl0KFwiLFwiKSksZj1DS0VESVRPUi5wbHVnaW5zLnJlbW92ZWZvcm1hdC5maWx0ZXIsbT1hLmdldFNlbGVjdGlvbigpLmdldFJhbmdlcygpLG49bS5jcmVhdGVJdGVyYXRvcigpLHA9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UfSxjO2M9bi5nZXROZXh0UmFuZ2UoKTspe2MuY29sbGFwc2VkfHxjLmVubGFyZ2UoQ0tFRElUT1IuRU5MQVJHRV9FTEVNRU5UKTtcbnZhciBsPWMuY3JlYXRlQm9va21hcmsoKSxiPWwuc3RhcnROb2RlLGQ9bC5lbmROb2RlLGs9ZnVuY3Rpb24oYil7Zm9yKHZhciBjPWEuZWxlbWVudFBhdGgoYiksZT1jLmVsZW1lbnRzLGQ9MSxnOyhnPWVbZF0pJiYhZy5lcXVhbHMoYy5ibG9jaykmJiFnLmVxdWFscyhjLmJsb2NrTGltaXQpO2QrKyloLnRlc3QoZy5nZXROYW1lKCkpJiZmKGEsZykmJmIuYnJlYWtQYXJlbnQoZyl9O2soYik7aWYoZClmb3IoayhkKSxiPWIuZ2V0TmV4dFNvdXJjZU5vZGUoITAsQ0tFRElUT1IuTk9ERV9FTEVNRU5UKTtiJiYhYi5lcXVhbHMoZCk7KWlmKGIuaXNSZWFkT25seSgpKXtpZihiLmdldFBvc2l0aW9uKGQpJkNLRURJVE9SLlBPU0lUSU9OX0NPTlRBSU5TKWJyZWFrO2I9Yi5nZXROZXh0KHApfWVsc2Ugaz1iLmdldE5leHRTb3VyY2VOb2RlKCExLENLRURJVE9SLk5PREVfRUxFTUVOVCksXCJpbWdcIj09Yi5nZXROYW1lKCkmJmIuZGF0YShcImNrZS1yZWFsZWxlbWVudFwiKXx8IWYoYSxiKXx8KGgudGVzdChiLmdldE5hbWUoKSk/XG5iLnJlbW92ZSgxKTooYi5yZW1vdmVBdHRyaWJ1dGVzKGUpLGEuZmlyZShcInJlbW92ZUZvcm1hdENsZWFudXBcIixiKSkpLGI9aztjLm1vdmVUb0Jvb2ttYXJrKGwpfWEuZm9yY2VOZXh0U2VsZWN0aW9uQ2hlY2soKTthLmdldFNlbGVjdGlvbigpLnNlbGVjdFJhbmdlcyhtKX19fSxmaWx0ZXI6ZnVuY3Rpb24oYSxoKXtmb3IodmFyIGU9YS5fLnJlbW92ZUZvcm1hdEZpbHRlcnN8fFtdLGY9MDtmPGUubGVuZ3RoO2YrKylpZighMT09PWVbZl0oaCkpcmV0dXJuITE7cmV0dXJuITB9fTtDS0VESVRPUi5lZGl0b3IucHJvdG90eXBlLmFkZFJlbW92ZUZvcm1hdEZpbHRlcj1mdW5jdGlvbihhKXt0aGlzLl8ucmVtb3ZlRm9ybWF0RmlsdGVyc3x8KHRoaXMuXy5yZW1vdmVGb3JtYXRGaWx0ZXJzPVtdKTt0aGlzLl8ucmVtb3ZlRm9ybWF0RmlsdGVycy5wdXNoKGEpfTtDS0VESVRPUi5jb25maWcucmVtb3ZlRm9ybWF0VGFncz1cImIsYmlnLGNpdGUsY29kZSxkZWwsZGZuLGVtLGZvbnQsaSxpbnMsa2JkLHEscyxzYW1wLHNtYWxsLHNwYW4sc3RyaWtlLHN0cm9uZyxzdWIsc3VwLHR0LHUsdmFyXCI7XG5DS0VESVRPUi5jb25maWcucmVtb3ZlRm9ybWF0QXR0cmlidXRlcz1cImNsYXNzLHN0eWxlLGxhbmcsd2lkdGgsaGVpZ2h0LGFsaWduLGhzcGFjZSx2YWxpZ25cIjsoZnVuY3Rpb24oKXt2YXIgYj17cmVhZE9ubHk6MSxleGVjOmZ1bmN0aW9uKGEpe2lmKGEuZmlyZShcInNhdmVcIikmJihhPWEuZWxlbWVudC4kLmZvcm0pKXRyeXthLnN1Ym1pdCgpfWNhdGNoKGIpe2Euc3VibWl0LmNsaWNrJiZhLnN1Ym1pdC5jbGljaygpfX19O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwic2F2ZVwiLHtpbml0OmZ1bmN0aW9uKGEpe2EuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9SRVBMQUNFJiYoYS5hZGRDb21tYW5kKFwic2F2ZVwiLGIpLm1vZGVzPXt3eXNpd3lnOiEhYS5lbGVtZW50LiQuZm9ybX0sYS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiU2F2ZVwiLHtsYWJlbDphLmxhbmcuc2F2ZS50b29sYmFyLGNvbW1hbmQ6XCJzYXZlXCIsdG9vbGJhcjpcImRvY3VtZW50LDEwXCJ9KSl9fSl9KSgpOyhmdW5jdGlvbigpe0NLRURJVE9SLnBsdWdpbnMuYWRkKFwic2VsZWN0YWxsXCIse2luaXQ6ZnVuY3Rpb24oYil7Yi5hZGRDb21tYW5kKFwic2VsZWN0QWxsXCIse21vZGVzOnt3eXNpd3lnOjEsc291cmNlOjF9LGV4ZWM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5lZGl0YWJsZSgpO2lmKGIuaXMoXCJ0ZXh0YXJlYVwiKSlhPWIuJCxDS0VESVRPUi5lbnYuaWU/YS5jcmVhdGVUZXh0UmFuZ2UoKS5leGVjQ29tbWFuZChcIlNlbGVjdEFsbFwiKTooYS5zZWxlY3Rpb25TdGFydD0wLGEuc2VsZWN0aW9uRW5kPWEudmFsdWUubGVuZ3RoKSxhLmZvY3VzKCk7ZWxzZXtpZihiLmlzKFwiYm9keVwiKSlhLmRvY3VtZW50LiQuZXhlY0NvbW1hbmQoXCJTZWxlY3RBbGxcIiwhMSxudWxsKTtlbHNle3ZhciBjPWEuY3JlYXRlUmFuZ2UoKTtjLnNlbGVjdE5vZGVDb250ZW50cyhiKTtjLnNlbGVjdCgpfWEuZm9yY2VOZXh0U2VsZWN0aW9uQ2hlY2soKTthLnNlbGVjdGlvbkNoYW5nZSgpfX0sY2FuVW5kbzohMX0pO2IudWkuYWRkQnV0dG9uJiZcbmIudWkuYWRkQnV0dG9uKFwiU2VsZWN0QWxsXCIse2xhYmVsOmIubGFuZy5zZWxlY3RhbGwudG9vbGJhcixjb21tYW5kOlwic2VsZWN0QWxsXCIsdG9vbGJhcjpcInNlbGVjdGlvbiwxMFwifSl9fSl9KSgpOyhmdW5jdGlvbigpe3ZhciBrPXtyZWFkT25seToxLHByZXNlcnZlU3RhdGU6ITAsZWRpdG9yRm9jdXM6ITEsZXhlYzpmdW5jdGlvbihhKXt0aGlzLnRvZ2dsZVN0YXRlKCk7dGhpcy5yZWZyZXNoKGEpfSxyZWZyZXNoOmZ1bmN0aW9uKGEpe2lmKGEuZG9jdW1lbnQpe3ZhciBjPXRoaXMuc3RhdGUhPUNLRURJVE9SLlRSSVNUQVRFX09OfHxhLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FJiYhYS5mb2N1c01hbmFnZXIuaGFzRm9jdXM/XCJyZW1vdmVDbGFzc1wiOlwiYXR0YWNoQ2xhc3NcIjthLmVkaXRhYmxlKClbY10oXCJja2Vfc2hvd19ibG9ja3NcIil9fX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJzaG93YmxvY2tzXCIse29uTG9hZDpmdW5jdGlvbigpe3ZhciBhPVwicCBkaXYgcHJlIGFkZHJlc3MgYmxvY2txdW90ZSBoMSBoMiBoMyBoNCBoNSBoNlwiLnNwbGl0KFwiIFwiKSxjLGIsZSxmLGs9Q0tFRElUT1IuZ2V0VXJsKHRoaXMucGF0aCksbD0hKENLRURJVE9SLmVudi5pZSYmXG45PkNLRURJVE9SLmVudi52ZXJzaW9uKSxnPWw/XCI6bm90KFtjb250ZW50ZWRpdGFibGVcXHgzZGZhbHNlXSk6bm90KC5ja2Vfc2hvd19ibG9ja3Nfb2ZmKVwiOlwiXCIsZCxoO2ZvcihjPWI9ZT1mPVwiXCI7ZD1hLnBvcCgpOyloPWEubGVuZ3RoP1wiLFwiOlwiXCIsYys9XCIuY2tlX3Nob3dfYmxvY2tzIFwiK2QrZytoLGUrPVwiLmNrZV9zaG93X2Jsb2Nrcy5ja2VfY29udGVudHNfbHRyIFwiK2QrZytoLGYrPVwiLmNrZV9zaG93X2Jsb2Nrcy5ja2VfY29udGVudHNfcnRsIFwiK2QrZytoLGIrPVwiLmNrZV9zaG93X2Jsb2NrcyBcIitkK2crXCJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIrQ0tFRElUT1IuZ2V0VXJsKGsrXCJpbWFnZXMvYmxvY2tfXCIrZCtcIi5wbmdcIikrXCIpfVwiO0NLRURJVE9SLmFkZENzcygoYytcIntiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7Ym9yZGVyOjFweCBkb3R0ZWQgZ3JheTtwYWRkaW5nLXRvcDo4cHh9XCIpLmNvbmNhdChiLGUrXCJ7YmFja2dyb3VuZC1wb3NpdGlvbjp0b3AgbGVmdDtwYWRkaW5nLWxlZnQ6OHB4fVwiLFxuZitcIntiYWNrZ3JvdW5kLXBvc2l0aW9uOnRvcCByaWdodDtwYWRkaW5nLXJpZ2h0OjhweH1cIikpO2x8fENLRURJVE9SLmFkZENzcyhcIi5ja2Vfc2hvd19ibG9ja3MgW2NvbnRlbnRlZGl0YWJsZVxceDNkZmFsc2VdLC5ja2Vfc2hvd19ibG9ja3MgLmNrZV9zaG93X2Jsb2Nrc19vZmZ7Ym9yZGVyOm5vbmU7cGFkZGluZy10b3A6MDtiYWNrZ3JvdW5kLWltYWdlOm5vbmV9LmNrZV9zaG93X2Jsb2Nrcy5ja2VfY29udGVudHNfcnRsIFtjb250ZW50ZWRpdGFibGVcXHgzZGZhbHNlXSwuY2tlX3Nob3dfYmxvY2tzLmNrZV9jb250ZW50c19ydGwgLmNrZV9zaG93X2Jsb2Nrc19vZmZ7cGFkZGluZy1yaWdodDowfS5ja2Vfc2hvd19ibG9ja3MuY2tlX2NvbnRlbnRzX2x0ciBbY29udGVudGVkaXRhYmxlXFx4M2RmYWxzZV0sLmNrZV9zaG93X2Jsb2Nrcy5ja2VfY29udGVudHNfbHRyIC5ja2Vfc2hvd19ibG9ja3Nfb2Zme3BhZGRpbmctbGVmdDowfVwiKX0saW5pdDpmdW5jdGlvbihhKXtmdW5jdGlvbiBjKCl7Yi5yZWZyZXNoKGEpfVxuaWYoIWEuYmxvY2tsZXNzKXt2YXIgYj1hLmFkZENvbW1hbmQoXCJzaG93YmxvY2tzXCIsayk7Yi5jYW5VbmRvPSExO2EuY29uZmlnLnN0YXJ0dXBPdXRsaW5lQmxvY2tzJiZiLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX09OKTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJTaG93QmxvY2tzXCIse2xhYmVsOmEubGFuZy5zaG93YmxvY2tzLnRvb2xiYXIsY29tbWFuZDpcInNob3dibG9ja3NcIix0b29sYmFyOlwidG9vbHMsMjBcIn0pO2Eub24oXCJtb2RlXCIsZnVuY3Rpb24oKXtiLnN0YXRlIT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmYi5yZWZyZXNoKGEpfSk7YS5lbGVtZW50TW9kZT09Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORSYmKGEub24oXCJmb2N1c1wiLGMpLGEub24oXCJibHVyXCIsYykpO2Eub24oXCJjb250ZW50RG9tXCIsZnVuY3Rpb24oKXtiLnN0YXRlIT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmYi5yZWZyZXNoKGEpfSl9fX0pfSkoKTsoZnVuY3Rpb24oKXt2YXIgZj17cHJlc2VydmVTdGF0ZTohMCxlZGl0b3JGb2N1czohMSxyZWFkT25seToxLGV4ZWM6ZnVuY3Rpb24oYSl7dGhpcy50b2dnbGVTdGF0ZSgpO3RoaXMucmVmcmVzaChhKX0scmVmcmVzaDpmdW5jdGlvbihhKXtpZihhLmRvY3VtZW50KXt2YXIgYj10aGlzLnN0YXRlPT1DS0VESVRPUi5UUklTVEFURV9PTj9cImF0dGFjaENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiO2EuZWRpdGFibGUoKVtiXShcImNrZV9zaG93X2JvcmRlcnNcIil9fX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJzaG93Ym9yZGVyc1wiLHttb2Rlczp7d3lzaXd5ZzoxfSxvbkxvYWQ6ZnVuY3Rpb24oKXt2YXIgYTthPShDS0VESVRPUi5lbnYuaWU2Q29tcGF0P1tcIi4lMSB0YWJsZS4lMixcIixcIi4lMSB0YWJsZS4lMiB0ZCwgLiUxIHRhYmxlLiUyIHRoXCIsXCJ7XCIsXCJib3JkZXIgOiAjZDNkM2QzIDFweCBkb3R0ZWRcIixcIn1cIl06XCIuJTEgdGFibGUuJTIsOy4lMSB0YWJsZS4lMiBcXHgzZSB0ciBcXHgzZSB0ZCwgLiUxIHRhYmxlLiUyIFxceDNlIHRyIFxceDNlIHRoLDsuJTEgdGFibGUuJTIgXFx4M2UgdGJvZHkgXFx4M2UgdHIgXFx4M2UgdGQsIC4lMSB0YWJsZS4lMiBcXHgzZSB0Ym9keSBcXHgzZSB0ciBcXHgzZSB0aCw7LiUxIHRhYmxlLiUyIFxceDNlIHRoZWFkIFxceDNlIHRyIFxceDNlIHRkLCAuJTEgdGFibGUuJTIgXFx4M2UgdGhlYWQgXFx4M2UgdHIgXFx4M2UgdGgsOy4lMSB0YWJsZS4lMiBcXHgzZSB0Zm9vdCBcXHgzZSB0ciBcXHgzZSB0ZCwgLiUxIHRhYmxlLiUyIFxceDNlIHRmb290IFxceDNlIHRyIFxceDNlIHRoO3s7Ym9yZGVyIDogI2QzZDNkMyAxcHggZG90dGVkO31cIi5zcGxpdChcIjtcIikpLmpvaW4oXCJcIikucmVwbGFjZSgvJTIvZyxcblwiY2tlX3Nob3dfYm9yZGVyXCIpLnJlcGxhY2UoLyUxL2csXCJja2Vfc2hvd19ib3JkZXJzIFwiKTtDS0VESVRPUi5hZGRDc3MoYSl9LGluaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5hZGRDb21tYW5kKFwic2hvd2JvcmRlcnNcIixmKTtiLmNhblVuZG89ITE7ITEhPT1hLmNvbmZpZy5zdGFydHVwU2hvd0JvcmRlcnMmJmIuc2V0U3RhdGUoQ0tFRElUT1IuVFJJU1RBVEVfT04pO2Eub24oXCJtb2RlXCIsZnVuY3Rpb24oKXtiLnN0YXRlIT1DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCYmYi5yZWZyZXNoKGEpfSxudWxsLG51bGwsMTAwKTthLm9uKFwiY29udGVudERvbVwiLGZ1bmN0aW9uKCl7Yi5zdGF0ZSE9Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQmJmIucmVmcmVzaChhKX0pO2Eub24oXCJyZW1vdmVGb3JtYXRDbGVhbnVwXCIsZnVuY3Rpb24oZCl7ZD1kLmRhdGE7YS5nZXRDb21tYW5kKFwic2hvd2JvcmRlcnNcIikuc3RhdGU9PUNLRURJVE9SLlRSSVNUQVRFX09OJiZkLmlzKFwidGFibGVcIikmJighZC5oYXNBdHRyaWJ1dGUoXCJib3JkZXJcIil8fFxuMD49cGFyc2VJbnQoZC5nZXRBdHRyaWJ1dGUoXCJib3JkZXJcIiksMTApKSYmZC5hZGRDbGFzcyhcImNrZV9zaG93X2JvcmRlclwiKX0pfSxhZnRlckluaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5kYXRhUHJvY2Vzc29yO2E9YiYmYi5kYXRhRmlsdGVyO2I9YiYmYi5odG1sRmlsdGVyO2EmJmEuYWRkUnVsZXMoe2VsZW1lbnRzOnt0YWJsZTpmdW5jdGlvbihhKXthPWEuYXR0cmlidXRlczt2YXIgYj1hW1wiY2xhc3NcIl0sYz1wYXJzZUludChhLmJvcmRlciwxMCk7YyYmISgwPj1jKXx8YiYmLTEhPWIuaW5kZXhPZihcImNrZV9zaG93X2JvcmRlclwiKXx8KGFbXCJjbGFzc1wiXT0oYnx8XCJcIikrXCIgY2tlX3Nob3dfYm9yZGVyXCIpfX19KTtiJiZiLmFkZFJ1bGVzKHtlbGVtZW50czp7dGFibGU6ZnVuY3Rpb24oYSl7YT1hLmF0dHJpYnV0ZXM7dmFyIGI9YVtcImNsYXNzXCJdO2ImJihhW1wiY2xhc3NcIl09Yi5yZXBsYWNlKFwiY2tlX3Nob3dfYm9yZGVyXCIsXCJcIikucmVwbGFjZSgvXFxzezJ9LyxcIiBcIikucmVwbGFjZSgvXlxccyt8XFxzKyQvLFxuXCJcIikpfX19KX19KTtDS0VESVRPUi5vbihcImRpYWxvZ0RlZmluaXRpb25cIixmdW5jdGlvbihhKXt2YXIgYj1hLmRhdGEubmFtZTtpZihcInRhYmxlXCI9PWJ8fFwidGFibGVQcm9wZXJ0aWVzXCI9PWIpaWYoYT1hLmRhdGEuZGVmaW5pdGlvbixiPWEuZ2V0Q29udGVudHMoXCJpbmZvXCIpLmdldChcInR4dEJvcmRlclwiKSxiLmNvbW1pdD1DS0VESVRPUi50b29scy5vdmVycmlkZShiLmNvbW1pdCxmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXthLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT1wYXJzZUludCh0aGlzLmdldFZhbHVlKCksMTApO2NbIWV8fDA+PWU/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJja2Vfc2hvd19ib3JkZXJcIil9fSksYT0oYT1hLmdldENvbnRlbnRzKFwiYWR2YW5jZWRcIikpJiZhLmdldChcImFkdkNTU0NsYXNzZXNcIikpYS5zZXR1cD1DS0VESVRPUi50b29scy5vdmVycmlkZShhLnNldHVwLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2EuYXBwbHkodGhpcyxcbmFyZ3VtZW50cyk7dGhpcy5zZXRWYWx1ZSh0aGlzLmdldFZhbHVlKCkucmVwbGFjZSgvY2tlX3Nob3dfYm9yZGVyLyxcIlwiKSl9fSksYS5jb21taXQ9Q0tFRElUT1IudG9vbHMub3ZlcnJpZGUoYS5jb21taXQsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cGFyc2VJbnQoYy5nZXRBdHRyaWJ1dGUoXCJib3JkZXJcIiksMTApfHxjLmFkZENsYXNzKFwiY2tlX3Nob3dfYm9yZGVyXCIpfX0pfSl9KSgpOyhmdW5jdGlvbigpe0NLRURJVE9SLnBsdWdpbnMuYWRkKFwic291cmNlYXJlYVwiLHtpbml0OmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGQoKXt2YXIgYT1lJiZ0aGlzLmVxdWFscyhDS0VESVRPUi5kb2N1bWVudC5nZXRBY3RpdmUoKSk7dGhpcy5oaWRlKCk7dGhpcy5zZXRTdHlsZShcImhlaWdodFwiLHRoaXMuZ2V0UGFyZW50KCkuJC5jbGllbnRIZWlnaHQrXCJweFwiKTt0aGlzLnNldFN0eWxlKFwid2lkdGhcIix0aGlzLmdldFBhcmVudCgpLiQuY2xpZW50V2lkdGgrXCJweFwiKTt0aGlzLnNob3coKTthJiZ0aGlzLmZvY3VzKCl9aWYoYS5lbGVtZW50TW9kZSE9Q0tFRElUT1IuRUxFTUVOVF9NT0RFX0lOTElORSl7dmFyIGY9Q0tFRElUT1IucGx1Z2lucy5zb3VyY2VhcmVhO2EuYWRkTW9kZShcInNvdXJjZVwiLGZ1bmN0aW9uKGUpe3ZhciBiPWEudWkuc3BhY2UoXCJjb250ZW50c1wiKS5nZXREb2N1bWVudCgpLmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtiLnNldFN0eWxlcyhDS0VESVRPUi50b29scy5leHRlbmQoe3dpZHRoOkNLRURJVE9SLmVudi5pZTdDb21wYXQ/XG5cIjk5JVwiOlwiMTAwJVwiLGhlaWdodDpcIjEwMCVcIixyZXNpemU6XCJub25lXCIsb3V0bGluZTpcIm5vbmVcIixcInRleHQtYWxpZ25cIjpcImxlZnRcIn0sQ0tFRElUT1IudG9vbHMuY3NzVmVuZG9yUHJlZml4KFwidGFiLXNpemVcIixhLmNvbmZpZy5zb3VyY2VBcmVhVGFiU2l6ZXx8NCkpKTtiLnNldEF0dHJpYnV0ZShcImRpclwiLFwibHRyXCIpO2IuYWRkQ2xhc3MoXCJja2Vfc291cmNlXCIpLmFkZENsYXNzKFwiY2tlX3Jlc2V0XCIpLmFkZENsYXNzKFwiY2tlX2VuYWJsZV9jb250ZXh0X21lbnVcIik7YS51aS5zcGFjZShcImNvbnRlbnRzXCIpLmFwcGVuZChiKTtiPWEuZWRpdGFibGUobmV3IGMoYSxiKSk7Yi5zZXREYXRhKGEuZ2V0RGF0YSgxKSk7Q0tFRElUT1IuZW52LmllJiYoYi5hdHRhY2hMaXN0ZW5lcihhLFwicmVzaXplXCIsZCxiKSxiLmF0dGFjaExpc3RlbmVyKENLRURJVE9SLmRvY3VtZW50LmdldFdpbmRvdygpLFwicmVzaXplXCIsZCxiKSxDS0VESVRPUi50b29scy5zZXRUaW1lb3V0KGQsMCxiKSk7YS5maXJlKFwiYXJpYVdpZGdldFwiLFxudGhpcyk7ZSgpfSk7YS5hZGRDb21tYW5kKFwic291cmNlXCIsZi5jb21tYW5kcy5zb3VyY2UpO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlNvdXJjZVwiLHtsYWJlbDphLmxhbmcuc291cmNlYXJlYS50b29sYmFyLGNvbW1hbmQ6XCJzb3VyY2VcIix0b29sYmFyOlwibW9kZSwxMFwifSk7YS5vbihcIm1vZGVcIixmdW5jdGlvbigpe2EuZ2V0Q29tbWFuZChcInNvdXJjZVwiKS5zZXRTdGF0ZShcInNvdXJjZVwiPT1hLm1vZGU/Q0tFRElUT1IuVFJJU1RBVEVfT046Q0tFRElUT1IuVFJJU1RBVEVfT0ZGKX0pO3ZhciBlPUNLRURJVE9SLmVudi5pZSYmOT09Q0tFRElUT1IuZW52LnZlcnNpb259fX0pO3ZhciBjPUNLRURJVE9SLnRvb2xzLmNyZWF0ZUNsYXNzKHtiYXNlOkNLRURJVE9SLmVkaXRhYmxlLHByb3RvOntzZXREYXRhOmZ1bmN0aW9uKGEpe3RoaXMuc2V0VmFsdWUoYSk7dGhpcy5zdGF0dXM9XCJyZWFkeVwiO3RoaXMuZWRpdG9yLmZpcmUoXCJkYXRhUmVhZHlcIil9LGdldERhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRWYWx1ZSgpfSxcbmluc2VydEh0bWw6ZnVuY3Rpb24oKXt9LGluc2VydEVsZW1lbnQ6ZnVuY3Rpb24oKXt9LGluc2VydFRleHQ6ZnVuY3Rpb24oKXt9LHNldFJlYWRPbmx5OmZ1bmN0aW9uKGEpe3RoaXNbKGE/XCJzZXRcIjpcInJlbW92ZVwiKStcIkF0dHJpYnV0ZVwiXShcInJlYWRPbmx5XCIsXCJyZWFkb25seVwiKX0sZGV0YWNoOmZ1bmN0aW9uKCl7Yy5iYXNlUHJvdG8uZGV0YWNoLmNhbGwodGhpcyk7dGhpcy5jbGVhckN1c3RvbURhdGEoKTt0aGlzLnJlbW92ZSgpfX19KX0pKCk7XG5DS0VESVRPUi5wbHVnaW5zLnNvdXJjZWFyZWE9e2NvbW1hbmRzOntzb3VyY2U6e21vZGVzOnt3eXNpd3lnOjEsc291cmNlOjF9LGVkaXRvckZvY3VzOiExLHJlYWRPbmx5OjEsZXhlYzpmdW5jdGlvbihjKXtcInd5c2l3eWdcIj09Yy5tb2RlJiZjLmZpcmUoXCJzYXZlU25hcHNob3RcIik7Yy5nZXRDb21tYW5kKFwic291cmNlXCIpLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKTtjLnNldE1vZGUoXCJzb3VyY2VcIj09Yy5tb2RlP1wid3lzaXd5Z1wiOlwic291cmNlXCIpfSxjYW5VbmRvOiExfX19O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwic3BlY2lhbGNoYXJcIix7YXZhaWxhYmxlTGFuZ3M6e2FmOjEsYXI6MSxiZzoxLGNhOjEsY3M6MSxjeToxLGRhOjEsZGU6MSxcImRlLWNoXCI6MSxlbDoxLGVuOjEsXCJlbi1nYlwiOjEsZW86MSxlczoxLGV0OjEsZXU6MSxmYToxLGZpOjEsZnI6MSxcImZyLWNhXCI6MSxnbDoxLGhlOjEsaHI6MSxodToxLGlkOjEsaXQ6MSxqYToxLGttOjEsa286MSxrdToxLGx0OjEsbHY6MSxuYjoxLG5sOjEsbm86MSxwbDoxLHB0OjEsXCJwdC1iclwiOjEscnU6MSxzaToxLHNrOjEsc2w6MSxzcToxLHN2OjEsdGg6MSx0cjoxLHR0OjEsdWc6MSx1azoxLHZpOjEsemg6MSxcInpoLWNuXCI6MX0scmVxdWlyZXM6XCJkaWFsb2dcIixpbml0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXM7Q0tFRElUT1IuZGlhbG9nLmFkZChcInNwZWNpYWxjaGFyXCIsdGhpcy5wYXRoK1wiZGlhbG9ncy9zcGVjaWFsY2hhci5qc1wiKTthLmFkZENvbW1hbmQoXCJzcGVjaWFsY2hhclwiLHtleGVjOmZ1bmN0aW9uKCl7dmFyIGI9XG5hLmxhbmdDb2RlLGI9Yy5hdmFpbGFibGVMYW5nc1tiXT9iOmMuYXZhaWxhYmxlTGFuZ3NbYi5yZXBsYWNlKC8tLiovLFwiXCIpXT9iLnJlcGxhY2UoLy0uKi8sXCJcIik6XCJlblwiO0NLRURJVE9SLnNjcmlwdExvYWRlci5sb2FkKENLRURJVE9SLmdldFVybChjLnBhdGgrXCJkaWFsb2dzL2xhbmcvXCIrYitcIi5qc1wiKSxmdW5jdGlvbigpe0NLRURJVE9SLnRvb2xzLmV4dGVuZChhLmxhbmcuc3BlY2lhbGNoYXIsYy5sYW5nRW50cmllc1tiXSk7YS5vcGVuRGlhbG9nKFwic3BlY2lhbGNoYXJcIil9KX0sbW9kZXM6e3d5c2l3eWc6MX0sY2FuVW5kbzohMX0pO2EudWkuYWRkQnV0dG9uJiZhLnVpLmFkZEJ1dHRvbihcIlNwZWNpYWxDaGFyXCIse2xhYmVsOmEubGFuZy5zcGVjaWFsY2hhci50b29sYmFyLGNvbW1hbmQ6XCJzcGVjaWFsY2hhclwiLHRvb2xiYXI6XCJpbnNlcnQsNTBcIn0pfX0pO0NLRURJVE9SLmNvbmZpZy5zcGVjaWFsQ2hhcnM9XCIhIFxceDI2cXVvdDsgIyAkICUgXFx4MjZhbXA7ICcgKCApICogKyAtIC4gLyAwIDEgMiAzIDQgNSA2IDcgOCA5IDogOyBcXHgyNmx0OyBcXHgzZCBcXHgyNmd0OyA/IEAgQSBCIEMgRCBFIEYgRyBIIEkgSiBLIEwgTSBOIE8gUCBRIFIgUyBUIFUgViBXIFggWSBaIFsgXSBeIF8gYCBhIGIgYyBkIGUgZiBnIGggaSBqIGsgbCBtIG4gbyBwIHEgciBzIHQgdSB2IHcgeCB5IHogeyB8IH0gfiBcXHgyNmV1cm87IFxceDI2bHNxdW87IFxceDI2cnNxdW87IFxceDI2bGRxdW87IFxceDI2cmRxdW87IFxceDI2bmRhc2g7IFxceDI2bWRhc2g7IFxceDI2aWV4Y2w7IFxceDI2Y2VudDsgXFx4MjZwb3VuZDsgXFx4MjZjdXJyZW47IFxceDI2eWVuOyBcXHgyNmJydmJhcjsgXFx4MjZzZWN0OyBcXHgyNnVtbDsgXFx4MjZjb3B5OyBcXHgyNm9yZGY7IFxceDI2bGFxdW87IFxceDI2bm90OyBcXHgyNnJlZzsgXFx4MjZtYWNyOyBcXHgyNmRlZzsgXFx4MjZzdXAyOyBcXHgyNnN1cDM7IFxceDI2YWN1dGU7IFxceDI2bWljcm87IFxceDI2cGFyYTsgXFx4MjZtaWRkb3Q7IFxceDI2Y2VkaWw7IFxceDI2c3VwMTsgXFx4MjZvcmRtOyBcXHgyNnJhcXVvOyBcXHgyNmZyYWMxNDsgXFx4MjZmcmFjMTI7IFxceDI2ZnJhYzM0OyBcXHgyNmlxdWVzdDsgXFx4MjZBZ3JhdmU7IFxceDI2QWFjdXRlOyBcXHgyNkFjaXJjOyBcXHgyNkF0aWxkZTsgXFx4MjZBdW1sOyBcXHgyNkFyaW5nOyBcXHgyNkFFbGlnOyBcXHgyNkNjZWRpbDsgXFx4MjZFZ3JhdmU7IFxceDI2RWFjdXRlOyBcXHgyNkVjaXJjOyBcXHgyNkV1bWw7IFxceDI2SWdyYXZlOyBcXHgyNklhY3V0ZTsgXFx4MjZJY2lyYzsgXFx4MjZJdW1sOyBcXHgyNkVUSDsgXFx4MjZOdGlsZGU7IFxceDI2T2dyYXZlOyBcXHgyNk9hY3V0ZTsgXFx4MjZPY2lyYzsgXFx4MjZPdGlsZGU7IFxceDI2T3VtbDsgXFx4MjZ0aW1lczsgXFx4MjZPc2xhc2g7IFxceDI2VWdyYXZlOyBcXHgyNlVhY3V0ZTsgXFx4MjZVY2lyYzsgXFx4MjZVdW1sOyBcXHgyNllhY3V0ZTsgXFx4MjZUSE9STjsgXFx4MjZzemxpZzsgXFx4MjZhZ3JhdmU7IFxceDI2YWFjdXRlOyBcXHgyNmFjaXJjOyBcXHgyNmF0aWxkZTsgXFx4MjZhdW1sOyBcXHgyNmFyaW5nOyBcXHgyNmFlbGlnOyBcXHgyNmNjZWRpbDsgXFx4MjZlZ3JhdmU7IFxceDI2ZWFjdXRlOyBcXHgyNmVjaXJjOyBcXHgyNmV1bWw7IFxceDI2aWdyYXZlOyBcXHgyNmlhY3V0ZTsgXFx4MjZpY2lyYzsgXFx4MjZpdW1sOyBcXHgyNmV0aDsgXFx4MjZudGlsZGU7IFxceDI2b2dyYXZlOyBcXHgyNm9hY3V0ZTsgXFx4MjZvY2lyYzsgXFx4MjZvdGlsZGU7IFxceDI2b3VtbDsgXFx4MjZkaXZpZGU7IFxceDI2b3NsYXNoOyBcXHgyNnVncmF2ZTsgXFx4MjZ1YWN1dGU7IFxceDI2dWNpcmM7IFxceDI2dXVtbDsgXFx4MjZ5YWN1dGU7IFxceDI2dGhvcm47IFxceDI2eXVtbDsgXFx4MjZPRWxpZzsgXFx4MjZvZWxpZzsgXFx4MjYjMzcyOyBcXHgyNiMzNzQgXFx4MjYjMzczIFxceDI2IzM3NTsgXFx4MjZzYnF1bzsgXFx4MjYjODIxOTsgXFx4MjZiZHF1bzsgXFx4MjZoZWxsaXA7IFxceDI2dHJhZGU7IFxceDI2Izk2NTg7IFxceDI2YnVsbDsgXFx4MjZyYXJyOyBcXHgyNnJBcnI7IFxceDI2aEFycjsgXFx4MjZkaWFtczsgXFx4MjZhc3ltcDtcIi5zcGxpdChcIiBcIik7Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJzY2F5dFwiLHtyZXF1aXJlczpcIm1lbnVidXR0b24sZGlhbG9nXCIsdGFiVG9PcGVuOm51bGwsZGlhbG9nTmFtZTpcInNjYXl0RGlhbG9nXCIsaW5pdDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGQ9Q0tFRElUT1IucGx1Z2lucy5zY2F5dDt0aGlzLmJpbmRFdmVudHMoYSk7dGhpcy5wYXJzZUNvbmZpZyhhKTt0aGlzLmFkZFJ1bGUoYSk7Q0tFRElUT1IuZGlhbG9nLmFkZCh0aGlzLmRpYWxvZ05hbWUsQ0tFRElUT1IuZ2V0VXJsKHRoaXMucGF0aCtcImRpYWxvZ3Mvb3B0aW9ucy5qc1wiKSk7dGhpcy5hZGRNZW51SXRlbXMoYSk7dmFyIGI9YS5sYW5nLnNjYXl0LGU9Q0tFRElUT1IuZW52O2EudWkuYWRkKFwiU2NheXRcIixDS0VESVRPUi5VSV9NRU5VQlVUVE9OLHtsYWJlbDpiLnRleHRfdGl0bGUsdGl0bGU6YS5wbHVnaW5zLndzYz9hLmxhbmcud3NjLnRpdGxlOmIudGV4dF90aXRsZSxtb2Rlczp7d3lzaXd5ZzohKGUuaWUmJig4PmUudmVyc2lvbnx8ZS5xdWlya3MpKX0sXG50b29sYmFyOlwic3BlbGxjaGVja2VyLDIwXCIscmVmcmVzaDpmdW5jdGlvbigpe3ZhciBiPWEudWkuaW5zdGFuY2VzLlNjYXl0LmdldFN0YXRlKCk7YS5zY2F5dCYmKGI9ZC5zdGF0ZS5zY2F5dFthLm5hbWVdP0NLRURJVE9SLlRSSVNUQVRFX09OOkNLRURJVE9SLlRSSVNUQVRFX09GRik7YS5maXJlKFwic2NheXRCdXR0b25TdGF0ZVwiLGIpfSxvblJlbmRlcjpmdW5jdGlvbigpe3ZhciBiPXRoaXM7YS5vbihcInNjYXl0QnV0dG9uU3RhdGVcIixmdW5jdGlvbihhKXt2b2lkIDAhPT10eXBlb2YgYS5kYXRhJiZiLnNldFN0YXRlKGEuZGF0YSl9KX0sb25NZW51OmZ1bmN0aW9uKCl7dmFyIGI9YS5zY2F5dDthLmdldE1lbnVJdGVtKFwic2NheXRUb2dnbGVcIikubGFiZWw9YS5sYW5nLnNjYXl0W2ImJmQuc3RhdGUuc2NheXRbYS5uYW1lXT9cImJ0bl9kaXNhYmxlXCI6XCJidG5fZW5hYmxlXCJdO2I9e3NjYXl0VG9nZ2xlOkNLRURJVE9SLlRSSVNUQVRFX09GRixzY2F5dE9wdGlvbnM6Yj9DS0VESVRPUi5UUklTVEFURV9PRkY6XG5DS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxzY2F5dExhbmdzOmI/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELHNjYXl0RGljdDpiP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxzY2F5dEFib3V0OmI/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELFdTQzphLnBsdWdpbnMud3NjP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRH07YS5jb25maWcuc2NheXRfdWlUYWJzWzBdfHxkZWxldGUgYi5zY2F5dE9wdGlvbnM7YS5jb25maWcuc2NheXRfdWlUYWJzWzFdfHxkZWxldGUgYi5zY2F5dExhbmdzO2EuY29uZmlnLnNjYXl0X3VpVGFic1syXXx8ZGVsZXRlIGIuc2NheXREaWN0O3JldHVybiBifX0pO2EuY29udGV4dE1lbnUmJmEuYWRkTWVudUl0ZW1zJiYoYS5jb250ZXh0TWVudS5hZGRMaXN0ZW5lcihmdW5jdGlvbihiLGQpe3ZhciBlPVxuYS5zY2F5dCxrLGw7ZSYmKGw9ZS5nZXRTZWxlY3Rpb25Ob2RlKCkpJiYoaz1jLm1lbnVHZW5lcmF0b3IoYSxsKSxlLnNob3dCYW5uZXIoXCIuXCIrYS5jb250ZXh0TWVudS5fLmRlZmluaXRpb24ucGFuZWwuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKS5qb2luKFwiIC5cIikpKTtyZXR1cm4ga30pLGEuY29udGV4dE1lbnUuXy5vbkhpZGU9Q0tFRElUT1IudG9vbHMub3ZlcnJpZGUoYS5jb250ZXh0TWVudS5fLm9uSGlkZSxmdW5jdGlvbihiKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1hLnNjYXl0O2QmJmQuaGlkZUJhbm5lcigpO3JldHVybiBiLmFwcGx5KHRoaXMpfX0pKX0sYWRkTWVudUl0ZW1zOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsZD1DS0VESVRPUi5wbHVnaW5zLnNjYXl0O2EuYWRkTWVudUdyb3VwKFwic2NheXRCdXR0b25cIik7Zm9yKHZhciBiPWEuY29uZmlnLnNjYXl0X2NvbnRleHRNZW51SXRlbXNPcmRlci5zcGxpdChcInxcIiksZT0wO2U8Yi5sZW5ndGg7ZSsrKWJbZV09XCJzY2F5dF9cIitiW2VdO1xuaWYoKGI9W1wiZ3JheXRfZGVzY3JpcHRpb25cIixcImdyYXl0X3N1Z2dlc3RcIixcImdyYXl0X2NvbnRyb2xcIl0uY29uY2F0KGIpKSYmYi5sZW5ndGgpZm9yKGU9MDtlPGIubGVuZ3RoO2UrKylhLmFkZE1lbnVHcm91cChiW2VdLGUtMTApO2EuYWRkQ29tbWFuZChcInNjYXl0VG9nZ2xlXCIse2V4ZWM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zY2F5dDtkLnN0YXRlLnNjYXl0W2EubmFtZV09IWQuc3RhdGUuc2NheXRbYS5uYW1lXTshMD09PWQuc3RhdGUuc2NheXRbYS5uYW1lXT9ifHxkLmNyZWF0ZVNjYXl0KGEpOmImJmQuZGVzdHJveShhKX19KTthLmFkZENvbW1hbmQoXCJzY2F5dEFib3V0XCIse2V4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC50YWJUb09wZW49XCJhYm91dFwiO2EubG9ja1NlbGVjdGlvbigpO2Eub3BlbkRpYWxvZyhjLmRpYWxvZ05hbWUpfX0pO2EuYWRkQ29tbWFuZChcInNjYXl0T3B0aW9uc1wiLHtleGVjOmZ1bmN0aW9uKGEpe2Euc2NheXQudGFiVG9PcGVuPVwib3B0aW9uc1wiO2EubG9ja1NlbGVjdGlvbigpO1xuYS5vcGVuRGlhbG9nKGMuZGlhbG9nTmFtZSl9fSk7YS5hZGRDb21tYW5kKFwic2NheXRMYW5nc1wiLHtleGVjOmZ1bmN0aW9uKGEpe2Euc2NheXQudGFiVG9PcGVuPVwibGFuZ3NcIjthLmxvY2tTZWxlY3Rpb24oKTthLm9wZW5EaWFsb2coYy5kaWFsb2dOYW1lKX19KTthLmFkZENvbW1hbmQoXCJzY2F5dERpY3RcIix7ZXhlYzpmdW5jdGlvbihhKXthLnNjYXl0LnRhYlRvT3Blbj1cImRpY3Rpb25hcmllc1wiO2EubG9ja1NlbGVjdGlvbigpO2Eub3BlbkRpYWxvZyhjLmRpYWxvZ05hbWUpfX0pO2I9e3NjYXl0VG9nZ2xlOntsYWJlbDphLmxhbmcuc2NheXQuYnRuX2VuYWJsZSxncm91cDpcInNjYXl0QnV0dG9uXCIsY29tbWFuZDpcInNjYXl0VG9nZ2xlXCJ9LHNjYXl0QWJvdXQ6e2xhYmVsOmEubGFuZy5zY2F5dC5idG5fYWJvdXQsZ3JvdXA6XCJzY2F5dEJ1dHRvblwiLGNvbW1hbmQ6XCJzY2F5dEFib3V0XCJ9LHNjYXl0T3B0aW9uczp7bGFiZWw6YS5sYW5nLnNjYXl0LmJ0bl9vcHRpb25zLGdyb3VwOlwic2NheXRCdXR0b25cIixcbmNvbW1hbmQ6XCJzY2F5dE9wdGlvbnNcIn0sc2NheXRMYW5nczp7bGFiZWw6YS5sYW5nLnNjYXl0LmJ0bl9sYW5ncyxncm91cDpcInNjYXl0QnV0dG9uXCIsY29tbWFuZDpcInNjYXl0TGFuZ3NcIn0sc2NheXREaWN0OntsYWJlbDphLmxhbmcuc2NheXQuYnRuX2RpY3Rpb25hcmllcyxncm91cDpcInNjYXl0QnV0dG9uXCIsY29tbWFuZDpcInNjYXl0RGljdFwifX07YS5wbHVnaW5zLndzYyYmKGIuV1NDPXtsYWJlbDphLmxhbmcud3NjLnRvb2xiYXIsZ3JvdXA6XCJzY2F5dEJ1dHRvblwiLG9uQ2xpY2s6ZnVuY3Rpb24oKXt2YXIgYj1DS0VESVRPUi5wbHVnaW5zLnNjYXl0LGQ9YS5zY2F5dCxjPWEuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkU/YS5jb250YWluZXIuZ2V0VGV4dCgpOmEuZG9jdW1lbnQuZ2V0Qm9keSgpLmdldFRleHQoKTsoYz1jLnJlcGxhY2UoL1xccy9nLFwiXCIpKT8oZCYmYi5zdGF0ZS5zY2F5dFthLm5hbWVdJiZkLnNldE1hcmt1cFBhdXNlZCYmZC5zZXRNYXJrdXBQYXVzZWQoITApLFxuYS5sb2NrU2VsZWN0aW9uKCksYS5leGVjQ29tbWFuZChcImNoZWNrc3BlbGxcIikpOmFsZXJ0KFwiTm90aGluZyB0byBjaGVjayFcIil9fSk7YS5hZGRNZW51SXRlbXMoYil9LGJpbmRFdmVudHM6ZnVuY3Rpb24oYSl7dmFyIGM9Q0tFRElUT1IucGx1Z2lucy5zY2F5dCxkPWEuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkUsYj1mdW5jdGlvbigpe2MuZGVzdHJveShhKX0sZT1mdW5jdGlvbigpeyFjLnN0YXRlLnNjYXl0W2EubmFtZV18fGEucmVhZE9ubHl8fGEuc2NheXR8fGMuY3JlYXRlU2NheXQoYSl9LGY9ZnVuY3Rpb24oKXt2YXIgYj1hLmVkaXRhYmxlKCk7Yi5hdHRhY2hMaXN0ZW5lcihiLFwiZm9jdXNcIixmdW5jdGlvbihiKXtDS0VESVRPUi5wbHVnaW5zLnNjYXl0JiYhYS5zY2F5dCYmc2V0VGltZW91dChlLDApO2I9Q0tFRElUT1IucGx1Z2lucy5zY2F5dCYmQ0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdGF0ZS5zY2F5dFthLm5hbWVdJiZhLnNjYXl0O3ZhciBjLFxuaDtpZigoZHx8YikmJmEuXy5zYXZlZFNlbGVjdGlvbil7Yj1hLl8uc2F2ZWRTZWxlY3Rpb24uZ2V0U2VsZWN0ZWRFbGVtZW50KCk7Yj0hYiYmYS5fLnNhdmVkU2VsZWN0aW9uLmdldFJhbmdlcygpO2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWg9YltmXSxcInN0cmluZ1wiPT09dHlwZW9mIGguc3RhcnRDb250YWluZXIuJC5ub2RlVmFsdWUmJihjPWguc3RhcnRDb250YWluZXIuZ2V0VGV4dCgpLmxlbmd0aCwoYzxoLnN0YXJ0T2Zmc2V0fHxjPGguZW5kT2Zmc2V0KSYmYS51bmxvY2tTZWxlY3Rpb24oITEpKX19LHRoaXMsbnVsbCwtMTApfSxnPWZ1bmN0aW9uKCl7ZD9hLmNvbmZpZy5zY2F5dF9pbmxpbmVNb2RlSW1tZWRpYXRlTWFya3VwP2UoKTooYS5vbihcImJsdXJcIixmdW5jdGlvbigpe3NldFRpbWVvdXQoYiwwKX0pLGEub24oXCJmb2N1c1wiLGUpLGEuZm9jdXNNYW5hZ2VyLmhhc0ZvY3VzJiZlKCkpOmUoKTtmKCk7dmFyIGM9YS5lZGl0YWJsZSgpO2MuYXR0YWNoTGlzdGVuZXIoYyxcIm1vdXNlZG93blwiLFxuZnVuY3Rpb24oYil7Yj1iLmRhdGEuZ2V0VGFyZ2V0KCk7dmFyIGQ9YS53aWRnZXRzJiZhLndpZGdldHMuZ2V0QnlFbGVtZW50KGIpO2QmJihkLndyYXBwZXI9Yi5nZXRBc2NlbmRhbnQoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaGFzQXR0cmlidXRlKFwiZGF0YS1ja2Utd2lkZ2V0LXdyYXBwZXJcIil9LCEwKSl9LHRoaXMsbnVsbCwtMTApfTthLm9uKFwiY29udGVudERvbVwiLGcpO2Eub24oXCJiZWZvcmVDb21tYW5kRXhlY1wiLGZ1bmN0aW9uKGIpe3ZhciBkPWEuc2NheXQsZT1udWxsLGY9ITEsZz0hMDtiLmRhdGEubmFtZSBpbiBjLm9wdGlvbnMuZGlzYWJsaW5nQ29tbWFuZEV4ZWMmJlwid3lzaXd5Z1wiPT1hLm1vZGU/ZCYmKGMuZGVzdHJveShhKSxhLmZpcmUoXCJzY2F5dEJ1dHRvblN0YXRlXCIsQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpKTpcImJvbGRcIiE9PWIuZGF0YS5uYW1lJiZcIml0YWxpY1wiIT09Yi5kYXRhLm5hbWUmJlwidW5kZXJsaW5lXCIhPT1iLmRhdGEubmFtZSYmXCJzdHJpa2VcIiE9PWIuZGF0YS5uYW1lJiZcblwic3Vic2NyaXB0XCIhPT1iLmRhdGEubmFtZSYmXCJzdXBlcnNjcmlwdFwiIT09Yi5kYXRhLm5hbWUmJlwiZW50ZXJcIiE9PWIuZGF0YS5uYW1lJiZcImN1dFwiIT09Yi5kYXRhLm5hbWUmJlwibGFuZ3VhZ2VcIiE9PWIuZGF0YS5uYW1lfHwhZHx8KFwiY3V0XCI9PT1iLmRhdGEubmFtZSYmKGc9ITEsZj0hMCksXCJsYW5ndWFnZVwiPT09Yi5kYXRhLm5hbWUmJihlPShlPWEucGx1Z2lucy5sYW5ndWFnZS5nZXRDdXJyZW50TGFuZ0VsZW1lbnQoYSkpJiZlLiQsZj0hMCksYS5maXJlKFwicmVsb2FkTWFya3VwU2NheXRcIix7cmVtb3ZlT3B0aW9uczp7cmVtb3ZlSW5zaWRlOmcsZm9yY2VCb29rbWFyazpmLHNlbGVjdGlvbk5vZGU6ZX0sdGltZW91dDowfSkpfSk7YS5vbihcImJlZm9yZVNldE1vZGVcIixmdW5jdGlvbihiKXtpZihcInNvdXJjZVwiPT1iLmRhdGEpe2lmKGI9YS5zY2F5dCljLmRlc3Ryb3koYSksYS5maXJlKFwic2NheXRCdXR0b25TdGF0ZVwiLENLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKTthLmRvY3VtZW50JiZcbmEuZG9jdW1lbnQuZ2V0Qm9keSgpLnJlbW92ZUF0dHJpYnV0ZShcIl9qcXVpZFwiKX19KTthLm9uKFwiYWZ0ZXJDb21tYW5kRXhlY1wiLGZ1bmN0aW9uKGIpe1wid3lzaXd5Z1wiIT1hLm1vZGV8fFwidW5kb1wiIT1iLmRhdGEubmFtZSYmXCJyZWRvXCIhPWIuZGF0YS5uYW1lfHxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGI9YS5zY2F5dCxkPWImJmIuZ2V0U2NheXRMYW5nTGlzdCgpO2QmJmQubHRyJiZkLnJ0bCYmYi5maXJlKFwic3RhcnRTcGVsbENoZWNrLCBzdGFydEdyYW1tYXJDaGVja1wiKX0sMjUwKX0pO2Eub24oXCJyZWFkT25seVwiLGZ1bmN0aW9uKGIpe3ZhciBkO2ImJihkPWEuc2NheXQsITA9PT1iLmVkaXRvci5yZWFkT25seT9kJiZkLmZpcmUoXCJyZW1vdmVNYXJrdXBJbkRvY3VtZW50XCIse30pOmQ/ZC5maXJlKFwic3RhcnRTcGVsbENoZWNrLCBzdGFydEdyYW1tYXJDaGVja1wiKTpcInd5c2l3eWdcIj09Yi5lZGl0b3IubW9kZSYmITA9PT1jLnN0YXRlLnNjYXl0W2IuZWRpdG9yLm5hbWVdJiYoYy5jcmVhdGVTY2F5dChhKSxcbmIuZWRpdG9yLmZpcmUoXCJzY2F5dEJ1dHRvblN0YXRlXCIsQ0tFRElUT1IuVFJJU1RBVEVfT04pKSl9KTthLm9uKFwiYmVmb3JlRGVzdHJveVwiLGIpO2Eub24oXCJzZXREYXRhXCIsZnVuY3Rpb24oKXtiKCk7KGEuZWxlbWVudE1vZGU9PUNLRURJVE9SLkVMRU1FTlRfTU9ERV9JTkxJTkV8fGEucGx1Z2lucy5kaXZhcmVhKSYmZygpfSx0aGlzLG51bGwsNTApO2Eub24oXCJyZWxvYWRNYXJrdXBTY2F5dFwiLGZ1bmN0aW9uKGIpe3ZhciBkPWIuZGF0YSYmYi5kYXRhLnJlbW92ZU9wdGlvbnM7c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBiPWEuc2NheXQsYz1iJiZiLmdldFNjYXl0TGFuZ0xpc3QoKTtjJiZjLmx0ciYmYy5ydGwmJihhLmRvY3VtZW50LmZpcmUoXCJrZXlkb3duXCIsbmV3IENLRURJVE9SLmRvbS5ldmVudCh7a2V5Q29kZTozN30pKSxiLnJlbW92ZU1hcmt1cEluU2VsZWN0aW9uTm9kZShkKSxiLmZpcmUoXCJzdGFydFNwZWxsQ2hlY2ssIHN0YXJ0R3JhbW1hckNoZWNrXCIpKX0sYi5kYXRhJiZcbmIuZGF0YS50aW1lb3V0fHwwKX0pO2Eub24oXCJpbnNlcnRFbGVtZW50XCIsZnVuY3Rpb24oKXthLmZpcmUoXCJyZWxvYWRNYXJrdXBTY2F5dFwiLHtyZW1vdmVPcHRpb25zOntmb3JjZUJvb2ttYXJrOiEwfX0pfSx0aGlzLG51bGwsNTApO2Eub24oXCJpbnNlcnRIdG1sXCIsZnVuY3Rpb24oKXthLmZpcmUoXCJyZWxvYWRNYXJrdXBTY2F5dFwiKX0sdGhpcyxudWxsLDUwKTthLm9uKFwiaW5zZXJ0VGV4dFwiLGZ1bmN0aW9uKCl7YS5maXJlKFwicmVsb2FkTWFya3VwU2NheXRcIil9LHRoaXMsbnVsbCw1MCk7YS5vbihcInNjYXl0RGlhbG9nU2hvd25cIixmdW5jdGlvbihiKXtiLmRhdGEuc2VsZWN0UGFnZShhLnNjYXl0LnRhYlRvT3Blbil9KX0scGFyc2VDb25maWc6ZnVuY3Rpb24oYSl7dmFyIGM9Q0tFRElUT1IucGx1Z2lucy5zY2F5dDtjLnJlcGxhY2VPbGRPcHRpb25zTmFtZXMoYS5jb25maWcpO1wiYm9vbGVhblwiIT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X2F1dG9TdGFydHVwJiYoYS5jb25maWcuc2NheXRfYXV0b1N0YXJ0dXA9XG4hMSk7Yy5zdGF0ZS5zY2F5dFthLm5hbWVdPWEuY29uZmlnLnNjYXl0X2F1dG9TdGFydHVwO1wiYm9vbGVhblwiIT09dHlwZW9mIGEuY29uZmlnLmdyYXl0X2F1dG9TdGFydHVwJiYoYS5jb25maWcuZ3JheXRfYXV0b1N0YXJ0dXA9ITEpO1wiYm9vbGVhblwiIT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X2lubGluZU1vZGVJbW1lZGlhdGVNYXJrdXAmJihhLmNvbmZpZy5zY2F5dF9pbmxpbmVNb2RlSW1tZWRpYXRlTWFya3VwPSExKTtjLnN0YXRlLmdyYXl0W2EubmFtZV09YS5jb25maWcuZ3JheXRfYXV0b1N0YXJ0dXA7YS5jb25maWcuc2NheXRfY29udGV4dENvbW1hbmRzfHwoYS5jb25maWcuc2NheXRfY29udGV4dENvbW1hbmRzPVwiaWdub3JlfGlnbm9yZWFsbHxhZGRcIik7YS5jb25maWcuc2NheXRfY29udGV4dE1lbnVJdGVtc09yZGVyfHwoYS5jb25maWcuc2NheXRfY29udGV4dE1lbnVJdGVtc09yZGVyPVwic3VnZ2VzdHxtb3Jlc3VnZ2VzdHxjb250cm9sXCIpO2EuY29uZmlnLnNjYXl0X3NMYW5nfHxcbihhLmNvbmZpZy5zY2F5dF9zTGFuZz1cImVuX1VTXCIpO2lmKHZvaWQgMD09PWEuY29uZmlnLnNjYXl0X21heFN1Z2dlc3Rpb25zfHxcIm51bWJlclwiIT10eXBlb2YgYS5jb25maWcuc2NheXRfbWF4U3VnZ2VzdGlvbnN8fDA+YS5jb25maWcuc2NheXRfbWF4U3VnZ2VzdGlvbnMpYS5jb25maWcuc2NheXRfbWF4U3VnZ2VzdGlvbnM9NTtpZih2b2lkIDA9PT1hLmNvbmZpZy5zY2F5dF9taW5Xb3JkTGVuZ3RofHxcIm51bWJlclwiIT10eXBlb2YgYS5jb25maWcuc2NheXRfbWluV29yZExlbmd0aHx8MT5hLmNvbmZpZy5zY2F5dF9taW5Xb3JkTGVuZ3RoKWEuY29uZmlnLnNjYXl0X21pbldvcmRMZW5ndGg9NDtpZih2b2lkIDA9PT1hLmNvbmZpZy5zY2F5dF9jdXN0b21EaWN0aW9uYXJ5SWRzfHxcInN0cmluZ1wiIT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X2N1c3RvbURpY3Rpb25hcnlJZHMpYS5jb25maWcuc2NheXRfY3VzdG9tRGljdGlvbmFyeUlkcz1cIlwiO2lmKHZvaWQgMD09PWEuY29uZmlnLnNjYXl0X3VzZXJEaWN0aW9uYXJ5TmFtZXx8XG5cInN0cmluZ1wiIT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X3VzZXJEaWN0aW9uYXJ5TmFtZSlhLmNvbmZpZy5zY2F5dF91c2VyRGljdGlvbmFyeU5hbWU9bnVsbDtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X3VpVGFicyYmMz09PWEuY29uZmlnLnNjYXl0X3VpVGFicy5zcGxpdChcIixcIikubGVuZ3RoKXt2YXIgZD1bXSxiPVtdO2EuY29uZmlnLnNjYXl0X3VpVGFicz1hLmNvbmZpZy5zY2F5dF91aVRhYnMuc3BsaXQoXCIsXCIpO0NLRURJVE9SLnRvb2xzLnNlYXJjaChhLmNvbmZpZy5zY2F5dF91aVRhYnMsZnVuY3Rpb24oYSl7MT09PU51bWJlcihhKXx8MD09PU51bWJlcihhKT8oYi5wdXNoKCEwKSxkLnB1c2goTnVtYmVyKGEpKSk6Yi5wdXNoKCExKX0pO251bGw9PT1DS0VESVRPUi50b29scy5zZWFyY2goYiwhMSk/YS5jb25maWcuc2NheXRfdWlUYWJzPWQ6YS5jb25maWcuc2NheXRfdWlUYWJzPVsxLDEsMV19ZWxzZSBhLmNvbmZpZy5zY2F5dF91aVRhYnM9WzEsMSwxXTtcblwic3RyaW5nXCIhPXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9zZXJ2aWNlUHJvdG9jb2wmJihhLmNvbmZpZy5zY2F5dF9zZXJ2aWNlUHJvdG9jb2w9bnVsbCk7XCJzdHJpbmdcIiE9dHlwZW9mIGEuY29uZmlnLnNjYXl0X3NlcnZpY2VIb3N0JiYoYS5jb25maWcuc2NheXRfc2VydmljZUhvc3Q9bnVsbCk7XCJzdHJpbmdcIiE9dHlwZW9mIGEuY29uZmlnLnNjYXl0X3NlcnZpY2VQb3J0JiYoYS5jb25maWcuc2NheXRfc2VydmljZVBvcnQ9bnVsbCk7XCJzdHJpbmdcIiE9dHlwZW9mIGEuY29uZmlnLnNjYXl0X3NlcnZpY2VQYXRoJiYoYS5jb25maWcuc2NheXRfc2VydmljZVBhdGg9bnVsbCk7YS5jb25maWcuc2NheXRfbW9yZVN1Z2dlc3Rpb25zfHwoYS5jb25maWcuc2NheXRfbW9yZVN1Z2dlc3Rpb25zPVwib25cIik7XCJzdHJpbmdcIiE9PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9jdXN0b21lcklkJiYoYS5jb25maWcuc2NheXRfY3VzdG9tZXJJZD1cIjE6V3ZGMEQ0LVV0UHFOMS00M25rRDQtTkt2VW0yLWRhUXFrMy1MbU5pSS16N1lzYjQtbXdyeTI0LVQ4WXJTMy1RMnRwcTJcIik7XG5cInN0cmluZ1wiIT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X3NyY1VybCYmKGM9ZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wsYz0tMSE9Yy5zZWFyY2goL2h0dHBzPzovKT9jOlwiaHR0cDpcIixhLmNvbmZpZy5zY2F5dF9zcmNVcmw9YytcIi8vc3ZjLndlYnNwZWxsY2hlY2tlci5uZXQvc3BlbGxjaGVjazMxL2xmL3NjYXl0My9ja3NjYXl0L2Nrc2NheXQuanNcIik7XCJib29sZWFuXCIhPT10eXBlb2YgQ0tFRElUT1IuY29uZmlnLnNjYXl0X2hhbmRsZUNoZWNrRGlydHkmJihDS0VESVRPUi5jb25maWcuc2NheXRfaGFuZGxlQ2hlY2tEaXJ0eT0hMCk7XCJib29sZWFuXCIhPT10eXBlb2YgQ0tFRElUT1IuY29uZmlnLnNjYXl0X2hhbmRsZVVuZG9SZWRvJiYoQ0tFRElUT1IuY29uZmlnLnNjYXl0X2hhbmRsZVVuZG9SZWRvPSEwKTtDS0VESVRPUi5jb25maWcuc2NheXRfaGFuZGxlVW5kb1JlZG89Q0tFRElUT1IucGx1Z2lucy51bmRvP0NLRURJVE9SLmNvbmZpZy5zY2F5dF9oYW5kbGVVbmRvUmVkbzohMTtcblwiYm9vbGVhblwiIT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X211bHRpTGFuZ3VhZ2VNb2RlJiYoYS5jb25maWcuc2NheXRfbXVsdGlMYW5ndWFnZU1vZGU9ITEpO1wib2JqZWN0XCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfbXVsdGlMYW5ndWFnZVN0eWxlcyYmKGEuY29uZmlnLnNjYXl0X211bHRpTGFuZ3VhZ2VTdHlsZXM9e30pO2EuY29uZmlnLnNjYXl0X2lnbm9yZUFsbENhcHNXb3JkcyYmXCJib29sZWFuXCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfaWdub3JlQWxsQ2Fwc1dvcmRzJiYoYS5jb25maWcuc2NheXRfaWdub3JlQWxsQ2Fwc1dvcmRzPSExKTthLmNvbmZpZy5zY2F5dF9pZ25vcmVEb21haW5OYW1lcyYmXCJib29sZWFuXCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfaWdub3JlRG9tYWluTmFtZXMmJihhLmNvbmZpZy5zY2F5dF9pZ25vcmVEb21haW5OYW1lcz0hMSk7YS5jb25maWcuc2NheXRfaWdub3JlV29yZHNXaXRoTWl4ZWRDYXNlcyYmXCJib29sZWFuXCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfaWdub3JlV29yZHNXaXRoTWl4ZWRDYXNlcyYmXG4oYS5jb25maWcuc2NheXRfaWdub3JlV29yZHNXaXRoTWl4ZWRDYXNlcz0hMSk7YS5jb25maWcuc2NheXRfaWdub3JlV29yZHNXaXRoTnVtYmVycyYmXCJib29sZWFuXCIhPT10eXBlb2YgYS5jb25maWcuc2NheXRfaWdub3JlV29yZHNXaXRoTnVtYmVycyYmKGEuY29uZmlnLnNjYXl0X2lnbm9yZVdvcmRzV2l0aE51bWJlcnM9ITEpO2lmKGEuY29uZmlnLnNjYXl0X2Rpc2FibGVPcHRpb25zU3RvcmFnZSl7dmFyIGM9Q0tFRElUT1IudG9vbHMuaXNBcnJheShhLmNvbmZpZy5zY2F5dF9kaXNhYmxlT3B0aW9uc1N0b3JhZ2UpP2EuY29uZmlnLnNjYXl0X2Rpc2FibGVPcHRpb25zU3RvcmFnZTpcInN0cmluZ1wiPT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X2Rpc2FibGVPcHRpb25zU3RvcmFnZT9bYS5jb25maWcuc2NheXRfZGlzYWJsZU9wdGlvbnNTdG9yYWdlXTp2b2lkIDAsZT1cImFsbCBvcHRpb25zIGxhbmcgaWdub3JlLWFsbC1jYXBzLXdvcmRzIGlnbm9yZS1kb21haW4tbmFtZXMgaWdub3JlLXdvcmRzLXdpdGgtbWl4ZWQtY2FzZXMgaWdub3JlLXdvcmRzLXdpdGgtbnVtYmVyc1wiLnNwbGl0KFwiIFwiKSxcbmY9W1wibGFuZ1wiLFwiaWdub3JlLWFsbC1jYXBzLXdvcmRzXCIsXCJpZ25vcmUtZG9tYWluLW5hbWVzXCIsXCJpZ25vcmUtd29yZHMtd2l0aC1taXhlZC1jYXNlc1wiLFwiaWdub3JlLXdvcmRzLXdpdGgtbnVtYmVyc1wiXSxnPUNLRURJVE9SLnRvb2xzLnNlYXJjaCxoPUNLRURJVE9SLnRvb2xzLmluZGV4T2Y7YS5jb25maWcuc2NheXRfZGlzYWJsZU9wdGlvbnNTdG9yYWdlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxkPTA7ZDxhLmxlbmd0aDtkKyspe3ZhciBjPWFbZF0sbT0hIWcoYSxcIm9wdGlvbnNcIik7aWYoIWcoZSxjKXx8bSYmZyhmLGZ1bmN0aW9uKGEpe2lmKFwibGFuZ1wiPT09YSlyZXR1cm4hMX0pKXJldHVybjtnKGYsYykmJmYuc3BsaWNlKGgoZixjKSwxKTtpZihcImFsbFwiPT09Y3x8bSYmZyhhLFwibGFuZ1wiKSlyZXR1cm5bXTtcIm9wdGlvbnNcIj09PWMmJihmPVtcImxhbmdcIl0pfXJldHVybiBiPWIuY29uY2F0KGYpfShjKX19LGFkZFJ1bGU6ZnVuY3Rpb24oYSl7dmFyIGM9Q0tFRElUT1IucGx1Z2lucy5zY2F5dCxcbmQ9YS5kYXRhUHJvY2Vzc29yLGI9ZCYmZC5odG1sRmlsdGVyLGU9YS5fLmVsZW1lbnRzUGF0aCYmYS5fLmVsZW1lbnRzUGF0aC5maWx0ZXJzLGQ9ZCYmZC5kYXRhRmlsdGVyLGY9YS5hZGRSZW1vdmVGb3JtYXRGaWx0ZXIsZz1mdW5jdGlvbihiKXtpZihhLnNjYXl0JiYoYi5oYXNBdHRyaWJ1dGUoYy5vcHRpb25zLmRhdGFfYXR0cmlidXRlX25hbWUpfHxiLmhhc0F0dHJpYnV0ZShjLm9wdGlvbnMucHJvYmxlbV9ncmFtbWFyX2RhdGFfYXR0cmlidXRlKSkpcmV0dXJuITF9LGg9ZnVuY3Rpb24oYil7dmFyIGQ9ITA7YS5zY2F5dCYmKGIuaGFzQXR0cmlidXRlKGMub3B0aW9ucy5kYXRhX2F0dHJpYnV0ZV9uYW1lKXx8Yi5oYXNBdHRyaWJ1dGUoYy5vcHRpb25zLnByb2JsZW1fZ3JhbW1hcl9kYXRhX2F0dHJpYnV0ZSkpJiYoZD0hMSk7cmV0dXJuIGR9O2UmJmUucHVzaChnKTtkJiZkLmFkZFJ1bGVzKHtlbGVtZW50czp7c3BhbjpmdW5jdGlvbihhKXt2YXIgYj1hLmhhc0NsYXNzKGMub3B0aW9ucy5taXNzcGVsbGVkX3dvcmRfY2xhc3MpJiZcbmEuYXR0cmlidXRlc1tjLm9wdGlvbnMuZGF0YV9hdHRyaWJ1dGVfbmFtZV0sZD1hLmhhc0NsYXNzKGMub3B0aW9ucy5wcm9ibGVtX2dyYW1tYXJfY2xhc3MpJiZhLmF0dHJpYnV0ZXNbYy5vcHRpb25zLnByb2JsZW1fZ3JhbW1hcl9kYXRhX2F0dHJpYnV0ZV07YyYmKGJ8fGQpJiZkZWxldGUgYS5uYW1lO3JldHVybiBhfX19KTtiJiZiLmFkZFJ1bGVzKHtlbGVtZW50czp7c3BhbjpmdW5jdGlvbihhKXt2YXIgYj1hLmhhc0NsYXNzKGMub3B0aW9ucy5taXNzcGVsbGVkX3dvcmRfY2xhc3MpJiZhLmF0dHJpYnV0ZXNbYy5vcHRpb25zLmRhdGFfYXR0cmlidXRlX25hbWVdLGQ9YS5oYXNDbGFzcyhjLm9wdGlvbnMucHJvYmxlbV9ncmFtbWFyX2NsYXNzKSYmYS5hdHRyaWJ1dGVzW2Mub3B0aW9ucy5wcm9ibGVtX2dyYW1tYXJfZGF0YV9hdHRyaWJ1dGVdO2MmJihifHxkKSYmZGVsZXRlIGEubmFtZTtyZXR1cm4gYX19fSk7ZiYmZi5jYWxsKGEsaCl9LHNjYXl0TWVudURlZmluaXRpb246ZnVuY3Rpb24oYSl7dmFyIGM9XG50aGlzO2E9YS5zY2F5dDtyZXR1cm57c2NheXQ6e3NjYXl0X2lnbm9yZTp7bGFiZWw6YS5nZXRMb2NhbChcImJ0bl9pZ25vcmVcIiksZ3JvdXA6XCJzY2F5dF9jb250cm9sXCIsb3JkZXI6MSxleGVjOmZ1bmN0aW9uKGEpe2Euc2NheXQuaWdub3JlV29yZCgpfX0sc2NheXRfaWdub3JlYWxsOntsYWJlbDphLmdldExvY2FsKFwiYnRuX2lnbm9yZUFsbFwiKSxncm91cDpcInNjYXl0X2NvbnRyb2xcIixvcmRlcjoyLGV4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC5pZ25vcmVBbGxXb3JkcygpfX0sc2NheXRfYWRkOntsYWJlbDphLmdldExvY2FsKFwiYnRuX2FkZFdvcmRcIiksZ3JvdXA6XCJzY2F5dF9jb250cm9sXCIsb3JkZXI6MyxleGVjOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc2NheXQ7c2V0VGltZW91dChmdW5jdGlvbigpe2IuYWRkV29yZFRvVXNlckRpY3Rpb25hcnkoKX0sMTApfX0sc2NheXRfb3B0aW9uOntsYWJlbDphLmdldExvY2FsKFwiYnRuX29wdGlvbnNcIiksZ3JvdXA6XCJzY2F5dF9jb250cm9sXCIsb3JkZXI6NCxcbmV4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC50YWJUb09wZW49XCJvcHRpb25zXCI7YS5sb2NrU2VsZWN0aW9uKCk7YS5vcGVuRGlhbG9nKGMuZGlhbG9nTmFtZSl9LHZlcmlmaWNhdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gMT09YS5jb25maWcuc2NheXRfdWlUYWJzWzBdPyEwOiExfX0sc2NheXRfbGFuZ3VhZ2U6e2xhYmVsOmEuZ2V0TG9jYWwoXCJidG5fbGFuZ3NcIiksZ3JvdXA6XCJzY2F5dF9jb250cm9sXCIsb3JkZXI6NSxleGVjOmZ1bmN0aW9uKGEpe2Euc2NheXQudGFiVG9PcGVuPVwibGFuZ3NcIjthLmxvY2tTZWxlY3Rpb24oKTthLm9wZW5EaWFsb2coYy5kaWFsb2dOYW1lKX0sdmVyaWZpY2F0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiAxPT1hLmNvbmZpZy5zY2F5dF91aVRhYnNbMV0/ITA6ITF9fSxzY2F5dF9kaWN0aW9uYXJ5OntsYWJlbDphLmdldExvY2FsKFwiYnRuX2RpY3Rpb25hcmllc1wiKSxncm91cDpcInNjYXl0X2NvbnRyb2xcIixvcmRlcjo2LGV4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC50YWJUb09wZW49XG5cImRpY3Rpb25hcmllc1wiO2EubG9ja1NlbGVjdGlvbigpO2Eub3BlbkRpYWxvZyhjLmRpYWxvZ05hbWUpfSx2ZXJpZmljYXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIDE9PWEuY29uZmlnLnNjYXl0X3VpVGFic1syXT8hMDohMX19LHNjYXl0X2Fib3V0OntsYWJlbDphLmdldExvY2FsKFwiYnRuX2Fib3V0XCIpLGdyb3VwOlwic2NheXRfY29udHJvbFwiLG9yZGVyOjcsZXhlYzpmdW5jdGlvbihhKXthLnNjYXl0LnRhYlRvT3Blbj1cImFib3V0XCI7YS5sb2NrU2VsZWN0aW9uKCk7YS5vcGVuRGlhbG9nKGMuZGlhbG9nTmFtZSl9fX0sZ3JheXQ6e2dyYXl0X3Byb2JsZW1kZXNjcmlwdGlvbjp7bGFiZWw6XCJHcmFtbWFyIHByb2JsZW0gZGVzY3JpcHRpb25cIixncm91cDpcImdyYXl0X2Rlc2NyaXB0aW9uXCIsb3JkZXI6MSxzdGF0ZTpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCxleGVjOmZ1bmN0aW9uKGEpe319LGdyYXl0X2lnbm9yZTp7bGFiZWw6YS5nZXRMb2NhbChcImJ0bl9pZ25vcmVcIiksZ3JvdXA6XCJncmF5dF9jb250cm9sXCIsXG5vcmRlcjoyLGV4ZWM6ZnVuY3Rpb24oYSl7YS5zY2F5dC5pZ25vcmVQaHJhc2UoKX19fX19LGJ1aWxkU3VnZ2VzdGlvbk1lbnVJdGVtczpmdW5jdGlvbihhLGMsZCl7dmFyIGI9e30sZT17fSxmPWQ/XCJ3b3JkXCI6XCJwaHJhc2VcIixnPWQ/XCJzdGFydEdyYW1tYXJDaGVja1wiOlwic3RhcnRTcGVsbENoZWNrXCIsaD1hLnNjYXl0O2lmKDA8Yy5sZW5ndGgmJlwibm9fYW55X3N1Z2dlc3Rpb25zXCIhPT1jWzBdKWlmKGQpZm9yKGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGs9XCJzY2F5dF9zdWdnZXN0X1wiK0NLRURJVE9SLnBsdWdpbnMuc2NheXQuc3VnZ2VzdGlvbnNbZF0ucmVwbGFjZShcIiBcIixcIl9cIik7YS5hZGRDb21tYW5kKGssdGhpcy5jcmVhdGVDb21tYW5kKENLRURJVE9SLnBsdWdpbnMuc2NheXQuc3VnZ2VzdGlvbnNbZF0sZixnKSk7ZDxhLmNvbmZpZy5zY2F5dF9tYXhTdWdnZXN0aW9ucz8oYS5hZGRNZW51SXRlbShrLHtsYWJlbDpjW2RdLGNvbW1hbmQ6ayxncm91cDpcInNjYXl0X3N1Z2dlc3RcIixcbm9yZGVyOmQrMX0pLGJba109Q0tFRElUT1IuVFJJU1RBVEVfT0ZGKTooYS5hZGRNZW51SXRlbShrLHtsYWJlbDpjW2RdLGNvbW1hbmQ6ayxncm91cDpcInNjYXl0X21vcmVzdWdnZXN0XCIsb3JkZXI6ZCsxfSksZVtrXT1DS0VESVRPUi5UUklTVEFURV9PRkYsXCJvblwiPT09YS5jb25maWcuc2NheXRfbW9yZVN1Z2dlc3Rpb25zJiYoYS5hZGRNZW51SXRlbShcInNjYXl0X21vcmVzdWdnZXN0XCIse2xhYmVsOmguZ2V0TG9jYWwoXCJidG5fbW9yZVN1Z2dlc3Rpb25zXCIpLGdyb3VwOlwic2NheXRfbW9yZXN1Z2dlc3RcIixvcmRlcjoxMCxnZXRJdGVtczpmdW5jdGlvbigpe3JldHVybiBlfX0pLGIuc2NheXRfbW9yZXN1Z2dlc3Q9Q0tFRElUT1IuVFJJU1RBVEVfT0ZGKSl9ZWxzZSBmb3IoZD0wO2Q8Yy5sZW5ndGg7ZCsrKWs9XCJncmF5dF9zdWdnZXN0X1wiK0NLRURJVE9SLnBsdWdpbnMuc2NheXQuc3VnZ2VzdGlvbnNbZF0ucmVwbGFjZShcIiBcIixcIl9cIiksYS5hZGRDb21tYW5kKGssdGhpcy5jcmVhdGVDb21tYW5kKENLRURJVE9SLnBsdWdpbnMuc2NheXQuc3VnZ2VzdGlvbnNbZF0sXG5mLGcpKSxhLmFkZE1lbnVJdGVtKGsse2xhYmVsOmNbZF0sY29tbWFuZDprLGdyb3VwOlwiZ3JheXRfc3VnZ2VzdFwiLG9yZGVyOmQrMX0pLGJba109Q0tFRElUT1IuVFJJU1RBVEVfT0ZGO2Vsc2UgYi5ub19zY2F5dF9zdWdnZXN0PUNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELGEuYWRkQ29tbWFuZChcIm5vX3NjYXl0X3N1Z2dlc3RcIix7ZXhlYzpmdW5jdGlvbigpe319KSxhLmFkZE1lbnVJdGVtKFwibm9fc2NheXRfc3VnZ2VzdFwiLHtsYWJlbDpoLmdldExvY2FsKFwiYnRuX25vU3VnZ2VzdGlvbnNcIil8fFwibm9fc2NheXRfc3VnZ2VzdFwiLGNvbW1hbmQ6XCJub19zY2F5dF9zdWdnZXN0XCIsZ3JvdXA6XCJzY2F5dF9zdWdnZXN0XCIsb3JkZXI6MH0pO3JldHVybiBifSxtZW51R2VuZXJhdG9yOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9YS5zY2F5dCxiPXRoaXMuc2NheXRNZW51RGVmaW5pdGlvbihhKSxlPXt9LGY9YS5jb25maWcuc2NheXRfY29udGV4dENvbW1hbmRzLnNwbGl0KFwifFwiKSxnPWMuZ2V0QXR0cmlidXRlKGQuZ2V0TGFuZ0F0dHJpYnV0ZSgpKXx8XG5kLmdldExhbmcoKSxoLGs7aD1kLmlzU2NheXROb2RlKGMpO2s9ZC5pc0dyYXl0Tm9kZShjKTtoPyhiPWIuc2NheXQsZT1jLmdldEF0dHJpYnV0ZShkLmdldFNjYXl0Tm9kZUF0dHJpYnV0ZU5hbWUoKSksZC5maXJlKFwiZ2V0U3VnZ2VzdGlvbnNMaXN0XCIse2xhbmc6Zyx3b3JkOmV9KSxlPXRoaXMuYnVpbGRTdWdnZXN0aW9uTWVudUl0ZW1zKGEsQ0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdWdnZXN0aW9ucyxoKSk6ayYmKGI9Yi5ncmF5dCxlPWMuZ2V0QXR0cmlidXRlKGQuZ2V0R3JheXROb2RlQXR0cmlidXRlTmFtZSgpKSxrPWQuZ2V0UHJvYmxlbURlc2NyaXB0aW9uVGV4dChlLGcpLGIuZ3JheXRfcHJvYmxlbWRlc2NyaXB0aW9uJiZrJiYoYi5ncmF5dF9wcm9ibGVtZGVzY3JpcHRpb24ubGFiZWw9ayksZC5maXJlKFwiZ2V0R3JhbW1hclN1Z2dlc3Rpb25zTGlzdFwiLHtsYW5nOmcscGhyYXNlOmV9KSxlPXRoaXMuYnVpbGRTdWdnZXN0aW9uTWVudUl0ZW1zKGEsQ0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdWdnZXN0aW9ucyxcbmgpKTtpZihoJiZcIm9mZlwiPT1hLmNvbmZpZy5zY2F5dF9jb250ZXh0Q29tbWFuZHMpcmV0dXJuIGU7Zm9yKHZhciBsIGluIGIpaCYmLTE9PUNLRURJVE9SLnRvb2xzLmluZGV4T2YoZixsLnJlcGxhY2UoXCJzY2F5dF9cIixcIlwiKSkmJlwiYWxsXCIhPWEuY29uZmlnLnNjYXl0X2NvbnRleHRDb21tYW5kc3x8KGVbbF09XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGJbbF0uc3RhdGU/YltsXS5zdGF0ZTpDS0VESVRPUi5UUklTVEFURV9PRkYsXCJmdW5jdGlvblwiIT09dHlwZW9mIGJbbF0udmVyaWZpY2F0aW9ufHxiW2xdLnZlcmlmaWNhdGlvbihhKXx8ZGVsZXRlIGVbbF0sYS5hZGRDb21tYW5kKGwse2V4ZWM6YltsXS5leGVjfSksYS5hZGRNZW51SXRlbShsLHtsYWJlbDphLmxhbmcuc2NheXRbYltsXS5sYWJlbF18fGJbbF0ubGFiZWwsY29tbWFuZDpsLGdyb3VwOmJbbF0uZ3JvdXAsb3JkZXI6YltsXS5vcmRlcn0pKTtyZXR1cm4gZX0sY3JlYXRlQ29tbWFuZDpmdW5jdGlvbihhLGMsZCl7cmV0dXJue2V4ZWM6ZnVuY3Rpb24oYil7Yj1cbmIuc2NheXQ7dmFyIGU9e307ZVtjXT1hO2IucmVwbGFjZVNlbGVjdGlvbk5vZGUoZSk7XCJzdGFydEdyYW1tYXJDaGVja1wiPT09ZCYmYi5yZW1vdmVNYXJrdXBJblNlbGVjdGlvbk5vZGUoe2dyYW1tYXJPbmx5OiEwfSk7Yi5maXJlKGQpfX19fSk7XG5DS0VESVRPUi5wbHVnaW5zLnNjYXl0PXtzdGF0ZTp7c2NheXQ6e30sZ3JheXQ6e319LHN1Z2dlc3Rpb25zOltdLGxvYWRpbmdIZWxwZXI6e2xvYWRPcmRlcjpbXX0saXNMb2FkaW5nOiExLG9wdGlvbnM6e2Rpc2FibGluZ0NvbW1hbmRFeGVjOntzb3VyY2U6ITAsbmV3cGFnZTohMCx0ZW1wbGF0ZXM6ITB9LGRhdGFfYXR0cmlidXRlX25hbWU6XCJkYXRhLXNjYXl0LXdvcmRcIixtaXNzcGVsbGVkX3dvcmRfY2xhc3M6XCJzY2F5dC1taXNzcGVsbC13b3JkXCIscHJvYmxlbV9ncmFtbWFyX2RhdGFfYXR0cmlidXRlOlwiZGF0YS1ncmF5dC1waHJhc2VcIixwcm9ibGVtX2dyYW1tYXJfY2xhc3M6XCJncmFtbS1wcm9ibGVtXCJ9LGJhY2tDb21wYXRpYmlsaXR5TWFwOntzY2F5dF9zZXJ2aWNlX3Byb3RvY29sOlwic2NheXRfc2VydmljZVByb3RvY29sXCIsc2NheXRfc2VydmljZV9ob3N0Olwic2NheXRfc2VydmljZUhvc3RcIixzY2F5dF9zZXJ2aWNlX3BvcnQ6XCJzY2F5dF9zZXJ2aWNlUG9ydFwiLHNjYXl0X3NlcnZpY2VfcGF0aDpcInNjYXl0X3NlcnZpY2VQYXRoXCIsXG5zY2F5dF9jdXN0b21lcmlkOlwic2NheXRfY3VzdG9tZXJJZFwifSxyZXBsYWNlT2xkT3B0aW9uc05hbWVzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyBpbiBhKWMgaW4gdGhpcy5iYWNrQ29tcGF0aWJpbGl0eU1hcCYmKGFbdGhpcy5iYWNrQ29tcGF0aWJpbGl0eU1hcFtjXV09YVtjXSxkZWxldGUgYVtjXSl9LGNyZWF0ZVNjYXl0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsZD1DS0VESVRPUi5wbHVnaW5zLnNjYXl0O3RoaXMubG9hZFNjYXl0TGlicmFyeShhLGZ1bmN0aW9uKGEpe3ZhciBlPWEud2luZG93JiZhLndpbmRvdy5nZXRGcmFtZSgpfHxhLmVkaXRhYmxlKCk7ZT8oZT17bGFuZzphLmNvbmZpZy5zY2F5dF9zTGFuZyxjb250YWluZXI6ZS4kLGN1c3RvbURpY3Rpb25hcnk6YS5jb25maWcuc2NheXRfY3VzdG9tRGljdGlvbmFyeUlkcyx1c2VyRGljdGlvbmFyeU5hbWU6YS5jb25maWcuc2NheXRfdXNlckRpY3Rpb25hcnlOYW1lLGxvY2FsaXphdGlvbjphLmxhbmdDb2RlLGN1c3RvbWVyX2lkOmEuY29uZmlnLnNjYXl0X2N1c3RvbWVySWQsXG5kZWJ1ZzphLmNvbmZpZy5zY2F5dF9kZWJ1ZyxkYXRhX2F0dHJpYnV0ZV9uYW1lOmMub3B0aW9ucy5kYXRhX2F0dHJpYnV0ZV9uYW1lLG1pc3NwZWxsZWRfd29yZF9jbGFzczpjLm9wdGlvbnMubWlzc3BlbGxlZF93b3JkX2NsYXNzLHByb2JsZW1fZ3JhbW1hcl9kYXRhX2F0dHJpYnV0ZTpjLm9wdGlvbnMucHJvYmxlbV9ncmFtbWFyX2RhdGFfYXR0cmlidXRlLHByb2JsZW1fZ3JhbW1hcl9jbGFzczpjLm9wdGlvbnMucHJvYmxlbV9ncmFtbWFyX2NsYXNzLFwib3B0aW9ucy10by1yZXN0b3JlXCI6YS5jb25maWcuc2NheXRfZGlzYWJsZU9wdGlvbnNTdG9yYWdlLGZvY3VzZWQ6YS5lZGl0YWJsZSgpLmhhc0ZvY3VzLGlnbm9yZUVsZW1lbnRzUmVnZXg6YS5jb25maWcuc2NheXRfZWxlbWVudHNUb0lnbm9yZSxtaW5Xb3JkTGVuZ3RoOmEuY29uZmlnLnNjYXl0X21pbldvcmRMZW5ndGgsbXVsdGlMYW5ndWFnZU1vZGU6YS5jb25maWcuc2NheXRfbXVsdGlMYW5ndWFnZU1vZGUsbXVsdGlMYW5ndWFnZVN0eWxlczphLmNvbmZpZy5zY2F5dF9tdWx0aUxhbmd1YWdlU3R5bGVzLFxuZ3JheXRBdXRvU3RhcnR1cDpkLnN0YXRlLmdyYXl0W2EubmFtZV19LGEuY29uZmlnLnNjYXl0X3NlcnZpY2VQcm90b2NvbCYmKGUuc2VydmljZV9wcm90b2NvbD1hLmNvbmZpZy5zY2F5dF9zZXJ2aWNlUHJvdG9jb2wpLGEuY29uZmlnLnNjYXl0X3NlcnZpY2VIb3N0JiYoZS5zZXJ2aWNlX2hvc3Q9YS5jb25maWcuc2NheXRfc2VydmljZUhvc3QpLGEuY29uZmlnLnNjYXl0X3NlcnZpY2VQb3J0JiYoZS5zZXJ2aWNlX3BvcnQ9YS5jb25maWcuc2NheXRfc2VydmljZVBvcnQpLGEuY29uZmlnLnNjYXl0X3NlcnZpY2VQYXRoJiYoZS5zZXJ2aWNlX3BhdGg9YS5jb25maWcuc2NheXRfc2VydmljZVBhdGgpLFwiYm9vbGVhblwiPT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X2lnbm9yZUFsbENhcHNXb3JkcyYmKGVbXCJpZ25vcmUtYWxsLWNhcHMtd29yZHNcIl09YS5jb25maWcuc2NheXRfaWdub3JlQWxsQ2Fwc1dvcmRzKSxcImJvb2xlYW5cIj09PXR5cGVvZiBhLmNvbmZpZy5zY2F5dF9pZ25vcmVEb21haW5OYW1lcyYmXG4oZVtcImlnbm9yZS1kb21haW4tbmFtZXNcIl09YS5jb25maWcuc2NheXRfaWdub3JlRG9tYWluTmFtZXMpLFwiYm9vbGVhblwiPT09dHlwZW9mIGEuY29uZmlnLnNjYXl0X2lnbm9yZVdvcmRzV2l0aE1peGVkQ2FzZXMmJihlW1wiaWdub3JlLXdvcmRzLXdpdGgtbWl4ZWQtY2FzZXNcIl09YS5jb25maWcuc2NheXRfaWdub3JlV29yZHNXaXRoTWl4ZWRDYXNlcyksXCJib29sZWFuXCI9PT10eXBlb2YgYS5jb25maWcuc2NheXRfaWdub3JlV29yZHNXaXRoTnVtYmVycyYmKGVbXCJpZ25vcmUtd29yZHMtd2l0aC1udW1iZXJzXCJdPWEuY29uZmlnLnNjYXl0X2lnbm9yZVdvcmRzV2l0aE51bWJlcnMpLGU9bmV3IFNDQVlULkNLU0NBWVQoZSxmdW5jdGlvbigpe30sZnVuY3Rpb24oKXt9KSxlLnN1YnNjcmliZShcInN1Z2dlc3Rpb25MaXN0U2VuZFwiLGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj17fSxkPVtdLGM9MDtjPGEuc3VnZ2VzdGlvbkxpc3QubGVuZ3RoO2MrKyliW1wid29yZF9cIithLnN1Z2dlc3Rpb25MaXN0W2NdXXx8XG4oYltcIndvcmRfXCIrYS5zdWdnZXN0aW9uTGlzdFtjXV09YS5zdWdnZXN0aW9uTGlzdFtjXSxkLnB1c2goYS5zdWdnZXN0aW9uTGlzdFtjXSkpO0NLRURJVE9SLnBsdWdpbnMuc2NheXQuc3VnZ2VzdGlvbnM9ZH0pLGUuc3Vic2NyaWJlKFwic2VsZWN0aW9uSXNDaGFuZ2VkXCIsZnVuY3Rpb24oZCl7YS5nZXRTZWxlY3Rpb24oKS5pc0xvY2tlZCYmYS5sb2NrU2VsZWN0aW9uKCl9KSxlLnN1YnNjcmliZShcImdyYXl0U3RhdGVDaGFuZ2VkXCIsZnVuY3Rpb24oYyl7ZC5zdGF0ZS5ncmF5dFthLm5hbWVdPWMuc3RhdGV9KSxhLnNjYXl0PWUsYS5maXJlKFwic2NheXRCdXR0b25TdGF0ZVwiLGEucmVhZE9ubHk/Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQ6Q0tFRElUT1IuVFJJU1RBVEVfT04pKTpkLnN0YXRlLnNjYXl0W2EubmFtZV09ITF9KX0sZGVzdHJveTpmdW5jdGlvbihhKXthLnNjYXl0JiZhLnNjYXl0LmRlc3Ryb3koKTtkZWxldGUgYS5zY2F5dDthLmZpcmUoXCJzY2F5dEJ1dHRvblN0YXRlXCIsXG5DS0VESVRPUi5UUklTVEFURV9PRkYpfSxsb2FkU2NheXRMaWJyYXJ5OmZ1bmN0aW9uKGEsYyl7dmFyIGQ9dGhpcyxiLGU7dGhpcy5sb2FkaW5nSGVscGVyW2EubmFtZV18fChcInVuZGVmaW5lZFwiPT09dHlwZW9mIHdpbmRvdy5TQ0FZVHx8XCJmdW5jdGlvblwiIT09dHlwZW9mIHdpbmRvdy5TQ0FZVC5DS1NDQVlUPyh0aGlzLmxvYWRpbmdIZWxwZXJbYS5uYW1lXT1jLHRoaXMubG9hZGluZ0hlbHBlci5sb2FkT3JkZXIucHVzaChhLm5hbWUpLGI9bmV3IERhdGUsYj1iLmdldFRpbWUoKSxlPWEuY29uZmlnLnNjYXl0X3NyY1VybCxlKz0wPD1lLmluZGV4T2YoXCI/XCIpP1wiXCI6XCI/XCIrYix0aGlzLmxvYWRpbmdIZWxwZXIuY2tzY2F5dExvYWRpbmd8fChDS0VESVRPUi5zY3JpcHRMb2FkZXIubG9hZChlLGZ1bmN0aW9uKGEpe2lmKGEpe0NLRURJVE9SLmZpcmVPbmNlKFwic2NheXRSZWFkeVwiKTtmb3IodmFyIGI9MDtiPGQubG9hZGluZ0hlbHBlci5sb2FkT3JkZXIubGVuZ3RoO2IrKyl7YT1kLmxvYWRpbmdIZWxwZXIubG9hZE9yZGVyW2JdO1xuaWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGQubG9hZGluZ0hlbHBlclthXSlkLmxvYWRpbmdIZWxwZXJbYV0oQ0tFRElUT1IuaW5zdGFuY2VzW2FdKTtkZWxldGUgZC5sb2FkaW5nSGVscGVyW2FdfWQubG9hZGluZ0hlbHBlci5sb2FkT3JkZXI9W119fSksdGhpcy5sb2FkaW5nSGVscGVyLmNrc2NheXRMb2FkaW5nPSEwKSk6d2luZG93LlNDQVlUJiZcImZ1bmN0aW9uXCI9PT10eXBlb2Ygd2luZG93LlNDQVlULkNLU0NBWVQmJihDS0VESVRPUi5maXJlT25jZShcInNjYXl0UmVhZHlcIiksYS5zY2F5dHx8XCJmdW5jdGlvblwiPT09dHlwZW9mIGMmJmMoYSkpKX19O1xuQ0tFRElUT1Iub24oXCJkaWFsb2dEZWZpbml0aW9uXCIsZnVuY3Rpb24oYSl7dmFyIGM9YS5kYXRhLm5hbWU7YT1hLmRhdGEuZGVmaW5pdGlvbi5kaWFsb2c7aWYoXCJzY2F5dERpYWxvZ1wiPT09YylhLm9uKFwiY2FuY2VsXCIsZnVuY3Rpb24oYSl7cmV0dXJuITF9LHRoaXMsbnVsbCwtMSk7aWYoXCJjaGVja3NwZWxsXCI9PT1jKWEub24oXCJjYW5jZWxcIixmdW5jdGlvbihhKXthPWEuc2VuZGVyJiZhLnNlbmRlci5nZXRQYXJlbnRFZGl0b3IoKTt2YXIgYj1DS0VESVRPUi5wbHVnaW5zLnNjYXl0LGM9YS5zY2F5dDtjJiZiLnN0YXRlLnNjYXl0W2EubmFtZV0mJmMuc2V0TWFya3VwUGF1c2VkJiZjLnNldE1hcmt1cFBhdXNlZCghMSk7YS51bmxvY2tTZWxlY3Rpb24oKX0sdGhpcyxudWxsLC0yKTtpZihcImxpbmtcIj09PWMpYS5vbihcIm9rXCIsZnVuY3Rpb24oYSl7dmFyIGI9YS5zZW5kZXImJmEuc2VuZGVyLmdldFBhcmVudEVkaXRvcigpO2ImJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmZpcmUoXCJyZWxvYWRNYXJrdXBTY2F5dFwiLFxue3JlbW92ZU9wdGlvbnM6e3JlbW92ZUluc2lkZTohMCxmb3JjZUJvb2ttYXJrOiEwfSx0aW1lb3V0OjB9KX0sMCl9KX0pO1xuQ0tFRElUT1Iub24oXCJzY2F5dFJlYWR5XCIsZnVuY3Rpb24oKXtpZighMD09PUNLRURJVE9SLmNvbmZpZy5zY2F5dF9oYW5kbGVDaGVja0RpcnR5KXt2YXIgYT1DS0VESVRPUi5lZGl0b3IucHJvdG90eXBlO2EuY2hlY2tEaXJ0eT1DS0VESVRPUi50b29scy5vdmVycmlkZShhLmNoZWNrRGlydHksZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9bnVsbCxjPXRoaXMuc2NheXQ7aWYoQ0tFRElUT1IucGx1Z2lucy5zY2F5dCYmQ0tFRElUT1IucGx1Z2lucy5zY2F5dC5zdGF0ZS5zY2F5dFt0aGlzLm5hbWVdJiZ0aGlzLnNjYXl0KXtpZihiPVwicmVhZHlcIj09dGhpcy5zdGF0dXMpdmFyIGY9Yy5yZW1vdmVNYXJrdXBGcm9tU3RyaW5nKHRoaXMuZ2V0U25hcHNob3QoKSksYz1jLnJlbW92ZU1hcmt1cEZyb21TdHJpbmcodGhpcy5fLnByZXZpb3VzVmFsdWUpLGI9YiYmYyE9PWZ9ZWxzZSBiPWEuY2FsbCh0aGlzKTtyZXR1cm4gYn19KTthLnJlc2V0RGlydHk9Q0tFRElUT1IudG9vbHMub3ZlcnJpZGUoYS5yZXNldERpcnR5LFxuZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5zY2F5dDtDS0VESVRPUi5wbHVnaW5zLnNjYXl0JiZDS0VESVRPUi5wbHVnaW5zLnNjYXl0LnN0YXRlLnNjYXl0W3RoaXMubmFtZV0mJnRoaXMuc2NheXQ/dGhpcy5fLnByZXZpb3VzVmFsdWU9Yi5yZW1vdmVNYXJrdXBGcm9tU3RyaW5nKHRoaXMuZ2V0U25hcHNob3QoKSk6YS5jYWxsKHRoaXMpfX0pfWlmKCEwPT09Q0tFRElUT1IuY29uZmlnLnNjYXl0X2hhbmRsZVVuZG9SZWRvKXt2YXIgYT1DS0VESVRPUi5wbHVnaW5zLnVuZG8uSW1hZ2UucHJvdG90eXBlLGM9XCJmdW5jdGlvblwiPT10eXBlb2YgYS5lcXVhbHNDb250ZW50P1wiZXF1YWxzQ29udGVudFwiOlwiZXF1YWxzXCI7YVtjXT1DS0VESVRPUi50b29scy5vdmVycmlkZShhW2NdLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLmVkaXRvci5zY2F5dCxmPXRoaXMuY29udGVudHMsZz1iLmNvbnRlbnRzLGg9bnVsbDtDS0VESVRPUi5wbHVnaW5zLnNjYXl0JiZcbkNLRURJVE9SLnBsdWdpbnMuc2NheXQuc3RhdGUuc2NheXRbYi5lZGl0b3IubmFtZV0mJmIuZWRpdG9yLnNjYXl0JiYodGhpcy5jb250ZW50cz1jLnJlbW92ZU1hcmt1cEZyb21TdHJpbmcoZil8fFwiXCIsYi5jb250ZW50cz1jLnJlbW92ZU1hcmt1cEZyb21TdHJpbmcoZyl8fFwiXCIpO2g9YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5jb250ZW50cz1mO2IuY29udGVudHM9ZztyZXR1cm4gaH19KX19KTsoZnVuY3Rpb24oKXtDS0VESVRPUi5wbHVnaW5zLmFkZChcInN0eWxlc2NvbWJvXCIse3JlcXVpcmVzOlwicmljaGNvbWJvXCIsaW5pdDpmdW5jdGlvbihjKXt2YXIgbD1jLmNvbmZpZyxnPWMubGFuZy5zdHlsZXNjb21ibyxmPXt9LGs9W10sbT1bXTtjLm9uKFwic3R5bGVzU2V0XCIsZnVuY3Rpb24oYil7aWYoYj1iLmRhdGEuc3R5bGVzKXtmb3IodmFyIGEsaCxkLGU9MCxuPWIubGVuZ3RoO2U8bjtlKyspKGE9YltlXSxjLmJsb2NrbGVzcyYmYS5lbGVtZW50IGluIENLRURJVE9SLmR0ZC4kYmxvY2t8fChoPWEubmFtZSxhPW5ldyBDS0VESVRPUi5zdHlsZShhKSxjLmZpbHRlci5jdXN0b21Db25maWcmJiFjLmZpbHRlci5jaGVjayhhKSkpfHwoYS5fbmFtZT1oLGEuXy5lbnRlck1vZGU9bC5lbnRlck1vZGUsYS5fLnR5cGU9ZD1hLmFzc2lnbmVkVG98fGEudHlwZSxhLl8ud2VpZ2h0PWUrMUUzKihkPT1DS0VESVRPUi5TVFlMRV9PQkpFQ1Q/MTpkPT1DS0VESVRPUi5TVFlMRV9CTE9DSz8yOjMpLGZbaF09XG5hLGsucHVzaChhKSxtLnB1c2goYSkpO2suc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLl8ud2VpZ2h0LWIuXy53ZWlnaHR9KX19KTtjLnVpLmFkZFJpY2hDb21ibyhcIlN0eWxlc1wiLHtsYWJlbDpnLmxhYmVsLHRpdGxlOmcucGFuZWxUaXRsZSx0b29sYmFyOlwic3R5bGVzLDEwXCIsYWxsb3dlZENvbnRlbnQ6bSxwYW5lbDp7Y3NzOltDS0VESVRPUi5za2luLmdldFBhdGgoXCJlZGl0b3JcIildLmNvbmNhdChsLmNvbnRlbnRzQ3NzKSxtdWx0aVNlbGVjdDohMCxhdHRyaWJ1dGVzOntcImFyaWEtbGFiZWxcIjpnLnBhbmVsVGl0bGV9fSxpbml0OmZ1bmN0aW9uKCl7dmFyIGIsYSxjLGQsZSxmO2U9MDtmb3IoZj1rLmxlbmd0aDtlPGY7ZSsrKWI9a1tlXSxhPWIuX25hbWUsZD1iLl8udHlwZSxkIT1jJiYodGhpcy5zdGFydEdyb3VwKGdbXCJwYW5lbFRpdGxlXCIrU3RyaW5nKGQpXSksYz1kKSx0aGlzLmFkZChhLGIudHlwZT09Q0tFRElUT1IuU1RZTEVfT0JKRUNUP2E6Yi5idWlsZFByZXZpZXcoKSxhKTtcbnRoaXMuY29tbWl0KCl9LG9uQ2xpY2s6ZnVuY3Rpb24oYil7Yy5mb2N1cygpO2MuZmlyZShcInNhdmVTbmFwc2hvdFwiKTtiPWZbYl07dmFyIGE9Yy5lbGVtZW50UGF0aCgpO2NbYi5jaGVja0FjdGl2ZShhLGMpP1wicmVtb3ZlU3R5bGVcIjpcImFwcGx5U3R5bGVcIl0oYik7Yy5maXJlKFwic2F2ZVNuYXBzaG90XCIpfSxvblJlbmRlcjpmdW5jdGlvbigpe2Mub24oXCJzZWxlY3Rpb25DaGFuZ2VcIixmdW5jdGlvbihiKXt2YXIgYT10aGlzLmdldFZhbHVlKCk7Yj1iLmRhdGEucGF0aC5lbGVtZW50cztmb3IodmFyIGg9MCxkPWIubGVuZ3RoLGU7aDxkO2grKyl7ZT1iW2hdO2Zvcih2YXIgZyBpbiBmKWlmKGZbZ10uY2hlY2tFbGVtZW50UmVtb3ZhYmxlKGUsITAsYykpe2chPWEmJnRoaXMuc2V0VmFsdWUoZyk7cmV0dXJufX10aGlzLnNldFZhbHVlKFwiXCIpfSx0aGlzKX0sb25PcGVuOmZ1bmN0aW9uKCl7dmFyIGI9Yy5nZXRTZWxlY3Rpb24oKS5nZXRTZWxlY3RlZEVsZW1lbnQoKSxiPWMuZWxlbWVudFBhdGgoYiksXG5hPVswLDAsMCwwXTt0aGlzLnNob3dBbGwoKTt0aGlzLnVubWFya0FsbCgpO2Zvcih2YXIgaCBpbiBmKXt2YXIgZD1mW2hdLGU9ZC5fLnR5cGU7ZC5jaGVja0FwcGxpY2FibGUoYixjLGMuYWN0aXZlRmlsdGVyKT9hW2VdKys6dGhpcy5oaWRlSXRlbShoKTtkLmNoZWNrQWN0aXZlKGIsYykmJnRoaXMubWFyayhoKX1hW0NLRURJVE9SLlNUWUxFX0JMT0NLXXx8dGhpcy5oaWRlR3JvdXAoZ1tcInBhbmVsVGl0bGVcIitTdHJpbmcoQ0tFRElUT1IuU1RZTEVfQkxPQ0spXSk7YVtDS0VESVRPUi5TVFlMRV9JTkxJTkVdfHx0aGlzLmhpZGVHcm91cChnW1wicGFuZWxUaXRsZVwiK1N0cmluZyhDS0VESVRPUi5TVFlMRV9JTkxJTkUpXSk7YVtDS0VESVRPUi5TVFlMRV9PQkpFQ1RdfHx0aGlzLmhpZGVHcm91cChnW1wicGFuZWxUaXRsZVwiK1N0cmluZyhDS0VESVRPUi5TVFlMRV9PQkpFQ1QpXSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgYj1jLmVsZW1lbnRQYXRoKCk7aWYoYil7Zm9yKHZhciBhIGluIGYpaWYoZlthXS5jaGVja0FwcGxpY2FibGUoYixcbmMsYy5hY3RpdmVGaWx0ZXIpKXJldHVybjt0aGlzLnNldFN0YXRlKENLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKX19LHJlc2V0OmZ1bmN0aW9uKCl7Zj17fTtrPVtdfX0pfX0pfSkoKTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBrKGMpe3JldHVybntlZGl0b3JGb2N1czohMSxjYW5VbmRvOiExLG1vZGVzOnt3eXNpd3lnOjF9LGV4ZWM6ZnVuY3Rpb24oZCl7aWYoZC5lZGl0YWJsZSgpLmhhc0ZvY3VzKXt2YXIgZT1kLmdldFNlbGVjdGlvbigpLGI7aWYoYj0obmV3IENLRURJVE9SLmRvbS5lbGVtZW50UGF0aChlLmdldENvbW1vbkFuY2VzdG9yKCksZS5yb290KSkuY29udGFpbnMoe3RkOjEsdGg6MX0sMSkpe3ZhciBlPWQuY3JlYXRlUmFuZ2UoKSxhPUNLRURJVE9SLnRvb2xzLnRyeVRoZXNlKGZ1bmN0aW9uKCl7dmFyIGE9Yi5nZXRQYXJlbnQoKS4kLmNlbGxzW2IuJC5jZWxsSW5kZXgrKGM/LTE6MSldO2EucGFyZW50Tm9kZS5wYXJlbnROb2RlO3JldHVybiBhfSxmdW5jdGlvbigpe3ZhciBhPWIuZ2V0UGFyZW50KCksYT1hLmdldEFzY2VuZGFudChcInRhYmxlXCIpLiQucm93c1thLiQucm93SW5kZXgrKGM/LTE6MSldO3JldHVybiBhLmNlbGxzW2M/YS5jZWxscy5sZW5ndGgtMTpcbjBdfSk7aWYoYXx8YylpZihhKWE9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGEpLGUubW92ZVRvRWxlbWVudEVkaXRTdGFydChhKSxlLmNoZWNrU3RhcnRPZkJsb2NrKCkmJmUuY2hlY2tFbmRPZkJsb2NrKCl8fGUuc2VsZWN0Tm9kZUNvbnRlbnRzKGEpO2Vsc2UgcmV0dXJuITA7ZWxzZXtmb3IodmFyIGY9Yi5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiKS4kLGE9Yi5nZXRQYXJlbnQoKS4kLmNlbGxzLGY9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGYuaW5zZXJ0Um93KC0xKSxkLmRvY3VtZW50KSxnPTAsaD1hLmxlbmd0aDtnPGg7ZysrKWYuYXBwZW5kKChuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYVtnXSxkLmRvY3VtZW50KSkuY2xvbmUoITEsITEpKS5hcHBlbmRCb2d1cygpO2UubW92ZVRvRWxlbWVudEVkaXRTdGFydChmKX1lLnNlbGVjdCghMCk7cmV0dXJuITB9fXJldHVybiExfX19dmFyIGg9e2VkaXRvckZvY3VzOiExLG1vZGVzOnt3eXNpd3lnOjEsc291cmNlOjF9fSxnPXtleGVjOmZ1bmN0aW9uKGMpe2MuY29udGFpbmVyLmZvY3VzTmV4dCghMCxcbmMudGFiSW5kZXgpfX0sZj17ZXhlYzpmdW5jdGlvbihjKXtjLmNvbnRhaW5lci5mb2N1c1ByZXZpb3VzKCEwLGMudGFiSW5kZXgpfX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJ0YWJcIix7aW5pdDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9ITEhPT1jLmNvbmZpZy5lbmFibGVUYWJLZXlUb29scyxlPWMuY29uZmlnLnRhYlNwYWNlc3x8MCxiPVwiXCI7ZS0tOyliKz1cIsKgXCI7aWYoYiljLm9uKFwia2V5XCIsZnVuY3Rpb24oYSl7OT09YS5kYXRhLmtleUNvZGUmJihjLmluc2VydFRleHQoYiksYS5jYW5jZWwoKSl9KTtpZihkKWMub24oXCJrZXlcIixmdW5jdGlvbihhKXsoOT09YS5kYXRhLmtleUNvZGUmJmMuZXhlY0NvbW1hbmQoXCJzZWxlY3ROZXh0Q2VsbFwiKXx8YS5kYXRhLmtleUNvZGU9PUNLRURJVE9SLlNISUZUKzkmJmMuZXhlY0NvbW1hbmQoXCJzZWxlY3RQcmV2aW91c0NlbGxcIikpJiZhLmNhbmNlbCgpfSk7Yy5hZGRDb21tYW5kKFwiYmx1clwiLENLRURJVE9SLnRvb2xzLmV4dGVuZChnLGgpKTtjLmFkZENvbW1hbmQoXCJibHVyQmFja1wiLFxuQ0tFRElUT1IudG9vbHMuZXh0ZW5kKGYsaCkpO2MuYWRkQ29tbWFuZChcInNlbGVjdE5leHRDZWxsXCIsaygpKTtjLmFkZENvbW1hbmQoXCJzZWxlY3RQcmV2aW91c0NlbGxcIixrKCEwKSl9fSl9KSgpO1xuQ0tFRElUT1IuZG9tLmVsZW1lbnQucHJvdG90eXBlLmZvY3VzTmV4dD1mdW5jdGlvbihrLGgpe3ZhciBnPXZvaWQgMD09PWg/dGhpcy5nZXRUYWJJbmRleCgpOmgsZixjLGQsZSxiLGE7aWYoMD49Zylmb3IoYj10aGlzLmdldE5leHRTb3VyY2VOb2RlKGssQ0tFRElUT1IuTk9ERV9FTEVNRU5UKTtiOyl7aWYoYi5pc1Zpc2libGUoKSYmMD09PWIuZ2V0VGFiSW5kZXgoKSl7ZD1iO2JyZWFrfWI9Yi5nZXROZXh0U291cmNlTm9kZSghMSxDS0VESVRPUi5OT0RFX0VMRU1FTlQpfWVsc2UgZm9yKGI9dGhpcy5nZXREb2N1bWVudCgpLmdldEJvZHkoKS5nZXRGaXJzdCgpO2I9Yi5nZXROZXh0U291cmNlTm9kZSghMSxDS0VESVRPUi5OT0RFX0VMRU1FTlQpOyl7aWYoIWYpaWYoIWMmJmIuZXF1YWxzKHRoaXMpKXtpZihjPSEwLGspe2lmKCEoYj1iLmdldE5leHRTb3VyY2VOb2RlKCEwLENLRURJVE9SLk5PREVfRUxFTUVOVCkpKWJyZWFrO2Y9MX19ZWxzZSBjJiYhdGhpcy5jb250YWlucyhiKSYmXG4oZj0xKTtpZihiLmlzVmlzaWJsZSgpJiYhKDA+KGE9Yi5nZXRUYWJJbmRleCgpKSkpe2lmKGYmJmE9PWcpe2Q9YjticmVha31hPmcmJighZHx8IWV8fGE8ZSk/KGQ9YixlPWEpOmR8fDAhPT1hfHwoZD1iLGU9YSl9fWQmJmQuZm9jdXMoKX07XG5DS0VESVRPUi5kb20uZWxlbWVudC5wcm90b3R5cGUuZm9jdXNQcmV2aW91cz1mdW5jdGlvbihrLGgpe2Zvcih2YXIgZz12b2lkIDA9PT1oP3RoaXMuZ2V0VGFiSW5kZXgoKTpoLGYsYyxkLGU9MCxiLGE9dGhpcy5nZXREb2N1bWVudCgpLmdldEJvZHkoKS5nZXRMYXN0KCk7YT1hLmdldFByZXZpb3VzU291cmNlTm9kZSghMSxDS0VESVRPUi5OT0RFX0VMRU1FTlQpOyl7aWYoIWYpaWYoIWMmJmEuZXF1YWxzKHRoaXMpKXtpZihjPSEwLGspe2lmKCEoYT1hLmdldFByZXZpb3VzU291cmNlTm9kZSghMCxDS0VESVRPUi5OT0RFX0VMRU1FTlQpKSlicmVhaztmPTF9fWVsc2UgYyYmIXRoaXMuY29udGFpbnMoYSkmJihmPTEpO2lmKGEuaXNWaXNpYmxlKCkmJiEoMD4oYj1hLmdldFRhYkluZGV4KCkpKSlpZigwPj1nKXtpZihmJiYwPT09Yil7ZD1hO2JyZWFrfWI+ZSYmKGQ9YSxlPWIpfWVsc2V7aWYoZiYmYj09Zyl7ZD1hO2JyZWFrfWI8ZyYmKCFkfHxiPmUpJiYoZD1hLGU9Yil9fWQmJmQuZm9jdXMoKX07Q0tFRElUT1IucGx1Z2lucy5hZGQoXCJ0YWJsZVwiLHtyZXF1aXJlczpcImRpYWxvZ1wiLGluaXQ6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZShhKXtyZXR1cm4gQ0tFRElUT1IudG9vbHMuZXh0ZW5kKGF8fHt9LHtjb250ZXh0U2Vuc2l0aXZlOjEscmVmcmVzaDpmdW5jdGlvbihhLGYpe3RoaXMuc2V0U3RhdGUoZi5jb250YWlucyhcInRhYmxlXCIsMSk/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEKX19KX1pZighYS5ibG9ja2xlc3Mpe3ZhciBjPWEubGFuZy50YWJsZTthLmFkZENvbW1hbmQoXCJ0YWJsZVwiLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwidGFibGVcIix7Y29udGV4dDpcInRhYmxlXCIsYWxsb3dlZENvbnRlbnQ6XCJ0YWJsZXt3aWR0aCxoZWlnaHR9W2FsaWduLGJvcmRlcixjZWxscGFkZGluZyxjZWxsc3BhY2luZyxzdW1tYXJ5XTtjYXB0aW9uIHRib2R5IHRoZWFkIHRmb290O3RoIHRkIHRyW3Njb3BlXTtcIisoYS5wbHVnaW5zLmRpYWxvZ2FkdnRhYj9cblwidGFibGVcIithLnBsdWdpbnMuZGlhbG9nYWR2dGFiLmFsbG93ZWRDb250ZW50KCk6XCJcIikscmVxdWlyZWRDb250ZW50OlwidGFibGVcIixjb250ZW50VHJhbnNmb3JtYXRpb25zOltbXCJ0YWJsZXt3aWR0aH06IHNpemVUb1N0eWxlXCIsXCJ0YWJsZVt3aWR0aF06IHNpemVUb0F0dHJpYnV0ZVwiXV19KSk7YS5hZGRDb21tYW5kKFwidGFibGVQcm9wZXJ0aWVzXCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJ0YWJsZVByb3BlcnRpZXNcIixlKCkpKTthLmFkZENvbW1hbmQoXCJ0YWJsZURlbGV0ZVwiLGUoe2V4ZWM6ZnVuY3Rpb24oYSl7dmFyIGI9YS5lbGVtZW50UGF0aCgpLmNvbnRhaW5zKFwidGFibGVcIiwxKTtpZihiKXt2YXIgZD1iLmdldFBhcmVudCgpLGM9YS5lZGl0YWJsZSgpOzEhPWQuZ2V0Q2hpbGRDb3VudCgpfHxkLmlzKFwidGRcIixcInRoXCIpfHxkLmVxdWFscyhjKXx8KGI9ZCk7YT1hLmNyZWF0ZVJhbmdlKCk7YS5tb3ZlVG9Qb3NpdGlvbihiLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCk7XG5iLnJlbW92ZSgpO2Euc2VsZWN0KCl9fX0pKTthLnVpLmFkZEJ1dHRvbiYmYS51aS5hZGRCdXR0b24oXCJUYWJsZVwiLHtsYWJlbDpjLnRvb2xiYXIsY29tbWFuZDpcInRhYmxlXCIsdG9vbGJhcjpcImluc2VydCwzMFwifSk7Q0tFRElUT1IuZGlhbG9nLmFkZChcInRhYmxlXCIsdGhpcy5wYXRoK1wiZGlhbG9ncy90YWJsZS5qc1wiKTtDS0VESVRPUi5kaWFsb2cuYWRkKFwidGFibGVQcm9wZXJ0aWVzXCIsdGhpcy5wYXRoK1wiZGlhbG9ncy90YWJsZS5qc1wiKTthLmFkZE1lbnVJdGVtcyYmYS5hZGRNZW51SXRlbXMoe3RhYmxlOntsYWJlbDpjLm1lbnUsY29tbWFuZDpcInRhYmxlUHJvcGVydGllc1wiLGdyb3VwOlwidGFibGVcIixvcmRlcjo1fSx0YWJsZWRlbGV0ZTp7bGFiZWw6Yy5kZWxldGVUYWJsZSxjb21tYW5kOlwidGFibGVEZWxldGVcIixncm91cDpcInRhYmxlXCIsb3JkZXI6MX19KTthLm9uKFwiZG91YmxlY2xpY2tcIixmdW5jdGlvbihhKXthLmRhdGEuZWxlbWVudC5pcyhcInRhYmxlXCIpJiYoYS5kYXRhLmRpYWxvZz1cblwidGFibGVQcm9wZXJ0aWVzXCIpfSk7YS5jb250ZXh0TWVudSYmYS5jb250ZXh0TWVudS5hZGRMaXN0ZW5lcihmdW5jdGlvbigpe3JldHVybnt0YWJsZWRlbGV0ZTpDS0VESVRPUi5UUklTVEFURV9PRkYsdGFibGU6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfX0pfX19KTsoZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe2Z1bmN0aW9uIGQoYSl7MDxiLmxlbmd0aHx8YS50eXBlIT1DS0VESVRPUi5OT0RFX0VMRU1FTlR8fCFDLnRlc3QoYS5nZXROYW1lKCkpfHxhLmdldEN1c3RvbURhdGEoXCJzZWxlY3RlZF9jZWxsXCIpfHwoQ0tFRElUT1IuZG9tLmVsZW1lbnQuc2V0TWFya2VyKGMsYSxcInNlbGVjdGVkX2NlbGxcIiwhMCksYi5wdXNoKGEpKX1lPWUuZ2V0UmFuZ2VzKCk7Zm9yKHZhciBiPVtdLGM9e30sYT0wO2E8ZS5sZW5ndGg7YSsrKXt2YXIgZj1lW2FdO2lmKGYuY29sbGFwc2VkKWY9Zi5nZXRDb21tb25BbmNlc3RvcigpLChmPWYuZ2V0QXNjZW5kYW50KFwidGRcIiwhMCl8fGYuZ2V0QXNjZW5kYW50KFwidGhcIiwhMCkpJiZiLnB1c2goZik7ZWxzZXt2YXIgZj1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihmKSxnO2ZvcihmLmd1YXJkPWQ7Zz1mLm5leHQoKTspZy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmcuaXMoQ0tFRElUT1IuZHRkLnRhYmxlKXx8KGc9Zy5nZXRBc2NlbmRhbnQoXCJ0ZFwiLFxuITApfHxnLmdldEFzY2VuZGFudChcInRoXCIsITApKSYmIWcuZ2V0Q3VzdG9tRGF0YShcInNlbGVjdGVkX2NlbGxcIikmJihDS0VESVRPUi5kb20uZWxlbWVudC5zZXRNYXJrZXIoYyxnLFwic2VsZWN0ZWRfY2VsbFwiLCEwKSxiLnB1c2goZykpfX1DS0VESVRPUi5kb20uZWxlbWVudC5jbGVhckFsbE1hcmtlcnMoYyk7cmV0dXJuIGJ9ZnVuY3Rpb24gcChlLGQpe2Zvcih2YXIgYj10KGUpLGM9YlswXSxhPWMuZ2V0QXNjZW5kYW50KFwidGFibGVcIiksYz1jLmdldERvY3VtZW50KCksZj1iWzBdLmdldFBhcmVudCgpLGc9Zi4kLnJvd0luZGV4LGI9YltiLmxlbmd0aC0xXSxoPWIuZ2V0UGFyZW50KCkuJC5yb3dJbmRleCtiLiQucm93U3Bhbi0xLGI9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGEuJC5yb3dzW2hdKSxnPWQ/ZzpoLGY9ZD9mOmIsYj1DS0VESVRPUi50b29scy5idWlsZFRhYmxlTWFwKGEpLGE9YltnXSxnPWQ/YltnLTFdOmJbZysxXSxiPWJbMF0ubGVuZ3RoLGM9Yy5jcmVhdGVFbGVtZW50KFwidHJcIiksXG5oPTA7YVtoXSYmaDxiO2grKyl7dmFyIGs7MTxhW2hdLnJvd1NwYW4mJmcmJmFbaF09PWdbaF0/KGs9YVtoXSxrLnJvd1NwYW4rPTEpOihrPShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoYVtoXSkpLmNsb25lKCksay5yZW1vdmVBdHRyaWJ1dGUoXCJyb3dTcGFuXCIpLGsuYXBwZW5kQm9ndXMoKSxjLmFwcGVuZChrKSxrPWsuJCk7aCs9ay5jb2xTcGFuLTF9ZD9jLmluc2VydEJlZm9yZShmKTpjLmluc2VydEFmdGVyKGYpfWZ1bmN0aW9uIHUoZSl7aWYoZSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5zZWxlY3Rpb24pe3ZhciBkPXQoZSksYj1kWzBdLmdldEFzY2VuZGFudChcInRhYmxlXCIpLGM9Q0tFRElUT1IudG9vbHMuYnVpbGRUYWJsZU1hcChiKTtlPWRbMF0uZ2V0UGFyZW50KCkuJC5yb3dJbmRleDtmb3IodmFyIGQ9ZFtkLmxlbmd0aC0xXSxhPWQuZ2V0UGFyZW50KCkuJC5yb3dJbmRleCtkLiQucm93U3Bhbi0xLGQ9W10sZj1lO2Y8PWE7ZisrKXtmb3IodmFyIGc9Y1tmXSxoPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChiLiQucm93c1tmXSksXG5rPTA7azxnLmxlbmd0aDtrKyspe3ZhciBsPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChnW2tdKSxuPWwuZ2V0UGFyZW50KCkuJC5yb3dJbmRleDsxPT1sLiQucm93U3Bhbj9sLnJlbW92ZSgpOigtLWwuJC5yb3dTcGFuLG49PWYmJihuPWNbZisxXSxuW2stMV0/bC5pbnNlcnRBZnRlcihuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQobltrLTFdKSk6KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudChiLiQucm93c1tmKzFdKSkuYXBwZW5kKGwsMSkpKTtrKz1sLiQuY29sU3Bhbi0xfWQucHVzaChoKX1jPWIuJC5yb3dzO2I9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGNbYSsxXXx8KDA8ZT9jW2UtMV06bnVsbCl8fGIuJC5wYXJlbnROb2RlKTtmb3IoZj1kLmxlbmd0aDswPD1mO2YtLSl1KGRbZl0pO3JldHVybiBifWUgaW5zdGFuY2VvZiBDS0VESVRPUi5kb20uZWxlbWVudCYmKGI9ZS5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiKSwxPT1iLiQucm93cy5sZW5ndGg/Yi5yZW1vdmUoKTplLnJlbW92ZSgpKTtcbnJldHVybiBudWxsfWZ1bmN0aW9uIHYoZSxkKXtmb3IodmFyIGI9ZD9JbmZpbml0eTowLGM9MDtjPGUubGVuZ3RoO2MrKyl7dmFyIGE7YT1lW2NdO2Zvcih2YXIgZj1kLGc9YS5nZXRQYXJlbnQoKS4kLmNlbGxzLGg9MCxrPTA7azxnLmxlbmd0aDtrKyspe3ZhciBsPWdba10saD1oKyhmPzE6bC5jb2xTcGFuKTtpZihsPT1hLiQpYnJlYWt9YT1oLTE7aWYoZD9hPGI6YT5iKWI9YX1yZXR1cm4gYn1mdW5jdGlvbiBtKGUsZCl7Zm9yKHZhciBiPXQoZSksYz1iWzBdLmdldEFzY2VuZGFudChcInRhYmxlXCIpLGE9dihiLDEpLGI9dihiKSxhPWQ/YTpiLGY9Q0tFRElUT1IudG9vbHMuYnVpbGRUYWJsZU1hcChjKSxjPVtdLGI9W10sZz1mLmxlbmd0aCxoPTA7aDxnO2grKyljLnB1c2goZltoXVthXSksYi5wdXNoKGQ/ZltoXVthLTFdOmZbaF1bYSsxXSk7Zm9yKGg9MDtoPGc7aCsrKWNbaF0mJigxPGNbaF0uY29sU3BhbiYmYltoXT09Y1toXT8oYT1jW2hdLGEuY29sU3Bhbis9MSk6KGE9KG5ldyBDS0VESVRPUi5kb20uZWxlbWVudChjW2hdKSkuY2xvbmUoKSxcbmEucmVtb3ZlQXR0cmlidXRlKFwiY29sU3BhblwiKSxhLmFwcGVuZEJvZ3VzKCksYVtkP1wiaW5zZXJ0QmVmb3JlXCI6XCJpbnNlcnRBZnRlclwiXS5jYWxsKGEsbmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGNbaF0pKSxhPWEuJCksaCs9YS5yb3dTcGFuLTEpfWZ1bmN0aW9uIHkoZSxkKXt2YXIgYj1lLmdldFN0YXJ0RWxlbWVudCgpO2lmKGI9Yi5nZXRBc2NlbmRhbnQoXCJ0ZFwiLDEpfHxiLmdldEFzY2VuZGFudChcInRoXCIsMSkpe3ZhciBjPWIuY2xvbmUoKTtjLmFwcGVuZEJvZ3VzKCk7ZD9jLmluc2VydEJlZm9yZShiKTpjLmluc2VydEFmdGVyKGIpfX1mdW5jdGlvbiB4KGUpe2lmKGUgaW5zdGFuY2VvZiBDS0VESVRPUi5kb20uc2VsZWN0aW9uKXtlPXQoZSk7dmFyIGQ9ZVswXSYmZVswXS5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiKSxiO2E6e3ZhciBjPTA7Yj1lLmxlbmd0aC0xO2Zvcih2YXIgYT17fSxmLGc7Zj1lW2MrK107KUNLRURJVE9SLmRvbS5lbGVtZW50LnNldE1hcmtlcihhLGYsXCJkZWxldGVfY2VsbFwiLFxuITApO2ZvcihjPTA7Zj1lW2MrK107KWlmKChnPWYuZ2V0UHJldmlvdXMoKSkmJiFnLmdldEN1c3RvbURhdGEoXCJkZWxldGVfY2VsbFwiKXx8KGc9Zi5nZXROZXh0KCkpJiYhZy5nZXRDdXN0b21EYXRhKFwiZGVsZXRlX2NlbGxcIikpe0NLRURJVE9SLmRvbS5lbGVtZW50LmNsZWFyQWxsTWFya2VycyhhKTtiPWc7YnJlYWsgYX1DS0VESVRPUi5kb20uZWxlbWVudC5jbGVhckFsbE1hcmtlcnMoYSk7Zz1lWzBdLmdldFBhcmVudCgpOyhnPWcuZ2V0UHJldmlvdXMoKSk/Yj1nLmdldExhc3QoKTooZz1lW2JdLmdldFBhcmVudCgpLGI9KGc9Zy5nZXROZXh0KCkpP2cuZ2V0Q2hpbGQoMCk6bnVsbCl9Zm9yKGc9ZS5sZW5ndGgtMTswPD1nO2ctLSl4KGVbZ10pO2I/cShiLCEwKTpkJiZkLnJlbW92ZSgpfWVsc2UgZSBpbnN0YW5jZW9mIENLRURJVE9SLmRvbS5lbGVtZW50JiYoZD1lLmdldFBhcmVudCgpLDE9PWQuZ2V0Q2hpbGRDb3VudCgpP2QucmVtb3ZlKCk6ZS5yZW1vdmUoKSl9ZnVuY3Rpb24gcShlLFxuZCl7dmFyIGI9ZS5nZXREb2N1bWVudCgpLGM9Q0tFRElUT1IuZG9jdW1lbnQ7Q0tFRElUT1IuZW52LmllJiYxMD09Q0tFRElUT1IuZW52LnZlcnNpb24mJihjLmZvY3VzKCksYi5mb2N1cygpKTtiPW5ldyBDS0VESVRPUi5kb20ucmFuZ2UoYik7YltcIm1vdmVUb0VsZW1lbnRFZGl0XCIrKGQ/XCJFbmRcIjpcIlN0YXJ0XCIpXShlKXx8KGIuc2VsZWN0Tm9kZUNvbnRlbnRzKGUpLGIuY29sbGFwc2UoZD8hMTohMCkpO2Iuc2VsZWN0KCEwKX1mdW5jdGlvbiB6KGUsZCxiKXtlPWVbZF07aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGIpcmV0dXJuIGU7Zm9yKGQ9MDtlJiZkPGUubGVuZ3RoO2QrKyl7aWYoYi5pcyYmZVtkXT09Yi4kKXJldHVybiBkO2lmKGQ9PWIpcmV0dXJuIG5ldyBDS0VESVRPUi5kb20uZWxlbWVudChlW2RdKX1yZXR1cm4gYi5pcz8tMTpudWxsfWZ1bmN0aW9uIHcoZSxkLGIpe3ZhciBjPXQoZSksYTtpZigoZD8xIT1jLmxlbmd0aDoyPmMubGVuZ3RoKXx8KGE9ZS5nZXRDb21tb25BbmNlc3RvcigpKSYmXG5hLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYS5pcyhcInRhYmxlXCIpKXJldHVybiExO3ZhciBmO2U9Y1swXTthPWUuZ2V0QXNjZW5kYW50KFwidGFibGVcIik7dmFyIGc9Q0tFRElUT1IudG9vbHMuYnVpbGRUYWJsZU1hcChhKSxoPWcubGVuZ3RoLGs9Z1swXS5sZW5ndGgsbD1lLmdldFBhcmVudCgpLiQucm93SW5kZXgsbj16KGcsbCxlKTtpZihkKXt2YXIgcjt0cnl7dmFyIHE9cGFyc2VJbnQoZS5nZXRBdHRyaWJ1dGUoXCJyb3dzcGFuXCIpLDEwKXx8MTtmPXBhcnNlSW50KGUuZ2V0QXR0cmlidXRlKFwiY29sc3BhblwiKSwxMCl8fDE7cj1nW1widXBcIj09ZD9sLXE6XCJkb3duXCI9PWQ/bCtxOmxdW1wibGVmdFwiPT1kP24tZjpcInJpZ2h0XCI9PWQ/bitmOm5dfWNhdGNoKEQpe3JldHVybiExfWlmKCFyfHxlLiQ9PXIpcmV0dXJuITE7Y1tcInVwXCI9PWR8fFwibGVmdFwiPT1kP1widW5zaGlmdFwiOlwicHVzaFwiXShuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQocikpfWQ9ZS5nZXREb2N1bWVudCgpO3ZhciBwPWwsXG5xPXI9MCx1PSFiJiZuZXcgQ0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQoZCksdz0wO2ZvcihkPTA7ZDxjLmxlbmd0aDtkKyspe2Y9Y1tkXTt2YXIgbT1mLmdldFBhcmVudCgpLHg9Zi5nZXRGaXJzdCgpLHY9Zi4kLmNvbFNwYW4seT1mLiQucm93U3BhbixtPW0uJC5yb3dJbmRleCxBPXooZyxtLGYpLHc9dyt2KnkscT1NYXRoLm1heChxLEEtbit2KTtyPU1hdGgubWF4KHIsbS1sK3kpO2J8fCh2PWYsKHk9di5nZXRCb2d1cygpKSYmeS5yZW1vdmUoKSx2LnRyaW0oKSxmLmdldENoaWxkcmVuKCkuY291bnQoKSYmKG09PXB8fCF4fHx4LmlzQmxvY2tCb3VuZGFyeSYmeC5pc0Jsb2NrQm91bmRhcnkoe2JyOjF9KXx8KHA9dS5nZXRMYXN0KENLRURJVE9SLmRvbS53YWxrZXIud2hpdGVzcGFjZXMoITApKSwhcHx8cC5pcyYmcC5pcyhcImJyXCIpfHx1LmFwcGVuZChcImJyXCIpKSxmLm1vdmVDaGlsZHJlbih1KSksZD9mLnJlbW92ZSgpOmYuc2V0SHRtbChcIlwiKSk7cD1tfWlmKGIpcmV0dXJuIHIqXG5xPT13O3UubW92ZUNoaWxkcmVuKGUpO2UuYXBwZW5kQm9ndXMoKTtxPj1rP2UucmVtb3ZlQXR0cmlidXRlKFwicm93U3BhblwiKTplLiQucm93U3Bhbj1yO3I+PWg/ZS5yZW1vdmVBdHRyaWJ1dGUoXCJjb2xTcGFuXCIpOmUuJC5jb2xTcGFuPXE7Yj1uZXcgQ0tFRElUT1IuZG9tLm5vZGVMaXN0KGEuJC5yb3dzKTtjPWIuY291bnQoKTtmb3IoZD1jLTE7MDw9ZDtkLS0pYT1iLmdldEl0ZW0oZCksYS4kLmNlbGxzLmxlbmd0aHx8KGEucmVtb3ZlKCksYysrKTtyZXR1cm4gZX1mdW5jdGlvbiBBKGUsZCl7dmFyIGI9dChlKTtpZigxPGIubGVuZ3RoKXJldHVybiExO2lmKGQpcmV0dXJuITA7dmFyIGI9YlswXSxjPWIuZ2V0UGFyZW50KCksYT1jLmdldEFzY2VuZGFudChcInRhYmxlXCIpLGY9Q0tFRElUT1IudG9vbHMuYnVpbGRUYWJsZU1hcChhKSxnPWMuJC5yb3dJbmRleCxoPXooZixnLGIpLGs9Yi4kLnJvd1NwYW4sbDtpZigxPGspe2w9TWF0aC5jZWlsKGsvMik7Zm9yKHZhciBrPU1hdGguZmxvb3Ioay9cbjIpLGM9ZytsLGE9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGEuJC5yb3dzW2NdKSxmPXooZixjKSxuLGM9Yi5jbG9uZSgpLGc9MDtnPGYubGVuZ3RoO2crKylpZihuPWZbZ10sbi5wYXJlbnROb2RlPT1hLiQmJmc+aCl7Yy5pbnNlcnRCZWZvcmUobmV3IENLRURJVE9SLmRvbS5lbGVtZW50KG4pKTticmVha31lbHNlIG49bnVsbDtufHxhLmFwcGVuZChjKX1lbHNlIGZvcihrPWw9MSxhPWMuY2xvbmUoKSxhLmluc2VydEFmdGVyKGMpLGEuYXBwZW5kKGM9Yi5jbG9uZSgpKSxuPXooZixnKSxoPTA7aDxuLmxlbmd0aDtoKyspbltoXS5yb3dTcGFuKys7Yy5hcHBlbmRCb2d1cygpO2IuJC5yb3dTcGFuPWw7Yy4kLnJvd1NwYW49azsxPT1sJiZiLnJlbW92ZUF0dHJpYnV0ZShcInJvd1NwYW5cIik7MT09ayYmYy5yZW1vdmVBdHRyaWJ1dGUoXCJyb3dTcGFuXCIpO3JldHVybiBjfWZ1bmN0aW9uIEIoZSxkKXt2YXIgYj10KGUpO2lmKDE8Yi5sZW5ndGgpcmV0dXJuITE7aWYoZClyZXR1cm4hMDt2YXIgYj1cbmJbMF0sYz1iLmdldFBhcmVudCgpLGE9Yy5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiKSxhPUNLRURJVE9SLnRvb2xzLmJ1aWxkVGFibGVNYXAoYSksZj16KGEsYy4kLnJvd0luZGV4LGIpLGc9Yi4kLmNvbFNwYW47aWYoMTxnKWM9TWF0aC5jZWlsKGcvMiksZz1NYXRoLmZsb29yKGcvMik7ZWxzZXtmb3IodmFyIGc9Yz0xLGg9W10saz0wO2s8YS5sZW5ndGg7aysrKXt2YXIgbD1hW2tdO2gucHVzaChsW2ZdKTsxPGxbZl0ucm93U3BhbiYmKGsrPWxbZl0ucm93U3Bhbi0xKX1mb3IoYT0wO2E8aC5sZW5ndGg7YSsrKWhbYV0uY29sU3BhbisrfWE9Yi5jbG9uZSgpO2EuaW5zZXJ0QWZ0ZXIoYik7YS5hcHBlbmRCb2d1cygpO2IuJC5jb2xTcGFuPWM7YS4kLmNvbFNwYW49ZzsxPT1jJiZiLnJlbW92ZUF0dHJpYnV0ZShcImNvbFNwYW5cIik7MT09ZyYmYS5yZW1vdmVBdHRyaWJ1dGUoXCJjb2xTcGFuXCIpO3JldHVybiBhfXZhciBDPS9eKD86dGR8dGgpJC87Q0tFRElUT1IucGx1Z2lucy50YWJsZXRvb2xzPVxue3JlcXVpcmVzOlwidGFibGUsZGlhbG9nLGNvbnRleHRtZW51XCIsaW5pdDpmdW5jdGlvbihlKXtmdW5jdGlvbiBkKGEpe3JldHVybiBDS0VESVRPUi50b29scy5leHRlbmQoYXx8e30se2NvbnRleHRTZW5zaXRpdmU6MSxyZWZyZXNoOmZ1bmN0aW9uKGEsYil7dGhpcy5zZXRTdGF0ZShiLmNvbnRhaW5zKHt0ZDoxLHRoOjF9LDEpP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCl9fSl9ZnVuY3Rpb24gYihhLGIpe3ZhciBjPWUuYWRkQ29tbWFuZChhLGIpO2UuYWRkRmVhdHVyZShjKX12YXIgYz1lLmxhbmcudGFibGU7YihcImNlbGxQcm9wZXJ0aWVzXCIsbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQoXCJjZWxsUHJvcGVydGllc1wiLGQoe2FsbG93ZWRDb250ZW50OlwidGQgdGh7d2lkdGgsaGVpZ2h0LGJvcmRlci1jb2xvcixiYWNrZ3JvdW5kLWNvbG9yLHdoaXRlLXNwYWNlLHZlcnRpY2FsLWFsaWduLHRleHQtYWxpZ259W2NvbHNwYW4scm93c3Bhbl1cIixcbnJlcXVpcmVkQ29udGVudDpcInRhYmxlXCJ9KSkpO0NLRURJVE9SLmRpYWxvZy5hZGQoXCJjZWxsUHJvcGVydGllc1wiLHRoaXMucGF0aCtcImRpYWxvZ3MvdGFibGVDZWxsLmpzXCIpO2IoXCJyb3dEZWxldGVcIixkKHtyZXF1aXJlZENvbnRlbnQ6XCJ0YWJsZVwiLGV4ZWM6ZnVuY3Rpb24oYSl7YT1hLmdldFNlbGVjdGlvbigpO3EodShhKSl9fSkpO2IoXCJyb3dJbnNlcnRCZWZvcmVcIixkKHtyZXF1aXJlZENvbnRlbnQ6XCJ0YWJsZVwiLGV4ZWM6ZnVuY3Rpb24oYSl7YT1hLmdldFNlbGVjdGlvbigpO3AoYSwhMCl9fSkpO2IoXCJyb3dJbnNlcnRBZnRlclwiLGQoe3JlcXVpcmVkQ29udGVudDpcInRhYmxlXCIsZXhlYzpmdW5jdGlvbihhKXthPWEuZ2V0U2VsZWN0aW9uKCk7cChhKX19KSk7YihcImNvbHVtbkRlbGV0ZVwiLGQoe3JlcXVpcmVkQ29udGVudDpcInRhYmxlXCIsZXhlYzpmdW5jdGlvbihhKXthPWEuZ2V0U2VsZWN0aW9uKCk7YT10KGEpO3ZhciBiPWFbMF0sYz1hW2EubGVuZ3RoLTFdO2E9Yi5nZXRBc2NlbmRhbnQoXCJ0YWJsZVwiKTtcbmZvcih2YXIgZD1DS0VESVRPUi50b29scy5idWlsZFRhYmxlTWFwKGEpLGUsbCxuPVtdLHI9MCxwPWQubGVuZ3RoO3I8cDtyKyspZm9yKHZhciBtPTAsdT1kW3JdLmxlbmd0aDttPHU7bSsrKWRbcl1bbV09PWIuJCYmKGU9bSksZFtyXVttXT09Yy4kJiYobD1tKTtmb3Iocj1lO3I8PWw7cisrKWZvcihtPTA7bTxkLmxlbmd0aDttKyspYz1kW21dLGI9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGEuJC5yb3dzW21dKSxjPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChjW3JdKSxjLiQmJigxPT1jLiQuY29sU3Bhbj9jLnJlbW92ZSgpOi0tYy4kLmNvbFNwYW4sbSs9Yy4kLnJvd1NwYW4tMSxiLiQuY2VsbHMubGVuZ3RofHxuLnB1c2goYikpO2w9YS4kLnJvd3NbMF0mJmEuJC5yb3dzWzBdLmNlbGxzO2U9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGxbZV18fChlP2xbZS0xXTphLiQucGFyZW50Tm9kZSkpO24ubGVuZ3RoPT1wJiZhLnJlbW92ZSgpO2UmJnEoZSwhMCl9fSkpO2IoXCJjb2x1bW5JbnNlcnRCZWZvcmVcIixcbmQoe3JlcXVpcmVkQ29udGVudDpcInRhYmxlXCIsZXhlYzpmdW5jdGlvbihhKXthPWEuZ2V0U2VsZWN0aW9uKCk7bShhLCEwKX19KSk7YihcImNvbHVtbkluc2VydEFmdGVyXCIsZCh7cmVxdWlyZWRDb250ZW50OlwidGFibGVcIixleGVjOmZ1bmN0aW9uKGEpe2E9YS5nZXRTZWxlY3Rpb24oKTttKGEpfX0pKTtiKFwiY2VsbERlbGV0ZVwiLGQoe3JlcXVpcmVkQ29udGVudDpcInRhYmxlXCIsZXhlYzpmdW5jdGlvbihhKXthPWEuZ2V0U2VsZWN0aW9uKCk7eChhKX19KSk7YihcImNlbGxNZXJnZVwiLGQoe2FsbG93ZWRDb250ZW50OlwidGRbY29sc3Bhbixyb3dzcGFuXVwiLHJlcXVpcmVkQ29udGVudDpcInRkW2NvbHNwYW4scm93c3Bhbl1cIixleGVjOmZ1bmN0aW9uKGEpe3EodyhhLmdldFNlbGVjdGlvbigpKSwhMCl9fSkpO2IoXCJjZWxsTWVyZ2VSaWdodFwiLGQoe2FsbG93ZWRDb250ZW50OlwidGRbY29sc3Bhbl1cIixyZXF1aXJlZENvbnRlbnQ6XCJ0ZFtjb2xzcGFuXVwiLGV4ZWM6ZnVuY3Rpb24oYSl7cSh3KGEuZ2V0U2VsZWN0aW9uKCksXG5cInJpZ2h0XCIpLCEwKX19KSk7YihcImNlbGxNZXJnZURvd25cIixkKHthbGxvd2VkQ29udGVudDpcInRkW3Jvd3NwYW5dXCIscmVxdWlyZWRDb250ZW50OlwidGRbcm93c3Bhbl1cIixleGVjOmZ1bmN0aW9uKGEpe3EodyhhLmdldFNlbGVjdGlvbigpLFwiZG93blwiKSwhMCl9fSkpO2IoXCJjZWxsVmVydGljYWxTcGxpdFwiLGQoe2FsbG93ZWRDb250ZW50OlwidGRbcm93c3Bhbl1cIixyZXF1aXJlZENvbnRlbnQ6XCJ0ZFtyb3dzcGFuXVwiLGV4ZWM6ZnVuY3Rpb24oYSl7cShCKGEuZ2V0U2VsZWN0aW9uKCkpKX19KSk7YihcImNlbGxIb3Jpem9udGFsU3BsaXRcIixkKHthbGxvd2VkQ29udGVudDpcInRkW2NvbHNwYW5dXCIscmVxdWlyZWRDb250ZW50OlwidGRbY29sc3Bhbl1cIixleGVjOmZ1bmN0aW9uKGEpe3EoQShhLmdldFNlbGVjdGlvbigpKSl9fSkpO2IoXCJjZWxsSW5zZXJ0QmVmb3JlXCIsZCh7cmVxdWlyZWRDb250ZW50OlwidGFibGVcIixleGVjOmZ1bmN0aW9uKGEpe2E9YS5nZXRTZWxlY3Rpb24oKTt5KGEsITApfX0pKTtcbmIoXCJjZWxsSW5zZXJ0QWZ0ZXJcIixkKHtyZXF1aXJlZENvbnRlbnQ6XCJ0YWJsZVwiLGV4ZWM6ZnVuY3Rpb24oYSl7YT1hLmdldFNlbGVjdGlvbigpO3koYSl9fSkpO2UuYWRkTWVudUl0ZW1zJiZlLmFkZE1lbnVJdGVtcyh7dGFibGVjZWxsOntsYWJlbDpjLmNlbGwubWVudSxncm91cDpcInRhYmxlY2VsbFwiLG9yZGVyOjEsZ2V0SXRlbXM6ZnVuY3Rpb24oKXt2YXIgYT1lLmdldFNlbGVjdGlvbigpLGI9dChhKTtyZXR1cm57dGFibGVjZWxsX2luc2VydEJlZm9yZTpDS0VESVRPUi5UUklTVEFURV9PRkYsdGFibGVjZWxsX2luc2VydEFmdGVyOkNLRURJVE9SLlRSSVNUQVRFX09GRix0YWJsZWNlbGxfZGVsZXRlOkNLRURJVE9SLlRSSVNUQVRFX09GRix0YWJsZWNlbGxfbWVyZ2U6dyhhLG51bGwsITApP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCx0YWJsZWNlbGxfbWVyZ2VfcmlnaHQ6dyhhLFwicmlnaHRcIiwhMCk/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOlxuQ0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQsdGFibGVjZWxsX21lcmdlX2Rvd246dyhhLFwiZG93blwiLCEwKT9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQsdGFibGVjZWxsX3NwbGl0X3ZlcnRpY2FsOkIoYSwhMCk/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELHRhYmxlY2VsbF9zcGxpdF9ob3Jpem9udGFsOkEoYSwhMCk/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVELHRhYmxlY2VsbF9wcm9wZXJ0aWVzOjA8Yi5sZW5ndGg/Q0tFRElUT1IuVFJJU1RBVEVfT0ZGOkNLRURJVE9SLlRSSVNUQVRFX0RJU0FCTEVEfX19LHRhYmxlY2VsbF9pbnNlcnRCZWZvcmU6e2xhYmVsOmMuY2VsbC5pbnNlcnRCZWZvcmUsZ3JvdXA6XCJ0YWJsZWNlbGxcIixjb21tYW5kOlwiY2VsbEluc2VydEJlZm9yZVwiLG9yZGVyOjV9LHRhYmxlY2VsbF9pbnNlcnRBZnRlcjp7bGFiZWw6Yy5jZWxsLmluc2VydEFmdGVyLFxuZ3JvdXA6XCJ0YWJsZWNlbGxcIixjb21tYW5kOlwiY2VsbEluc2VydEFmdGVyXCIsb3JkZXI6MTB9LHRhYmxlY2VsbF9kZWxldGU6e2xhYmVsOmMuY2VsbC5kZWxldGVDZWxsLGdyb3VwOlwidGFibGVjZWxsXCIsY29tbWFuZDpcImNlbGxEZWxldGVcIixvcmRlcjoxNX0sdGFibGVjZWxsX21lcmdlOntsYWJlbDpjLmNlbGwubWVyZ2UsZ3JvdXA6XCJ0YWJsZWNlbGxcIixjb21tYW5kOlwiY2VsbE1lcmdlXCIsb3JkZXI6MTZ9LHRhYmxlY2VsbF9tZXJnZV9yaWdodDp7bGFiZWw6Yy5jZWxsLm1lcmdlUmlnaHQsZ3JvdXA6XCJ0YWJsZWNlbGxcIixjb21tYW5kOlwiY2VsbE1lcmdlUmlnaHRcIixvcmRlcjoxN30sdGFibGVjZWxsX21lcmdlX2Rvd246e2xhYmVsOmMuY2VsbC5tZXJnZURvd24sZ3JvdXA6XCJ0YWJsZWNlbGxcIixjb21tYW5kOlwiY2VsbE1lcmdlRG93blwiLG9yZGVyOjE4fSx0YWJsZWNlbGxfc3BsaXRfaG9yaXpvbnRhbDp7bGFiZWw6Yy5jZWxsLnNwbGl0SG9yaXpvbnRhbCxncm91cDpcInRhYmxlY2VsbFwiLFxuY29tbWFuZDpcImNlbGxIb3Jpem9udGFsU3BsaXRcIixvcmRlcjoxOX0sdGFibGVjZWxsX3NwbGl0X3ZlcnRpY2FsOntsYWJlbDpjLmNlbGwuc3BsaXRWZXJ0aWNhbCxncm91cDpcInRhYmxlY2VsbFwiLGNvbW1hbmQ6XCJjZWxsVmVydGljYWxTcGxpdFwiLG9yZGVyOjIwfSx0YWJsZWNlbGxfcHJvcGVydGllczp7bGFiZWw6Yy5jZWxsLnRpdGxlLGdyb3VwOlwidGFibGVjZWxscHJvcGVydGllc1wiLGNvbW1hbmQ6XCJjZWxsUHJvcGVydGllc1wiLG9yZGVyOjIxfSx0YWJsZXJvdzp7bGFiZWw6Yy5yb3cubWVudSxncm91cDpcInRhYmxlcm93XCIsb3JkZXI6MSxnZXRJdGVtczpmdW5jdGlvbigpe3JldHVybnt0YWJsZXJvd19pbnNlcnRCZWZvcmU6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHRhYmxlcm93X2luc2VydEFmdGVyOkNLRURJVE9SLlRSSVNUQVRFX09GRix0YWJsZXJvd19kZWxldGU6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfX19LHRhYmxlcm93X2luc2VydEJlZm9yZTp7bGFiZWw6Yy5yb3cuaW5zZXJ0QmVmb3JlLFxuZ3JvdXA6XCJ0YWJsZXJvd1wiLGNvbW1hbmQ6XCJyb3dJbnNlcnRCZWZvcmVcIixvcmRlcjo1fSx0YWJsZXJvd19pbnNlcnRBZnRlcjp7bGFiZWw6Yy5yb3cuaW5zZXJ0QWZ0ZXIsZ3JvdXA6XCJ0YWJsZXJvd1wiLGNvbW1hbmQ6XCJyb3dJbnNlcnRBZnRlclwiLG9yZGVyOjEwfSx0YWJsZXJvd19kZWxldGU6e2xhYmVsOmMucm93LmRlbGV0ZVJvdyxncm91cDpcInRhYmxlcm93XCIsY29tbWFuZDpcInJvd0RlbGV0ZVwiLG9yZGVyOjE1fSx0YWJsZWNvbHVtbjp7bGFiZWw6Yy5jb2x1bW4ubWVudSxncm91cDpcInRhYmxlY29sdW1uXCIsb3JkZXI6MSxnZXRJdGVtczpmdW5jdGlvbigpe3JldHVybnt0YWJsZWNvbHVtbl9pbnNlcnRCZWZvcmU6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHRhYmxlY29sdW1uX2luc2VydEFmdGVyOkNLRURJVE9SLlRSSVNUQVRFX09GRix0YWJsZWNvbHVtbl9kZWxldGU6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGfX19LHRhYmxlY29sdW1uX2luc2VydEJlZm9yZTp7bGFiZWw6Yy5jb2x1bW4uaW5zZXJ0QmVmb3JlLFxuZ3JvdXA6XCJ0YWJsZWNvbHVtblwiLGNvbW1hbmQ6XCJjb2x1bW5JbnNlcnRCZWZvcmVcIixvcmRlcjo1fSx0YWJsZWNvbHVtbl9pbnNlcnRBZnRlcjp7bGFiZWw6Yy5jb2x1bW4uaW5zZXJ0QWZ0ZXIsZ3JvdXA6XCJ0YWJsZWNvbHVtblwiLGNvbW1hbmQ6XCJjb2x1bW5JbnNlcnRBZnRlclwiLG9yZGVyOjEwfSx0YWJsZWNvbHVtbl9kZWxldGU6e2xhYmVsOmMuY29sdW1uLmRlbGV0ZUNvbHVtbixncm91cDpcInRhYmxlY29sdW1uXCIsY29tbWFuZDpcImNvbHVtbkRlbGV0ZVwiLG9yZGVyOjE1fX0pO2UuY29udGV4dE1lbnUmJmUuY29udGV4dE1lbnUuYWRkTGlzdGVuZXIoZnVuY3Rpb24oYSxiLGMpe3JldHVybihhPWMuY29udGFpbnMoe3RkOjEsdGg6MX0sMSkpJiYhYS5pc1JlYWRPbmx5KCk/e3RhYmxlY2VsbDpDS0VESVRPUi5UUklTVEFURV9PRkYsdGFibGVyb3c6Q0tFRElUT1IuVFJJU1RBVEVfT0ZGLHRhYmxlY29sdW1uOkNLRURJVE9SLlRSSVNUQVRFX09GRn06bnVsbH0pfSxnZXRTZWxlY3RlZENlbGxzOnR9O1xuQ0tFRElUT1IucGx1Z2lucy5hZGQoXCJ0YWJsZXRvb2xzXCIsQ0tFRElUT1IucGx1Z2lucy50YWJsZXRvb2xzKX0pKCk7Q0tFRElUT1IudG9vbHMuYnVpbGRUYWJsZU1hcD1mdW5jdGlvbih0KXt0PXQuJC5yb3dzO2Zvcih2YXIgcD0tMSx1PVtdLHY9MDt2PHQubGVuZ3RoO3YrKyl7cCsrOyF1W3BdJiYodVtwXT1bXSk7Zm9yKHZhciBtPS0xLHk9MDt5PHRbdl0uY2VsbHMubGVuZ3RoO3krKyl7dmFyIHg9dFt2XS5jZWxsc1t5XTtmb3IobSsrO3VbcF1bbV07KW0rKztmb3IodmFyIHE9aXNOYU4oeC5jb2xTcGFuKT8xOnguY29sU3Bhbix4PWlzTmFOKHgucm93U3Bhbik/MTp4LnJvd1NwYW4sej0wO3o8eDt6Kyspe3VbcCt6XXx8KHVbcCt6XT1bXSk7Zm9yKHZhciB3PTA7dzxxO3crKyl1W3Arel1bbSt3XT10W3ZdLmNlbGxzW3ldfW0rPXEtMX19cmV0dXJuIHV9OyhmdW5jdGlvbigpe3ZhciBnPVtDS0VESVRPUi5DVFJMKzkwLENLRURJVE9SLkNUUkwrODksQ0tFRElUT1IuQ1RSTCtDS0VESVRPUi5TSElGVCs5MF0sbj17ODoxLDQ2OjF9O0NLRURJVE9SLnBsdWdpbnMuYWRkKFwidW5kb1wiLHtpbml0OmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7ZC5lbmFibGVkJiYhMSE9PWEuZGF0YS5jb21tYW5kLmNhblVuZG8mJmQuc2F2ZSgpfWZ1bmN0aW9uIGMoKXtkLmVuYWJsZWQ9YS5yZWFkT25seT8hMTpcInd5c2l3eWdcIj09YS5tb2RlO2Qub25DaGFuZ2UoKX12YXIgZD1hLnVuZG9NYW5hZ2VyPW5ldyBlKGEpLGw9ZC5lZGl0aW5nSGFuZGxlcj1uZXcgayhkKSxmPWEuYWRkQ29tbWFuZChcInVuZG9cIix7ZXhlYzpmdW5jdGlvbigpe2QudW5kbygpJiYoYS5zZWxlY3Rpb25DaGFuZ2UoKSx0aGlzLmZpcmUoXCJhZnRlclVuZG9cIikpfSxzdGFydERpc2FibGVkOiEwLGNhblVuZG86ITF9KSxoPWEuYWRkQ29tbWFuZChcInJlZG9cIix7ZXhlYzpmdW5jdGlvbigpe2QucmVkbygpJiZcbihhLnNlbGVjdGlvbkNoYW5nZSgpLHRoaXMuZmlyZShcImFmdGVyUmVkb1wiKSl9LHN0YXJ0RGlzYWJsZWQ6ITAsY2FuVW5kbzohMX0pO2Euc2V0S2V5c3Ryb2tlKFtbZ1swXSxcInVuZG9cIl0sW2dbMV0sXCJyZWRvXCJdLFtnWzJdLFwicmVkb1wiXV0pO2Qub25DaGFuZ2U9ZnVuY3Rpb24oKXtmLnNldFN0YXRlKGQudW5kb2FibGUoKT9DS0VESVRPUi5UUklTVEFURV9PRkY6Q0tFRElUT1IuVFJJU1RBVEVfRElTQUJMRUQpO2guc2V0U3RhdGUoZC5yZWRvYWJsZSgpP0NLRURJVE9SLlRSSVNUQVRFX09GRjpDS0VESVRPUi5UUklTVEFURV9ESVNBQkxFRCl9O2Eub24oXCJiZWZvcmVDb21tYW5kRXhlY1wiLGIpO2Eub24oXCJhZnRlckNvbW1hbmRFeGVjXCIsYik7YS5vbihcInNhdmVTbmFwc2hvdFwiLGZ1bmN0aW9uKGEpe2Quc2F2ZShhLmRhdGEmJmEuZGF0YS5jb250ZW50T25seSl9KTthLm9uKFwiY29udGVudERvbVwiLGwuYXR0YWNoTGlzdGVuZXJzLGwpO2Eub24oXCJpbnN0YW5jZVJlYWR5XCIsZnVuY3Rpb24oKXthLmZpcmUoXCJzYXZlU25hcHNob3RcIil9KTtcbmEub24oXCJiZWZvcmVNb2RlVW5sb2FkXCIsZnVuY3Rpb24oKXtcInd5c2l3eWdcIj09YS5tb2RlJiZkLnNhdmUoITApfSk7YS5vbihcIm1vZGVcIixjKTthLm9uKFwicmVhZE9ubHlcIixjKTthLnVpLmFkZEJ1dHRvbiYmKGEudWkuYWRkQnV0dG9uKFwiVW5kb1wiLHtsYWJlbDphLmxhbmcudW5kby51bmRvLGNvbW1hbmQ6XCJ1bmRvXCIsdG9vbGJhcjpcInVuZG8sMTBcIn0pLGEudWkuYWRkQnV0dG9uKFwiUmVkb1wiLHtsYWJlbDphLmxhbmcudW5kby5yZWRvLGNvbW1hbmQ6XCJyZWRvXCIsdG9vbGJhcjpcInVuZG8sMjBcIn0pKTthLnJlc2V0VW5kbz1mdW5jdGlvbigpe2QucmVzZXQoKTthLmZpcmUoXCJzYXZlU25hcHNob3RcIil9O2Eub24oXCJ1cGRhdGVTbmFwc2hvdFwiLGZ1bmN0aW9uKCl7ZC5jdXJyZW50SW1hZ2UmJmQudXBkYXRlKCl9KTthLm9uKFwibG9ja1NuYXBzaG90XCIsZnVuY3Rpb24oYSl7YT1hLmRhdGE7ZC5sb2NrKGEmJmEuZG9udFVwZGF0ZSxhJiZhLmZvcmNlVXBkYXRlKX0pO2Eub24oXCJ1bmxvY2tTbmFwc2hvdFwiLFxuZC51bmxvY2ssZCl9fSk7Q0tFRElUT1IucGx1Z2lucy51bmRvPXt9O3ZhciBlPUNLRURJVE9SLnBsdWdpbnMudW5kby5VbmRvTWFuYWdlcj1mdW5jdGlvbihhKXt0aGlzLnN0cm9rZXNSZWNvcmRlZD1bMCwwXTt0aGlzLmxvY2tlZD1udWxsO3RoaXMucHJldmlvdXNLZXlHcm91cD0tMTt0aGlzLmxpbWl0PWEuY29uZmlnLnVuZG9TdGFja1NpemV8fDIwO3RoaXMuc3Ryb2tlc0xpbWl0PTI1O3RoaXMuZWRpdG9yPWE7dGhpcy5yZXNldCgpfTtlLnByb3RvdHlwZT17dHlwZTpmdW5jdGlvbihhLGIpe3ZhciBjPWUuZ2V0S2V5R3JvdXAoYSksZD10aGlzLnN0cm9rZXNSZWNvcmRlZFtjXSsxO2I9Ynx8ZD49dGhpcy5zdHJva2VzTGltaXQ7dGhpcy50eXBpbmd8fCh0aGlzLmhhc1VuZG89dGhpcy50eXBpbmc9ITAsdGhpcy5oYXNSZWRvPSExLHRoaXMub25DaGFuZ2UoKSk7Yj8oZD0wLHRoaXMuZWRpdG9yLmZpcmUoXCJzYXZlU25hcHNob3RcIikpOnRoaXMuZWRpdG9yLmZpcmUoXCJjaGFuZ2VcIik7dGhpcy5zdHJva2VzUmVjb3JkZWRbY109XG5kO3RoaXMucHJldmlvdXNLZXlHcm91cD1jfSxrZXlHcm91cENoYW5nZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGUuZ2V0S2V5R3JvdXAoYSkhPXRoaXMucHJldmlvdXNLZXlHcm91cH0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnNuYXBzaG90cz1bXTt0aGlzLmluZGV4PS0xO3RoaXMuY3VycmVudEltYWdlPW51bGw7dGhpcy5oYXNSZWRvPXRoaXMuaGFzVW5kbz0hMTt0aGlzLmxvY2tlZD1udWxsO3RoaXMucmVzZXRUeXBlKCl9LHJlc2V0VHlwZTpmdW5jdGlvbigpe3RoaXMuc3Ryb2tlc1JlY29yZGVkPVswLDBdO3RoaXMudHlwaW5nPSExO3RoaXMucHJldmlvdXNLZXlHcm91cD0tMX0scmVmcmVzaFN0YXRlOmZ1bmN0aW9uKCl7dGhpcy5oYXNVbmRvPSEhdGhpcy5nZXROZXh0SW1hZ2UoITApO3RoaXMuaGFzUmVkbz0hIXRoaXMuZ2V0TmV4dEltYWdlKCExKTt0aGlzLnJlc2V0VHlwZSgpO3RoaXMub25DaGFuZ2UoKX0sc2F2ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5lZGl0b3I7aWYodGhpcy5sb2NrZWR8fFxuXCJyZWFkeVwiIT1kLnN0YXR1c3x8XCJ3eXNpd3lnXCIhPWQubW9kZSlyZXR1cm4hMTt2YXIgZT1kLmVkaXRhYmxlKCk7aWYoIWV8fFwicmVhZHlcIiE9ZS5zdGF0dXMpcmV0dXJuITE7ZT10aGlzLnNuYXBzaG90cztifHwoYj1uZXcgZihkKSk7aWYoITE9PT1iLmNvbnRlbnRzKXJldHVybiExO2lmKHRoaXMuY3VycmVudEltYWdlKWlmKGIuZXF1YWxzQ29udGVudCh0aGlzLmN1cnJlbnRJbWFnZSkpe2lmKGF8fGIuZXF1YWxzU2VsZWN0aW9uKHRoaXMuY3VycmVudEltYWdlKSlyZXR1cm4hMX1lbHNlITEhPT1jJiZkLmZpcmUoXCJjaGFuZ2VcIik7ZS5zcGxpY2UodGhpcy5pbmRleCsxLGUubGVuZ3RoLXRoaXMuaW5kZXgtMSk7ZS5sZW5ndGg9PXRoaXMubGltaXQmJmUuc2hpZnQoKTt0aGlzLmluZGV4PWUucHVzaChiKS0xO3RoaXMuY3VycmVudEltYWdlPWI7ITEhPT1jJiZ0aGlzLnJlZnJlc2hTdGF0ZSgpO3JldHVybiEwfSxyZXN0b3JlSW1hZ2U6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lZGl0b3IsXG5jO2EuYm9va21hcmtzJiYoYi5mb2N1cygpLGM9Yi5nZXRTZWxlY3Rpb24oKSk7dGhpcy5sb2NrZWQ9e2xldmVsOjk5OX07dGhpcy5lZGl0b3IubG9hZFNuYXBzaG90KGEuY29udGVudHMpO2EuYm9va21hcmtzP2Muc2VsZWN0Qm9va21hcmtzKGEuYm9va21hcmtzKTpDS0VESVRPUi5lbnYuaWUmJihjPXRoaXMuZWRpdG9yLmRvY3VtZW50LmdldEJvZHkoKS4kLmNyZWF0ZVRleHRSYW5nZSgpLGMuY29sbGFwc2UoITApLGMuc2VsZWN0KCkpO3RoaXMubG9ja2VkPW51bGw7dGhpcy5pbmRleD1hLmluZGV4O3RoaXMuY3VycmVudEltYWdlPXRoaXMuc25hcHNob3RzW3RoaXMuaW5kZXhdO3RoaXMudXBkYXRlKCk7dGhpcy5yZWZyZXNoU3RhdGUoKTtiLmZpcmUoXCJjaGFuZ2VcIil9LGdldE5leHRJbWFnZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNuYXBzaG90cyxjPXRoaXMuY3VycmVudEltYWdlLGQ7aWYoYylpZihhKWZvcihkPXRoaXMuaW5kZXgtMTswPD1kO2QtLSl7aWYoYT1iW2RdLCFjLmVxdWFsc0NvbnRlbnQoYSkpcmV0dXJuIGEuaW5kZXg9XG5kLGF9ZWxzZSBmb3IoZD10aGlzLmluZGV4KzE7ZDxiLmxlbmd0aDtkKyspaWYoYT1iW2RdLCFjLmVxdWFsc0NvbnRlbnQoYSkpcmV0dXJuIGEuaW5kZXg9ZCxhO3JldHVybiBudWxsfSxyZWRvYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVuYWJsZWQmJnRoaXMuaGFzUmVkb30sdW5kb2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmFibGVkJiZ0aGlzLmhhc1VuZG99LHVuZG86ZnVuY3Rpb24oKXtpZih0aGlzLnVuZG9hYmxlKCkpe3RoaXMuc2F2ZSghMCk7dmFyIGE9dGhpcy5nZXROZXh0SW1hZ2UoITApO2lmKGEpcmV0dXJuIHRoaXMucmVzdG9yZUltYWdlKGEpLCEwfXJldHVybiExfSxyZWRvOmZ1bmN0aW9uKCl7aWYodGhpcy5yZWRvYWJsZSgpJiYodGhpcy5zYXZlKCEwKSx0aGlzLnJlZG9hYmxlKCkpKXt2YXIgYT10aGlzLmdldE5leHRJbWFnZSghMSk7aWYoYSlyZXR1cm4gdGhpcy5yZXN0b3JlSW1hZ2UoYSksITB9cmV0dXJuITF9LHVwZGF0ZTpmdW5jdGlvbihhKXtpZighdGhpcy5sb2NrZWQpe2F8fFxuKGE9bmV3IGYodGhpcy5lZGl0b3IpKTtmb3IodmFyIGI9dGhpcy5pbmRleCxjPXRoaXMuc25hcHNob3RzOzA8YiYmdGhpcy5jdXJyZW50SW1hZ2UuZXF1YWxzQ29udGVudChjW2ItMV0pOyktLWI7Yy5zcGxpY2UoYix0aGlzLmluZGV4LWIrMSxhKTt0aGlzLmluZGV4PWI7dGhpcy5jdXJyZW50SW1hZ2U9YX19LHVwZGF0ZVNlbGVjdGlvbjpmdW5jdGlvbihhKXtpZighdGhpcy5zbmFwc2hvdHMubGVuZ3RoKXJldHVybiExO3ZhciBiPXRoaXMuc25hcHNob3RzLGM9YltiLmxlbmd0aC0xXTtyZXR1cm4gYy5lcXVhbHNDb250ZW50KGEpJiYhYy5lcXVhbHNTZWxlY3Rpb24oYSk/KHRoaXMuY3VycmVudEltYWdlPWJbYi5sZW5ndGgtMV09YSwhMCk6ITF9LGxvY2s6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmxvY2tlZCl0aGlzLmxvY2tlZC5sZXZlbCsrO2Vsc2UgaWYoYSl0aGlzLmxvY2tlZD17bGV2ZWw6MX07ZWxzZXt2YXIgYz1udWxsO2lmKGIpYz0hMDtlbHNle3ZhciBkPW5ldyBmKHRoaXMuZWRpdG9yLFxuITApO3RoaXMuY3VycmVudEltYWdlJiZ0aGlzLmN1cnJlbnRJbWFnZS5lcXVhbHNDb250ZW50KGQpJiYoYz1kKX10aGlzLmxvY2tlZD17dXBkYXRlOmMsbGV2ZWw6MX19fSx1bmxvY2s6ZnVuY3Rpb24oKXtpZih0aGlzLmxvY2tlZCYmIS0tdGhpcy5sb2NrZWQubGV2ZWwpe3ZhciBhPXRoaXMubG9ja2VkLnVwZGF0ZTt0aGlzLmxvY2tlZD1udWxsO2lmKCEwPT09YSl0aGlzLnVwZGF0ZSgpO2Vsc2UgaWYoYSl7dmFyIGI9bmV3IGYodGhpcy5lZGl0b3IsITApO2EuZXF1YWxzQ29udGVudChiKXx8dGhpcy51cGRhdGUoKX19fX07ZS5uYXZpZ2F0aW9uS2V5Q29kZXM9ezM3OjEsMzg6MSwzOToxLDQwOjEsMzY6MSwzNToxLDMzOjEsMzQ6MX07ZS5rZXlHcm91cHM9e1BSSU5UQUJMRTowLEZVTkNUSU9OQUw6MX07ZS5pc05hdmlnYXRpb25LZXk9ZnVuY3Rpb24oYSl7cmV0dXJuISFlLm5hdmlnYXRpb25LZXlDb2Rlc1thXX07ZS5nZXRLZXlHcm91cD1mdW5jdGlvbihhKXt2YXIgYj1lLmtleUdyb3VwcztcbnJldHVybiBuW2FdP2IuRlVOQ1RJT05BTDpiLlBSSU5UQUJMRX07ZS5nZXRPcHBvc2l0ZUtleUdyb3VwPWZ1bmN0aW9uKGEpe3ZhciBiPWUua2V5R3JvdXBzO3JldHVybiBhPT1iLkZVTkNUSU9OQUw/Yi5QUklOVEFCTEU6Yi5GVU5DVElPTkFMfTtlLmllRnVuY3Rpb25hbEtleXNCdWc9ZnVuY3Rpb24oYSl7cmV0dXJuIENLRURJVE9SLmVudi5pZSYmZS5nZXRLZXlHcm91cChhKT09ZS5rZXlHcm91cHMuRlVOQ1RJT05BTH07dmFyIGY9Q0tFRElUT1IucGx1Z2lucy51bmRvLkltYWdlPWZ1bmN0aW9uKGEsYil7dGhpcy5lZGl0b3I9YTthLmZpcmUoXCJiZWZvcmVVbmRvSW1hZ2VcIik7dmFyIGM9YS5nZXRTbmFwc2hvdCgpO0NLRURJVE9SLmVudi5pZSYmYyYmKGM9Yy5yZXBsYWNlKC9cXHMrZGF0YS1ja2UtZXhwYW5kbz1cIi4qP1wiL2csXCJcIikpO3RoaXMuY29udGVudHM9YztifHwodGhpcy5ib29rbWFya3M9KGM9YyYmYS5nZXRTZWxlY3Rpb24oKSkmJmMuY3JlYXRlQm9va21hcmtzMighMCkpO2EuZmlyZShcImFmdGVyVW5kb0ltYWdlXCIpfSxcbmg9L1xcYig/OmhyZWZ8c3JjfG5hbWUpPVwiW15cIl0qP1wiL2dpO2YucHJvdG90eXBlPXtlcXVhbHNDb250ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29udGVudHM7YT1hLmNvbnRlbnRzO0NLRURJVE9SLmVudi5pZSYmKENLRURJVE9SLmVudi5pZTdDb21wYXR8fENLRURJVE9SLmVudi5xdWlya3MpJiYoYj1iLnJlcGxhY2UoaCxcIlwiKSxhPWEucmVwbGFjZShoLFwiXCIpKTtyZXR1cm4gYiE9YT8hMTohMH0sZXF1YWxzU2VsZWN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYm9va21hcmtzO2E9YS5ib29rbWFya3M7aWYoYnx8YSl7aWYoIWJ8fCFhfHxiLmxlbmd0aCE9YS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY10sZT1hW2NdO2lmKGQuc3RhcnRPZmZzZXQhPWUuc3RhcnRPZmZzZXR8fGQuZW5kT2Zmc2V0IT1lLmVuZE9mZnNldHx8IUNLRURJVE9SLnRvb2xzLmFycmF5Q29tcGFyZShkLnN0YXJ0LGUuc3RhcnQpfHwhQ0tFRElUT1IudG9vbHMuYXJyYXlDb21wYXJlKGQuZW5kLFxuZS5lbmQpKXJldHVybiExfX1yZXR1cm4hMH19O3ZhciBrPUNLRURJVE9SLnBsdWdpbnMudW5kby5OYXRpdmVFZGl0aW5nSGFuZGxlcj1mdW5jdGlvbihhKXt0aGlzLnVuZG9NYW5hZ2VyPWE7dGhpcy5pZ25vcmVJbnB1dEV2ZW50PSExO3RoaXMua2V5RXZlbnRzU3RhY2s9bmV3IG07dGhpcy5sYXN0S2V5ZG93bkltYWdlPW51bGx9O2sucHJvdG90eXBlPXtvbktleWRvd246ZnVuY3Rpb24oYSl7dmFyIGI9YS5kYXRhLmdldEtleSgpO2lmKDIyOSE9PWIpaWYoLTE8Q0tFRElUT1IudG9vbHMuaW5kZXhPZihnLGEuZGF0YS5nZXRLZXlzdHJva2UoKSkpYS5kYXRhLnByZXZlbnREZWZhdWx0KCk7ZWxzZSBpZih0aGlzLmtleUV2ZW50c1N0YWNrLmNsZWFuVXAoYSksYT10aGlzLnVuZG9NYW5hZ2VyLHRoaXMua2V5RXZlbnRzU3RhY2suZ2V0TGFzdChiKXx8dGhpcy5rZXlFdmVudHNTdGFjay5wdXNoKGIpLHRoaXMubGFzdEtleWRvd25JbWFnZT1uZXcgZihhLmVkaXRvciksZS5pc05hdmlnYXRpb25LZXkoYil8fFxudGhpcy51bmRvTWFuYWdlci5rZXlHcm91cENoYW5nZWQoYikpaWYoYS5zdHJva2VzUmVjb3JkZWRbMF18fGEuc3Ryb2tlc1JlY29yZGVkWzFdKWEuc2F2ZSghMSx0aGlzLmxhc3RLZXlkb3duSW1hZ2UsITEpLGEucmVzZXRUeXBlKCl9LG9uSW5wdXQ6ZnVuY3Rpb24oKXtpZih0aGlzLmlnbm9yZUlucHV0RXZlbnQpdGhpcy5pZ25vcmVJbnB1dEV2ZW50PSExO2Vsc2V7dmFyIGE9dGhpcy5rZXlFdmVudHNTdGFjay5nZXRMYXN0KCk7YXx8KGE9dGhpcy5rZXlFdmVudHNTdGFjay5wdXNoKDApKTt0aGlzLmtleUV2ZW50c1N0YWNrLmluY3JlbWVudChhLmtleUNvZGUpO3RoaXMua2V5RXZlbnRzU3RhY2suZ2V0VG90YWxJbnB1dHMoKT49dGhpcy51bmRvTWFuYWdlci5zdHJva2VzTGltaXQmJih0aGlzLnVuZG9NYW5hZ2VyLnR5cGUoYS5rZXlDb2RlLCEwKSx0aGlzLmtleUV2ZW50c1N0YWNrLnJlc2V0SW5wdXRzKCkpfX0sb25LZXl1cDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnVuZG9NYW5hZ2VyO1xuYT1hLmRhdGEuZ2V0S2V5KCk7dmFyIGM9dGhpcy5rZXlFdmVudHNTdGFjay5nZXRUb3RhbElucHV0cygpO3RoaXMua2V5RXZlbnRzU3RhY2sucmVtb3ZlKGEpO2lmKCEoZS5pZUZ1bmN0aW9uYWxLZXlzQnVnKGEpJiZ0aGlzLmxhc3RLZXlkb3duSW1hZ2UmJnRoaXMubGFzdEtleWRvd25JbWFnZS5lcXVhbHNDb250ZW50KG5ldyBmKGIuZWRpdG9yLCEwKSkpKWlmKDA8YyliLnR5cGUoYSk7ZWxzZSBpZihlLmlzTmF2aWdhdGlvbktleShhKSl0aGlzLm9uTmF2aWdhdGlvbktleSghMCl9LG9uTmF2aWdhdGlvbktleTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnVuZG9NYW5hZ2VyOyFhJiZiLnNhdmUoITAsbnVsbCwhMSl8fGIudXBkYXRlU2VsZWN0aW9uKG5ldyBmKGIuZWRpdG9yKSk7Yi5yZXNldFR5cGUoKX0saWdub3JlSW5wdXRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKCl7dGhpcy5pZ25vcmVJbnB1dEV2ZW50PSEwfSxhdHRhY2hMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnVuZG9NYW5hZ2VyLmVkaXRvcixcbmI9YS5lZGl0YWJsZSgpLGM9dGhpcztiLmF0dGFjaExpc3RlbmVyKGIsXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7Yy5vbktleWRvd24oYSk7aWYoZS5pZUZ1bmN0aW9uYWxLZXlzQnVnKGEuZGF0YS5nZXRLZXkoKSkpYy5vbklucHV0KCl9LG51bGwsbnVsbCw5OTkpO2IuYXR0YWNoTGlzdGVuZXIoYixDS0VESVRPUi5lbnYuaWU/XCJrZXlwcmVzc1wiOlwiaW5wdXRcIixjLm9uSW5wdXQsYyxudWxsLDk5OSk7Yi5hdHRhY2hMaXN0ZW5lcihiLFwia2V5dXBcIixjLm9uS2V5dXAsYyxudWxsLDk5OSk7Yi5hdHRhY2hMaXN0ZW5lcihiLFwicGFzdGVcIixjLmlnbm9yZUlucHV0RXZlbnRMaXN0ZW5lcixjLG51bGwsOTk5KTtiLmF0dGFjaExpc3RlbmVyKGIsXCJkcm9wXCIsYy5pZ25vcmVJbnB1dEV2ZW50TGlzdGVuZXIsYyxudWxsLDk5OSk7Yi5hdHRhY2hMaXN0ZW5lcihiLmlzSW5saW5lKCk/YjphLmRvY3VtZW50LmdldERvY3VtZW50RWxlbWVudCgpLFwiY2xpY2tcIixmdW5jdGlvbigpe2Mub25OYXZpZ2F0aW9uS2V5KCl9LFxubnVsbCxudWxsLDk5OSk7Yi5hdHRhY2hMaXN0ZW5lcih0aGlzLnVuZG9NYW5hZ2VyLmVkaXRvcixcImJsdXJcIixmdW5jdGlvbigpe2Mua2V5RXZlbnRzU3RhY2sucmVtb3ZlKDkpfSxudWxsLG51bGwsOTk5KX19O3ZhciBtPUNLRURJVE9SLnBsdWdpbnMudW5kby5LZXlFdmVudHNTdGFjaz1mdW5jdGlvbigpe3RoaXMuc3RhY2s9W119O20ucHJvdG90eXBlPXtwdXNoOmZ1bmN0aW9uKGEpe2E9dGhpcy5zdGFjay5wdXNoKHtrZXlDb2RlOmEsaW5wdXRzOjB9KTtyZXR1cm4gdGhpcy5zdGFja1thLTFdfSxnZXRMYXN0SW5kZXg6ZnVuY3Rpb24oYSl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGEpcmV0dXJuIHRoaXMuc3RhY2subGVuZ3RoLTE7Zm9yKHZhciBiPXRoaXMuc3RhY2subGVuZ3RoO2ItLTspaWYodGhpcy5zdGFja1tiXS5rZXlDb2RlPT1hKXJldHVybiBiO3JldHVybi0xfSxnZXRMYXN0OmZ1bmN0aW9uKGEpe2E9dGhpcy5nZXRMYXN0SW5kZXgoYSk7cmV0dXJuLTEhPWE/dGhpcy5zdGFja1thXTpcbm51bGx9LGluY3JlbWVudDpmdW5jdGlvbihhKXt0aGlzLmdldExhc3QoYSkuaW5wdXRzKyt9LHJlbW92ZTpmdW5jdGlvbihhKXthPXRoaXMuZ2V0TGFzdEluZGV4KGEpOy0xIT1hJiZ0aGlzLnN0YWNrLnNwbGljZShhLDEpfSxyZXNldElucHV0czpmdW5jdGlvbihhKXtpZihcIm51bWJlclwiPT10eXBlb2YgYSl0aGlzLmdldExhc3QoYSkuaW5wdXRzPTA7ZWxzZSBmb3IoYT10aGlzLnN0YWNrLmxlbmd0aDthLS07KXRoaXMuc3RhY2tbYV0uaW5wdXRzPTB9LGdldFRvdGFsSW5wdXRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuc3RhY2subGVuZ3RoLGI9MDthLS07KWIrPXRoaXMuc3RhY2tbYV0uaW5wdXRzO3JldHVybiBifSxjbGVhblVwOmZ1bmN0aW9uKGEpe2E9YS5kYXRhLiQ7YS5jdHJsS2V5fHxhLm1ldGFLZXl8fHRoaXMucmVtb3ZlKDE3KTthLnNoaWZ0S2V5fHx0aGlzLnJlbW92ZSgxNik7YS5hbHRLZXl8fHRoaXMucmVtb3ZlKDE4KX19fSkoKTtDS0VESVRPUi5wbHVnaW5zLmFkZChcIndzY1wiLHtyZXF1aXJlczpcImRpYWxvZ1wiLHBhcnNlQXBpOmZ1bmN0aW9uKGEpe2EuY29uZmlnLndzY19vbkZpbmlzaD1cImZ1bmN0aW9uXCI9PT10eXBlb2YgYS5jb25maWcud3NjX29uRmluaXNoP2EuY29uZmlnLndzY19vbkZpbmlzaDpmdW5jdGlvbigpe307YS5jb25maWcud3NjX29uQ2xvc2U9XCJmdW5jdGlvblwiPT09dHlwZW9mIGEuY29uZmlnLndzY19vbkNsb3NlP2EuY29uZmlnLndzY19vbkNsb3NlOmZ1bmN0aW9uKCl7fX0scGFyc2VDb25maWc6ZnVuY3Rpb24oYSl7YS5jb25maWcud3NjX2N1c3RvbWVySWQ9YS5jb25maWcud3NjX2N1c3RvbWVySWR8fENLRURJVE9SLmNvbmZpZy53c2NfY3VzdG9tZXJJZHx8XCIxOnVhM3h3MS0yWHlHSjMtR1dydUQzLTZPRk5UMS1vWGN1QjEtblI2QnA0LWhnUUhjLUVjWW5nMy1zZFJYRzMtTk9mRmtcIjthLmNvbmZpZy53c2NfY3VzdG9tRGljdGlvbmFyeUlkcz1hLmNvbmZpZy53c2NfY3VzdG9tRGljdGlvbmFyeUlkc3x8XG5DS0VESVRPUi5jb25maWcud3NjX2N1c3RvbURpY3Rpb25hcnlJZHN8fFwiXCI7YS5jb25maWcud3NjX3VzZXJEaWN0aW9uYXJ5TmFtZT1hLmNvbmZpZy53c2NfdXNlckRpY3Rpb25hcnlOYW1lfHxDS0VESVRPUi5jb25maWcud3NjX3VzZXJEaWN0aW9uYXJ5TmFtZXx8XCJcIjthLmNvbmZpZy53c2NfY3VzdG9tTG9hZGVyU2NyaXB0PWEuY29uZmlnLndzY19jdXN0b21Mb2FkZXJTY3JpcHR8fENLRURJVE9SLmNvbmZpZy53c2NfY3VzdG9tTG9hZGVyU2NyaXB0O0NLRURJVE9SLmNvbmZpZy53c2NfY21kPWEuY29uZmlnLndzY19jbWR8fENLRURJVE9SLmNvbmZpZy53c2NfY21kfHxcInNwZWxsXCI7Q0tFRElUT1IuY29uZmlnLndzY192ZXJzaW9uPVwidjQuMy4wLW1hc3Rlci1kNzY5MjMzXCI7Q0tFRElUT1IuY29uZmlnLndzY19yZW1vdmVHbG9iYWxWYXJpYWJsZT0hMH0saW5pdDpmdW5jdGlvbihhKXt2YXIgYj1DS0VESVRPUi5lbnY7dGhpcy5wYXJzZUNvbmZpZyhhKTt0aGlzLnBhcnNlQXBpKGEpO1xuYS5hZGRDb21tYW5kKFwiY2hlY2tzcGVsbFwiLG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKFwiY2hlY2tzcGVsbFwiKSkubW9kZXM9e3d5c2l3eWc6IUNLRURJVE9SLmVudi5vcGVyYSYmIUNLRURJVE9SLmVudi5haXImJmRvY3VtZW50LmRvbWFpbj09d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lJiYhKGIuaWUmJig4PmIudmVyc2lvbnx8Yi5xdWlya3MpKX07XCJ1bmRlZmluZWRcIj09dHlwZW9mIGEucGx1Z2lucy5zY2F5dCYmYS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKFwiU3BlbGxDaGVja2VyXCIse2xhYmVsOmEubGFuZy53c2MudG9vbGJhcixjbGljazpmdW5jdGlvbihhKXt2YXIgYj1hLmVsZW1lbnRNb2RlPT1DS0VESVRPUi5FTEVNRU5UX01PREVfSU5MSU5FP2EuY29udGFpbmVyLmdldFRleHQoKTphLmRvY3VtZW50LmdldEJvZHkoKS5nZXRUZXh0KCk7KGI9Yi5yZXBsYWNlKC9cXHMvZyxcIlwiKSk/YS5leGVjQ29tbWFuZChcImNoZWNrc3BlbGxcIik6YWxlcnQoXCJOb3RoaW5nIHRvIGNoZWNrIVwiKX0sXG50b29sYmFyOlwic3BlbGxjaGVja2VyLDEwXCJ9KTtDS0VESVRPUi5kaWFsb2cuYWRkKFwiY2hlY2tzcGVsbFwiLHRoaXMucGF0aCsoQ0tFRElUT1IuZW52LmllJiY3Pj1DS0VESVRPUi5lbnYudmVyc2lvbj9cImRpYWxvZ3Mvd3NjX2llLmpzXCI6d2luZG93LnBvc3RNZXNzYWdlP1wiZGlhbG9ncy93c2MuanNcIjpcImRpYWxvZ3Mvd3NjX2llLmpzXCIpKX19KTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBtKGEsZCl7Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHRoaXMse2VkaXRvcjphLGVkaXRhYmxlOmEuZWRpdGFibGUoKSxkb2M6YS5kb2N1bWVudCx3aW46YS53aW5kb3d9LGQsITApO3RoaXMuaW5saW5lPXRoaXMuZWRpdGFibGUuaXNJbmxpbmUoKTt0aGlzLmlubGluZXx8KHRoaXMuZnJhbWU9dGhpcy53aW4uZ2V0RnJhbWUoKSk7dGhpcy50YXJnZXQ9dGhpc1t0aGlzLmlubGluZT9cImVkaXRhYmxlXCI6XCJkb2NcIl19ZnVuY3Rpb24gbihhLGQpe0NLRURJVE9SLnRvb2xzLmV4dGVuZCh0aGlzLGQse2VkaXRvcjphfSwhMCl9ZnVuY3Rpb24gcChhLGQpe3ZhciBiPWEuZWRpdGFibGUoKTtDS0VESVRPUi50b29scy5leHRlbmQodGhpcyx7ZWRpdG9yOmEsZWRpdGFibGU6YixpbmxpbmU6Yi5pc0lubGluZSgpLGRvYzphLmRvY3VtZW50LHdpbjphLndpbmRvdyxjb250YWluZXI6Q0tFRElUT1IuZG9jdW1lbnQuZ2V0Qm9keSgpLHdpblRvcDpDS0VESVRPUi5kb2N1bWVudC5nZXRXaW5kb3coKX0sXG5kLCEwKTt0aGlzLmhpZGRlbj17fTt0aGlzLnZpc2libGU9e307dGhpcy5pbmxpbmV8fCh0aGlzLmZyYW1lPXRoaXMud2luLmdldEZyYW1lKCkpO3RoaXMucXVlcnlWaWV3cG9ydCgpO3ZhciBjPUNLRURJVE9SLnRvb2xzLmJpbmQodGhpcy5xdWVyeVZpZXdwb3J0LHRoaXMpLGU9Q0tFRElUT1IudG9vbHMuYmluZCh0aGlzLmhpZGVWaXNpYmxlLHRoaXMpLGc9Q0tFRElUT1IudG9vbHMuYmluZCh0aGlzLnJlbW92ZUFsbCx0aGlzKTtiLmF0dGFjaExpc3RlbmVyKHRoaXMud2luVG9wLFwicmVzaXplXCIsYyk7Yi5hdHRhY2hMaXN0ZW5lcih0aGlzLndpblRvcCxcInNjcm9sbFwiLGMpO2IuYXR0YWNoTGlzdGVuZXIodGhpcy53aW5Ub3AsXCJyZXNpemVcIixlKTtiLmF0dGFjaExpc3RlbmVyKHRoaXMud2luLFwic2Nyb2xsXCIsZSk7Yi5hdHRhY2hMaXN0ZW5lcih0aGlzLmlubGluZT9iOnRoaXMuZnJhbWUsXCJtb3VzZW91dFwiLGZ1bmN0aW9uKGEpe3ZhciBiPWEuZGF0YS4kLmNsaWVudFg7YT1hLmRhdGEuJC5jbGllbnRZO1xudGhpcy5xdWVyeVZpZXdwb3J0KCk7KGI8PXRoaXMucmVjdC5sZWZ0fHxiPj10aGlzLnJlY3QucmlnaHR8fGE8PXRoaXMucmVjdC50b3B8fGE+PXRoaXMucmVjdC5ib3R0b20pJiZ0aGlzLmhpZGVWaXNpYmxlKCk7KDA+PWJ8fGI+PXRoaXMud2luVG9wUGFuZS53aWR0aHx8MD49YXx8YT49dGhpcy53aW5Ub3BQYW5lLmhlaWdodCkmJnRoaXMuaGlkZVZpc2libGUoKX0sdGhpcyk7Yi5hdHRhY2hMaXN0ZW5lcihhLFwicmVzaXplXCIsYyk7Yi5hdHRhY2hMaXN0ZW5lcihhLFwibW9kZVwiLGcpO2Eub24oXCJkZXN0cm95XCIsZyk7dGhpcy5saW5lVHBsPShuZXcgQ0tFRElUT1IudGVtcGxhdGUoJ1xceDNjZGl2IGRhdGEtY2tlLWxpbmV1dGlscy1saW5lXFx4M2RcIjFcIiBjbGFzc1xceDNkXCJja2VfcmVzZXRfYWxsXCIgc3R5bGVcXHgzZFwie2xpbmVTdHlsZX1cIlxceDNlXFx4M2NzcGFuIHN0eWxlXFx4M2RcInt0aXBMZWZ0U3R5bGV9XCJcXHgzZVxceDI2bmJzcDtcXHgzYy9zcGFuXFx4M2VcXHgzY3NwYW4gc3R5bGVcXHgzZFwie3RpcFJpZ2h0U3R5bGV9XCJcXHgzZVxceDI2bmJzcDtcXHgzYy9zcGFuXFx4M2VcXHgzYy9kaXZcXHgzZScpKS5vdXRwdXQoe2xpbmVTdHlsZTpDS0VESVRPUi50b29scy53cml0ZUNzc1RleHQoQ0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LFxudCx0aGlzLmxpbmVTdHlsZSwhMCkpLHRpcExlZnRTdHlsZTpDS0VESVRPUi50b29scy53cml0ZUNzc1RleHQoQ0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LHEse2xlZnQ6XCIwcHhcIixcImJvcmRlci1sZWZ0LWNvbG9yXCI6XCJyZWRcIixcImJvcmRlci13aWR0aFwiOlwiNnB4IDAgNnB4IDZweFwifSx0aGlzLnRpcENzcyx0aGlzLnRpcExlZnRTdHlsZSwhMCkpLHRpcFJpZ2h0U3R5bGU6Q0tFRElUT1IudG9vbHMud3JpdGVDc3NUZXh0KENLRURJVE9SLnRvb2xzLmV4dGVuZCh7fSxxLHtyaWdodDpcIjBweFwiLFwiYm9yZGVyLXJpZ2h0LWNvbG9yXCI6XCJyZWRcIixcImJvcmRlci13aWR0aFwiOlwiNnB4IDZweCA2cHggMFwifSx0aGlzLnRpcENzcyx0aGlzLnRpcFJpZ2h0U3R5bGUsITApKX0pfWZ1bmN0aW9uIGwoYSl7dmFyIGQ7aWYoZD1hJiZhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVClkPSEoclthLmdldENvbXB1dGVkU3R5bGUoXCJmbG9hdFwiKV18fHJbYS5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKV0pO3JldHVybiBkJiZcbiF1W2EuZ2V0Q29tcHV0ZWRTdHlsZShcInBvc2l0aW9uXCIpXX1DS0VESVRPUi5wbHVnaW5zLmFkZChcImxpbmV1dGlsc1wiKTtDS0VESVRPUi5MSU5FVVRJTFNfQkVGT1JFPTE7Q0tFRElUT1IuTElORVVUSUxTX0FGVEVSPTI7Q0tFRElUT1IuTElORVVUSUxTX0lOU0lERT00O20ucHJvdG90eXBlPXtzdGFydDpmdW5jdGlvbihhKXt2YXIgZD10aGlzLGI9dGhpcy5lZGl0b3IsYz10aGlzLmRvYyxlLGcsZixoLGs9Q0tFRElUT1IudG9vbHMuZXZlbnRzQnVmZmVyKDUwLGZ1bmN0aW9uKCl7Yi5yZWFkT25seXx8XCJ3eXNpd3lnXCIhPWIubW9kZXx8KGQucmVsYXRpb25zPXt9LChnPWMuJC5lbGVtZW50RnJvbVBvaW50KGYsaCkpJiZnLm5vZGVUeXBlJiYoZT1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoZyksZC50cmF2ZXJzZVNlYXJjaChlKSxpc05hTihmK2gpfHxkLnBpeGVsU2VhcmNoKGUsZixoKSxhJiZhKGQucmVsYXRpb25zLGYsaCkpKX0pO3RoaXMubGlzdGVuZXI9dGhpcy5lZGl0YWJsZS5hdHRhY2hMaXN0ZW5lcih0aGlzLnRhcmdldCxcblwibW91c2Vtb3ZlXCIsZnVuY3Rpb24oYSl7Zj1hLmRhdGEuJC5jbGllbnRYO2g9YS5kYXRhLiQuY2xpZW50WTtrLmlucHV0KCl9KTt0aGlzLmVkaXRhYmxlLmF0dGFjaExpc3RlbmVyKHRoaXMuaW5saW5lP3RoaXMuZWRpdGFibGU6dGhpcy5mcmFtZSxcIm1vdXNlb3V0XCIsZnVuY3Rpb24oKXtrLnJlc2V0KCl9KX0sc3RvcDpmdW5jdGlvbigpe3RoaXMubGlzdGVuZXImJnRoaXMubGlzdGVuZXIucmVtb3ZlTGlzdGVuZXIoKX0sZ2V0UmFuZ2U6ZnVuY3Rpb24oKXt2YXIgYT17fTthW0NLRURJVE9SLkxJTkVVVElMU19CRUZPUkVdPUNLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVDthW0NLRURJVE9SLkxJTkVVVElMU19BRlRFUl09Q0tFRElUT1IuUE9TSVRJT05fQUZURVJfRU5EO2FbQ0tFRElUT1IuTElORVVUSUxTX0lOU0lERV09Q0tFRElUT1IuUE9TSVRJT05fQUZURVJfU1RBUlQ7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBiPXRoaXMuZWRpdG9yLmNyZWF0ZVJhbmdlKCk7Yi5tb3ZlVG9Qb3NpdGlvbih0aGlzLnJlbGF0aW9uc1tkLnVpZF0uZWxlbWVudCxcbmFbZC50eXBlXSk7cmV0dXJuIGJ9fSgpLHN0b3JlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyl7dmFyIGU9YS5nZXRVbmlxdWVJZCgpO2UgaW4gYz9jW2VdLnR5cGV8PWI6Y1tlXT17ZWxlbWVudDphLHR5cGU6Yn19cmV0dXJuIGZ1bmN0aW9uKGQsYil7dmFyIGM7YiZDS0VESVRPUi5MSU5FVVRJTFNfQUZURVImJmwoYz1kLmdldE5leHQoKSkmJmMuaXNWaXNpYmxlKCkmJihhKGMsQ0tFRElUT1IuTElORVVUSUxTX0JFRk9SRSx0aGlzLnJlbGF0aW9ucyksYl49Q0tFRElUT1IuTElORVVUSUxTX0FGVEVSKTtiJkNLRURJVE9SLkxJTkVVVElMU19JTlNJREUmJmwoYz1kLmdldEZpcnN0KCkpJiZjLmlzVmlzaWJsZSgpJiYoYShjLENLRURJVE9SLkxJTkVVVElMU19CRUZPUkUsdGhpcy5yZWxhdGlvbnMpLGJePUNLRURJVE9SLkxJTkVVVElMU19JTlNJREUpO2EoZCxiLHRoaXMucmVsYXRpb25zKX19KCksdHJhdmVyc2VTZWFyY2g6ZnVuY3Rpb24oYSl7dmFyIGQsYixjO2RvIGlmKGM9YS4kW1wiZGF0YS1ja2UtZXhwYW5kb1wiXSxcbiEoYyYmYyBpbiB0aGlzLnJlbGF0aW9ucykpe2lmKGEuZXF1YWxzKHRoaXMuZWRpdGFibGUpKWJyZWFrO2lmKGwoYSkpZm9yKGQgaW4gdGhpcy5sb29rdXBzKShiPXRoaXMubG9va3Vwc1tkXShhKSkmJnRoaXMuc3RvcmUoYSxiKX13aGlsZSgoIWF8fGEudHlwZSE9Q0tFRElUT1IuTk9ERV9FTEVNRU5UfHxcInRydWVcIiE9YS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikpJiYoYT1hLmdldFBhcmVudCgpKSl9LHBpeGVsU2VhcmNoOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGMsZSxnLGYpe2Zvcih2YXIgaD0wLGs7ZihlKTspe2UrPWc7aWYoMjU9PSsraClicmVhaztpZihrPXRoaXMuZG9jLiQuZWxlbWVudEZyb21Qb2ludChjLGUpKWlmKGs9PWEpaD0wO2Vsc2UgaWYoZChhLGspJiYoaD0wLGwoaz1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoaykpKSlyZXR1cm4ga319dmFyIGQ9Q0tFRElUT1IuZW52LmllfHxDS0VESVRPUi5lbnYud2Via2l0P2Z1bmN0aW9uKGEsYyl7cmV0dXJuIGEuY29udGFpbnMoYyl9OlxuZnVuY3Rpb24oYSxjKXtyZXR1cm4hIShhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGMpJjE2KX07cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXt2YXIgZz10aGlzLndpbi5nZXRWaWV3UGFuZVNpemUoKS5oZWlnaHQsZj1hLmNhbGwodGhpcyxiLiQsYyxkLC0xLGZ1bmN0aW9uKGEpe3JldHVybiAwPGF9KTtjPWEuY2FsbCh0aGlzLGIuJCxjLGQsMSxmdW5jdGlvbihhKXtyZXR1cm4gYTxnfSk7aWYoZilmb3IodGhpcy50cmF2ZXJzZVNlYXJjaChmKTshZi5nZXRQYXJlbnQoKS5lcXVhbHMoYik7KWY9Zi5nZXRQYXJlbnQoKTtpZihjKWZvcih0aGlzLnRyYXZlcnNlU2VhcmNoKGMpOyFjLmdldFBhcmVudCgpLmVxdWFscyhiKTspYz1jLmdldFBhcmVudCgpO2Zvcig7Znx8Yzspe2YmJihmPWYuZ2V0TmV4dChsKSk7aWYoIWZ8fGYuZXF1YWxzKGMpKWJyZWFrO3RoaXMudHJhdmVyc2VTZWFyY2goZik7YyYmKGM9Yy5nZXRQcmV2aW91cyhsKSk7aWYoIWN8fGMuZXF1YWxzKGYpKWJyZWFrO3RoaXMudHJhdmVyc2VTZWFyY2goYyl9fX0oKSxcbmdyZWVkeVNlYXJjaDpmdW5jdGlvbigpe3RoaXMucmVsYXRpb25zPXt9O2Zvcih2YXIgYT10aGlzLmVkaXRhYmxlLmdldEVsZW1lbnRzQnlUYWcoXCIqXCIpLGQ9MCxiLGMsZTtiPWEuZ2V0SXRlbShkKyspOylpZighYi5lcXVhbHModGhpcy5lZGl0YWJsZSkmJmIudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYoYi5oYXNBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIil8fCFiLmlzUmVhZE9ubHkoKSkmJmwoYikmJmIuaXNWaXNpYmxlKCkpZm9yKGUgaW4gdGhpcy5sb29rdXBzKShjPXRoaXMubG9va3Vwc1tlXShiKSkmJnRoaXMuc3RvcmUoYixjKTtyZXR1cm4gdGhpcy5yZWxhdGlvbnN9fTtuLnByb3RvdHlwZT17bG9jYXRlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIpe3ZhciBjPWEuZWxlbWVudFtiPT09Q0tFRElUT1IuTElORVVUSUxTX0JFRk9SRT9cImdldFByZXZpb3VzXCI6XCJnZXROZXh0XCJdKCk7cmV0dXJuIGMmJmwoYyk/KGEuc2libGluZ1JlY3Q9Yy5nZXRDbGllbnRSZWN0KCksXG5iPT1DS0VESVRPUi5MSU5FVVRJTFNfQkVGT1JFPyhhLnNpYmxpbmdSZWN0LmJvdHRvbSthLmVsZW1lbnRSZWN0LnRvcCkvMjooYS5lbGVtZW50UmVjdC5ib3R0b20rYS5zaWJsaW5nUmVjdC50b3ApLzIpOmI9PUNLRURJVE9SLkxJTkVVVElMU19CRUZPUkU/YS5lbGVtZW50UmVjdC50b3A6YS5lbGVtZW50UmVjdC5ib3R0b219cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBiO3RoaXMubG9jYXRpb25zPXt9O2Zvcih2YXIgYyBpbiBkKWI9ZFtjXSxiLmVsZW1lbnRSZWN0PWIuZWxlbWVudC5nZXRDbGllbnRSZWN0KCksYi50eXBlJkNLRURJVE9SLkxJTkVVVElMU19CRUZPUkUmJnRoaXMuc3RvcmUoYyxDS0VESVRPUi5MSU5FVVRJTFNfQkVGT1JFLGEoYixDS0VESVRPUi5MSU5FVVRJTFNfQkVGT1JFKSksYi50eXBlJkNLRURJVE9SLkxJTkVVVElMU19BRlRFUiYmdGhpcy5zdG9yZShjLENLRURJVE9SLkxJTkVVVElMU19BRlRFUixhKGIsQ0tFRElUT1IuTElORVVUSUxTX0FGVEVSKSksYi50eXBlJlxuQ0tFRElUT1IuTElORVVUSUxTX0lOU0lERSYmdGhpcy5zdG9yZShjLENLRURJVE9SLkxJTkVVVElMU19JTlNJREUsKGIuZWxlbWVudFJlY3QudG9wK2IuZWxlbWVudFJlY3QuYm90dG9tKS8yKTtyZXR1cm4gdGhpcy5sb2NhdGlvbnN9fSgpLHNvcnQ6ZnVuY3Rpb24oKXt2YXIgYSxkLGIsYztyZXR1cm4gZnVuY3Rpb24oZSxnKXthPXRoaXMubG9jYXRpb25zO2Q9W107Zm9yKHZhciBmIGluIGEpZm9yKHZhciBoIGluIGFbZl0paWYoYj1NYXRoLmFicyhlLWFbZl1baF0pLGQubGVuZ3RoKXtmb3IoYz0wO2M8ZC5sZW5ndGg7YysrKWlmKGI8ZFtjXS5kaXN0KXtkLnNwbGljZShjLDAse3VpZDorZix0eXBlOmgsZGlzdDpifSk7YnJlYWt9Yz09ZC5sZW5ndGgmJmQucHVzaCh7dWlkOitmLHR5cGU6aCxkaXN0OmJ9KX1lbHNlIGQucHVzaCh7dWlkOitmLHR5cGU6aCxkaXN0OmJ9KTtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgZz9kLnNsaWNlKDAsZyk6ZH19KCksc3RvcmU6ZnVuY3Rpb24oYSxcbmQsYil7dGhpcy5sb2NhdGlvbnNbYV18fCh0aGlzLmxvY2F0aW9uc1thXT17fSk7dGhpcy5sb2NhdGlvbnNbYV1bZF09Yn19O3ZhciBxPXtkaXNwbGF5OlwiYmxvY2tcIix3aWR0aDpcIjBweFwiLGhlaWdodDpcIjBweFwiLFwiYm9yZGVyLWNvbG9yXCI6XCJ0cmFuc3BhcmVudFwiLFwiYm9yZGVyLXN0eWxlXCI6XCJzb2xpZFwiLHBvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6XCItNnB4XCJ9LHQ9e2hlaWdodDpcIjBweFwiLFwiYm9yZGVyLXRvcFwiOlwiMXB4IGRhc2hlZCByZWRcIixwb3NpdGlvbjpcImFic29sdXRlXCIsXCJ6LWluZGV4XCI6OTk5OX07cC5wcm90b3R5cGU9e3JlbW92ZUFsbDpmdW5jdGlvbigpe2Zvcih2YXIgYSBpbiB0aGlzLmhpZGRlbil0aGlzLmhpZGRlblthXS5yZW1vdmUoKSxkZWxldGUgdGhpcy5oaWRkZW5bYV07Zm9yKGEgaW4gdGhpcy52aXNpYmxlKXRoaXMudmlzaWJsZVthXS5yZW1vdmUoKSxkZWxldGUgdGhpcy52aXNpYmxlW2FdfSxoaWRlTGluZTpmdW5jdGlvbihhKXt2YXIgZD1hLmdldFVuaXF1ZUlkKCk7XG5hLmhpZGUoKTt0aGlzLmhpZGRlbltkXT1hO2RlbGV0ZSB0aGlzLnZpc2libGVbZF19LHNob3dMaW5lOmZ1bmN0aW9uKGEpe3ZhciBkPWEuZ2V0VW5pcXVlSWQoKTthLnNob3coKTt0aGlzLnZpc2libGVbZF09YTtkZWxldGUgdGhpcy5oaWRkZW5bZF19LGhpZGVWaXNpYmxlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHRoaXMudmlzaWJsZSl0aGlzLmhpZGVMaW5lKHRoaXMudmlzaWJsZVthXSl9LHBsYWNlTGluZTpmdW5jdGlvbihhLGQpe3ZhciBiLGMsZTtpZihiPXRoaXMuZ2V0U3R5bGUoYS51aWQsYS50eXBlKSl7Zm9yKGUgaW4gdGhpcy52aXNpYmxlKWlmKHRoaXMudmlzaWJsZVtlXS5nZXRDdXN0b21EYXRhKFwiaGFzaFwiKSE9PXRoaXMuaGFzaCl7Yz10aGlzLnZpc2libGVbZV07YnJlYWt9aWYoIWMpZm9yKGUgaW4gdGhpcy5oaWRkZW4paWYodGhpcy5oaWRkZW5bZV0uZ2V0Q3VzdG9tRGF0YShcImhhc2hcIikhPT10aGlzLmhhc2gpe3RoaXMuc2hvd0xpbmUoYz10aGlzLmhpZGRlbltlXSk7XG5icmVha31jfHx0aGlzLnNob3dMaW5lKGM9dGhpcy5hZGRMaW5lKCkpO2Muc2V0Q3VzdG9tRGF0YShcImhhc2hcIix0aGlzLmhhc2gpO3RoaXMudmlzaWJsZVtjLmdldFVuaXF1ZUlkKCldPWM7Yy5zZXRTdHlsZXMoYik7ZCYmZChjKX19LGdldFN0eWxlOmZ1bmN0aW9uKGEsZCl7dmFyIGI9dGhpcy5yZWxhdGlvbnNbYV0sYz10aGlzLmxvY2F0aW9uc1thXVtkXSxlPXt9O2Uud2lkdGg9Yi5zaWJsaW5nUmVjdD9NYXRoLm1heChiLnNpYmxpbmdSZWN0LndpZHRoLGIuZWxlbWVudFJlY3Qud2lkdGgpOmIuZWxlbWVudFJlY3Qud2lkdGg7ZS50b3A9dGhpcy5pbmxpbmU/Yyt0aGlzLndpblRvcFNjcm9sbC55LXRoaXMucmVjdC5yZWxhdGl2ZVk6dGhpcy5yZWN0LnRvcCt0aGlzLndpblRvcFNjcm9sbC55K2M7aWYoZS50b3AtdGhpcy53aW5Ub3BTY3JvbGwueTx0aGlzLnJlY3QudG9wfHxlLnRvcC10aGlzLndpblRvcFNjcm9sbC55PnRoaXMucmVjdC5ib3R0b20pcmV0dXJuITE7dGhpcy5pbmxpbmU/XG5lLmxlZnQ9Yi5lbGVtZW50UmVjdC5sZWZ0LXRoaXMucmVjdC5yZWxhdGl2ZVg6KDA8Yi5lbGVtZW50UmVjdC5sZWZ0P2UubGVmdD10aGlzLnJlY3QubGVmdCtiLmVsZW1lbnRSZWN0LmxlZnQ6KGUud2lkdGgrPWIuZWxlbWVudFJlY3QubGVmdCxlLmxlZnQ9dGhpcy5yZWN0LmxlZnQpLDA8KGI9ZS5sZWZ0K2Uud2lkdGgtKHRoaXMucmVjdC5sZWZ0K3RoaXMud2luUGFuZS53aWR0aCkpJiYoZS53aWR0aC09YikpO2UubGVmdCs9dGhpcy53aW5Ub3BTY3JvbGwueDtmb3IodmFyIGcgaW4gZSllW2ddPUNLRURJVE9SLnRvb2xzLmNzc0xlbmd0aChlW2ddKTtyZXR1cm4gZX0sYWRkTGluZTpmdW5jdGlvbigpe3ZhciBhPUNLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKHRoaXMubGluZVRwbCk7YS5hcHBlbmRUbyh0aGlzLmNvbnRhaW5lcik7cmV0dXJuIGF9LHByZXBhcmU6ZnVuY3Rpb24oYSxkKXt0aGlzLnJlbGF0aW9ucz1hO3RoaXMubG9jYXRpb25zPWQ7dGhpcy5oYXNoPU1hdGgucmFuZG9tKCl9LFxuY2xlYW51cDpmdW5jdGlvbigpe3ZhciBhLGQ7Zm9yKGQgaW4gdGhpcy52aXNpYmxlKWE9dGhpcy52aXNpYmxlW2RdLGEuZ2V0Q3VzdG9tRGF0YShcImhhc2hcIikhPT10aGlzLmhhc2gmJnRoaXMuaGlkZUxpbmUoYSl9LHF1ZXJ5Vmlld3BvcnQ6ZnVuY3Rpb24oKXt0aGlzLndpblBhbmU9dGhpcy53aW4uZ2V0Vmlld1BhbmVTaXplKCk7dGhpcy53aW5Ub3BTY3JvbGw9dGhpcy53aW5Ub3AuZ2V0U2Nyb2xsUG9zaXRpb24oKTt0aGlzLndpblRvcFBhbmU9dGhpcy53aW5Ub3AuZ2V0Vmlld1BhbmVTaXplKCk7dGhpcy5yZWN0PXRoaXMuZ2V0Q2xpZW50UmVjdCh0aGlzLmlubGluZT90aGlzLmVkaXRhYmxlOnRoaXMuZnJhbWUpfSxnZXRDbGllbnRSZWN0OmZ1bmN0aW9uKGEpe2E9YS5nZXRDbGllbnRSZWN0KCk7dmFyIGQ9dGhpcy5jb250YWluZXIuZ2V0RG9jdW1lbnRQb3NpdGlvbigpLGI9dGhpcy5jb250YWluZXIuZ2V0Q29tcHV0ZWRTdHlsZShcInBvc2l0aW9uXCIpO2EucmVsYXRpdmVYPWEucmVsYXRpdmVZPVxuMDtcInN0YXRpY1wiIT1iJiYoYS5yZWxhdGl2ZVk9ZC55LGEucmVsYXRpdmVYPWQueCxhLnRvcC09YS5yZWxhdGl2ZVksYS5ib3R0b20tPWEucmVsYXRpdmVZLGEubGVmdC09YS5yZWxhdGl2ZVgsYS5yaWdodC09YS5yZWxhdGl2ZVgpO3JldHVybiBhfX07dmFyIHI9e2xlZnQ6MSxyaWdodDoxLGNlbnRlcjoxfSx1PXthYnNvbHV0ZToxLGZpeGVkOjF9O0NLRURJVE9SLnBsdWdpbnMubGluZXV0aWxzPXtmaW5kZXI6bSxsb2NhdG9yOm4sbGluZXI6cH19KSgpOyhmdW5jdGlvbigpe2Z1bmN0aW9uIHAoYSl7dGhpcy5lZGl0b3I9YTt0aGlzLnJlZ2lzdGVyZWQ9e307dGhpcy5pbnN0YW5jZXM9e307dGhpcy5zZWxlY3RlZD1bXTt0aGlzLndpZGdldEhvbGRpbmdGb2N1c2VkRWRpdGFibGU9dGhpcy5mb2N1c2VkPW51bGw7dGhpcy5fPXtuZXh0SWQ6MCx1cGNhc3RzOltdLHVwY2FzdENhbGxiYWNrczpbXSxmaWx0ZXJzOnt9fTtGKHRoaXMpO0codGhpcyk7dGhpcy5vbihcImNoZWNrV2lkZ2V0c1wiLEgpO3RoaXMuZWRpdG9yLm9uKFwiY29udGVudERvbUludmFsaWRhdGVkXCIsdGhpcy5jaGVja1dpZGdldHMsdGhpcyk7SSh0aGlzKTtKKHRoaXMpO0sodGhpcyk7TCh0aGlzKTtNKHRoaXMpfWZ1bmN0aW9uIGcoYSxiLGMsZCxlKXt2YXIgZj1hLmVkaXRvcjtDS0VESVRPUi50b29scy5leHRlbmQodGhpcyxkLHtlZGl0b3I6ZixpZDpiLGlubGluZTpcInNwYW5cIj09Yy5nZXRQYXJlbnQoKS5nZXROYW1lKCksZWxlbWVudDpjLGRhdGE6Q0tFRElUT1IudG9vbHMuZXh0ZW5kKHt9LFxuXCJmdW5jdGlvblwiPT10eXBlb2YgZC5kZWZhdWx0cz9kLmRlZmF1bHRzKCk6ZC5kZWZhdWx0cyksZGF0YVJlYWR5OiExLGluaXRlZDohMSxyZWFkeTohMSxlZGl0OmcucHJvdG90eXBlLmVkaXQsZm9jdXNlZEVkaXRhYmxlOm51bGwsZGVmaW5pdGlvbjpkLHJlcG9zaXRvcnk6YSxkcmFnZ2FibGU6ITEhPT1kLmRyYWdnYWJsZSxfOntkb3duY2FzdEZuOmQuZG93bmNhc3QmJlwic3RyaW5nXCI9PXR5cGVvZiBkLmRvd25jYXN0P2QuZG93bmNhc3RzW2QuZG93bmNhc3RdOmQuZG93bmNhc3R9fSwhMCk7YS5maXJlKFwiaW5zdGFuY2VDcmVhdGVkXCIsdGhpcyk7Tih0aGlzLGQpO3RoaXMuaW5pdCYmdGhpcy5pbml0KCk7dGhpcy5pbml0ZWQ9ITA7KGE9dGhpcy5lbGVtZW50LmRhdGEoXCJja2Utd2lkZ2V0LWRhdGFcIikpJiZ0aGlzLnNldERhdGEoSlNPTi5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoYSkpKTtlJiZ0aGlzLnNldERhdGEoZSk7dGhpcy5kYXRhLmNsYXNzZXN8fHRoaXMuc2V0RGF0YShcImNsYXNzZXNcIixcbnRoaXMuZ2V0Q2xhc3NlcygpKTt0aGlzLmRhdGFSZWFkeT0hMDtyKHRoaXMpO3RoaXMuZmlyZShcImRhdGFcIix0aGlzLmRhdGEpO3RoaXMuaXNJbml0ZWQoKSYmZi5lZGl0YWJsZSgpLmNvbnRhaW5zKHRoaXMud3JhcHBlcikmJih0aGlzLnJlYWR5PSEwLHRoaXMuZmlyZShcInJlYWR5XCIpKX1mdW5jdGlvbiBxKGEsYixjKXtDS0VESVRPUi5kb20uZWxlbWVudC5jYWxsKHRoaXMsYi4kKTt0aGlzLmVkaXRvcj1hO3RoaXMuXz17fTtiPXRoaXMuZmlsdGVyPWMuZmlsdGVyO0NLRURJVE9SLmR0ZFt0aGlzLmdldE5hbWUoKV0ucD8odGhpcy5lbnRlck1vZGU9Yj9iLmdldEFsbG93ZWRFbnRlck1vZGUoYS5lbnRlck1vZGUpOmEuZW50ZXJNb2RlLHRoaXMuc2hpZnRFbnRlck1vZGU9Yj9iLmdldEFsbG93ZWRFbnRlck1vZGUoYS5zaGlmdEVudGVyTW9kZSwhMCk6YS5zaGlmdEVudGVyTW9kZSk6dGhpcy5lbnRlck1vZGU9dGhpcy5zaGlmdEVudGVyTW9kZT1DS0VESVRPUi5FTlRFUl9CUn1mdW5jdGlvbiBPKGEsXG5iKXthLmFkZENvbW1hbmQoYi5uYW1lLHtleGVjOmZ1bmN0aW9uKGEsZCl7ZnVuY3Rpb24gZSgpe2Eud2lkZ2V0cy5maW5hbGl6ZUNyZWF0aW9uKGspfXZhciBmPWEud2lkZ2V0cy5mb2N1c2VkO2lmKGYmJmYubmFtZT09Yi5uYW1lKWYuZWRpdCgpO2Vsc2UgaWYoYi5pbnNlcnQpYi5pbnNlcnQoKTtlbHNlIGlmKGIudGVtcGxhdGUpe3ZhciBmPVwiZnVuY3Rpb25cIj09dHlwZW9mIGIuZGVmYXVsdHM/Yi5kZWZhdWx0cygpOmIuZGVmYXVsdHMsZj1DS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbChiLnRlbXBsYXRlLm91dHB1dChmKSksaCxsPWEud2lkZ2V0cy53cmFwRWxlbWVudChmLGIubmFtZSksaz1uZXcgQ0tFRElUT1IuZG9tLmRvY3VtZW50RnJhZ21lbnQobC5nZXREb2N1bWVudCgpKTtrLmFwcGVuZChsKTsoaD1hLndpZGdldHMuaW5pdE9uKGYsYixkJiZkLnN0YXJ0dXBEYXRhKSk/KGY9aC5vbmNlKFwiZWRpdFwiLGZ1bmN0aW9uKGIpe2lmKGIuZGF0YS5kaWFsb2cpaC5vbmNlKFwiZGlhbG9nXCIsXG5mdW5jdGlvbihiKXtiPWIuZGF0YTt2YXIgZCxmO2Q9Yi5vbmNlKFwib2tcIixlLG51bGwsbnVsbCwyMCk7Zj1iLm9uY2UoXCJjYW5jZWxcIixmdW5jdGlvbihiKXtiLmRhdGEmJiExPT09Yi5kYXRhLmhpZGV8fGEud2lkZ2V0cy5kZXN0cm95KGgsITApfSk7Yi5vbmNlKFwiaGlkZVwiLGZ1bmN0aW9uKCl7ZC5yZW1vdmVMaXN0ZW5lcigpO2YucmVtb3ZlTGlzdGVuZXIoKX0pfSk7ZWxzZSBlKCl9LG51bGwsbnVsbCw5OTkpLGguZWRpdCgpLGYucmVtb3ZlTGlzdGVuZXIoKSk6ZSgpfX0sYWxsb3dlZENvbnRlbnQ6Yi5hbGxvd2VkQ29udGVudCxyZXF1aXJlZENvbnRlbnQ6Yi5yZXF1aXJlZENvbnRlbnQsY29udGVudEZvcm1zOmIuY29udGVudEZvcm1zLGNvbnRlbnRUcmFuc2Zvcm1hdGlvbnM6Yi5jb250ZW50VHJhbnNmb3JtYXRpb25zfSl9ZnVuY3Rpb24gUChhLGIpe2Z1bmN0aW9uIGMoYyxiLGQpe3ZhciBlPUNLRURJVE9SLnRvb2xzLmdldEluZGV4KGEuXy51cGNhc3RzLGZ1bmN0aW9uKGEpe3JldHVybiBhWzJdPlxuZH0pOzA+ZSYmKGU9YS5fLnVwY2FzdHMubGVuZ3RoKTthLl8udXBjYXN0cy5zcGxpY2UoZSwwLFtjLGIsZF0pfXZhciBkPWIudXBjYXN0LGU9Yi51cGNhc3RQcmlvcml0eXx8MTA7aWYoZClpZihcInN0cmluZ1wiPT10eXBlb2YgZClmb3IoZD1kLnNwbGl0KFwiLFwiKTtkLmxlbmd0aDspYyhiLnVwY2FzdHNbZC5wb3AoKV0sYi5uYW1lLGUpO2Vsc2UgYyhkLGIubmFtZSxlKX1mdW5jdGlvbiB0KGEsYil7YS5mb2N1c2VkPW51bGw7aWYoYi5pc0luaXRlZCgpKXt2YXIgYz1iLmVkaXRvci5jaGVja0RpcnR5KCk7YS5maXJlKFwid2lkZ2V0Qmx1cnJlZFwiLHt3aWRnZXQ6Yn0pO2Iuc2V0Rm9jdXNlZCghMSk7IWMmJmIuZWRpdG9yLnJlc2V0RGlydHkoKX19ZnVuY3Rpb24gSChhKXthPWEuZGF0YTtpZihcInd5c2l3eWdcIj09dGhpcy5lZGl0b3IubW9kZSl7dmFyIGI9dGhpcy5lZGl0b3IuZWRpdGFibGUoKSxjPXRoaXMuaW5zdGFuY2VzLGQsZSxmLGg7aWYoYil7Zm9yKGQgaW4gYyljW2RdLmlzUmVhZHkoKSYmXG4hYi5jb250YWlucyhjW2RdLndyYXBwZXIpJiZ0aGlzLmRlc3Ryb3koY1tkXSwhMCk7aWYoYSYmYS5pbml0T25seU5ldyljPXRoaXMuaW5pdE9uQWxsKCk7ZWxzZXt2YXIgbD1iLmZpbmQoXCIuY2tlX3dpZGdldF93cmFwcGVyXCIpLGM9W107ZD0wO2ZvcihlPWwuY291bnQoKTtkPGU7ZCsrKXtmPWwuZ2V0SXRlbShkKTtpZihoPSF0aGlzLmdldEJ5RWxlbWVudChmLCEwKSl7YTp7aD1RO2Zvcih2YXIgaz1mO2s9ay5nZXRQYXJlbnQoKTspaWYoaChrKSl7aD0hMDticmVhayBhfWg9ITF9aD0haH1oJiZiLmNvbnRhaW5zKGYpJiYoZi5hZGRDbGFzcyhcImNrZV93aWRnZXRfbmV3XCIpLGMucHVzaCh0aGlzLmluaXRPbihmLmdldEZpcnN0KGcuaXNEb21XaWRnZXRFbGVtZW50KSkpKX19YSYmYS5mb2N1c0luaXRlZCYmMT09Yy5sZW5ndGgmJmNbMF0uZm9jdXMoKX19fWZ1bmN0aW9uIHUoYSxiLGMpe2lmKCFjLmFsbG93ZWRDb250ZW50KXJldHVybiBudWxsO3ZhciBkPXRoaXMuXy5maWx0ZXJzW2FdO1xuZHx8KHRoaXMuXy5maWx0ZXJzW2FdPWQ9e30pOyhhPWRbYl0pfHwoZFtiXT1hPW5ldyBDS0VESVRPUi5maWx0ZXIoYy5hbGxvd2VkQ29udGVudCkpO3JldHVybiBhfWZ1bmN0aW9uIFIoYSl7dmFyIGI9W10sYz1hLl8udXBjYXN0cyxkPWEuXy51cGNhc3RDYWxsYmFja3M7cmV0dXJue3RvQmVXcmFwcGVkOmIsaXRlcmF0b3I6ZnVuY3Rpb24oYSl7dmFyIGYsaCxsLGssbTtpZihcImRhdGEtY2tlLXdpZGdldC13cmFwcGVyXCJpbiBhLmF0dHJpYnV0ZXMpcmV0dXJuKGE9YS5nZXRGaXJzdChnLmlzUGFyc2VyV2lkZ2V0RWxlbWVudCkpJiZiLnB1c2goW2FdKSwhMTtpZihcImRhdGEtd2lkZ2V0XCJpbiBhLmF0dHJpYnV0ZXMpcmV0dXJuIGIucHVzaChbYV0pLCExO2lmKG09Yy5sZW5ndGgpe2lmKGEuYXR0cmlidXRlc1tcImRhdGEtY2tlLXdpZGdldC11cGNhc3RlZFwiXSlyZXR1cm4hMTtrPTA7Zm9yKGY9ZC5sZW5ndGg7azxmOysraylpZighMT09PWRba10oYSkpcmV0dXJuO2ZvcihrPTA7azxtOysraylpZihmPVxuY1trXSxsPXt9LGg9ZlswXShhLGwpKXJldHVybiBoIGluc3RhbmNlb2YgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50JiYoYT1oKSxhLmF0dHJpYnV0ZXNbXCJkYXRhLWNrZS13aWRnZXQtZGF0YVwiXT1lbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkobCkpLGEuYXR0cmlidXRlc1tcImRhdGEtY2tlLXdpZGdldC11cGNhc3RlZFwiXT0xLGIucHVzaChbYSxmWzFdXSksITF9fX19ZnVuY3Rpb24gdihhKXtyZXR1cm57dGFiaW5kZXg6LTEsY29udGVudGVkaXRhYmxlOlwiZmFsc2VcIixcImRhdGEtY2tlLXdpZGdldC13cmFwcGVyXCI6MSxcImRhdGEtY2tlLWZpbHRlclwiOlwib2ZmXCIsXCJjbGFzc1wiOlwiY2tlX3dpZGdldF93cmFwcGVyIGNrZV93aWRnZXRfbmV3IGNrZV93aWRnZXRfXCIrKGE/XCJpbmxpbmVcIjpcImJsb2NrXCIpfX1mdW5jdGlvbiB3KGEsYixjKXtpZihhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCl7dmFyIGQ9Q0tFRElUT1IuZHRkW2EubmFtZV07aWYoZCYmIWRbYy5uYW1lXSl7dmFyIGQ9XG5hLnNwbGl0KGIpLGU9YS5wYXJlbnQ7Yj1kLmdldEluZGV4KCk7YS5jaGlsZHJlbi5sZW5ndGh8fCgtLWIsYS5yZW1vdmUoKSk7ZC5jaGlsZHJlbi5sZW5ndGh8fGQucmVtb3ZlKCk7cmV0dXJuIHcoZSxiLGMpfX1hLmFkZChjLGIpfWZ1bmN0aW9uIHgoYSxiKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGEuaW5saW5lP2EuaW5saW5lOiEhQ0tFRElUT1IuZHRkLiRpbmxpbmVbYl19ZnVuY3Rpb24gUShhKXtyZXR1cm4gYS5oYXNBdHRyaWJ1dGUoXCJkYXRhLWNrZS10ZW1wXCIpfWZ1bmN0aW9uIG4oYSxiLGMsZCl7dmFyIGU9YS5lZGl0b3I7ZS5maXJlKFwibG9ja1NuYXBzaG90XCIpO2M/KGQ9Yy5kYXRhKFwiY2tlLXdpZGdldC1lZGl0YWJsZVwiKSxkPWIuZWRpdGFibGVzW2RdLGEud2lkZ2V0SG9sZGluZ0ZvY3VzZWRFZGl0YWJsZT1iLGIuZm9jdXNlZEVkaXRhYmxlPWQsYy5hZGRDbGFzcyhcImNrZV93aWRnZXRfZWRpdGFibGVfZm9jdXNlZFwiKSxkLmZpbHRlciYmZS5zZXRBY3RpdmVGaWx0ZXIoZC5maWx0ZXIpLFxuZS5zZXRBY3RpdmVFbnRlck1vZGUoZC5lbnRlck1vZGUsZC5zaGlmdEVudGVyTW9kZSkpOihkfHxiLmZvY3VzZWRFZGl0YWJsZS5yZW1vdmVDbGFzcyhcImNrZV93aWRnZXRfZWRpdGFibGVfZm9jdXNlZFwiKSxiLmZvY3VzZWRFZGl0YWJsZT1udWxsLGEud2lkZ2V0SG9sZGluZ0ZvY3VzZWRFZGl0YWJsZT1udWxsLGUuc2V0QWN0aXZlRmlsdGVyKG51bGwpLGUuc2V0QWN0aXZlRW50ZXJNb2RlKG51bGwsbnVsbCkpO2UuZmlyZShcInVubG9ja1NuYXBzaG90XCIpfWZ1bmN0aW9uIFMoYSl7YS5jb250ZXh0TWVudSYmYS5jb250ZXh0TWVudS5hZGRMaXN0ZW5lcihmdW5jdGlvbihiKXtpZihiPWEud2lkZ2V0cy5nZXRCeUVsZW1lbnQoYiwhMCkpcmV0dXJuIGIuZmlyZShcImNvbnRleHRNZW51XCIse30pfSl9ZnVuY3Rpb24gVChhLGIpe3JldHVybiBDS0VESVRPUi50b29scy50cmltKGIpfWZ1bmN0aW9uIEwoYSl7dmFyIGI9YS5lZGl0b3IsYz1DS0VESVRPUi5wbHVnaW5zLmxpbmV1dGlscztiLm9uKFwiZHJhZ3N0YXJ0XCIsXG5mdW5jdGlvbihjKXt2YXIgZT1jLmRhdGEudGFyZ2V0O2cuaXNEb21EcmFnSGFuZGxlcihlKSYmKGU9YS5nZXRCeUVsZW1lbnQoZSksYy5kYXRhLmRhdGFUcmFuc2Zlci5zZXREYXRhKFwiY2tlL3dpZGdldC1pZFwiLGUuaWQpLGIuZm9jdXMoKSxlLmZvY3VzKCkpfSk7Yi5vbihcImRyb3BcIixmdW5jdGlvbihjKXt2YXIgZT1jLmRhdGEuZGF0YVRyYW5zZmVyLGY9ZS5nZXREYXRhKFwiY2tlL3dpZGdldC1pZFwiKSxoPWUuZ2V0VHJhbnNmZXJUeXBlKGIpLGU9Yi5jcmVhdGVSYW5nZSgpO1wiXCIhPT1mJiZoPT09Q0tFRElUT1IuREFUQV9UUkFOU0ZFUl9DUk9TU19FRElUT1JTP2MuY2FuY2VsKCk6XCJcIiE9PWYmJmg9PUNLRURJVE9SLkRBVEFfVFJBTlNGRVJfSU5URVJOQUwmJihmPWEuaW5zdGFuY2VzW2ZdKSYmKGUuc2V0U3RhcnRCZWZvcmUoZi53cmFwcGVyKSxlLnNldEVuZEFmdGVyKGYud3JhcHBlciksYy5kYXRhLmRyYWdSYW5nZT1lLGRlbGV0ZSBDS0VESVRPUi5wbHVnaW5zLmNsaXBib2FyZC5kcmFnU3RhcnRDb250YWluZXJDaGlsZENvdW50LFxuZGVsZXRlIENLRURJVE9SLnBsdWdpbnMuY2xpcGJvYXJkLmRyYWdFbmRDb250YWluZXJDaGlsZENvdW50LGMuZGF0YS5kYXRhVHJhbnNmZXIuc2V0RGF0YShcInRleHQvaHRtbFwiLGIuZWRpdGFibGUoKS5nZXRIdG1sRnJvbVJhbmdlKGUpLmdldEh0bWwoKSksYi53aWRnZXRzLmRlc3Ryb3koZiwhMCkpfSk7Yi5vbihcImNvbnRlbnREb21cIixmdW5jdGlvbigpe3ZhciBkPWIuZWRpdGFibGUoKTtDS0VESVRPUi50b29scy5leHRlbmQoYSx7ZmluZGVyOm5ldyBjLmZpbmRlcihiLHtsb29rdXBzOntcImRlZmF1bHRcIjpmdW5jdGlvbihjKXtpZighYy5pcyhDS0VESVRPUi5kdGQuJGxpc3RJdGVtKSYmYy5pcyhDS0VESVRPUi5kdGQuJGJsb2NrKSYmIWcuaXNEb21OZXN0ZWRFZGl0YWJsZShjKSYmIWEuXy5kcmFnZ2VkV2lkZ2V0LndyYXBwZXIuY29udGFpbnMoYykpe3ZhciBiPWcuZ2V0TmVzdGVkRWRpdGFibGUoZCxjKTtpZihiKXtjPWEuXy5kcmFnZ2VkV2lkZ2V0O2lmKGEuZ2V0QnlFbGVtZW50KGIpPT1cbmMpcmV0dXJuO2I9Q0tFRElUT1IuZmlsdGVyLmluc3RhbmNlc1tiLmRhdGEoXCJja2UtZmlsdGVyXCIpXTtjPWMucmVxdWlyZWRDb250ZW50O2lmKGImJmMmJiFiLmNoZWNrKGMpKXJldHVybn1yZXR1cm4gQ0tFRElUT1IuTElORVVUSUxTX0JFRk9SRXxDS0VESVRPUi5MSU5FVVRJTFNfQUZURVJ9fX19KSxsb2NhdG9yOm5ldyBjLmxvY2F0b3IoYiksbGluZXI6bmV3IGMubGluZXIoYix7bGluZVN0eWxlOntjdXJzb3I6XCJtb3ZlICFpbXBvcnRhbnRcIixcImJvcmRlci10b3AtY29sb3JcIjpcIiM2NjZcIn0sdGlwTGVmdFN0eWxlOntcImJvcmRlci1sZWZ0LWNvbG9yXCI6XCIjNjY2XCJ9LHRpcFJpZ2h0U3R5bGU6e1wiYm9yZGVyLXJpZ2h0LWNvbG9yXCI6XCIjNjY2XCJ9fSl9LCEwKX0pfWZ1bmN0aW9uIEooYSl7dmFyIGI9YS5lZGl0b3I7Yi5vbihcImNvbnRlbnREb21cIixmdW5jdGlvbigpe3ZhciBjPWIuZWRpdGFibGUoKSxkPWMuaXNJbmxpbmUoKT9jOmIuZG9jdW1lbnQsZSxmO2MuYXR0YWNoTGlzdGVuZXIoZCxcblwibW91c2Vkb3duXCIsZnVuY3Rpb24oYyl7dmFyIGQ9Yy5kYXRhLmdldFRhcmdldCgpO2lmKCFkLnR5cGUpcmV0dXJuITE7ZT1hLmdldEJ5RWxlbWVudChkKTtmPTA7ZSYmKGUuaW5saW5lJiZkLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmZC5oYXNBdHRyaWJ1dGUoXCJkYXRhLWNrZS13aWRnZXQtZHJhZy1oYW5kbGVyXCIpPyhmPTEsYS5mb2N1c2VkIT1lJiZiLmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpKTpnLmdldE5lc3RlZEVkaXRhYmxlKGUud3JhcHBlcixkKT9lPW51bGw6KGMuZGF0YS5wcmV2ZW50RGVmYXVsdCgpLENLRURJVE9SLmVudi5pZXx8ZS5mb2N1cygpKSl9KTtjLmF0dGFjaExpc3RlbmVyKGQsXCJtb3VzZXVwXCIsZnVuY3Rpb24oKXtmJiZlJiZlLndyYXBwZXImJihmPTAsZS5mb2N1cygpKX0pO0NLRURJVE9SLmVudi5pZSYmYy5hdHRhY2hMaXN0ZW5lcihkLFwibW91c2V1cFwiLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2UmJmUud3JhcHBlciYmXG5jLmNvbnRhaW5zKGUud3JhcHBlcikmJihlLmZvY3VzKCksZT1udWxsKX0pfSl9KTtiLm9uKFwiZG91YmxlY2xpY2tcIixmdW5jdGlvbihjKXt2YXIgYj1hLmdldEJ5RWxlbWVudChjLmRhdGEuZWxlbWVudCk7aWYoYiYmIWcuZ2V0TmVzdGVkRWRpdGFibGUoYi53cmFwcGVyLGMuZGF0YS5lbGVtZW50KSlyZXR1cm4gYi5maXJlKFwiZG91YmxlY2xpY2tcIix7ZWxlbWVudDpjLmRhdGEuZWxlbWVudH0pfSxudWxsLG51bGwsMSl9ZnVuY3Rpb24gSyhhKXthLmVkaXRvci5vbihcImtleVwiLGZ1bmN0aW9uKGIpe3ZhciBjPWEuZm9jdXNlZCxkPWEud2lkZ2V0SG9sZGluZ0ZvY3VzZWRFZGl0YWJsZSxlO2M/ZT1jLmZpcmUoXCJrZXlcIix7a2V5Q29kZTpiLmRhdGEua2V5Q29kZX0pOmQmJihjPWIuZGF0YS5rZXlDb2RlLGI9ZC5mb2N1c2VkRWRpdGFibGUsYz09Q0tFRElUT1IuQ1RSTCs2NT8oYz1iLmdldEJvZ3VzKCksZD1kLmVkaXRvci5jcmVhdGVSYW5nZSgpLGQuc2VsZWN0Tm9kZUNvbnRlbnRzKGIpLFxuYyYmZC5zZXRFbmRBdChjLENLRURJVE9SLlBPU0lUSU9OX0JFRk9SRV9TVEFSVCksZC5zZWxlY3QoKSxlPSExKTo4PT1jfHw0Nj09Yz8oZT1kLmVkaXRvci5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZXMoKSxkPWVbMF0sZT0hKDE9PWUubGVuZ3RoJiZkLmNvbGxhcHNlZCYmZC5jaGVja0JvdW5kYXJ5T2ZFbGVtZW50KGIsQ0tFRElUT1JbOD09Yz9cIlNUQVJUXCI6XCJFTkRcIl0pKSk6ZT12b2lkIDApO3JldHVybiBlfSxudWxsLG51bGwsMSl9ZnVuY3Rpb24gTShhKXtmdW5jdGlvbiBiKGMpe2EuZm9jdXNlZCYmeShhLmZvY3VzZWQsXCJjdXRcIj09Yy5uYW1lKX12YXIgYz1hLmVkaXRvcjtjLm9uKFwiY29udGVudERvbVwiLGZ1bmN0aW9uKCl7dmFyIGE9Yy5lZGl0YWJsZSgpO2EuYXR0YWNoTGlzdGVuZXIoYSxcImNvcHlcIixiKTthLmF0dGFjaExpc3RlbmVyKGEsXCJjdXRcIixiKX0pfWZ1bmN0aW9uIEkoYSl7dmFyIGI9YS5lZGl0b3I7Yi5vbihcInNlbGVjdGlvbkNoZWNrXCIsZnVuY3Rpb24oKXthLmZpcmUoXCJjaGVja1NlbGVjdGlvblwiKX0pO1xuYS5vbihcImNoZWNrU2VsZWN0aW9uXCIsYS5jaGVja1NlbGVjdGlvbixhKTtiLm9uKFwic2VsZWN0aW9uQ2hhbmdlXCIsZnVuY3Rpb24oYyl7dmFyIGQ9KGM9Zy5nZXROZXN0ZWRFZGl0YWJsZShiLmVkaXRhYmxlKCksYy5kYXRhLnNlbGVjdGlvbi5nZXRTdGFydEVsZW1lbnQoKSkpJiZhLmdldEJ5RWxlbWVudChjKSxlPWEud2lkZ2V0SG9sZGluZ0ZvY3VzZWRFZGl0YWJsZTtlP2U9PT1kJiZlLmZvY3VzZWRFZGl0YWJsZS5lcXVhbHMoYyl8fChuKGEsZSxudWxsKSxkJiZjJiZuKGEsZCxjKSk6ZCYmYyYmbihhLGQsYyl9KTtiLm9uKFwiZGF0YVJlYWR5XCIsZnVuY3Rpb24oKXt6KGEpLmNvbW1pdCgpfSk7Yi5vbihcImJsdXJcIixmdW5jdGlvbigpe3ZhciBjOyhjPWEuZm9jdXNlZCkmJnQoYSxjKTsoYz1hLndpZGdldEhvbGRpbmdGb2N1c2VkRWRpdGFibGUpJiZuKGEsYyxudWxsKX0pfWZ1bmN0aW9uIEcoYSl7dmFyIGI9YS5lZGl0b3IsYz17fTtiLm9uKFwidG9EYXRhRm9ybWF0XCIsZnVuY3Rpb24oYil7dmFyIGU9XG5DS0VESVRPUi50b29scy5nZXROZXh0TnVtYmVyKCksZj1bXTtiLmRhdGEuZG93bmNhc3RpbmdTZXNzaW9uSWQ9ZTtjW2VdPWY7Yi5kYXRhLmRhdGFWYWx1ZS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBiPWMuYXR0cmlidXRlcyxkO2lmKFwiZGF0YS1ja2Utd2lkZ2V0LWlkXCJpbiBiKXtpZihiPWEuaW5zdGFuY2VzW2JbXCJkYXRhLWNrZS13aWRnZXQtaWRcIl1dKWQ9Yy5nZXRGaXJzdChnLmlzUGFyc2VyV2lkZ2V0RWxlbWVudCksZi5wdXNoKHt3cmFwcGVyOmMsZWxlbWVudDpkLHdpZGdldDpiLGVkaXRhYmxlczp7fX0pLFwiMVwiIT1kLmF0dHJpYnV0ZXNbXCJkYXRhLWNrZS13aWRnZXQta2VlcC1hdHRyXCJdJiZkZWxldGUgZC5hdHRyaWJ1dGVzW1wiZGF0YS13aWRnZXRcIl19ZWxzZSBpZihcImRhdGEtY2tlLXdpZGdldC1lZGl0YWJsZVwiaW4gYilyZXR1cm4gZltmLmxlbmd0aC0xXS5lZGl0YWJsZXNbYltcImRhdGEtY2tlLXdpZGdldC1lZGl0YWJsZVwiXV09YywhMX0sQ0tFRElUT1IuTk9ERV9FTEVNRU5ULFxuITApfSxudWxsLG51bGwsOCk7Yi5vbihcInRvRGF0YUZvcm1hdFwiLGZ1bmN0aW9uKGEpe2lmKGEuZGF0YS5kb3duY2FzdGluZ1Nlc3Npb25JZCl7YT1jW2EuZGF0YS5kb3duY2FzdGluZ1Nlc3Npb25JZF07Zm9yKHZhciBiLGYsaCxsLGcsbTtiPWEuc2hpZnQoKTspe2Y9Yi53aWRnZXQ7aD1iLmVsZW1lbnQ7bD1mLl8uZG93bmNhc3RGbiYmZi5fLmRvd25jYXN0Rm4uY2FsbChmLGgpO2ZvcihtIGluIGIuZWRpdGFibGVzKWc9Yi5lZGl0YWJsZXNbbV0sZGVsZXRlIGcuYXR0cmlidXRlcy5jb250ZW50ZWRpdGFibGUsZy5zZXRIdG1sKGYuZWRpdGFibGVzW21dLmdldERhdGEoKSk7bHx8KGw9aCk7Yi53cmFwcGVyLnJlcGxhY2VXaXRoKGwpfX19LG51bGwsbnVsbCwxMyk7Yi5vbihcImNvbnRlbnREb21VbmxvYWRcIixmdW5jdGlvbigpe2EuZGVzdHJveUFsbCghMCl9KX1mdW5jdGlvbiBGKGEpe3ZhciBiPWEuZWRpdG9yLGMsZDtiLm9uKFwidG9IdG1sXCIsZnVuY3Rpb24oYil7dmFyIGQ9UihhKSxoO1xuZm9yKGIuZGF0YS5kYXRhVmFsdWUuZm9yRWFjaChkLml0ZXJhdG9yLENLRURJVE9SLk5PREVfRUxFTUVOVCwhMCk7aD1kLnRvQmVXcmFwcGVkLnBvcCgpOyl7dmFyIGw9aFswXSxrPWwucGFyZW50O2sudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZrLmF0dHJpYnV0ZXNbXCJkYXRhLWNrZS13aWRnZXQtd3JhcHBlclwiXSYmay5yZXBsYWNlV2l0aChsKTthLndyYXBFbGVtZW50KGhbMF0saFsxXSl9Yz1iLmRhdGEucHJvdGVjdGVkV2hpdGVzcGFjZXM/Mz09Yi5kYXRhLmRhdGFWYWx1ZS5jaGlsZHJlbi5sZW5ndGgmJmcuaXNQYXJzZXJXaWRnZXRXcmFwcGVyKGIuZGF0YS5kYXRhVmFsdWUuY2hpbGRyZW5bMV0pOjE9PWIuZGF0YS5kYXRhVmFsdWUuY2hpbGRyZW4ubGVuZ3RoJiZnLmlzUGFyc2VyV2lkZ2V0V3JhcHBlcihiLmRhdGEuZGF0YVZhbHVlLmNoaWxkcmVuWzBdKX0sbnVsbCxudWxsLDgpO2Iub24oXCJkYXRhUmVhZHlcIixmdW5jdGlvbigpe2lmKGQpZm9yKHZhciBjPWIuZWRpdGFibGUoKS5maW5kKFwiLmNrZV93aWRnZXRfd3JhcHBlclwiKSxcbmYsaCxsPTAsaz1jLmNvdW50KCk7bDxrOysrbClmPWMuZ2V0SXRlbShsKSxoPWYuZ2V0Rmlyc3QoZy5pc0RvbVdpZGdldEVsZW1lbnQpLGgudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZoLmRhdGEoXCJ3aWRnZXRcIik/KGgucmVwbGFjZShmKSxhLndyYXBFbGVtZW50KGgpKTpmLnJlbW92ZSgpO2Q9MDthLmRlc3Ryb3lBbGwoITApO2EuaW5pdE9uQWxsKCl9KTtiLm9uKFwibG9hZFNuYXBzaG90XCIsZnVuY3Rpb24oYyl7L2RhdGEtY2tlLXdpZGdldC8udGVzdChjLmRhdGEpJiYoZD0xKTthLmRlc3Ryb3lBbGwoITApfSxudWxsLG51bGwsOSk7Yi5vbihcInBhc3RlXCIsZnVuY3Rpb24oYSl7YT1hLmRhdGE7YS5kYXRhVmFsdWU9YS5kYXRhVmFsdWUucmVwbGFjZShVLFQpO2EucmFuZ2UmJihhPWcuZ2V0TmVzdGVkRWRpdGFibGUoYi5lZGl0YWJsZSgpLGEucmFuZ2Uuc3RhcnRDb250YWluZXIpKSYmKGE9Q0tFRElUT1IuZmlsdGVyLmluc3RhbmNlc1thLmRhdGEoXCJja2UtZmlsdGVyXCIpXSkmJlxuYi5zZXRBY3RpdmVGaWx0ZXIoYSl9KTtiLm9uKFwiYWZ0ZXJJbnNlcnRIdG1sXCIsZnVuY3Rpb24oZCl7ZC5kYXRhLmludG9SYW5nZT9hLmNoZWNrV2lkZ2V0cyh7aW5pdE9ubHlOZXc6ITB9KTooYi5maXJlKFwibG9ja1NuYXBzaG90XCIpLGEuY2hlY2tXaWRnZXRzKHtpbml0T25seU5ldzohMCxmb2N1c0luaXRlZDpjfSksYi5maXJlKFwidW5sb2NrU25hcHNob3RcIikpfSl9ZnVuY3Rpb24geihhKXt2YXIgYj1hLnNlbGVjdGVkLGM9W10sZD1iLnNsaWNlKDApLGU9bnVsbDtyZXR1cm57c2VsZWN0OmZ1bmN0aW9uKGEpezA+Q0tFRElUT1IudG9vbHMuaW5kZXhPZihiLGEpJiZjLnB1c2goYSk7YT1DS0VESVRPUi50b29scy5pbmRleE9mKGQsYSk7MDw9YSYmZC5zcGxpY2UoYSwxKTtyZXR1cm4gdGhpc30sZm9jdXM6ZnVuY3Rpb24oYSl7ZT1hO3JldHVybiB0aGlzfSxjb21taXQ6ZnVuY3Rpb24oKXt2YXIgZj1hLmZvY3VzZWQhPT1lLGgsZzthLmVkaXRvci5maXJlKFwibG9ja1NuYXBzaG90XCIpO2ZvcihmJiZcbihoPWEuZm9jdXNlZCkmJnQoYSxoKTtoPWQucG9wKCk7KWIuc3BsaWNlKENLRURJVE9SLnRvb2xzLmluZGV4T2YoYixoKSwxKSxoLmlzSW5pdGVkKCkmJihnPWguZWRpdG9yLmNoZWNrRGlydHkoKSxoLnNldFNlbGVjdGVkKCExKSwhZyYmaC5lZGl0b3IucmVzZXREaXJ0eSgpKTtmJiZlJiYoZz1hLmVkaXRvci5jaGVja0RpcnR5KCksYS5mb2N1c2VkPWUsYS5maXJlKFwid2lkZ2V0Rm9jdXNlZFwiLHt3aWRnZXQ6ZX0pLGUuc2V0Rm9jdXNlZCghMCksIWcmJmEuZWRpdG9yLnJlc2V0RGlydHkoKSk7Zm9yKDtoPWMucG9wKCk7KWIucHVzaChoKSxoLnNldFNlbGVjdGVkKCEwKTthLmVkaXRvci5maXJlKFwidW5sb2NrU25hcHNob3RcIil9fX1mdW5jdGlvbiBBKGEsYixjKXt2YXIgZD0wO2I9QihiKTt2YXIgZT1hLmRhdGEuY2xhc3Nlc3x8e30sZjtpZihiKXtmb3IoZT1DS0VESVRPUi50b29scy5jbG9uZShlKTtmPWIucG9wKCk7KWM/ZVtmXXx8KGQ9ZVtmXT0xKTplW2ZdJiYoZGVsZXRlIGVbZl0sXG5kPTEpO2QmJmEuc2V0RGF0YShcImNsYXNzZXNcIixlKX19ZnVuY3Rpb24gQyhhKXthLmNhbmNlbCgpfWZ1bmN0aW9uIHkoYSxiKXt2YXIgYz1hLmVkaXRvcixkPWMuZG9jdW1lbnQ7aWYoIWQuZ2V0QnlJZChcImNrZV9jb3B5YmluXCIpKXt2YXIgZT1jLmJsb2NrbGVzc3x8Q0tFRElUT1IuZW52LmllP1wic3BhblwiOlwiZGl2XCIsZj1kLmNyZWF0ZUVsZW1lbnQoZSksaD1kLmNyZWF0ZUVsZW1lbnQoZSksZT1DS0VESVRPUi5lbnYuaWUmJjk+Q0tFRElUT1IuZW52LnZlcnNpb247aC5zZXRBdHRyaWJ1dGVzKHtpZDpcImNrZV9jb3B5YmluXCIsXCJkYXRhLWNrZS10ZW1wXCI6XCIxXCJ9KTtmLnNldFN0eWxlcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHdpZHRoOlwiMXB4XCIsaGVpZ2h0OlwiMXB4XCIsb3ZlcmZsb3c6XCJoaWRkZW5cIn0pO2Yuc2V0U3R5bGUoXCJsdHJcIj09Yy5jb25maWcuY29udGVudHNMYW5nRGlyZWN0aW9uP1wibGVmdFwiOlwicmlnaHRcIixcIi01MDAwcHhcIik7dmFyIGc9Yy5jcmVhdGVSYW5nZSgpO2cuc2V0U3RhcnRCZWZvcmUoYS53cmFwcGVyKTtcbmcuc2V0RW5kQWZ0ZXIoYS53cmFwcGVyKTtmLnNldEh0bWwoJ1xceDNjc3BhbiBkYXRhLWNrZS1jb3B5YmluLXN0YXJ0XFx4M2RcIjFcIlxceDNl4oCLXFx4M2Mvc3BhblxceDNlJytjLmVkaXRhYmxlKCkuZ2V0SHRtbEZyb21SYW5nZShnKS5nZXRIdG1sKCkrJ1xceDNjc3BhbiBkYXRhLWNrZS1jb3B5YmluLWVuZFxceDNkXCIxXCJcXHgzZeKAi1xceDNjL3NwYW5cXHgzZScpO2MuZmlyZShcInNhdmVTbmFwc2hvdFwiKTtjLmZpcmUoXCJsb2NrU25hcHNob3RcIik7aC5hcHBlbmQoZik7Yy5lZGl0YWJsZSgpLmFwcGVuZChoKTt2YXIgaz1jLm9uKFwic2VsZWN0aW9uQ2hhbmdlXCIsQyxudWxsLG51bGwsMCksbT1hLnJlcG9zaXRvcnkub24oXCJjaGVja1NlbGVjdGlvblwiLEMsbnVsbCxudWxsLDApO2lmKGUpdmFyIG49ZC5nZXREb2N1bWVudEVsZW1lbnQoKS4kLHA9bi5zY3JvbGxUb3A7Zz1jLmNyZWF0ZVJhbmdlKCk7Zy5zZWxlY3ROb2RlQ29udGVudHMoZik7Zy5zZWxlY3QoKTtlJiYobi5zY3JvbGxUb3A9cCk7c2V0VGltZW91dChmdW5jdGlvbigpe2J8fFxuYS5mb2N1cygpO2gucmVtb3ZlKCk7ay5yZW1vdmVMaXN0ZW5lcigpO20ucmVtb3ZlTGlzdGVuZXIoKTtjLmZpcmUoXCJ1bmxvY2tTbmFwc2hvdFwiKTtiJiYoYS5yZXBvc2l0b3J5LmRlbChhKSxjLmZpcmUoXCJzYXZlU25hcHNob3RcIikpfSwxMDApfX1mdW5jdGlvbiBCKGEpe3JldHVybihhPShhPWEuZ2V0RGVmaW5pdGlvbigpLmF0dHJpYnV0ZXMpJiZhW1wiY2xhc3NcIl0pP2Euc3BsaXQoL1xccysvKTpudWxsfWZ1bmN0aW9uIEQoKXt2YXIgYT1DS0VESVRPUi5kb2N1bWVudC5nZXRBY3RpdmUoKSxiPXRoaXMuZWRpdG9yLGM9Yi5lZGl0YWJsZSgpOyhjLmlzSW5saW5lKCk/YzpiLmRvY3VtZW50LmdldFdpbmRvdygpLmdldEZyYW1lKCkpLmVxdWFscyhhKSYmYi5mb2N1c01hbmFnZXIuZm9jdXMoYyl9ZnVuY3Rpb24gRSgpe0NLRURJVE9SLmVudi5nZWNrbyYmdGhpcy5lZGl0b3IudW5sb2NrU2VsZWN0aW9uKCk7Q0tFRElUT1IuZW52LndlYmtpdHx8KHRoaXMuZWRpdG9yLmZvcmNlTmV4dFNlbGVjdGlvbkNoZWNrKCksXG50aGlzLmVkaXRvci5zZWxlY3Rpb25DaGFuZ2UoMSkpfWZ1bmN0aW9uIFYoYSl7dmFyIGI9bnVsbDthLm9uKFwiZGF0YVwiLGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5kYXRhLmNsYXNzZXMsZDtpZihiIT1hKXtmb3IoZCBpbiBiKWEmJmFbZF18fHRoaXMucmVtb3ZlQ2xhc3MoZCk7Zm9yKGQgaW4gYSl0aGlzLmFkZENsYXNzKGQpO2I9YX19KX1mdW5jdGlvbiBXKGEpe2Eub24oXCJkYXRhXCIsZnVuY3Rpb24oKXtpZihhLndyYXBwZXIpe3ZhciBiPXRoaXMuZ2V0TGFiZWw/dGhpcy5nZXRMYWJlbCgpOnRoaXMuZWRpdG9yLmxhbmcud2lkZ2V0LmxhYmVsLnJlcGxhY2UoLyUxLyx0aGlzLnBhdGhOYW1lfHx0aGlzLmVsZW1lbnQuZ2V0TmFtZSgpKTthLndyYXBwZXIuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwicmVnaW9uXCIpO2Eud3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsYil9fSxudWxsLG51bGwsOTk5OSl9ZnVuY3Rpb24gWChhKXtpZihhLmRyYWdnYWJsZSl7dmFyIGI9YS5lZGl0b3IsXG5jPWEud3JhcHBlci5nZXRMYXN0KGcuaXNEb21EcmFnSGFuZGxlckNvbnRhaW5lciksZDtjP2Q9Yy5maW5kT25lKFwiaW1nXCIpOihjPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcInNwYW5cIixiLmRvY3VtZW50KSxjLnNldEF0dHJpYnV0ZXMoe1wiY2xhc3NcIjpcImNrZV9yZXNldCBja2Vfd2lkZ2V0X2RyYWdfaGFuZGxlcl9jb250YWluZXJcIixzdHlsZTpcImJhY2tncm91bmQ6cmdiYSgyMjAsMjIwLDIyMCwwLjUpO2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiK2IucGx1Z2lucy53aWRnZXQucGF0aCtcImltYWdlcy9oYW5kbGUucG5nKVwifSksZD1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJpbWdcIixiLmRvY3VtZW50KSxkLnNldEF0dHJpYnV0ZXMoe1wiY2xhc3NcIjpcImNrZV9yZXNldCBja2Vfd2lkZ2V0X2RyYWdfaGFuZGxlclwiLFwiZGF0YS1ja2Utd2lkZ2V0LWRyYWctaGFuZGxlclwiOlwiMVwiLHNyYzpDS0VESVRPUi50b29scy50cmFuc3BhcmVudEltYWdlRGF0YSx3aWR0aDoxNSx0aXRsZTpiLmxhbmcud2lkZ2V0Lm1vdmUsXG5oZWlnaHQ6MTUscm9sZTpcInByZXNlbnRhdGlvblwifSksYS5pbmxpbmUmJmQuc2V0QXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIsXCJ0cnVlXCIpLGMuYXBwZW5kKGQpLGEud3JhcHBlci5hcHBlbmQoYykpO2Eud3JhcHBlci5vbihcImRyYWdvdmVyXCIsZnVuY3Rpb24oYSl7YS5kYXRhLnByZXZlbnREZWZhdWx0KCl9KTthLndyYXBwZXIub24oXCJtb3VzZWVudGVyXCIsYS51cGRhdGVEcmFnSGFuZGxlclBvc2l0aW9uLGEpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXthLm9uKFwiZGF0YVwiLGEudXBkYXRlRHJhZ0hhbmRsZXJQb3NpdGlvbixhKX0sNTApO2lmKCFhLmlubGluZSYmKGQub24oXCJtb3VzZWRvd25cIixZLGEpLENLRURJVE9SLmVudi5pZSYmOT5DS0VESVRPUi5lbnYudmVyc2lvbikpZC5vbihcImRyYWdzdGFydFwiLGZ1bmN0aW9uKGEpe2EuZGF0YS5wcmV2ZW50RGVmYXVsdCghMCl9KTthLmRyYWdIYW5kbGVyQ29udGFpbmVyPWN9fWZ1bmN0aW9uIFkoYSl7ZnVuY3Rpb24gYigpe3ZhciBiO2ZvcihxLnJlc2V0KCk7Yj1cbmcucG9wKCk7KWIucmVtb3ZlTGlzdGVuZXIoKTt2YXIgYz1rO2I9YS5zZW5kZXI7dmFyIGQ9dGhpcy5yZXBvc2l0b3J5LmZpbmRlcixlPXRoaXMucmVwb3NpdG9yeS5saW5lcixmPXRoaXMuZWRpdG9yLGg9dGhpcy5lZGl0b3IuZWRpdGFibGUoKTtDS0VESVRPUi50b29scy5pc0VtcHR5KGUudmlzaWJsZSl8fChjPWQuZ2V0UmFuZ2UoY1swXSksdGhpcy5mb2N1cygpLGYuZmlyZShcImRyb3BcIix7ZHJvcFJhbmdlOmMsdGFyZ2V0OmMuc3RhcnRDb250YWluZXJ9KSk7aC5yZW1vdmVDbGFzcyhcImNrZV93aWRnZXRfZHJhZ2dpbmdcIik7ZS5oaWRlVmlzaWJsZSgpO2YuZmlyZShcImRyYWdlbmRcIix7dGFyZ2V0OmJ9KX12YXIgYz10aGlzLnJlcG9zaXRvcnkuZmluZGVyLGQ9dGhpcy5yZXBvc2l0b3J5LmxvY2F0b3IsZT10aGlzLnJlcG9zaXRvcnkubGluZXIsZj10aGlzLmVkaXRvcixoPWYuZWRpdGFibGUoKSxnPVtdLGs9W10sbSxuO3RoaXMucmVwb3NpdG9yeS5fLmRyYWdnZWRXaWRnZXQ9dGhpcztcbnZhciBwPWMuZ3JlZWR5U2VhcmNoKCkscT1DS0VESVRPUi50b29scy5ldmVudHNCdWZmZXIoNTAsZnVuY3Rpb24oKXttPWQubG9jYXRlKHApO2s9ZC5zb3J0KG4sMSk7ay5sZW5ndGgmJihlLnByZXBhcmUocCxtKSxlLnBsYWNlTGluZShrWzBdKSxlLmNsZWFudXAoKSl9KTtoLmFkZENsYXNzKFwiY2tlX3dpZGdldF9kcmFnZ2luZ1wiKTtnLnB1c2goaC5vbihcIm1vdXNlbW92ZVwiLGZ1bmN0aW9uKGEpe249YS5kYXRhLiQuY2xpZW50WTtxLmlucHV0KCl9KSk7Zi5maXJlKFwiZHJhZ3N0YXJ0XCIse3RhcmdldDphLnNlbmRlcn0pO2cucHVzaChmLmRvY3VtZW50Lm9uY2UoXCJtb3VzZXVwXCIsYix0aGlzKSk7aC5pc0lubGluZSgpfHxnLnB1c2goQ0tFRElUT1IuZG9jdW1lbnQub25jZShcIm1vdXNldXBcIixiLHRoaXMpKX1mdW5jdGlvbiBaKGEpe3ZhciBiLGMsZD1hLmVkaXRhYmxlczthLmVkaXRhYmxlcz17fTtpZihhLmVkaXRhYmxlcylmb3IoYiBpbiBkKWM9ZFtiXSxhLmluaXRFZGl0YWJsZShiLFwic3RyaW5nXCI9PVxudHlwZW9mIGM/e3NlbGVjdG9yOmN9OmMpfWZ1bmN0aW9uIGFhKGEpe2lmKGEubWFzayl7dmFyIGI9YS53cmFwcGVyLmZpbmRPbmUoXCIuY2tlX3dpZGdldF9tYXNrXCIpO2J8fChiPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcImltZ1wiLGEuZWRpdG9yLmRvY3VtZW50KSxiLnNldEF0dHJpYnV0ZXMoe3NyYzpDS0VESVRPUi50b29scy50cmFuc3BhcmVudEltYWdlRGF0YSxcImNsYXNzXCI6XCJja2VfcmVzZXQgY2tlX3dpZGdldF9tYXNrXCJ9KSxhLndyYXBwZXIuYXBwZW5kKGIpKTthLm1hc2s9Yn19ZnVuY3Rpb24gYmEoYSl7aWYoYS5wYXJ0cyl7dmFyIGI9e30sYyxkO2ZvcihkIGluIGEucGFydHMpYz1hLndyYXBwZXIuZmluZE9uZShhLnBhcnRzW2RdKSxiW2RdPWM7YS5wYXJ0cz1ifX1mdW5jdGlvbiBOKGEsYil7Y2EoYSk7YmEoYSk7WihhKTthYShhKTtYKGEpO1YoYSk7VyhhKTtpZihDS0VESVRPUi5lbnYuaWUmJjk+Q0tFRElUT1IuZW52LnZlcnNpb24pYS53cmFwcGVyLm9uKFwiZHJhZ3N0YXJ0XCIsXG5mdW5jdGlvbihiKXt2YXIgZD1iLmRhdGEuZ2V0VGFyZ2V0KCk7Zy5nZXROZXN0ZWRFZGl0YWJsZShhLGQpfHxhLmlubGluZSYmZy5pc0RvbURyYWdIYW5kbGVyKGQpfHxiLmRhdGEucHJldmVudERlZmF1bHQoKX0pO2Eud3JhcHBlci5yZW1vdmVDbGFzcyhcImNrZV93aWRnZXRfbmV3XCIpO2EuZWxlbWVudC5hZGRDbGFzcyhcImNrZV93aWRnZXRfZWxlbWVudFwiKTthLm9uKFwia2V5XCIsZnVuY3Rpb24oYil7Yj1iLmRhdGEua2V5Q29kZTtpZigxMz09YilhLmVkaXQoKTtlbHNle2lmKGI9PUNLRURJVE9SLkNUUkwrNjd8fGI9PUNLRURJVE9SLkNUUkwrODgpe3koYSxiPT1DS0VESVRPUi5DVFJMKzg4KTtyZXR1cm59aWYoYiBpbiBkYXx8Q0tFRElUT1IuQ1RSTCZifHxDS0VESVRPUi5BTFQmYilyZXR1cm59cmV0dXJuITF9LG51bGwsbnVsbCw5OTkpO2Eub24oXCJkb3VibGVjbGlja1wiLGZ1bmN0aW9uKGIpe2EuZWRpdCgpJiZiLmNhbmNlbCgpfSk7aWYoYi5kYXRhKWEub24oXCJkYXRhXCIsYi5kYXRhKTtcbmlmKGIuZWRpdClhLm9uKFwiZWRpdFwiLGIuZWRpdCl9ZnVuY3Rpb24gY2EoYSl7KGEud3JhcHBlcj1hLmVsZW1lbnQuZ2V0UGFyZW50KCkpLnNldEF0dHJpYnV0ZShcImRhdGEtY2tlLXdpZGdldC1pZFwiLGEuaWQpfWZ1bmN0aW9uIHIoYSl7YS5lbGVtZW50LmRhdGEoXCJja2Utd2lkZ2V0LWRhdGFcIixlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoYS5kYXRhKSkpfUNLRURJVE9SLnBsdWdpbnMuYWRkKFwid2lkZ2V0XCIse3JlcXVpcmVzOlwibGluZXV0aWxzLGNsaXBib2FyZFwiLG9uTG9hZDpmdW5jdGlvbigpe0NLRURJVE9SLmFkZENzcyhcIi5ja2Vfd2lkZ2V0X3dyYXBwZXJ7cG9zaXRpb246cmVsYXRpdmU7b3V0bGluZTpub25lfS5ja2Vfd2lkZ2V0X2lubGluZXtkaXNwbGF5OmlubGluZS1ibG9ja30uY2tlX3dpZGdldF93cmFwcGVyOmhvdmVyXFx4M2UuY2tlX3dpZGdldF9lbGVtZW50e291dGxpbmU6MnB4IHNvbGlkIHllbGxvdztjdXJzb3I6ZGVmYXVsdH0uY2tlX3dpZGdldF93cmFwcGVyOmhvdmVyIC5ja2Vfd2lkZ2V0X2VkaXRhYmxle291dGxpbmU6MnB4IHNvbGlkIHllbGxvd30uY2tlX3dpZGdldF93cmFwcGVyLmNrZV93aWRnZXRfZm9jdXNlZFxceDNlLmNrZV93aWRnZXRfZWxlbWVudCwuY2tlX3dpZGdldF93cmFwcGVyIC5ja2Vfd2lkZ2V0X2VkaXRhYmxlLmNrZV93aWRnZXRfZWRpdGFibGVfZm9jdXNlZHtvdXRsaW5lOjJweCBzb2xpZCAjYWNlfS5ja2Vfd2lkZ2V0X2VkaXRhYmxle2N1cnNvcjp0ZXh0fS5ja2Vfd2lkZ2V0X2RyYWdfaGFuZGxlcl9jb250YWluZXJ7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MTVweDtoZWlnaHQ6MDtkaXNwbGF5Om5vbmU7b3BhY2l0eTowLjc1O3RyYW5zaXRpb246aGVpZ2h0IDBzIDAuMnM7bGluZS1oZWlnaHQ6MH0uY2tlX3dpZGdldF93cmFwcGVyOmhvdmVyXFx4M2UuY2tlX3dpZGdldF9kcmFnX2hhbmRsZXJfY29udGFpbmVye2hlaWdodDoxNXB4O3RyYW5zaXRpb246bm9uZX0uY2tlX3dpZGdldF9kcmFnX2hhbmRsZXJfY29udGFpbmVyOmhvdmVye29wYWNpdHk6MX1pbWcuY2tlX3dpZGdldF9kcmFnX2hhbmRsZXJ7Y3Vyc29yOm1vdmU7d2lkdGg6MTVweDtoZWlnaHQ6MTVweDtkaXNwbGF5OmlubGluZS1ibG9ja30uY2tlX3dpZGdldF9tYXNre3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2Rpc3BsYXk6YmxvY2t9LmNrZV9lZGl0YWJsZS5ja2Vfd2lkZ2V0X2RyYWdnaW5nLCAuY2tlX2VkaXRhYmxlLmNrZV93aWRnZXRfZHJhZ2dpbmcgKntjdXJzb3I6bW92ZSAhaW1wb3J0YW50fVwiKX0sXG5iZWZvcmVJbml0OmZ1bmN0aW9uKGEpe2Eud2lkZ2V0cz1uZXcgcChhKX0sYWZ0ZXJJbml0OmZ1bmN0aW9uKGEpe3ZhciBiPWEud2lkZ2V0cy5yZWdpc3RlcmVkLGMsZCxlO2ZvcihkIGluIGIpYz1iW2RdLChlPWMuYnV0dG9uKSYmYS51aS5hZGRCdXR0b24mJmEudWkuYWRkQnV0dG9uKENLRURJVE9SLnRvb2xzLmNhcGl0YWxpemUoYy5uYW1lLCEwKSx7bGFiZWw6ZSxjb21tYW5kOmMubmFtZSx0b29sYmFyOlwiaW5zZXJ0LDEwXCJ9KTtTKGEpfX0pO3AucHJvdG90eXBlPXtNSU5fU0VMRUNUSU9OX0NIRUNLX0lOVEVSVkFMOjUwMCxhZGQ6ZnVuY3Rpb24oYSxiKXtiPUNLRURJVE9SLnRvb2xzLnByb3RvdHlwZWRDb3B5KGIpO2IubmFtZT1hO2IuXz1iLl98fHt9O3RoaXMuZWRpdG9yLmZpcmUoXCJ3aWRnZXREZWZpbml0aW9uXCIsYik7Yi50ZW1wbGF0ZSYmKGIudGVtcGxhdGU9bmV3IENLRURJVE9SLnRlbXBsYXRlKGIudGVtcGxhdGUpKTtPKHRoaXMuZWRpdG9yLGIpO1AodGhpcyxiKTtyZXR1cm4gdGhpcy5yZWdpc3RlcmVkW2FdPVxuYn0sYWRkVXBjYXN0Q2FsbGJhY2s6ZnVuY3Rpb24oYSl7dGhpcy5fLnVwY2FzdENhbGxiYWNrcy5wdXNoKGEpfSxjaGVja1NlbGVjdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWRpdG9yLmdldFNlbGVjdGlvbigpLGI9YS5nZXRTZWxlY3RlZEVsZW1lbnQoKSxjPXoodGhpcyksZDtpZihiJiYoZD10aGlzLmdldEJ5RWxlbWVudChiLCEwKSkpcmV0dXJuIGMuZm9jdXMoZCkuc2VsZWN0KGQpLmNvbW1pdCgpO2E9YS5nZXRSYW5nZXMoKVswXTtpZighYXx8YS5jb2xsYXBzZWQpcmV0dXJuIGMuY29tbWl0KCk7YT1uZXcgQ0tFRElUT1IuZG9tLndhbGtlcihhKTtmb3IoYS5ldmFsdWF0b3I9Zy5pc0RvbVdpZGdldFdyYXBwZXI7Yj1hLm5leHQoKTspYy5zZWxlY3QodGhpcy5nZXRCeUVsZW1lbnQoYikpO2MuY29tbWl0KCl9LGNoZWNrV2lkZ2V0czpmdW5jdGlvbihhKXt0aGlzLmZpcmUoXCJjaGVja1dpZGdldHNcIixDS0VESVRPUi50b29scy5jb3B5KGF8fHt9KSl9LGRlbDpmdW5jdGlvbihhKXtpZih0aGlzLmZvY3VzZWQ9PT1cbmEpe3ZhciBiPWEuZWRpdG9yLGM9Yi5jcmVhdGVSYW5nZSgpLGQ7KGQ9Yy5tb3ZlVG9DbG9zZXN0RWRpdGFibGVQb3NpdGlvbihhLndyYXBwZXIsITApKXx8KGQ9Yy5tb3ZlVG9DbG9zZXN0RWRpdGFibGVQb3NpdGlvbihhLndyYXBwZXIsITEpKTtkJiZiLmdldFNlbGVjdGlvbigpLnNlbGVjdFJhbmdlcyhbY10pfWEud3JhcHBlci5yZW1vdmUoKTt0aGlzLmRlc3Ryb3koYSwhMCl9LGRlc3Ryb3k6ZnVuY3Rpb24oYSxiKXt0aGlzLndpZGdldEhvbGRpbmdGb2N1c2VkRWRpdGFibGU9PT1hJiZuKHRoaXMsYSxudWxsLGIpO2EuZGVzdHJveShiKTtkZWxldGUgdGhpcy5pbnN0YW5jZXNbYS5pZF07dGhpcy5maXJlKFwiaW5zdGFuY2VEZXN0cm95ZWRcIixhKX0sZGVzdHJveUFsbDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT10aGlzLmluc3RhbmNlcztpZihiJiYhYSl7ZD1iLmZpbmQoXCIuY2tlX3dpZGdldF93cmFwcGVyXCIpO2Zvcih2YXIgZT1kLmNvdW50KCksZj0wO2Y8ZTsrK2YpKGM9dGhpcy5nZXRCeUVsZW1lbnQoZC5nZXRJdGVtKGYpLFxuITApKSYmdGhpcy5kZXN0cm95KGMpfWVsc2UgZm9yKGQgaW4gZSljPWVbZF0sdGhpcy5kZXN0cm95KGMsYSl9LGZpbmFsaXplQ3JlYXRpb246ZnVuY3Rpb24oYSl7KGE9YS5nZXRGaXJzdCgpKSYmZy5pc0RvbVdpZGdldFdyYXBwZXIoYSkmJih0aGlzLmVkaXRvci5pbnNlcnRFbGVtZW50KGEpLGE9dGhpcy5nZXRCeUVsZW1lbnQoYSksYS5yZWFkeT0hMCxhLmZpcmUoXCJyZWFkeVwiKSxhLmZvY3VzKCkpfSxnZXRCeUVsZW1lbnQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiBhLmlzKGIpJiZhLmRhdGEoXCJja2Utd2lkZ2V0LWlkXCIpfXZhciBiPXtkaXY6MSxzcGFuOjF9O3JldHVybiBmdW5jdGlvbihiLGQpe2lmKCFiKXJldHVybiBudWxsO3ZhciBlPWEoYik7aWYoIWQmJiFlKXt2YXIgZj10aGlzLmVkaXRvci5lZGl0YWJsZSgpO2RvIGI9Yi5nZXRQYXJlbnQoKTt3aGlsZShiJiYhYi5lcXVhbHMoZikmJiEoZT1hKGIpKSl9cmV0dXJuIHRoaXMuaW5zdGFuY2VzW2VdfHxudWxsfX0oKSxcbmluaXRPbjpmdW5jdGlvbihhLGIsYyl7Yj9cInN0cmluZ1wiPT10eXBlb2YgYiYmKGI9dGhpcy5yZWdpc3RlcmVkW2JdKTpiPXRoaXMucmVnaXN0ZXJlZFthLmRhdGEoXCJ3aWRnZXRcIildO2lmKCFiKXJldHVybiBudWxsO3ZhciBkPXRoaXMud3JhcEVsZW1lbnQoYSxiLm5hbWUpO3JldHVybiBkP2QuaGFzQ2xhc3MoXCJja2Vfd2lkZ2V0X25ld1wiKT8oYT1uZXcgZyh0aGlzLHRoaXMuXy5uZXh0SWQrKyxhLGIsYyksYS5pc0luaXRlZCgpP3RoaXMuaW5zdGFuY2VzW2EuaWRdPWE6bnVsbCk6dGhpcy5nZXRCeUVsZW1lbnQoYSk6bnVsbH0saW5pdE9uQWxsOmZ1bmN0aW9uKGEpe2E9KGF8fHRoaXMuZWRpdG9yLmVkaXRhYmxlKCkpLmZpbmQoXCIuY2tlX3dpZGdldF9uZXdcIik7Zm9yKHZhciBiPVtdLGMsZD1hLmNvdW50KCk7ZC0tOykoYz10aGlzLmluaXRPbihhLmdldEl0ZW0oZCkuZ2V0Rmlyc3QoZy5pc0RvbVdpZGdldEVsZW1lbnQpKSkmJmIucHVzaChjKTtyZXR1cm4gYn0sb25XaWRnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9XG5BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO2Iuc2hpZnQoKTtmb3IodmFyIGMgaW4gdGhpcy5pbnN0YW5jZXMpe3ZhciBkPXRoaXMuaW5zdGFuY2VzW2NdO2QubmFtZT09YSYmZC5vbi5hcHBseShkLGIpfXRoaXMub24oXCJpbnN0YW5jZUNyZWF0ZWRcIixmdW5jdGlvbihjKXtjPWMuZGF0YTtjLm5hbWU9PWEmJmMub24uYXBwbHkoYyxiKX0pfSxwYXJzZUVsZW1lbnRDbGFzc2VzOmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiBudWxsO2E9Q0tFRElUT1IudG9vbHMudHJpbShhKS5zcGxpdCgvXFxzKy8pO2Zvcih2YXIgYixjPXt9LGQ9MDtiPWEucG9wKCk7KS0xPT1iLmluZGV4T2YoXCJja2VfXCIpJiYoY1tiXT1kPTEpO3JldHVybiBkP2M6bnVsbH0sd3JhcEVsZW1lbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1udWxsLGQsZTtpZihhIGluc3RhbmNlb2YgQ0tFRElUT1IuZG9tLmVsZW1lbnQpe2Q9dGhpcy5yZWdpc3RlcmVkW2J8fGEuZGF0YShcIndpZGdldFwiKV07aWYoIWQpcmV0dXJuIG51bGw7XG5pZigoYz1hLmdldFBhcmVudCgpKSYmYy50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmMuZGF0YShcImNrZS13aWRnZXQtd3JhcHBlclwiKSlyZXR1cm4gYzthLmhhc0F0dHJpYnV0ZShcImRhdGEtY2tlLXdpZGdldC1rZWVwLWF0dHJcIil8fGEuZGF0YShcImNrZS13aWRnZXQta2VlcC1hdHRyXCIsYS5kYXRhKFwid2lkZ2V0XCIpPzE6MCk7YiYmYS5kYXRhKFwid2lkZ2V0XCIsYik7ZT14KGQsYS5nZXROYW1lKCkpO2M9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KGU/XCJzcGFuXCI6XCJkaXZcIik7Yy5zZXRBdHRyaWJ1dGVzKHYoZSkpO2MuZGF0YShcImNrZS1kaXNwbGF5LW5hbWVcIixkLnBhdGhOYW1lP2QucGF0aE5hbWU6YS5nZXROYW1lKCkpO2EuZ2V0UGFyZW50KCEwKSYmYy5yZXBsYWNlKGEpO2EuYXBwZW5kVG8oYyl9ZWxzZSBpZihhIGluc3RhbmNlb2YgQ0tFRElUT1IuaHRtbFBhcnNlci5lbGVtZW50KXtkPXRoaXMucmVnaXN0ZXJlZFtifHxhLmF0dHJpYnV0ZXNbXCJkYXRhLXdpZGdldFwiXV07aWYoIWQpcmV0dXJuIG51bGw7XG5pZigoYz1hLnBhcmVudCkmJmMudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZjLmF0dHJpYnV0ZXNbXCJkYXRhLWNrZS13aWRnZXQtd3JhcHBlclwiXSlyZXR1cm4gYztcImRhdGEtY2tlLXdpZGdldC1rZWVwLWF0dHJcImluIGEuYXR0cmlidXRlc3x8KGEuYXR0cmlidXRlc1tcImRhdGEtY2tlLXdpZGdldC1rZWVwLWF0dHJcIl09YS5hdHRyaWJ1dGVzW1wiZGF0YS13aWRnZXRcIl0/MTowKTtiJiYoYS5hdHRyaWJ1dGVzW1wiZGF0YS13aWRnZXRcIl09Yik7ZT14KGQsYS5uYW1lKTtjPW5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQoZT9cInNwYW5cIjpcImRpdlwiLHYoZSkpO2MuYXR0cmlidXRlc1tcImRhdGEtY2tlLWRpc3BsYXktbmFtZVwiXT1kLnBhdGhOYW1lP2QucGF0aE5hbWU6YS5uYW1lO2Q9YS5wYXJlbnQ7dmFyIGY7ZCYmKGY9YS5nZXRJbmRleCgpLGEucmVtb3ZlKCkpO2MuYWRkKGEpO2QmJncoZCxmLGMpfXJldHVybiBjfSxfdGVzdHNfY3JlYXRlRWRpdGFibGVGaWx0ZXI6dX07Q0tFRElUT1IuZXZlbnQuaW1wbGVtZW50T24ocC5wcm90b3R5cGUpO1xuZy5wcm90b3R5cGU9e2FkZENsYXNzOmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudC5hZGRDbGFzcyhhKX0sYXBwbHlTdHlsZTpmdW5jdGlvbihhKXtBKHRoaXMsYSwxKX0sY2hlY2tTdHlsZUFjdGl2ZTpmdW5jdGlvbihhKXthPUIoYSk7dmFyIGI7aWYoIWEpcmV0dXJuITE7Zm9yKDtiPWEucG9wKCk7KWlmKCF0aGlzLmhhc0NsYXNzKGIpKXJldHVybiExO3JldHVybiEwfSxkZXN0cm95OmZ1bmN0aW9uKGEpe3RoaXMuZmlyZShcImRlc3Ryb3lcIik7aWYodGhpcy5lZGl0YWJsZXMpZm9yKHZhciBiIGluIHRoaXMuZWRpdGFibGVzKXRoaXMuZGVzdHJveUVkaXRhYmxlKGIsYSk7YXx8KFwiMFwiPT10aGlzLmVsZW1lbnQuZGF0YShcImNrZS13aWRnZXQta2VlcC1hdHRyXCIpJiZ0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS13aWRnZXRcIiksdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZXMoW1wiZGF0YS1ja2Utd2lkZ2V0LWRhdGFcIixcImRhdGEtY2tlLXdpZGdldC1rZWVwLWF0dHJcIl0pLFxudGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwiY2tlX3dpZGdldF9lbGVtZW50XCIpLHRoaXMuZWxlbWVudC5yZXBsYWNlKHRoaXMud3JhcHBlcikpO3RoaXMud3JhcHBlcj1udWxsfSxkZXN0cm95RWRpdGFibGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmVkaXRhYmxlc1thXTtjLnJlbW92ZUxpc3RlbmVyKFwiZm9jdXNcIixFKTtjLnJlbW92ZUxpc3RlbmVyKFwiYmx1clwiLEQpO3RoaXMuZWRpdG9yLmZvY3VzTWFuYWdlci5yZW1vdmUoYyk7Ynx8KHRoaXMucmVwb3NpdG9yeS5kZXN0cm95QWxsKCExLGMpLGMucmVtb3ZlQ2xhc3MoXCJja2Vfd2lkZ2V0X2VkaXRhYmxlXCIpLGMucmVtb3ZlQ2xhc3MoXCJja2Vfd2lkZ2V0X2VkaXRhYmxlX2ZvY3VzZWRcIiksYy5yZW1vdmVBdHRyaWJ1dGVzKFtcImNvbnRlbnRlZGl0YWJsZVwiLFwiZGF0YS1ja2Utd2lkZ2V0LWVkaXRhYmxlXCIsXCJkYXRhLWNrZS1lbnRlci1tb2RlXCJdKSk7ZGVsZXRlIHRoaXMuZWRpdGFibGVzW2FdfSxlZGl0OmZ1bmN0aW9uKCl7dmFyIGE9XG57ZGlhbG9nOnRoaXMuZGlhbG9nfSxiPXRoaXM7aWYoITE9PT10aGlzLmZpcmUoXCJlZGl0XCIsYSl8fCFhLmRpYWxvZylyZXR1cm4hMTt0aGlzLmVkaXRvci5vcGVuRGlhbG9nKGEuZGlhbG9nLGZ1bmN0aW9uKGEpe3ZhciBkLGU7ITEhPT1iLmZpcmUoXCJkaWFsb2dcIixhKSYmKGQ9YS5vbihcInNob3dcIixmdW5jdGlvbigpe2Euc2V0dXBDb250ZW50KGIpfSksZT1hLm9uKFwib2tcIixmdW5jdGlvbigpe3ZhciBkLGU9Yi5vbihcImRhdGFcIixmdW5jdGlvbihhKXtkPTE7YS5jYW5jZWwoKX0sbnVsbCxudWxsLDApO2IuZWRpdG9yLmZpcmUoXCJzYXZlU25hcHNob3RcIik7YS5jb21taXRDb250ZW50KGIpO2UucmVtb3ZlTGlzdGVuZXIoKTtkJiYoYi5maXJlKFwiZGF0YVwiLGIuZGF0YSksYi5lZGl0b3IuZmlyZShcInNhdmVTbmFwc2hvdFwiKSl9KSxhLm9uY2UoXCJoaWRlXCIsZnVuY3Rpb24oKXtkLnJlbW92ZUxpc3RlbmVyKCk7ZS5yZW1vdmVMaXN0ZW5lcigpfSkpfSk7cmV0dXJuITB9LGdldENsYXNzZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBvc2l0b3J5LnBhcnNlRWxlbWVudENsYXNzZXModGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpKX0sXG5oYXNDbGFzczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lbGVtZW50Lmhhc0NsYXNzKGEpfSxpbml0RWRpdGFibGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9maW5kT25lTm90TmVzdGVkKGIuc2VsZWN0b3IpO3JldHVybiBjJiZjLmlzKENLRURJVE9SLmR0ZC4kZWRpdGFibGUpPyhjPW5ldyBxKHRoaXMuZWRpdG9yLGMse2ZpbHRlcjp1LmNhbGwodGhpcy5yZXBvc2l0b3J5LHRoaXMubmFtZSxhLGIpfSksdGhpcy5lZGl0YWJsZXNbYV09YyxjLnNldEF0dHJpYnV0ZXMoe2NvbnRlbnRlZGl0YWJsZTpcInRydWVcIixcImRhdGEtY2tlLXdpZGdldC1lZGl0YWJsZVwiOmEsXCJkYXRhLWNrZS1lbnRlci1tb2RlXCI6Yy5lbnRlck1vZGV9KSxjLmZpbHRlciYmYy5kYXRhKFwiY2tlLWZpbHRlclwiLGMuZmlsdGVyLmlkKSxjLmFkZENsYXNzKFwiY2tlX3dpZGdldF9lZGl0YWJsZVwiKSxjLnJlbW92ZUNsYXNzKFwiY2tlX3dpZGdldF9lZGl0YWJsZV9mb2N1c2VkXCIpLGIucGF0aE5hbWUmJmMuZGF0YShcImNrZS1kaXNwbGF5LW5hbWVcIixcbmIucGF0aE5hbWUpLHRoaXMuZWRpdG9yLmZvY3VzTWFuYWdlci5hZGQoYyksYy5vbihcImZvY3VzXCIsRSx0aGlzKSxDS0VESVRPUi5lbnYuaWUmJmMub24oXCJibHVyXCIsRCx0aGlzKSxjLl8uaW5pdGlhbFNldERhdGE9ITAsYy5zZXREYXRhKGMuZ2V0SHRtbCgpKSwhMCk6ITF9LF9maW5kT25lTm90TmVzdGVkOmZ1bmN0aW9uKGEpe2E9dGhpcy53cmFwcGVyLmZpbmQoYSk7Zm9yKHZhciBiLGMsZD0wO2Q8YS5jb3VudCgpO2QrKylpZihiPWEuZ2V0SXRlbShkKSxjPWIuZ2V0QXNjZW5kYW50KGcuaXNEb21XaWRnZXRXcmFwcGVyKSx0aGlzLndyYXBwZXIuZXF1YWxzKGMpKXJldHVybiBiO3JldHVybiBudWxsfSxpc0luaXRlZDpmdW5jdGlvbigpe3JldHVybiEoIXRoaXMud3JhcHBlcnx8IXRoaXMuaW5pdGVkKX0saXNSZWFkeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzSW5pdGVkKCkmJnRoaXMucmVhZHl9LGZvY3VzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG5pZihhKXt2YXIgYj10aGlzLmVkaXRvci5jaGVja0RpcnR5KCk7YS5mYWtlKHRoaXMud3JhcHBlcik7IWImJnRoaXMuZWRpdG9yLnJlc2V0RGlydHkoKX10aGlzLmVkaXRvci5mb2N1cygpfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoYSl9LHJlbW92ZVN0eWxlOmZ1bmN0aW9uKGEpe0EodGhpcyxhLDApfSxzZXREYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5kYXRhLGQ9MDtpZihcInN0cmluZ1wiPT10eXBlb2YgYSljW2FdIT09YiYmKGNbYV09YixkPTEpO2Vsc2V7dmFyIGU9YTtmb3IoYSBpbiBlKWNbYV0hPT1lW2FdJiYoZD0xLGNbYV09ZVthXSl9ZCYmdGhpcy5kYXRhUmVhZHkmJihyKHRoaXMpLHRoaXMuZmlyZShcImRhdGFcIixjKSk7cmV0dXJuIHRoaXN9LHNldEZvY3VzZWQ6ZnVuY3Rpb24oYSl7dGhpcy53cmFwcGVyW2E/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJja2Vfd2lkZ2V0X2ZvY3VzZWRcIik7dGhpcy5maXJlKGE/XCJmb2N1c1wiOlxuXCJibHVyXCIpO3JldHVybiB0aGlzfSxzZXRTZWxlY3RlZDpmdW5jdGlvbihhKXt0aGlzLndyYXBwZXJbYT9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShcImNrZV93aWRnZXRfc2VsZWN0ZWRcIik7dGhpcy5maXJlKGE/XCJzZWxlY3RcIjpcImRlc2VsZWN0XCIpO3JldHVybiB0aGlzfSx1cGRhdGVEcmFnSGFuZGxlclBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lZGl0b3IsYj10aGlzLmVsZW1lbnQuJCxjPXRoaXMuXy5kcmFnSGFuZGxlck9mZnNldCxiPXt4OmIub2Zmc2V0TGVmdCx5OmIub2Zmc2V0VG9wLTE1fTtjJiZiLng9PWMueCYmYi55PT1jLnl8fChjPWEuY2hlY2tEaXJ0eSgpLGEuZmlyZShcImxvY2tTbmFwc2hvdFwiKSx0aGlzLmRyYWdIYW5kbGVyQ29udGFpbmVyLnNldFN0eWxlcyh7dG9wOmIueStcInB4XCIsbGVmdDpiLngrXCJweFwiLGRpc3BsYXk6XCJibG9ja1wifSksYS5maXJlKFwidW5sb2NrU25hcHNob3RcIiksIWMmJmEucmVzZXREaXJ0eSgpLHRoaXMuXy5kcmFnSGFuZGxlck9mZnNldD1cbmIpfX07Q0tFRElUT1IuZXZlbnQuaW1wbGVtZW50T24oZy5wcm90b3R5cGUpO2cuZ2V0TmVzdGVkRWRpdGFibGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4hYnx8Yi5lcXVhbHMoYSk/bnVsbDpnLmlzRG9tTmVzdGVkRWRpdGFibGUoYik/YjpnLmdldE5lc3RlZEVkaXRhYmxlKGEsYi5nZXRQYXJlbnQoKSl9O2cuaXNEb21EcmFnSGFuZGxlcj1mdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuaGFzQXR0cmlidXRlKFwiZGF0YS1ja2Utd2lkZ2V0LWRyYWctaGFuZGxlclwiKX07Zy5pc0RvbURyYWdIYW5kbGVyQ29udGFpbmVyPWZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYS5oYXNDbGFzcyhcImNrZV93aWRnZXRfZHJhZ19oYW5kbGVyX2NvbnRhaW5lclwiKX07Zy5pc0RvbU5lc3RlZEVkaXRhYmxlPWZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmYS5oYXNBdHRyaWJ1dGUoXCJkYXRhLWNrZS13aWRnZXQtZWRpdGFibGVcIil9O1xuZy5pc0RvbVdpZGdldEVsZW1lbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiZhLmhhc0F0dHJpYnV0ZShcImRhdGEtd2lkZ2V0XCIpfTtnLmlzRG9tV2lkZ2V0V3JhcHBlcj1mdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlPT1DS0VESVRPUi5OT0RFX0VMRU1FTlQmJmEuaGFzQXR0cmlidXRlKFwiZGF0YS1ja2Utd2lkZ2V0LXdyYXBwZXJcIil9O2cuaXNQYXJzZXJXaWRnZXRFbGVtZW50PWZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGU9PUNLRURJVE9SLk5PREVfRUxFTUVOVCYmISFhLmF0dHJpYnV0ZXNbXCJkYXRhLXdpZGdldFwiXX07Zy5pc1BhcnNlcldpZGdldFdyYXBwZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZT09Q0tFRElUT1IuTk9ERV9FTEVNRU5UJiYhIWEuYXR0cmlidXRlc1tcImRhdGEtY2tlLXdpZGdldC13cmFwcGVyXCJdfTtxLnByb3RvdHlwZT1DS0VESVRPUi50b29scy5leHRlbmQoQ0tFRElUT1IudG9vbHMucHJvdG90eXBlZENvcHkoQ0tFRElUT1IuZG9tLmVsZW1lbnQucHJvdG90eXBlKSxcbntzZXREYXRhOmZ1bmN0aW9uKGEpe3RoaXMuXy5pbml0aWFsU2V0RGF0YXx8dGhpcy5lZGl0b3Iud2lkZ2V0cy5kZXN0cm95QWxsKCExLHRoaXMpO3RoaXMuXy5pbml0aWFsU2V0RGF0YT0hMTthPXRoaXMuZWRpdG9yLmRhdGFQcm9jZXNzb3IudG9IdG1sKGEse2NvbnRleHQ6dGhpcy5nZXROYW1lKCksZmlsdGVyOnRoaXMuZmlsdGVyLGVudGVyTW9kZTp0aGlzLmVudGVyTW9kZX0pO3RoaXMuc2V0SHRtbChhKTt0aGlzLmVkaXRvci53aWRnZXRzLmluaXRPbkFsbCh0aGlzKX0sZ2V0RGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkaXRvci5kYXRhUHJvY2Vzc29yLnRvRGF0YUZvcm1hdCh0aGlzLmdldEh0bWwoKSx7Y29udGV4dDp0aGlzLmdldE5hbWUoKSxmaWx0ZXI6dGhpcy5maWx0ZXIsZW50ZXJNb2RlOnRoaXMuZW50ZXJNb2RlfSl9fSk7dmFyIFU9L14oPzo8KD86ZGl2fHNwYW4pKD86IGRhdGEtY2tlLXRlbXA9XCIxXCIpPyg/OiBpZD1cImNrZV9jb3B5YmluXCIpPyg/OiBkYXRhLWNrZS10ZW1wPVwiMVwiKT8+KT8oPzo8KD86ZGl2fHNwYW4pKD86IHN0eWxlPVwiW15cIl0rXCIpPz4pPzxzcGFuIFtePl0qZGF0YS1ja2UtY29weWJpbi1zdGFydD1cIjFcIltePl0qPi4/PFxcL3NwYW4+KFtcXHNcXFNdKyk8c3BhbiBbXj5dKmRhdGEtY2tlLWNvcHliaW4tZW5kPVwiMVwiW14+XSo+Lj88XFwvc3Bhbj4oPzo8XFwvKD86ZGl2fHNwYW4pPik/KD86PFxcLyg/OmRpdnxzcGFuKT4pPyQvaSxcbmRhPXszNzoxLDM4OjEsMzk6MSw0MDoxLDg6MSw0NjoxfTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7fWZ1bmN0aW9uIGIoYSxiLGUpe3JldHVybiBlJiZ0aGlzLmNoZWNrRWxlbWVudChhKT8oYT1lLndpZGdldHMuZ2V0QnlFbGVtZW50KGEsITApKSYmYS5jaGVja1N0eWxlQWN0aXZlKHRoaXMpOiExfUNLRURJVE9SLnN0eWxlLmFkZEN1c3RvbUhhbmRsZXIoe3R5cGU6XCJ3aWRnZXRcIixzZXR1cDpmdW5jdGlvbihhKXt0aGlzLndpZGdldD1hLndpZGdldH0sYXBwbHk6ZnVuY3Rpb24oYSl7YSBpbnN0YW5jZW9mIENLRURJVE9SLmVkaXRvciYmdGhpcy5jaGVja0FwcGxpY2FibGUoYS5lbGVtZW50UGF0aCgpLGEpJiZhLndpZGdldHMuZm9jdXNlZC5hcHBseVN0eWxlKHRoaXMpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7YSBpbnN0YW5jZW9mIENLRURJVE9SLmVkaXRvciYmdGhpcy5jaGVja0FwcGxpY2FibGUoYS5lbGVtZW50UGF0aCgpLGEpJiZhLndpZGdldHMuZm9jdXNlZC5yZW1vdmVTdHlsZSh0aGlzKX0sXG5jaGVja0FjdGl2ZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNoZWNrRWxlbWVudE1hdGNoKGEubGFzdEVsZW1lbnQsMCxiKX0sY2hlY2tBcHBsaWNhYmxlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIgaW5zdGFuY2VvZiBDS0VESVRPUi5lZGl0b3I/dGhpcy5jaGVja0VsZW1lbnQoYS5sYXN0RWxlbWVudCk6ITF9LGNoZWNrRWxlbWVudE1hdGNoOmIsY2hlY2tFbGVtZW50UmVtb3ZhYmxlOmIsY2hlY2tFbGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybiBnLmlzRG9tV2lkZ2V0V3JhcHBlcihhKT8oYT1hLmdldEZpcnN0KGcuaXNEb21XaWRnZXRFbGVtZW50KSkmJmEuZGF0YShcIndpZGdldFwiKT09dGhpcy53aWRnZXQ6ITF9LGJ1aWxkUHJldmlldzpmdW5jdGlvbihhKXtyZXR1cm4gYXx8dGhpcy5fLmRlZmluaXRpb24ubmFtZX0sdG9BbGxvd2VkQ29udGVudFJ1bGVzOmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiBudWxsO2E9YS53aWRnZXRzLnJlZ2lzdGVyZWRbdGhpcy53aWRnZXRdO3ZhciBiLFxuZT17fTtpZighYSlyZXR1cm4gbnVsbDtpZihhLnN0eWxlYWJsZUVsZW1lbnRzKXtiPXRoaXMuZ2V0Q2xhc3Nlc0FycmF5KCk7aWYoIWIpcmV0dXJuIG51bGw7ZVthLnN0eWxlYWJsZUVsZW1lbnRzXT17Y2xhc3NlczpiLHByb3BlcnRpZXNPbmx5OiEwfTtyZXR1cm4gZX1yZXR1cm4gYS5zdHlsZVRvQWxsb3dlZENvbnRlbnRSdWxlcz9hLnN0eWxlVG9BbGxvd2VkQ29udGVudFJ1bGVzKHRoaXMpOm51bGx9LGdldENsYXNzZXNBcnJheTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuXy5kZWZpbml0aW9uLmF0dHJpYnV0ZXMmJnRoaXMuXy5kZWZpbml0aW9uLmF0dHJpYnV0ZXNbXCJjbGFzc1wiXTtyZXR1cm4gYT9DS0VESVRPUi50b29scy50cmltKGEpLnNwbGl0KC9cXHMrLyk6bnVsbH0sYXBwbHlUb1JhbmdlOmEscmVtb3ZlRnJvbVJhbmdlOmEsYXBwbHlUb09iamVjdDphfSl9KSgpO0NLRURJVE9SLnBsdWdpbnMud2lkZ2V0PWc7Zy5yZXBvc2l0b3J5PXA7Zy5uZXN0ZWRFZGl0YWJsZT1xfSkoKTtDS0VESVRPUi5jb25maWcucGx1Z2lucz0nZGlhbG9ndWksZGlhbG9nLGFib3V0LGExMXloZWxwLGRpYWxvZ2FkdnRhYixiYXNpY3N0eWxlcyxiaWRpLGJsb2NrcXVvdGUsY2xpcGJvYXJkLGJ1dHRvbixwYW5lbGJ1dHRvbixwYW5lbCxmbG9hdHBhbmVsLGNvbG9yYnV0dG9uLGNvbG9yZGlhbG9nLHRlbXBsYXRlcyxtZW51LGNvbnRleHRtZW51LGRpdixyZXNpemUsdG9vbGJhcixlbGVtZW50c3BhdGgsZW50ZXJrZXksZW50aXRpZXMscG9wdXAsZmlsZWJyb3dzZXIsZmluZCxmYWtlb2JqZWN0cyxmbGFzaCxmbG9hdGluZ3NwYWNlLGxpc3RibG9jayxyaWNoY29tYm8sZm9udCxmb3Jtcyxmb3JtYXQsaG9yaXpvbnRhbHJ1bGUsaHRtbHdyaXRlcixpZnJhbWUsd3lzaXd5Z2FyZWEsaW1hZ2UsaW5kZW50LGluZGVudGJsb2NrLGluZGVudGxpc3Qsc21pbGV5LGp1c3RpZnksbWVudWJ1dHRvbixsYW5ndWFnZSxsaW5rLGxpc3QsbGlzdHN0eWxlLG1hZ2ljbGluZSxtYXhpbWl6ZSxuZXdwYWdlLHBhZ2VicmVhayxwYXN0ZXRleHQscGFzdGVmcm9td29yZCxwcmV2aWV3LHByaW50LHJlbW92ZWZvcm1hdCxzYXZlLHNlbGVjdGFsbCxzaG93YmxvY2tzLHNob3dib3JkZXJzLHNvdXJjZWFyZWEsc3BlY2lhbGNoYXIsc2NheXQsc3R5bGVzY29tYm8sdGFiLHRhYmxlLHRhYmxldG9vbHMsdW5kbyx3c2MsbGluZXV0aWxzLHdpZGdldCc7Q0tFRElUT1IuY29uZmlnLnNraW49J21vb25vJzsoZnVuY3Rpb24oKSB7dmFyIHNldEljb25zID0gZnVuY3Rpb24oaWNvbnMsIHN0cmlwKSB7dmFyIHBhdGggPSBDS0VESVRPUi5nZXRVcmwoICdwbHVnaW5zLycgKyBzdHJpcCApO2ljb25zID0gaWNvbnMuc3BsaXQoICcsJyApO2ZvciAoIHZhciBpID0gMDsgaSA8IGljb25zLmxlbmd0aDsgaSsrIClDS0VESVRPUi5za2luLmljb25zWyBpY29uc1sgaSBdIF0gPSB7IHBhdGg6IHBhdGgsIG9mZnNldDogLWljb25zWyArK2kgXSwgYmdzaXplIDogaWNvbnNbICsraSBdIH07fTtpZiAoQ0tFRElUT1IuZW52LmhpZHBpKSBzZXRJY29ucygnYWJvdXQsMCwsYm9sZCwyNCwsaXRhbGljLDQ4LCxzdHJpa2UsNzIsLHN1YnNjcmlwdCw5Niwsc3VwZXJzY3JpcHQsMTIwLCx1bmRlcmxpbmUsMTQ0LCxiaWRpbHRyLDE2OCwsYmlkaXJ0bCwxOTIsLGJsb2NrcXVvdGUsMjE2LCxjb3B5LXJ0bCwyNDAsLGNvcHksMjY0LCxjdXQtcnRsLDI4OCwsY3V0LDMxMiwscGFzdGUtcnRsLDMzNiwscGFzdGUsMzYwLCxiZ2NvbG9yLDM4NCwsdGV4dGNvbG9yLDQwOCwsdGVtcGxhdGVzLXJ0bCw0MzIsLHRlbXBsYXRlcyw0NTYsLGNyZWF0ZWRpdiw0ODAsLGZpbmQtcnRsLDUwNCwsZmluZCw1MjgsLHJlcGxhY2UsNTUyLCxmbGFzaCw1NzYsLGJ1dHRvbiw2MDAsLGNoZWNrYm94LDYyNCwsZm9ybSw2NDgsLGhpZGRlbmZpZWxkLDY3MiwsaW1hZ2VidXR0b24sNjk2LCxyYWRpbyw3MjAsLHNlbGVjdC1ydGwsNzQ0LCxzZWxlY3QsNzY4LCx0ZXh0YXJlYS1ydGwsNzkyLCx0ZXh0YXJlYSw4MTYsLHRleHRmaWVsZC1ydGwsODQwLCx0ZXh0ZmllbGQsODY0LCxob3Jpem9udGFscnVsZSw4ODgsLGlmcmFtZSw5MTIsLGltYWdlLDkzNiwsaW5kZW50LXJ0bCw5NjAsLGluZGVudCw5ODQsLG91dGRlbnQtcnRsLDEwMDgsLG91dGRlbnQsMTAzMiwsc21pbGV5LDEwNTYsLGp1c3RpZnlibG9jaywxMDgwLCxqdXN0aWZ5Y2VudGVyLDExMDQsLGp1c3RpZnlsZWZ0LDExMjgsLGp1c3RpZnlyaWdodCwxMTUyLCxsYW5ndWFnZSwxMTc2LCxhbmNob3ItcnRsLDEyMDAsLGFuY2hvciwxMjI0LCxsaW5rLDEyNDgsLHVubGluaywxMjcyLCxidWxsZXRlZGxpc3QtcnRsLDEyOTYsLGJ1bGxldGVkbGlzdCwxMzIwLCxudW1iZXJlZGxpc3QtcnRsLDEzNDQsLG51bWJlcmVkbGlzdCwxMzY4LCxtYXhpbWl6ZSwxMzkyLCxuZXdwYWdlLXJ0bCwxNDE2LCxuZXdwYWdlLDE0NDAsLHBhZ2VicmVhay1ydGwsMTQ2NCwscGFnZWJyZWFrLDE0ODgsLHBhc3RldGV4dC1ydGwsMTUxMiwscGFzdGV0ZXh0LDE1MzYsLHBhc3RlZnJvbXdvcmQtcnRsLDE1NjAsLHBhc3RlZnJvbXdvcmQsMTU4NCwscHJldmlldy1ydGwsMTYwOCwscHJldmlldywxNjMyLCxwcmludCwxNjU2LCxyZW1vdmVmb3JtYXQsMTY4MCwsc2F2ZSwxNzA0LCxzZWxlY3RhbGwsMTcyOCwsc2hvd2Jsb2Nrcy1ydGwsMTc1Miwsc2hvd2Jsb2NrcywxNzc2LCxzb3VyY2UtcnRsLDE4MDAsLHNvdXJjZSwxODI0LCxzcGVjaWFsY2hhciwxODQ4LCxzY2F5dCwxODcyLCx0YWJsZSwxODk2LCxyZWRvLXJ0bCwxOTIwLCxyZWRvLDE5NDQsLHVuZG8tcnRsLDE5NjgsLHVuZG8sMTk5Miwsc3BlbGxjaGVja2VyLDIwMTYsJywnaWNvbnNfaGlkcGkucG5nJyk7ZWxzZSBzZXRJY29ucygnYWJvdXQsMCxhdXRvLGJvbGQsMjQsYXV0byxpdGFsaWMsNDgsYXV0byxzdHJpa2UsNzIsYXV0byxzdWJzY3JpcHQsOTYsYXV0byxzdXBlcnNjcmlwdCwxMjAsYXV0byx1bmRlcmxpbmUsMTQ0LGF1dG8sYmlkaWx0ciwxNjgsYXV0byxiaWRpcnRsLDE5MixhdXRvLGJsb2NrcXVvdGUsMjE2LGF1dG8sY29weS1ydGwsMjQwLGF1dG8sY29weSwyNjQsYXV0byxjdXQtcnRsLDI4OCxhdXRvLGN1dCwzMTIsYXV0byxwYXN0ZS1ydGwsMzM2LGF1dG8scGFzdGUsMzYwLGF1dG8sYmdjb2xvciwzODQsYXV0byx0ZXh0Y29sb3IsNDA4LGF1dG8sdGVtcGxhdGVzLXJ0bCw0MzIsYXV0byx0ZW1wbGF0ZXMsNDU2LGF1dG8sY3JlYXRlZGl2LDQ4MCxhdXRvLGZpbmQtcnRsLDUwNCxhdXRvLGZpbmQsNTI4LGF1dG8scmVwbGFjZSw1NTIsYXV0byxmbGFzaCw1NzYsYXV0byxidXR0b24sNjAwLGF1dG8sY2hlY2tib3gsNjI0LGF1dG8sZm9ybSw2NDgsYXV0byxoaWRkZW5maWVsZCw2NzIsYXV0byxpbWFnZWJ1dHRvbiw2OTYsYXV0byxyYWRpbyw3MjAsYXV0byxzZWxlY3QtcnRsLDc0NCxhdXRvLHNlbGVjdCw3NjgsYXV0byx0ZXh0YXJlYS1ydGwsNzkyLGF1dG8sdGV4dGFyZWEsODE2LGF1dG8sdGV4dGZpZWxkLXJ0bCw4NDAsYXV0byx0ZXh0ZmllbGQsODY0LGF1dG8saG9yaXpvbnRhbHJ1bGUsODg4LGF1dG8saWZyYW1lLDkxMixhdXRvLGltYWdlLDkzNixhdXRvLGluZGVudC1ydGwsOTYwLGF1dG8saW5kZW50LDk4NCxhdXRvLG91dGRlbnQtcnRsLDEwMDgsYXV0byxvdXRkZW50LDEwMzIsYXV0byxzbWlsZXksMTA1NixhdXRvLGp1c3RpZnlibG9jaywxMDgwLGF1dG8sanVzdGlmeWNlbnRlciwxMTA0LGF1dG8sanVzdGlmeWxlZnQsMTEyOCxhdXRvLGp1c3RpZnlyaWdodCwxMTUyLGF1dG8sbGFuZ3VhZ2UsMTE3NixhdXRvLGFuY2hvci1ydGwsMTIwMCxhdXRvLGFuY2hvciwxMjI0LGF1dG8sbGluaywxMjQ4LGF1dG8sdW5saW5rLDEyNzIsYXV0byxidWxsZXRlZGxpc3QtcnRsLDEyOTYsYXV0byxidWxsZXRlZGxpc3QsMTMyMCxhdXRvLG51bWJlcmVkbGlzdC1ydGwsMTM0NCxhdXRvLG51bWJlcmVkbGlzdCwxMzY4LGF1dG8sbWF4aW1pemUsMTM5MixhdXRvLG5ld3BhZ2UtcnRsLDE0MTYsYXV0byxuZXdwYWdlLDE0NDAsYXV0byxwYWdlYnJlYWstcnRsLDE0NjQsYXV0byxwYWdlYnJlYWssMTQ4OCxhdXRvLHBhc3RldGV4dC1ydGwsMTUxMixhdXRvLHBhc3RldGV4dCwxNTM2LGF1dG8scGFzdGVmcm9td29yZC1ydGwsMTU2MCxhdXRvLHBhc3RlZnJvbXdvcmQsMTU4NCxhdXRvLHByZXZpZXctcnRsLDE2MDgsYXV0byxwcmV2aWV3LDE2MzIsYXV0byxwcmludCwxNjU2LGF1dG8scmVtb3ZlZm9ybWF0LDE2ODAsYXV0byxzYXZlLDE3MDQsYXV0byxzZWxlY3RhbGwsMTcyOCxhdXRvLHNob3dibG9ja3MtcnRsLDE3NTIsYXV0byxzaG93YmxvY2tzLDE3NzYsYXV0byxzb3VyY2UtcnRsLDE4MDAsYXV0byxzb3VyY2UsMTgyNCxhdXRvLHNwZWNpYWxjaGFyLDE4NDgsYXV0byxzY2F5dCwxODcyLGF1dG8sdGFibGUsMTg5NixhdXRvLHJlZG8tcnRsLDE5MjAsYXV0byxyZWRvLDE5NDQsYXV0byx1bmRvLXJ0bCwxOTY4LGF1dG8sdW5kbywxOTkyLGF1dG8sc3BlbGxjaGVja2VyLDIwMTYsYXV0bycsJ2ljb25zLnBuZycpO30pKCk7Q0tFRElUT1IubGFuZy5sYW5ndWFnZXM9e1wiYWZcIjoxLFwic3FcIjoxLFwiYXJcIjoxLFwiZXVcIjoxLFwiYm5cIjoxLFwiYnNcIjoxLFwiYmdcIjoxLFwiY2FcIjoxLFwiemgtY25cIjoxLFwiemhcIjoxLFwiaHJcIjoxLFwiY3NcIjoxLFwiZGFcIjoxLFwibmxcIjoxLFwiZW5cIjoxLFwiZW4tYXVcIjoxLFwiZW4tY2FcIjoxLFwiZW4tZ2JcIjoxLFwiZW9cIjoxLFwiZXRcIjoxLFwiZm9cIjoxLFwiZmlcIjoxLFwiZnJcIjoxLFwiZnItY2FcIjoxLFwiZ2xcIjoxLFwia2FcIjoxLFwiZGVcIjoxLFwiZGUtY2hcIjoxLFwiZWxcIjoxLFwiZ3VcIjoxLFwiaGVcIjoxLFwiaGlcIjoxLFwiaHVcIjoxLFwiaXNcIjoxLFwiaWRcIjoxLFwiaXRcIjoxLFwiamFcIjoxLFwia21cIjoxLFwia29cIjoxLFwia3VcIjoxLFwibHZcIjoxLFwibHRcIjoxLFwibWtcIjoxLFwibXNcIjoxLFwibW5cIjoxLFwibm9cIjoxLFwibmJcIjoxLFwiZmFcIjoxLFwicGxcIjoxLFwicHQtYnJcIjoxLFwicHRcIjoxLFwicm9cIjoxLFwicnVcIjoxLFwic3JcIjoxLFwic3ItbGF0blwiOjEsXCJzaVwiOjEsXCJza1wiOjEsXCJzbFwiOjEsXCJlc1wiOjEsXCJzdlwiOjEsXCJ0dFwiOjEsXCJ0aFwiOjEsXCJ0clwiOjEsXCJ1Z1wiOjEsXCJ1a1wiOjEsXCJ2aVwiOjEsXCJjeVwiOjF9O30oKSk7IiwiKGZ1bmN0aW9uICgkKSB7XG4gICAgaWYgKENLRURJVE9SICYmIENLRURJVE9SLnBsdWdpbnMgJiYgQ0tFRElUT1IucGx1Z2lucy5yZWdpc3RlcmVkICYmIENLRURJVE9SLnBsdWdpbnMucmVnaXN0ZXJlZC5jbXNwbHVnaW5zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgaWYgd2Ugc2hvdWxkIHJldHVybiBgZGl2YCBvciBgc3BhbmAgYmFzZWQgb24gdGhlXG4gICAgICogcGx1Z2luIG1hcmt1cC5cbiAgICAgKlxuICAgICAqIEBmdW5jdGlvbiBnZXRGYWtlUGx1Z2luRWxlbWVudFxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBsdWdpbk1hcmt1cCB2YWxpZCBodG1sIGhvcGVmdWxseVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IGRpdnxzcGFuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0RmFrZVBsdWdpbkVsZW1lbnQocGx1Z2luTWFya3VwKSB7XG4gICAgICAgIHZhciBpbm5lclRhZ3MgPSAocGx1Z2luTWFya3VwLm1hdGNoKC88KFtcXFNdKj8pXFxzW1xcc1xcU10qPz4vKSB8fCBbMCwgZmFsc2VdKS5zcGxpY2UoMSk7XG5cbiAgICAgICAgdmFyIGNvbnRhaW5zQW55QmxvY2tMaWtlRWxlbWVudHMgPSBpbm5lclRhZ3Muc29tZShmdW5jdGlvbiAodGFnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFnICYmIENLRURJVE9SLmR0ZC4kYmxvY2tbdGFnXTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGZha2VSZWFsVHlwZSA9ICdzcGFuJztcblxuICAgICAgICBpZiAoY29udGFpbnNBbnlCbG9ja0xpa2VFbGVtZW50cykge1xuICAgICAgICAgICAgZmFrZVJlYWxUeXBlID0gJ2Rpdic7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFrZVJlYWxUeXBlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvbiByZXBsYWNlVGFnTmFtZVxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtqUXVlcnl9IGVsZW1lbnRzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRhZ05hbWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXBsYWNlVGFnTmFtZShlbGVtZW50cywgdGFnTmFtZSkge1xuICAgICAgICBlbGVtZW50cy5lYWNoKGZ1bmN0aW9uIChpLCBlbCkge1xuICAgICAgICAgICAgdmFyIG5ld0VsZW1lbnQ7XG5cbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gJChlbCk7XG5cbiAgICAgICAgICAgIG5ld0VsZW1lbnQgPSAkKCc8JyArIHRhZ05hbWUgKyAnPicpO1xuXG4gICAgICAgICAgICAvLyBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAkLmVhY2goZWwuYXR0cmlidXRlcywgZnVuY3Rpb24gKGluZGV4LCBhdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgICAgICBuZXdFbGVtZW50LmF0dHIoYXR0cmlidXRlLm5vZGVOYW1lLCBhdHRyaWJ1dGUubm9kZVZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBjb250ZW50XG4gICAgICAgICAgICBuZXdFbGVtZW50Lmh0bWwoZWxlbWVudC5odG1sKCkpO1xuXG4gICAgICAgICAgICBlbGVtZW50LnJlcGxhY2VXaXRoKG5ld0VsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBDS0VESVRPUi5wbHVnaW5zLmFkZCgnY21zcGx1Z2lucycsIHtcblxuICAgICAgICAvLyBSZWdpc3RlciB0aGUgaWNvbnMuIFRoZXkgbXVzdCBtYXRjaCBjb21tYW5kIG5hbWVzLlxuICAgICAgICBpY29uczogJ2Ntc3BsdWdpbnMnLFxuXG4gICAgICAgIC8vIFRoZSBwbHVnaW4gaW5pdGlhbGl6YXRpb24gbG9naWMgZ29lcyBpbnNpZGUgdGhpcyBtZXRob2QuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uIChlZGl0b3IpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gQ01TLkNLRWRpdG9yLm9wdGlvbnMuc2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBwb3B1bGF0ZWQgd2l0aCBfZnJlc2hfIGNoaWxkIHBsdWdpbnNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5jaGlsZF9wbHVnaW5zID0gW107XG4gICAgICAgICAgICB0aGlzLnNldHVwQ2FuY2VsQ2xlYW51cENhbGxiYWNrKHRoaXMub3B0aW9ucyk7XG5cbiAgICAgICAgICAgIC8vIGRvbid0IGRvIGFueXRoaW5nIGlmIHRoZXJlIGFyZSBubyBwbHVnaW5zIGRlZmluZWRcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm9wdGlvbnMucGx1Z2lucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldHVwRGlhbG9nKCk7XG5cbiAgICAgICAgICAgIC8vIGFkZCB0aGUgYnV0dG9uXG4gICAgICAgICAgICB0aGlzLmVkaXRvci51aS5hZGQoJ2Ntc3BsdWdpbnMnLCBDS0VESVRPUi5VSV9QQU5FTEJVVFRPTiwge1xuICAgICAgICAgICAgICAgIHRvb2xiYXI6ICdjbXMsMCcsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMub3B0aW9ucy5sYW5nLnRvb2xiYXIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMub3B0aW9ucy5sYW5nLnRvb2xiYXIsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnY2tlX3BhbmVsYnV0dG9uX19jbXNwbHVnaW5zJyxcbiAgICAgICAgICAgICAgICBtb2RlczogeyB3eXNpd3lnOiAxIH0sXG4gICAgICAgICAgICAgICAgZWRpdG9yRm9jdXM6IDAsXG5cbiAgICAgICAgICAgICAgICBwYW5lbDoge1xuICAgICAgICAgICAgICAgICAgICBjc3M6IFtDS0VESVRPUi5za2luLmdldFBhdGgoJ2VkaXRvcicpXS5jb25jYXQodGhhdC5lZGl0b3IuY29uZmlnLmNvbnRlbnRzQ3NzKSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogeyAncm9sZSc6ICdjbXNwbHVnaW5zJywgJ2FyaWEtbGFiZWwnOiB0aGlzLm9wdGlvbnMubGFuZy5hcmlhIH1cbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBjYWxsZWQgd2hlbiBjcmVhdGluZyB0aGUgZHJvcGRvd24gbGlzdFxuICAgICAgICAgICAgICAgIG9uQmxvY2s6IGZ1bmN0aW9uIChwYW5lbCwgYmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2suZWxlbWVudC5zZXRIdG1sKHRoYXQuZWRpdG9yLnBsdWdpbnMuY21zcGx1Z2lucy5zZXR1cERyb3Bkb3duKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmNob3JzID0gJChibG9jay5lbGVtZW50LiQpLmZpbmQoJy5ja2VfcGFuZWxfbGlzdEl0ZW0gYScpO1xuXG4gICAgICAgICAgICAgICAgICAgIGFuY2hvcnMuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmFkZFBsdWdpbigkKHRoaXMpLCBwYW5lbCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBoYW5kbGUgZWRpdCBldmVudCB2aWEgY29udGV4dCBtZW51XG4gICAgICAgICAgICBpZiAodGhpcy5lZGl0b3IuY29udGV4dE1lbnUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwQ29udGV4dE1lbnUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5lZGl0b3IuYWRkQ29tbWFuZCgnY21zcGx1Z2luc0VkaXQnLCB7XG4gICAgICAgICAgICAgICAgZXhlYzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoYXQuZ2V0RWxlbWVudEZyb21TZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBsdWdpbiA9IHRoYXQuZ2V0UGx1Z2luV2lkZ2V0KGVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwbHVnaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZWRpdFBsdWdpbihwbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGhhbmRsZSBlZGl0IGV2ZW50IG9uIGRvdWJsZSBjbGlja1xuICAgICAgICAgICAgLy8gaWYgZXZlbnQgaXMgYSBqUXVlcnkgZXZlbnQgKHRvdWNoZW5kKSwgdGhhbiB3ZSBtdXRhdGVcbiAgICAgICAgICAgIC8vIGV2ZW50IGEgYml0IHNvIHdlIG1ha2UgdGhlIHBheWxvYWQgc2ltaWxhciB0byB3aGF0IGNrZWRpdG9yLmV2ZW50IHByb2R1Y2VzXG4gICAgICAgICAgICB2YXIgaGFuZGxlRWRpdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50O1xuXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICd0b3VjaGVuZCcgfHwgZXZlbnQudHlwZSA9PT0gJ2NsaWNrJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY21zUGx1Z2luTm9kZSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnY21zLXBsdWdpbicpWzBdO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHBpY2sgY2tlX3dpZGdldCBzcGFuXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuZXctY2FwXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoY21zUGx1Z2luTm9kZSkuZ2V0UGFyZW50KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuZGF0YSA9IGV2ZW50LmRhdGEgfHwge307XG4gICAgICAgICAgICAgICAgICAgIC8vIGhhdmUgdG8gZmFrZSBzZWxlY3Rpb24gdG8gYmUgYWJsZSB0byByZXBsYWNlIG1hcmt1cCBhZnRlciBlZGl0aW5nXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuZWRpdG9yLmdldFNlbGVjdGlvbigpLmZha2UoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhhdC5lZGl0b3IuZXhlY0NvbW1hbmQoJ2Ntc3BsdWdpbnNFZGl0Jyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmVkaXRvci5vbignZG91YmxlY2xpY2snLCBoYW5kbGVFZGl0KTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLm9uKCdpbnN0YW5jZVJlYWR5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIENNUy4kKCdjbXMtcGx1Z2luJywgQ01TLiQoJ2lmcmFtZS5ja2Vfd3lzaXd5Z19mcmFtZScpWzBdXG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50V2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkub24oJ2NsaWNrIHRvdWNoZW5kJywgaGFuZGxlRWRpdCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5zZXR1cERhdGFQcm9jZXNzb3IoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRFbGVtZW50RnJvbVNlbGVjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IHRoaXMuZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBzZWxlY3Rpb24uZ2V0U2VsZWN0ZWRFbGVtZW50KCkgfHxcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb24uZ2V0Q29tbW9uQW5jZXN0b3IoKS5nZXRBc2NlbmRhbnQoJ2Ntcy1wbHVnaW4nLCB0cnVlKTtcblxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0UGx1Z2luV2lkZ2V0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5nZXRBc2NlbmRhbnQoJ2Ntcy1wbHVnaW4nLCB0cnVlKSB8fCBlbGVtZW50LmZpbmRPbmUoJ2Ntcy1wbHVnaW4nKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXR1cERpYWxvZzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGRlZmluaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICBtaW5XaWR0aDogNjAwLFxuICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IDMwMCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudHM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2h0bWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sOiAnPGlmcmFtZSBzdHlsZT1cInBvc2l0aW9uOnN0YXRpYzsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJvcmRlcjpub25lO1wiIC8+J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZnJhbWUgPSAkKENLRURJVE9SLmRpYWxvZy5nZXRDdXJyZW50KCkucGFydHMuY29udGVudHMuJCkuZmluZCgnaWZyYW1lJykuY29udGVudHMoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWZyYW1lLmZpbmQoJ2Zvcm0nKS5zdWJtaXQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2F0Y2ggdGhlIHJlbG9hZCBldmVudCBhbmQgcmVhdHRhY2hcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWxvYWQgPSBDTVMuQVBJLkhlbHBlcnMucmVsb2FkQnJvd3NlcjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgQ01TLkFQSS5IZWxwZXJzLnJlbG9hZEJyb3dzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0tFRElUT1IuZGlhbG9nLmdldEN1cnJlbnQoKS5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lmluc2VydFBsdWdpbihDTVMuQVBJLkhlbHBlcnMuZGF0YUJyaWRnZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDTVMuQVBJLkhlbHBlcnMucmVsb2FkQnJvd3NlciA9IHJlbG9hZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIHNldCBkZWZhdWx0IGRlZmluaXRpb24gYW5kIG9wZW4gZGlhbG9nXG4gICAgICAgICAgICBDS0VESVRPUi5kaWFsb2cuYWRkKCdjbXNwbHVnaW5zRGlhbG9nJywgZGVmaW5pdGlvbik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0dXBEcm9wZG93bjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRwbCA9ICc8ZGl2IGNsYXNzPVwiY2tlX3BhbmVsX2Jsb2NrXCI+JztcblxuICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHRoZSBncm91cHNcbiAgICAgICAgICAgICQuZWFjaCh0aGlzLm9wdGlvbnMucGx1Z2lucywgZnVuY3Rpb24gKGksIGdyb3VwKSB7XG4gICAgICAgICAgICAgICAgLy8gYWRkIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgdHBsICs9ICc8aDEgY2xhc3M9XCJja2VfcGFuZWxfZ3JvdXB0aXRsZVwiPicgKyBncm91cC5ncm91cCArICc8L2gxPic7XG4gICAgICAgICAgICAgICAgdHBsICs9ICc8dWwgcm9sZT1cInByZXNlbnRhdGlvblwiIGNsYXNzPVwiY2tlX3BhbmVsX2xpc3RcIj4nO1xuICAgICAgICAgICAgICAgIC8vIGxvb3AgdGhyb3VnaCB0aGUgcGx1Z2luc1xuICAgICAgICAgICAgICAgICQuZWFjaChncm91cC5pdGVtcywgZnVuY3Rpb24gKGlpLCBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHRwbCArPSAnPGxpIGNsYXNzPVwiY2tlX3BhbmVsX2xpc3RJdGVtXCI+PGEgaHJlZj1cIiNcIiByZWw9XCInICsgaXRlbS50eXBlICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS50aXRsZSArICc8L2E+PC9saT4nO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRwbCArPSAnPC91bD4nO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRwbCArPSAnPC9kaXY+JztcblxuICAgICAgICAgICAgcmV0dXJuIHRwbDtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXR1cENvbnRleHRNZW51OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLmFkZE1lbnVHcm91cCgnY21zcGx1Z2luc0dyb3VwJyk7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5hZGRNZW51SXRlbSgnY21zcGx1Z2luc0l0ZW0nLCB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMub3B0aW9ucy5sYW5nLmVkaXQsXG4gICAgICAgICAgICAgICAgaWNvbjogQ01TLkNLRWRpdG9yLm9wdGlvbnMuc2V0dGluZ3Muc3RhdGljX3VybCArICcvY2tlZGl0b3JfcGx1Z2lucy9jbXNwbHVnaW5zL2ljb25zL2Ntc3BsdWdpbnMucG5nJyxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAnY21zcGx1Z2luc0VkaXQnLFxuICAgICAgICAgICAgICAgIGdyb3VwOiAnY21zcGx1Z2luc0dyb3VwJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLnJlbW92ZU1lbnVJdGVtKCdpbWFnZScpO1xuXG4gICAgICAgICAgICB0aGlzLmVkaXRvci5jb250ZXh0TWVudS5hZGRMaXN0ZW5lcihmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciBwbHVnaW4gPSB0aGF0LmdldFBsdWdpbldpZGdldChlbGVtZW50KTtcblxuICAgICAgICAgICAgICAgIGlmIChwbHVnaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgY21zcGx1Z2luc0l0ZW06IENLRURJVE9SLlRSSVNUQVRFX09GRiB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGVkaXRQbHVnaW46IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgaWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKTtcblxuICAgICAgICAgICAgdGhpcy5lZGl0b3Iub3BlbkRpYWxvZygnY21zcGx1Z2luc0RpYWxvZycpO1xuICAgICAgICAgICAgdmFyIGJvZHkgPSBDTVMuJChkb2N1bWVudCk7XG5cbiAgICAgICAgICAgIC8vIG5vdyB0d2VhayBpbiBkeW5hbWljIHN0dWZmXG4gICAgICAgICAgICB2YXIgZGlhbG9nID0gQ0tFRElUT1IuZGlhbG9nLmdldEN1cnJlbnQoKTtcblxuICAgICAgICAgICAgZGlhbG9nLnJlc2l6ZShib2R5LndpZHRoKCkgKiAwLjgsIGJvZHkuaGVpZ2h0KCkgKiAwLjcpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW1hZ2ljLW51bWJlcnNcbiAgICAgICAgICAgICQoZGlhbG9nLmdldEVsZW1lbnQoKS4kKS5hZGRDbGFzcygnY21zLWNrZWRpdG9yLWRpYWxvZycpO1xuICAgICAgICAgICAgJChkaWFsb2cucGFydHMudGl0bGUuJCkudGV4dCh0aGlzLm9wdGlvbnMubGFuZy5lZGl0KTtcblxuICAgICAgICAgICAgdmFyIHRleHRQbHVnaW5VcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICAgICAgICAgIHZhciBjaGlsZFBsdWdpblVybCA9IHRleHRQbHVnaW5VcmwucmVwbGFjZShcbiAgICAgICAgICAgICAgICAvKGFkZC1wbHVnaW58ZWRpdC1wbHVnaW4pLiokLyxcbiAgICAgICAgICAgICAgICAnZWRpdC1wbHVnaW4vJyArIGlkICsgJy8/X3BvcHVwPTEmbm9fcHJldmlldydcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICQoZGlhbG9nLnBhcnRzLmNvbnRlbnRzLiQpLmZpbmQoJ2lmcmFtZScpLmF0dHIoJ3NyYycsIGNoaWxkUGx1Z2luVXJsKVxuICAgICAgICAgICAgICAgIC5iaW5kKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudHMgPSAkKHRoaXMpLmNvbnRlbnRzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29udGVudHMuZmluZCgnYm9keScpLmFkZENsYXNzKCdja2VkaXRvci1wb3B1cCcpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50cy5maW5kKCcuc3VibWl0LXJvdycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudHMuZmluZCgnI2NvbnRhaW5lcicpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbWluLXdpZHRoJzogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdwYWRkaW5nJzogMFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRQbHVnaW46IGZ1bmN0aW9uIChpdGVtLCBwYW5lbCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyBoaWRlIHRoZSBwYW5lbFxuICAgICAgICAgICAgcGFuZWwuaGlkZSgpO1xuXG4gICAgICAgICAgICB0aGlzLmVkaXRvci5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy5lZGl0b3IuZmlyZSgnc2F2ZVNuYXBzaG90Jyk7XG5cbiAgICAgICAgICAgIC8vIGdhdGhlciBkYXRhXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcl9pZDogdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyX2lkLFxuICAgICAgICAgICAgICAgIHBsdWdpbl90eXBlOiBpdGVtLmF0dHIoJ3JlbCcpLFxuICAgICAgICAgICAgICAgIHBsdWdpbl9wYXJlbnQ6IHRoaXMub3B0aW9ucy5wbHVnaW5faWQsXG4gICAgICAgICAgICAgICAgcGx1Z2luX2xhbmd1YWdlOiB0aGlzLm9wdGlvbnMucGx1Z2luX2xhbmd1YWdlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGF0LmFkZFBsdWdpbkRpYWxvZyhpdGVtLCBkYXRhKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRQbHVnaW5EaWFsb2c6IGZ1bmN0aW9uIChpdGVtLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgYm9keSA9ICQoZG9jdW1lbnQpO1xuICAgICAgICAgICAgLy8gb3BlbiB0aGUgZGlhbG9nXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRfdGV4dCA9IHRoaXMuZWRpdG9yLmdldFNlbGVjdGlvbigpLmdldFNlbGVjdGVkVGV4dCgpO1xuXG4gICAgICAgICAgICB0aGlzLmVkaXRvci5vcGVuRGlhbG9nKCdjbXNwbHVnaW5zRGlhbG9nJyk7XG5cbiAgICAgICAgICAgIC8vIG5vdyB0d2VhayBpbiBkeW5hbWljIHN0dWZmXG4gICAgICAgICAgICB2YXIgZGlhbG9nID0gQ0tFRElUT1IuZGlhbG9nLmdldEN1cnJlbnQoKTtcblxuICAgICAgICAgICAgZGlhbG9nLnJlc2l6ZShib2R5LndpZHRoKCkgKiAwLjgsIGJvZHkuaGVpZ2h0KCkgKiAwLjcpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW1hZ2ljLW51bWJlcnNcbiAgICAgICAgICAgICQoZGlhbG9nLmdldEVsZW1lbnQoKS4kKS5hZGRDbGFzcygnY21zLWNrZWRpdG9yLWRpYWxvZycpO1xuICAgICAgICAgICAgJChkaWFsb2cucGFydHMudGl0bGUuJCkudGV4dCh0aGlzLm9wdGlvbnMubGFuZy5hZGQpO1xuICAgICAgICAgICAgJChkaWFsb2cucGFydHMuY29udGVudHMuJCkuZmluZCgnaWZyYW1lJykuYXR0cignc3JjJywgdGhpcy5vcHRpb25zLmFkZF9wbHVnaW5fdXJsICsgJz8nICsgJC5wYXJhbShkYXRhKSlcbiAgICAgICAgICAgICAgICAuYmluZCgnbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRzID0gJCh0aGlzKS5jb250ZW50cygpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzLmZpbmQoJy5zdWJtaXQtcm93JykuaGlkZSgpLmVuZCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnI2NvbnRhaW5lcicpLmNzcygnbWluLXdpZHRoJywgMCkuY3NzKCdwYWRkaW5nJywgMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0cyA9IGNvbnRlbnRzLmZpbmQoJy5qcy1ja2VkaXRvci11c2Utc2VsZWN0ZWQtdGV4dCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5wdXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRzID0gY29udGVudHMuZmluZCgnI2lkX25hbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGlucHV0cy52YWwoKSAmJiBpbnB1dHMudmFsKCkudHJpbSgpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRzLnZhbChzZWxlY3RlZF90ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluc2VydFBsdWdpbjogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogdGhhdC5vcHRpb25zLnJlbmRlcl9wbHVnaW5fdXJsLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoYXQub3B0aW9ucy5hY3Rpb25fdG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbjogZGF0YS5wbHVnaW5faWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAvLyBpbiBjYXNlIGl0J3MgYSBmcmVzaCB0ZXh0IHBsdWdpbiBjaGlsZHJlbiBkb24ndCBoYXZlIHRvIGJlXG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlZCBzZXBhcmF0ZWx5XG4gICAgICAgICAgICAgICAgaWYgKCF0aGF0Lm9wdGlvbnMuZGVsZXRlX29uX2NhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmNoaWxkX3BsdWdpbnMucHVzaChkYXRhLnBsdWdpbl9pZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhhdC5lZGl0b3IuaW5zZXJ0SHRtbChyZXMsICd1bmZpbHRlcmVkX2h0bWwnKTtcbiAgICAgICAgICAgICAgICB0aGF0LmVkaXRvci5maXJlKCd1cGRhdGVTbmFwc2hvdCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdXAgY2xlYW51cCByZXF1ZXN0cy4gSWYgdGhlIHBsdWdpbiBpdHNlbGYgb3IgY2hpbGQgcGx1Z2luIHdhcyBjcmVhdGVkIGFuZCB0aGVuXG4gICAgICAgICAqIGNyZWF0aW9uIHdhcyBjYW5jZWxsZWQgLSB3ZSBuZWVkIHRvIGNsZWFuIHVwIGNyZWF0ZWQgcGx1Z2lucy5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1ldGhvZCBzZXR1cENhbmNlbENsZWFudXBDYWxsYmFja1xuICAgICAgICAgKiBAcHVibGljXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIHBsdWdpbiBkYXRhXG4gICAgICAgICAqL1xuICAgICAgICBzZXR1cENhbmNlbENsZWFudXBDYWxsYmFjazogZnVuY3Rpb24gc2V0dXBDYW5jZWxDbGVhbnVwQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBpZiAoIXdpbmRvdy5wYXJlbnQgfHwgIXdpbmRvdy5wYXJlbnQuQ01TIHx8ICF3aW5kb3cucGFyZW50LkNNUy5BUEkgfHwgIXdpbmRvdy5wYXJlbnQuQ01TLkFQSS5IZWxwZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIENNUyA9IHdpbmRvdy5wYXJlbnQuQ01TO1xuICAgICAgICAgICAgdmFyIGNhbmNlbE1vZGFsQ2FsbGJhY2sgPSBmdW5jdGlvbiBjYW5jZWxNb2RhbENhbGxiYWNrKGUsIG9wdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoYXQub3B0aW9ucy5kZWxldGVfb25fY2FuY2VsICYmICF0aGF0LmNoaWxkX3BsdWdpbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIENNUy5BUEkuVG9vbGJhci5zaG93TG9hZGVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGF0Lm9wdGlvbnMuYWN0aW9uX3Rva2VuXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmICghdGhhdC5vcHRpb25zLmRlbGV0ZV9vbl9jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5jaGlsZF9wbHVnaW5zID0gdGhhdC5jaGlsZF9wbHVnaW5zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGF0Lm9wdGlvbnMuY2FuY2VsX3BsdWdpbl91cmwsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIC8vIHVzZSAnY2hpbGRfcGx1Z2lucycgaW5zdGVhZCBvZiBkZWZhdWx0ICdjaGlsZF9wbHVnaW5zW10nXG4gICAgICAgICAgICAgICAgICAgIHRyYWRpdGlvbmFsOiB0cnVlXG4gICAgICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIENNUy5BUEkuSGVscGVycy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb2RhbC1jbG9zZS50ZXh0LXBsdWdpbi0nICsgdGhhdC5vcHRpb25zLnBsdWdpbl9pZCk7XG4gICAgICAgICAgICAgICAgICAgIG9wdHMuaW5zdGFuY2UuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgQ01TLkFQSS5NZXNzYWdlcy5vcGVuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5yZXNwb25zZVRleHQgKyAnIHwgJyArIHJlcy5zdGF0dXMgKyAnICcgKyByZXMuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBDTVMuQVBJLkhlbHBlcnMuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAnbW9kYWwtY2xvc2UudGV4dC1wbHVnaW4tJyArIHRoYXQub3B0aW9ucy5wbHVnaW5faWQsXG4gICAgICAgICAgICAgICAgY2FuY2VsTW9kYWxDYWxsYmFja1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXR1cERhdGFQcm9jZXNzb3I6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgICAgICAgICAgLy8gcHJpb3JpdGllcyBvZiBjYWxsYmFjayBleGVjdXRpb24sIHNlZSBodHRwOi8vZG9jcy5ja2VkaXRvci5jb20vIyEvYXBpL0NLRURJVE9SLmVkaXRvci1ldmVudC10b0h0bWxcbiAgICAgICAgICAgIHZhciBCRUZPUkVfUFJPQ0VTU0lOR19TVEFSVEVEID0gMTtcbiAgICAgICAgICAgIHZhciBCRUZPUkVfTUFSS1VQX0lTX1BBUlNFRCA9IDQ7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhpcyBvdmVycmlkZSBpcyByZXF1aXJlZCBmb3IgdGhlIGlubGluZSBwbHVnaW5zIHRoYXQgaGF2ZSBwcmVjZWRpbmcgc3BhY2UsIGJlY2F1c2Ugb3RoZXJ3aXNlIENLRWRpdG9yXG4gICAgICAgICAgICAgKiB3b3VsZCByZW1vdmUgdGhhdCBzcGFjZSB3aGlsZSBwYXJzaW5nXG4gICAgICAgICAgICAgKiBodG1sLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIFJlZjogaHR0cHM6Ly9naXRodWIuY29tL2NrZWRpdG9yL2NrZWRpdG9yLWRldi9ibG9iL21hc3Rlci9jb3JlL2h0bWxwYXJzZXIvZnJhZ21lbnQuanMjTDQ4NFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQgPSBDS0VESVRPUi50b29scy5vdmVycmlkZShDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQsIGZ1bmN0aW9uIChvcmlnaW5hbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobmFtZSwgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbC5jYWxsKHRoaXMsIG5hbWUsIGF0dHJpYnV0ZXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAnY21zLXBsdWdpbicgJiYgYXR0cmlidXRlc1snZGF0YS1ja2UtcmVhbC1lbGVtZW50LXR5cGUnXSA9PT0gJ3NwYW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8uaXNCbG9ja0xpa2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAZnVuY3Rpb24gaXNCbG9ja0xpa2VDaGlsZHJlblxuICAgICAgICAgICAgICogQHB1YmxpY1xuICAgICAgICAgICAgICogQHBhcmFtIHtDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnR9IGVsZW1lbnRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBpc0Jsb2NrTGlrZUNoaWxkcmVuKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5hdHRyaWJ1dGVzICYmIGVsZW1lbnQuYXR0cmlidXRlc1snZGF0YS1ja2UtcmVhbC1lbGVtZW50LXR5cGUnXSA9PT0gJ2Rpdic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLmRhdGFQcm9jZXNzb3IuZGF0YUZpbHRlci5hZGRSdWxlcyhcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChDS0VESVRPUi5wbHVnaW5zLndpZGdldC5pc1BhcnNlcldpZGdldFdyYXBwZXIoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNtc1BsdWdpbk5vZGUgPSBlbGVtZW50LmdldEZpcnN0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQmxvY2tMaWtlQ2hpbGRyZW4oY21zUGx1Z2luTm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuZXctY2FwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3V3JhcHBlciA9IG5ldyBDS0VESVRPUi5odG1sUGFyc2VyLmVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5leHRlbmQoe30sIGVsZW1lbnQuYXR0cmlidXRlcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZWRpdG9yLndpZGdldHMucmVnaXN0ZXJlZC5jbXN3aWRnZXQuaW5saW5lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdXcmFwcGVyLmNoaWxkcmVuID0gZWxlbWVudC5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1dyYXBwZXIucmVtb3ZlQ2xhc3MoJ2NrZV93aWRnZXRfaW5saW5lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdXcmFwcGVyLnJlbW92ZUNsYXNzKCdja2Vfd2lkZ2V0X2ZvcmNlX2Jsb2NrJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdXcmFwcGVyLmFkZENsYXNzKCdja2Vfd2lkZ2V0X2Jsb2NrJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbXNQbHVnaW5Ob2RlLmF0dHJpYnV0ZXNbJ2RhdGEtY2tlLXJlYWwtZWxlbWVudC10eXBlJ10gPSAnZGl2JztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld1dyYXBwZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVkaXRvci53aWRnZXRzLnJlZ2lzdGVyZWQuY21zd2lkZ2V0LmlubGluZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNtc1BsdWdpbk5vZGUuYXR0cmlidXRlc1snZGF0YS1ja2UtcmVhbC1lbGVtZW50LXR5cGUnXSA9ICdzcGFuJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHk6IDEsXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5VG9BbGw6IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBuZWVkIHRvIHVwZGF0ZSBjbXMtcGx1Z2luLW5vZGVzIHdpdGggZmFrZSBcInJlYWwgdHlwZVwiIHNvXG4gICAgICAgICAgICAvLyBja2VkaXRvciB0cmVhdHMgdGhlbSBhcyBmbG93IC8gcGhyYXNpbmcgZWxlbWVudHMgY29ycmVjdGx5XG4gICAgICAgICAgICAvLyArIHdlIGNoZWNrIGlmIHBsdWdpbiBtYXJrdXAgc2hvdWxkIGJlIHJlbmRlcmVkIG9yIG5vdFxuICAgICAgICAgICAgdGhpcy5lZGl0b3Iub24oJ3RvSHRtbCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gbm93IGkgaGF2ZSB0d28gcHJvYmxlbXNcbiAgICAgICAgICAgICAgICB2YXIgbmV3TWFya3VwID0gZS5kYXRhLmRhdGFWYWx1ZS5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAvPGNtcy1wbHVnaW4oLio/KT4oW1xcc1xcU10qPyk8XFwvY21zLXBsdWdpbj4vZ2ksXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChhbGwsIGF0dHJpYnV0ZXMsIHBsdWdpbk1hcmt1cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZha2VSZWFsVHlwZSA9IGdldEZha2VQbHVnaW5FbGVtZW50KHBsdWdpbk1hcmt1cCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzLm1hdGNoKC9yZW5kZXItcGx1Z2luPVtcIiddP2ZhbHNlL2dpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnPGNtcy1wbHVnaW4gZGF0YS1ja2UtcmVhbC1lbGVtZW50LXR5cGU9XCInICsgZmFrZVJlYWxUeXBlICsgJ1wiICcgKyBhdHRyaWJ1dGVzICsgJz4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8JyArIGZha2VSZWFsVHlwZSArICcgY2xhc3M9XCJjbXMtY2tlZGl0b3ItcGx1Z2luLWxhYmVsXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcy5yZXBsYWNlKC9bXFxzXFxTXSphbHQ9W1wiJ10oW1xcc1xcU10qPylbJ1wiXVtcXHNcXFNdKi8sICckMScpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8LycgKyBmYWtlUmVhbFR5cGUgKyAnPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9jbXMtcGx1Z2luPic7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnPGNtcy1wbHVnaW4gZGF0YS1ja2UtcmVhbC1lbGVtZW50LXR5cGU9XCInICsgZmFrZVJlYWxUeXBlICsgJ1wiICcgKyBhdHRyaWJ1dGVzICsgJz4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5NYXJrdXAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Ntcy1wbHVnaW4+JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAvLyBpbiBjYXNlIHdlIGhhdmUgYSBzdGFsZSBtYXJrdXAgd2l0aCA8cD4gdGFnIHdyYXBwZWQgYXJvdW5kXG4gICAgICAgICAgICAgICAgLy8gd2Ugd2FudCB0byBhdm9pZCBhIHNpdHVhdGlvbiB3aGVyZSBicm93c2VyIHdvdWxkIHRyeSB0byB1bndyYXAgdGhlIHRhZ3MgaW4gYSB3YXkgdGhhdCB3b3VsZFxuICAgICAgICAgICAgICAgIC8vIGJyZWFrIHRoZSBtYXJrdXAuIHdoYXQgd2UgZG8gaXMgd2UgcmVwbGFjZSA8Y21zLXBsdWdpbj4gdGFncyB3aXRoIGRpdnMgaWYgdGhhdCBpcyBuZWNlc3NhcnksXG4gICAgICAgICAgICAgICAgLy8gdW53cmFwIHRoZW0gd2l0aCBqUXVlcnkgKHdoaWNoIHVzZXMgYnJvd3NlciBtZWNoYW5pc20pIGFuZCB0aGVuIHJlcGxhY2UgdGhlIGRpdnMgYmFja1xuICAgICAgICAgICAgICAgIGlmIChuZXdNYXJrdXAubWF0Y2goLzxjbXMtcGx1Z2luW14+XSooPz1kYXRhLWNrZS1yZWFsLWVsZW1lbnQtdHlwZT1cXFwiZGl2KS8pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gICAgICAgICAgICAgICAgICAgIHZhciBibG9ja0xldmVsUGx1Z2luUmVnZXggPSAvPGNtcy1wbHVnaW4oW14+XSooPz1kYXRhLWNrZS1yZWFsLWVsZW1lbnQtdHlwZT1cXFwiZGl2KS4qPz4uKj88XFwvKWNtcy1wbHVnaW4+L2c7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHVud3JhcHBlZE1hcmt1cCA9IG5ld01hcmt1cC5yZXBsYWNlKGJsb2NrTGV2ZWxQbHVnaW5SZWdleCwgJzxkaXYkMWRpdj4nKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gaGF2ZSB0byBjcmVhdGUgYSB3cmFwcGVyLCBvdGhlcndpc2Ugd2Ugd29uJ3QgYmUgYWJsZSB0byByZXR1cm4gbWFya3VwIGJhY2tcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVud3JhcHBlZEVsZW1lbnRzV3JhcHBlciA9ICQodW53cmFwcGVkTWFya3VwKS53cmFwQWxsKCc8ZGl2PicpLnBhcmVudCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgd3JhcHBlcnMgPSB1bndyYXBwZWRFbGVtZW50c1dyYXBwZXIuZmluZCgnZGl2W2RhdGEtY2tlLXJlYWwtZWxlbWVudC10eXBlPVwiZGl2XCJdJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVwbGFjZVRhZ05hbWUod3JhcHBlcnMsICdjbXMtcGx1Z2luJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3TWFya3VwID0gdW53cmFwcGVkRWxlbWVudHNXcmFwcGVyLmh0bWwoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlLmRhdGEuZGF0YVZhbHVlID0gbmV3TWFya3VwO1xuICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgQkVGT1JFX01BUktVUF9JU19QQVJTRUQpO1xuXG4gICAgICAgICAgICB0aGlzLmVkaXRvci5vbigndG9IdG1sJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIHJlc2V0IHdpZGdldHMgdG8gaW5saW5lIGFnYWluIHRvIGF2b2lkIGNyZWF0aW5nIGJsb2NrLWxldmVsIGlubGluZSB3aWRnZXRcbiAgICAgICAgICAgICAgICBpZiAodGhhdC5lZGl0b3Iud2lkZ2V0cyAmJiB0aGF0LmVkaXRvci53aWRnZXRzLnJlZ2lzdGVyZWQgJiYgdGhhdC5lZGl0b3Iud2lkZ2V0cy5yZWdpc3RlcmVkLmNtc3dpZGdldCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmVkaXRvci53aWRnZXRzLnJlZ2lzdGVyZWQuY21zd2lkZ2V0LmlubGluZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgQkVGT1JFX1BST0NFU1NJTkdfU1RBUlRFRCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKENNUy4kKTtcbiIsIihmdW5jdGlvbiAoJCkge1xuICAgIC8vIENNUy4kIHdpbGwgYmUgcGFzc2VkIGZvciAkXG4gICAgJChmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDTVMuQ0tFZGl0b3JcbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uOiBBZGRzIGNtcyBzcGVjaWZpYyBwbHVnaW5zIHRvIENLRWRpdG9yXG4gICAgICAgICAqL1xuICAgICAgICBDTVMuQ0tFZGl0b3IgPSB7XG5cbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAvLyBja2VkaXRvciBkZWZhdWx0IHNldHRpbmdzLCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IENLRURJVE9SX1NFVFRJTkdTXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U6ICdlbicsXG4gICAgICAgICAgICAgICAgc2tpbjogJ21vb25vJyxcbiAgICAgICAgICAgICAgICB0b29sYmFyX0NNUzogW1xuICAgICAgICAgICAgICAgICAgICBbJ1VuZG8nLCAnUmVkbyddLFxuICAgICAgICAgICAgICAgICAgICBbJ2Ntc3BsdWdpbnMnLCAnY21zd2lkZ2V0JywgJy0nLCAnU2hvd0Jsb2NrcyddLFxuICAgICAgICAgICAgICAgICAgICBbJ0Zvcm1hdCcsICdTdHlsZXMnXSxcbiAgICAgICAgICAgICAgICAgICAgWydUZXh0Q29sb3InLCAnQkdDb2xvcicsICctJywgJ1Bhc3RlVGV4dCcsICdQYXN0ZUZyb21Xb3JkJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnTWF4aW1pemUnLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICcvJyxcbiAgICAgICAgICAgICAgICAgICAgWydCb2xkJywgJ0l0YWxpYycsICdVbmRlcmxpbmUnLCAnLScsICdTdWJzY3JpcHQnLCAnU3VwZXJzY3JpcHQnLCAnLScsICdSZW1vdmVGb3JtYXQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydKdXN0aWZ5TGVmdCcsICdKdXN0aWZ5Q2VudGVyJywgJ0p1c3RpZnlSaWdodCcsICdKdXN0aWZ5QmxvY2snXSxcbiAgICAgICAgICAgICAgICAgICAgWydIb3Jpem9udGFsUnVsZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ051bWJlcmVkTGlzdCcsICdCdWxsZXRlZExpc3QnLCAnLScsICdPdXRkZW50JywgJ0luZGVudCcsICctJywgJ1RhYmxlJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnU291cmNlJ11cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHRvb2xiYXJfSFRNTEZpZWxkOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnVW5kbycsICdSZWRvJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnU2hvd0Jsb2NrcyddLFxuICAgICAgICAgICAgICAgICAgICBbJ0Zvcm1hdCcsICdTdHlsZXMnXSxcbiAgICAgICAgICAgICAgICAgICAgWydUZXh0Q29sb3InLCAnQkdDb2xvcicsICctJywgJ1Bhc3RlVGV4dCcsICdQYXN0ZUZyb21Xb3JkJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnTWF4aW1pemUnLCAnJ10sXG4gICAgICAgICAgICAgICAgICAgICcvJyxcbiAgICAgICAgICAgICAgICAgICAgWydCb2xkJywgJ0l0YWxpYycsICdVbmRlcmxpbmUnLCAnLScsICdTdWJzY3JpcHQnLCAnU3VwZXJzY3JpcHQnLCAnLScsICdSZW1vdmVGb3JtYXQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydKdXN0aWZ5TGVmdCcsICdKdXN0aWZ5Q2VudGVyJywgJ0p1c3RpZnlSaWdodCcsICdKdXN0aWZ5QmxvY2snXSxcbiAgICAgICAgICAgICAgICAgICAgWydIb3Jpem9udGFsUnVsZSddLFxuICAgICAgICAgICAgICAgICAgICBbJ0xpbmsnLCAnVW5saW5rJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnTnVtYmVyZWRMaXN0JywgJ0J1bGxldGVkTGlzdCcsICctJywgJ091dGRlbnQnLCAnSW5kZW50JywgJy0nLCAnVGFibGUnXSxcbiAgICAgICAgICAgICAgICAgICAgWydTb3VyY2UnXVxuICAgICAgICAgICAgICAgIF0sXG5cbiAgICAgICAgICAgICAgICBhbGxvd2VkQ29udGVudDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0b29sYmFyQ2FuQ29sbGFwc2U6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlbW92ZVBsdWdpbnM6ICdyZXNpemUnLFxuICAgICAgICAgICAgICAgIGV4dHJhUGx1Z2luczogJydcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uIChjb250YWluZXIsIG9wdGlvbnMsIHNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQoJyMnICsgY29udGFpbmVyKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gJCgnIycgKyBjb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYWRkaXRpb25hbCBzZXR0aW5ncyB0byBvcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy50b29sYmFyID0gc2V0dGluZ3MudG9vbGJhcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoZmFsc2UsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiBzZXR0aW5nc1xuICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBleHRyYSBwbHVnaW5zIHRoYXQgd2UgYWJzb2x1dGVseSBtdXN0IGhhdmVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmV4dHJhUGx1Z2lucyA9IHRoaXMub3B0aW9ucy5leHRyYVBsdWdpbnMgKz1cbiAgICAgICAgICAgICAgICAgICAgICAgICcsY21zcGx1Z2lucyxjbXN3aWRnZXQsY21zcmVzaXplLHdpZGdldCc7XG5cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY21zLXBsdWdpbicpO1xuICAgICAgICAgICAgICAgICAgICBDS0VESVRPUi5kdGRbJ2Ntcy1wbHVnaW4nXSA9IENLRURJVE9SLmR0ZC5kaXY7XG4gICAgICAgICAgICAgICAgICAgIENLRURJVE9SLmR0ZC4kaW5saW5lWydjbXMtcGx1Z2luJ10gPSAxO1xuICAgICAgICAgICAgICAgICAgICAvLyBoYXMgdG8gYmUgaGVyZSwgb3RoZXJ3aXNlIGV4dHJhIDxwPiB0YWdzIGFwcGVhclxuICAgICAgICAgICAgICAgICAgICBDS0VESVRPUi5kdGQuJG5vbkVkaXRhYmxlWydjbXMtcGx1Z2luJ10gPSAxO1xuICAgICAgICAgICAgICAgICAgICBDS0VESVRPUi5kdGQuJHRyYW5zcGFyZW50WydjbXMtcGx1Z2luJ10gPSAxO1xuICAgICAgICAgICAgICAgICAgICBDS0VESVRPUi5kdGQuYm9keVsnY21zLXBsdWdpbiddID0gMTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYWRkaXRpb25hbCBwbHVnaW5zIChhdXRvbG9hZHMgcGx1Z2lucy5qcylcbiAgICAgICAgICAgICAgICAgICAgQ0tFRElUT1Iuc2tpbi5hZGRJY29uKCdjbXNwbHVnaW5zJywgc2V0dGluZ3Muc3RhdGljX3VybCArXG4gICAgICAgICAgICAgICAgICAgICAgICAnL2NrZWRpdG9yX3BsdWdpbnMvY21zcGx1Z2lucy9pY29ucy9jbXNwbHVnaW5zLnBuZycpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbmRlciBja2VkaXRvclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRvciA9IENLRURJVE9SLnJlcGxhY2UoY29udGFpbmVyLCB0aGlzLm9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhZGRpdGlvbmFsIHN0eWxpbmdcbiAgICAgICAgICAgICAgICAgICAgQ0tFRElUT1Iub24oJ2luc3RhbmNlUmVhZHknLCAkLnByb3h5KENNUy5DS0VkaXRvciwgJ3NldHVwJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8vIHNldHVwIGlzIGNhbGxlZCBhZnRlciBja2VkaXRvciBoYXMgYmVlbiBpbml0aWFsaXplZFxuICAgICAgICAgICAgc2V0dXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBhdXRvIG1heGltaXplIG1vZGFsIGlmIGFsb25lIGluIGEgbW9kYWxcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIHdpbiA9IHdpbmRvdy5wYXJlbnQgfHwgd2luZG93O1xuICAgICAgICAgICAgICAgIC8vIDcwcHggaXMgaGFyZGNvZGVkIHRvIG1ha2UgaXQgbW9yZSBwZXJmb3JtYW50LiAyMHB4ICsgMjBweCAtIHBhZGRpbmdzLCAzMHB4IGxhYmVsIGhlaWdodFxuICAgICAgICAgICAgICAgIHZhciBUT09MQkFSX0hFSUdIVF9XSVRIX1BBRERJTkdTID0gNzA7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNBbG9uZUluTW9kYWwoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmVkaXRvci5yZXNpemUoJzEwMCUnLCB3aW4uQ01TLiQoJy5jbXMtbW9kYWwtZnJhbWUnKS5oZWlnaHQoKSAtIFRPT0xCQVJfSEVJR0hUX1dJVEhfUEFERElOR1MpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRvci5leGVjQ29tbWFuZCgnbWF4aW1pemUnKTtcbiAgICAgICAgICAgICAgICAgICAgd2luLkNNUy5BUEkuSGVscGVycy5hZGRFdmVudExpc3RlbmVyKCdtb2RhbC1tYXhpbWl6ZWQgbW9kYWwtcmVzdG9yZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJCgnLmNrZV9tYXhpbWl6ZWQnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lZGl0b3IucmVzaXplKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luLkNNUy4kKCcuY21zLW1vZGFsLWZyYW1lJykuaGVpZ2h0KCkgLSBUT09MQkFSX0hFSUdIVF9XSVRIX1BBRERJTkdTXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvbWV0aW1lcyB0aHJvd3MgZXJyb3JzIGlmIG1vZGFsIHdpdGggdGV4dCBwbHVnaW4gaXMgY2xvc2VkIHRvbyBmYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGFkZCBjc3MgdHdla3MgdG8gdGhlIGVkaXRvclxuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGVzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzaXppbmcoKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHN0eWxlczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIGFkZCBzdHlsaW5nIHRvIHNvdXJjZSBhbmQgZnVsbHNjcmVlbiB2aWV3XG4gICAgICAgICAgICAgICAgJCgnLmNrZV9idXR0b25fX21heGltaXplLCAuY2tlX2J1dHRvbl9fc291cmNlJykucGFyZW50KClcbiAgICAgICAgICAgICAgICAgICAgLmNzcygnbWFyZ2luLXJpZ2h0JywgMCkucGFyZW50KClcbiAgICAgICAgICAgICAgICAgICAgLmNzcygnZmxvYXQnLCAncmlnaHQnKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIF9yZXNpemluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdwb2ludGVyZG93bicsICcuY21zLWNrZWRpdG9yLXJlc2l6ZXInLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBDTVMuJC5FdmVudCgnbW91c2Vkb3duJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgJC5leHRlbmQoZXZlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmVlblg6IGUub3JpZ2luYWxFdmVudC5zY3JlZW5YLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NyZWVuWTogZS5vcmlnaW5hbEV2ZW50LnNjcmVlbllcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykudHJpZ2dlcihldmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBfaXNBbG9uZUluTW9kYWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYm9keSA9IHRoaXMuY29udGFpbmVyLmNsb3Nlc3QoJ2JvZHknKTtcblxuICAgICAgICAgICAgICAgIC8vIHJldHVybiB0cnVlIGlmIHRoZSBja2VkaXRvciBpcyBhbG9uZSBpbiBhIG1vZGFsIHBvcHVwXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvZHkuaXMoJy5hcHAtZGphbmdvY21zX3RleHRfY2tlZGl0b3IubW9kZWwtdGV4dCcpIHx8IC8vIERqYW5nbyA+PSAxLjdcbiAgICAgICAgICAgICAgICAgICAgYm9keS5pcygnLmRqYW5nb2Ntc190ZXh0X2NrZWRpdG9yLXRleHQnKTsgLy8gRGphbmdvIDwgMS43XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG59KShDTVMuJCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
